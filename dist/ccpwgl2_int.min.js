!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(window,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./index.js")}({"../node_modules/core-js/internals/a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"../node_modules/core-js/internals/a-possible-prototype.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"../node_modules/core-js/internals/add-to-unscopables.js":function(e,t,r){var i=r("../node_modules/core-js/internals/well-known-symbol.js"),n=r("../node_modules/core-js/internals/object-create.js"),a=r("../node_modules/core-js/internals/object-define-property.js"),o=i("unscopables"),s=Array.prototype;null==s[o]&&a.f(s,o,{configurable:!0,value:n(null)}),e.exports=function(e){s[o][e]=!0}},"../node_modules/core-js/internals/advance-string-index.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/string-multibyte.js").charAt;e.exports=function(e,t,r){return t+(r?i(e,t).length:1)}},"../node_modules/core-js/internals/an-instance.js":function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},"../node_modules/core-js/internals/an-object.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},"../node_modules/core-js/internals/array-buffer-native.js":function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"../node_modules/core-js/internals/array-buffer-view-core.js":function(e,t,r){"use strict";var i,n=r("../node_modules/core-js/internals/array-buffer-native.js"),a=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/is-object.js"),l=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/classof.js"),c=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),f=r("../node_modules/core-js/internals/redefine.js"),d=r("../node_modules/core-js/internals/object-define-property.js").f,h=r("../node_modules/core-js/internals/object-get-prototype-of.js"),m=r("../node_modules/core-js/internals/object-set-prototype-of.js"),b=r("../node_modules/core-js/internals/well-known-symbol.js"),p=r("../node_modules/core-js/internals/uid.js"),v=o.Int8Array,g=v&&v.prototype,y=o.Uint8ClampedArray,w=y&&y.prototype,_=v&&h(v),E=g&&h(g),T=Object.prototype,S=T.isPrototypeOf,j=b("toStringTag"),R=p("TYPED_ARRAY_TAG"),P=n&&!!m&&"Opera"!==u(o.opera),x=!1,z={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},O=function(e){return s(e)&&l(z,u(e))};for(i in z)o[i]||(P=!1);if((!P||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},P))for(i in z)o[i]&&m(o[i],_);if((!P||!E||E===T)&&(E=_.prototype,P))for(i in z)o[i]&&m(o[i].prototype,E);if(P&&h(w)!==E&&m(w,E),a&&!l(E,j))for(i in x=!0,d(E,j,{get:function(){return s(this)?this[R]:void 0}}),z)o[i]&&c(o[i],R,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:x&&R,aTypedArray:function(e){if(O(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(m){if(S.call(_,e))return e}else for(var t in z)if(l(z,i)){var r=o[t];if(r&&(e===r||S.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(a){if(r)for(var i in z){var n=o[i];n&&l(n.prototype,e)&&delete n.prototype[e]}E[e]&&!r||f(E,e,r?t:P&&g[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(a){if(m){if(r)for(i in z)(n=o[i])&&l(n,e)&&delete n[e];if(_[e]&&!r)return;try{return f(_,e,r?t:P&&v[e]||t)}catch(e){}}for(i in z)!(n=o[i])||n[e]&&!r||f(n,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||l(z,t)},isTypedArray:O,TypedArray:_,TypedArrayPrototype:E}},"../node_modules/core-js/internals/array-buffer.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/array-buffer-native.js"),o=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),s=r("../node_modules/core-js/internals/redefine-all.js"),l=r("../node_modules/core-js/internals/fails.js"),u=r("../node_modules/core-js/internals/an-instance.js"),c=r("../node_modules/core-js/internals/to-integer.js"),f=r("../node_modules/core-js/internals/to-length.js"),d=r("../node_modules/core-js/internals/to-index.js"),h=r("../node_modules/core-js/internals/ieee754.js"),m=r("../node_modules/core-js/internals/object-get-prototype-of.js"),b=r("../node_modules/core-js/internals/object-set-prototype-of.js"),p=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,v=r("../node_modules/core-js/internals/object-define-property.js").f,g=r("../node_modules/core-js/internals/array-fill.js"),y=r("../node_modules/core-js/internals/set-to-string-tag.js"),w=r("../node_modules/core-js/internals/internal-state.js"),_=w.get,E=w.set,T=i.ArrayBuffer,S=T,j=i.DataView,R=j&&j.prototype,P=Object.prototype,x=i.RangeError,z=h.pack,O=h.unpack,A=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},C=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},D=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},I=function(e){return z(e,23,4)},L=function(e){return z(e,52,8)},F=function(e,t){v(e.prototype,t,{get:function(){return _(this)[t]}})},G=function(e,t,r,i){var n=d(r),a=_(e);if(n+t>a.byteLength)throw x("Wrong index");var o=_(a.buffer).bytes,s=n+a.byteOffset,l=o.slice(s,s+t);return i?l:l.reverse()},B=function(e,t,r,i,n,a){var o=d(r),s=_(e);if(o+t>s.byteLength)throw x("Wrong index");for(var l=_(s.buffer).bytes,u=o+s.byteOffset,c=i(+n),f=0;f<t;f++)l[u+f]=c[a?f:t-f-1]};if(a){if(!l((function(){T(1)}))||!l((function(){new T(-1)}))||l((function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name}))){for(var N,k=(S=function(e){return u(this,S),new T(d(e))}).prototype=T.prototype,U=p(T),V=0;U.length>V;)(N=U[V++])in S||o(S,N,T[N]);k.constructor=S}b&&m(R)!==P&&b(R,P);var H=new j(new S(2)),q=R.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||s(R,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},{unsafe:!0})}else S=function(e){u(this,S,"ArrayBuffer");var t=d(e);E(this,{bytes:g.call(new Array(t),0),byteLength:t}),n||(this.byteLength=t)},j=function(e,t,r){u(this,j,"DataView"),u(e,S,"DataView");var i=_(e).byteLength,a=c(t);if(a<0||a>i)throw x("Wrong offset");if(a+(r=void 0===r?i-a:f(r))>i)throw x("Wrong length");E(this,{buffer:e,byteLength:r,byteOffset:a}),n||(this.buffer=e,this.byteLength=r,this.byteOffset=a)},n&&(F(S,"byteLength"),F(j,"buffer"),F(j,"byteLength"),F(j,"byteOffset")),s(j.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return D(G(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return D(G(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return O(G(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return O(G(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){B(this,1,e,A,t)},setUint8:function(e,t){B(this,1,e,A,t)},setInt16:function(e,t){B(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){B(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){B(this,4,e,C,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){B(this,4,e,C,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){B(this,4,e,I,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){B(this,8,e,L,t,arguments.length>2?arguments[2]:void 0)}});y(S,"ArrayBuffer"),y(j,"DataView"),e.exports={ArrayBuffer:S,DataView:j}},"../node_modules/core-js/internals/array-fill.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/to-object.js"),n=r("../node_modules/core-js/internals/to-absolute-index.js"),a=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){for(var t=i(this),r=a(t.length),o=arguments.length,s=n(o>1?arguments[1]:void 0,r),l=o>2?arguments[2]:void 0,u=void 0===l?r:n(l,r);u>s;)t[s++]=e;return t}},"../node_modules/core-js/internals/array-for-each.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/array-iteration.js").forEach,n=r("../node_modules/core-js/internals/array-method-is-strict.js"),a=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),o=n("forEach"),s=a("forEach");e.exports=o&&s?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"../node_modules/core-js/internals/array-from.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/function-bind-context.js"),n=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),o=r("../node_modules/core-js/internals/is-array-iterator-method.js"),s=r("../node_modules/core-js/internals/to-length.js"),l=r("../node_modules/core-js/internals/create-property.js"),u=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t,r,c,f,d,h,m=n(e),b="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=u(m),w=0;if(g&&(v=i(v,p>2?arguments[2]:void 0,2)),null==y||b==Array&&o(y))for(r=new b(t=s(m.length));t>w;w++)h=g?v(m[w],w):m[w],l(r,w,h);else for(d=(f=y.call(m)).next,r=new b;!(c=d.call(f)).done;w++)h=g?a(f,v,[c.value,w],!0):c.value,l(r,w,h);return r.length=w,r}},"../node_modules/core-js/internals/array-includes.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-indexed-object.js"),n=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/to-absolute-index.js"),o=function(e){return function(t,r,o){var s,l=i(t),u=n(l.length),c=a(o,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"../node_modules/core-js/internals/array-iteration.js":function(e,t,r){var i=r("../node_modules/core-js/internals/function-bind-context.js"),n=r("../node_modules/core-js/internals/indexed-object.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/array-species-create.js"),l=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,c=4==e,f=6==e,d=5==e||f;return function(h,m,b,p){for(var v,g,y=a(h),w=n(y),_=i(m,b,3),E=o(w.length),T=0,S=p||s,j=t?S(h,E):r?S(h,0):void 0;E>T;T++)if((d||T in w)&&(g=_(v=w[T],T,y),e))if(t)j[T]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:l.call(j,v)}else if(c)return!1;return f?-1:u||c?c:j}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},"../node_modules/core-js/internals/array-last-index-of.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/to-indexed-object.js"),n=r("../node_modules/core-js/internals/to-integer.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/array-method-is-strict.js"),s=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,f=o("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),h=c||!f||!d;e.exports=h?function(e){if(c)return u.apply(this,arguments)||0;var t=i(this),r=a(t.length),o=r-1;for(arguments.length>1&&(o=l(o,n(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},"../node_modules/core-js/internals/array-method-has-species-support.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js"),n=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/engine-v8-version.js"),o=n("species");e.exports=function(e){return a>=51||!i((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"../node_modules/core-js/internals/array-method-is-strict.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/fails.js");e.exports=function(e,t){var r=[][e];return!!r&&i((function(){r.call(null,t||function(){throw 1},1)}))}},"../node_modules/core-js/internals/array-method-uses-to-length.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/has.js"),o=Object.defineProperty,s={},l=function(e){throw e};e.exports=function(e,t){if(a(s,e))return s[e];t||(t={});var r=[][e],u=!!a(t,"ACCESSORS")&&t.ACCESSORS,c=a(t,0)?t[0]:l,f=a(t,1)?t[1]:void 0;return s[e]=!!r&&!n((function(){if(u&&!i)return!0;var e={length:-1};u?o(e,1,{enumerable:!0,get:l}):e[1]=1,r.call(e,c,f)}))}},"../node_modules/core-js/internals/array-species-create.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-object.js"),n=r("../node_modules/core-js/internals/is-array.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r;return n(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!n(r.prototype)?i(r)&&null===(r=r[a])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"../node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js");e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&i(a.call(e)),t}}},"../node_modules/core-js/internals/check-correctness-of-iteration.js":function(e,t,r){var i=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),n=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){n=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var a={};a[i]=function(){return{next:function(){return{done:r=!0}}}},e(a)}catch(e){}return r}},"../node_modules/core-js/internals/classof-raw.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"../node_modules/core-js/internals/classof.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-string-tag-support.js"),n=r("../node_modules/core-js/internals/classof-raw.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=i?n:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?r:o?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},"../node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,r){var i=r("../node_modules/core-js/internals/has.js"),n=r("../node_modules/core-js/internals/own-keys.js"),a=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),o=r("../node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var r=n(t),s=o.f,l=a.f,u=0;u<r.length;u++){var c=r[u];i(e,c)||s(e,c,l(t,c))}}},"../node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"../node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/iterators-core.js").IteratorPrototype,n=r("../node_modules/core-js/internals/object-create.js"),a=r("../node_modules/core-js/internals/create-property-descriptor.js"),o=r("../node_modules/core-js/internals/set-to-string-tag.js"),s=r("../node_modules/core-js/internals/iterators.js"),l=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=n(i,{next:a(1,r)}),o(e,u,!1,!0),s[u]=l,e}},"../node_modules/core-js/internals/create-non-enumerable-property.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/object-define-property.js"),a=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=i?function(e,t,r){return n.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},"../node_modules/core-js/internals/create-property-descriptor.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/internals/create-property.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/to-primitive.js"),n=r("../node_modules/core-js/internals/object-define-property.js"),a=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,r){var o=i(t);o in e?n.f(e,o,a(0,r)):e[o]=r}},"../node_modules/core-js/internals/define-iterator.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/create-iterator-constructor.js"),a=r("../node_modules/core-js/internals/object-get-prototype-of.js"),o=r("../node_modules/core-js/internals/object-set-prototype-of.js"),s=r("../node_modules/core-js/internals/set-to-string-tag.js"),l=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),u=r("../node_modules/core-js/internals/redefine.js"),c=r("../node_modules/core-js/internals/well-known-symbol.js"),f=r("../node_modules/core-js/internals/is-pure.js"),d=r("../node_modules/core-js/internals/iterators.js"),h=r("../node_modules/core-js/internals/iterators-core.js"),m=h.IteratorPrototype,b=h.BUGGY_SAFARI_ITERATORS,p=c("iterator"),v=function(){return this};e.exports=function(e,t,r,c,h,g,y){n(r,t,c);var w,_,E,T=function(e){if(e===h&&x)return x;if(!b&&e in R)return R[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},S=t+" Iterator",j=!1,R=e.prototype,P=R[p]||R["@@iterator"]||h&&R[h],x=!b&&P||T(h),z="Array"==t&&R.entries||P;if(z&&(w=a(z.call(new e)),m!==Object.prototype&&w.next&&(f||a(w)===m||(o?o(w,m):"function"!=typeof w[p]&&l(w,p,v)),s(w,S,!0,!0),f&&(d[S]=v))),"values"==h&&P&&"values"!==P.name&&(j=!0,x=function(){return P.call(this)}),f&&!y||R[p]===x||l(R,p,x),d[t]=x,h)if(_={values:T("values"),keys:g?x:T("keys"),entries:T("entries")},y)for(E in _)(b||j||!(E in R))&&u(R,E,_[E]);else i({target:t,proto:!0,forced:b||j},_);return _}},"../node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,r){var i=r("../node_modules/core-js/internals/path.js"),n=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/well-known-symbol-wrapped.js"),o=r("../node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});n(t,e)||o(t,e,{value:a.f(e)})}},"../node_modules/core-js/internals/descriptors.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"../node_modules/core-js/internals/document-create-element.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/is-object.js"),a=i.document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},"../node_modules/core-js/internals/dom-iterables.js":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"../node_modules/core-js/internals/engine-is-ios.js":function(e,t,r){var i=r("../node_modules/core-js/internals/engine-user-agent.js");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},"../node_modules/core-js/internals/engine-user-agent.js":function(e,t,r){var i=r("../node_modules/core-js/internals/get-built-in.js");e.exports=i("navigator","userAgent")||""},"../node_modules/core-js/internals/engine-v8-version.js":function(e,t,r){var i,n,a=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/engine-user-agent.js"),s=a.process,l=s&&s.versions,u=l&&l.v8;u?n=(i=u.split("."))[0]+i[1]:o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=i[1]),e.exports=n&&+n},"../node_modules/core-js/internals/enum-bug-keys.js":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"../node_modules/core-js/internals/export.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,a=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),o=r("../node_modules/core-js/internals/redefine.js"),s=r("../node_modules/core-js/internals/set-global.js"),l=r("../node_modules/core-js/internals/copy-constructor-properties.js"),u=r("../node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var r,c,f,d,h,m=e.target,b=e.global,p=e.stat;if(r=b?i:p?i[m]||s(m,{}):(i[m]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=n(r,c))&&h.value:r[c],!u(b?c:m+(p?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;l(d,f)}(e.sham||f&&f.sham)&&a(d,"sham",!0),o(r,c,d,e)}}},"../node_modules/core-js/internals/fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.regexp.exec.js");var i=r("../node_modules/core-js/internals/redefine.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/regexp-exec.js"),s=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),l=a("species"),u=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),f=a("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,f){var m=a(e),b=!n((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),p=b&&!n((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[m]=/./[m]),r.exec=function(){return t=!0,null},r[m](""),!t}));if(!b||!p||"replace"===e&&(!u||!c||d)||"split"===e&&!h){var v=/./[m],g=r(m,""[e],(function(e,t,r,i,n){return t.exec===o?b&&!n?{done:!0,value:v.call(t,r,i)}:{done:!0,value:e.call(r,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=g[0],w=g[1];i(String.prototype,e,y),i(RegExp.prototype,m,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&s(RegExp.prototype[m],"sham",!0)}},"../node_modules/core-js/internals/flatten-into-array.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/is-array.js"),n=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/function-bind-context.js"),o=function(e,t,r,s,l,u,c,f){for(var d,h=l,m=0,b=!!c&&a(c,f,3);m<s;){if(m in r){if(d=b?b(r[m],m,t):r[m],u>0&&i(d))h=o(e,t,d,n(d.length),h,u-1)-1;else{if(h>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[h]=d}h++}m++}return h};e.exports=o},"../node_modules/core-js/internals/function-bind-context.js":function(e,t,r){var i=r("../node_modules/core-js/internals/a-function.js");e.exports=function(e,t,r){if(i(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,i){return e.call(t,r,i)};case 3:return function(r,i,n){return e.call(t,r,i,n)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/internals/get-built-in.js":function(e,t,r){var i=r("../node_modules/core-js/internals/path.js"),n=r("../node_modules/core-js/internals/global.js"),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(n[e]):i[e]&&i[e][t]||n[e]&&n[e][t]}},"../node_modules/core-js/internals/get-iterator-method.js":function(e,t,r){var i=r("../node_modules/core-js/internals/classof.js"),n=r("../node_modules/core-js/internals/iterators.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||n[i(e)]}},"../node_modules/core-js/internals/get-iterator.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js"),n=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},"../node_modules/core-js/internals/global.js":function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")()}).call(this,r("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-js/internals/has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"../node_modules/core-js/internals/hidden-keys.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/host-report-errors.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js");e.exports=function(e,t){var r=i.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},"../node_modules/core-js/internals/html.js":function(e,t,r){var i=r("../node_modules/core-js/internals/get-built-in.js");e.exports=i("document","documentElement")},"../node_modules/core-js/internals/ie8-dom-define.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/document-create-element.js");e.exports=!i&&!n((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},"../node_modules/core-js/internals/ieee754.js":function(e,t){var r=Math.abs,i=Math.pow,n=Math.floor,a=Math.log,o=Math.LN2;e.exports={pack:function(e,t,s){var l,u,c,f=new Array(s),d=8*s-t-1,h=(1<<d)-1,m=h>>1,b=23===t?i(2,-24)-i(2,-77):0,p=e<0||0===e&&1/e<0?1:0,v=0;for((e=r(e))!=e||e===1/0?(u=e!=e?1:0,l=h):(l=n(a(e)/o),e*(c=i(2,-l))<1&&(l--,c*=2),(e+=l+m>=1?b/c:b*i(2,1-m))*c>=2&&(l++,c/=2),l+m>=h?(u=0,l=h):l+m>=1?(u=(e*c-1)*i(2,t),l+=m):(u=e*i(2,m-1)*i(2,t),l=0));t>=8;f[v++]=255&u,u/=256,t-=8);for(l=l<<t|u,d+=t;d>0;f[v++]=255&l,l/=256,d-=8);return f[--v]|=128*p,f},unpack:function(e,t){var r,n=e.length,a=8*n-t-1,o=(1<<a)-1,s=o>>1,l=a-7,u=n-1,c=e[u--],f=127&c;for(c>>=7;l>0;f=256*f+e[u],u--,l-=8);for(r=f&(1<<-l)-1,f>>=-l,l+=t;l>0;r=256*r+e[u],u--,l-=8);if(0===f)f=1-s;else{if(f===o)return r?NaN:c?-1/0:1/0;r+=i(2,t),f-=s}return(c?-1:1)*r*i(2,f-t)}}},"../node_modules/core-js/internals/indexed-object.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js"),n=r("../node_modules/core-js/internals/classof-raw.js"),a="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==n(e)?a.call(e,""):Object(e)}:Object},"../node_modules/core-js/internals/inherit-if-required.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-object.js"),n=r("../node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,r){var a,o;return n&&"function"==typeof(a=t.constructor)&&a!==r&&i(o=a.prototype)&&o!==r.prototype&&n(e,o),e}},"../node_modules/core-js/internals/inspect-source.js":function(e,t,r){var i=r("../node_modules/core-js/internals/shared-store.js"),n=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return n.call(e)}),e.exports=i.inspectSource},"../node_modules/core-js/internals/internal-state.js":function(e,t,r){var i,n,a,o=r("../node_modules/core-js/internals/native-weak-map.js"),s=r("../node_modules/core-js/internals/global.js"),l=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),c=r("../node_modules/core-js/internals/has.js"),f=r("../node_modules/core-js/internals/shared-key.js"),d=r("../node_modules/core-js/internals/hidden-keys.js"),h=s.WeakMap;if(o){var m=new h,b=m.get,p=m.has,v=m.set;i=function(e,t){return v.call(m,e,t),t},n=function(e){return b.call(m,e)||{}},a=function(e){return p.call(m,e)}}else{var g=f("state");d[g]=!0,i=function(e,t){return u(e,g,t),t},n=function(e){return c(e,g)?e[g]:{}},a=function(e){return c(e,g)}}e.exports={set:i,get:n,has:a,enforce:function(e){return a(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=n(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},"../node_modules/core-js/internals/is-array-iterator-method.js":function(e,t,r){var i=r("../node_modules/core-js/internals/well-known-symbol.js"),n=r("../node_modules/core-js/internals/iterators.js"),a=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},"../node_modules/core-js/internals/is-array.js":function(e,t,r){var i=r("../node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"../node_modules/core-js/internals/is-forced.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js"),n=/#|\.prototype\./,a=function(e,t){var r=s[o(e)];return r==u||r!=l&&("function"==typeof t?i(t):!!t)},o=a.normalize=function(e){return String(e).replace(n,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},"../node_modules/core-js/internals/is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/internals/is-pure.js":function(e,t){e.exports=!1},"../node_modules/core-js/internals/iterate.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js"),n=r("../node_modules/core-js/internals/is-array-iterator-method.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/function-bind-context.js"),s=r("../node_modules/core-js/internals/get-iterator-method.js"),l=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),u=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,c,f){var d,h,m,b,p,v,g,y=o(t,r,c?2:1);if(f)d=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(n(h)){for(m=0,b=a(e.length);b>m;m++)if((p=c?y(i(g=e[m])[0],g[1]):y(e[m]))&&p instanceof u)return p;return new u(!1)}d=h.call(e)}for(v=d.next;!(g=v.call(d)).done;)if("object"==typeof(p=l(d,y,g.value,c))&&p&&p instanceof u)return p;return new u(!1)}).stop=function(e){return new u(!0,e)}},"../node_modules/core-js/internals/iterators-core.js":function(e,t,r){"use strict";var i,n,a,o=r("../node_modules/core-js/internals/object-get-prototype-of.js"),s=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),l=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/well-known-symbol.js"),c=r("../node_modules/core-js/internals/is-pure.js"),f=u("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(n=o(o(a)))!==Object.prototype&&(i=n):d=!0),null==i&&(i={}),c||l(i,f)||s(i,f,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},"../node_modules/core-js/internals/iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/microtask.js":function(e,t,r){var i,n,a,o,s,l,u,c,f=r("../node_modules/core-js/internals/global.js"),d=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,h=r("../node_modules/core-js/internals/classof-raw.js"),m=r("../node_modules/core-js/internals/task.js").set,b=r("../node_modules/core-js/internals/engine-is-ios.js"),p=f.MutationObserver||f.WebKitMutationObserver,v=f.process,g=f.Promise,y="process"==h(v),w=d(f,"queueMicrotask"),_=w&&w.value;_||(i=function(){var e,t;for(y&&(e=v.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?o():a=void 0,e}}a=void 0,e&&e.enter()},y?o=function(){v.nextTick(i)}:p&&!b?(s=!0,l=document.createTextNode(""),new p(i).observe(l,{characterData:!0}),o=function(){l.data=s=!s}):g&&g.resolve?(u=g.resolve(void 0),c=u.then,o=function(){c.call(u,i)}):o=function(){m.call(f,i)}),e.exports=_||function(e){var t={fn:e,next:void 0};a&&(a.next=t),n||(n=t,o()),a=t}},"../node_modules/core-js/internals/native-promise-constructor.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js");e.exports=i.Promise},"../node_modules/core-js/internals/native-symbol.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},"../node_modules/core-js/internals/native-url.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js"),n=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/is-pure.js"),o=n("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),r+=i+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"../node_modules/core-js/internals/native-weak-map.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/inspect-source.js"),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(n(a))},"../node_modules/core-js/internals/new-promise-capability.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/a-function.js"),n=function(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=i})),this.resolve=i(t),this.reject=i(r)};e.exports.f=function(e){return new n(e)}},"../node_modules/core-js/internals/number-parse-float.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/string-trim.js").trim,a=r("../node_modules/core-js/internals/whitespaces.js"),o=i.parseFloat,s=1/o(a+"-0")!=-1/0;e.exports=s?function(e){var t=n(String(e)),r=o(t);return 0===r&&"-"==t.charAt(0)?-0:r}:o},"../node_modules/core-js/internals/object-assign.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/object-keys.js"),o=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),s=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),l=r("../node_modules/core-js/internals/to-object.js"),u=r("../node_modules/core-js/internals/indexed-object.js"),c=Object.assign,f=Object.defineProperty;e.exports=!c||n((function(){if(i&&1!==c({b:1},c(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=c({},e)[r]||"abcdefghijklmnopqrst"!=a(c({},t)).join("")}))?function(e,t){for(var r=l(e),n=arguments.length,c=1,f=o.f,d=s.f;n>c;)for(var h,m=u(arguments[c++]),b=f?a(m).concat(f(m)):a(m),p=b.length,v=0;p>v;)h=b[v++],i&&!d.call(m,h)||(r[h]=m[h]);return r}:c},"../node_modules/core-js/internals/object-create.js":function(e,t,r){var i,n=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/object-define-properties.js"),o=r("../node_modules/core-js/internals/enum-bug-keys.js"),s=r("../node_modules/core-js/internals/hidden-keys.js"),l=r("../node_modules/core-js/internals/html.js"),u=r("../node_modules/core-js/internals/document-create-element.js"),c=r("../node_modules/core-js/internals/shared-key.js"),f=c("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=i?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var r=o.length;r--;)delete m.prototype[o[r]];return m()};s[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=n(e),r=new d,d.prototype=null,r[f]=e):r=m(),void 0===t?r:a(r,t)}},"../node_modules/core-js/internals/object-define-properties.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/object-define-property.js"),a=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/object-keys.js");e.exports=i?Object.defineProperties:function(e,t){a(e);for(var r,i=o(t),s=i.length,l=0;s>l;)n.f(e,r=i[l++],t[r]);return e}},"../node_modules/core-js/internals/object-define-property.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/ie8-dom-define.js"),a=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),s=Object.defineProperty;t.f=i?s:function(e,t,r){if(a(e),t=o(t,!0),a(r),n)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"../node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,r){var i=r("../node_modules/core-js/internals/descriptors.js"),n=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),a=r("../node_modules/core-js/internals/create-property-descriptor.js"),o=r("../node_modules/core-js/internals/to-indexed-object.js"),s=r("../node_modules/core-js/internals/to-primitive.js"),l=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/ie8-dom-define.js"),c=Object.getOwnPropertyDescriptor;t.f=i?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return a(!n.f.call(e,t),e[t])}},"../node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,r){var i=r("../node_modules/core-js/internals/object-keys-internal.js"),n=r("../node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},"../node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,r){var i=r("../node_modules/core-js/internals/has.js"),n=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/shared-key.js"),o=r("../node_modules/core-js/internals/correct-prototype-getter.js"),s=a("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=n(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},"../node_modules/core-js/internals/object-keys-internal.js":function(e,t,r){var i=r("../node_modules/core-js/internals/has.js"),n=r("../node_modules/core-js/internals/to-indexed-object.js"),a=r("../node_modules/core-js/internals/array-includes.js").indexOf,o=r("../node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var r,s=n(e),l=0,u=[];for(r in s)!i(o,r)&&i(s,r)&&u.push(r);for(;t.length>l;)i(s,r=t[l++])&&(~a(u,r)||u.push(r));return u}},"../node_modules/core-js/internals/object-keys.js":function(e,t,r){var i=r("../node_modules/core-js/internals/object-keys-internal.js"),n=r("../node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return i(e,n)}},"../node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t,r){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!i.call({1:2},1);t.f=a?function(e){var t=n(this,e);return!!t&&t.enumerable}:i},"../node_modules/core-js/internals/object-prototype-accessors-forced.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/is-pure.js"),n=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/fails.js");e.exports=i||!a((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n[e]}))},"../node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js"),n=r("../node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,a){return i(r),n(a),t?e.call(r,a):r.__proto__=a,r}}():void 0)},"../node_modules/core-js/internals/own-keys.js":function(e,t,r){var i=r("../node_modules/core-js/internals/get-built-in.js"),n=r("../node_modules/core-js/internals/object-get-own-property-names.js"),a=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),o=r("../node_modules/core-js/internals/an-object.js");e.exports=i("Reflect","ownKeys")||function(e){var t=n.f(o(e)),r=a.f;return r?t.concat(r(e)):t}},"../node_modules/core-js/internals/path.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js");e.exports=i},"../node_modules/core-js/internals/perform.js":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},"../node_modules/core-js/internals/promise-resolve.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js"),n=r("../node_modules/core-js/internals/is-object.js"),a=r("../node_modules/core-js/internals/new-promise-capability.js");e.exports=function(e,t){if(i(e),n(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},"../node_modules/core-js/internals/redefine-all.js":function(e,t,r){var i=r("../node_modules/core-js/internals/redefine.js");e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},"../node_modules/core-js/internals/redefine.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/set-global.js"),s=r("../node_modules/core-js/internals/inspect-source.js"),l=r("../node_modules/core-js/internals/internal-state.js"),u=l.get,c=l.enforce,f=String(String).split("String");(e.exports=function(e,t,r,s){var l=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||n(r,"name",t),c(r).source=f.join("string"==typeof t?t:"")),e!==i?(l?!d&&e[t]&&(u=!0):delete e[t],u?e[t]=r:n(e,t,r)):u?e[t]=r:o(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},"../node_modules/core-js/internals/regexp-exec-abstract.js":function(e,t,r){var i=r("../node_modules/core-js/internals/classof-raw.js"),n=r("../node_modules/core-js/internals/regexp-exec.js");e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var a=r.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"../node_modules/core-js/internals/regexp-exec.js":function(e,t,r){"use strict";var i,n,a=r("../node_modules/core-js/internals/regexp-flags.js"),o=r("../node_modules/core-js/internals/regexp-sticky-helpers.js"),s=RegExp.prototype.exec,l=String.prototype.replace,u=s,c=(i=/a/,n=/b*/g,s.call(i,"a"),s.call(n,"a"),0!==i.lastIndex||0!==n.lastIndex),f=o.UNSUPPORTED_Y||o.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||f)&&(u=function(e){var t,r,i,n,o=this,u=f&&o.sticky,h=a.call(o),m=o.source,b=0,p=e;return u&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),p=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(m="(?: "+m+")",p=" "+p,b++),r=new RegExp("^(?:"+m+")",h)),d&&(r=new RegExp("^"+m+"$(?!\\s)",h)),c&&(t=o.lastIndex),i=s.call(u?r:o,p),u?i?(i.input=i.input.slice(b),i[0]=i[0].slice(b),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:c&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),d&&i&&i.length>1&&l.call(i[0],r,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)})),i}),e.exports=u},"../node_modules/core-js/internals/regexp-flags.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/an-object.js");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"../node_modules/core-js/internals/regexp-sticky-helpers.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/fails.js");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"../node_modules/core-js/internals/require-object-coercible.js":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"../node_modules/core-js/internals/set-global.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/create-non-enumerable-property.js");e.exports=function(e,t){try{n(i,e,t)}catch(r){i[e]=t}return t}},"../node_modules/core-js/internals/set-species.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/get-built-in.js"),n=r("../node_modules/core-js/internals/object-define-property.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/descriptors.js"),s=a("species");e.exports=function(e){var t=i(e),r=n.f;o&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/internals/set-to-string-tag.js":function(e,t,r){var i=r("../node_modules/core-js/internals/object-define-property.js").f,n=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},"../node_modules/core-js/internals/shared-key.js":function(e,t,r){var i=r("../node_modules/core-js/internals/shared.js"),n=r("../node_modules/core-js/internals/uid.js"),a=i("keys");e.exports=function(e){return a[e]||(a[e]=n(e))}},"../node_modules/core-js/internals/shared-store.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/set-global.js"),a=i["__core-js_shared__"]||n("__core-js_shared__",{});e.exports=a},"../node_modules/core-js/internals/shared.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-pure.js"),n=r("../node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"../node_modules/core-js/internals/species-constructor.js":function(e,t,r){var i=r("../node_modules/core-js/internals/an-object.js"),n=r("../node_modules/core-js/internals/a-function.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r,o=i(e).constructor;return void 0===o||null==(r=i(o)[a])?t:n(r)}},"../node_modules/core-js/internals/string-multibyte.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-integer.js"),n=r("../node_modules/core-js/internals/require-object-coercible.js"),a=function(e){return function(t,r){var a,o,s=String(n(t)),l=i(r),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},"../node_modules/core-js/internals/string-pad-webkit-bug.js":function(e,t,r){var i=r("../node_modules/core-js/internals/engine-user-agent.js");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},"../node_modules/core-js/internals/string-pad.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-length.js"),n=r("../node_modules/core-js/internals/string-repeat.js"),a=r("../node_modules/core-js/internals/require-object-coercible.js"),o=Math.ceil,s=function(e){return function(t,r,s){var l,u,c=String(a(t)),f=c.length,d=void 0===s?" ":String(s),h=i(r);return h<=f||""==d?c:(l=h-f,(u=n.call(d,o(l/d.length))).length>l&&(u=u.slice(0,l)),e?c+u:u+c)}};e.exports={start:s(!1),end:s(!0)}},"../node_modules/core-js/internals/string-punycode-to-ascii.js":function(e,t,r){"use strict";var i=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",o=Math.floor,s=String.fromCharCode,l=function(e){return e+22+75*(e<26)},u=function(e,t,r){var i=0;for(e=r?o(e/700):e>>1,e+=o(e/t);e>455;i+=36)e=o(e/35);return o(i+36*e/(e+38))},c=function(e){var t,r,i=[],n=(e=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&n)<<10)+(1023&a)+65536):(t.push(n),r--)}else t.push(n)}return t}(e)).length,c=128,f=0,d=72;for(t=0;t<e.length;t++)(r=e[t])<128&&i.push(s(r));var h=i.length,m=h;for(h&&i.push("-");m<n;){var b=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=c&&r<b&&(b=r);var p=m+1;if(b-c>o((2147483647-f)/p))throw RangeError(a);for(f+=(b-c)*p,c=b,t=0;t<e.length;t++){if((r=e[t])<c&&++f>2147483647)throw RangeError(a);if(r==c){for(var v=f,g=36;;g+=36){var y=g<=d?1:g>=d+26?26:g-d;if(v<y)break;var w=v-y,_=36-y;i.push(s(l(y+w%_))),v=o(w/_)}i.push(s(l(v))),d=u(f,p,m==h),f=0,++m}}++f,++c}return i.join("")};e.exports=function(e){var t,r,a=[],o=e.toLowerCase().replace(n,".").split(".");for(t=0;t<o.length;t++)r=o[t],a.push(i.test(r)?"xn--"+c(r):r);return a.join(".")}},"../node_modules/core-js/internals/string-repeat.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/to-integer.js"),n=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports="".repeat||function(e){var t=String(n(this)),r="",a=i(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},"../node_modules/core-js/internals/string-trim-forced.js":function(e,t,r){var i=r("../node_modules/core-js/internals/fails.js"),n=r("../node_modules/core-js/internals/whitespaces.js");e.exports=function(e){return i((function(){return!!n[e]()||"​᠎"!="​᠎"[e]()||n[e].name!==e}))}},"../node_modules/core-js/internals/string-trim.js":function(e,t,r){var i=r("../node_modules/core-js/internals/require-object-coercible.js"),n="["+r("../node_modules/core-js/internals/whitespaces.js")+"]",a=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),s=function(e){return function(t){var r=String(i(t));return 1&e&&(r=r.replace(a,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},"../node_modules/core-js/internals/task.js":function(e,t,r){var i,n,a,o=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/fails.js"),l=r("../node_modules/core-js/internals/classof-raw.js"),u=r("../node_modules/core-js/internals/function-bind-context.js"),c=r("../node_modules/core-js/internals/html.js"),f=r("../node_modules/core-js/internals/document-create-element.js"),d=r("../node_modules/core-js/internals/engine-is-ios.js"),h=o.location,m=o.setImmediate,b=o.clearImmediate,p=o.process,v=o.MessageChannel,g=o.Dispatch,y=0,w={},_=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},E=function(e){return function(){_(e)}},T=function(e){_(e.data)},S=function(e){o.postMessage(e+"",h.protocol+"//"+h.host)};m&&b||(m=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},b=function(e){delete w[e]},"process"==l(p)?i=function(e){p.nextTick(E(e))}:g&&g.now?i=function(e){g.now(E(e))}:v&&!d?(a=(n=new v).port2,n.port1.onmessage=T,i=u(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(S)||"file:"===h.protocol?i="onreadystatechange"in f("script")?function(e){c.appendChild(f("script")).onreadystatechange=function(){c.removeChild(this),_(e)}}:function(e){setTimeout(E(e),0)}:(i=S,o.addEventListener("message",T,!1))),e.exports={set:m,clear:b}},"../node_modules/core-js/internals/to-absolute-index.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-integer.js"),n=Math.max,a=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):a(r,t)}},"../node_modules/core-js/internals/to-index.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-integer.js"),n=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=i(e),r=n(t);if(t!==r)throw RangeError("Wrong length or index");return r}},"../node_modules/core-js/internals/to-indexed-object.js":function(e,t,r){var i=r("../node_modules/core-js/internals/indexed-object.js"),n=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return i(n(e))}},"../node_modules/core-js/internals/to-integer.js":function(e,t){var r=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},"../node_modules/core-js/internals/to-length.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-integer.js"),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},"../node_modules/core-js/internals/to-object.js":function(e,t,r){var i=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(i(e))}},"../node_modules/core-js/internals/to-offset.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-positive-integer.js");e.exports=function(e,t){var r=i(e);if(r%t)throw RangeError("Wrong offset");return r}},"../node_modules/core-js/internals/to-positive-integer.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-integer.js");e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},"../node_modules/core-js/internals/to-primitive.js":function(e,t,r){var i=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/internals/to-string-tag-support.js":function(e,t,r){var i={};i[r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(i)},"../node_modules/core-js/internals/typed-array-constructor.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js"),s=r("../node_modules/core-js/internals/array-buffer-view-core.js"),l=r("../node_modules/core-js/internals/array-buffer.js"),u=r("../node_modules/core-js/internals/an-instance.js"),c=r("../node_modules/core-js/internals/create-property-descriptor.js"),f=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),d=r("../node_modules/core-js/internals/to-length.js"),h=r("../node_modules/core-js/internals/to-index.js"),m=r("../node_modules/core-js/internals/to-offset.js"),b=r("../node_modules/core-js/internals/to-primitive.js"),p=r("../node_modules/core-js/internals/has.js"),v=r("../node_modules/core-js/internals/classof.js"),g=r("../node_modules/core-js/internals/is-object.js"),y=r("../node_modules/core-js/internals/object-create.js"),w=r("../node_modules/core-js/internals/object-set-prototype-of.js"),_=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,E=r("../node_modules/core-js/internals/typed-array-from.js"),T=r("../node_modules/core-js/internals/array-iteration.js").forEach,S=r("../node_modules/core-js/internals/set-species.js"),j=r("../node_modules/core-js/internals/object-define-property.js"),R=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),P=r("../node_modules/core-js/internals/internal-state.js"),x=r("../node_modules/core-js/internals/inherit-if-required.js"),z=P.get,O=P.set,A=j.f,M=R.f,C=Math.round,D=n.RangeError,I=l.ArrayBuffer,L=l.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,G=s.TYPED_ARRAY_TAG,B=s.TypedArray,N=s.TypedArrayPrototype,k=s.aTypedArrayConstructor,U=s.isTypedArray,V=function(e,t){for(var r=0,i=t.length,n=new(k(e))(i);i>r;)n[r]=t[r++];return n},H=function(e,t){A(e,t,{get:function(){return z(this)[t]}})},q=function(e){var t;return e instanceof I||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},W=function(e,t){return U(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return W(e,t=b(t,!0))?c(2,e[t]):M(e,t)},K=function(e,t,r){return!(W(e,t=b(t,!0))&&g(r)&&p(r,"value"))||p(r,"get")||p(r,"set")||r.configurable||p(r,"writable")&&!r.writable||p(r,"enumerable")&&!r.enumerable?A(e,t,r):(e[t]=r.value,e)};a?(F||(R.f=Y,j.f=K,H(N,"buffer"),H(N,"byteOffset"),H(N,"byteLength"),H(N,"length")),i({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:Y,defineProperty:K}),e.exports=function(e,t,r){var a=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",l="get"+e,c="set"+e,b=n[s],p=b,v=p&&p.prototype,j={},R=function(e,t){A(e,t,{get:function(){return function(e,t){var r=z(e);return r.view[l](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var n=z(e);r&&(i=(i=C(i))<0?0:i>255?255:255&i),n.view[c](t*a+n.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};F?o&&(p=t((function(e,t,r,i){return u(e,p,s),x(g(t)?q(t)?void 0!==i?new b(t,m(r,a),i):void 0!==r?new b(t,m(r,a)):new b(t):U(t)?V(p,t):E.call(p,t):new b(h(t)),e,p)})),w&&w(p,B),T(_(b),(function(e){e in p||f(p,e,b[e])})),p.prototype=v):(p=t((function(e,t,r,i){u(e,p,s);var n,o,l,c=0,f=0;if(g(t)){if(!q(t))return U(t)?V(p,t):E.call(p,t);n=t,f=m(r,a);var b=t.byteLength;if(void 0===i){if(b%a)throw D("Wrong length");if((o=b-f)<0)throw D("Wrong length")}else if((o=d(i)*a)+f>b)throw D("Wrong length");l=o/a}else l=h(t),n=new I(o=l*a);for(O(e,{buffer:n,byteOffset:f,byteLength:o,length:l,view:new L(n)});c<l;)R(e,c++)})),w&&w(p,B),v=p.prototype=y(N)),v.constructor!==p&&f(v,"constructor",p),G&&f(v,G,s),j[s]=p,i({global:!0,forced:p!=b,sham:!F},j),"BYTES_PER_ELEMENT"in p||f(p,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in v||f(v,"BYTES_PER_ELEMENT",a),S(s)}):e.exports=function(){}},"../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),o=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,l=i.Int8Array;e.exports=!o||!n((function(){l(1)}))||!n((function(){new l(-1)}))||!a((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||n((function(){return 1!==new l(new s(2),1,void 0).length}))},"../node_modules/core-js/internals/typed-array-from.js":function(e,t,r){var i=r("../node_modules/core-js/internals/to-object.js"),n=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/get-iterator-method.js"),o=r("../node_modules/core-js/internals/is-array-iterator-method.js"),s=r("../node_modules/core-js/internals/function-bind-context.js"),l=r("../node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;e.exports=function(e){var t,r,u,c,f,d,h=i(e),m=arguments.length,b=m>1?arguments[1]:void 0,p=void 0!==b,v=a(h);if(null!=v&&!o(v))for(d=(f=v.call(h)).next,h=[];!(c=d.call(f)).done;)h.push(c.value);for(p&&m>2&&(b=s(b,arguments[2],2)),r=n(h.length),u=new(l(this))(r),t=0;r>t;t++)u[t]=p?b(h[t],t):h[t];return u}},"../node_modules/core-js/internals/uid.js":function(e,t){var r=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+i).toString(36)}},"../node_modules/core-js/internals/use-symbol-as-uid.js":function(e,t,r){var i=r("../node_modules/core-js/internals/native-symbol.js");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"../node_modules/core-js/internals/well-known-symbol-wrapped.js":function(e,t,r){var i=r("../node_modules/core-js/internals/well-known-symbol.js");t.f=i},"../node_modules/core-js/internals/well-known-symbol.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/shared.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/uid.js"),s=r("../node_modules/core-js/internals/native-symbol.js"),l=r("../node_modules/core-js/internals/use-symbol-as-uid.js"),u=n("wks"),c=i.Symbol,f=l?c:c&&c.withoutSetter||o;e.exports=function(e){return a(u,e)||(s&&a(c,e)?u[e]=c[e]:u[e]=f("Symbol."+e)),u[e]}},"../node_modules/core-js/internals/whitespaces.js":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"../node_modules/core-js/modules/es.array-buffer.constructor.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/array-buffer.js"),o=r("../node_modules/core-js/internals/set-species.js"),s=a.ArrayBuffer;i({global:!0,forced:n.ArrayBuffer!==s},{ArrayBuffer:s}),o("ArrayBuffer")},"../node_modules/core-js/modules/es.array-buffer.slice.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/array-buffer.js"),o=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/to-absolute-index.js"),l=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/species-constructor.js"),c=a.ArrayBuffer,f=a.DataView,d=c.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:n((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(o(this),e);for(var r=o(this).byteLength,i=s(e,r),n=s(void 0===t?r:t,r),a=new(u(this,c))(l(n-i)),h=new f(this),m=new f(a),b=0;i<n;)m.setUint8(b++,h.getUint8(i++));return a}})},"../node_modules/core-js/modules/es.array.flat-map.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/flatten-into-array.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/a-function.js"),l=r("../node_modules/core-js/internals/array-species-create.js");i({target:"Array",proto:!0},{flatMap:function(e){var t,r=a(this),i=o(r.length);return s(e),(t=l(r,0)).length=n(t,r,r,i,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"../node_modules/core-js/modules/es.array.flat.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/flatten-into-array.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/to-integer.js"),l=r("../node_modules/core-js/internals/array-species-create.js");i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),r=o(t.length),i=l(t,0);return i.length=n(i,t,t,r,0,void 0===e?1:s(e)),i}})},"../node_modules/core-js/modules/es.array.index-of.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/array-includes.js").indexOf,a=r("../node_modules/core-js/internals/array-method-is-strict.js"),o=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),c=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(e){return l?s.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.array.iterator.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/to-indexed-object.js"),n=r("../node_modules/core-js/internals/add-to-unscopables.js"),a=r("../node_modules/core-js/internals/iterators.js"),o=r("../node_modules/core-js/internals/internal-state.js"),s=r("../node_modules/core-js/internals/define-iterator.js"),l=o.set,u=o.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,r=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:i,done:!1}:"values"==r?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},"../node_modules/core-js/modules/es.array.last-index-of.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/array-last-index-of.js");i({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},"../node_modules/core-js/modules/es.array.reverse.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/is-array.js"),a=[].reverse,o=[1,2];i({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),a.call(this)}})},"../node_modules/core-js/modules/es.array.slice.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/is-object.js"),a=r("../node_modules/core-js/internals/is-array.js"),o=r("../node_modules/core-js/internals/to-absolute-index.js"),s=r("../node_modules/core-js/internals/to-length.js"),l=r("../node_modules/core-js/internals/to-indexed-object.js"),u=r("../node_modules/core-js/internals/create-property.js"),c=r("../node_modules/core-js/internals/well-known-symbol.js"),f=r("../node_modules/core-js/internals/array-method-has-species-support.js"),d=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),h=f("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),b=c("species"),p=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!h||!m},{slice:function(e,t){var r,i,c,f=l(this),d=s(f.length),h=o(e,d),m=o(void 0===t?d:t,d);if(a(f)&&("function"!=typeof(r=f.constructor)||r!==Array&&!a(r.prototype)?n(r)&&null===(r=r[b])&&(r=void 0):r=void 0,r===Array||void 0===r))return p.call(f,h,m);for(i=new(void 0===r?Array:r)(v(m-h,0)),c=0;h<m;h++,c++)h in f&&u(i,c,f[h]);return i.length=c,i}})},"../node_modules/core-js/modules/es.array.sort.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/a-function.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/array-method-is-strict.js"),l=[],u=l.sort,c=o((function(){l.sort(void 0)})),f=o((function(){l.sort(null)})),d=s("sort");i({target:"Array",proto:!0,forced:c||!f||!d},{sort:function(e){return void 0===e?u.call(a(this)):u.call(a(this),n(e))}})},"../node_modules/core-js/modules/es.array.splice.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/to-absolute-index.js"),a=r("../node_modules/core-js/internals/to-integer.js"),o=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/to-object.js"),l=r("../node_modules/core-js/internals/array-species-create.js"),u=r("../node_modules/core-js/internals/create-property.js"),c=r("../node_modules/core-js/internals/array-method-has-species-support.js"),f=r("../node_modules/core-js/internals/array-method-uses-to-length.js"),d=c("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min;i({target:"Array",proto:!0,forced:!d||!h},{splice:function(e,t){var r,i,c,f,d,h,p=s(this),v=o(p.length),g=n(e,v),y=arguments.length;if(0===y?r=i=0:1===y?(r=0,i=v-g):(r=y-2,i=b(m(a(t),0),v-g)),v+r-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=l(p,i),f=0;f<i;f++)(d=g+f)in p&&u(c,f,p[d]);if(c.length=i,r<i){for(f=g;f<v-i;f++)h=f+r,(d=f+i)in p?p[h]=p[d]:delete p[h];for(f=v;f>v-i+r;f--)delete p[f-1]}else if(r>i)for(f=v-i;f>g;f--)h=f+r-1,(d=f+i-1)in p?p[h]=p[d]:delete p[h];for(f=0;f<r;f++)p[f+g]=arguments[f+2];return p.length=v-i+r,c}})},"../node_modules/core-js/modules/es.array.unscopables.flat-map.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flatMap")},"../node_modules/core-js/modules/es.array.unscopables.flat.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flat")},"../node_modules/core-js/modules/es.math.hypot.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=Math.hypot,a=Math.abs,o=Math.sqrt;i({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,i,n=0,s=0,l=arguments.length,u=0;s<l;)u<(r=a(arguments[s++]))?(n=n*(i=u/r)*i+1,u=r):n+=r>0?(i=r/u)*i:r;return u===1/0?1/0:u*o(n)}})},"../node_modules/core-js/modules/es.number.parse-float.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/number-parse-float.js");i({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},"../node_modules/core-js/modules/es.object.define-getter.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),o=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/a-function.js"),l=r("../node_modules/core-js/internals/object-define-property.js");n&&i({target:"Object",proto:!0,forced:a},{__defineGetter__:function(e,t){l.f(o(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.define-setter.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),o=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/a-function.js"),l=r("../node_modules/core-js/internals/object-define-property.js");n&&i({target:"Object",proto:!0,forced:a},{__defineSetter__:function(e,t){l.f(o(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.from-entries.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/iterate.js"),a=r("../node_modules/core-js/internals/create-property.js");i({target:"Object",stat:!0},{fromEntries:function(e){var t={};return n(e,(function(e,r){a(t,e,r)}),void 0,!0),t}})},"../node_modules/core-js/modules/es.object.lookup-getter.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),o=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/to-primitive.js"),l=r("../node_modules/core-js/internals/object-get-prototype-of.js"),u=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;n&&i({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(e){var t,r=o(this),i=s(e,!0);do{if(t=u(r,i))return t.get}while(r=l(r))}})},"../node_modules/core-js/modules/es.object.lookup-setter.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/object-prototype-accessors-forced.js"),o=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/to-primitive.js"),l=r("../node_modules/core-js/internals/object-get-prototype-of.js"),u=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;n&&i({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(e){var t,r=o(this),i=s(e,!0);do{if(t=u(r,i))return t.set}while(r=l(r))}})},"../node_modules/core-js/modules/es.promise.finally.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/is-pure.js"),a=r("../node_modules/core-js/internals/native-promise-constructor.js"),o=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/get-built-in.js"),l=r("../node_modules/core-js/internals/species-constructor.js"),u=r("../node_modules/core-js/internals/promise-resolve.js"),c=r("../node_modules/core-js/internals/redefine.js");i({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then((function(){return r}))}:e,r?function(r){return u(t,e()).then((function(){throw r}))}:e)}}),n||"function"!=typeof a||a.prototype.finally||c(a.prototype,"finally",s("Promise").prototype.finally)},"../node_modules/core-js/modules/es.promise.js":function(e,t,r){"use strict";var i,n,a,o,s=r("../node_modules/core-js/internals/export.js"),l=r("../node_modules/core-js/internals/is-pure.js"),u=r("../node_modules/core-js/internals/global.js"),c=r("../node_modules/core-js/internals/get-built-in.js"),f=r("../node_modules/core-js/internals/native-promise-constructor.js"),d=r("../node_modules/core-js/internals/redefine.js"),h=r("../node_modules/core-js/internals/redefine-all.js"),m=r("../node_modules/core-js/internals/set-to-string-tag.js"),b=r("../node_modules/core-js/internals/set-species.js"),p=r("../node_modules/core-js/internals/is-object.js"),v=r("../node_modules/core-js/internals/a-function.js"),g=r("../node_modules/core-js/internals/an-instance.js"),y=r("../node_modules/core-js/internals/classof-raw.js"),w=r("../node_modules/core-js/internals/inspect-source.js"),_=r("../node_modules/core-js/internals/iterate.js"),E=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),T=r("../node_modules/core-js/internals/species-constructor.js"),S=r("../node_modules/core-js/internals/task.js").set,j=r("../node_modules/core-js/internals/microtask.js"),R=r("../node_modules/core-js/internals/promise-resolve.js"),P=r("../node_modules/core-js/internals/host-report-errors.js"),x=r("../node_modules/core-js/internals/new-promise-capability.js"),z=r("../node_modules/core-js/internals/perform.js"),O=r("../node_modules/core-js/internals/internal-state.js"),A=r("../node_modules/core-js/internals/is-forced.js"),M=r("../node_modules/core-js/internals/well-known-symbol.js"),C=r("../node_modules/core-js/internals/engine-v8-version.js"),D=M("species"),I="Promise",L=O.get,F=O.set,G=O.getterFor(I),B=f,N=u.TypeError,k=u.document,U=u.process,V=c("fetch"),H=x.f,q=H,W="process"==y(U),Y=!!(k&&k.createEvent&&u.dispatchEvent),K=A(I,(function(){if(!(w(B)!==String(B))){if(66===C)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!B.prototype.finally)return!0;if(C>=51&&/native code/.test(B))return!1;var e=B.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[D]=t,!(e.then((function(){}))instanceof t)})),X=K||!E((function(e){B.all(e).catch((function(){}))})),Q=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t,r){if(!t.notified){t.notified=!0;var i=t.reactions;j((function(){for(var n=t.value,a=1==t.state,o=0;i.length>o;){var s,l,u,c=i[o++],f=a?c.ok:c.fail,d=c.resolve,h=c.reject,m=c.domain;try{f?(a||(2===t.rejection&&te(e,t),t.rejection=1),!0===f?s=n:(m&&m.enter(),s=f(n),m&&(m.exit(),u=!0)),s===c.promise?h(N("Promise-chain cycle")):(l=Q(s))?l.call(s,d,h):d(s)):h(n)}catch(e){m&&!u&&m.exit(),h(e)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&$(e,t)}))}},J=function(e,t,r){var i,n;Y?((i=k.createEvent("Event")).promise=t,i.reason=r,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:r},(n=u["on"+e])?n(i):"unhandledrejection"===e&&P("Unhandled promise rejection",r)},$=function(e,t){S.call(u,(function(){var r,i=t.value;if(ee(t)&&(r=z((function(){W?U.emit("unhandledRejection",i,e):J("unhandledrejection",e,i)})),t.rejection=W||ee(t)?2:1,r.error))throw r.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){S.call(u,(function(){W?U.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},re=function(e,t,r,i){return function(n){e(t,r,n,i)}},ie=function(e,t,r,i){t.done||(t.done=!0,i&&(t=i),t.value=r,t.state=2,Z(e,t,!0))},ne=function(e,t,r,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===r)throw N("Promise can't be resolved itself");var n=Q(r);n?j((function(){var i={done:!1};try{n.call(r,re(ne,e,i,t),re(ie,e,i,t))}catch(r){ie(e,i,r,t)}})):(t.value=r,t.state=1,Z(e,t,!1))}catch(r){ie(e,{done:!1},r,t)}}};K&&(B=function(e){g(this,B,I),v(e),i.call(this);var t=L(this);try{e(re(ne,this,t),re(ie,this,t))}catch(e){ie(this,t,e)}},(i=function(e){F(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(B.prototype,{then:function(e,t){var r=G(this),i=H(T(this,B));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=W?U.domain:void 0,r.parent=!0,r.reactions.push(i),0!=r.state&&Z(this,r,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new i,t=L(e);this.promise=e,this.resolve=re(ne,e,t),this.reject=re(ie,e,t)},x.f=H=function(e){return e===B||e===a?new n(e):q(e)},l||"function"!=typeof f||(o=f.prototype.then,d(f.prototype,"then",(function(e,t){var r=this;return new B((function(e,t){o.call(r,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return R(B,V.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:B}),m(B,I,!1,!0),b(I),a=c(I),s({target:I,stat:!0,forced:K},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:I,stat:!0,forced:l||K},{resolve:function(e){return R(l&&this===a?B:this,e)}}),s({target:I,stat:!0,forced:X},{all:function(e){var t=this,r=H(t),i=r.resolve,n=r.reject,a=z((function(){var r=v(t.resolve),a=[],o=0,s=1;_(e,(function(e){var l=o++,u=!1;a.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,a[l]=e,--s||i(a))}),n)})),--s||i(a)}));return a.error&&n(a.value),r.promise},race:function(e){var t=this,r=H(t),i=r.reject,n=z((function(){var n=v(t.resolve);_(e,(function(e){n.call(t,e).then(r.resolve,i)}))}));return n.error&&i(n.value),r.promise}})},"../node_modules/core-js/modules/es.regexp.exec.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/regexp-exec.js");i({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},"../node_modules/core-js/modules/es.string.iterator.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/string-multibyte.js").charAt,n=r("../node_modules/core-js/internals/internal-state.js"),a=r("../node_modules/core-js/internals/define-iterator.js"),o=n.set,s=n.getterFor("String Iterator");a(String,"String",(function(e){o(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=i(r,n),t.index+=e.length,{value:e,done:!1})}))},"../node_modules/core-js/modules/es.string.pad-end.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/string-pad.js").end;i({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-pad-webkit-bug.js")},{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.pad-start.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/string-pad.js").start;i({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-pad-webkit-bug.js")},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.replace.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),n=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/to-integer.js"),l=r("../node_modules/core-js/internals/require-object-coercible.js"),u=r("../node_modules/core-js/internals/advance-string-index.js"),c=r("../node_modules/core-js/internals/regexp-exec-abstract.js"),f=Math.max,d=Math.min,h=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,r,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=i.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(r,i){var n=l(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,n,i):t.call(String(n),r,i)},function(e,i){if(!p&&v||"string"==typeof i&&-1===i.indexOf(g)){var a=r(t,e,this,i);if(a.done)return a.value}var l=n(e),h=String(this),m="function"==typeof i;m||(i=String(i));var b=l.global;if(b){var w=l.unicode;l.lastIndex=0}for(var _=[];;){var E=c(l,h);if(null===E)break;if(_.push(E),!b)break;""===String(E[0])&&(l.lastIndex=u(h,o(l.lastIndex),w))}for(var T,S="",j=0,R=0;R<_.length;R++){E=_[R];for(var P=String(E[0]),x=f(d(s(E.index),h.length),0),z=[],O=1;O<E.length;O++)z.push(void 0===(T=E[O])?T:String(T));var A=E.groups;if(m){var M=[P].concat(z,x,h);void 0!==A&&M.push(A);var C=String(i.apply(void 0,M))}else C=y(P,h,x,z,A,i);x>=j&&(S+=h.slice(j,x)+C,j=x+P.length)}return S+h.slice(j)}];function y(e,r,i,n,o,s){var l=i+e.length,u=n.length,c=b;return void 0!==o&&(o=a(o),c=m),t.call(s,c,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,i);case"'":return r.slice(l);case"<":s=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return t;if(c>u){var f=h(c/10);return 0===f?t:f<=u?void 0===n[f-1]?a.charAt(1):n[f-1]+a.charAt(1):t}s=n[c-1]}return void 0===s?"":s}))}}))},"../node_modules/core-js/modules/es.string.trim-end.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/string-trim.js").end,a=r("../node_modules/core-js/internals/string-trim-forced.js")("trimEnd"),o=a?function(){return n(this)}:"".trimEnd;i({target:"String",proto:!0,forced:a},{trimEnd:o,trimRight:o})},"../node_modules/core-js/modules/es.string.trim-start.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/string-trim.js").start,a=r("../node_modules/core-js/internals/string-trim-forced.js")("trimStart"),o=a?function(){return n(this)}:"".trimStart;i({target:"String",proto:!0,forced:a},{trimStart:o,trimLeft:o})},"../node_modules/core-js/modules/es.string.trim.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/string-trim.js").trim;i({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/string-trim-forced.js")("trim")},{trim:function(){return n(this)}})},"../node_modules/core-js/modules/es.symbol.async-iterator.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("asyncIterator")},"../node_modules/core-js/modules/es.symbol.description.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/is-object.js"),l=r("../node_modules/core-js/internals/object-define-property.js").f,u=r("../node_modules/core-js/internals/copy-constructor-properties.js"),c=a.Symbol;if(n&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new c(e):void 0===e?c():c(e);return""===e&&(f[t]=!0),t};u(d,c);var h=d.prototype=c.prototype;h.constructor=d;var m=h.toString,b="Symbol(test)"==String(c("test")),p=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=m.call(e);if(o(f,e))return"";var r=b?t.slice(7,-1):t.replace(p,"$1");return""===r?void 0:r}}),i({global:!0,forced:!0},{Symbol:d})}},"../node_modules/core-js/modules/es.typed-array.float32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float32",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.float64-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float64",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.from.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js");(0,r("../node_modules/core-js/internals/array-buffer-view-core.js").exportTypedArrayStaticMethod)("from",r("../node_modules/core-js/internals/typed-array-from.js"),i)},"../node_modules/core-js/modules/es.typed-array.int16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int16",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.int32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int32",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.int8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int8",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.of.js":function(e,t,r){"use strict";var i=r("../node_modules/core-js/internals/array-buffer-view-core.js"),n=r("../node_modules/core-js/internals/typed-array-constructors-require-wrappers.js"),a=i.aTypedArrayConstructor;(0,i.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(a(this))(t);t>e;)r[e]=arguments[e++];return r}),n)},"../node_modules/core-js/modules/es.typed-array.uint16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint16",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.uint32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint32",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.uint8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,r,i){return e(this,t,r,i)}}))},"../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",(function(e){return function(t,r,i){return e(this,t,r,i)}}),!0)},"../node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/dom-iterables.js"),a=r("../node_modules/core-js/internals/array-for-each.js"),o=r("../node_modules/core-js/internals/create-non-enumerable-property.js");for(var s in n){var l=i[s],u=l&&l.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(e){u.forEach=a}}},"../node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,r){var i=r("../node_modules/core-js/internals/global.js"),n=r("../node_modules/core-js/internals/dom-iterables.js"),a=r("../node_modules/core-js/modules/es.array.iterator.js"),o=r("../node_modules/core-js/internals/create-non-enumerable-property.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js"),l=s("iterator"),u=s("toStringTag"),c=a.values;for(var f in n){var d=i[f],h=d&&d.prototype;if(h){if(h[l]!==c)try{o(h,l,c)}catch(e){h[l]=c}if(h[u]||o(h,u,f),n[f])for(var m in a)if(h[m]!==a[m])try{o(h,m,a[m])}catch(e){h[m]=a[m]}}}},"../node_modules/core-js/modules/web.immediate.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/task.js");i({global:!0,bind:!0,enumerable:!0,forced:!n.setImmediate||!n.clearImmediate},{setImmediate:a.set,clearImmediate:a.clear})},"../node_modules/core-js/modules/web.queue-microtask.js":function(e,t,r){var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/microtask.js"),o=r("../node_modules/core-js/internals/classof-raw.js"),s=n.process,l="process"==o(s);i({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=l&&s.domain;a(t?t.bind(e):e)}})},"../node_modules/core-js/modules/web.url-search-params.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.array.iterator.js");var i=r("../node_modules/core-js/internals/export.js"),n=r("../node_modules/core-js/internals/get-built-in.js"),a=r("../node_modules/core-js/internals/native-url.js"),o=r("../node_modules/core-js/internals/redefine.js"),s=r("../node_modules/core-js/internals/redefine-all.js"),l=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/create-iterator-constructor.js"),c=r("../node_modules/core-js/internals/internal-state.js"),f=r("../node_modules/core-js/internals/an-instance.js"),d=r("../node_modules/core-js/internals/has.js"),h=r("../node_modules/core-js/internals/function-bind-context.js"),m=r("../node_modules/core-js/internals/classof.js"),b=r("../node_modules/core-js/internals/an-object.js"),p=r("../node_modules/core-js/internals/is-object.js"),v=r("../node_modules/core-js/internals/object-create.js"),g=r("../node_modules/core-js/internals/create-property-descriptor.js"),y=r("../node_modules/core-js/internals/get-iterator.js"),w=r("../node_modules/core-js/internals/get-iterator-method.js"),_=r("../node_modules/core-js/internals/well-known-symbol.js"),E=n("fetch"),T=n("Headers"),S=_("iterator"),j=c.set,R=c.getterFor("URLSearchParams"),P=c.getterFor("URLSearchParamsIterator"),x=/\+/g,z=Array(4),O=function(e){return z[e-1]||(z[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},A=function(e){try{return decodeURIComponent(e)}catch(t){return e}},M=function(e){var t=e.replace(x," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(O(r--),A);return t}},C=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I=function(e){return D[e]},L=function(e){return encodeURIComponent(e).replace(C,I)},F=function(e,t){if(t)for(var r,i,n=t.split("&"),a=0;a<n.length;)(r=n[a++]).length&&(i=r.split("="),e.push({key:M(i.shift()),value:M(i.join("="))}))},G=function(e){this.entries.length=0,F(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},N=u((function(e,t){j(this,{type:"URLSearchParamsIterator",iterator:y(R(e).entries),kind:t})}),"Iterator",(function(){var e=P(this),t=e.kind,r=e.iterator.next(),i=r.value;return r.done||(r.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),r})),k=function(){f(this,k,"URLSearchParams");var e,t,r,i,n,a,o,s,l,u=arguments.length>0?arguments[0]:void 0,c=this,h=[];if(j(c,{type:"URLSearchParams",entries:h,updateURL:function(){},updateSearchParams:G}),void 0!==u)if(p(u))if("function"==typeof(e=w(u)))for(r=(t=e.call(u)).next;!(i=r.call(t)).done;){if((o=(a=(n=y(b(i.value))).next).call(n)).done||(s=a.call(n)).done||!a.call(n).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(l in u)d(u,l)&&h.push({key:l,value:u[l]+""});else F(h,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},U=k.prototype;s(U,{append:function(e,t){B(arguments.length,2);var r=R(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){B(arguments.length,1);for(var t=R(this),r=t.entries,i=e+"",n=0;n<r.length;)r[n].key===i?r.splice(n,1):n++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=R(this).entries,r=e+"",i=0;i<t.length;i++)if(t[i].key===r)return t[i].value;return null},getAll:function(e){B(arguments.length,1);for(var t=R(this).entries,r=e+"",i=[],n=0;n<t.length;n++)t[n].key===r&&i.push(t[n].value);return i},has:function(e){B(arguments.length,1);for(var t=R(this).entries,r=e+"",i=0;i<t.length;)if(t[i++].key===r)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var r,i=R(this),n=i.entries,a=!1,o=e+"",s=t+"",l=0;l<n.length;l++)(r=n[l]).key===o&&(a?n.splice(l--,1):(a=!0,r.value=s));a||n.push({key:o,value:s}),i.updateURL()},sort:function(){var e,t,r,i=R(this),n=i.entries,a=n.slice();for(n.length=0,r=0;r<a.length;r++){for(e=a[r],t=0;t<r;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===r&&n.push(e)}i.updateURL()},forEach:function(e){for(var t,r=R(this).entries,i=h(e,arguments.length>1?arguments[1]:void 0,3),n=0;n<r.length;)i((t=r[n++]).value,t.key,this)},keys:function(){return new N(this,"keys")},values:function(){return new N(this,"values")},entries:function(){return new N(this,"entries")}},{enumerable:!0}),o(U,S,U.entries),o(U,"toString",(function(){for(var e,t=R(this).entries,r=[],i=0;i<t.length;)e=t[i++],r.push(L(e.key)+"="+L(e.value));return r.join("&")}),{enumerable:!0}),l(k,"URLSearchParams"),i({global:!0,forced:!a},{URLSearchParams:k}),a||"function"!=typeof E||"function"!=typeof T||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,r,i,n=[e];return arguments.length>1&&(p(t=arguments[1])&&(r=t.body,"URLSearchParams"===m(r)&&((i=t.headers?new T(t.headers):new T).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=v(t,{body:g(0,String(r)),headers:g(0,i)}))),n.push(t)),E.apply(this,n)}}),e.exports={URLSearchParams:k,getState:R}},"../node_modules/core-js/modules/web.url.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.string.iterator.js");var i,n=r("../node_modules/core-js/internals/export.js"),a=r("../node_modules/core-js/internals/descriptors.js"),o=r("../node_modules/core-js/internals/native-url.js"),s=r("../node_modules/core-js/internals/global.js"),l=r("../node_modules/core-js/internals/object-define-properties.js"),u=r("../node_modules/core-js/internals/redefine.js"),c=r("../node_modules/core-js/internals/an-instance.js"),f=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/object-assign.js"),h=r("../node_modules/core-js/internals/array-from.js"),m=r("../node_modules/core-js/internals/string-multibyte.js").codeAt,b=r("../node_modules/core-js/internals/string-punycode-to-ascii.js"),p=r("../node_modules/core-js/internals/set-to-string-tag.js"),v=r("../node_modules/core-js/modules/web.url-search-params.js"),g=r("../node_modules/core-js/internals/internal-state.js"),y=s.URL,w=v.URLSearchParams,_=v.getState,E=g.set,T=g.getterFor("URL"),S=Math.floor,j=Math.pow,R=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,x=/\d/,z=/^(0x|0X)/,O=/^[0-7]+$/,A=/^\d+$/,M=/^[\dA-Fa-f]+$/,C=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,D=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,I=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,L=/[\u0009\u000A\u000D]/g,F=function(e,t){var r,i,n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(r=B(t.slice(1,-1))))return"Invalid host";e.host=r}else if(Y(e)){if(t=b(t),C.test(t))return"Invalid host";if(null===(r=G(t)))return"Invalid host";e.host=r}else{if(D.test(t))return"Invalid host";for(r="",i=h(t),n=0;n<i.length;n++)r+=q(i[n],k);e.host=r}},G=function(e){var t,r,i,n,a,o,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(r=[],i=0;i<t;i++){if(""==(n=l[i]))return e;if(a=10,n.length>1&&"0"==n.charAt(0)&&(a=z.test(n)?16:8,n=n.slice(8==a?1:2)),""===n)o=0;else{if(!(10==a?A:8==a?O:M).test(n))return e;o=parseInt(n,a)}r.push(o)}for(i=0;i<t;i++)if(o=r[i],i==t-1){if(o>=j(256,5-t))return null}else if(o>255)return null;for(s=r.pop(),i=0;i<r.length;i++)s+=r[i]*j(256,3-i);return s},B=function(e){var t,r,i,n,a,o,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,f=0,d=function(){return e.charAt(f)};if(":"==d()){if(":"!=e.charAt(1))return;f+=2,c=++u}for(;d();){if(8==u)return;if(":"!=d()){for(t=r=0;r<4&&M.test(d());)t=16*t+parseInt(d(),16),f++,r++;if("."==d()){if(0==r)return;if(f-=r,u>6)return;for(i=0;d();){if(n=null,i>0){if(!("."==d()&&i<4))return;f++}if(!x.test(d()))return;for(;x.test(d());){if(a=parseInt(d(),10),null===n)n=a;else{if(0==n)return;n=10*n+a}if(n>255)return;f++}l[u]=256*l[u]+n,2!=++i&&4!=i||u++}if(4!=i)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;l[u++]=t}else{if(null!==c)return;f++,c=++u}}if(null!==c)for(o=u-c,u=7;0!=u&&o>0;)s=l[u],l[u--]=l[c+o-1],l[c+--o]=s;else if(8!=u)return;return l},N=function(e){var t,r,i,n;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,r=1,i=null,n=0,a=0;a<8;a++)0!==e[a]?(n>r&&(t=i,r=n),i=null,n=0):(null===i&&(i=a),++n);return n>r&&(t=i,r=n),t}(e),r=0;r<8;r++)n&&0===e[r]||(n&&(n=!1),i===r?(t+=r?":":"::",n=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},k={},U=d({},k,{" ":1,'"':1,"<":1,">":1,"`":1}),V=d({},U,{"#":1,"?":1,"{":1,"}":1}),H=d({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),q=function(e,t){var r=m(e,0);return r>32&&r<127&&!f(t,e)?e:encodeURIComponent(e)},W={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y=function(e){return f(W,e.scheme)},K=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Q=function(e,t){var r;return 2==e.length&&R.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},Z=function(e){var t;return e.length>1&&Q(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},J=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&Q(t[0],!0)||t.pop()},$=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},re={},ie={},ne={},ae={},oe={},se={},le={},ue={},ce={},fe={},de={},he={},me={},be={},pe={},ve={},ge={},ye={},we={},_e=function(e,t,r,n){var a,o,s,l,u,c=r||ee,d=0,m="",b=!1,p=!1,v=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(I,"")),t=t.replace(L,""),a=h(t);d<=a.length;){switch(o=a[d],c){case ee:if(!o||!R.test(o)){if(r)return"Invalid scheme";c=re;continue}m+=o.toLowerCase(),c=te;break;case te:if(o&&(P.test(o)||"+"==o||"-"==o||"."==o))m+=o.toLowerCase();else{if(":"!=o){if(r)return"Invalid scheme";m="",c=re,d=0;continue}if(r&&(Y(e)!=f(W,m)||"file"==m&&(K(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=m,r)return void(Y(e)&&W[e.scheme]==e.port&&(e.port=null));m="","file"==e.scheme?c=he:Y(e)&&n&&n.scheme==e.scheme?c=ie:Y(e)?c=se:"/"==a[d+1]?(c=ne,d++):(e.cannotBeABaseURL=!0,e.path.push(""),c=ge)}break;case re:if(!n||n.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==o){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,c=we;break}c="file"==n.scheme?he:ae;continue;case ie:if("/"!=o||"/"!=a[d+1]){c=ae;continue}c=le,d++;break;case ne:if("/"==o){c=ue;break}c=ve;continue;case ae:if(e.scheme=n.scheme,o==i)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==o||"\\"==o&&Y(e))c=oe;else if("?"==o)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",c=ye;else{if("#"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),c=ve;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",c=we}break;case oe:if(!Y(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,c=ve;continue}c=ue}else c=le;break;case se:if(c=le,"/"!=o||"/"!=m.charAt(d+1))continue;d++;break;case le:if("/"!=o&&"\\"!=o){c=ue;continue}break;case ue:if("@"==o){b&&(m="%40"+m),b=!0,s=h(m);for(var g=0;g<s.length;g++){var y=s[g];if(":"!=y||v){var w=q(y,H);v?e.password+=w:e.username+=w}else v=!0}m=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)){if(b&&""==m)return"Invalid authority";d-=h(m).length+1,m="",c=ce}else m+=o;break;case ce:case fe:if(r&&"file"==e.scheme){c=be;continue}if(":"!=o||p){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)){if(Y(e)&&""==m)return"Invalid host";if(r&&""==m&&(K(e)||null!==e.port))return;if(l=F(e,m))return l;if(m="",c=pe,r)return;continue}"["==o?p=!0:"]"==o&&(p=!1),m+=o}else{if(""==m)return"Invalid host";if(l=F(e,m))return l;if(m="",c=de,r==fe)return}break;case de:if(!x.test(o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Y(e)||r){if(""!=m){var _=parseInt(m,10);if(_>65535)return"Invalid port";e.port=Y(e)&&_===W[e.scheme]?null:_,m=""}if(r)return;c=pe;continue}return"Invalid port"}m+=o;break;case he:if(e.scheme="file","/"==o||"\\"==o)c=me;else{if(!n||"file"!=n.scheme){c=ve;continue}if(o==i)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==o)e.host=n.host,e.path=n.path.slice(),e.query="",c=ye;else{if("#"!=o){Z(a.slice(d).join(""))||(e.host=n.host,e.path=n.path.slice(),J(e)),c=ve;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",c=we}}break;case me:if("/"==o||"\\"==o){c=be;break}n&&"file"==n.scheme&&!Z(a.slice(d).join(""))&&(Q(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),c=ve;continue;case be:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&Q(m))c=ve;else if(""==m){if(e.host="",r)return;c=pe}else{if(l=F(e,m))return l;if("localhost"==e.host&&(e.host=""),r)return;m="",c=pe}continue}m+=o;break;case pe:if(Y(e)){if(c=ve,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=i&&(c=ve,"/"!=o))continue}else e.fragment="",c=we;else e.query="",c=ye;break;case ve:if(o==i||"/"==o||"\\"==o&&Y(e)||!r&&("?"==o||"#"==o)){if(".."===(u=(u=m).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(J(e),"/"==o||"\\"==o&&Y(e)||e.path.push("")):$(m)?"/"==o||"\\"==o&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Q(m)&&(e.host&&(e.host=""),m=m.charAt(0)+":"),e.path.push(m)),m="","file"==e.scheme&&(o==i||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=ye):"#"==o&&(e.fragment="",c=we)}else m+=q(o,V);break;case ge:"?"==o?(e.query="",c=ye):"#"==o?(e.fragment="",c=we):o!=i&&(e.path[0]+=q(o,k));break;case ye:r||"#"!=o?o!=i&&("'"==o&&Y(e)?e.query+="%27":e.query+="#"==o?"%23":q(o,k)):(e.fragment="",c=we);break;case we:o!=i&&(e.fragment+=q(o,U))}d++}},Ee=function(e){var t,r,i=c(this,Ee,"URL"),n=arguments.length>1?arguments[1]:void 0,o=String(e),s=E(i,{type:"URL"});if(void 0!==n)if(n instanceof Ee)t=T(n);else if(r=_e(t={},String(n)))throw TypeError(r);if(r=_e(s,o,null,t))throw TypeError(r);var l=s.searchParams=new w,u=_(l);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(l)||null},a||(i.href=Se.call(i),i.origin=je.call(i),i.protocol=Re.call(i),i.username=Pe.call(i),i.password=xe.call(i),i.host=ze.call(i),i.hostname=Oe.call(i),i.port=Ae.call(i),i.pathname=Me.call(i),i.search=Ce.call(i),i.searchParams=De.call(i),i.hash=Ie.call(i))},Te=Ee.prototype,Se=function(){var e=T(this),t=e.scheme,r=e.username,i=e.password,n=e.host,a=e.port,o=e.path,s=e.query,l=e.fragment,u=t+":";return null!==n?(u+="//",K(e)&&(u+=r+(i?":"+i:"")+"@"),u+=N(n),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},je=function(){var e=T(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Y(e)?t+"://"+N(e.host)+(null!==r?":"+r:""):"null"},Re=function(){return T(this).scheme+":"},Pe=function(){return T(this).username},xe=function(){return T(this).password},ze=function(){var e=T(this),t=e.host,r=e.port;return null===t?"":null===r?N(t):N(t)+":"+r},Oe=function(){var e=T(this).host;return null===e?"":N(e)},Ae=function(){var e=T(this).port;return null===e?"":String(e)},Me=function(){var e=T(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ce=function(){var e=T(this).query;return e?"?"+e:""},De=function(){return T(this).searchParams},Ie=function(){var e=T(this).fragment;return e?"#"+e:""},Le=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&l(Te,{href:Le(Se,(function(e){var t=T(this),r=String(e),i=_e(t,r);if(i)throw TypeError(i);_(t.searchParams).updateSearchParams(t.query)})),origin:Le(je),protocol:Le(Re,(function(e){var t=T(this);_e(t,String(e)+":",ee)})),username:Le(Pe,(function(e){var t=T(this),r=h(String(e));if(!X(t)){t.username="";for(var i=0;i<r.length;i++)t.username+=q(r[i],H)}})),password:Le(xe,(function(e){var t=T(this),r=h(String(e));if(!X(t)){t.password="";for(var i=0;i<r.length;i++)t.password+=q(r[i],H)}})),host:Le(ze,(function(e){var t=T(this);t.cannotBeABaseURL||_e(t,String(e),ce)})),hostname:Le(Oe,(function(e){var t=T(this);t.cannotBeABaseURL||_e(t,String(e),fe)})),port:Le(Ae,(function(e){var t=T(this);X(t)||(""==(e=String(e))?t.port=null:_e(t,e,de))})),pathname:Le(Me,(function(e){var t=T(this);t.cannotBeABaseURL||(t.path=[],_e(t,e+"",pe))})),search:Le(Ce,(function(e){var t=T(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",_e(t,e,ye)),_(t.searchParams).updateSearchParams(t.query)})),searchParams:Le(De),hash:Le(Ie,(function(e){var t=T(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",_e(t,e,we)):t.fragment=null}))}),u(Te,"toJSON",(function(){return Se.call(this)}),{enumerable:!0}),u(Te,"toString",(function(){return Se.call(this)}),{enumerable:!0}),y){var Fe=y.createObjectURL,Ge=y.revokeObjectURL;Fe&&u(Ee,"createObjectURL",(function(e){return Fe.apply(y,arguments)})),Ge&&u(Ee,"revokeObjectURL",(function(e){return Ge.apply(y,arguments)}))}p(Ee,"URL"),n({global:!0,forced:!o,sham:!a},{URL:Ee})},"../node_modules/core-js/modules/web.url.to-json.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/export.js")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},"../node_modules/gl-matrix/lib/gl-matrix.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");r.d(t,"glMatrix",(function(){return i}));var n=r("../node_modules/gl-matrix/lib/gl-matrix/mat2.js");r.d(t,"mat2",(function(){return n}));var a=r("../node_modules/gl-matrix/lib/gl-matrix/mat2d.js");r.d(t,"mat2d",(function(){return a}));var o=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js");r.d(t,"mat3",(function(){return o}));var s=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");r.d(t,"mat4",(function(){return s}));var l=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js");r.d(t,"quat",(function(){return l}));var u=r("../node_modules/gl-matrix/lib/gl-matrix/quat2.js");r.d(t,"quat2",(function(){return u}));var c=r("../node_modules/gl-matrix/lib/gl-matrix/vec2.js");r.d(t,"vec2",(function(){return c}));var f=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js");r.d(t,"vec3",(function(){return f}));var d=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");r.d(t,"vec4",(function(){return d}))},"../node_modules/gl-matrix/lib/gl-matrix/common.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EPSILON",(function(){return i})),r.d(t,"ARRAY_TYPE",(function(){return n})),r.d(t,"RANDOM",(function(){return a})),r.d(t,"setMatrixArrayType",(function(){return o})),r.d(t,"toRadian",(function(){return l})),r.d(t,"equals",(function(){return u}));var i=1e-6,n="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;function o(e){n=e}var s=Math.PI/180;function l(e){return e*s}function u(e,t){return Math.abs(e-t)<=i*Math.max(1,Math.abs(e),Math.abs(t))}},"../node_modules/gl-matrix/lib/gl-matrix/mat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"copy",(function(){return o})),r.d(t,"identity",(function(){return s})),r.d(t,"fromValues",(function(){return l})),r.d(t,"set",(function(){return u})),r.d(t,"transpose",(function(){return c})),r.d(t,"invert",(function(){return f})),r.d(t,"adjoint",(function(){return d})),r.d(t,"determinant",(function(){return h})),r.d(t,"multiply",(function(){return m})),r.d(t,"rotate",(function(){return b})),r.d(t,"scale",(function(){return p})),r.d(t,"fromRotation",(function(){return v})),r.d(t,"fromScaling",(function(){return g})),r.d(t,"str",(function(){return y})),r.d(t,"frob",(function(){return w})),r.d(t,"LDU",(function(){return _})),r.d(t,"add",(function(){return E})),r.d(t,"subtract",(function(){return T})),r.d(t,"exactEquals",(function(){return S})),r.d(t,"equals",(function(){return j})),r.d(t,"multiplyScalar",(function(){return R})),r.d(t,"multiplyScalarAndAdd",(function(){return P})),r.d(t,"mul",(function(){return x})),r.d(t,"sub",(function(){return z}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function a(e){var t=new i.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function l(e,t,r,n){var a=new i.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function u(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function c(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function f(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r*a-n*i;return o?(o=1/o,e[0]=a*o,e[1]=-i*o,e[2]=-n*o,e[3]=r*o,e):null}function d(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function h(e){return e[0]*e[3]-e[2]*e[1]}function m(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=i*s+a*l,e[1]=n*s+o*l,e[2]=i*u+a*c,e[3]=n*u+o*c,e}function b(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=i*l+a*s,e[1]=n*l+o*s,e[2]=i*-s+a*l,e[3]=n*-s+o*l,e}function p(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[0],l=r[1];return e[0]=i*s,e[1]=n*s,e[2]=a*l,e[3]=o*l,e}function v(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function y(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function _(e,t,r,i){return e[2]=i[2]/i[0],r[0]=i[0],r[1]=i[1],r[3]=i[3]-e[2]*r[1],[e,t,r]}function E(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function T(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function S(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function R(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function P(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}var x=m,z=T},"../node_modules/gl-matrix/lib/gl-matrix/mat2d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"copy",(function(){return o})),r.d(t,"identity",(function(){return s})),r.d(t,"fromValues",(function(){return l})),r.d(t,"set",(function(){return u})),r.d(t,"invert",(function(){return c})),r.d(t,"determinant",(function(){return f})),r.d(t,"multiply",(function(){return d})),r.d(t,"rotate",(function(){return h})),r.d(t,"scale",(function(){return m})),r.d(t,"translate",(function(){return b})),r.d(t,"fromRotation",(function(){return p})),r.d(t,"fromScaling",(function(){return v})),r.d(t,"fromTranslation",(function(){return g})),r.d(t,"str",(function(){return y})),r.d(t,"frob",(function(){return w})),r.d(t,"add",(function(){return _})),r.d(t,"subtract",(function(){return E})),r.d(t,"multiplyScalar",(function(){return T})),r.d(t,"multiplyScalarAndAdd",(function(){return S})),r.d(t,"exactEquals",(function(){return j})),r.d(t,"equals",(function(){return R})),r.d(t,"mul",(function(){return P})),r.d(t,"sub",(function(){return x}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function a(e){var t=new i.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function l(e,t,r,n,a,o){var s=new i.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=a,s[5]=o,s}function u(e,t,r,i,n,a,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e}function c(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=r*a-i*n;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*o)*l,e[5]=(i*o-r*s)*l,e):null}function f(e){return e[0]*e[3]-e[1]*e[2]}function d(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1],f=r[2],d=r[3],h=r[4],m=r[5];return e[0]=i*u+a*c,e[1]=n*u+o*c,e[2]=i*f+a*d,e[3]=n*f+o*d,e[4]=i*h+a*m+s,e[5]=n*h+o*m+l,e}function h(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=i*c+a*u,e[1]=n*c+o*u,e[2]=i*-u+a*c,e[3]=n*-u+o*c,e[4]=s,e[5]=l,e}function m(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i*u,e[1]=n*u,e[2]=a*c,e[3]=o*c,e[4]=s,e[5]=l,e}function b(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=i*u+a*c+s,e[5]=n*u+o*c+l,e}function p(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function v(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function y(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function _(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function E(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function T(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function S(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function j(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function R(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],d=t[3],h=t[4],m=t[5];return Math.abs(r-u)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-f)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-m)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))}var P=d,x=E},"../node_modules/gl-matrix/lib/gl-matrix/mat3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"fromMat4",(function(){return a})),r.d(t,"clone",(function(){return o})),r.d(t,"copy",(function(){return s})),r.d(t,"fromValues",(function(){return l})),r.d(t,"set",(function(){return u})),r.d(t,"identity",(function(){return c})),r.d(t,"transpose",(function(){return f})),r.d(t,"invert",(function(){return d})),r.d(t,"adjoint",(function(){return h})),r.d(t,"determinant",(function(){return m})),r.d(t,"multiply",(function(){return b})),r.d(t,"translate",(function(){return p})),r.d(t,"rotate",(function(){return v})),r.d(t,"scale",(function(){return g})),r.d(t,"fromTranslation",(function(){return y})),r.d(t,"fromRotation",(function(){return w})),r.d(t,"fromScaling",(function(){return _})),r.d(t,"fromMat2d",(function(){return E})),r.d(t,"fromQuat",(function(){return T})),r.d(t,"normalFromMat4",(function(){return S})),r.d(t,"projection",(function(){return j})),r.d(t,"str",(function(){return R})),r.d(t,"frob",(function(){return P})),r.d(t,"add",(function(){return x})),r.d(t,"subtract",(function(){return z})),r.d(t,"multiplyScalar",(function(){return O})),r.d(t,"multiplyScalarAndAdd",(function(){return A})),r.d(t,"exactEquals",(function(){return M})),r.d(t,"equals",(function(){return C})),r.d(t,"mul",(function(){return D})),r.d(t,"sub",(function(){return I}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function o(e){var t=new i.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function l(e,t,r,n,a,o,s,l,u){var c=new i.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=a,c[5]=o,c[6]=s,c[7]=l,c[8]=u,c}function u(e,t,r,i,n,a,o,s,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function f(e,t){if(e===t){var r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function d(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,m=r*f+i*d+n*h;return m?(m=1/m,e[0]=f*m,e[1]=(-c*i+n*u)*m,e[2]=(s*i-n*o)*m,e[3]=d*m,e[4]=(c*r-n*l)*m,e[5]=(-s*r+n*a)*m,e[6]=h*m,e[7]=(-u*r+i*l)*m,e[8]=(o*r-i*a)*m,e):null}function h(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=n*u-i*c,e[2]=i*s-n*o,e[3]=s*l-a*c,e[4]=r*c-n*l,e[5]=n*a-r*s,e[6]=a*u-o*l,e[7]=i*l-r*u,e[8]=r*o-i*a,e}function m(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+r*(-u*n+o*s)+i*(l*n-a*s)}function b(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=r[0],h=r[1],m=r[2],b=r[3],p=r[4],v=r[5],g=r[6],y=r[7],w=r[8];return e[0]=d*i+h*o+m*u,e[1]=d*n+h*s+m*c,e[2]=d*a+h*l+m*f,e[3]=b*i+p*o+v*u,e[4]=b*n+p*s+v*c,e[5]=b*a+p*l+v*f,e[6]=g*i+y*o+w*u,e[7]=g*n+y*s+w*c,e[8]=g*a+y*l+w*f,e}function p(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=d*i+h*o+u,e[7]=d*n+h*s+c,e[8]=d*a+h*l+f,e}function v(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(r),h=Math.cos(r);return e[0]=h*i+d*o,e[1]=h*n+d*s,e[2]=h*a+d*l,e[3]=h*o-d*i,e[4]=h*s-d*n,e[5]=h*l-d*a,e[6]=u,e[7]=c,e[8]=f,e}function g(e,t,r){var i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function y(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function w(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function E(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function T(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,l=n+n,u=r*o,c=i*o,f=i*s,d=n*o,h=n*s,m=n*l,b=a*o,p=a*s,v=a*l;return e[0]=1-f-m,e[3]=c-v,e[6]=d+p,e[1]=c+v,e[4]=1-u-m,e[7]=h-b,e[2]=d-p,e[5]=h+b,e[8]=1-u-f,e}function S(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],m=t[12],b=t[13],p=t[14],v=t[15],g=r*s-i*o,y=r*l-n*o,w=r*u-a*o,_=i*l-n*s,E=i*u-a*s,T=n*u-a*l,S=c*b-f*m,j=c*p-d*m,R=c*v-h*m,P=f*p-d*b,x=f*v-h*b,z=d*v-h*p,O=g*z-y*x+w*P+_*R-E*j+T*S;return O?(O=1/O,e[0]=(s*z-l*x+u*P)*O,e[1]=(l*R-o*z-u*j)*O,e[2]=(o*x-s*R+u*S)*O,e[3]=(n*x-i*z-a*P)*O,e[4]=(r*z-n*R+a*j)*O,e[5]=(i*R-r*x-a*S)*O,e[6]=(b*T-p*E+v*_)*O,e[7]=(p*w-m*T-v*y)*O,e[8]=(m*E-b*w+v*g)*O,e):null}function j(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function R(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function P(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function x(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function z(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function O(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function A(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function C(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=t[0],h=t[1],m=t[2],b=t[3],p=t[4],v=t[5],g=t[6],y=t[7],w=t[8];return Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-m)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-b)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-p)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-v)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-g)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-y)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-w)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))}var D=b,I=z},"../node_modules/gl-matrix/lib/gl-matrix/mat4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"copy",(function(){return o})),r.d(t,"fromValues",(function(){return s})),r.d(t,"set",(function(){return l})),r.d(t,"identity",(function(){return u})),r.d(t,"transpose",(function(){return c})),r.d(t,"invert",(function(){return f})),r.d(t,"adjoint",(function(){return d})),r.d(t,"determinant",(function(){return h})),r.d(t,"multiply",(function(){return m})),r.d(t,"translate",(function(){return b})),r.d(t,"scale",(function(){return p})),r.d(t,"rotate",(function(){return v})),r.d(t,"rotateX",(function(){return g})),r.d(t,"rotateY",(function(){return y})),r.d(t,"rotateZ",(function(){return w})),r.d(t,"fromTranslation",(function(){return _})),r.d(t,"fromScaling",(function(){return E})),r.d(t,"fromRotation",(function(){return T})),r.d(t,"fromXRotation",(function(){return S})),r.d(t,"fromYRotation",(function(){return j})),r.d(t,"fromZRotation",(function(){return R})),r.d(t,"fromRotationTranslation",(function(){return P})),r.d(t,"fromQuat2",(function(){return x})),r.d(t,"getTranslation",(function(){return z})),r.d(t,"getScaling",(function(){return O})),r.d(t,"getRotation",(function(){return A})),r.d(t,"fromRotationTranslationScale",(function(){return M})),r.d(t,"fromRotationTranslationScaleOrigin",(function(){return C})),r.d(t,"fromQuat",(function(){return D})),r.d(t,"frustum",(function(){return I})),r.d(t,"perspective",(function(){return L})),r.d(t,"perspectiveFromFieldOfView",(function(){return F})),r.d(t,"ortho",(function(){return G})),r.d(t,"lookAt",(function(){return B})),r.d(t,"targetTo",(function(){return N})),r.d(t,"str",(function(){return k})),r.d(t,"frob",(function(){return U})),r.d(t,"add",(function(){return V})),r.d(t,"subtract",(function(){return H})),r.d(t,"multiplyScalar",(function(){return q})),r.d(t,"multiplyScalarAndAdd",(function(){return W})),r.d(t,"exactEquals",(function(){return Y})),r.d(t,"equals",(function(){return K})),r.d(t,"mul",(function(){return X})),r.d(t,"sub",(function(){return Q}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a(e){var t=new i.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,r,n,a,o,s,l,u,c,f,d,h,m,b,p){var v=new i.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=a,v[5]=o,v[6]=s,v[7]=l,v[8]=u,v[9]=c,v[10]=f,v[11]=d,v[12]=h,v[13]=m,v[14]=b,v[15]=p,v}function l(e,t,r,i,n,a,o,s,l,u,c,f,d,h,m,b,p){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=h,e[13]=m,e[14]=b,e[15]=p,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function f(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],m=t[12],b=t[13],p=t[14],v=t[15],g=r*s-i*o,y=r*l-n*o,w=r*u-a*o,_=i*l-n*s,E=i*u-a*s,T=n*u-a*l,S=c*b-f*m,j=c*p-d*m,R=c*v-h*m,P=f*p-d*b,x=f*v-h*b,z=d*v-h*p,O=g*z-y*x+w*P+_*R-E*j+T*S;return O?(O=1/O,e[0]=(s*z-l*x+u*P)*O,e[1]=(n*x-i*z-a*P)*O,e[2]=(b*T-p*E+v*_)*O,e[3]=(d*E-f*T-h*_)*O,e[4]=(l*R-o*z-u*j)*O,e[5]=(r*z-n*R+a*j)*O,e[6]=(p*w-m*T-v*y)*O,e[7]=(c*T-d*w+h*y)*O,e[8]=(o*x-s*R+u*S)*O,e[9]=(i*R-r*x-a*S)*O,e[10]=(m*E-b*w+v*g)*O,e[11]=(f*w-c*E-h*g)*O,e[12]=(s*j-o*P-l*S)*O,e[13]=(r*P-i*j+n*S)*O,e[14]=(b*y-m*_-p*g)*O,e[15]=(c*_-f*y+d*g)*O,e):null}function d(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],m=t[12],b=t[13],p=t[14],v=t[15];return e[0]=s*(d*v-h*p)-f*(l*v-u*p)+b*(l*h-u*d),e[1]=-(i*(d*v-h*p)-f*(n*v-a*p)+b*(n*h-a*d)),e[2]=i*(l*v-u*p)-s*(n*v-a*p)+b*(n*u-a*l),e[3]=-(i*(l*h-u*d)-s*(n*h-a*d)+f*(n*u-a*l)),e[4]=-(o*(d*v-h*p)-c*(l*v-u*p)+m*(l*h-u*d)),e[5]=r*(d*v-h*p)-c*(n*v-a*p)+m*(n*h-a*d),e[6]=-(r*(l*v-u*p)-o*(n*v-a*p)+m*(n*u-a*l)),e[7]=r*(l*h-u*d)-o*(n*h-a*d)+c*(n*u-a*l),e[8]=o*(f*v-h*b)-c*(s*v-u*b)+m*(s*h-u*f),e[9]=-(r*(f*v-h*b)-c*(i*v-a*b)+m*(i*h-a*f)),e[10]=r*(s*v-u*b)-o*(i*v-a*b)+m*(i*u-a*s),e[11]=-(r*(s*h-u*f)-o*(i*h-a*f)+c*(i*u-a*s)),e[12]=-(o*(f*p-d*b)-c*(s*p-l*b)+m*(s*d-l*f)),e[13]=r*(f*p-d*b)-c*(i*p-n*b)+m*(i*d-n*f),e[14]=-(r*(s*p-l*b)-o*(i*p-n*b)+m*(i*l-n*s)),e[15]=r*(s*d-l*f)-o*(i*d-n*f)+c*(i*l-n*s),e}function h(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],m=e[13],b=e[14],p=e[15];return(t*o-r*a)*(f*p-d*b)-(t*s-i*a)*(c*p-d*m)+(t*l-n*a)*(c*b-f*m)+(r*s-i*o)*(u*p-d*h)-(r*l-n*o)*(u*b-f*h)+(i*l-n*s)*(u*m-c*h)}function m(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],m=t[11],b=t[12],p=t[13],v=t[14],g=t[15],y=r[0],w=r[1],_=r[2],E=r[3];return e[0]=y*i+w*s+_*f+E*b,e[1]=y*n+w*l+_*d+E*p,e[2]=y*a+w*u+_*h+E*v,e[3]=y*o+w*c+_*m+E*g,y=r[4],w=r[5],_=r[6],E=r[7],e[4]=y*i+w*s+_*f+E*b,e[5]=y*n+w*l+_*d+E*p,e[6]=y*a+w*u+_*h+E*v,e[7]=y*o+w*c+_*m+E*g,y=r[8],w=r[9],_=r[10],E=r[11],e[8]=y*i+w*s+_*f+E*b,e[9]=y*n+w*l+_*d+E*p,e[10]=y*a+w*u+_*h+E*v,e[11]=y*o+w*c+_*m+E*g,y=r[12],w=r[13],_=r[14],E=r[15],e[12]=y*i+w*s+_*f+E*b,e[13]=y*n+w*l+_*d+E*p,e[14]=y*a+w*u+_*h+E*v,e[15]=y*o+w*c+_*m+E*g,e}function b(e,t,r){var i=r[0],n=r[1],a=r[2],o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,m=void 0,b=void 0,p=void 0,v=void 0;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*a+t[12],e[13]=t[1]*i+t[5]*n+t[9]*a+t[13],e[14]=t[2]*i+t[6]*n+t[10]*a+t[14],e[15]=t[3]*i+t[7]*n+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],m=t[8],b=t[9],p=t[10],v=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=h,e[8]=m,e[9]=b,e[10]=p,e[11]=v,e[12]=o*i+c*n+m*a+t[12],e[13]=s*i+f*n+b*a+t[13],e[14]=l*i+d*n+p*a+t[14],e[15]=u*i+h*n+v*a+t[15]),e}function p(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function v(e,t,r,n){var a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z=n[0],O=n[1],A=n[2],M=Math.sqrt(z*z+O*O+A*A);return M<i.EPSILON?null:(z*=M=1/M,O*=M,A*=M,a=Math.sin(r),s=1-(o=Math.cos(r)),l=t[0],u=t[1],c=t[2],f=t[3],d=t[4],h=t[5],m=t[6],b=t[7],p=t[8],v=t[9],g=t[10],y=t[11],w=z*z*s+o,_=O*z*s+A*a,E=A*z*s-O*a,T=z*O*s-A*a,S=O*O*s+o,j=A*O*s+z*a,R=z*A*s+O*a,P=O*A*s-z*a,x=A*A*s+o,e[0]=l*w+d*_+p*E,e[1]=u*w+h*_+v*E,e[2]=c*w+m*_+g*E,e[3]=f*w+b*_+y*E,e[4]=l*T+d*S+p*j,e[5]=u*T+h*S+v*j,e[6]=c*T+m*S+g*j,e[7]=f*T+b*S+y*j,e[8]=l*R+d*P+p*x,e[9]=u*R+h*P+v*x,e[10]=c*R+m*P+g*x,e[11]=f*R+b*P+y*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function g(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+u*i,e[5]=o*n+c*i,e[6]=s*n+f*i,e[7]=l*n+d*i,e[8]=u*n-a*i,e[9]=c*n-o*i,e[10]=f*n-s*i,e[11]=d*n-l*i,e}function y(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-u*i,e[1]=o*n-c*i,e[2]=s*n-f*i,e[3]=l*n-d*i,e[8]=a*i+u*n,e[9]=o*i+c*n,e[10]=s*i+f*n,e[11]=l*i+d*n,e}function w(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+u*i,e[1]=o*n+c*i,e[2]=s*n+f*i,e[3]=l*n+d*i,e[4]=u*n-a*i,e[5]=c*n-o*i,e[6]=f*n-s*i,e[7]=d*n-l*i,e}function _(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function E(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t,r){var n,a,o,s=r[0],l=r[1],u=r[2],c=Math.sqrt(s*s+l*l+u*u);return c<i.EPSILON?null:(s*=c=1/c,l*=c,u*=c,n=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=s*s*o+a,e[1]=l*s*o+u*n,e[2]=u*s*o-l*n,e[3]=0,e[4]=s*l*o-u*n,e[5]=l*l*o+a,e[6]=u*l*o+s*n,e[7]=0,e[8]=s*u*o+l*n,e[9]=l*u*o-s*n,e[10]=u*u*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function P(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,l=n+n,u=a+a,c=i*s,f=i*l,d=i*u,h=n*l,m=n*u,b=a*u,p=o*s,v=o*l,g=o*u;return e[0]=1-(h+b),e[1]=f+g,e[2]=d-v,e[3]=0,e[4]=f-g,e[5]=1-(c+b),e[6]=m+p,e[7]=0,e[8]=d+v,e[9]=m-p,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function x(e,t){var r=new i.ARRAY_TYPE(3),n=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=n*n+a*a+o*o+s*s;return d>0?(r[0]=2*(l*s+f*n+u*o-c*a)/d,r[1]=2*(u*s+f*a+c*n-l*o)/d,r[2]=2*(c*s+f*o+l*a-u*n)/d):(r[0]=2*(l*s+f*n+u*o-c*a),r[1]=2*(u*s+f*a+c*n-l*o),r[2]=2*(c*s+f*o+l*a-u*n)),P(e,t,r),e}function z(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function O(e,t){var r=t[0],i=t[1],n=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e}function A(e,t){var r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function M(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=t[3],l=n+n,u=a+a,c=o+o,f=n*l,d=n*u,h=n*c,m=a*u,b=a*c,p=o*c,v=s*l,g=s*u,y=s*c,w=i[0],_=i[1],E=i[2];return e[0]=(1-(m+p))*w,e[1]=(d+y)*w,e[2]=(h-g)*w,e[3]=0,e[4]=(d-y)*_,e[5]=(1-(f+p))*_,e[6]=(b+v)*_,e[7]=0,e[8]=(h+g)*E,e[9]=(b-v)*E,e[10]=(1-(f+m))*E,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function C(e,t,r,i,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=a+a,c=o+o,f=s+s,d=a*u,h=a*c,m=a*f,b=o*c,p=o*f,v=s*f,g=l*u,y=l*c,w=l*f,_=i[0],E=i[1],T=i[2],S=n[0],j=n[1],R=n[2],P=(1-(b+v))*_,x=(h+w)*_,z=(m-y)*_,O=(h-w)*E,A=(1-(d+v))*E,M=(p+g)*E,C=(m+y)*T,D=(p-g)*T,I=(1-(d+b))*T;return e[0]=P,e[1]=x,e[2]=z,e[3]=0,e[4]=O,e[5]=A,e[6]=M,e[7]=0,e[8]=C,e[9]=D,e[10]=I,e[11]=0,e[12]=r[0]+S-(P*S+O*j+C*R),e[13]=r[1]+j-(x*S+A*j+D*R),e[14]=r[2]+R-(z*S+M*j+I*R),e[15]=1,e}function D(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,l=n+n,u=r*o,c=i*o,f=i*s,d=n*o,h=n*s,m=n*l,b=a*o,p=a*s,v=a*l;return e[0]=1-f-m,e[1]=c+v,e[2]=d-p,e[3]=0,e[4]=c-v,e[5]=1-u-m,e[6]=h+b,e[7]=0,e[8]=d+p,e[9]=h-b,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function I(e,t,r,i,n,a,o){var s=1/(r-t),l=1/(n-i),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}function L(e,t,r,i,n){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function F(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(n-a)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function G(e,t,r,i,n,a,o){var s=1/(t-r),l=1/(i-n),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(o+a)*u,e[15]=1,e}function B(e,t,r,n){var a=void 0,o=void 0,s=void 0,l=void 0,c=void 0,f=void 0,d=void 0,h=void 0,m=void 0,b=void 0,p=t[0],v=t[1],g=t[2],y=n[0],w=n[1],_=n[2],E=r[0],T=r[1],S=r[2];return Math.abs(p-E)<i.EPSILON&&Math.abs(v-T)<i.EPSILON&&Math.abs(g-S)<i.EPSILON?u(e):(d=p-E,h=v-T,m=g-S,a=w*(m*=b=1/Math.sqrt(d*d+h*h+m*m))-_*(h*=b),o=_*(d*=b)-y*m,s=y*h-w*d,(b=Math.sqrt(a*a+o*o+s*s))?(a*=b=1/b,o*=b,s*=b):(a=0,o=0,s=0),l=h*s-m*o,c=m*a-d*s,f=d*o-h*a,(b=Math.sqrt(l*l+c*c+f*f))?(l*=b=1/b,c*=b,f*=b):(l=0,c=0,f=0),e[0]=a,e[1]=l,e[2]=d,e[3]=0,e[4]=o,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=f,e[10]=m,e[11]=0,e[12]=-(a*p+o*v+s*g),e[13]=-(l*p+c*v+f*g),e[14]=-(d*p+h*v+m*g),e[15]=1,e)}function N(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=i[0],l=i[1],u=i[2],c=n-r[0],f=a-r[1],d=o-r[2],h=c*c+f*f+d*d;h>0&&(c*=h=1/Math.sqrt(h),f*=h,d*=h);var m=l*d-u*f,b=u*c-s*d,p=s*f-l*c;return(h=m*m+b*b+p*p)>0&&(m*=h=1/Math.sqrt(h),b*=h,p*=h),e[0]=m,e[1]=b,e[2]=p,e[3]=0,e[4]=f*p-d*b,e[5]=d*m-c*p,e[6]=c*b-f*m,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=n,e[13]=a,e[14]=o,e[15]=1,e}function k(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function U(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function V(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function H(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function q(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function W(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function K(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],h=e[10],m=e[11],b=e[12],p=e[13],v=e[14],g=e[15],y=t[0],w=t[1],_=t[2],E=t[3],T=t[4],S=t[5],j=t[6],R=t[7],P=t[8],x=t[9],z=t[10],O=t[11],A=t[12],M=t[13],C=t[14],D=t[15];return Math.abs(r-y)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-w)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-_)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-E)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-T)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-S)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-j)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-R)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-P)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-x)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(h-z)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(m-O)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(b-A)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(p-M)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(v-C)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(g-D)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))}var X=m,Q=H},"../node_modules/gl-matrix/lib/gl-matrix/quat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return s})),r.d(t,"identity",(function(){return l})),r.d(t,"setAxisAngle",(function(){return u})),r.d(t,"getAxisAngle",(function(){return c})),r.d(t,"multiply",(function(){return f})),r.d(t,"rotateX",(function(){return d})),r.d(t,"rotateY",(function(){return h})),r.d(t,"rotateZ",(function(){return m})),r.d(t,"calculateW",(function(){return b})),r.d(t,"slerp",(function(){return p})),r.d(t,"random",(function(){return v})),r.d(t,"invert",(function(){return g})),r.d(t,"conjugate",(function(){return y})),r.d(t,"fromMat3",(function(){return w})),r.d(t,"fromEuler",(function(){return _})),r.d(t,"str",(function(){return E})),r.d(t,"clone",(function(){return z})),r.d(t,"fromValues",(function(){return O})),r.d(t,"copy",(function(){return A})),r.d(t,"set",(function(){return M})),r.d(t,"add",(function(){return C})),r.d(t,"mul",(function(){return D})),r.d(t,"scale",(function(){return I})),r.d(t,"dot",(function(){return L})),r.d(t,"lerp",(function(){return F})),r.d(t,"length",(function(){return G})),r.d(t,"len",(function(){return B})),r.d(t,"squaredLength",(function(){return N})),r.d(t,"sqrLen",(function(){return k})),r.d(t,"normalize",(function(){return U})),r.d(t,"exactEquals",(function(){return V})),r.d(t,"equals",(function(){return H})),r.d(t,"rotationTo",(function(){return q})),r.d(t,"sqlerp",(function(){return W})),r.d(t,"setAxes",(function(){return Y}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),n=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js"),a=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js"),o=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");function s(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function l(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,r){r*=.5;var i=Math.sin(r);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(r),e}function c(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>i.EPSILON?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function f(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=i*c+o*s+n*u-a*l,e[1]=n*c+o*l+a*s-i*u,e[2]=a*c+o*u+i*l-n*s,e[3]=o*c-i*s-n*l-a*u,e}function d(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=i*l+o*s,e[1]=n*l+a*s,e[2]=a*l-n*s,e[3]=o*l-i*s,e}function h(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=i*l-a*s,e[1]=n*l+o*s,e[2]=a*l+i*s,e[3]=o*l-n*s,e}function m(e,t,r){r*=.5;var i=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=i*l+n*s,e[1]=n*l-i*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e}function b(e,t){var r=t[0],i=t[1],n=t[2];return e[0]=r,e[1]=i,e[2]=n,e[3]=Math.sqrt(Math.abs(1-r*r-i*i-n*n)),e}function p(e,t,r,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=r[0],c=r[1],f=r[2],d=r[3],h=void 0,m=void 0,b=void 0,p=void 0,v=void 0;return(m=a*u+o*c+s*f+l*d)<0&&(m=-m,u=-u,c=-c,f=-f,d=-d),1-m>i.EPSILON?(h=Math.acos(m),b=Math.sin(h),p=Math.sin((1-n)*h)/b,v=Math.sin(n*h)/b):(p=1-n,v=n),e[0]=p*a+v*u,e[1]=p*o+v*c,e[2]=p*s+v*f,e[3]=p*l+v*d,e}function v(e){var t=i.RANDOM(),r=i.RANDOM(),n=i.RANDOM(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*n),e[3]=o*Math.cos(2*Math.PI*n),e}function g(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r*r+i*i+n*n+a*a,s=o?1/o:0;return e[0]=-r*s,e[1]=-i*s,e[2]=-n*s,e[3]=a*s,e}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function w(e,t){var r=t[0]+t[4]+t[8],i=void 0;if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var a=(n+1)%3,o=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*a+a]-t[3*o+o]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*a+o]-t[3*o+a])*i,e[a]=(t[3*a+n]+t[3*n+a])*i,e[o]=(t[3*o+n]+t[3*n+o])*i}return e}function _(e,t,r,i){var n=.5*Math.PI/180;t*=n,r*=n,i*=n;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(r),l=Math.cos(r),u=Math.sin(i),c=Math.cos(i);return e[0]=a*l*c-o*s*u,e[1]=o*s*c+a*l*u,e[2]=o*l*u-a*s*c,e[3]=o*l*c+a*s*u,e}function E(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var T,S,j,R,P,x,z=o.clone,O=o.fromValues,A=o.copy,M=o.set,C=o.add,D=f,I=o.scale,L=o.dot,F=o.lerp,G=o.length,B=G,N=o.squaredLength,k=N,U=o.normalize,V=o.exactEquals,H=o.equals,q=(T=a.create(),S=a.fromValues(1,0,0),j=a.fromValues(0,1,0),function(e,t,r){var i=a.dot(t,r);return i<-.999999?(a.cross(T,S,t),a.len(T)<1e-6&&a.cross(T,j,t),a.normalize(T,T),u(e,T,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(a.cross(T,t,r),e[0]=T[0],e[1]=T[1],e[2]=T[2],e[3]=1+i,U(e,e))}),W=(R=s(),P=s(),function(e,t,r,i,n,a){return p(R,t,n,a),p(P,r,i,a),p(e,R,P,2*a*(1-a)),e}),Y=(x=n.create(),function(e,t,r,i){return x[0]=r[0],x[3]=r[1],x[6]=r[2],x[1]=i[0],x[4]=i[1],x[7]=i[2],x[2]=-t[0],x[5]=-t[1],x[8]=-t[2],U(e,w(e,x))})},"../node_modules/gl-matrix/lib/gl-matrix/quat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return o})),r.d(t,"clone",(function(){return s})),r.d(t,"fromValues",(function(){return l})),r.d(t,"fromRotationTranslationValues",(function(){return u})),r.d(t,"fromRotationTranslation",(function(){return c})),r.d(t,"fromTranslation",(function(){return f})),r.d(t,"fromRotation",(function(){return d})),r.d(t,"fromMat4",(function(){return h})),r.d(t,"copy",(function(){return m})),r.d(t,"identity",(function(){return b})),r.d(t,"set",(function(){return p})),r.d(t,"getReal",(function(){return v})),r.d(t,"getDual",(function(){return g})),r.d(t,"setReal",(function(){return y})),r.d(t,"setDual",(function(){return w})),r.d(t,"getTranslation",(function(){return _})),r.d(t,"translate",(function(){return E})),r.d(t,"rotateX",(function(){return T})),r.d(t,"rotateY",(function(){return S})),r.d(t,"rotateZ",(function(){return j})),r.d(t,"rotateByQuatAppend",(function(){return R})),r.d(t,"rotateByQuatPrepend",(function(){return P})),r.d(t,"rotateAroundAxis",(function(){return x})),r.d(t,"add",(function(){return z})),r.d(t,"multiply",(function(){return O})),r.d(t,"mul",(function(){return A})),r.d(t,"scale",(function(){return M})),r.d(t,"dot",(function(){return C})),r.d(t,"lerp",(function(){return D})),r.d(t,"invert",(function(){return I})),r.d(t,"conjugate",(function(){return L})),r.d(t,"length",(function(){return F})),r.d(t,"len",(function(){return G})),r.d(t,"squaredLength",(function(){return B})),r.d(t,"sqrLen",(function(){return N})),r.d(t,"normalize",(function(){return k})),r.d(t,"str",(function(){return U})),r.d(t,"exactEquals",(function(){return V})),r.d(t,"equals",(function(){return H}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),n=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js"),a=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");function o(){var e=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function s(e){var t=new i.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function l(e,t,r,n,a,o,s,l){var u=new i.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=a,u[5]=o,u[6]=s,u[7]=l,u}function u(e,t,r,n,a,o,s){var l=new i.ARRAY_TYPE(8);l[0]=e,l[1]=t,l[2]=r,l[3]=n;var u=.5*a,c=.5*o,f=.5*s;return l[4]=u*n+c*r-f*t,l[5]=c*n+f*e-u*r,l[6]=f*n+u*t-c*e,l[7]=-u*e-c*t-f*r,l}function c(e,t,r){var i=.5*r[0],n=.5*r[1],a=.5*r[2],o=t[0],s=t[1],l=t[2],u=t[3];return e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=i*u+n*l-a*s,e[5]=n*u+a*o-i*l,e[6]=a*u+i*s-n*o,e[7]=-i*o-n*s-a*l,e}function f(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function h(e,t){var r=n.create();a.getRotation(r,t);var o=new i.ARRAY_TYPE(3);return a.getTranslation(o,t),c(e,r,o),e}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function b(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function p(e,t,r,i,n,a,o,s,l){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e}var v=n.copy;function g(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var y=n.copy;function w(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function _(e,t){var r=t[4],i=t[5],n=t[6],a=t[7],o=-t[0],s=-t[1],l=-t[2],u=t[3];return e[0]=2*(r*u+a*o+i*l-n*s),e[1]=2*(i*u+a*s+n*o-r*l),e[2]=2*(n*u+a*l+r*s-i*o),e}function E(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=.5*r[0],l=.5*r[1],u=.5*r[2],c=t[4],f=t[5],d=t[6],h=t[7];return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=o*s+n*u-a*l+c,e[5]=o*l+a*s-i*u+f,e[6]=o*u+i*l-n*s+d,e[7]=-i*s-n*l-a*u+h,e}function T(e,t,r){var i=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*i+u*o-c*a,h=u*s+f*a+c*i-l*o,m=c*s+f*o+l*a-u*i,b=f*s-l*i-u*a-c*o;return n.rotateX(e,t,r),i=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+b*i+h*o-m*a,e[5]=h*s+b*a+m*i-d*o,e[6]=m*s+b*o+d*a-h*i,e[7]=b*s-d*i-h*a-m*o,e}function S(e,t,r){var i=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*i+u*o-c*a,h=u*s+f*a+c*i-l*o,m=c*s+f*o+l*a-u*i,b=f*s-l*i-u*a-c*o;return n.rotateY(e,t,r),i=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+b*i+h*o-m*a,e[5]=h*s+b*a+m*i-d*o,e[6]=m*s+b*o+d*a-h*i,e[7]=b*s-d*i-h*a-m*o,e}function j(e,t,r){var i=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*i+u*o-c*a,h=u*s+f*a+c*i-l*o,m=c*s+f*o+l*a-u*i,b=f*s-l*i-u*a-c*o;return n.rotateZ(e,t,r),i=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+b*i+h*o-m*a,e[5]=h*s+b*a+m*i-d*o,e[6]=m*s+b*o+d*a-h*i,e[7]=b*s-d*i-h*a-m*o,e}function R(e,t,r){var i=r[0],n=r[1],a=r[2],o=r[3],s=t[0],l=t[1],u=t[2],c=t[3];return e[0]=s*o+c*i+l*a-u*n,e[1]=l*o+c*n+u*i-s*a,e[2]=u*o+c*a+s*n-l*i,e[3]=c*o-s*i-l*n-u*a,s=t[4],l=t[5],u=t[6],c=t[7],e[4]=s*o+c*i+l*a-u*n,e[5]=l*o+c*n+u*i-s*a,e[6]=u*o+c*a+s*n-l*i,e[7]=c*o-s*i-l*n-u*a,e}function P(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=i*c+o*s+n*u-a*l,e[1]=n*c+o*l+a*s-i*u,e[2]=a*c+o*u+i*l-n*s,e[3]=o*c-i*s-n*l-a*u,s=r[4],l=r[5],u=r[6],c=r[7],e[4]=i*c+o*s+n*u-a*l,e[5]=n*c+o*l+a*s-i*u,e[6]=a*c+o*u+i*l-n*s,e[7]=o*c-i*s-n*l-a*u,e}function x(e,t,r,n){if(Math.abs(n)<i.EPSILON)return m(e,t);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n*=.5;var o=Math.sin(n),s=o*r[0]/a,l=o*r[1]/a,u=o*r[2]/a,c=Math.cos(n),f=t[0],d=t[1],h=t[2],b=t[3];e[0]=f*c+b*s+d*u-h*l,e[1]=d*c+b*l+h*s-f*u,e[2]=h*c+b*u+f*l-d*s,e[3]=b*c-f*s-d*l-h*u;var p=t[4],v=t[5],g=t[6],y=t[7];return e[4]=p*c+y*s+v*u-g*l,e[5]=v*c+y*l+g*s-p*u,e[6]=g*c+y*u+p*l-v*s,e[7]=y*c-p*s-v*l-g*u,e}function z(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function O(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=r[4],l=r[5],u=r[6],c=r[7],f=t[4],d=t[5],h=t[6],m=t[7],b=r[0],p=r[1],v=r[2],g=r[3];return e[0]=i*g+o*b+n*v-a*p,e[1]=n*g+o*p+a*b-i*v,e[2]=a*g+o*v+i*p-n*b,e[3]=o*g-i*b-n*p-a*v,e[4]=i*c+o*s+n*u-a*l+f*g+m*b+d*v-h*p,e[5]=n*c+o*l+a*s-i*u+d*g+m*p+h*b-f*v,e[6]=a*c+o*u+i*l-n*s+h*g+m*v+f*p-d*b,e[7]=o*c-i*s-n*l-a*u+m*g-f*b-d*p-h*v,e}var A=O;function M(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var C=n.dot;function D(e,t,r,i){var n=1-i;return C(t,r)<0&&(i=-i),e[0]=t[0]*n+r[0]*i,e[1]=t[1]*n+r[1]*i,e[2]=t[2]*n+r[2]*i,e[3]=t[3]*n+r[3]*i,e[4]=t[4]*n+r[4]*i,e[5]=t[5]*n+r[5]*i,e[6]=t[6]*n+r[6]*i,e[7]=t[7]*n+r[7]*i,e}function I(e,t){var r=B(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function L(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var F=n.length,G=F,B=n.squaredLength,N=B;function k(e,t){var r=B(t);if(r>0){r=Math.sqrt(r);var i=t[0]/r,n=t[1]/r,a=t[2]/r,o=t[3]/r,s=t[4],l=t[5],u=t[6],c=t[7],f=i*s+n*l+a*u+o*c;e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=(s-i*f)/r,e[5]=(l-n*f)/r,e[6]=(u-a*f)/r,e[7]=(c-o*f)/r}return e}function U(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function H(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=t[0],d=t[1],h=t[2],m=t[3],b=t[4],p=t[5],v=t[6],g=t[7];return Math.abs(r-f)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-m)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-b)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-p)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(u-v)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-g)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))}},"../node_modules/gl-matrix/lib/gl-matrix/vec2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"fromValues",(function(){return o})),r.d(t,"copy",(function(){return s})),r.d(t,"set",(function(){return l})),r.d(t,"add",(function(){return u})),r.d(t,"subtract",(function(){return c})),r.d(t,"multiply",(function(){return f})),r.d(t,"divide",(function(){return d})),r.d(t,"ceil",(function(){return h})),r.d(t,"floor",(function(){return m})),r.d(t,"min",(function(){return b})),r.d(t,"max",(function(){return p})),r.d(t,"round",(function(){return v})),r.d(t,"scale",(function(){return g})),r.d(t,"scaleAndAdd",(function(){return y})),r.d(t,"distance",(function(){return w})),r.d(t,"squaredDistance",(function(){return _})),r.d(t,"length",(function(){return E})),r.d(t,"squaredLength",(function(){return T})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return R})),r.d(t,"dot",(function(){return P})),r.d(t,"cross",(function(){return x})),r.d(t,"lerp",(function(){return z})),r.d(t,"random",(function(){return O})),r.d(t,"transformMat2",(function(){return A})),r.d(t,"transformMat2d",(function(){return M})),r.d(t,"transformMat3",(function(){return C})),r.d(t,"transformMat4",(function(){return D})),r.d(t,"rotate",(function(){return I})),r.d(t,"angle",(function(){return L})),r.d(t,"str",(function(){return F})),r.d(t,"exactEquals",(function(){return G})),r.d(t,"equals",(function(){return B})),r.d(t,"len",(function(){return k})),r.d(t,"sub",(function(){return U})),r.d(t,"mul",(function(){return V})),r.d(t,"div",(function(){return H})),r.d(t,"dist",(function(){return q})),r.d(t,"sqrDist",(function(){return W})),r.d(t,"sqrLen",(function(){return Y})),r.d(t,"forEach",(function(){return K}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function a(e){var t=new i.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function o(e,t){var r=new i.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function s(e,t){return e[0]=t[0],e[1]=t[1],e}function l(e,t,r){return e[0]=t,e[1]=r,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function c(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function h(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function b(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function p(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function v(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function g(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function y(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function w(e,t){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function _(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function E(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function T(e){var t=e[0],r=e[1];return t*t+r*r}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function R(e,t){var r=t[0],i=t[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function P(e,t){return e[0]*t[0]+e[1]*t[1]}function x(e,t,r){var i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function z(e,t,r,i){var n=t[0],a=t[1];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e}function O(e,t){t=t||1;var r=2*i.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function A(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function M(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function C(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function D(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function I(e,t,r,i){var n=t[0]-r[0],a=t[1]-r[1],o=Math.sin(i),s=Math.cos(i);return e[0]=n*s-a*o+r[0],e[1]=n*o+a*s+r[1],e}function L(e,t){var r=e[0],i=e[1],n=t[0],a=t[1],o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));var s=n*n+a*a;s>0&&(s=1/Math.sqrt(s));var l=(r*n+i*a)*o*s;return l>1?0:l<-1?Math.PI:Math.acos(l)}function F(e){return"vec2("+e[0]+", "+e[1]+")"}function G(e,t){return e[0]===t[0]&&e[1]===t[1]}function B(e,t){var r=e[0],n=e[1],a=t[0],o=t[1];return Math.abs(r-a)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))}var N,k=E,U=c,V=f,H=d,q=w,W=_,Y=T,K=(N=n(),function(e,t,r,i,n,a){var o=void 0,s=void 0;for(t||(t=2),r||(r=0),s=i?Math.min(i*t+r,e.length):e.length,o=r;o<s;o+=t)N[0]=e[o],N[1]=e[o+1],n(N,N,a),e[o]=N[0],e[o+1]=N[1];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"length",(function(){return o})),r.d(t,"fromValues",(function(){return s})),r.d(t,"copy",(function(){return l})),r.d(t,"set",(function(){return u})),r.d(t,"add",(function(){return c})),r.d(t,"subtract",(function(){return f})),r.d(t,"multiply",(function(){return d})),r.d(t,"divide",(function(){return h})),r.d(t,"ceil",(function(){return m})),r.d(t,"floor",(function(){return b})),r.d(t,"min",(function(){return p})),r.d(t,"max",(function(){return v})),r.d(t,"round",(function(){return g})),r.d(t,"scale",(function(){return y})),r.d(t,"scaleAndAdd",(function(){return w})),r.d(t,"distance",(function(){return _})),r.d(t,"squaredDistance",(function(){return E})),r.d(t,"squaredLength",(function(){return T})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return R})),r.d(t,"dot",(function(){return P})),r.d(t,"cross",(function(){return x})),r.d(t,"lerp",(function(){return z})),r.d(t,"hermite",(function(){return O})),r.d(t,"bezier",(function(){return A})),r.d(t,"random",(function(){return M})),r.d(t,"transformMat4",(function(){return C})),r.d(t,"transformMat3",(function(){return D})),r.d(t,"transformQuat",(function(){return I})),r.d(t,"rotateX",(function(){return L})),r.d(t,"rotateY",(function(){return F})),r.d(t,"rotateZ",(function(){return G})),r.d(t,"angle",(function(){return B})),r.d(t,"str",(function(){return N})),r.d(t,"exactEquals",(function(){return k})),r.d(t,"equals",(function(){return U})),r.d(t,"sub",(function(){return H})),r.d(t,"mul",(function(){return q})),r.d(t,"div",(function(){return W})),r.d(t,"dist",(function(){return Y})),r.d(t,"sqrDist",(function(){return K})),r.d(t,"len",(function(){return X})),r.d(t,"sqrLen",(function(){return Q})),r.d(t,"forEach",(function(){return Z}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=new i.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function o(e){var t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function s(e,t,r){var n=new i.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function f(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function d(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function h(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function m(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function b(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function v(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function g(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function y(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function w(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function _(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function E(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function T(e){var t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function R(e,t){var r=t[0],i=t[1],n=t[2],a=r*r+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function P(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function x(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[0],s=r[1],l=r[2];return e[0]=n*l-a*s,e[1]=a*o-i*l,e[2]=i*s-n*o,e}function z(e,t,r,i){var n=t[0],a=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e[2]=o+i*(r[2]-o),e}function O(e,t,r,i,n,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+r[0]*l+i[0]*u+n[0]*c,e[1]=t[1]*s+r[1]*l+i[1]*u+n[1]*c,e[2]=t[2]*s+r[2]*l+i[2]*u+n[2]*c,e}function A(e,t,r,i,n,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,d=l*a;return e[0]=t[0]*u+r[0]*c+i[0]*f+n[0]*d,e[1]=t[1]*u+r[1]*c+i[1]*f+n[1]*d,e[2]=t[2]*u+r[2]*c+i[2]*f+n[2]*d,e}function M(e,t){t=t||1;var r=2*i.RANDOM()*Math.PI,n=2*i.RANDOM()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function C(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[3]*i+r[7]*n+r[11]*a+r[15];return o=o||1,e[0]=(r[0]*i+r[4]*n+r[8]*a+r[12])/o,e[1]=(r[1]*i+r[5]*n+r[9]*a+r[13])/o,e[2]=(r[2]*i+r[6]*n+r[10]*a+r[14])/o,e}function D(e,t,r){var i=t[0],n=t[1],a=t[2];return e[0]=i*r[0]+n*r[3]+a*r[6],e[1]=i*r[1]+n*r[4]+a*r[7],e[2]=i*r[2]+n*r[5]+a*r[8],e}function I(e,t,r){var i=r[0],n=r[1],a=r[2],o=r[3],s=t[0],l=t[1],u=t[2],c=n*u-a*l,f=a*s-i*u,d=i*l-n*s,h=n*d-a*f,m=a*c-i*d,b=i*f-n*c,p=2*o;return c*=p,f*=p,d*=p,h*=2,m*=2,b*=2,e[0]=s+c+h,e[1]=l+f+m,e[2]=u+d+b,e}function L(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[0],a[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),a[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function F(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),a[1]=n[1],a[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function G(e,t,r,i){var n=[],a=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],a[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),a[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),a[2]=n[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e}function B(e,t){var r=s(e[0],e[1],e[2]),i=s(t[0],t[1],t[2]);R(r,r),R(i,i);var n=P(r,i);return n>1?0:n<-1?Math.PI:Math.acos(n)}function N(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function k(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function U(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(r-o)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-l)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}var V,H=f,q=d,W=h,Y=_,K=E,X=o,Q=T,Z=(V=n(),function(e,t,r,i,n,a){var o=void 0,s=void 0;for(t||(t=3),r||(r=0),s=i?Math.min(i*t+r,e.length):e.length,o=r;o<s;o+=t)V[0]=e[o],V[1]=e[o+1],V[2]=e[o+2],n(V,V,a),e[o]=V[0],e[o+1]=V[1],e[o+2]=V[2];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",(function(){return n})),r.d(t,"clone",(function(){return a})),r.d(t,"fromValues",(function(){return o})),r.d(t,"copy",(function(){return s})),r.d(t,"set",(function(){return l})),r.d(t,"add",(function(){return u})),r.d(t,"subtract",(function(){return c})),r.d(t,"multiply",(function(){return f})),r.d(t,"divide",(function(){return d})),r.d(t,"ceil",(function(){return h})),r.d(t,"floor",(function(){return m})),r.d(t,"min",(function(){return b})),r.d(t,"max",(function(){return p})),r.d(t,"round",(function(){return v})),r.d(t,"scale",(function(){return g})),r.d(t,"scaleAndAdd",(function(){return y})),r.d(t,"distance",(function(){return w})),r.d(t,"squaredDistance",(function(){return _})),r.d(t,"length",(function(){return E})),r.d(t,"squaredLength",(function(){return T})),r.d(t,"negate",(function(){return S})),r.d(t,"inverse",(function(){return j})),r.d(t,"normalize",(function(){return R})),r.d(t,"dot",(function(){return P})),r.d(t,"lerp",(function(){return x})),r.d(t,"random",(function(){return z})),r.d(t,"transformMat4",(function(){return O})),r.d(t,"transformQuat",(function(){return A})),r.d(t,"str",(function(){return M})),r.d(t,"exactEquals",(function(){return C})),r.d(t,"equals",(function(){return D})),r.d(t,"sub",(function(){return L})),r.d(t,"mul",(function(){return F})),r.d(t,"div",(function(){return G})),r.d(t,"dist",(function(){return B})),r.d(t,"sqrDist",(function(){return N})),r.d(t,"len",(function(){return k})),r.d(t,"sqrLen",(function(){return U})),r.d(t,"forEach",(function(){return V}));var i=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function n(){var e=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function a(e){var t=new i.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(e,t,r,n){var a=new i.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function l(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function c(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function h(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function b(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function p(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function v(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function g(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function y(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function w(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+a*a)}function _(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return r*r+i*i+n*n+a*a}function E(e){var t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function T(e){var t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function R(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r*r+i*i+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=a*o),e}function P(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function x(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=t[3];return e[0]=n+i*(r[0]-n),e[1]=a+i*(r[1]-a),e[2]=o+i*(r[2]-o),e[3]=s+i*(r[3]-s),e}function z(e,t){var r,n,a,o,s,l;t=t||1;do{s=(r=2*i.RANDOM()-1)*r+(n=2*i.RANDOM()-1)*n}while(s>=1);do{l=(a=2*i.RANDOM()-1)*a+(o=2*i.RANDOM()-1)*o}while(l>=1);var u=Math.sqrt((1-s)/l);return e[0]=t*r,e[1]=t*n,e[2]=t*a*u,e[3]=t*o*u,e}function O(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,e}function A(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*a-l*n,f=u*n+l*i-o*a,d=u*a+o*n-s*i,h=-o*i-s*n-l*a;return e[0]=c*u+h*-o+f*-l-d*-s,e[1]=f*u+h*-s+d*-o-c*-l,e[2]=d*u+h*-l+c*-s-f*-o,e[3]=t[3],e}function M(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function D(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}var I,L=c,F=f,G=d,B=w,N=_,k=E,U=T,V=(I=n(),function(e,t,r,i,n,a){var o=void 0,s=void 0;for(t||(t=4),r||(r=0),s=i?Math.min(i*t+r,e.length):e.length,o=r;o<s;o+=t)I[0]=e[o],I[1]=e[o+1],I[2]=e[o+2],I[3]=e[o+3],n(I,I,a),e[o]=I[0],e[o+1]=I[1],e[o+2]=I[2],e[o+3]=I[3];return e})},"../node_modules/process/browser.js":function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var l,u=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function b(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||c||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"../node_modules/reflect-metadata/Reflect.js":function(e,t,r){(function(e,t){var r;!function(r){!function(i){var n="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),a=o(r);function o(e,t){return function(r,i){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:i}),t&&t(r,i)}}void 0===n.Reflect?n.Reflect=r:a=o(n.Reflect,a),function(t){var r=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,n=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!o&&!s,u={create:o?function(){return C(Object.create(null))}:s?function(){return C({__proto__:null})}:function(){return C({})},has:l?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:l?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),f="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var i=this._keys.length,n=r+1;n<i;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,i)},t.prototype.values=function(){return new r(this._keys,this._values,n)},t.prototype.entries=function(){return new r(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[a]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function n(e,t){return t}function o(e,t){return[e,t]}}():Map,h=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}():Set,m=new(f||"function"!=typeof WeakMap?function(){var e=u.create(),t=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=n(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=n(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return n(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=n(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+o()}while(u.has(e,t));return e[t]=!0,t}function n(e,i){if(!r.call(e,t)){if(!i)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function a(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function o(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",i=0;i<16;++i){var n=t[i];4!==i&&6!==i&&8!==i||(r+="-"),n<16&&(r+="0"),r+=n.toString(16).toLowerCase()}return r}}():WeakMap);function b(e,t,r){var i=m.get(e);if(_(i)){if(!r)return;i=new d,m.set(e,i)}var n=i.get(t);if(_(n)){if(!r)return;n=new d,i.set(t,n)}return n}function p(e,t,r){var i=b(t,r,!1);return!_(i)&&!!i.has(e)}function v(e,t,r){var i=b(t,r,!1);if(!_(i))return i.get(e)}function g(e,t,r,i){b(r,i,!0).set(e,t)}function y(e,t){var r=[],i=b(e,t,!1);if(_(i))return r;for(var n=function(e){var t=z(e,a);if(!P(t))throw new TypeError;var r=t.call(e);if(!T(r))throw new TypeError;return r}(i.keys()),o=0;;){var s=O(n);if(!s)return r.length=o,r;var l=s.value;try{r[o]=l}catch(e){try{A(n)}finally{throw e}}o++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function _(e){return void 0===e}function E(e){return null===e}function T(e){return"object"==typeof e?null!==e:"function"==typeof e}function S(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",i=z(e,n);if(void 0!==i){var a=i.call(e,r);if(T(a))throw new TypeError;return a}return function(e,t){if("string"===t){var r=e.toString;if(P(r))if(!T(n=r.call(e)))return n;if(P(i=e.valueOf))if(!T(n=i.call(e)))return n}else{var i;if(P(i=e.valueOf))if(!T(n=i.call(e)))return n;var n,a=e.toString;if(P(a))if(!T(n=a.call(e)))return n}throw new TypeError}(e,"default"===r?"number":r)}function j(e){var t=S(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function R(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function P(e){return"function"==typeof e}function x(e){return"function"==typeof e}function z(e,t){var r=e[t];if(null!=r){if(!P(r))throw new TypeError;return r}}function O(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function M(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,i=r&&Object.getPrototypeOf(r);if(null==i||i===Object.prototype)return t;var n=i.constructor;return"function"!=typeof n||n===e?t:n}function C(e){return e.__=void 0,delete e.__,e}t("decorate",(function(e,t,r,i){if(_(r)){if(!R(e))throw new TypeError;if(!x(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var i=(0,e[r])(t);if(!_(i)&&!E(i)){if(!x(i))throw new TypeError;t=i}}return t}(e,t)}if(!R(e))throw new TypeError;if(!T(t))throw new TypeError;if(!T(i)&&!_(i)&&!E(i))throw new TypeError;return E(i)&&(i=void 0),function(e,t,r,i){for(var n=e.length-1;n>=0;--n){var a=(0,e[n])(t,r,i);if(!_(a)&&!E(a)){if(!T(a))throw new TypeError;i=a}}return i}(e,t,r=j(r),i)})),t("metadata",(function(e,t){return function(r,i){if(!T(r))throw new TypeError;if(!_(i)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;g(e,t,r,i)}})),t("defineMetadata",(function(e,t,r,i){if(!T(r))throw new TypeError;return _(i)||(i=j(i)),g(e,t,r,i)})),t("hasMetadata",(function(e,t,r){if(!T(t))throw new TypeError;return _(r)||(r=j(r)),function e(t,r,i){if(p(t,r,i))return!0;var n=M(r);return!E(n)&&e(t,n,i)}(e,t,r)})),t("hasOwnMetadata",(function(e,t,r){if(!T(t))throw new TypeError;return _(r)||(r=j(r)),p(e,t,r)})),t("getMetadata",(function(e,t,r){if(!T(t))throw new TypeError;return _(r)||(r=j(r)),function e(t,r,i){if(p(t,r,i))return v(t,r,i);var n=M(r);return E(n)?void 0:e(t,n,i)}(e,t,r)})),t("getOwnMetadata",(function(e,t,r){if(!T(t))throw new TypeError;return _(r)||(r=j(r)),v(e,t,r)})),t("getMetadataKeys",(function(e,t){if(!T(e))throw new TypeError;return _(t)||(t=j(t)),function e(t,r){var i=y(t,r),n=M(t);if(null===n)return i;var a=e(n,r);if(a.length<=0)return i;if(i.length<=0)return a;for(var o=new h,s=[],l=0,u=i;l<u.length;l++){var c=u[l];o.has(c)||(o.add(c),s.push(c))}for(var f=0,d=a;f<d.length;f++){c=d[f];o.has(c)||(o.add(c),s.push(c))}return s}(e,t)})),t("getOwnMetadataKeys",(function(e,t){if(!T(e))throw new TypeError;return _(t)||(t=j(t)),y(e,t)})),t("deleteMetadata",(function(e,t,r){if(!T(t))throw new TypeError;_(r)||(r=j(r));var i=b(t,r,!1);if(_(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var n=m.get(t);return n.delete(r),n.size>0||m.delete(t),!0}))}(a)}()}(r||(r={}))}).call(this,r("../node_modules/process/browser.js"),r("../node_modules/webpack/buildin/global.js"))},"../node_modules/webgl-obj-loader/dist/webgl-obj-loader.min.js":function(module,exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}({"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });\n\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });\n\n\n\n\n\nconst version = "2.0.3";\nconst OBJ = {\n    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],\n    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],\n    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],\n    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],\n    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],\n    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],\n    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],\n    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],\n    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],\n    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],\n    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],\n    version,\n};\n/**\n * @namespace\n */\n\n\n\n//# sourceURL=webpack:///./src/index.ts?')},"./src/layout.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });\nvar TYPES;\n(function (TYPES) {\n    TYPES["BYTE"] = "BYTE";\n    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";\n    TYPES["SHORT"] = "SHORT";\n    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";\n    TYPES["FLOAT"] = "FLOAT";\n})(TYPES || (TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nclass DuplicateAttributeException extends Error {\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    constructor(attribute) {\n        super(`found duplicate attribute: ${attribute.key}`);\n    }\n}\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nclass Attribute {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        "SHORT": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        "FLOAT": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type "FLOAT", this parameter has no effect.\n     */\n    constructor(key, size, type, normalized = false) {\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case "BYTE":\n            case "UNSIGNED_BYTE":\n                this.sizeOfType = 1;\n                break;\n            case "SHORT":\n            case "UNSIGNED_SHORT":\n                this.sizeOfType = 2;\n                break;\n            case "FLOAT":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(`Unknown gl type: ${type}`);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n}\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}\'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}\'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context\'s\n * <code>vertexAttribPointer</code> method. If you\'ve created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, "pos");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nclass Layout {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    constructor(...attributes) {\n        this.attributes = attributes;\n        this.attributeMap = {};\n        let offset = 0;\n        let maxStrideMultiple = 0;\n        for (const attribute of attributes) {\n            if (this.attributeMap[attribute.key]) {\n                throw new DuplicateAttributeException(attribute);\n            }\n            // Add padding to satisfy WebGL\'s requirement that all\n            // vertexAttribPointer calls have an offset that is a multiple of\n            // the type size.\n            if (offset % attribute.sizeOfType !== 0) {\n                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                console.warn("Layout requires padding before " + attribute.key + " attribute");\n            }\n            this.attributeMap[attribute.key] = {\n                attribute: attribute,\n                size: attribute.size,\n                type: attribute.type,\n                normalized: attribute.normalized,\n                offset: offset,\n            };\n            offset += attribute.sizeInBytes;\n            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n        }\n        // Add padding to the end to satisfy WebGL\'s requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we\'re putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn("Layout requires padding at the back");\n        }\n        this.stride = offset;\n        for (const attribute of attributes) {\n            this.attributeMap[attribute.key].stride = this.stride;\n        }\n    }\n}\n// Geometry attributes\n/**\n * Attribute layout to pack a vertex\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.POSITION = new Attribute("position", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n *\n * @see {@link Layout}\n */\nLayout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s bitangent x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n * @see {@link Layout}\n */\nLayout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s texture coordinates\' u & v as floats\n *\n * @see {@link Layout}\n */\nLayout.UV = new Attribute("uv", 2, TYPES.FLOAT);\n// Material attributes\n/**\n * Attribute layout to pack an unsigned short to be interpreted as a the index\n * into a {@link Mesh}\'s materials list.\n * <p>\n * The intention of this value is to send all of the {@link Mesh}\'s materials\n * into multiple shader uniforms and then reference the current one by this\n * vertex attribute.\n * <p>\n * example glsl code:\n *\n * <pre><code>\n *  // this is bound using MATERIAL_INDEX\n *  attribute int materialIndex;\n *\n *  struct Material {\n *    vec3 diffuse;\n *    vec3 specular;\n *    vec3 specularExponent;\n *  };\n *\n *  uniform Material materials[MAX_MATERIALS];\n *\n *  // ...\n *\n *  vec3 diffuse = materials[materialIndex];\n *\n * </code></pre>\n * TODO: More description & test to make sure subscripting by attributes even\n * works for webgl\n *\n * @see {@link Layout}\n */\nLayout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);\nLayout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);\nLayout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);\nLayout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);\nLayout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);\nLayout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);\nLayout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);\nLayout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);\nLayout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);\nLayout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);\nLayout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);\nLayout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);\nLayout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);\nLayout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);\nLayout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);\nLayout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);\nLayout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);\nLayout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);\nLayout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);\nLayout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);\n\n\n//# sourceURL=webpack:///./src/layout.ts?')},"./src/material.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });\n/**\n * The Material class.\n */\nclass Material {\n    constructor(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to "normal" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it\'s a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n}\nconst SENTINEL_MATERIAL = new Material("sentinel");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nclass MaterialLibrary {\n    constructor(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    parse_newmtl(tokens) {\n        const name = tokens[0];\n        // console.info(\'Parsing new Material:\', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    }\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    parseColor(tokens) {\n        if (tokens[0] == "spectral") {\n            throw new Error("The MTL parser does not support spectral curve files. You will " +\n                "need to convert the MTL colors to either RGB or CIEXYZ.");\n        }\n        if (tokens[0] == "xyz") {\n            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +\n                "XYZ values to RGB or create an issue to add support for XYZ");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that\'s the check\n        // that i\'m going to perform here\n        if (tokens.length == 3) {\n            const [x, y, z] = tokens;\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we\'re going to assume\n        // it\'s exactly 1, skipping the check for 2.\n        const value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    }\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The "Ka" form specifies the ambient reflectivity using RGB values.\n     * The "g" and "b" values are optional. If only the "r" value is\n     * specified, then the "g" and "b" values are assigned the value of\n     * "r". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The "Ka spectral" form specifies the ambient reflectivity using a\n     * spectral curve. "file.rfl" is the name of the ".rfl" file containing\n     * the curve data. "factor" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.\n     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments\n     * are optional and take on the value of the "x" component if only "x" is\n     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ka(tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    }\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Kd(tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    }\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ks(tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    }\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ke(tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    }\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Tf(tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    }\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: "d 0.5"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional "-halo" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * "factor" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * "factor". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_d(tokens) {\n        // this ignores the -halo option as I can\'t find any documentation on what\n        // it\'s supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");\n    }\n    /**\n     * The "illum" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: "illum 2" to specify the "Highlight on" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_illum(tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    }\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ni(tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    }\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: "Ns 250"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ns(tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    }\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: "sharpness 100"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_sharpness(tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    }\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    parse_cc(values, options) {\n        options.colorCorrection = values[0] == "on";\n    }\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    parse_blendu(values, options) {\n        options.horizontalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    parse_blendv(values, options) {\n        options.verticalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    parse_boost(values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    parse_mm(values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    }\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    parse_ost(values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    }\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    parse_o(values, options) {\n        this.parse_ost(values, options.offset, 0);\n    }\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    parse_s(values, options) {\n        this.parse_ost(values, options.scale, 1);\n    }\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    parse_t(values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    }\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    parse_texres(values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    parse_clamp(values, options) {\n        options.clamp = values[0] == "on";\n    }\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    parse_bm(values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    parse_imfchan(values, options) {\n        options.imfChan = values[0];\n    }\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    parse_type(values, options) {\n        options.reflectionType = values[0];\n    }\n    /**\n     * Parses the texture\'s options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    parseOptions(tokens) {\n        const options = emptyTextureOptions();\n        let option;\n        let values;\n        const optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit "as"\n            const token = tokens.pop();\n            if (token.startsWith("-")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            const optionMethod = this[`parse_${option}`];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    }\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    parseMap(tokens) {\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a \'-\'\n        // so if the first token doesn\'t start with a \'-\', we\'re going to assume\n        // it\'s the name of the map file.\n        let optionsString;\n        let filename = "";\n        if (!tokens[0].startsWith("-")) {\n            [filename, ...optionsString] = tokens;\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        const options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, "/");\n        return options;\n    }\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    parse_map_Ka(tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    }\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    parse_map_Kd(tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    parse_map_Ks(tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    }\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    parse_map_Ke(tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    parse_map_Ns(tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    }\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    parse_map_d(tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    }\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    parse_map_aat(tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == "on";\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    parse_map_bump(tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    parse_bump(tokens) {\n        this.parse_map_bump(tokens);\n    }\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    parse_disp(tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    }\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    parse_decal(tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    }\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    parse_refl(tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    }\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    parse() {\n        const lines = this.data.split(/\\r?\\n/);\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const [directive, ...tokens] = line.split(/\\s/);\n            const parseMethod = this[`parse_${directive}`];\n            if (!parseMethod) {\n                console.warn(`Don\'t know how to parse the directive: "${directive}"`);\n                continue;\n            }\n            // console.log(`Parsing "${directive}" with tokens: ${tokens}`);\n            parseMethod.bind(this)(tokens);\n        }\n        // some cleanup. These don\'t need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    }\n}\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1,\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: "",\n    };\n}\n\n\n//# sourceURL=webpack:///./src/material.ts?')},"./src/mesh.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nclass Mesh {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional "w" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don\'t provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    constructor(objectData, options) {\n        this.name = "";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * \'v\': indicates vertex section\n          * \'vn\': indicates vertex normal section\n          * \'f\': indicates the faces section\n          * \'vt\': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital "V" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        "v" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string (\'16/92/11\') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn\'t, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL\'s ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        const verts = [];\n        const vertNormals = [];\n        const textures = [];\n        const materialNamesByIndex = [];\n        const materialIndicesByName = {};\n        // keep track of what material we\'ve seen last\n        let currentMaterialIndex = -1;\n        let currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        const unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0,\n        };\n        const VERTEX_RE = /^v\\s/;\n        const NORMAL_RE = /^vn\\s/;\n        const TEXTURE_RE = /^vt\\s/;\n        const FACE_RE = /^f\\s/;\n        const WHITESPACE_RE = /\\s+/;\n        const USE_MATERIAL_RE = /^usemtl/;\n        // array of lines separated by the newline\n        const lines = objectData.split("\\n");\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const elements = line.split(WHITESPACE_RE);\n            elements.shift();\n            if (VERTEX_RE.test(line)) {\n                // if this is a vertex\n                verts.push(...elements);\n            }\n            else if (NORMAL_RE.test(line)) {\n                // if this is a vertex normal\n                vertNormals.push(...elements);\n            }\n            else if (TEXTURE_RE.test(line)) {\n                let coords = elements;\n                // by default, the loader will only look at the U and V\n                // coordinates of the vt declaration. So, this truncates the\n                // elements to only those 2 values. If W texture coordinate\n                // support is enabled, then the texture coordinate is\n                // expected to have three values in it.\n                if (elements.length > 2 && !options.enableWTextureCoord) {\n                    coords = elements.slice(0, 2);\n                }\n                else if (elements.length === 2 && options.enableWTextureCoord) {\n                    // If for some reason W texture coordinate support is enabled\n                    // and only the U and V coordinates are given, then we supply\n                    // the default value of 0 so that the stride length is correct\n                    // when the textures are unpacked below.\n                    coords.push("0");\n                }\n                textures.push(...coords);\n            }\n            else if (USE_MATERIAL_RE.test(line)) {\n                const materialName = elements[0];\n                // check to see if we\'ve ever seen it before\n                if (!(materialName in materialIndicesByName)) {\n                    // new material we\'ve never seen\n                    materialNamesByIndex.push(materialName);\n                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                    // push new array into indices\n                    // already contains an array at index zero, don\'t add\n                    if (materialIndicesByName[materialName] > 0) {\n                        unpacked.indices.push([]);\n                    }\n                }\n                // keep track of the current material index\n                currentMaterialIndex = materialIndicesByName[materialName];\n                // update current index array\n                currentObjectByMaterialIndex = currentMaterialIndex;\n            }\n            else if (FACE_RE.test(line)) {\n                // if this is a face\n                /*\n                split this face into an array of Vertex groups\n                for example:\n                   f 16/92/11 14/101/22 1/69/1\n                becomes:\n                  [\'16/92/11\', \'14/101/22\', \'1/69/1\'];\n                */\n                const triangles = triangulate(elements);\n                for (const triangle of triangles) {\n                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                        const hash = triangle[j] + "," + currentMaterialIndex;\n                        if (hash in unpacked.hashindices) {\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                        }\n                        else {\n                            /*\n                        Each element of the face line array is a Vertex which has its\n                        attributes delimited by a forward slash. This will separate\n                        each attribute into another array:\n                            \'19/92/11\'\n                        becomes:\n                            Vertex = [\'19\', \'92\', \'11\'];\n                        where\n                            Vertex[0] is the vertex index\n                            Vertex[1] is the texture index\n                            Vertex[2] is the normal index\n                         Think of faces having Vertices which are comprised of the\n                         attributes location (v), texture (vt), and normal (vn).\n                         */\n                            const vertex = triangle[j].split("/");\n                            // it\'s possible for faces to only specify the vertex\n                            // and the normal. In this case, vertex will only have\n                            // a length of 2 and not 3 and the normal will be the\n                            // second item in the list with an index of 1.\n                            const normalIndex = vertex.length - 1;\n                            /*\n                         The verts, textures, and vertNormals arrays each contain a\n                         flattend array of coordinates.\n\n                         Because it gets confusing by referring to Vertex and then\n                         vertex (both are different in my descriptions) I will explain\n                         what\'s going on using the vertexNormals array:\n\n                         vertex[2] will contain the one-based index of the vertexNormals\n                         section (vn). One is subtracted from this index number to play\n                         nice with javascript\'s zero-based array indexing.\n\n                         Because vertexNormal is a flattened array of x, y, z values,\n                         simple pointer arithmetic is used to skip to the start of the\n                         vertexNormal, then the offset is added to get the correct\n                         component: +0 is x, +1 is y, +2 is z.\n\n                         This same process is repeated for verts and textures.\n                         */\n                            // Vertex position\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                            // Vertex textures\n                            if (textures.length) {\n                                const stride = options.enableWTextureCoord ? 3 : 2;\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                if (options.enableWTextureCoord) {\n                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                }\n                            }\n                            // Vertex normals\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                            // Vertex material indices\n                            unpacked.materialIndices.push(currentMaterialIndex);\n                            // add the newly created Vertex to the list of indices\n                            unpacked.hashindices[hash] = unpacked.index;\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                            // increment the counter\n                            unpacked.index += 1;\n                        }\n                    }\n                }\n            }\n        }\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    calculateTangentsAndBitangents() {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), "Missing attributes for calculating tangents and bitangents");\n        const unpacked = {\n            tangents: [...new Array(this.vertices.length)].map(_ => 0),\n            bitangents: [...new Array(this.vertices.length)].map(_ => 0),\n        };\n        // Loop through all faces in the whole mesh\n        const indices = this.indices;\n        const vertices = this.vertices;\n        const normals = this.vertexNormals;\n        const uvs = this.textures;\n        for (let i = 0; i < indices.length; i += 3) {\n            const i0 = indices[i + 0];\n            const i1 = indices[i + 1];\n            const i2 = indices[i + 2];\n            const x_v0 = vertices[i0 * 3 + 0];\n            const y_v0 = vertices[i0 * 3 + 1];\n            const z_v0 = vertices[i0 * 3 + 2];\n            const x_uv0 = uvs[i0 * 2 + 0];\n            const y_uv0 = uvs[i0 * 2 + 1];\n            const x_v1 = vertices[i1 * 3 + 0];\n            const y_v1 = vertices[i1 * 3 + 1];\n            const z_v1 = vertices[i1 * 3 + 2];\n            const x_uv1 = uvs[i1 * 2 + 0];\n            const y_uv1 = uvs[i1 * 2 + 1];\n            const x_v2 = vertices[i2 * 3 + 0];\n            const y_v2 = vertices[i2 * 3 + 1];\n            const z_v2 = vertices[i2 * 3 + 2];\n            const x_uv2 = uvs[i2 * 2 + 0];\n            const y_uv2 = uvs[i2 * 2 + 1];\n            const x_deltaPos1 = x_v1 - x_v0;\n            const y_deltaPos1 = y_v1 - y_v0;\n            const z_deltaPos1 = z_v1 - z_v0;\n            const x_deltaPos2 = x_v2 - x_v0;\n            const y_deltaPos2 = y_v2 - y_v0;\n            const z_deltaPos2 = z_v2 - z_v0;\n            const x_uvDeltaPos1 = x_uv1 - x_uv0;\n            const y_uvDeltaPos1 = y_uv1 - y_uv0;\n            const x_uvDeltaPos2 = x_uv2 - x_uv0;\n            const y_uvDeltaPos2 = y_uv2 - y_uv0;\n            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            const x_n0 = normals[i0 * 3 + 0];\n            const y_n0 = normals[i0 * 3 + 1];\n            const z_n0 = normals[i0 * 3 + 2];\n            const x_n1 = normals[i1 * 3 + 0];\n            const y_n1 = normals[i1 * 3 + 1];\n            const z_n1 = normals[i1 * 3 + 2];\n            const x_n2 = normals[i2 * 3 + 0];\n            const y_n2 = normals[i2 * 3 + 1];\n            const z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    }\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    makeBufferData(layout) {\n        const numItems = this.vertices.length / 3;\n        const buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        const dataView = new DataView(buffer);\n        for (let i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            // copy in the vertex data in the order and format given by the\n            // layout param\n            for (const attribute of layout.attributes) {\n                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                switch (attribute.key) {\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:\n                        dataView.setFloat32(offset, this.vertices[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:\n                        dataView.setFloat32(offset, this.textures[i * 2], true);\n                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:\n                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:\n                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.ambient[0], true);\n                        dataView.setFloat32(offset + 4, material.ambient[1], true);\n                        dataView.setFloat32(offset + 8, material.ambient[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.diffuse[0], true);\n                        dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                        dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specular[0], true);\n                        dataView.setFloat32(offset + 4, material.specular[1], true);\n                        dataView.setFloat32(offset + 8, material.specular[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specularExponent, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.emissive[0], true);\n                        dataView.setFloat32(offset + 4, material.emissive[1], true);\n                        dataView.setFloat32(offset + 8, material.emissive[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.dissolve, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.illumination, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.refractionIndex, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.sharpness, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                        break;\n                    }\n                }\n            }\n        }\n        return buffer;\n    }\n    makeIndexBufferData() {\n        const buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    }\n    makeIndexBufferDataForMaterials(...materialIndices) {\n        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));\n        const buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    }\n    addMaterialLibrary(mtl) {\n        for (const name in mtl.materials) {\n            if (!(name in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            const material = mtl.materials[name];\n            // Find the material index for this material\n            const materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    }\n}\nfunction* triangulate(elements) {\n    if (elements.length <= 3) {\n        yield elements;\n    }\n    else if (elements.length === 4) {\n        yield [elements[0], elements[1], elements[2]];\n        yield [elements[2], elements[3], elements[0]];\n    }\n    else {\n        for (let i = 1; i < elements.length - 1; i++) {\n            yield [elements[0], elements[i], elements[i + 1]];\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/mesh.ts?')},"./src/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n\n\nfunction downloadMtlTextures(mtl, root) {\n    const mapAttributes = [\n        "mapDiffuse",\n        "mapAmbient",\n        "mapSpecular",\n        "mapDissolve",\n        "mapBump",\n        "mapDisplacement",\n        "mapDecal",\n        "mapEmissive",\n    ];\n    if (!root.endsWith("/")) {\n        root += "/";\n    }\n    const textures = [];\n    for (const materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        const material = mtl.materials[materialName];\n        for (const attr of mapAttributes) {\n            const mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                continue;\n            }\n            const url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(response => {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                const image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                return new Promise(resolve => (image.onload = resolve));\n            })\n                .catch(() => {\n                console.error(`Unable to download texture: ${url}`);\n            }));\n        }\n    }\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === "string")) {\n        return modelOptions.obj.replace(/\\.obj$/, ".mtl");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: \'path/to/model.obj\',\n *  mtl: true | \'path/to/model.mtl\',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: \'/models/suzanne/maps\'\n *  name: \'suzanne\'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model\'s .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model\'s .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: \'models/foo.obj\', mtl: true} would search for \'models/foo.mtl\'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL\'s\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL\'s texture files are located. The default is to\n * use the MTL file\'s location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(models) {\n    const finished = [];\n    for (const model of models) {\n        if (!model.obj) {\n            throw new Error(\'"obj" attribute of model object not set. The .obj file is required to be set \' +\n                "in order to use downloadModels()");\n        }\n        const options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        let name = model.name;\n        if (!name) {\n            const parts = model.obj.split("/");\n            name = parts[parts.length - 1].replace(".obj", "");\n        }\n        const namePromise = Promise.resolve(name);\n        const meshPromise = fetch(model.obj)\n            .then(response => response.text())\n            .then(data => {\n            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);\n        });\n        let mtlPromise;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            const mtl = getMtl(model);\n            mtlPromise = fetch(mtl)\n                .then(response => response.text())\n                .then((data) => {\n                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);\n                if (model.downloadMtlTextures !== false) {\n                    let root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl.substr(0, mtl.lastIndexOf("/"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then((value) => {\n                return value[0];\n            });\n        }\n        const parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    }\n    return Promise.all(finished).then(ms => {\n        // the "finished" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        const models = {};\n        for (const model of ms) {\n            const [name, mesh, mtl] = model;\n            mesh.name = name;\n            if (mtl) {\n                mesh.addMaterialLibrary(mtl);\n            }\n            models[name] = mesh;\n        }\n        return models;\n    });\n}\n/**\n * Takes in an object of `mesh_name`, `\'/url/to/OBJ/file\'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh\'s OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { \'<mesh_name>\': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    const completed = [];\n    for (const mesh_name in nameAndURLs) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            continue;\n        }\n        const url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(response => response.text())\n            .then(data => {\n            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];\n        }));\n    }\n    Promise.all(completed).then(ms => {\n        for (const [name, mesh] of ms) {\n            meshes[name] = mesh;\n        }\n        return completionCallback(meshes);\n    });\n}\nfunction _buildBuffer(gl, type, data, itemSize) {\n    const buffer = gl.createBuffer();\n    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext(\'webgl\')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don\'t copy and paste):\n *\n *     const gl   = canvas.getContext(\'webgl\'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");\n *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n *\n *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");\n *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n *\n *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");\n *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it\'s possible that the mesh doesn\'t contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?')},0:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");\n\n\n//# sourceURL=webpack:///multi_./src/index.ts?')}})},module.exports=t()},"../node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./config.js":function(e,t,r){"use strict";r.r(t),r.d(t,"config",(function(){return f}));var i=r("./core/index.js"),n=r("./curve/index.js"),a=r("./eve/index.js"),o=r("./particle/index.js"),s=r("./sof/index.js"),l=r("./unsupported/index.js"),u=r("./global/constant/ccpwgl.js"),c=r("./global/math/index.js"),f={debug:!1,black:{"*":e=>e.replace("res:/","cdn:/").toLowerCase(),dds:e=>"dds"===e.split(".").pop()&&e.includes("_cube")?e.replace(".dds",".qube"):e.replace(".dds",".png"),gr2:e=>e.replace(".gr2",".cake"),red:e=>e.replace(".red",".black")},glParams:{alpha:!1,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,descynchronized:!1},device:{textureQuality:u.DeviceTextureQuality.HIGH,shaderQuality:u.DeviceShaderQuality.HIGH,antialiasing:!0,anisotropicFiltering:!0,webgl2:!0,webvr:!1,performanceClock:!0},resMan:{systemMirror:!1,autoPurgeResources:!0,purgeTime:60,maxPrepareTime:.05,maxWatchedFramed:500,maxWatchedCount:10,maxWatchTime:.05},logger:{name:"CCPWGL2",history:50,throttle:10,display:!0,visible:{error:!0,warning:!1,log:!1,info:!1,debug:!1}},paths:{res:"https://developers.eveonline.com/ccpwgl/assetpath/1097993/",cdn:"http://localhost:3000/"},extensions:{sm_depth:i.Tw2EffectRes,sm_json:i.Tw2EffectRes,sm_hi:i.Tw2EffectRes,sm_lo:i.Tw2EffectRes,fx:i.Tw2EffectRes,wbg:i.Tw2GeometryRes,cake:i.Tw2GeometryRes,obj:i.Tw2GeometryRes,png:i.Tw2TextureRes,dds:i.Tw2TextureRes,cube:i.Tw2TextureRes,qube:i.Tw2TextureRes,mp4:i.Tw2VideoRes,ogg:i.Tw2VideoRes,webm:i.Tw2VideoRes,black:i.Tw2LoadingObject,red:i.Tw2LoadingObject},constructors:[i,n,a,o,s,l],variableTypes:{float:i.Tw2FloatParameter,number:i.Tw2FloatParameter,texture:i.Tw2TextureParameter,vector2:i.Tw2Vector2Parameter,vector3:i.Tw2Vector3Parameter,vector4:i.Tw2Vector4Parameter,matrix4:i.Tw2Matrix4Parameter},variables:{WorldMat:c.mat4.create(),ViewMat:c.mat4.create(),ProjectionMat:c.mat4.create(),ViewProjectionMat:c.mat4.create(),ViewportSize:c.vec4.create(),Time:c.vec4.create(),u_DecalMatrix:c.mat4.create(),u_InvDecalMatrix:c.mat4.create(),EveSpaceSceneEnvMap:"",EveSpaceSceneShadowMap:"",EnvMap1:"",EnvMap2:"",EnvMap3:"",ShadowLightness:0,OccluderValue:c.vec4.fromValues(1,1,0,0),LensflareFxOccScale:c.vec4.fromValues(1,1,0,0),LensflareFxDirectionScale:c.vec4.create()}}},"./core/Tw2Error.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Error",(function(){return a})),r.d(t,"ErrFeatureNotImplemented",(function(){return o})),r.d(t,"ErrIndexBounds",(function(){return s})),r.d(t,"ErrWrapped",(function(){return l})),r.d(t,"ErrSingletonInstantiation",(function(){return u})),r.d(t,"ErrAbstractClass",(function(){return c})),r.d(t,"ErrAbstractMethod",(function(){return f}));var i=r("./global/utils/index.js"),n=Object(i.isFunction)(Error.captureStackTrace);class a extends Error{constructor(e={},t="Undefined error"){var r=t;"string"==typeof e?(r=e,e={}):e.message&&(r=e.message,delete e.message),super(),this.message=Object(i.template)(r,e),this.name=this.constructor.name,this.data=e,this.data.data&&console.debug(JSON.stringify(this.data.data,null,4)),n?Error.captureStackTrace(this,a):this.stack=new Error(this.message).stack}emitOn(e,t="error"){return e&&e.EmitEvent&&e.EmitEvent(t,this),this}}class o extends a{constructor(e){super(e,"%feature=Feature% not implemented")}}class s extends a{constructor(e){super(e,"Array index out of bounds")}}class l extends a{constructor(e){super(e,"Invalid wrapped object(s) (%reason%)")}}class u extends a{constructor(e){super(e,"Cannot re-instantiate singleton (%class%)")}}class c extends a{constructor(e){super(e,"Abstract class cannot be directly instantiated (%class%)")}}class f extends a{constructor(e){super(e,"Abstract class method not implemented on class '%class%': (%method%)")}}},"./core/Tw2EventEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventEmitter",(function(){return a}));var i=r("./global/utils/index.js"),n=new WeakMap;class a{EmitEvent(e,...t){var r=n.get(this);return r?((e=e.toLowerCase())in r&&(r[e].forEach((i,n)=>{n.call(i.context,...t),i.once&&r[e].delete(n)}),0===r[e].size&&Reflect.deleteProperty(r,e)),this):this}AddEvents(e){if(!e)return this;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],n=t,a=void 0,o=void 0;if(-1!==t.indexOf(".once")&&t.lastIndexOf(".once")===t.length-5&&(n=t.substring(0,t.length-5),o=!0),Object(i.isArray)(r)&&(a=(r=r[0])[1]),!Object(i.isFunction)(r))throw new Error("Invalid listener");this.OnEvent(n,r,a,o)}return this}OnEvent(e,t,r,i){var a=n.get(this);if(a||(a={},n.set(this,a)),a[e=e.toLowerCase()]||(a[e]=new Map),!a[e].has(t))if(this.constructor.onListener){if(this.constructor.onListener(this,e,t,r)&&i)return this}else if(this.OnEventFirstListener&&this.OnEventFirstListener(this,e,t,r)&&i)return this;return a[e].set(t,{context:r,once:i}),this}OnceEvent(e,t,r){return this.OnEvent(e,t,r,!0)}OffEvent(e,t){var r=n.get(this);if(!r)return this;if("*"===e){for(var i in r)r.hasOwnProperty(i)&&(r[i].delete(t),0===r[i].size&&Reflect.deleteProperty(r,i));return this}return(e=e.toLowerCase())in r&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e)),this}HasEvent(e,t){var r=n.get(this);if(!r)return!1;if("*"===e){for(var i in r)if(r.hasOwnProperty(i)&&r[i].has(t))return!0;return!1}return!(!t||!(e in r))&&("*"===t?!!r[e].size:r[e].has(t))}ClearEvent(e){var t=n.get(this);return t?"*"===e?(n.delete(this),this):((e=e.toLowerCase())in t&&(t[e].clear(),Reflect.deleteProperty(t,e)),this):this}}},"./core/Tw2Frustum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Frustum",(function(){return l}));var i,n,a,o=r("./global/utils/index.js"),s=r("./global/math/index.js"),l=o.meta.type("Tw2Frustum")((a=n=class e{constructor(){this._halfWidthProjection=1,this._planes=[s.vec4.create(),s.vec4.create(),s.vec4.create(),s.vec4.create(),s.vec4.create(),s.vec4.create()],this._viewPos=s.vec3.create(),this._viewDir=s.vec3.create()}Initialize(t,r,i,n,a){var o=e.global.mat4_0,l=n||s.mat4.invert(o,t);this._viewPos.set(l.subarray(12,14)),this._viewDir.set(l.subarray(8,10)),this._halfWidthProjection=r[0]*i*.5;var u=a||s.mat4.multiply(o,r,t),c=this._planes;c[0][0]=u[2],c[0][1]=u[6],c[0][2]=u[10],c[0][3]=u[14],c[1][0]=u[3]+u[0],c[1][1]=u[7]+u[4],c[1][2]=u[11]+u[8],c[1][3]=u[15]+u[12],c[2][0]=u[3]-u[1],c[2][1]=u[7]-u[5],c[2][2]=u[11]-u[9],c[2][3]=u[15]-u[13],c[3][0]=u[3]-u[0],c[3][1]=u[7]-u[4],c[3][2]=u[11]-u[8],c[3][3]=u[15]-u[12],c[4][0]=u[3]+u[1],c[4][1]=u[7]+u[5],c[4][2]=u[11]+u[9],c[4][3]=u[15]+u[13],c[5][0]=u[3]-u[2],c[5][1]=u[7]-u[6],c[5][2]=u[11]-u[10],c[5][3]=u[15]-u[14];for(var f=0;f<6;++f){var d=s.vec3.length(c[f]);c[f][0]/=d,c[f][1]/=d,c[f][2]/=d,c[f][3]/=d}}IsSphereVisible(e,t){for(var r=this._planes,i=0;i<6;++i)if(r[i][0]*e[0]+r[i][1]*e[1]+r[i][2]*e[2]+r[i][3]<-t)return!1;return!0}GetPixelSizeAcross(t,r){var i=s.vec3.subtract(e.global.vec3_0,this._viewPos,t),n=s.vec3.dot(this._viewDir,i);return n<1e-5&&(n=1e-5),r<1e-5?0:r/n*this._halfWidthProjection*2}},n.global={vec3_0:s.vec3.create(),mat4_0:s.mat4.create()},i=a))||i},"./core/Tw2RayCaster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RayCaster",(function(){return c}));var i,n,a,o,s=r("./core/Tw2Error.js"),l=r("./global/math/index.js"),u=r("./global/constant/d3d.js");class c{constructor(){this.ray=l.ray3.create(),this.near=0,this.far=1/0,this.masks=[],this.renderModes={[u.RM_OPAQUE]:!0,[u.RM_TRANSPARENT]:!0,[u.RM_ADDITIVE]:!0,[u.RM_DEPTH]:!1,[u.RM_DISTORTION]:!1,[u.RM_PICKABLE]:!1,[u.RM_FULLSCREEN]:!1},this.options={}}From(e,t){l.ray3.from(this.ray,e,t),l.ray3.normalize(this.ray,this.ray)}FromCamera(e,t){if(!("SetRayFromCoords"in t))throw new Error("Camera does not support ray casting");t.SetRayFromCoords(e,this.ray),l.ray3.normalize(this.ray,this.ray)}MaskConstructor(e){this.masks.includes(e)||this.masks.push(e)}IntersectObject(e,t=[],r){return"Intersect"in e&&(e.Intersect(this,t,r),t.sort(l.ray3.SORT)),t}IntersectObjects(e,t=[],r){for(var i=0;i<e.length;i++)this.IntersectObject(e[i],t,r);return t.sort(l.ray3.SORT),t}IntersectWorldSph3(e){if(l.ray3.intersectsSph3(this.ray,e)){var t=l.ray3.distanceToSph3(e);if(t>this.near&&t<this.far)return{distance:t,point:l.ray3.getIntersectSph3(l.vec3.create(),this.ray,e)}}}IntersectSph3(e,t){var r=l.sph3.create();return l.sph3.transformMat4(r,e,t),this.IntersectWorldSph3(r)}IntersectPositionRadius(e,t,r){return this.IntersectSph3([e[0],e[1],e[2],t],r)}IntersectWorldBox3(e){if(l.ray3.intersectsBox3(this.ray,e)){n||(n=l.vec3.create()),l.ray3.getIntersectBox3(n,this.ray,e);var t=l.ray3.distanceToPoint(n);if(t>this.near&&t<this.far)return{distance:t,point:l.vec3.clone(n)}}}IntersectBox3(e,t){var r=i=i||l.box3.create();return l.box3.transformMat4(r,e,t),this.IntersectWorldBox3(r)}IntersectBounds(e,t,r){return this.IntersectBox3([e[0],e[1],e[2],t[0],t[1],t[2]],r)}IntersectWorldPln(e){if(l.ray3.intersectsPln(this.ray,e)){var t=l.ray3.distancePln(this.ray,e);if(t>this.near&&t<this.far)return{distance:t,point:l.ray3.getIntersectPln(l.vec3.create(),this.ray,e)}}}IntersectPln(e,t){var r=o=o||l.pln.create();return l.pln.transformMat4(r,e,t),this.IntersectWorldPln(r)}IntersectNormalConstant(e,t,r){return this.IntersectPln([e[0],e[1],e[2],t],r)}IntersectWorldTri3(e,t){n||(n=l.vec3.create());var r=l.ray3.getIntersectTri3(this.ray,e,t),i=l.ray3.distance(this.ray,r);if(i>this.near&&i<this.far)return{distance:i,point:l.vec3.clone(r)}}IntersectTri3(e,t,r){var i=a=a||l.tri3.create();return l.tri3.transformMat4(i,e,t),this.IntersectWorldTri3(i,r)}IntersectTriangleVertices(e,t,r,i,n){var o=a=a||l.tri3.create();return l.tri3.fromVertices(o,e,t,r),l.tri3.transformMat4(o,o,i),this.IntersectWorldTri3(o,n)}IntersectWorldLne3(e){throw new s.ErrFeatureNotImplemented}IntersectLne3(e,t){throw new s.ErrFeatureNotImplemented}IntersectStartEnd(e,t,r){throw new s.ErrFeatureNotImplemented}}},"./core/Tw2RenderTarget.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderTarget",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/index.js"),E=r("./core/resource/Tw2TextureRes.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=w.meta.type("Tw2RenderTarget"),n=w.meta.string,a=w.meta.struct("Tw2TextureRes"),o=w.meta.isPrivate,s=w.meta.float,l=w.meta.isPrivate,u=w.meta.float,c=w.meta.isPrivate,f=w.meta.boolean,d=w.meta.isPrivate,i((b=S((m=class{constructor(){T(this,"name",b,this),T(this,"texture",p,this),T(this,"width",v,this),T(this,"height",g,this),T(this,"hasDepth",y,this),this._id=Object(w.generateID)(),this._frameBuffer=null,this._renderBuffer=null}IsGood(){return this._frameBuffer&&this._renderBuffer&&this.texture}Destroy(){var{gl:e}=_.device;this.texture&&(e.deleteTexture(this.texture.texture),this.texture=null),this._renderBuffer&&(e.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null),this._frameBuffer&&(e.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this.hasDepth=!1,this.width=0,this.height=0}Create(e,t,r){var{gl:i}=_.device;this.Destroy(),this.texture=new E.Tw2TextureRes,this.texture.Attach(i.createTexture()),this.texture._target=i.TEXTURE_2D,this.texture._format=i.RGBA,this.texture._type=i.UNSIGNED_BYTE,this.texture._hasMipMaps=!1,this.texture._forceMipMaps=!1,this.texture._width=this.width=e,this.texture._height=this.height=t,this._frameBuffer=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,this._frameBuffer),i.bindTexture(i.TEXTURE_2D,this.texture.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null),this._renderBuffer=null,r&&(this._renderBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this._renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e,t)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture.texture,0),r&&i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,this._renderBuffer),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.hasDepth=r}Set(){var{gl:e}=_.device;e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer),e.viewport(0,0,this.width,this.height)}Unset(){var{gl:e,viewportWidth:t,viewportHeight:r}=_.device;e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,t,r)}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=S(m.prototype,"texture",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S(m.prototype,"width",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=S(m.prototype,"height",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=S(m.prototype,"hasDepth",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=m))||h)},"./core/Tw2RuntimeInstanceData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RuntimeInstanceData",(function(){return l}));var i,n=r("./global/utils/index.js"),a=r("./global/index.js"),o=r("./core/vertex/index.js"),s=r("./particle/element/Tw2ParticleElementDeclaration.js"),l=n.meta.type("Tw2RuntimeInstanceData","Tr2RuntimeInstanceData")(i=class extends n.meta.Model{constructor(...e){super(...e),this._count=0,this._data=null,this._dirty=!0,this._declaration=null,this._vb=null,this._vertexStride=0}GetMaxInstanceCount(){return this._data?this._data.length:1}SetElementLayout(e){this._vb&&(a.device.gl.deleteBuffer(this._vb),this._vb=null),this._vertexStride=0,this._declaration=new o.Tw2VertexDeclaration;for(var t=0;t<e.length;++t){var r=new s.Tw2ParticleElementDeclaration;r.elementType=e[t][0],r.dimension=e[t][2],r.usageIndex=e[t][1];var i=r.GetDeclaration();i.offset=4*this._vertexStride,this._declaration.elements.push(i),this._vertexStride+=r.dimension}this._declaration.RebuildHash()}SetData(e){this._declaration&&(this._data=e,this._count=this._data.length,this._dirty=!0,this.UpdateData())}SetItemElement(e,t,r){if(this._declaration.elements[t].elements>1)for(var i=0;i<this._declaration.elements[t].elements;++i)this._data[e][t][i]=r[i];else this._data[e][t]=r;this._dirty=!0}SetItemElementRef(e,t,r){this._data[e][t]=r,this._dirty=!0}GetItemElement(e,t){return this._data[e][t]}UpdateData(){if(this._dirty&&this._declaration){for(var e=a.device.gl,t=new Float32Array(this._data.length*this._vertexStride),r=0,i=0;i<this._data.length;++i)for(var n=0;n<this._declaration.elements.length;++n)if(1===this._declaration.elements[n].elements)t[r++]=this._data[i][n];else for(var o=0;o<this._declaration.elements[n].elements;++o)t[r++]=this._data[i][n][o];this._vb||(this._vb=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._dirty=!1}}Unload(){this._vb&&(a.device.gl.deleteBuffer(this._vb),this._vb=null)}GetInstanceBuffer(){return this._vb}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return 4*this._vertexStride}GetInstanceCount(){return this._count}})||i},"./core/Tw2Transform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Transform",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js");function v(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=p.vec3.create(),_=p.quat.create(),E=p.mat4.create(),T=(i=b.meta.type("Tw2Transform"),n=b.meta.string,a=b.meta.quaternion,o=b.meta.vector3,s=b.meta.vector3,i((m=class extends b.meta.Model{constructor(...e){super(...e),g(this,"name",c,this),g(this,"rotation",f,this),g(this,"translation",d,this),g(this,"scaling",h,this),this._localTransform=p.mat4.create(),this._worldTransform=p.mat4.create(),this._rebuildLocal=!0,this._rebuildWorld=!0}OnWorldModified(e){return this._onWorldTransformModified=e,this}Initialize(){this.RebuildTransforms({force:!0,skipUpdate:!0})}OnValueChanged(e){e&&e.skipTransforms||this.RebuildTransforms({force:!0,skipUpdate:!0})}RebuildTransforms(e){var t=e&&e.force,r=e&&e.skipUpdate;if((t||this._rebuildLocal)&&(p.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling),this._rebuildLocal=!1,t=!0),!t&&!this._rebuildWorld)return!1;var{_worldInverse:i,_worldInverseTranspose:n,_worldTranspose:a,_parentTransform:o}=this;return o?p.mat4.multiply(this._worldTransform,o,this._localTransform):p.mat4.copy(this._worldTransform,this._localTransform),i&&p.mat4.invert(i,this._worldTransform),a&&p.mat4.transpose(a,this._worldTransform),n&&(a?p.mat4.invert(n,a):(p.mat4.invert(n,this._worldTransform),p.mat4.transpose(n,n))),this._onWorldTransformModified&&this._onWorldTransformModified(this._worldTransform),this.OnWorldTransformModified&&this.OnWorldTransformModified(this._worldTransform),r||this.UpdateValues({skipTransforms:!0}),this._rebuildWorld=!1,!0}SetParentTransform(e){return!e&&this._parentTransform?(this._parentTransform=null,this._rebuildWorld=!0):this._parentTransform?p.mat4.equals(e,this._parentTransform)||(p.mat4.copy(this._parentTransform,e),this._rebuildWorld=!0):(this._parentTransform=p.mat4.clone(e),this._rebuildWorld=!0),this}GetWorldTransform(e){return this.RebuildTransforms(),p.mat4.copy(e,this._worldTransform)}DecomposeWorld(e,t,r){return this.RebuildTransforms(),p.mat4.getRotation(e,this._worldTransform),p.mat4.getTranslation(t,this._worldTransform),p.mat4.getScaling(r,this._worldTransform),this}GetWorldRotation(e){return this.RebuildTransforms(),p.mat4.getRotation(e,this._worldTransform)}GetWorldDirection(e){return this.RebuildTransforms(),p.vec3.set(e,this._worldTransform[8],this._worldTransform[9],this._worldTransform[10]),p.vec3.normalize(e,e)}GetWorldEuler(e){return this.GetWorldRotation(_),p.vec3.euler.fromQuat(e,_)}GetWorldEulerInDegrees(e){return this.GetWorldEuler(e),p.vec3.degrees(e,e)}GetWorldAxisAngle(e){return this.RebuildTransforms(),p.mat4.getRotation(_,this._worldTransform),p.quat.getAxisAngle(e,_)}GetWorldTranslation(e){return this.RebuildTransforms(),p.mat4.getTranslation(e,this._worldTransform)}GetWorldScaling(e){return this.RebuildTransforms(),p.mat4.getScaling(e,this._worldTransform)}GetWorldMaxScale(){return this.GetWorldScaling(w),Math.max(w[0],w[1],w[2])}GetWorldToLocal(e,t){return this.RebuildTransforms(),this._worldInverse?p.vec3.transformMat4(e,t,this._worldInverse):(p.mat4.invert(E,this._worldTransform),p.vec3.transformMat4(e,t,E))}Identity(){return p.mat4.identity(this._localTransform),p.mat4.getRotation(this.rotation,this._localTransform),p.mat4.getTranslation(this.translation,this._localTransform),p.mat4.getScaling(this.scaling,this._localTransform),this._rebuildWorld=!0,this}GetTransform(e){return this.RebuildTransforms(),p.mat4.copy(e,this._localTransform)}SetTransform(e){return p.mat4.getRotation(this.rotation,e),p.mat4.getScaling(this.scaling,e),p.mat4.getTranslation(this.translation,e),p.mat4.copy(this._localTransform,e),this._rebuildWorld=!0,this}Compose(e,t,r){return p.quat.copy(this.rotation,e),p.vec3.copy(this.translation,t),p.vec3.copy(this.scaling,r),this._rebuildLocal=!0,this}Decompose(e,t,r){return this.RebuildTransforms(),p.quat.copy(e,this.rotation),p.vec3.copy(t,this.translation),p.vec3.copy(r,this.scaling),this}GetLocalToWorld(e,t){return this.RebuildTransforms(),p.vec3.transformMat4(e,t,this._worldTransform)}GetDirection(e){return this.RebuildTransforms(),p.vec3.set(e,this._localTransform[8],this._localTransform[9],this._localTransform[10]),p.vec3.normalize(e,e)}GetRotation(e){return this.RebuildTransforms(),p.quat.copy(e,this.rotation)}GetEuler(e){return p.vec3.euler.fromQuat(e,this.GetRotation(_))}GetEulerInDegrees(e){return p.vec3.euler.fromQuat(w,this.GetRotation(_)),p.vec3.degrees(w,w)}GetRotationMatrix(e){return p.mat4.fromRotation(e,this.rotation)}SetRotation(e){return p.quat.copy(this.rotation,e),this._rebuildLocal=!0,this}SetRotationFromValues(e,t,r,i){return p.quat.set(this.rotation,e,t,r,i),this._rebuildLocal=!0,this}SetRotationFromAxes(e,t,r){return p.quat.setAxes(this.rotation,e,t,r),this._rebuildLocal=!0,this}SetRotationFromAxisAngle(e,t){return p.quat.setAxisAngle(this.rotation,e,t),this._rebuildLocal=!0,this}SetRotationFromEuler(e){return p.vec3.euler.getQuat(this.rotation,e),this._rebuildLocal=!0,this}SetRotationFromEulerDegrees(e){return p.vec3.radians(w,e),this.SetRotationFromEuler(w)}SetRotationFromEulerValues(e,t,r){return p.vec3.set(w,e,t,r),this.SetRotationFromEuler(w)}SetRotationFromEulerDegreeValues(e,t,r){return p.vec3.set(w,e,t,r),this.SetRotationFromEulerDegrees(w)}SetRotationFromMat4(e){return this.SetRotation(p.mat4.getRotation(_,e))}RotateX(e){return p.quat.rotateX(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateY(e){return p.quat.rotateY(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateZ(e){return p.quat.rotateZ(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateOnAxisAngle(e,t){return p.quat.setAxisAngle(_,e,t),p.quat.multiply(this.rotation,this.rotation,_),this._rebuildLocal=!0,this}GetAxisAngle(e){return p.quat.getAxisAngle(e,this.rotation)}LookAt(e,t){return this.RebuildTransforms(),p.mat4.copy(E,this._localTransform),t?p.mat4.lookAtGL(E,this.translation,e,p.vec3.Y_AXIS):p.mat4.lookAtGL(E,e,this.translation,p.vec3.Y_AXIS),p.mat4.getRotation(this.rotation,E),this._rebuildLocal=!0,this}LookAtWorld(e,t){return this.GetWorldToLocal(w,e),this.LookAt(w,t)}GetTranslation(e){return this.RebuildTransforms(),p.vec3.copy(e,this.translation)}SetTranslation(e){return p.vec3.copy(this.translation,e),this._rebuildLocal=!0,this}SetTranslationFromValues(e,t,r){return p.vec3.set(this.translation,e,t,r),this._rebuildLocal=!0,this}SetTranslationFromMat4(e){return p.mat4.getTranslation(this.translation,e),this._rebuildLocal=!0,this}TranslateOnAxis(e,t){return p.vec3.transformQuat(w,e,this.rotation),p.vec3.scaleAndAdd(this.translation,this.translation,w,t),this._rebuildLocal=!0,this}TranslateX(e){return this.TranslateOnAxis(p.vec3.X_AXIS,e)}TranslateY(e){return this.TranslateOnAxis(p.vec3.Y_AXIS,e)}TranslateZ(e){return this.TranslateOnAxis(p.vec3.Z_AXIS,e)}GetScale(e){return this.RebuildTransforms(),p.vec3.copy(e,this.scaling)}GetMaxScale(){return Math.max(this.scaling[0],this.scaling[1],this.scaling[2])}SetScale(e){return p.vec3.copy(this.scaling,e),this._rebuildLocal=!0,this}SetScaleFromValues(e,t,r){return p.vec3.set(w,e,t,r),this.SetScale(w)}SetScaleX(e){return this.SetScaleFromValues(e,this.scaling[1],this.scaling[2])}SetScaleY(e){return this.SetScaleFromValues(this.scaling[0],e,this.scaling[2])}SetScaleZ(e){return this.SetScaleFromValues(this.scaling[0],this.scaling[1],e)}SetScaleUniform(e){return this.SetScaleFromValues(e,e,e)}SetScaleFromMat4(e){return p.mat4.getScaling(this.scaling,e),this._rebuildLocal=!0,this}Scale(e){return p.vec3.multiply(this.scaling,this.scaling,e),this._rebuildLocal=!0,this}ScaleValues(e,t,r){return p.vec3.set(w,e,t,r),this.Scale(w)}ScaleMat4(e){return p.mat4.getScaling(w,e),this.Scale(w)}ScaleUniform(e){return this.ScaleValues(e,e,e)}ScaleX(e){return this.ScaleValues(e,1,1)}ScaleY(e){return this.ScaleValues(1,e,1)}ScaleZ(e){return this.ScaleValues(1,1,e)}static set(e,t,r){if(!t)return!1;var{rotation:i,euler:n,scale:a,radius:o,position:s}=t,l=v(t,["rotation","euler","scale","radius","position"]);return void 0!==o&&(a=2*o),void 0!==a&&(l.scaling=[a,a,a]),i&&(3===i.length?l.rotation=p.quat.fromEuler([],i[0],i[1],i[2]):l.rotation=i),s&&(l.translation=s),super.set(e,l,r)}static get(e,t,r){return e.RebuildTransforms(r),super.get(e,t,r)}static Vector3FromObject(e){if("r"in e)return new Float32Array([e.r,e.g,e.b]);if("x"in e)return new Float32Array([e.x,e.y,e.z]);throw new Error("Invalid vector3 object")}static Vector4FromObject(e){if("r"in e)return new Float32Array([e.r,e.g,e.b,"a"in e?e.a:1]);if("x"in e)return new Float32Array([e.x,e.y,e.z,e.w]);throw new Error("Invalid vector4 object")}},c=y((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=y(u.prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.quat.create()}}),d=y(u.prototype,"translation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.create()}}),h=y(u.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.fromValues(1,1,1)}}),l=u))||l)},"./core/batch/Tw2BatchAccumulator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BatchAccumulator",(function(){return n}));var i=r("./global/index.js");class n{constructor(e=null){this.batches=[],this._sortMethod=null,this._sortMethod=e}get length(){return this.batches.length}Commit(e){this.batches.push(e)}Clear(){this.batches=[]}Render(e="Main"){this._sortMethod&&this.batches.sort(this._sortMethod);for(var t=0;t<this.batches.length;++t)this.batches[t]instanceof n?this.batches[t].Render(e):(this.batches[t].renderMode!==i.device.RM_ANY&&i.device.SetStandardStates(this.batches[t].renderMode),i.device.perObjectData=this.batches[t].perObjectData,this.batches[t].Commit(e))}}},"./core/batch/Tw2ForwardingRenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ForwardingRenderBatch",(function(){return n}));var i=r("./core/batch/Tw2RenderBatch.js");class n extends i.Tw2RenderBatch{constructor(...e){super(...e),this.geometryProvider=null}Commit(e){this.geometryProvider&&this.geometryProvider.Render(this,e)}}},"./core/batch/Tw2GeometryBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBatch",(function(){return n}));var i=r("./core/batch/Tw2RenderBatch.js");class n extends i.Tw2RenderBatch{constructor(...e){super(...e),this.geometryRes=null,this.meshIx=0,this.start=0,this.count=1,this.effect=null}Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2GeometryLineBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryLineBatch",(function(){return n}));var i=r("./core/batch/Tw2GeometryBatch.js");class n extends i.Tw2GeometryBatch{Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderLines(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2InstancedMeshBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMeshBatch",(function(){return n}));var i=r("./core/batch/Tw2GeometryBatch.js");class n extends i.Tw2GeometryBatch{constructor(...e){super(...e),this.instanceMesh=null}Commit(e){this.instanceMesh&&this.effect&&this.instanceMesh.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2RenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderBatch",(function(){return n}));var i=r("./global/constant/index.js");class n{constructor(){this.renderMode=i.RM_ANY,this.perObjectData=null}Commit(e){}}},"./core/batch/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/batch/Tw2BatchAccumulator.js");r.d(t,"Tw2BatchAccumulator",(function(){return i.Tw2BatchAccumulator}));var n=r("./core/batch/Tw2ForwardingRenderBatch.js");r.d(t,"Tw2ForwardingRenderBatch",(function(){return n.Tw2ForwardingRenderBatch}));var a=r("./core/batch/Tw2GeometryBatch.js");r.d(t,"Tw2GeometryBatch",(function(){return a.Tw2GeometryBatch}));var o=r("./core/batch/Tw2GeometryLineBatch.js");r.d(t,"Tw2GeometryLineBatch",(function(){return o.Tw2GeometryLineBatch}));var s=r("./core/batch/Tw2RenderBatch.js");r.d(t,"Tw2RenderBatch",(function(){return s.Tw2RenderBatch}));var l=r("./core/batch/Tw2InstancedMeshBatch.js");r.d(t,"Tw2InstancedMeshBatch",(function(){return l.Tw2InstancedMeshBatch}))},"./core/data/Tw2PerObjectData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerObjectData",(function(){return n}));var i=r("./core/data/Tw2RawData.js");class n{constructor(){this.vs=null,this.ps=null,this.ffe=null}static from(e,t){var r=new n;return e&&(e.ps&&(r.ps=i.Tw2RawData.from(e.ps,t)),e.vs&&(r.vs=i.Tw2RawData.from(e.vs,t)),e.ffe&&(r.ffe=i.Tw2RawData.from(e.ffe,t))),r}}},"./core/data/Tw2RawData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RawData",(function(){return n})),r.d(t,"ErrRawDataElementNotFound",(function(){return a}));var i=r("./core/Tw2Error.js");class n{constructor(){this.data=null,this.elements={},this.elementsSorted=[],this._nextOffset=0}Has(e){return e in this.elements}Set(e,t){var r=this.elements[e];if(!r)throw new a({name:e});for(var i=0;i<r.size;i++)this.data[i+r.offset]=t[i]}SetIndex(e,t,r){var n=this.elements[e];if(!n)throw new a({name:e});if(t<0||t>=n.size)throw new i.ErrIndexBounds;this.data[t+n.offset]=r}Get(e){if(!this.elements[e])throw new a({name:e});return this.elements[e].array}FindElementFromIndex(e){if(e>=0&&e<this._nextOffset)for(var t in this.elements)if(this.elements.hasOwnProperty(t)){var{offset:r,size:i}=this.elements[t];if(e<r||e>r+i-1)continue;return this.elements[t]}return null}Declare(e,t){var r="number"!=typeof t,i=r?t.length:t,n=r?t:null;this.elements[e]={name:e,offset:this._nextOffset,array:null,size:i,value:n},this._nextOffset+=i,this.elementsSorted.push(this.elements[e]),this.elementsSorted.sort((e,t)=>e.offset-t.offset)}Create(){for(var e in this.data=new Float32Array(this._nextOffset),this.elements)if(this.elements.hasOwnProperty(e)){var t=this.elements[e];if(t.array=this.data.subarray(t.offset,t.offset+t.size),t.value){for(var r=0;r<t.size;r++)t.array[r]=t.value[r];Reflect.deleteProperty(t,"value")}}}static from(e,t){var r=new n;if(e){for(var i=0;i<e.length;i++)r.Declare(e[i][0],e[i][1]);t&&t.skipUpdate||r.Create()}return r}}class a extends i.Tw2Error{constructor(e){super(e,"Raw data element not found (%name%)")}}},"./core/data/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/data/Tw2PerObjectData.js");r.d(t,"Tw2PerObjectData",(function(){return i.Tw2PerObjectData}));var n=r("./core/data/Tw2RawData.js");r.d(t,"Tw2RawData",(function(){return n.Tw2RawData})),r.d(t,"ErrRawDataElementNotFound",(function(){return n.ErrRawDataElementNotFound}))},"./core/engine/Tw2Device.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Device",(function(){return h})),r.d(t,"ErrWebglContext",(function(){return m})),r.d(t,"ErrWebxrNotSupported",(function(){return b})),r.d(t,"ErrWebxrDeviceNotFound",(function(){return p})),r.d(t,"ErrWebxrRequestFailed",(function(){return v})),r.d(t,"ErrWebxrSessionNotSupported",(function(){return g}));var i,n,a=r("./global/math/index.js"),o=r("./global/utils/index.js"),s=r("./core/Tw2Error.js"),l=r("./core/Tw2EventEmitter.js"),u=r("./core/mesh/Tw2Effect.js"),c=r("./core/vertex/Tw2VertexDeclaration.js"),f=r("./global/constant/index.js");function d(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}class h extends l.Tw2EventEmitter{get glVersion(){if(!this.gl)throw new m({message:"No webgl context"});return this.gl instanceof WebGLRenderingContext?1:2}get canvas(){return this.gl?this.gl.canvas:null}constructor(e){super(),this.name="Device",this.gl=null,this.xr=null,this.canvas2d=null,this.dt=0,this.fps=0,this.frameCounter=0,this.startTime=null,this.currentTime=null,this.previousTime=null,this.eyePosition=a.vec3.create(),this.targetResolution=a.vec4.create(),this.world=a.mat4.create(),this.view=a.mat4.create(),this.viewInverse=a.mat4.create(),this.viewTranspose=a.mat4.create(),this.projection=a.mat4.create(),this.projectionInverse=a.mat4.create(),this.projectionTranspose=a.mat4.create(),this.viewProjection=a.mat4.create(),this.viewProjectionTranspose=a.mat4.create(),this.viewportWidth=0,this.viewportHeight=0,this.viewportAspect=0,this.viewportPixelRatio="devicePixelRatio"in window?window.devicePixelRatio:1,this.effectDir="/effect.gles2/",this.mipLevelSkipCount=0,this.shaderModel="hi",this.enableAnisotropicFiltering=!0,this.enableAntialiasing=!0,this.enableWebgl2=!0,this.enableWebxr=!0,this.alphaBlendBackBuffer=!1,this.antialiasing=!0,this.msaaSamples=0,this.wrapModes=[],this.perFrameVSData=null,this.perFramePSData=null,this.perFrameCustomVSData=null,this.perFrameCustomPSData=null,this._extensions={},this._alphaBlendState=null,this._alphaTestState=null,this._depthOffsetState=null,this._shadowStateBuffer=null,this._shadowHandles=null,this._quadBuffer=null,this._quadDecl=null,this._cameraQuadBuffer=null,this._currentRenderMode=f.RM_ANY,this._fallbackCube=null,this._fallbackTexture=null,this._blitEffect=null,this._Date=Date,this._fpsFrameCount=0,this._fpsPreviousTime=0,this._glParams={alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1,descynchronized:!1},this.tw2=e,this.startTime=this.now,this.currentTime=this.startTime}SetShadowHandles(e){this._shadowHandles=e}Register(e){if(e){if(this.gl)throw new Error("Setting device options after gl creation is not supported");"glParams"in e&&Object(o.assignIfExists)(this._glParams,e.glParams,["alpha","depth","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","failIfMajorPerformanceCaveat","descynchronized"]),"events"in e&&this.AddEvents(e.events),"performanceClock"in e&&(e.performance&&"performance"in window?this._Date=performance:this._Date=Date),"textureQuality"in e&&(this.mipLevelSkipCount=e.textureQuality),"shaderQuality"in e&&(this.shaderModel=e.shaderQuality),"anisotropicFilter"in e&&(this.enableAnisotropicFiltering=e.anisotropicFilter),"antialiasing"in e&&(this.enableAntialiasing=e.antialiasing),"webgl2"in e&&(this.enableWebgl2=e.webgl2),"webxr"in e&&(this.enableWebxr=e.webxr)}}GetGLParams(){return this.gl?Object.assign({},this._glParams):null}Create({canvas:e,canvas2d:t,glParams:r}={}){this.gl=null,this.effectDir="/effect.gles2/",r&&this.Register({glParams:r}),this.enableAntialiasing||(this._glParams.antialias=!1);var i=Object.assign({},this._glParams,{webgl2:this.enableWebgl2,xrCompatible:this.enableWebxr});try{this.gl=h.CreateContext(i,e),this.EmitEvent("context_created",this)}catch(e){throw this.EmitEvent("context_failed",this),e}var{gl:n}=this;if(this.tw2.Debug({name:"Device",message:"Webgl".concat(this.glVersion," context created")}),t)try{this.canvas2d=Object(o.isString)(t)?document.getElementById(t):t}catch(e){throw new Error("Invalid 2d canvas")}var a=()=>!1,s=()=>!0;if(1===this.glVersion){i.depth&&this.GetExtension("WEBGL_depth_texture"),this.GetExtension("OES_standard_derivatives"),this.GetExtension("OES_element_index_uint"),this.GetExtension("OES_texture_float"),this.GetExtension("EXT_shader_texture_lod");var l=this.GetExtension("ANGLE_instanced_arrays");n.drawElementsInstanced=l?l.drawElementsInstancedANGLE.bind(l):a,n.drawArraysInstanced=l?l.drawArraysInstancedANGLE.bind(l):a,n.vertexAttribDivisor=l?l.vertexAttribDivisorANGLE.bind(l):a,n.hasInstancedArrays=l?s:a}else n.hasInstancedArrays=s;var u=this.GetExtension("EXT_texture_filter_anisotropic");if(u&&(this.enableAnisotropicFiltering?u.maxAnisotropy=n.getParameter(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT):u.maxAnisotropy=0),this.GetExtension("CCP_shader_binary")){var d=n.getParameter(this.gl.RENDERER).match(/Mali-(\w+).*/);d&&(this.effectDir="/effect.gles2.mali"+d[1]+"/")}this.alphaBlendBackBuffer=i.alpha,this.msaaSamples=this.gl.getParameter(this.gl.SAMPLES),this.antialiasing=this.msaaSamples>1,this.Resize(!0);this._quadBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this._quadBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),n.STATIC_DRAW),this._cameraQuadBuffer=n.createBuffer(),this._quadDecl=c.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2}]),this._alphaBlendState={dirty:!1,states:{[f.RS_SRCBLEND]:f.BLEND_SRCALPHA,[f.RS_DESTBLEND]:f.BLEND_INVSRCALPHA,[f.RS_BLENDOP]:f.BLENDOP_ADD,[f.RS_SEPARATEALPHABLENDENABLE]:0,[f.RS_BLENDOPALPHA]:f.BLENDOP_ADD,[f.RS_SRCBLENDALPHA]:f.BLEND_SRCALPHA,[f.RS_DESTBLENDALPHA]:f.BLEND_INVSRCALPHA}},this._alphaTestState={dirty:!1,states:{[f.RS_ALPHATESTENABLE]:0,[f.RS_ALPHAREF]:-1,[f.RS_ALPHAFUNC]:f.CMP_GREATER,[f.RS_CLIPPING]:0,[f.RS_CLIPPLANEENABLE]:0}},this._depthOffsetState={dirty:!1,states:{[f.RS_SLOPESCALEDEPTHBIAS]:0,[f.RS_DEPTHBIAS]:0}},this._shadowStateBuffer=new Float32Array(24),this.canvas.addEventListener("webglcontextlost",e=>this.EmitEvent("context_lost",this)),this.canvas.addEventListener("webglcontextrestored",e=>this.EmitEvent("context_restored",this))}SetPixelRatio(e){this.viewportPixelRatio!==e&&(this.viewportPixelRatio=e,this.Resize())}FromEffectPath(e,t="fx"){return(e=e.substr(0,e.lastIndexOf(".")).replace(this.effectDir,"/effect/")+"."+t).toLowerCase()}ToEffectPath(e){return(e=e?e.substr(0,e.lastIndexOf(".")).replace("/effect/",this.effectDir)+".sm_"+this.shaderModel:"").toLowerCase()}Resize(e){return this.enableWebxr&&this.xr&&this.xr.isGood?this.xr.OnResize(this.canvas):(this.canvas.width=Math.floor(this.canvas.clientWidth*this.viewportPixelRatio),this.canvas.height=Math.floor(this.canvas.clientHeight*this.viewportPixelRatio)),!(!e&&this.canvas.width===this.viewportWidth&&this.canvas.height===this.viewportHeight)&&(this.viewportWidth=this.canvas.width,this.viewportHeight=this.canvas.height,this.viewportAspect=this.viewportWidth/this.viewportHeight,this.canvas2d&&(this.canvas2d.width=this.viewportWidth,this.canvas2d.height=this.viewportHeight),this.tw2.variables.SetValue("ViewportSize",[this.viewportWidth,this.viewportHeight,this.viewportWidth,this.viewportHeight]),this.EmitEvent("resized",{width:this.viewportWidth,height:this.viewportHeight,aspect:this.viewportAspect,canvas2d:this.canvas2d,canvas3d:this.canvas,xr:this.xr}),!0)}get now(){return this._Date.now()}Tick(){this._resized=this.Resize();var e=this.now,t=null===this.previousTime?e:this.previousTime;return this.currentTime=.001*(e-this.startTime),this.dt=.001*(e-t),this.previousTime=e,this.tw2.variables.SetValue("Time",[this.currentTime,this.currentTime-Math.floor(this.currentTime),this.frameCounter,t]),this._fpsFrameCount++,e>=this._fpsPreviousTime+1e3&&(this.fps=Math.floor(1e3*this._fpsFrameCount/(e-this._fpsPreviousTime)),this._fpsFrameCount=0,this._fpsPreviousTime=e),this.frameCounter++,this._resized}SetWorld(e){a.mat4.copy(this.world,e)}SetView(e){a.mat4.copy(this.view,e),a.mat4.invert(this.viewInverse,this.view),a.mat4.transpose(this.viewTranspose,this.view),a.mat4.getTranslation(this.eyePosition,this.viewInverse),this.UpdateViewProjection()}SetProjection(e,t){a.mat4.copy(this.projection,e),a.mat4.transpose(this.projectionTranspose,this.projection),a.mat4.invert(this.projectionInverse,this.projection),this.GetTargetResolution(this.targetResolution),t&&this.UpdateViewProjection()}UpdateViewProjection(){a.mat4.multiply(this.viewProjection,this.projection,this.view),a.mat4.transpose(this.viewProjectionTranspose,this.viewProjection),this.tw2.variables.SetValue("ViewProjectionMat",this.viewProjection)}GetTargetResolution(e=a.vec4.create()){var t=this.projection[0]?this.projection[5]/this.projection[0]:0,r=1;t>1.6&&(r=t/1.6);var i=2*Math.atan(r/this.projection[5]);return e[0]=this.viewportWidth,e[1]=this.viewportHeight,e[2]=i,e[3]=i*t,e}GetEyePosition(e=a.vec3.create()){return a.vec3.copy(e,this.eyePosition)}IsAlphaTestEnabled(){return this._alphaTestState.states[f.RS_ALPHATESTENABLE]}IsFrameBufferComplete(e){return this.gl.checkFramebufferStatus(e)===this.gl.FRAMEBUFFER_COMPLETE}GetExtension(e){if(!(e in this._extensions)){for(var t,r=0;r<f.VendorWebglPrefixes.length&&!(t=this.gl.getExtension(f.VendorWebglPrefixes[r]+e));r++)t=null;this._extensions[e]=t}return this._extensions[e]}GetFallbackTexture(){return this._fallbackTexture||(this._fallbackTexture=this.CreateSolidTexture()),this._fallbackTexture}GetFallbackCubeMap(){return this._fallbackCube||(this._fallbackCube=this.CreateSolidCube()),this._fallbackCube}CreateSolidTexture(e=[0,0,0,0]){var t=this.gl,r=this.gl.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),r}CreateSolidCube(e=[0,0,0,0]){var t=this.gl,r=this.gl.createTexture();t.bindTexture(t.TEXTURE_CUBE_MAP,r);for(var i=0;i<6;++i)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e));return t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_CUBE_MAP,null),r}RenderFullScreenQuad(e,t="Main"){if(!e||!e.IsGood())return!1;var r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this._quadBuffer);for(var i=0;i<e.GetPassCount(t);++i){if(e.ApplyPass(t,i),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,i),24))return!1;this.ApplyShadowState(),r.drawArrays(r.TRIANGLE_STRIP,0,4)}return!0}RenderTexture(e){return null===this._blitEffect&&(this._blitEffect=u.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/system/blit.fx",textures:{BlitSource:""}})),this._blitEffect.parameters.BlitSource.AttachTextureRes(e),this.RenderFullScreenQuad(this._blitEffect)}RenderCameraSpaceQuad(e,t="Main"){if(!e||!e.IsGood())return!1;for(var r=new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),i=this.projectionInverse,n=0;n<4;++n){var o=r.subarray(6*n,6*n+4);a.vec4.transformMat4(o,o,i),a.vec3.scale(o,o,1/o[3]),o[3]=1}var s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,this._cameraQuadBuffer),s.bufferData(s.ARRAY_BUFFER,r,s.STATIC_DRAW);for(var l=0;l<e.GetPassCount(t);++l){if(e.ApplyPass(t,l),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,l),24))return!1;this.ApplyShadowState(),s.drawArrays(s.TRIANGLE_STRIP,0,4)}return!0}SetRenderState(e,t){var r=this.gl;switch(this._currentRenderMode=f.RM_ANY,e){case f.RS_ZENABLE:return void(t?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST));case f.RS_ZWRITEENABLE:return void r.depthMask(!!t);case f.RS_ALPHATESTENABLE:case f.RS_ALPHAREF:case f.RS_ALPHAFUNC:case f.RS_CLIPPING:case f.RS_CLIPPLANEENABLE:return void(this._alphaTestState[e]!==t&&(this._alphaTestState.states[e]=t,this._alphaTestState.dirty=!0));case f.RS_SRCBLEND:case f.RS_DESTBLEND:case f.RS_BLENDOP:case f.RS_SEPARATEALPHABLENDENABLE:case f.RS_BLENDOPALPHA:case f.RS_SRCBLENDALPHA:case f.RS_DESTBLENDALPHA:return void(this._alphaBlendState[e]!==t&&(this._alphaBlendState.states[e]=t,this._alphaBlendState.dirty=!0));case f.RS_CULLMODE:switch(t){case f.CULL_NONE:return void r.disable(r.CULL_FACE);case f.CULL_CW:return r.enable(r.CULL_FACE),void r.cullFace(r.FRONT);case f.CULL_CCW:return r.enable(r.CULL_FACE),void r.cullFace(r.BACK)}return;case f.RS_ZFUNC:return void r.depthFunc(512+t-1);case f.RS_ALPHABLENDENABLE:return void(t?r.enable(r.BLEND):r.disable(r.BLEND));case f.RS_COLORWRITEENABLE:return void r.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t));case f.RS_SCISSORTESTENABLE:return void(t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST));case f.RS_SLOPESCALEDEPTHBIAS:case f.RS_DEPTHBIAS:return t=a.num.dwordToFloat(t),void(this._depthOffsetState[e]!==t&&(this._depthOffsetState.states[e]=t,this._depthOffsetState.dirty=!0))}}ApplyShadowState(){var e,t,r,i=this.gl;if(this._alphaBlendState.dirty){var n=i.FUNC_ADD;this._alphaBlendState.states[f.RS_BLENDOP]===f.BLENDOP_SUBTRACT?n=i.FUNC_SUBTRACT:this._alphaBlendState.states[f.RS_BLENDOP]===f.BLENDOP_REVSUBTRACT&&(n=i.FUNC_REVERSE_SUBTRACT);var a=f.BlendTable[this._alphaBlendState.states[f.RS_SRCBLEND]],o=f.BlendTable[this._alphaBlendState.states[f.RS_DESTBLEND]];if(this._alphaBlendState.states[f.RS_SEPARATEALPHABLENDENABLE]){var s=i.FUNC_ADD;this._alphaBlendState.states[f.RS_BLENDOP]===f.BLENDOP_SUBTRACT?s=i.FUNC_SUBTRACT:this._alphaBlendState.states[f.RS_BLENDOP]===f.BLENDOP_REVSUBTRACT&&(s=i.FUNC_REVERSE_SUBTRACT);var l=f.BlendTable[this._alphaBlendState.states[f.RS_SRCBLENDALPHA]],u=f.BlendTable[this._alphaBlendState.states[f.RS_DESTBLENDALPHA]];i.blendEquationSeparate(n,s),i.blendFuncSeparate(a,o,l,u)}else i.blendEquation(n),i.blendFunc(a,o);this._alphaBlendState.dirty=!1}if(this._depthOffsetState.dirty&&(i.polygonOffset(this._depthOffsetState.states[f.RS_SLOPESCALEDEPTHBIAS],this._depthOffsetState.states[f.RS_DEPTHBIAS]),this._depthOffsetState.dirty=!1),this._shadowHandles&&this._alphaTestState.states[f.RS_ALPHATESTENABLE]){switch(this._alphaTestState.states[f.RS_ALPHAFUNC]){case f.CMP_NEVER:e=0,t=1,r=-256;break;case f.CMP_LESS:e=0,t=-1,r=this._alphaTestState.states[f.RS_ALPHAREF]-1;break;case f.CMP_EQUAL:e=1,t=0,r=this._alphaTestState.states[f.RS_ALPHAREF];break;case f.CMP_LEQUAL:e=0,t=-1,r=this._alphaTestState.states[f.RS_ALPHAREF];break;case f.CMP_GREATER:e=0,t=1,r=-this._alphaTestState.states[f.RS_ALPHAREF]-1;break;case f.CMP_GREATEREQUAL:e=0,t=1,r=-this._alphaTestState.states[f.RS_ALPHAREF];break;default:e=0,t=0,r=1}i.uniform4f(this._shadowHandles.shadowStateInt,t,r,e,0)}}SetStandardStates(e){if(this._currentRenderMode!==e){switch(this.gl.frontFace(this.gl.CW),e){case f.RM_OPAQUE:case f.RM_PICKABLE:this.SetRenderState(f.RS_ZENABLE,!0),this.SetRenderState(f.RS_ZWRITEENABLE,!0),this.SetRenderState(f.RS_ZFUNC,f.CMP_LEQUAL),this.SetRenderState(f.RS_CULLMODE,f.CULL_CW),this.SetRenderState(f.RS_ALPHABLENDENABLE,!1),this.SetRenderState(f.RS_ALPHATESTENABLE,!1),this.SetRenderState(f.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(f.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(f.RS_DEPTHBIAS,0),this.SetRenderState(f.RS_COLORWRITEENABLE,15);break;case f.RM_DECAL:this.SetRenderState(f.RS_ALPHABLENDENABLE,!1),this.SetRenderState(f.RS_ALPHATESTENABLE,!0),this.SetRenderState(f.RS_ALPHAFUNC,f.CMP_GREATER),this.SetRenderState(f.RS_ALPHAREF,127),this.SetRenderState(f.RS_ZENABLE,!0),this.SetRenderState(f.RS_ZWRITEENABLE,!0),this.SetRenderState(f.RS_ZFUNC,f.CMP_LEQUAL),this.SetRenderState(f.RS_CULLMODE,f.CULL_CW),this.SetRenderState(f.RS_BLENDOP,f.BLENDOP_ADD),this.SetRenderState(f.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(f.RS_DEPTHBIAS,0),this.SetRenderState(f.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(f.RS_COLORWRITEENABLE,15);break;case f.RM_TRANSPARENT:this.SetRenderState(f.RS_CULLMODE,f.CULL_CW),this.SetRenderState(f.RS_ALPHABLENDENABLE,!0),this.SetRenderState(f.RS_SRCBLEND,f.BLEND_SRCALPHA),this.SetRenderState(f.RS_DESTBLEND,f.BLEND_INVSRCALPHA),this.SetRenderState(f.RS_BLENDOP,f.BLENDOP_ADD),this.SetRenderState(f.RS_ZENABLE,!0),this.SetRenderState(f.RS_ZWRITEENABLE,!1),this.SetRenderState(f.RS_ZFUNC,f.CMP_LEQUAL),this.SetRenderState(f.RS_ALPHATESTENABLE,!1),this.SetRenderState(f.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(f.RS_DEPTHBIAS,0),this.SetRenderState(f.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(f.RS_COLORWRITEENABLE,15);break;case f.RM_ADDITIVE:this.SetRenderState(f.RS_CULLMODE,f.CULL_NONE),this.SetRenderState(f.RS_ALPHABLENDENABLE,!0),this.SetRenderState(f.RS_SRCBLEND,f.BLEND_ONE),this.SetRenderState(f.RS_DESTBLEND,f.BLEND_ONE),this.SetRenderState(f.RS_BLENDOP,f.BLENDOP_ADD),this.SetRenderState(f.RS_ZENABLE,!0),this.SetRenderState(f.RS_ZWRITEENABLE,!1),this.SetRenderState(f.RS_ZFUNC,f.CMP_LEQUAL),this.SetRenderState(f.RS_ALPHATESTENABLE,!1),this.SetRenderState(f.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(f.RS_DEPTHBIAS,0),this.SetRenderState(f.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(f.RS_COLORWRITEENABLE,15);break;case f.RM_FULLSCREEN:this.SetRenderState(f.RS_ALPHABLENDENABLE,!1),this.SetRenderState(f.RS_ALPHATESTENABLE,!1),this.SetRenderState(f.RS_CULLMODE,f.CULL_NONE),this.SetRenderState(f.RS_ZENABLE,!1),this.SetRenderState(f.RS_ZWRITEENABLE,!1),this.SetRenderState(f.RS_ZFUNC,f.CMP_ALWAYS),this.SetRenderState(f.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(f.RS_DEPTHBIAS,0),this.SetRenderState(f.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(f.RS_COLORWRITEENABLE,15);break;case f.RM_DISTORTION:case f.RM_DEPTH:default:return}this._currentRenderMode=e}}RequestAnimationFrame(e){return this.xr?this.xr.RequestAnimationFrame(e):this.constructor.RequestAnimationFrame(e)}CancelAnimationFrame(e){return this.xr?this.xr.CancelAnimationFrame(e):this.constructor.CancelAnimationFrame(e)}static CreateContext(e={},t){Object(o.isString)(t)&&(t=document.getElementById(t)),t||(t=document.createElement("canvas"));var r=e.webgl2?["webgl2","webgl","experimental-webgl"]:["webgl","experimental-webgl"],i=null;for(var n of r)if(i=t.getContext(n,e))break;if(!i)throw new m({version:e.webgl2?2:1});return i}static FindXRDevice(e){return(t=function*(){if(!navigator.xr)throw new b;var t;try{t=yield navigator.xr.requestDevice()}catch(e){if("NotFoundError"===e.name||"NotFoundError"===e.message)throw new p({err:e.message});throw new v({err:e.message})}if(e)try{yield t.supportsSession(e)}catch(e){throw new g({err:e.message})}return t},function(){var e=this,r=arguments;return new Promise((function(i,n){var a=t.apply(e,r);function o(e){d(a,i,n,o,s,"next",e)}function s(e){d(a,i,n,o,s,"throw",e)}o(void 0)}))})();var t}}h.RequestAnimationFrame=(i=Object(o.get)(window,f.VendorRequestAnimationFrame),e=>i(e)),h.CancelAnimationFrame=(n=Object(o.get)(window,f.VendorCancelAnimationFrame),e=>n(e)),h.prototype.RM_ANY=f.RM_ANY,h.prototype.RM_OPAQUE=f.RM_OPAQUE,h.prototype.RM_DECAL=f.RM_DECAL,h.prototype.RM_TRANSPARENT=f.RM_TRANSPARENT,h.prototype.RM_ADDITIVE=f.RM_ADDITIVE,h.prototype.RM_DEPTH=f.RM_DEPTH,h.prototype.RM_DISTORTION=f.RM_DISTORTION,h.prototype.RM_FULLSCREEN=f.RM_FULLSCREEN,h.prototype.RM_PICKABLE=f.RM_PICKABLE;class m extends s.Tw2Error{constructor(e){super(e,"Unable to create webgl context (%version%)")}}class b extends s.Tw2Error{constructor(e){super(e,"Webxr not supported")}}class p extends s.Tw2Error{constructor(e){super(e,"Webxr device not found")}}class v extends s.Tw2Error{constructor(e){super(e,"Webxr request failed (%err%)")}}class g extends s.Tw2Error{constructor(e){super(e,"Webxr session not supported (%err%)")}}},"./core/engine/Tw2Library.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Library",(function(){return v}));var i=r("./core/Tw2EventEmitter.js"),n=r("./core/engine/Tw2ResMan.js"),a=r("./core/engine/Tw2Device.js"),o=r("./core/engine/Tw2Logger.js"),s=r("./core/reader/Tw2BlackPropertyReaders.js"),l=r("./core/Tw2Error.js"),u=r("./global/constant/index.js"),c=r("./global/math/index.js"),f=r("./global/utils/index.js"),d=r("./core/store/index.js");function h(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){h(a,i,n,o,s,"next",e)}function s(e){h(a,i,n,o,s,"throw",e)}o(void 0)}))}}function b(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=0;class v extends i.Tw2EventEmitter{get dt(){return this.device.dt}get fps(){return this.device.fps}get now(){return this.device.now}get frame(){return this.device.frameCounter}get gl(){return this.device.gl}get canvas(){return this.device.canvas}get canvas2d(){return this.device.canvas2d}get width(){return this.device.viewportWidth}get height(){return this.device.viewportHeight}get aspect(){return this.device.viewportAspect}get systemMirror(){return this.resMan.systemMirror}constructor(){if(++p>1)throw new l.ErrSingletonInstantiation;var e;super(),this.math=c,this.util=f,this.const=u,this.variableTypes=new d.Tw2VariableTypeStore,this.variables=new d.Tw2VariableStore(this.variableTypes),this.paths=new d.Tw2ResourcePathStore,this.dynamicPaths=new d.Tw2ResourceDynamicPathStore,this.extensions=new d.Tw2ResourceExtensionStore,this.constructors=new d.Tw2ConstructorStore,this.logger=new o.Tw2Logger,this.resMan=new n.Tw2ResMan(this),this.device=new a.Tw2Device(this),this._debugMode=!1,this._customResourceHandler=null,this.device.AddEvents({resized:(...e)=>this.EmitEvent("resized",...e),context_lost:(...e)=>this.EmitEvent("context_lost",...e),context_restored:(...e)=>this.EmitEvent("context_restored",...e),context_created:(...e)=>this.EmitEvent("context_created",...e)}),this.constructors.OnEvent("stored",({key:e,value:t})=>this.constructor.prototype[e]=t),Object.defineProperty(this,"eveSof",{get:()=>{if(!e){var t=this.GetClass("EveSOF");e=new t(this)}return e}})}Initialize(e={}){var{render:t,glParams:r,canvas:i,canvas2d:n}=e,a=b(e,["render","glParams","canvas","canvas2d"]);if(this.Register(a),this.device.Create({canvas:i,canvas2d:n,glParams:r}),t){this.OnEvent("tick",t);var o=()=>{this.RequestAnimationFrame(o),this.StartFrame(),this.EndFrame()};this.RequestAnimationFrame(o)}}StartFrame(){this.device.Tick(),this.resMan.Tick()}EndFrame(){this.EmitEvent("tick",this.device.dt)}RequestAnimationFrame(e){return this.device.RequestAnimationFrame(e)}CancelAnimationFrame(e){return this.device.CancelAnimationFrame(e)}Log(e){return this.logger.Log(e)}Error(e){return this.logger.Error(e)}Debug(e){return this.logger.Debug(e)}Warning(e){return this.logger.Warning(e)}Info(e){return this.logger.Info(e)}Register(e){e&&(e.events&&this.AddEvents(e.events),void 0!==e.debug&&this.SetDebugMode(e.debug),e.resourceHandler&&this.SetCustomResourceHandler(e.resourceHandler),e.black&&this.RegisterBlackPathHandlers(e.black),e.variableTypes&&this.variableTypes.Register(e.variableTypes),e.constructors&&this.constructors.Register(e.constructors),e.variables&&this.variables.Register(e.variables),e.paths&&this.paths.Register(e.paths),e.dynamicPaths&&this.dynamicPaths.Register(e.dynamicPaths),e.extensions&&this.extensions.Register(e.extensions),e.logger&&this.logger.Register(e.logger),e.resMan&&this.resMan.Register(e.resMan),e.device&&this.device.Register(e.device),e.glParams&&this.device.Register({glParams:e.glParams}))}GetURL(e){return this.paths.Resolve(e)}RegisterBlackPathHandlers(e){s.path.registerExtensionHandlers(e)}SetBlackPathExtensionHandler(e,t){return s.path.setExtensionHandler(e,t),this}GetDebugMode(){return this._debugMode}SetDebugMode(e){return this._debugMode=e,this.constructors.SetDebugMode(e),this.resMan.SetDebugMode(e),this.logger.SetDebugMode(e),this}SetCustomResourceHandler(e){return this._customResourceHandler=e,this}IsAlphaTestEnabled(){return this.device.IsAlphaTestEnabled()}SetStandardStates(e){return this.device.SetStandardStates(e),this}SetColorMask(e){return this.device.gl.colorMask(e[0],e[1],e[2],e[3]),this}SetClearColor(e){return this.device.gl.clearColor(e[0],e[1],e[2],e[3]),this}SetClearDepth(e){return this.device.gl.clearDepth(e),this}SetViewport(e){return this.device.gl.viewport(e[0],e[1],e[2],e[3]),this}SetClear(e){return this.device.gl.clear(e),this}SetProjectionMatrix(e){return this.device.SetProjection(e),this}SetViewMatrix(e){return this.device.SetView(e),this}GetDeviceExtension(e){return this.device.GetExtension(e)}AddResource(e,t){return this.resMan.motherLode.Add(e,t)}RemoveResource(e){return this.resMan.motherLode.Remove(e)}GetResource(e,t,r){return this.resMan.GetResource(e,t,r)}Watch(e,t){var r=this;return m((function*(){return r.resMan.Watch(e,t)}))()}Unwatch(e){return this.resMan.UnWatch(e)}Fetch(e,t){var r=this;return m((function*(){var i;if(Object(f.isArray)(e)){if(!e[0]&&e[1])return null;e=e[0]}if(!e)throw new ReferenceError("Invalid resPath: must be defined");if(r._customResourceHandler&&(i=yield r._customResourceHandler(e)),!i)if(f.isDNA(e))i=yield r.eveSof.FetchObject(e);else if(f.isString(e)){var n=f.getPathExtension(e);i=r.extensions.IsLoadingObject(n)?yield r.resMan.FetchObject(e):yield r.resMan.FetchResource(e)}if(!i)throw new ReferenceError("Invalid argument");return t&&(Object(f.isFunction)(t)?yield r.Watch(i,t):yield r.Watch(i)),i}))()}FetchPlain(e,t){var r=this;return m((function*(){var i=g(t,Object.keys(e).length);return Promise.all(Object.keys(e).map(t=>r.Fetch(e[t],i).then(e=>({key:t,val:e})))).then(e=>{var t={};return e.forEach(e=>t[e.key]=e.val),t})}))()}FetchAll(e,t){var r=this;return m((function*(){return Promise.all(e.map(i=>r.Fetch(i,g(t,e.length))))}))()}CreateVariable(e,t,r){return this.variables.Create(e,t,r)}HasVariable(e){return this.variables.Has(e)}GetVariable(e){return this.variables.Get(e)}GetVariableValue(e){return this.variables.GetValue(e)}SetVariable(e,t){return this.variables.Set(e,t)}SetVariableValue(e,t,r){return this.variables.SetValue(e,t,r)}HasExtension(e){return this.extensions.Has(e)}GetExtension(e){return this.extensions.Get(e)}GetExtensionFromPath(e){return this.extensions.FromPath(e)}SetExtension(e,t){return this.extensions.Set(e,t)}HasClass(e){return this.constructors.Has(e)}GetClass(e){return this.constructors.Get(e)}SetClass(e,t){return this.constructors.Set(e,t)}HasPath(e){return this.paths.Has(e)}GetPath(e){return this.paths.Get(e)}SetPath(e,t){return this.paths.Set(e,t)}HasDynamicPath(e){return this.dynamicPaths.Has(e)}GetDynamicPath(e){return this.dynamicPaths.Get(e)}SetDynamicPath(e,t){return this.dynamicPaths.Set(e,t)}HasType(e){return this.variableTypes.Has(e)}GetType(e){return this.variableTypes.Get(e)}GetTypeByValue(e){return this.variableTypes.GetByValue(e)}SetType(e,t){return this.variableTypes.Set(e,t)}}function g(e,t=0){if(!Object(f.isFunction)(e))return!!e;var r=new Map;return function(i,n){r.set(n,i);var a={total:t,pending:0,objects:0,percent:0};r.forEach(e=>{a.total+=e.total,a.pending+=e.pending,a.objects+=e.objects}),a.percent=parseFloat(((a.total-a.pending)/a.total*100).toFixed(2)),e(i,n,a)}}},"./core/engine/Tw2Logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Logger",(function(){return a}));var i=r("./core/Tw2EventEmitter.js"),n=r("./global/utils/index.js");class a extends i.Tw2EventEmitter{constructor(...e){super(...e),this.name="",this.display=!0,this.history=100,this.throttle=20,this.visible={log:!1,info:!1,debug:!1,warn:!1,error:!0},this._logs=[],this._throttled=null,this._debugMode=!1}SetDebugMode(e){this._debugMode=e}Register(e){e&&("events"in e&&this.AddEvents(e.events),Object(n.assignIfExists)(this,e,["name","display","history","throttle"]),Object(n.assignIfExists)(this.visible,e.visible,["log","info","debug","warn","error"]))}Debug(e){return this.Add("debug",e)}Info(e){return this.Add("info",e)}Warning(e){return this.Add("warn",e)}Error(e){return this.Add("error",e)}Log(e){return this.Add("log",e)}Add(e="log",t){if(t?Object(n.isString)(t)?t={message:t}:Object(n.isError)(t)&&(t={message:t.message,err:t}):t={message:""},t._logged)return t;if(t.type=e.toLowerCase(),t.name=t.name||"Logger",t.message=t.message?t.message.charAt(0).toUpperCase()+t.message.substring(1):"",a.LogType[t.type.toUpperCase()]||(t.type="log"),this._debugMode||this.display&&this.visible[t.type]||(t.hide=!0),!this.throttle||this._debugMode)this._throttled=null;else if(!t.hide){this._throttled||(this._throttled={}),this._throttled[t.type]||(this._throttled[t.type]=[]);var r=this._throttled[t.type];r.includes(t.message)?t.hide=!0:(r.unshift(t.message),r.splice(this.throttle))}if(!t.hide||this._debugMode){var i="";t.path&&!t.message.includes(t.path)&&(i+="'".concat(t.path,"' ")),t.time&&(i+="in ".concat(t.time.toFixed(3)," secs ")),t.detail&&(i+="(".concat(t.detail,") "));var o="".concat(this.name," ").concat(t.name,":");t.err||t.data?(console.group(o,t.message,i),t.err&&console.error(t.err.stack||t.err.toString()),t.data&&console.debug(JSON.stringify(t.data,null,4)),console.groupEnd()):console[t.type](o,t.message,i)}var s=this._debugMode?1e3:this.history;return s?(this._logs.unshift(t),this._logs.splice(s)):this._logs=[],t._logged=!0,this.EmitEvent(t.type,t),t}}a.LogType={ERROR:"error",WARNING:"warn",WARN:"warn",INFO:"info",LOG:"log",DEBUG:"debug"}},"./core/engine/Tw2MotherLode.js":function(e,t,r){"use strict";function i(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}r.r(t),r.d(t,"Tw2MotherLode",(function(){return n}));class n{constructor(){this._loadedObjects={},this._errors={},this._watching=[]}Watch(e,t){var r,n=this;return(r=function*(){var r=n.GetWatchedIndex(e);if(-1!==r){var i=n._watching[r];return t&&!i.onProgress.includes(t)&&i.onProgress.push(t),n._watching[r]._promise}var a=n.GetWatchedResourceDetail(e);if(t&&t(a,e),!a.pending)return e;var o={object:e,onProgress:[],start:Date.now(),total:a.total,pending:a.pending};return t&&o.onProgress.push(t),n._watching.push(o),o._promise=new Promise((e,t)=>{o.onCompleted=t=>e(o.object,t),o.onError=e=>t(e)}),o._promise},function(){var e=this,t=arguments;return new Promise((function(n,a){var o=r.apply(e,t);function s(e){i(o,n,a,s,l,"next",e)}function l(e){i(o,n,a,s,l,"throw",e)}s(void 0)}))})()}UnWatch(e){var t=this.GetWatchedIndex(e);if(-1!==t){var{onCompleted:r}=this._watching[t];return this._watching.splice(t,1),r(!1),!0}return!1}PurgeWatched(){for(var e=0;e<this._watching.length;e++){var{onCompleted:t}=this._watching[e];this._watching.splice(e,1),t(!1),e--}}GetWatchedIndex(e){for(var t=0;t<this._watching.length;t++)if(this._watching[t].object===e)return t;return-1}GetWatchedResourceDetail(e){var t={total:0,pending:0,percent:100};if(!e.GetResources&&!e.getResources)return t;var r=e.GetResources?e.GetResources():e.getResources();if(t.total=r.length,t.total){for(var i=0;i<r.length;i++)r[i].HasCompleted()||t.pending++;t.percent=parseFloat(((t.total-t.pending)/t.total*100).toFixed(2))}return t}UpdateWatched(e,t,r){for(var i=Date.now(),n=0;n<this._watching.length;n++){var a=this._watching[n],o=this.GetWatchedResourceDetail(a.object);if(a.total!==o.total||a.pending!==o.pending){a.total=o.total,a.pending=o.pending;for(var s=0;s<a.onProgress.length;s++)a.onProgress[s](o,a.object)}if(!o.pending){this._watching.splice(n,1),n--,a.onCompleted(!0);break}var l=Date.now();if(r&&(l-a.start)/1e3>=r){this._watching.splice(n,1),n--,a.onError(new Error("Maximum watch duration reached"));break}if(e&&(l-i)/1e3>=e)return;if(t&&n>t)return}}AddError(e,t){return this._errors[e]=this._errors[e]||[],t.message.includes(e)||(t.message="".concat(t.message,' "').concat(e,'"')),this._errors[e].includes(t)||(t.path=e,this._errors[e].unshift(t)),t}GetErrors(e){return e&&e in this._errors?Array.from(this._errors[e]):[]}GetLastError(e){return e&&e in this._errors?this._errors[e][0]:void 0}HasErrored(e){return e&&e in this._errors}Find(e){return e in this._loadedObjects?this._loadedObjects[e]:null}Add(e,t){this._loadedObjects[e]=t}Has(e){return!!this._loadedObjects[e]}Remove(e){this._loadedObjects[e]&&Reflect.deleteProperty(this._loadedObjects,e)}Clear(e){for(var t in this._loadedObjects)this._loadedObjects.hasOwnProperty(t)&&(e&&e(this._loadedObjects[t]),this.Remove(t))}UnloadAndClear(e,t){this.Clear(r=>{r.Unload(t),e&&e(r)})}PurgeInactive(e,t,r){for(var i in this._loadedObjects)if(this._loadedObjects.hasOwnProperty(i)){var n=this._loadedObjects[i];if(n.doNotPurge)continue;if(n.IsPurged()){this.Remove(i);continue}var a=void 0;n.HasErrored()?a="errored":n.IsUnloaded()?a="unloaded":n.HasLoaded()&&(e-n.activeFrame)%t>=r&&n.Unload({hide:!0,detail:"inactivity"})&&(a="inactivity"),a&&(n.OnPurged({detail:a}),this.Remove(i))}}}},"./core/engine/Tw2ResMan.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResMan",(function(){return c})),r.d(t,"ErrHTTPRequest",(function(){return f})),r.d(t,"ErrHTTPStatus",(function(){return d}));var i=r("./core/engine/Tw2MotherLode.js"),n=r("./core/resource/Tw2LoadingObject.js"),a=r("./core/Tw2EventEmitter.js"),o=r("./core/Tw2Error.js"),s=r("./global/utils/index.js");function l(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){l(a,i,n,o,s,"next",e)}function s(e){l(a,i,n,o,s,"throw",e)}o(void 0)}))}}class c extends a.Tw2EventEmitter{get pendingLoads(){return this._pendingLoads.length}constructor(e){super(),this.motherLode=new i.Tw2MotherLode,this.systemMirror=!1,this.maxPrepareTime=.05,this.autoPurgeResources=!0,this.activeFrame=0,this.purgeTime=30,this.maxWatchedUpdateTime=.05,this.maxWatchedCount=0,this.maxWatchedTime=240,this._prepareBudget=0,this._prepareQueue=[],this._purgeTime=0,this._purgeFrame=0,this._purgeFrameLimit=1e3,this._pendingLoads=[],this._noLoadFrames=0,this.tw2=e}Register(e){e&&("events"in e&&this.AddEvents(e.events),Object(s.assignIfExists)(this,e,["systemMirror","maxPrepareTime","autoPurgeResources","purgeTime","maxWatchedTime","maxWatchedCount","maxWatchedUpdateTime"]))}SetDebugMode(e){e&&(this.systemMirror=e)}GetDebugMode(e){return this.systemMirror}Watch(e,t){var r=this;return u((function*(){return r.motherLode.Watch(e,t)}))()}UnWatch(e){return this.motherLode.UnWatch(e)}PurgeWatched(){return this.motherLode.PurgeWatched()}OnPathError(e,t=new o.Tw2Error({path:e})){e=c.NormalizePath(e);var r=this.motherLode.Find(e);return r?r.OnError(t):(this.OnPathEvent(e,"error",t),t)}OnPathEvent(e,t,r={}){var i=this.motherLode.Find(e),n=Object(s.isError)(r)?r:void 0;n&&(this.motherLode.AddError(e,n),r={err:n,message:n.message}),r.path=e,r.message=r.message||t,r.name="Resource manager",this.EmitEvent(t,e,i,n),this.tw2.logger.Add(c.LogType[t.toUpperCase()],r)}IsLoading(){return this._noLoadFrames<2}Clear(e){this.motherLode.Clear(e)}UnloadAndClear(e,t){this.motherLode.UnloadAndClear(e,t)}Tick(){0===this._prepareQueue.length&&0===this._pendingLoads.length?this._noLoadFrames<2&&this._noLoadFrames++:this._noLoadFrames=0,this._prepareBudget=this.maxPrepareTime;for(var e=this.tw2.now;this._prepareQueue.length;){var[t,r,i]=this._prepareQueue[0];this._prepareQueue.shift();try{if(t.Prepare(r,i),this._prepareBudget-=.001*(this.tw2.now-e),this._prepareBudget<0)break}catch(e){this._prepareBudget=0,t.OnError(e)}}return this.motherLode.UpdateWatched(this.maxWatchedUpdateTime,this.maxWatchedCount,this.maxWatchedTime),this._purgeTime+=this.tw2.dt,this._purgeTime>1&&(this.activeFrame+=1,this._purgeTime-=Math.floor(this._purgeTime),this._purgeFrame+=1,this._purgeFrame>=5&&this.autoPurgeResources&&this.motherLode.PurgeInactive(this._purgeFrame,this._purgeFrameLimit,this.purgeTime)),!0}Queue(e,t,r){this._prepareQueue.push([e,t,r])}GetResource(e,t,r){var i;if(0===(e=c.NormalizePath(e)).indexOf("dynamic:/"))throw new o.ErrFeatureNotImplemented({feature:"Dynamic resources"});if(i=this.motherLode.Find(e))return i.RegisterCallbacks(t,r),i;if(0===e.indexOf("manual:/"))throw new o.ErrFeatureNotImplemented({feature:"Manually created resource"});try{i=new(this.tw2.GetExtensionFromPath(e))}catch(t){return this.OnPathError(e,t),r&&r(t),null}return i.path=e,i.RegisterCallbacks(t,r),this.LoadResource(i)}FetchResource(e){var t=this;return u((function*(){return new Promise((r,i)=>{t.GetResource(e,r,i)})}))()}GetObject(e,t,r){e=c.NormalizePath(e);var i=this.motherLode.Find(e);i?i.AddObject(t,r):((i=new n.Tw2LoadingObject).path=e,i.AddObject(t,r),this.LoadResource(i))}FetchObject(e){var t=this;return u((function*(){return new Promise((r,i)=>{t.GetObject(e,r,i)})}))()}LoadResource(e,t){if(this.motherLode.Add(e.path,e),e.HasErrored())return e;try{var r=this.tw2.GetURL(e.path);if(e.OnRequested(t),e.DoCustomLoad&&e.DoCustomLoad(r,Object(s.getPathExtension)(r)))return e;if(e.HasErrored())return e;this.Fetch(r,e.requestResponseType).then(t=>{e.OnLoaded(),this.Queue(e,t)}).catch(t=>{e.OnError(t)})}catch(t){e.OnError(t)}return e}AddPendingLoad(e){this._pendingLoads.push(e)}RemovePendingLoad(e){var t=this._pendingLoads.indexOf(e);-1!==t&&this._pendingLoads.splice(t,1)}Fetch(e,t){var r=this;return u((function*(){return r.AddPendingLoad(e),fetch(e).then(e=>{if(!e.ok)throw e;if(Object(s.isFunction)(t))return t(e);switch(t){case"arraybuffer":return e.arrayBuffer();case"text":return e.text();case"json":return e.json();case"blob":return e.blob();default:throw new Error("Invalid fetch type: "+t)}}).then(t=>(r.RemovePendingLoad(e),t)).catch(t=>{if(r.RemovePendingLoad(e),t.text)return t.text().then(e=>{var r,{status:i,statusText:n}=t;try{n=(r=JSON.parse(e)).message||r.msg||r.error||r.err,Object(s.isBoolean)(n)&&(n=void 0)}catch(e){n="Failed to fetch resource"}throw new d({status:i,statusText:n,json:r})});throw t})}))()}BuildUrl(e){return this.tw2.GetURL(e)}static NormalizePath(e){return e=(e=e.toLowerCase()).replace("\\","/")}}c.LogType={ERROR:"error",PURGED:"info",UNLOADED:"info",REQUESTED:"info",RELOADING:"info",LOADED:"info",PREPARED:"log",WARNING:"warn",DEBUG:"debug"};class f extends o.Tw2Error{constructor(e){super(e,"Communication error while requesting resource")}}class d extends o.Tw2Error{constructor(e){super(e,"%statusText=Communication status error while loading resource% (%status%)")}}},"./core/geometry/Tw2BlendShapeData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlendShapeData",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./core/vertex/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.type("Tw2BlendShapeData"),n=p.meta.string,a=p.meta.struct("Tw2VertexDeclaration"),o=p.meta.vector,s=p.meta.unknown,l=p.meta.unknown,i((f=y((c=class{constructor(){g(this,"name",f,this),g(this,"declaration",d,this),g(this,"buffers",h,this),g(this,"indexes",m,this),g(this,"weightProxy",b,this)}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y(c.prototype,"declaration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v.Tw2VertexDeclaration}}),h=y(c.prototype,"buffers",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=y(c.prototype,"indexes",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y(c.prototype,"weightProxy",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./core/geometry/Tw2GeometryAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryAnimation",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.type("Tw2GeometryAnimation"),n=d.meta.string,a=d.meta.float,o=d.meta.list("Tw2GeometryTrackGroup"),i((u=m((l=class{constructor(){h(this,"name",u,this),h(this,"duration",c,this),h(this,"trackGroups",f,this)}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m(l.prototype,"duration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=m(l.prototype,"trackGroups",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./core/geometry/Tw2GeometryBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBone",(function(){return x}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js"),j=r("./global/math/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=S.meta.type("Tw2GeometryBone"),n=S.meta.string,a=S.meta.uint,o=S.meta.vector3,s=S.meta.quaternion,l=S.meta.matrix4,u=S.meta.matrix4,c=S.meta.matrix4,f=S.meta.matrix4,i((T=E=class e{constructor(){R(this,"name",m,this),R(this,"parentIndex",b,this),R(this,"position",p,this),R(this,"orientation",v,this),R(this,"scaleShear",g,this),R(this,"localTransform",y,this),R(this,"worldTransform",w,this),R(this,"worldTransformInv",_,this)}UpdateTransform(){j.mat4.fromMat3(this.localTransform,this.scaleShear),j.quat.normalize(this.orientation,this.orientation);var t=j.mat4.fromQuat(e.global.mat4_0,this.orientation);return j.mat4.multiply(this.localTransform,this.localTransform,t),this.localTransform[12]=this.position[0],this.localTransform[13]=this.position[1],this.localTransform[14]=this.position[2],this.localTransform}},E.global={mat4_0:j.mat4.create()},m=P((h=T).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=P(h.prototype,"parentIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=P(h.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.create()}}),v=P(h.prototype,"orientation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),g=P(h.prototype,"scaleShear",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.mat3.create()}}),y=P(h.prototype,"localTransform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.mat4.create()}}),w=P(h.prototype,"worldTransform",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.mat4.create()}}),_=P(h.prototype,"worldTransformInv",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.mat4.create()}}),d=h))||d)},"./core/geometry/Tw2GeometryCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryCurve",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.type("Tw2GeometryCurve"),n=m.meta.float,a=m.meta.float,o=m.meta.vector,s=m.meta.vector,i((c=p((u=class{constructor(){b(this,"dimension",c,this),b(this,"degree",f,this),b(this,"knots",d,this),b(this,"controls",h,this)}}).prototype,"dimension",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p(u.prototype,"degree",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=p(u.prototype,"knots",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p(u.prototype,"controls",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l)},"./core/geometry/Tw2GeometryMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMesh",(function(){return k}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L=r("./global/utils/index.js"),F=r("./global/math/index.js"),G=r("./core/vertex/index.js");r("./core/geometry/Tw2GeometryMeshArea.js");function B(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function N(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=(i=L.meta.type("Tw2GeometryMesh"),n=L.meta.string,a=L.meta.struct("Tw2VertexDeclaration"),o=L.meta.list("Tw2GeometryMeshArea"),s=L.meta.vector,l=L.meta.uint,u=L.meta.struct("WebGLBuffer"),c=L.meta.struct("WebGLBuffer"),f=L.meta.vector,d=L.meta.uint,h=L.meta.vector3,m=L.meta.vector3,b=L.meta.vector3,p=L.meta.float,v=L.meta.list("Tw2GeometryBone"),g=L.meta.list("String"),i((_=N((w=class e{constructor(){B(this,"name",_,this),B(this,"declaration",E,this),B(this,"areas",T,this),B(this,"buffer",S,this),B(this,"bufferLength",j,this),B(this,"bufferData",R,this),B(this,"indexes",P,this),B(this,"indexData",x,this),B(this,"indexType",z,this),B(this,"minBounds",O,this),B(this,"maxBounds",A,this),B(this,"boundsSpherePosition",M,this),B(this,"boundsSphereRadius",C,this),B(this,"bones",D,this),B(this,"boneBindings",I,this),this._faces=0,this._vertices=0,this._areas=0}GetBoundingBox(e,t){return F.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&F.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return F.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&F.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){var t=this.minBounds,r=this.maxBounds;F.box3.bounds.empty(t,r);for(var i=0;i<this.areas.length;i++){var n=this.areas[i];this.RebuildAreaBounds(n,this.bufferData,this.indexData,e),F.box3.bounds.union(t,r,t,r,n.minBounds,n.maxBounds)}this.boundsSphereRadius=F.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}RebuildAreaBounds(t,r,i,n){if(!n||!r||!i)return!1;var a=this.declaration.FindUsage(0,0);if(!a)return!1;var o=this.declaration.stride/4,s=a.offset,l=e.GetBoundsFromVertices(F.box3.create(),t.start,t.count,o,s,r,i);return F.box3.toBounds(l,t.minBounds,t.maxBounds),t.boundsSphereRadius=F.box3.toPositionRadius(l,t.boundsSpherePosition),!0}static GetFaceVertexIndices(e,t,r){if(t>=r.length/3)throw new Error("Invalid index: "+t);for(var i=0;i<3;i++)e[i]=r[3*t+i];return e}static GetVertexPosition(e,t,r,i,n){if(!Object(L.isNumber)(t)||t>n.length/r)throw new Error("Invalid vertex index: "+t);var a=t*r;return F.vec3.set(e,n[a+i],n[a+i+1],n[a+i+2])}static GetBoundsFromVertices(e,t,r,i,n,a,o){r/=3,t=t/3/o.BYTES_PER_ELEMENT;var s=[],l=F.vec3.create(),u=F.vec3.create();F.box3.empty(e);for(var c=0;c<r;c++){this.GetFaceVertexIndices(l,c+t,o);for(var f=0;f<3;f++)s.includes(l[f])||(s.push(l[f]),this.GetVertexPosition(u,l[f],i,n,a),F.box3.addPoint(e,e,u))}return e}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=N(w.prototype,"declaration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new G.Tw2VertexDeclaration}}),T=N(w.prototype,"areas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=N(w.prototype,"buffer",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=N(w.prototype,"bufferLength",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=N(w.prototype,"bufferData",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=N(w.prototype,"indexes",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=N(w.prototype,"indexData",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=N(w.prototype,"indexType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=N(w.prototype,"minBounds",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(0,0,0)}}),A=N(w.prototype,"maxBounds",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(0,0,0)}}),M=N(w.prototype,"boundsSpherePosition",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),C=N(w.prototype,"boundsSphereRadius",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=N(w.prototype,"bones",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=N(w.prototype,"boneBindings",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=w))||y)},"./core/geometry/Tw2GeometryMeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshArea",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/math/index.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=w.meta.type("Tw2GeometryMeshArea"),n=w.meta.string,a=w.meta.uint,o=w.meta.uint,s=w.meta.vector3,l=w.meta.vector3,u=w.meta.vector3,c=w.meta.float,i((h=T((d=class{constructor(){E(this,"name",h,this),E(this,"start",m,this),E(this,"count",b,this),E(this,"minBounds",p,this),E(this,"maxBounds",v,this),E(this,"boundsSpherePosition",g,this),E(this,"boundsSphereRadius",y,this)}GetBoundingBox(e,t){return _.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&_.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return _.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&_.sph3.transformMat4(e,e,t),!0}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=T(d.prototype,"start",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=T(d.prototype,"count",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=T(d.prototype,"minBounds",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.fromValues(0,0,0)}}),v=T(d.prototype,"maxBounds",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.fromValues(0,0,0)}}),g=T(d.prototype,"boundsSpherePosition",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),y=T(d.prototype,"boundsSphereRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=d))||f)},"./core/geometry/Tw2GeometryMeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshBinding",(function(){return h}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");function f(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var h=(i=c.meta.type("Tw2GeometryMeshBinding"),n=c.meta.struct("Tw2GeometryMesh"),a=c.meta.list("Tw2GeometryBone"),i((l=d((s=class{constructor(){f(this,"mesh",l,this),f(this,"bones",u,this)}}).prototype,"mesh",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=d(s.prototype,"bones",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./core/geometry/Tw2GeometryModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryModel",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.type("Tw2GeometryModel"),n=d.meta.string,a=d.meta.list("Tw2GeometryMeshBinding"),o=d.meta.struct("Tw2GeometrySkeleton"),i((u=m((l=class{constructor(){h(this,"name",u,this),h(this,"meshBindings",c,this),h(this,"skeleton",f,this)}FindBoneByName(e){if(!this.skeleton)return null;for(var t=0;t<this.skeleton.bones.length;++t)if(this.skeleton.bones[t].name===e)return this.skeleton.bones[t];return null}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m(l.prototype,"meshBindings",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=m(l.prototype,"skeleton",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s)},"./core/geometry/Tw2GeometrySkeleton.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometrySkeleton",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("Tw2GeometrySkeleton"),n=u.meta.list("Tw2GeometryBone"),i((l=class{constructor(){var e,t,r,i;e=this,t="bones",i=this,(r=s)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},c=(o=l).prototype,f="bones",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./core/geometry/Tw2GeometryTrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTrackGroup",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.type("Tw2GeometryTrackGroup"),n=d.meta.string,a=d.meta.struct("Tw2GeometryModel"),o=d.meta.list("Tw2GeometryTransformTrack"),i((u=m((l=class{constructor(){h(this,"name",u,this),h(this,"model",c,this),h(this,"transformTracks",f,this)}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m(l.prototype,"model",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m(l.prototype,"transformTracks",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./core/geometry/Tw2GeometryTransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTransformTrack",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.type("Tw2GeometryTransformTrack"),n=m.meta.string,a=m.meta.struct("Tw2GeometryCurve"),o=m.meta.struct("Tw2GeometryCurve"),s=m.meta.unknown,i((c=p((u=class{constructor(){b(this,"name",c,this),b(this,"position",f,this),b(this,"orientation",d,this),b(this,"scaleShear",h,this)}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=p(u.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p(u.prototype,"orientation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p(u.prototype,"scaleShear",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l)},"./core/geometry/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/geometry/Tw2BlendShapeData.js");r.d(t,"Tw2BlendShapeData",(function(){return i.Tw2BlendShapeData}));var n=r("./core/geometry/Tw2GeometryAnimation.js");r.d(t,"Tw2GeometryAnimation",(function(){return n.Tw2GeometryAnimation}));var a=r("./core/geometry/Tw2GeometryBone.js");r.d(t,"Tw2GeometryBone",(function(){return a.Tw2GeometryBone}));var o=r("./core/geometry/Tw2GeometryCurve.js");r.d(t,"Tw2GeometryCurve",(function(){return o.Tw2GeometryCurve}));var s=r("./core/geometry/Tw2GeometryMesh.js");r.d(t,"Tw2GeometryMesh",(function(){return s.Tw2GeometryMesh}));var l=r("./core/geometry/Tw2GeometryMeshArea.js");r.d(t,"Tw2GeometryMeshArea",(function(){return l.Tw2GeometryMeshArea}));var u=r("./core/geometry/Tw2GeometryMeshBinding.js");r.d(t,"Tw2GeometryMeshBinding",(function(){return u.Tw2GeometryMeshBinding}));var c=r("./core/geometry/Tw2GeometryModel.js");r.d(t,"Tw2GeometryModel",(function(){return c.Tw2GeometryModel}));var f=r("./core/geometry/Tw2GeometrySkeleton.js");r.d(t,"Tw2GeometrySkeleton",(function(){return f.Tw2GeometrySkeleton}));var d=r("./core/geometry/Tw2GeometryTrackGroup.js");r.d(t,"Tw2GeometryTrackGroup",(function(){return d.Tw2GeometryTrackGroup}));var h=r("./core/geometry/Tw2GeometryTransformTrack.js");r.d(t,"Tw2GeometryTransformTrack",(function(){return h.Tw2GeometryTransformTrack}))},"./core/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/batch/index.js");r.d(t,"Tw2BatchAccumulator",(function(){return i.Tw2BatchAccumulator})),r.d(t,"Tw2ForwardingRenderBatch",(function(){return i.Tw2ForwardingRenderBatch})),r.d(t,"Tw2GeometryBatch",(function(){return i.Tw2GeometryBatch})),r.d(t,"Tw2GeometryLineBatch",(function(){return i.Tw2GeometryLineBatch})),r.d(t,"Tw2RenderBatch",(function(){return i.Tw2RenderBatch})),r.d(t,"Tw2InstancedMeshBatch",(function(){return i.Tw2InstancedMeshBatch}));var n=r("./core/data/index.js");r.d(t,"Tw2PerObjectData",(function(){return n.Tw2PerObjectData})),r.d(t,"Tw2RawData",(function(){return n.Tw2RawData})),r.d(t,"ErrRawDataElementNotFound",(function(){return n.ErrRawDataElementNotFound}));var a=r("./core/geometry/index.js");r.d(t,"Tw2BlendShapeData",(function(){return a.Tw2BlendShapeData})),r.d(t,"Tw2GeometryAnimation",(function(){return a.Tw2GeometryAnimation})),r.d(t,"Tw2GeometryBone",(function(){return a.Tw2GeometryBone})),r.d(t,"Tw2GeometryCurve",(function(){return a.Tw2GeometryCurve})),r.d(t,"Tw2GeometryMesh",(function(){return a.Tw2GeometryMesh})),r.d(t,"Tw2GeometryMeshArea",(function(){return a.Tw2GeometryMeshArea})),r.d(t,"Tw2GeometryMeshBinding",(function(){return a.Tw2GeometryMeshBinding})),r.d(t,"Tw2GeometryModel",(function(){return a.Tw2GeometryModel})),r.d(t,"Tw2GeometrySkeleton",(function(){return a.Tw2GeometrySkeleton})),r.d(t,"Tw2GeometryTrackGroup",(function(){return a.Tw2GeometryTrackGroup})),r.d(t,"Tw2GeometryTransformTrack",(function(){return a.Tw2GeometryTransformTrack}));var o=r("./core/mesh/index.js");r.d(t,"Tw2Effect",(function(){return o.Tw2Effect})),r.d(t,"Tw2InstancedMesh",(function(){return o.Tw2InstancedMesh})),r.d(t,"Tw2Mesh",(function(){return o.Tw2Mesh})),r.d(t,"Tw2MeshArea",(function(){return o.Tw2MeshArea})),r.d(t,"Tw2MeshLineArea",(function(){return o.Tw2MeshLineArea}));var s=r("./core/model/index.js");r.d(t,"Tw2Animation",(function(){return s.Tw2Animation})),r.d(t,"Tw2AnimationController",(function(){return s.Tw2AnimationController})),r.d(t,"Tw2Bone",(function(){return s.Tw2Bone})),r.d(t,"Tw2BoneBinding",(function(){return s.Tw2BoneBinding})),r.d(t,"Tw2MeshBinding",(function(){return s.Tw2MeshBinding})),r.d(t,"Tw2Model",(function(){return s.Tw2Model})),r.d(t,"Tw2Track",(function(){return s.Tw2Track})),r.d(t,"Tw2TrackGroup",(function(){return s.Tw2TrackGroup}));var l=r("./core/parameter/index.js");r.d(t,"Tw2Parameter",(function(){return l.Tw2Parameter})),r.d(t,"Tw2FloatParameter",(function(){return l.Tw2FloatParameter})),r.d(t,"Tw2Matrix4Parameter",(function(){return l.Tw2Matrix4Parameter})),r.d(t,"Tw2TransformParameter",(function(){return l.Tw2TransformParameter})),r.d(t,"Tw2VariableParameter",(function(){return l.Tw2VariableParameter})),r.d(t,"Tw2Vector2Parameter",(function(){return l.Tw2Vector2Parameter})),r.d(t,"Tw2Vector3Parameter",(function(){return l.Tw2Vector3Parameter})),r.d(t,"Tw2Vector4Parameter",(function(){return l.Tw2Vector4Parameter})),r.d(t,"Tw2TextureParameter",(function(){return l.Tw2TextureParameter}));var u=r("./core/post/index.js");r.d(t,"Tw2PostEffect",(function(){return u.Tw2PostEffect})),r.d(t,"Tw2PostEffectManager",(function(){return u.Tw2PostEffectManager})),r.d(t,"Tw2PostEffectStep",(function(){return u.Tw2PostEffectStep})),r.d(t,"Tw2PostProcess",(function(){return u.Tw2PostProcess}));var c=r("./core/reader/index.js");r.d(t,"Tw2BinaryReader",(function(){return c.Tw2BinaryReader})),r.d(t,"Tw2BlackReader",(function(){return c.Tw2BlackReader})),r.d(t,"ErrBinaryFormat",(function(){return c.ErrBinaryFormat})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return c.ErrBinaryObjectTypeNotFound})),r.d(t,"Tw2ObjectReader",(function(){return c.Tw2ObjectReader}));var f=r("./core/resource/index.js");r.d(t,"Tw2EffectRes",(function(){return f.Tw2EffectRes})),r.d(t,"ErrShaderVersion",(function(){return f.ErrShaderVersion})),r.d(t,"ErrShaderHeaderSize",(function(){return f.ErrShaderHeaderSize})),r.d(t,"Tw2GeometryRes",(function(){return f.Tw2GeometryRes})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return f.ErrGeometryMeshMissingParticleElement})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return f.ErrGeometryMeshElementComponentsMissing})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return f.ErrGeometryMeshAreaMissing})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return f.ErrGeometryMeshBoneNameInvalid})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return f.ErrGeometryMeshEffectBinding})),r.d(t,"ErrGeometryFileType",(function(){return f.ErrGeometryFileType})),r.d(t,"Tw2LoadingObject",(function(){return f.Tw2LoadingObject})),r.d(t,"Tw2Resource",(function(){return f.Tw2Resource})),r.d(t,"ErrResourceFormatInvalid",(function(){return f.ErrResourceFormatInvalid})),r.d(t,"ErrResourceFormatUnsupported",(function(){return f.ErrResourceFormatUnsupported})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return f.ErrResourceFormatNotImplemented})),r.d(t,"Tw2TextureRes",(function(){return f.Tw2TextureRes})),r.d(t,"Tw2VideoRes",(function(){return f.Tw2VideoRes})),r.d(t,"Tw2CakeReader",(function(){return f.Tw2CakeReader})),r.d(t,"Tw2WaveFrontReader",(function(){return f.Tw2WaveFrontReader}));var d=r("./core/sampler/index.js");r.d(t,"Tw2SamplerState",(function(){return d.Tw2SamplerState})),r.d(t,"Tw2SamplerOverride",(function(){return d.Tw2SamplerOverride}));var h=r("./core/shader/index.js");r.d(t,"Tw2Shader",(function(){return h.Tw2Shader})),r.d(t,"ErrShaderCompile",(function(){return h.ErrShaderCompile})),r.d(t,"ErrShaderLink",(function(){return h.ErrShaderLink})),r.d(t,"Tw2ShaderAnnotation",(function(){return h.Tw2ShaderAnnotation})),r.d(t,"Tw2ShaderPass",(function(){return h.Tw2ShaderPass})),r.d(t,"Tw2ShaderPermutation",(function(){return h.Tw2ShaderPermutation})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return h.ErrShaderPermutationOptionInvalid})),r.d(t,"Tw2ShaderProgram",(function(){return h.Tw2ShaderProgram})),r.d(t,"Tw2ShaderStage",(function(){return h.Tw2ShaderStage})),r.d(t,"Tw2ShaderStageConstant",(function(){return h.Tw2ShaderStageConstant})),r.d(t,"Tw2ShaderStageTexture",(function(){return h.Tw2ShaderStageTexture})),r.d(t,"Tw2ShaderState",(function(){return h.Tw2ShaderState})),r.d(t,"Tw2ShaderTechnique",(function(){return h.Tw2ShaderTechnique}));var m=r("./core/store/index.js");r.d(t,"Tw2GenericStore",(function(){return m.Tw2GenericStore})),r.d(t,"Tw2ConstructorStore",(function(){return m.Tw2ConstructorStore})),r.d(t,"Tw2VariableTypeStore",(function(){return m.Tw2VariableTypeStore})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return m.ErrStoreVariableTypeNotFoundByValue})),r.d(t,"Tw2VariableStore",(function(){return m.Tw2VariableStore})),r.d(t,"Tw2ResourcePathStore",(function(){return m.Tw2ResourcePathStore})),r.d(t,"ErrStorePathUndefined",(function(){return m.ErrStorePathUndefined})),r.d(t,"Tw2ResourceDynamicPathStore",(function(){return m.Tw2ResourceDynamicPathStore})),r.d(t,"Tw2ResourceExtensionStore",(function(){return m.Tw2ResourceExtensionStore}));var b=r("./core/value/index.js");r.d(t,"Tw2Float",(function(){return b.Tw2Float}));var p=r("./core/vertex/index.js");r.d(t,"Tw2VertexDeclaration",(function(){return p.Tw2VertexDeclaration})),r.d(t,"Tw2VertexElement",(function(){return p.Tw2VertexElement}));var v=r("./core/Tw2RuntimeInstanceData.js");r.d(t,"Tw2RuntimeInstanceData",(function(){return v.Tw2RuntimeInstanceData}));var g=r("./core/Tw2Frustum.js");r.d(t,"Tw2Frustum",(function(){return g.Tw2Frustum}));var y=r("./core/Tw2RenderTarget.js");r.d(t,"Tw2RenderTarget",(function(){return y.Tw2RenderTarget}));var w=r("./core/Tw2Error.js");r.d(t,"Tw2Error",(function(){return w.Tw2Error})),r.d(t,"ErrFeatureNotImplemented",(function(){return w.ErrFeatureNotImplemented})),r.d(t,"ErrIndexBounds",(function(){return w.ErrIndexBounds})),r.d(t,"ErrWrapped",(function(){return w.ErrWrapped})),r.d(t,"ErrSingletonInstantiation",(function(){return w.ErrSingletonInstantiation})),r.d(t,"ErrAbstractClass",(function(){return w.ErrAbstractClass})),r.d(t,"ErrAbstractMethod",(function(){return w.ErrAbstractMethod}));var _=r("./core/Tw2EventEmitter.js");r.d(t,"Tw2EventEmitter",(function(){return _.Tw2EventEmitter}));var E=r("./core/Tw2RayCaster.js");r.d(t,"Tw2RayCaster",(function(){return E.Tw2RayCaster}));var T=r("./core/Tw2Transform.js");r.d(t,"Tw2Transform",(function(){return T.Tw2Transform}))},"./core/mesh/Tw2Effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Effect",(function(){return N}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./global/index.js"),D=r("./core/parameter/Tw2TextureParameter.js"),I=r("./core/parameter/Tw2Vector4Parameter.js"),L=r("./core/reader/Tw2BlackPropertyReaders.js"),F=r("./core/resource/index.js");function G(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function B(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var N=(i=M.meta.type("Tw2Effect"),n=M.meta.stage(1),a=M.meta.string,o=M.meta.path,s=M.meta.struct("Tw2EffectRes"),l=M.meta.isPrivate,u=M.meta.isPrivate,c=M.meta.notImplemented,f=M.meta.notImplemented,d=M.meta.struct("Tw2Shader"),h=M.meta.isPrivate,m=M.meta.boolean,b=M.meta.list(),p=M.meta.isPrivate,v=M.meta.string,i(g=n((A=O=class e extends M.meta.Model{constructor(...e){super(...e),G(this,"name",w,this),G(this,"effectFilePath",_,this),G(this,"effectRes",E,this),this.parameters={},G(this,"techniques",T,this),G(this,"samplerOverrides",S,this),G(this,"options",j,this),G(this,"shader",R,this),G(this,"autoParameter",P,this),G(this,"stateOverride",x,this),G(this,"defaultTechnique",z,this),this._isAttached=!1}get isAttached(){return this._isAttached}Initialize(){this.UpdateValues()}SetValue(e,t){this.effectFilePath=e.toLowerCase(),this.autoParameter=!0,this.UpdateValues(t)}GetValue(){return this._isAttached?null:this.effectFilePath}AttachEffectRes(e){return this._SetEffectRes(e,!0)}_SetEffectRes(e,t){return this.effectRes!==e&&(this._RemoveEffectRes(),this._isAttached=!!t,this.effectRes=e,e.RegisterNotification(this),!0)}_RemoveEffectRes(){var e=this.effectRes;return!!e&&(this.effectRes=null,this.shader=null,this._isAttached=!1,this.UnBindParameters(),e.UnregisterNotification(this),this.EmitEvent(F.Tw2Resource.Event.RES_REMOVED,this,e),!0)}OnValueChanged(){var e;this.isAttached?e=this.effectRes:(this.effectFilePath=this.effectFilePath?this.effectFilePath.toLowerCase():"","fx"===Object(M.getPathExtension)(this.effectFilePath)&&(this.effectFilePath=C.device.ToEffectPath(this.effectFilePath)),e=this.effectFilePath?C.tw2.GetResource(this.effectFilePath):null);this._SetEffectRes(e)||this.BindParameters()}FindParameter(e){return this.parameters[e]||null}IsGood(){return this.KeepAlive(),null!==this.shader}KeepAlive(){for(var e=this.GetResources(),t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(e=[]){return this.effectRes&&!e.includes(this.effectRes)&&e.push(this.effectRes),this.PerChild(t=>{t.struct.GetResources&&t.struct.GetResources(e)}),e}OnResPrepared(e){if(this.effectRes!==e)return!1;this.effectRes=e,this.shader=null;try{this.shader=e.GetShader(this.options),this.BindParameters(),this.EmitEvent(F.Tw2Resource.Event.RES_PREPARED,this,e),e.UnregisterNotification(this)}catch(t){e.OnError(t)}return!0}OnResEvent(e,t){return F.Tw2Resource.parentOnResEvent(this,"effectRes",e,t)}SetTechniquePassStateOverride(e,t,r,i){this.techniques[e]||(this.techniques[e]=[]),this.techniques[e][t]||(this.techniques[e][t]={state:[]}),this.techniques[e][t].state||(this.techniques[e][t].state=[]);var n=this.techniques[e][t].state,a=n.find(e=>e.state===r);a?a.value=i:n.push({state:r,value:i})}GetTechniquePassStateOverrides(e,t){return e in this.techniques&&this.techniques[e][t]&&this.techniques[e][t].state?this.techniques[e][t].state:null}UnBindParameters(){for(var e in this.techniques)if(this.techniques.hasOwnProperty(e))for(var t=this.techniques[e],r=0;r<t.length;++r)if(t[r].stages){for(var i=0;i<t[r].stages.length;++i)for(var n=0;n<t[r].stages[i].reroutedParameters.length;++n)t[r].stages[i].reroutedParameters[n].Unbind();t[r].stages.splice(0)}for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&(this.parameters[a].usedByCurrentEffect=!1)}BindParameters(){if(this.UnBindParameters(),!this.IsGood())return!1;for(var t in this.parameters)this.parameters.hasOwnProperty(t)&&(this.parameters[t].usedByCurrentEffect=!1,this.parameters[t]instanceof D.Tw2TextureParameter?this.parameters[t].usedByCurrentEffect=this.shader.HasTexture(t):this.parameters[t].usedByCurrentEffect=this.shader.HasConstant(t));for(var r in this.shader.techniques)if(this.shader.techniques.hasOwnProperty(r)){for(var i=this.shader.techniques[r],n=[],a=0;a<i.passes.length;++a){for(var o={state:this.GetTechniquePassStateOverrides(r,a),stages:[]},s=0;s<i.passes[a].stages.length;++s){var l=i.passes[a].stages[s],u={};u.constantBuffer=new Float32Array(l.constantSize),u.reroutedParameters=[],u.parameters=[],u.textures=[],u.constantBuffer.set(l.constantValues);for(var c=0;c<l.constants.length;++c){var f=l.constants[c],{name:d,type:h}=f;if(!e.ConstantIgnore.includes(d)){if(d in this.parameters){var m=this.parameters[d];m.Bind(u.constantBuffer,f.offset,f.size)?u.reroutedParameters.push(m):u.parameters.push({parameter:m,constantBuffer:u.constantBuffer,offset:f.offset,size:f.size})}else if(C.tw2.HasVariable(d))u.parameters.push({parameter:C.tw2.GetVariable(d),constantBuffer:u.constantBuffer,offset:f.offset,size:f.size});else if(f.isAutoregister&&h){var b=C.tw2.CreateVariable(d,void 0,h);b&&u.parameters.push({parameter:b,constantBuffer:u.constantBuffer,offset:f.offset,size:f.size})}else if(this.autoParameter&&1===f.elements){var p=u.constantBuffer.subarray(f.offset,f.offset+f.size);0===p.length?p=void 0:1===p.length&&(p=p[0]);var v=C.tw2.CreateVariable(d,p,h);v&&(this.parameters[d]=v,v.Bind(u.constantBuffer,f.offset,f.size)?u.reroutedParameters.push(v):u.parameter.push({parameter:v,constantBuffer:u.constantBuffer,offset:f.offset,size:f.size}))}if(d in this.parameters&&this.shader&&d in this.shader.annotations)try{this.parameters[d].annotation=this.shader.annotations[d]}catch(e){}}}for(var g=0;g<l.textures.length;++g){var y=l.textures[g].name,w=null;if(y in this.parameters)(w=this.parameters[y]).isUsedByCurrentTechnique=!0;else if(C.tw2.HasVariable(y))w=C.tw2.GetVariable(y);else if(l.textures[g].isAutoregister)w=C.tw2.CreateVariable(y,void 0,D.Tw2TextureParameter);else{if(!this.autoParameter)continue;w=this.parameters[y]=new D.Tw2TextureParameter(y)}for(var _={parameter:w,slot:l.textures[g].registerIndex,sampler:null},E=0;E<l.samplers.length;++E)if(l.samplers[E].registerIndex===_.slot){l.samplers[E].name in this.samplerOverrides?_.sampler=this.samplerOverrides[l.samplers[E].name].GetSampler(C.device,l.samplers[E]):_.sampler=l.samplers[E];break}0===s&&(_.slot+=12),u.textures.push(_)}o.stages.push(u)}n.push(o)}this.techniques[r]=n}return C.device.effectObserver&&C.device.effectObserver.OnEffectChanged(this),this.autoParameter&&(this.parameters.objectId&&(this.parameters.objectId.x=this._id),this.parameters.Override&&(this.parameters.Override.y=this._id)),this.autoParameter=!1,!0}ApplyPass(e,t){if(this.IsGood()&&e in this.techniques&&!(t>=this.techniques[e].length)){this.shader.ApplyPass(e,t,this.techniques[e][t].state);for(var r=this.techniques[e][t],i=this.shader.techniques[e].passes[t],n=C.device,a=n.gl,o=n.IsAlphaTestEnabled()&&i.shadowShaderProgram?i.shadowShaderProgram:i.shaderProgram,s=0;s<2;++s){for(var l=r.stages[s],u=0;u<l.parameters.length;++u){var c=l.parameters[u];c.parameter.Apply(c.constantBuffer,c.offset,c.size)}for(var f=0;f<l.textures.length;++f){var d=l.textures[f];d.parameter.Apply(d.slot,d.sampler,o.volumeSlices[d.sampler.registerIndex])}}var h=o.constantBufferHandles;h[0]&&a.uniform4fv(h[0],r.stages[0].constantBuffer),h[7]&&a.uniform4fv(h[7],r.stages[1].constantBuffer),n.perFrameVSData&&h[1]&&a.uniform4fv(h[1],n.perFrameVSData.data),n.perFramePSData&&h[2]&&a.uniform4fv(h[2],n.perFramePSData.data);var m=n.perObjectData;m&&(m.vs&&h[3]&&a.uniform4fv(h[3],m.vs.data),m.ps&&h[4]&&a.uniform4fv(h[4],m.ps.data),m.ffe&&h[5]&&a.uniform4fv(h[5],m.ffe.data)),n.perFrameCustomVSData&&h[8]&&a.uniform4fv(h[8],n.perFrameCustomVSData.data),n.perFrameCustomPSData&&h[9]&&a.uniform4fv(h[9],n.perFrameCustomPSData.data)}}GetPassCount(e){return null!==this.shader&&e in this.techniques?this.techniques[e].length:0}GetPassInput(e,t){return null===this.shader||!(e in this.techniques)||t>=this.techniques[e].length?null:C.device.IsAlphaTestEnabled()&&this.shader.techniques[e].passes[t].shadowShaderProgram?this.shader.techniques[e].passes[t].shadowShaderProgram.input:this.shader.techniques[e].passes[t].shaderProgram.input}Render(e,t=this.defaultTechnique){for(var r=this.GetPassCount(t),i=0;i<r;++i)this.ApplyPass(t,i),e(this,i)}GetTextures(t={}){return e.getParameterObject(this.parameters,t,!0,!1,!0)}GetParameters(t={}){return e.getParameterObject(this.parameters,t,!1,!0,!0)}GetOverrides(t={}){return e.getParameterObject(this.parameters,t,!0,!0,!1)}SetTextures(t={},r){var i=e.setParameterObject(this.parameters,t,!0,!1,!0);return i&&!r&&this.UpdateValues(),i}SetParameters(t={},r){var i=e.setParameterObject(this.parameters,t);return i&&!r&&this.UpdateValues(),i}SetOverrides(t={},r){var i=e.setParameterObject(this.parameters,e.getNormalizedOverrides(t),!0,!0,!1);return i&&!r&&this.UpdateValues(),i}PopulateParameters(){return this.autoParameter=!0,this.BindParameters()}PurgeUnusedParameters(e={}){for(var t in this.parameters)this.parameters.hasOwnProperty(t)&&(this.parameters[t].usedByCurrentEffect||(e[t]=this.parameters[t],Reflect.deleteProperty(this.parameters,t)));return e}PerChild(e,t){var r=super.PerChild(e,t);if(void 0!==r)return r;var i=this.parameters;for(var n in i)if(i.hasOwnProperty(n)){var a=e({struct:i[n],parent:i,key:n,path:"/parameters/".concat(n)});if(void 0!==a)return a}}static onListener(e,t,r,i){return F.Tw2Resource.parentOnListener(e,"effectRes",t,r,i)}static set(e,t,r={}){if(!t)return!1;var{parameters:i,textures:n,overrides:a,options:o,effectFilePath:s=""}=t,l=Object(M.assignIfExists)(e,t,["name","display","autoParameter"]);return i&&e.SetParameters(i,!0)&&(l=!0),a&&e.SetOverrides(a,!0)&&(l=!0),n&&e.SetTextures(n,!0)&&(l=!0),o&&(e.options=Object.assign(o),e.effectRes&&(e.shader=e.effectRes.GetShader(o)),l=!0),s&&e.effectFilePath!==s&&(e.effectFilePath=s.toLowerCase(),l=!0),l&&!r.skipUpdate&&e.UpdateValues(r),l}static get(e,t={}){return Object(M.assignIfExists)(t,e,["name","display","effectFilePath"]),t.parameters=e.GetParameters(),t.textures=e.GetTextures(),t.overrides=e.GetOverrides(),t.options=Object.assign(e.options),t}static getParameterObject(e,t,r,i,n){for(var a in e)e.hasOwnProperty(a)&&(e[a]instanceof D.Tw2TextureParameter?(n||(t[a+"Sampler"]=e[a].GetOverrides()||null),i||(t[a]=e[a].GetValue())):r||(t[a]=e[a].GetValue([])));return t}static getNormalizedOverrides(e={}){var t={};for(var r in e)e.hasOwnProperty(r)&&(r.indexOf("Sampler")!==r.length-7?t[r+"Sampler"]=e[r]:t[r]=e[r]);return t}static setParameterObject(e,t,r,i,n){var a=!1;for(var o in t)if(t.hasOwnProperty(o)&&void 0!==t[o]){var s=t[o],l=!1;if((Object(M.isPlain)(s)||o.includes("Sampler")&&o.lastIndexOf("Sampler")===o.length-7)&&(o=o.replace("Sampler",""),l=!0),o in e)e[o]instanceof D.Tw2TextureParameter?l?n||(null===s?(e[o].RemoveOverrides(),a=!0):e[o].SetOverrides(s)&&(a=!0)):i||(null===s?(e[o].Destroy(),Reflect.delete(e,o),a=!0):!i&&e[o].SetValue(s)&&(a=!0)):r||(null===s?(e[o].Destroy(),Reflect.delete(e,o),a=!0):e[o].SetValue(s)&&(a=!0));else if(null!==s)if(l)n||(e[o]=new D.Tw2TextureParameter(o),e[o].SetOverrides(s),a=!0);else{var u=C.tw2.CreateVariable(o,s);u instanceof D.Tw2TextureParameter?!i&&u&&(e[o]=u,a=!0):r||(e[o]=u,a=!0)}}return a}},O.ConstantIgnore=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"],O.blackReaders={parameters:Object(L.fromList)({key:"name"}),options:Object(L.fromList)({key:"name",value:"value",struct:class{constructor(){this.name="",this.value=""}static blackStruct(e){var t=new this;return t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.value=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t}}}),resources:Object(L.fromList)({key:"name",reroute:"parameters"}),constParameters:Object(L.fromList)({key:"name",reroute:"parameters",struct:class{static blackStruct(e){var t=new I.Tw2Vector4Parameter;return Object.defineProperty(t,"isConstant",{value:!0,writable:!1}),t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.SetValue(e.ReadF32Array(4)),t}}})},w=B((y=A).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=B(y.prototype,"effectFilePath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=B(y.prototype,"effectRes",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=B(y.prototype,"techniques",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=B(y.prototype,"samplerOverrides",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),j=B(y.prototype,"options",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),R=B(y.prototype,"shader",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=B(y.prototype,"autoParameter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=B(y.prototype,"stateOverride",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=B(y.prototype,"defaultTechnique",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Main"}}),g=y))||g)||g)},"./core/mesh/Tw2InstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMesh",(function(){return ee}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./global/index.js"),K=r("./global/math/index.js"),X=r("./core/batch/index.js"),Q=r("./core/mesh/Tw2Mesh.js"),Z=r("./global/constant/index.js");function J(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function $(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ee=(i=W.meta.type("Tw2InstancedMesh","Tr2InstancedMesh"),n=W.meta.string,a=W.meta.boolean,o=W.meta.list("Tw2MeshArea"),s=W.meta.struct(),l=W.meta.list("Tw2MeshArea"),u=W.meta.notImplemented,c=W.meta.list("Tw2MeshArea"),f=W.meta.notImplemented,d=W.meta.list("Tw2MeshArea"),h=W.meta.path,m=W.meta.path,b=W.meta.struct(),p=W.meta.uint,v=W.meta.vector3,g=W.meta.notImplemented,y=W.meta.uint,w=W.meta.vector3,_=W.meta.list("Tw2MeshArea"),E=W.meta.list("Tw2MeshArea"),T=W.meta.list("Tw2MeshArea"),S=W.meta.plain,i((q=class e extends W.meta.Model{constructor(...e){super(...e),J(this,"name",P,this),J(this,"display",x,this),J(this,"additiveAreas",z,this),J(this,"boundsMethod",O,this),J(this,"decalAreas",A,this),J(this,"depthAreas",M,this),J(this,"distortionAreas",C,this),J(this,"geometryResPath",D,this),J(this,"instanceGeometryResPath",I,this),J(this,"instanceGeometryResource",L,this),J(this,"instanceMeshIndex",F,this),J(this,"maxBounds",G,this),J(this,"maxInstanceSize",B,this),J(this,"minBounds",N,this),J(this,"opaqueAreas",k,this),J(this,"pickableAreas",U,this),J(this,"transparentAreas",V,this),J(this,"visible",H,this),this._geometryResource=null}get geometryResource(){return this._geometryResource}set geometryResource(e){this._geometryResource=e}Initialize(){""!==this.geometryResPath&&(this._geometryResource=Y.tw2.GetResource(this.geometryResPath)),""!==this.instanceGeometryResPath&&(this.instanceGeometryResource=Y.tw2.GetResource(this.instanceGeometryResPath))}FindParameters(e,t=[]){Object(W.isString)(e)&&(e={name:e});var{name:r,areaName:i,areaType:n}=e,a=e=>{if(!n||n===e)for(var a=this[e]||[],o=0;o<a.length;o++)if(!i||a[o].name===i){var s=a[o].FindParameter(r,t);s&&!t.includes(s)&&t.push(s)}};return a("transparentAreas"),a("pickableAreas"),a("opaqueAreas"),a("distortionAreas"),a("depthAreas"),a("additiveAreas"),a("opaquePrepassAreas"),a("depthNormalAreas"),t}FindMeshAreaByTypeAndIndex(e,t,r){return Q.Tw2Mesh.FindMeshAreaByTypeAndIndex(this,e,t,r)}IsGood(){var e=this.instanceGeometryResource,t=this._geometryResource&&this._geometryResource.IsGood(),r=!!e&&(!e.IsGood||e.IsGood());return t&&r}GetGeometryRes(){return this._geometryResource}GetResources(e=[]){this._geometryResource&&!e.includes(this._geometryResource)&&e.push(this._geometryResource),this.instanceGeometryResource&&"GetResources"in this.instanceGeometryResource&&this.instanceGeometryResource.GetResources(e);var t=W.perArrayChild;return t(this.additiveAreas,"GetResources",e),t(this.decalAreas,"GetResources",e),t(this.depthAreas,"GetResources",e),t(this.distortionAreas,"GetResources",e),t(this.opaqueAreas,"GetResources",e),t(this.pickableAreas,"GetResources",e),t(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;var i,n=this.constructor.GetAreaBatches;switch(e){case Z.RM_ADDITIVE:this.visible.additiveAreas&&(i=this.additiveAreas);break;case Z.RM_DECAL:this.visible.decalAreas&&(i=this.opaqueAreas);break;case Z.RM_DEPTH:this.visible.depthAreas&&(i=this.depthAreas);break;case Z.RM_DISTORTION:this.visible.distortionAreas&&(i=this.distortionAreas);break;case Z.RM_OPAQUE:this.visible.opaqueAreas&&(i=this.opaqueAreas);break;case Z.RM_PICKABLE:this.visible.pickableAreas&&(i=this.pickableAreas);break;case Z.RM_TRANSPARENT:this.visible.transparentAreas&&(i=this.transparentAreas)}i&&n(this,i,e,t,r)}RenderAreas(e,t,r,i,n){if(this.IsGood()){var a=this.instanceGeometryResource.GetInstanceBuffer(this.instanceMeshIndex);a&&this._geometryResource.RenderAreasInstanced(e,t,r,i,n,a,this.instanceGeometryResource.GetInstanceDeclaration(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceStride(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceCount(this.instanceMeshIndex))}}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static from(t,r){var i=new e;if(i.meshIndex=Object(W.get)(r,"index",0),t){Object(W.assignIfExists)(i,t,["name","display","geometryResPath","instanceGeometryResPath","instanceMeshIndex"]);var n=["additiveAreas","decalAreas","depthAreas","distortionAreas","opaqueAreas","pickableAreas","transparentAreas"];Object(W.assignIfExists)(i.visible,t.visible,n),Q.Tw2Mesh.createAreaIfExists(i,t,n)}return r&&r.skipUpdate||i.Initialize(),i}static GetAreaBatches(e,t,r,i,n){for(var a=0;a<t.length;++a){var o=t[a];if(o.effect&&o.display){var s=new X.Tw2InstancedMeshBatch;s.renderMode=r,s.perObjectData=n,s.instanceMesh=e,s.meshIx=o.meshIndex,s.start=o.index,s.count=o.count,s.effect=o.effect,i.Commit(s)}}}},P=$((R=q).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=$(R.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=$(R.prototype,"additiveAreas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=$(R.prototype,"boundsMethod",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=$(R.prototype,"decalAreas",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=$(R.prototype,"depthAreas",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=$(R.prototype,"distortionAreas",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=$(R.prototype,"geometryResPath",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=$(R.prototype,"instanceGeometryResPath",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=$(R.prototype,"instanceGeometryResource",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=$(R.prototype,"instanceMeshIndex",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=$(R.prototype,"maxBounds",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K.vec3.create()}}),B=$(R.prototype,"maxInstanceSize",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=$(R.prototype,"minBounds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K.vec3.create()}}),k=$(R.prototype,"opaqueAreas",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=$(R.prototype,"pickableAreas",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=$(R.prototype,"transparentAreas",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=$(R.prototype,"visible",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{additiveAreas:!0,decalAreas:!0,depthAreas:!0,distortionAreas:!0,opaqueAreas:!0,pickableAreas:!0,transparentAreas:!0}}}),j=R))||j)},"./core/mesh/Tw2Mesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Mesh",(function(){return Q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q=r("./global/utils/index.js"),W=r("./global/index.js"),Y=r("./global/constant/index.js");function K(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function X(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Q=(i=q.meta.type("Tw2Mesh","Tr2Mesh"),n=q.meta.string,a=q.meta.list("Tw2MeshArea"),o=q.meta.list("Tw2MeshArea"),s=q.meta.notImplemented,l=q.meta.boolean,u=q.meta.notImplemented,c=q.meta.list("Tw2MeshArea"),f=q.meta.notImplemented,d=q.meta.list("Tw2MeshArea"),h=q.meta.boolean,m=q.meta.notImplemented,b=q.meta.list("Tw2MeshArea"),p=q.meta.path,v=q.meta.uint,g=q.meta.list("Tw2MeshArea"),y=q.meta.notImplemented,w=q.meta.list("Tw2MeshArea"),_=q.meta.list("Tw2MeshArea"),E=q.meta.list("Tw2MeshArea"),T=q.meta.plain,S=q.meta.struct("Tw2GeometryRes"),i((H=V=class e extends q.meta.Model{constructor(...e){super(...e),K(this,"name",P,this),K(this,"additiveAreas",x,this),K(this,"decalAreas",z,this),K(this,"deferGeometryLoad",O,this),K(this,"depthAreas",A,this),K(this,"depthNormalAreas",M,this),K(this,"display",C,this),K(this,"distortionAreas",D,this),K(this,"geometryResPath",I,this),K(this,"meshIndex",L,this),K(this,"opaqueAreas",F,this),K(this,"opaquePrepassAreas",G,this),K(this,"pickableAreas",B,this),K(this,"transparentAreas",N,this),K(this,"visible",k,this),K(this,"_geometryResource",U,this)}get geometryResource(){return this._geometryResource}set geometryResource(e){this._geometryResource=e}Initialize(){""!==this.geometryResPath&&(this._geometryResource=W.tw2.GetResource(this.geometryResPath))}FindParameters(e,t=[]){Object(q.isString)(e)&&(e={name:e});var{name:r,areaName:i,areaType:n}=e,a=e=>{if(!n||n===e)for(var a=this[e]||[],o=0;o<a.length;o++)if(!i||a[o].name===i){var s=a[o].FindParameter(r,t);s&&!t.includes(s)&&t.push(s)}};return a("transparentAreas"),a("pickableAreas"),a("opaqueAreas"),a("distortionAreas"),a("depthAreas"),a("additiveAreas"),a("opaquePrepassAreas"),a("depthNormalAreas"),t}FindMeshAreaByTypeAndIndex(t,r,i){return e.FindMeshAreaByTypeAndIndex(this,t,r,i)}static FindMeshAreaByTypeAndIndex(e,t,r,i=0){t in this.AreaType&&(t=e[this.AreaType[t]]);var n=e[t];if(!Object(q.isArray)(n))throw new ReferenceError("Invalid mesh area type: ".concat(t));if(n)for(var a=0;a<n.length;a++)if(n[a].index===r&&n[a].meshIndex===i)return n[a]}IsGood(){return this._geometryResource&&this._geometryResource.IsGood()}GetGeometryRes(){return this._geometryResource}GetResources(e=[]){this._geometryResource&&!e.includes(this._geometryResource)&&e.push(this._geometryResource);var t=q.perArrayChild;return t(this.additiveAreas,"GetResources",e),t(this.decalAreas,"GetResources",e),t(this.depthAreas,"GetResources",e),t(this.distortionAreas,"GetResources",e),t(this.opaqueAreas,"GetResources",e),t(this.pickableAreas,"GetResources",e),t(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;var i,n=this.constructor.GetAreaBatches;switch(e){case Y.RM_ADDITIVE:this.visible.additiveAreas&&(i=this.additiveAreas);break;case Y.RM_DECAL:this.visible.decalAreas&&(i=this.decalAreas);break;case Y.RM_DEPTH:this.visible.depthAreas&&(i=this.depthAreas);break;case Y.RM_DISTORTION:this.visible.distortionAreas&&(i=this.distortionAreas);break;case Y.RM_OPAQUE:this.visible.opaqueAreas&&(i=this.opaqueAreas);break;case Y.RM_PICKABLE:this.visible.pickableAreas&&(i=this.pickableAreas);break;case Y.RM_TRANSPARENT:this.visible.transparentAreas&&(i=this.transparentAreas)}i&&n(this,i,e,t,r)}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.depthNormalAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.opaquePrepassAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static GetAreaBatches(e,t,r,i,n){for(var a=0;a<t.length;++a){var o=t[a];if(o.effect&&o.display){var s=new o.constructor.batchType;s.renderMode=r,s.perObjectData=n,s.geometryRes=e._geometryResource,s.meshIx=o.meshIndex,s.start=o.index,s.count=o.count,s.effect=o.effect,i.Commit(s)}}}static createAreaIfExists(e,t,r){r=Object(q.toArray)(r);for(var i=0;i<r.length;i++){var n=r[i];if(n in t&&n in e)for(var a=0;a<t[n].length;a++){var o=t[n][a].__type||"Tw2MeshArea",s=W.tw2.GetClass(o);e[n].push(s.from(t[n][a],{index:a}))}}}static from(t,r){var i=new e;if(i.index=Object(q.get)(r,"index",0),t){Object(q.assignIfExists)(i,t,["name","display","deferGeometryLoad","geometryResPath","meshIndex"]);var n=["additiveAreas","decalAreas","depthAreas","depthNormalAreas","distortionAreas","opaqueAreas","opaquePrepassAreas","pickableAreas","transparentAreas"];Object(q.assignIfExists)(i.visible,t.visible,n),this.createAreaIfExists(i,t,n)}return r&&r.skipUpdate||i.Initialize(),i}},V.AreaType={TRANSPARENT:"transparentAreas",PICKABLE:"pickableAreas",DISTORTION:"distortionAreas",DEPTH:"depthAreas",DEPTH_NORMAL:"depthNormalAreas",ADDITIVE:"additiveAreas",OPAQUE:"opaqueAreas",OPAQUE_PREPASS:"opaquePrepassAreas"},P=X((R=H).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=X(R.prototype,"additiveAreas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=X(R.prototype,"decalAreas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=X(R.prototype,"deferGeometryLoad",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=X(R.prototype,"depthAreas",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=X(R.prototype,"depthNormalAreas",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=X(R.prototype,"display",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=X(R.prototype,"distortionAreas",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=X(R.prototype,"geometryResPath",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=X(R.prototype,"meshIndex",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=X(R.prototype,"opaqueAreas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=X(R.prototype,"opaquePrepassAreas",[y,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=X(R.prototype,"pickableAreas",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=X(R.prototype,"transparentAreas",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=X(R.prototype,"visible",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{additiveAreas:!0,decalAreas:!0,depthAreas:!0,depthNormalAreas:!0,distortionAreas:!0,opaqueAreas:!0,opaquePrepassAreas:!0,pickableAreas:!0,transparentAreas:!0}}}),U=X(R.prototype,"_geometryResource",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=R))||j)},"./core/mesh/Tw2MeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshArea",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./core/batch/index.js"),x=r("./global/utils/index.js"),z=r("./core/mesh/Tw2Effect.js");function O(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var M=(i=x.meta.type("Tw2MeshArea","Tr2MeshArea"),n=x.meta.stage(1),a=x.meta.string,o=x.meta.boolean,s=x.meta.uint,l=x.meta.struct("Tw2Effect"),u=x.meta.uint,c=x.meta.notImplemented,f=x.meta.boolean,d=x.meta.notImplemented,h=x.meta.boolean,m=x.meta.uint,i(b=n((R=j=class extends x.meta.Model{constructor(...e){super(...e),O(this,"name",v,this),O(this,"display",g,this),O(this,"count",y,this),O(this,"effect",w,this),O(this,"index",_,this),O(this,"reversed",E,this),O(this,"useSHLighting",T,this),O(this,"meshIndex",S,this)}GetResources(e=[]){return this.effect?this.effect.GetResources(e):e}FindParameter(e){return this.effect?this.effect.FindParameter(e):null}static from(e,t){var r=new this;return Object(x.assignIfExists)(r,t,"index"),e&&(Object(x.assignIfExists)(r,e,["name","display","count","index","reversed","useSHLighting"]),e.effect&&(r.effect=z.Tw2Effect.from(e.effect))),r}},j.batchType=P.Tw2GeometryBatch,v=A((p=R).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=A(p.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=A(p.prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=A(p.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A(p.prototype,"index",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=A(p.prototype,"reversed",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=A(p.prototype,"useSHLighting",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=A(p.prototype,"meshIndex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b)||b)},"./core/mesh/Tw2MeshLineArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshLineArea",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js"),R=r("./core/batch/index.js"),P=r("./core/mesh/Tw2MeshArea.js");function x(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O=(i=j.meta.type("Tw2MeshLineArea"),n=j.meta.stage(1),a=j.meta.string,o=j.meta.boolean,s=j.meta.uint,l=j.meta.struct("Tw2Effect"),u=j.meta.uint,c=j.meta.notImplemented,f=j.meta.boolean,d=j.meta.notImplemented,h=j.meta.boolean,i(m=n((S=T=class extends P.Tw2MeshArea{constructor(...e){super(...e),x(this,"name",p,this),x(this,"display",v,this),x(this,"count",g,this),x(this,"effect",y,this),x(this,"index",w,this),x(this,"reversed",_,this),x(this,"useSHLighting",E,this)}},T.batchType=R.Tw2GeometryLineBatch,p=z((b=S).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=z(b.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=z(b.prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=z(b.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z(b.prototype,"index",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=z(b.prototype,"reversed",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=z(b.prototype,"useSHLighting",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=b))||m)||m)},"./core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/mesh/Tw2Effect.js");r.d(t,"Tw2Effect",(function(){return i.Tw2Effect}));var n=r("./core/mesh/Tw2InstancedMesh.js");r.d(t,"Tw2InstancedMesh",(function(){return n.Tw2InstancedMesh}));var a=r("./core/mesh/Tw2Mesh.js");r.d(t,"Tw2Mesh",(function(){return a.Tw2Mesh}));var o=r("./core/mesh/Tw2MeshArea.js");r.d(t,"Tw2MeshArea",(function(){return o.Tw2MeshArea}));var s=r("./core/mesh/Tw2MeshLineArea.js");r.d(t,"Tw2MeshLineArea",(function(){return s.Tw2MeshLineArea}))},"./core/model/Tw2Animation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Animation",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_=r("./global/utils/index.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=_.meta.type("Tw2Animation"),n=_.meta.struct("Tw2GeometryAnimation"),a=_.meta.isPrivate,o=_.meta.float,s=_.meta.isPrivate,l=_.meta.float,u=_.meta.boolean,c=_.meta.list("Tw2TrackGroup"),f=_.meta.isPrivate,i((w=y=class e extends _.meta.Model{constructor(t){super(),E(this,"animationRes",m,this),E(this,"time",b,this),E(this,"timeScale",p,this),E(this,"cycle",v,this),E(this,"trackGroups",g,this),this._callback=null,this._controller=null,this._state=e.State.FINISHED,this._controller=t}get name(){return this.animationRes?this.animationRes.name:null}get duration(){return this.animationRes?this.animationRes.duration:0}get percent(){return this.animationRes?Math.min(this.time,this.duration)/this.duration:0}AddCallback(e=null){this._callback=e}UpdateCallback(){if(this._callback){var e=this._callback;e(this,this._controller)&&this._callback===e&&(this._callback=null)}}Play(t={}){var r=this.IsPaused(),{time:i=(r?this.time:0),cycle:n=this.cycle,timeScale:a=this.timeScale,callback:o,events:s,percent:l}=t;void 0!==l&&(i=this.duration*l),this.time=Math.max(Math.min(i,this.duration),0),this.timeScale=a,this.cycle=n,this._state=e.State.PLAYING,s&&this.add(s),void 0!==o&&this.AddCallback(o),r?this.EmitEvent("unpause",{animation:this,controller:this._controller}):this.EmitEvent("play",{animation:this,controller:this._controller})}Pause(){this.IsPlaying()&&(this._state=e.State.PAUSED,this.EmitEvent("pause",{animation:this,controller:this._controller}))}Stop(){this.IsFinished()||(this._state=e.State.FINISHED,this.time=this.duration,this.EmitEvent("end",{animation:this,controller:this._controller}),this.UpdateCallback())}IsGood(){return!!this.animationRes}IsPlaying(){return this._state===e.State.PLAYING||this._state===e.State.CYCLING}IsPaused(){return this._state===e.State.PAUSED}IsFinished(){return this._state===e.State.FINISHED}Update(t){return!this.IsFinished()&&(this.IsPaused()||(this.time+=t*this.timeScale,this.time>=this.duration&&(this.cycle?(this._state=e.State.CYCLING,this.time=this.time%this.duration,this.EmitEvent("cycle",{animation:this,controller:this._controller}),this.UpdateCallback()):this.Stop()),this.EmitEvent("playing",{animation:this,controller:this._controller})),!0)}},y.State={PAUSED:0,PLAYING:1,CYCLING:2,FINISHED:3},m=T((h=w).prototype,"animationRes",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=T(h.prototype,"time",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=T(h.prototype,"timeScale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=T(h.prototype,"cycle",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=T(h.prototype,"trackGroups",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=h))||d)},"./core/model/Tw2AnimationController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2AnimationController",(function(){return I}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=r("./global/utils/index.js"),S=r("./global/math/index.js"),j=r("./core/resource/index.js"),R=r("./core/model/Tw2Animation.js"),P=r("./core/model/Tw2Bone.js"),x=r("./core/model/Tw2BoneBinding.js"),z=r("./core/model/Tw2Model.js"),O=r("./core/model/Tw2Track.js"),A=r("./core/model/Tw2TrackGroup.js"),M=r("./core/model/Tw2MeshBinding.js");function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var I=(i=T.meta.type("Tw2AnimationController"),n=T.meta.todo("Handle rebuilding bounds in update function"),a=T.meta.list("Tw2GeometryRes"),o=T.meta.isPrivate,s=T.meta.list("Tw2Model"),l=T.meta.isPrivate,u=T.meta.list("Tw2Animation"),c=T.meta.isPrivate,f=T.meta.list("Tw2MeshBinding"),d=T.meta.isPrivate,h=T.meta.boolean,i(m=n((E=_=class e extends T.meta.Model{constructor(e){super(),C(this,"geometryResources",p,this),C(this,"models",v,this),C(this,"animations",g,this),C(this,"meshBindings",y,this),C(this,"update",w,this),this._isLoaded=!1,this._isPlaying=!1,this._boundsDirty=!1,this._pendingCommands=[],e&&this.SetGeometryResource(e)}OnEvent(e,t,r,i){return"loaded"===e&&this.IsLoaded()&&(t.call(r,{controller:this}),i)?this:super.OnEvent(e,t,r,i)}IsGood(){for(var e=this.geometryResources.length>0,t=0;t<this.geometryResources.length;t++)this.geometryResources[t]&&this.geometryResources[t].IsGood()||(e=!1);if(!e||!this.animations.length)return!1;for(var r=0;r<this.animations.length;r++)if(!this.animations[r].IsGood())return!1;return!0}IsPlaying(){return this._isPlaying}IsLoaded(){return this._isLoaded}GetAnimationsByName(e={}){if(!this.IsLoaded())return null;for(var t=0;t<this.animations.length;t++)e[this.animations[t].name]=this.animations[t];return e}GetAnimation(e){for(var t=0;t<this.animations.length;t++)if(this.animations[t].name===e)return this.animations[t];return null}PlayAnimation(e,t){if(0!==this.animations.length){var r=this.GetAnimation(e);r&&r.Play(t)}else this._pendingCommands.push({func:this.PlayAnimation,args:[e,t]})}GetPlayingAnimations(){for(var e=[],t=0;t<this.animations.length;t++)this.animations[t].IsPlaying()&&e.push(this.animations[t].name);return e}StopAnimation(e){if(0!==this.animations.length){e=Object(T.toArray)(e);for(var t=0;t<this.animations.length;++t)e.includes(this.animations[t].name)&&this.animations[t].Stop()}else this._pendingCommands.push({func:this.StopAnimation,args:e})}StopAllAnimations(){if(0!==this.animations.length)for(var e=0;e<this.animations.length;++e)this.animations[e].Stop();else this._pendingCommands.push({func:this.StopAllAnimations,args:null})}StopAllAnimationsExcept(e){if(0!==this.animations.length){e=Object(T.toArray)(e);for(var t=0;t<this.animations.length;++t)e.includes(this.animations[t].name)||this.animations[t].Stop()}else this._pendingCommands.push({func:this.StopAllAnimationsExcept,args:e})}HasGeometryResource(e){return-1!==this.geometryResources.indexOf(e)}SetGeometryResource(e){this.models.splice(0);for(var t=0;t<this.animations.length;t++){var r=this.animations[t];this.animations.splice(t,1),t--,this.EmitEvent("removed",{animation:r,controller:this}),r.OnDestroy()}this.meshBindings.splice(0);for(var i=0;i<this.geometryResources.length;++i)this.geometryResources[i].UnregisterNotification(this);this._isLoaded=!1,this.geometryResources.splice(0),e&&(this.geometryResources.push(e),e.RegisterNotification(this))}AddGeometryResource(e){this.geometryResources.includes(e)||(this.geometryResources.push(e),e.RegisterNotification(this))}ResetBoneTransforms(){for(var t=0;t<this.models.length;++t)for(var r=0;r<this.models[t].bones.length;++r){var i=this.models[t].bones[r],n=i.boneRes;S.mat4.copy(i.localTransform,n.localTransform),-1!==n.parentIndex?S.mat4.multiply(i.worldTransform,i.localTransform,this.models[t].bones[i.boneRes.parentIndex].worldTransform):S.mat4.set(i.worldTransform,i.localTransform),S.mat4.identity(i.offsetTransform)}for(var a=S.mat4.identity(e.global.mat4_0),o=0;o<this.meshBindings.length;++o)for(var s=0;s<this.meshBindings[o].meshIndex.length;++s)for(var l=0;16*l<this.meshBindings[o].meshIndex[s].length;++l)for(var u=0;u<16;++u)this.meshBindings[o].meshIndex[s][16*l+u]=a[u]}GetBoneMatrices(t,r){if(0===this.geometryResources.length)return new Float32Array;r||(r=this.geometryResources[0]);var i=e.FindMeshBindings(this,r);return i&&void 0!==i.meshIndex[t]?i.meshIndex[t]:new Float32Array}FindBoneForMesh(e,t){var r=this.FindModelForMesh(t);if(r)for(var i=0;i<r.bones.length;i++)if(r.bones[i].boneRes.name===e)return r.bones[i];return null}FindModelForMesh(e,t){if(0===this.geometryResources.length)return null;if(t||(t=this.geometryResources[0]),!t.IsGood())return null;for(var r=t.meshes[e],i=0;i<this.models.length;++i)for(;0<this.models[i].modelRes.meshBindings.length;++i)if(this.models[i].modelRes.meshBindings[0].mesh===r)return this.models[i];return null}GetResources(e=[]){for(var t=0;t<this.geometryResources.length;t++)e.includes(this.geometryResources[t])||e.push(this.geometryResources[t]);return e}OnResPrepared(t){if(t.UnregisterNotification(this),this.geometryResources.includes(t)){for(var r=0;r<this.geometryResources.length;++r)if(!this.geometryResources[r].IsGood())return;for(var i=0;i<this.geometryResources.length;++i)e.DoRebuildCachedData(this,this.geometryResources[i])}}Update(t){var r=this._isPlaying;if(this._isPlaying=!1,this.models&&this.update){for(var i=0;i<this.geometryResources.length;++i)this.geometryResources[i].KeepAlive();for(var n=e.global,a=n.mat4_0,o=n.quat_0,s=n.vec3_0,l=n.mat3_0,u=0;u<this.animations.length;++u){var c=this.animations[u];if(c.Update(t)){this._isPlaying=!0;for(var f=c.animationRes,d=0;d<c.trackGroups.length;++d)for(var h=0;h<c.trackGroups[d].transformTracks.length;++h){var m=c.trackGroups[d].transformTracks[h];m.trackRes.position?S.curve.evaluate(m.trackRes.position,c.time,s,c.cycle,f.duration):s[0]=s[1]=s[2]=0,m.trackRes.orientation?(S.curve.evaluate(m.trackRes.orientation,c.time,o,c.cycle,f.duration),S.quat.normalize(o,o)):S.quat.identity(o),m.trackRes.scaleShear?S.curve.evaluate(m.trackRes.scaleShear,c.time,l,c.cycle,f.duration):S.mat3.identity(l),S.mat4.fromMat3(m.bone.localTransform,l),S.mat4.multiply(m.bone.localTransform,m.bone.localTransform,S.mat4.fromQuat(a,o)),m.bone.localTransform[12]=s[0],m.bone.localTransform[13]=s[1],m.bone.localTransform[14]=s[2]}}}for(var b=0;b<this.models.length;++b)for(var p=0;p<this.models[b].bones.length;++p){var v=this.models[b].bones[p];-1!==v.boneRes.parentIndex?S.mat4.multiply(v.worldTransform,this.models[b].bones[v.boneRes.parentIndex].worldTransform,v.localTransform):S.mat4.copy(v.worldTransform,v.localTransform),S.mat4.multiply(v.offsetTransform,v.worldTransform,v.boneRes.worldTransformInv);for(var g=0;g<v.bindingArrays.length;++g){var y=v.bindingArrays[g],w=v.offsetTransform;y.array[y.offset+0]=w[0],y.array[y.offset+1]=w[4],y.array[y.offset+2]=w[8],y.array[y.offset+3]=w[12],y.array[y.offset+4]=w[1],y.array[y.offset+5]=w[5],y.array[y.offset+6]=w[9],y.array[y.offset+7]=w[13],y.array[y.offset+8]=w[2],y.array[y.offset+9]=w[6],y.array[y.offset+10]=w[10],y.array[y.offset+11]=w[14]}}(this._isPlaying||this._isPlaying!==r)&&(this._boundsDirty=!0)}}RenderDebugInfo(e){for(var t=0;t<this.models.length;++t)for(var r=0;r<this.models[t].bones.length;++r){var i=this.models[t].bones[r];if(i.boneRes.parentIndex>=0){var n=this.models[t].bones[i.boneRes.parentIndex];e.AddLine([i.worldTransform[12],i.worldTransform[13],i.worldTransform[14]],[n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]])}}}static AddAnimationsFromRes(e,t){for(var r=0;r<t.animations.length;++r){for(var i=null,n=void 0,a=0;a<e.animations.length;++a)if(e.animations[a].animationRes===t.animations[r]){i=e.animations[r];break}i||((i=new R.Tw2Animation(e)).animationRes=t.animations[r],e.animations.push(i),n=!0);for(var o=0;o<i.animationRes.trackGroups.length;++o){for(var s=!1,l=0;l<i.trackGroups.length;++l)if(i.trackGroups[l].trackGroupRes===i.animationRes.trackGroups[o]){s=!0;break}if(!s){for(var u=null,c=0;c<e.models.length;++c)if(e.models[c].modelRes.name===i.animationRes.trackGroups[o].name){u=e.models[c];break}if(null!==u){var f=new A.Tw2TrackGroup;f.trackGroupRes=i.animationRes.trackGroups[o];for(var d=0;d<f.trackGroupRes.transformTracks.length;++d)for(var h=0;h<u.bones.length;++h)if(u.bones[h].boneRes.name===f.trackGroupRes.transformTracks[d].name){var m=new O.Tw2Track;m.trackRes=f.trackGroupRes.transformTracks[d],m.bone=u.bones[h],f.transformTracks.push(m);break}i.trackGroups.push(f)}}}n&&e.EmitEvent("added",{controller:e,animation:i})}}static AddModel(e,t){for(var r=0;r<e.models.length;++r)if(e.models[r].modelRes.name===t.name)return null;var i=new z.Tw2Model;i.modelRes=t;var n=t.skeleton;if(null!==n)for(var a=0;a<n.bones.length;++a){var o=new P.Tw2Bone;o.boneRes=n.bones[a],i.bones.push(o),i.bonesByName[o.boneRes.name]=o}return e.models.push(i),i}static FindMeshBindings(e,t){for(var r=0;r<e.meshBindings.length;++r)if(e.meshBindings[r].resource===t)return e.meshBindings[r];return null}static DoRebuildCachedData(t,r){if(r.meshes.length)for(var i=0;i<r.models.length;++i)e.AddModel(t,r.models[i]);for(var n=0;n<t.geometryResources.length;++n)this.AddAnimationsFromRes(t,t.geometryResources[n]);if(0===r.models.length&&t.geometryResources[0].models[0]){for(var a=0;a<r.meshes.length;++a)j.Tw2GeometryRes.BindMeshToModel(r.meshes[a],t.geometryResources[0].models[0],r);r.models.push(t.geometryResources[0].models[0])}for(var o=0;o<r.models.length;++o){for(var s=null,l=0;l<t.models.length;++l)if(t.models[l].modelRes.name===r.models[o].name){s=t.models[l];break}if(null!==s)for(var u=0;u<r.models[o].meshBindings.length;++u){var c=r.meshes.indexOf(r.models[o].meshBindings[u].mesh),f=e.FindMeshBindings(t,r);null===f&&((f=new M.Tw2MeshBinding).resource=r,t.meshBindings.push(f)),f.meshIndex[c]=new Float32Array(12*r.models[o].meshBindings[u].bones.length);for(var d=0;d<r.models[o].meshBindings[u].bones.length;++d)for(var h=0;h<s.bones.length;++h)if(s.bones[h].boneRes.name===r.models[o].meshBindings[u].bones[d].name){var m=new x.Tw2BoneBinding;m.array=f.meshIndex[c],m.offset=12*d,s.bones[h].bindingArrays.push(m);break}}}if(r.meshes.length&&r.models.length&&t.ResetBoneTransforms(),t._isLoaded=!0,t.EmitEvent("loaded",{controller:t}),t.animations.length){if(t._pendingCommands.length)for(var b=0;b<t._pendingCommands.length;++b)t._pendingCommands[b].args?t._pendingCommands[b].func.apply(t,t._pendingCommands[b].args):t._pendingCommands[b].func.apply(t);t._pendingCommands.splice(0)}}},_.global={vec3_0:S.vec3.create(),quat_0:S.quat.create(),mat3_0:S.mat3.create(),mat4_0:S.mat4.create()},_.keys={primary:["update"]},p=D((b=E).prototype,"geometryResources",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=D(b.prototype,"models",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=D(b.prototype,"animations",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=D(b.prototype,"meshBindings",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=D(b.prototype,"update",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=b))||m)||m)},"./core/model/Tw2Bone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Bone",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.type("Tw2Bone"),n=p.meta.struct("Tw2GeometryBone"),a=p.meta.list("Tw2BoneBinding"),o=p.meta.matrix4,s=p.meta.matrix4,l=p.meta.matrix4,i((f=y((c=class{constructor(){g(this,"boneRes",f,this),g(this,"bindingArrays",d,this),g(this,"localTransform",h,this),g(this,"worldTransform",m,this),g(this,"offsetTransform",b,this)}}).prototype,"boneRes",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y(c.prototype,"bindingArrays",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=y(c.prototype,"localTransform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.mat4.create()}}),m=y(c.prototype,"worldTransform",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.mat4.create()}}),b=y(c.prototype,"offsetTransform",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.mat4.create()}}),u=c))||u)},"./core/model/Tw2BoneBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BoneBinding",(function(){return h}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");function f(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var h=(i=c.meta.type("Tw2BoneBinding"),n=c.meta.vector,a=c.meta.uint,i((l=d((s=class{constructor(){f(this,"array",l,this),f(this,"offset",u,this)}}).prototype,"array",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=d(s.prototype,"offset",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=s))||o)},"./core/model/Tw2MeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshBinding",(function(){return h}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");function f(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var h=(i=c.meta.type("Tw2MeshBinding"),n=c.meta.list("Float32Array"),a=c.meta.struct("Tw2GeometryRes"),i((l=d((s=class{constructor(){f(this,"meshIndex",l,this),f(this,"resource",u,this)}}).prototype,"meshIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d(s.prototype,"resource",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=s))||o)},"./core/model/Tw2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Model",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("Tw2Model"),n=h.meta.struct("Tw2GeometryModel"),a=h.meta.list("Tw2Bone"),o=h.meta.plain,s=h.meta.isPrivate,i((c=b((u=class{constructor(){m(this,"modelRes",c,this),m(this,"bones",f,this),m(this,"bonesByName",d,this)}}).prototype,"modelRes",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b(u.prototype,"bones",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=b(u.prototype,"bonesByName",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=u))||l)},"./core/model/Tw2Track.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Track",(function(){return h}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");function f(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var h=(i=c.meta.type("Tw2Track"),n=c.meta.struct("Tw2GeometryTransformTrack"),a=c.meta.struct("Tw2Bone"),i((l=d((s=class{constructor(){f(this,"trackRes",l,this),f(this,"bone",u,this)}}).prototype,"trackRes",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=d(s.prototype,"bone",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=s))||o)},"./core/model/Tw2TrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TrackGroup",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.type("Tw2TrackGroup"),n=d.meta.struct("Tw2GeometryTrackGroup"),a=d.meta.struct("Tw2GeometryModel"),o=d.meta.list("Tw2Track"),i((u=m((l=class{constructor(){h(this,"trackGroupRes",u,this),h(this,"model",c,this),h(this,"transformTracks",f,this)}}).prototype,"trackGroupRes",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=m(l.prototype,"model",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m(l.prototype,"transformTracks",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./core/model/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/model/Tw2Animation.js");r.d(t,"Tw2Animation",(function(){return i.Tw2Animation}));var n=r("./core/model/Tw2AnimationController.js");r.d(t,"Tw2AnimationController",(function(){return n.Tw2AnimationController}));var a=r("./core/model/Tw2Bone.js");r.d(t,"Tw2Bone",(function(){return a.Tw2Bone}));var o=r("./core/model/Tw2BoneBinding.js");r.d(t,"Tw2BoneBinding",(function(){return o.Tw2BoneBinding}));var s=r("./core/model/Tw2MeshBinding.js");r.d(t,"Tw2MeshBinding",(function(){return s.Tw2MeshBinding}));var l=r("./core/model/Tw2Model.js");r.d(t,"Tw2Model",(function(){return l.Tw2Model}));var u=r("./core/model/Tw2Track.js");r.d(t,"Tw2Track",(function(){return u.Tw2Track}));var c=r("./core/model/Tw2TrackGroup.js");r.d(t,"Tw2TrackGroup",(function(){return c.Tw2TrackGroup}))},"./core/parameter/Tw2FloatParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2FloatParameter",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./core/parameter/Tw2Parameter.js"),h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("Tw2FloatParameter","Tr2FloatParameter"),n=h.meta.string,a=h.meta.float,i((f=c=class extends d.Tw2Parameter{get x(){return this.value}set x(e){this.SetValue(e)}constructor(e="",t){super(),m(this,"name",l,this),m(this,"value",u,this),e&&(this.name=e),void 0!==t&&(this.value=Object(h.isArrayLike)(t)?t[0]:t)}SetValue(e,t){return!this.EqualsValue(e)&&(this.value=e,this.UpdateValues(t),!0)}GetValue(){return this.value}Apply(e,t,r){e[t]=this.value}OnValueChanged(){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}Bind(e,t,r){return!this._constantBuffer&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t),!0)}Unbind(){this._constantBuffer=null}EqualsValue(e){return this.value===e}static isValue(e){return Object(h.isNumber)(e)}},c.constantBufferSize=1,l=b((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=b(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),o=s))||o)},"./core/parameter/Tw2Matrix4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Matrix4Parameter",(function(){return v}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/math/index.js"),m=r("./core/parameter/Tw2VectorParameter.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=d.meta.type("Tw2Matrix4Parameter","Tw2MatrixParameter"),n=d.meta.string,a=d.meta.matrix4,i((f=c=class extends m.Tw2VectorParameter{constructor(e="",t){if(super(),b(this,"name",l,this),b(this,"value",u,this),e&&(this.name=e),t)for(var r=0;r<t.length;r++)this.value[r]=t[r]}Compose(e,t,r){"value"in e&&(e=e.value),"value"in t&&(t=t.value),"value"in r&&(r=r.value),h.mat4.fromRotationTranslationScale(this.value,e,t,r),this.UpdateValues()}Decompose(e,t,r){h.mat4.getRotation("value"in e?e.value:e,this.value),h.mat4.getTranslation("value"in t?t.value:t,this.value),h.mat4.getScaling("value"in r?r.value:r,this.value),"UpdateValues"in e&&e.UpdateValues(),"UpdateValues"in t&&t.UpdateValues(),"UpdateValues"in r&&r.UpdateValues()}get x(){return this.GetIndexValue(12)}set x(e){this.SetIndexValue(12,e)}get y(){return this.GetIndexValue(13)}set y(e){this.SetIndexValue(13,e)}get z(){return this.GetIndexValue(14)}set z(e){this.SetIndexValue(14,e)}static isValue(e){return Object(d.isArrayLike)(e)&&16===e.length||12===e.length}},c.constantBufferSize=16,l=p((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=p(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.mat4.create()}}),o=s))||o)},"./core/parameter/Tw2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Parameter",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.string,n=m.meta.struct,a=m.meta.abstract,o=m.meta.abstract,s=m.meta.abstract,l=m.meta.abstract,h=d=class extends m.meta.Model{constructor(...e){super(...e),b(this,"name",c,this),b(this,"annotation",f,this)}get size(){return this.constructor.constantBufferSize}GetValue(){}Bind(e,t,r){}Unbind(){}Apply(e,t,r){}},d.constantBufferSize=0,c=p((u=h).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=p(u.prototype,"annotation",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p(u.prototype,"GetValue",[a],Object.getOwnPropertyDescriptor(u.prototype,"GetValue"),u.prototype),p(u.prototype,"Bind",[o],Object.getOwnPropertyDescriptor(u.prototype,"Bind"),u.prototype),p(u.prototype,"Unbind",[s],Object.getOwnPropertyDescriptor(u.prototype,"Unbind"),u.prototype),p(u.prototype,"Apply",[l],Object.getOwnPropertyDescriptor(u.prototype,"Apply"),u.prototype),u)},"./core/parameter/Tw2TextureParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureParameter",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/index.js"),g=r("./core/sampler/Tw2SamplerOverride.js"),y=r("./core/parameter/Tw2Parameter.js"),w=r("./core/resource/Tw2TextureRes.js"),_=r("./core/resource/index.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=p.meta.type("Tw2TextureParameter","TriTextureParameter"),n=p.meta.string,a=p.meta.path,o=p.meta.struct("Tw2TextureRes"),s=p.meta.todo("Make private"),l=p.meta.struct("Tw2SamplerOverrides"),i((b=class extends y.Tw2Parameter{get useAllOverrides(){return!!this.overrides&&this.overrides.enable}set useAllOverrides(e){e&&(this.overrides=this.overrides||new g.Tw2SamplerOverride,this.overrides.SetValues({enable:!0})),!e&&this.overrides&&this.overrides.SetValues({enable:!1})}get isAttached(){return this.textureRes&&this._isAttached}constructor(e,t){super(),E(this,"name",f,this),E(this,"resourcePath",d,this),E(this,"textureRes",h,this),E(this,"overrides",m,this),this._isAttached=!1,e&&(this.name=e),t&&this.SetValue(t)}Initialize(){this.UpdateValues()}SetValue(e,t){return void 0!==e&&(e=e?e.toLowerCase():"",!this.EqualsValue(e)&&(this.resourcePath=e,this.UpdateValues(t),!0))}GetValue(){return this.isAttached&&0!==this.resourcePath.indexOf("rgba:")?null:this.resourcePath}IsGood(){return!!this.textureRes&&this.textureRes.IsGood()}GetResources(e=[]){return this.textureRes&&!e.includes(this.textureRes)&&e.push(this.textureRes),e}AttachTextureRes(e){return this._SetTextureRes(e,!0)}_SetTextureRes(e,t){return this.textureRes!==e&&(this._RemoveTextureRes(),this.textureRes=e,e&&(t?(this._isAttached=!0,this.resourcePath=""):this._isAttached=!1,e.RegisterNotification(this)),!0)}_RemoveTextureRes(){var e=this.textureRes;return!!e&&(this.textureRes=null,this._isAttached=!1,e.UnregisterNotification(this),this.EmitEvent(_.Tw2Resource.Event.RES_REMOVED,this,e),!0)}OnValueChanged(){if(this.resourcePath=this.resourcePath?this.resourcePath.toLowerCase():"",0===this.resourcePath.indexOf("rgba:/")){if(!this.textureRes||this.textureRes.path!==this.resourcePath){var e=this.resourcePath.replace("rgba:/","").split(","),t=v.device.CreateSolidTexture([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),void 0!==e[3]?parseFloat(e[3]):255]),r=new w.Tw2TextureRes;this._SetTextureRes(r),r.Attach(t,this.resourcePath)}}else if(!this.isAttached){var i=this.resourcePath?v.tw2.GetResource(this.resourcePath):null;this._SetTextureRes(i)}}Apply(e,t,r){this.textureRes&&(this.overrides&&(t=this.overrides.GetSampler(t)),v.device.gl.activeTexture(v.device.gl.TEXTURE0+e),this.textureRes.Bind(t,r),this._sampler=t)}SetOverrides(e,t){if(null===e)return!!this.overrides&&(this.RemoveOverrides(),!0);this.overrides=this.overrides||new g.Tw2SamplerOverride,this.overrides.name||(this.overrides.name=this.name+"Sampler"),this.overrides.SetValues(e,t)&&(t&&t.skipEvents||this.EmitEvent("overrides_modified",this,t))}RemoveOverrides(e){return!!this.overrides&&(this.overrides=null,this.EmitEvent("overrides_removed",this,e),!0)}GetOverrides(){return this.overrides?this.overrides.GetValues():null}EqualsValue(e){return e.toLowerCase()===this.GetValue()}OnResEvent(e,t){return _.Tw2Resource.parentOnResEvent(this,"textureRes",e,t)}static onListener(e,t,r,i){return _.Tw2Resource.parentOnListener(e,"textureRes",t,r,i)}static isValue(e){return Object(p.isString)(e)}},f=T((c=b).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=T(c.prototype,"resourcePath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=T(c.prototype,"textureRes",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=T(c.prototype,"overrides",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./core/parameter/Tw2TransformParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformParameter",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/math/index.js"),E=r("./core/parameter/Tw2Parameter.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=w.meta.type("Tw2TransformParameter","Tr2TransformParameter"),n=w.meta.vector3,a=w.meta.vector3,o=w.meta.quaternion,s=w.meta.vector3,l=w.meta.matrix4,u=w.meta.matrix4,i((y=g=class extends E.Tw2Parameter{constructor(...e){super(...e),T(this,"scaling",d,this),T(this,"rotationCenter",h,this),T(this,"rotation",m,this),T(this,"translation",b,this),T(this,"transform",p,this),T(this,"worldTransform",v,this)}Initialize(){this.UpdateValues()}SetValue(e,t){_.mat4.getRotation(this.rotation,e),_.mat4.getTranslation(this.translation,e),_.mat4.getScaling(this.scaling,e),this.UpdateValues(t)}GetValue(e){return _.mat4.copy(e,this.worldTransform)}OnValueChanged(){_.mat4.fromRotationTranslationScaleOrigin(this.transform,this.rotation,this.translation,this.scaling,this.rotationCenter),_.mat4.transpose(this.worldTransform,this.transform)}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Apply(e,t,r){r>=this.constructor.constantBufferSize?e.set(this.worldTransform,t):e.set(this.worldTransform.subarray(0,r),t)}},g.constantBufferSize=16,d=S((f=y).prototype,"scaling",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.fromValues(1,1,1)}}),h=S(f.prototype,"rotationCenter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),m=S(f.prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.quat.create()}}),b=S(f.prototype,"translation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),p=S(f.prototype,"transform",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.mat4.create()}}),v=S(f.prototype,"worldTransform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.mat4.create()}}),c=f))||c)},"./core/parameter/Tw2VariableParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableParameter",(function(){return p}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js"),d=r("./global/index.js"),h=r("./core/parameter/Tw2Parameter.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=f.meta.type("Tw2VariableParameter","TriVariableParameter"),n=f.meta.string,a=f.meta.string,i((c=class extends h.Tw2Parameter{constructor(e,t){super(),m(this,"name",l,this),m(this,"variableName",u,this),e&&(this.name=e),t&&(this.variableName=t)}get variable(){return d.tw2.GetVariable(this.variableName)}get size(){return this.variable?this.variable.size:0}SetValue(e,t){return d.tw2.SetVariableValue(this.variableName,e,t)}GetValue(e=[]){return d.tw2.GetVariableValue(this.variableName)}Apply(e,t,r){this.variable&&this.variable.Apply(e,t,r)}},l=b((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=b(s.prototype,"variableName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=s))||o)},"./core/parameter/Tw2Vector2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Parameter",(function(){return v}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/math/index.js"),m=r("./core/parameter/Tw2VectorParameter.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=d.meta.type("Tw2Vector2Parameter"),n=d.meta.string,a=d.meta.vector2,i((f=c=class extends m.Tw2VectorParameter{constructor(e,t){super(),b(this,"name",l,this),b(this,"value",u,this),e&&(this.name=e),t&&h.vec2.copy(this.value,t)}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}},c.constantBufferSize=2,l=p((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=p(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec2.fromValues(1,1)}}),o=s))||o)},"./core/parameter/Tw2Vector3Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Parameter",(function(){return v}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/math/index.js"),m=r("./core/parameter/Tw2VectorParameter.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=d.meta.type("Tw2Vector3Parameter"),n=d.meta.string,a=d.meta.vector3,i((f=c=class extends m.Tw2VectorParameter{constructor(e,t){super(),b(this,"name",l,this),b(this,"value",u,this),e&&(this.name=e),t&&h.vec3.copy(this.value,t)}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}},c.constantBufferSize=3,l=p((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=p(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.fromValues(1,1,1)}}),o=s))||o)},"./core/parameter/Tw2Vector4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector4Parameter",(function(){return v}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/math/index.js"),m=r("./core/parameter/Tw2VectorParameter.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=d.meta.type("Tw2Vector4Parameter","TriVector4Parameter"),n=d.meta.string,a=d.meta.vector4,i((f=c=class extends m.Tw2VectorParameter{constructor(e,t){super(),b(this,"name",l,this),b(this,"value",u,this),e&&(this.name=e),t&&h.vec4.copy(this.value,t)}GetRGBA(e=[]){return h.vec4.toRGBA(e,this.SetValue(e))}SetRGBA(e){return this.SetValue(h.vec4.fromRGBA([],e))}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}get w(){return this.GetIndexValue(3)}set w(e){this.SetIndexValue(3,e)}},c.constantBufferSize=4,l=p((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=p(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec4.fromValues(1,1,1,1)}}),o=s))||o)},"./core/parameter/Tw2VectorParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorParameter",(function(){return l}));var i,n,a,o=r("./core/Tw2Error.js"),s=r("./global/utils/index.js"),l=s.meta.type("Tw2VectorParameter")((a=n=class extends s.meta.Model{get size(){return this.constructor.constantBufferSize}SetValue(e,t){return!this.EqualsValue(e)&&(this.value.set(e),this.UpdateValues(t),!0)}SetIndexValue(e,t,r){if(void 0===this.value[e])throw new o.ErrIndexBounds;this.value[e]!==t&&(this.value[e]=t,this.UpdateValues(r))}GetValue(e=[]){for(var t=this._constantBuffer?this._constantBuffer.subarray(this._offset,this._offset+this.size):this.value,r=0;r<t.length;r++)e[r]=t[r];return e}GetIndexValue(e){if(void 0!==this.value[e])return this.value[e];throw new o.ErrIndexBounds}OnValueChanged(){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Unbind(){this._constantBuffer=null}Apply(e,t,r){e.set(this.value,t)}EqualsValue(e){for(var t=0;t<this.size;t++)if(this.value[t]!==e[t])return!1;return!0}static isValue(e){return Object(s.isArrayLike)(e)&&e.length===this.constantBufferSize}},n.constantBufferSize=0,i=a))||i},"./core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/parameter/Tw2Parameter.js");r.d(t,"Tw2Parameter",(function(){return i.Tw2Parameter}));var n=r("./core/parameter/Tw2FloatParameter.js");r.d(t,"Tw2FloatParameter",(function(){return n.Tw2FloatParameter}));var a=r("./core/parameter/Tw2Matrix4Parameter.js");r.d(t,"Tw2Matrix4Parameter",(function(){return a.Tw2Matrix4Parameter}));var o=r("./core/parameter/Tw2TransformParameter.js");r.d(t,"Tw2TransformParameter",(function(){return o.Tw2TransformParameter}));var s=r("./core/parameter/Tw2VariableParameter.js");r.d(t,"Tw2VariableParameter",(function(){return s.Tw2VariableParameter}));var l=r("./core/parameter/Tw2Vector2Parameter.js");r.d(t,"Tw2Vector2Parameter",(function(){return l.Tw2Vector2Parameter}));var u=r("./core/parameter/Tw2Vector3Parameter.js");r.d(t,"Tw2Vector3Parameter",(function(){return u.Tw2Vector3Parameter}));var c=r("./core/parameter/Tw2Vector4Parameter.js");r.d(t,"Tw2Vector4Parameter",(function(){return c.Tw2Vector4Parameter}));var f=r("./core/parameter/Tw2TextureParameter.js");r.d(t,"Tw2TextureParameter",(function(){return f.Tw2TextureParameter}))},"./core/post/Tw2PostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostProcess",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/tw2.js"),v=r("./core/parameter/index.js"),g=r("./core/resource/Tw2TextureRes.js"),y=r("./core/Tw2RenderTarget.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=b.meta.type("Tw2PostProcess","Tr2PostProcess"),n=b.meta.list("Tw2Effect"),a=b.meta.boolean,o=b.meta.float,s=b.meta.boolean,i((m=class extends b.meta.Model{constructor(...e){super(...e),w(this,"stages",c,this),w(this,"display",f,this),w(this,"quality",d,this),w(this,"autoRebuild",h,this),this._dirty=!0,this._effectiveWidth=0,this._effectiveHeight=0,this._blitOriginal=null,this._quadRT0=null,this._quadRT1=null,this._visibleStages=[]}IsGood(){for(var e=!0,t=0;t<this.stages.length;t++)this.stages[t].IsGood()||(e=!1);return this._blitOriginal&&!this._blitOriginal.IsGood()&&(e=!1),this._quadRT0&&!this._quadRT0.IsGood()&&(e=!1),this._quadRT1&&!this._quadRT1.IsGood()&&(e=!1),e}KeepAlive(){for(var e=0;e<this.stages.length;e++)this.stages[e].KeepAlive();this._blitOriginal&&this._blitOriginal.KeepAlive(),this._quadRT0&&this._quadRT0.KeepAlive(),this._quadRT1&&this._quadRT1.KeepAlive()}OnValueChanged(){this._dirty=!0}PopulateParameters(){for(var e=0;e<this.stages.length;e++)this.stages[e].PopulateParameters()}PurgeUnusedParameters(){for(var e=0;e<this.stages.length;e++)this.stages[e].PurgeUnusedParameters()}Update(e,t){if(!this._dirty&&this.autoRebuild)for(var r=0;r<this.stages.length;r++){var i=-1!==this._visibleStages.indexOf(this.stages[r]);if("display"in this.stages[r]&&!this.stages[r].display&&i){this._dirty=!0;break}if(!i){this._dirty=!0;break}}}Render(){var{width:e,height:t,gl:r,device:i}=p.tw2;if(!this.display||e<0||t<0||!this.IsGood())return!1;if(this._blitOriginal&&this._blitOriginal.texture||(this._blitOriginal||(this._blitOriginal=new g.Tw2TextureRes),this._blitOriginal.Attach(r.createTexture()),this._dirty=!0),this._dirty||this._effectiveWidth!==e*this.quality||this._effectiveHeight!==t*this.quality){this._effectiveWidth=e*this.quality,this._effectiveHeight=t*this.quality,this._quadRT0||(this._quadRT0=new y.Tw2RenderTarget("RT0")),this._quadRT0.Create(this._effectiveWidth,this._effectiveHeight,!1),this._quadRT1||(this._quadRT1=new y.Tw2RenderTarget("RT1")),this._quadRT1.Create(this._effectiveWidth,this._effectiveHeight,!1),r.bindTexture(r.TEXTURE_2D,this._blitOriginal.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null);for(var n=0;n<this.stages.length;n++){var{shader:a,parameters:o}=this.stages[n],s=void 0;a.HasTexture("BlitOriginal")&&(o.BlitOriginal||(o.BlitOriginal=new v.Tw2TextureParameter("BlitOriginal"),s=!0),o.BlitOriginal.AttachTextureRes(this._blitOriginal)),a.HasTexture("BlitCurrent")&&!o.BlitCurrent&&(o.BlitCurrent=new v.Tw2TextureParameter("BlitCurrent"),s=!0),a.HasConstant("g_texelSize")&&!o.g_texelSize&&(o.g_texelSize=new v.Tw2Vector4Parameter("g_texelSize",[1,1,1,1]),s=!0),s&&this.stages[n].BindParameters()}this._dirty=!1}this._visibleStages.splice(0);for(var l=0;l<this.stages.length;l++)"display"in this.stages[l]&&!this.stages[l].display||this._visibleStages.push(this.stages[l]);if(!this._visibleStages.length)return!1;r.bindTexture(r.TEXTURE_2D,this._blitOriginal.texture),r.copyTexImage2D(r.TEXTURE_2D,0,i.alphaBlendBackBuffer?r.RGBA:r.RGB,0,0,e,t,0),r.bindTexture(r.TEXTURE_2D,null),i.SetStandardStates(i.RM_OPAQUE);for(var u=0,c=0;c<this._visibleStages.length;c++){var{BlitCurrent:f,g_texelSize:d}=this._visibleStages[c].parameters,h=null;if(f){var m=u%2;m?f.AttachTextureRes(this._quadRT1.texture):f.AttachTextureRes(0===u?this._blitOriginal:this._quadRT0.texture),c!==this._visibleStages.length-1&&(h=m?this._quadRT0:this._quadRT1),u++}if(d){var b=h?1/h.width:1/e;d.value[0]=b,d.value[1]=b,d.UpdateValues({controller:this})}h?h.Set():(r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,e,t)),p.tw2.device.RenderFullScreenQuad(this._visibleStages[c])}return!0}},c=_((u=m).prototype,"stages",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=_(u.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=_(u.prototype,"quality",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=_(u.prototype,"autoRebuild",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=u))||l)},"./core/post/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/post/legacy/index.js");r.d(t,"Tw2PostEffect",(function(){return i.Tw2PostEffect})),r.d(t,"Tw2PostEffectManager",(function(){return i.Tw2PostEffectManager})),r.d(t,"Tw2PostEffectStep",(function(){return i.Tw2PostEffectStep}));var n=r("./core/post/Tw2PostProcess.js");r.d(t,"Tw2PostProcess",(function(){return n.Tw2PostProcess}))},"./core/post/legacy/Tw2PostEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffect",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/index.js"),y=r("./core/Tw2RenderTarget.js"),w=r("./core/resource/Tw2TextureRes.js"),_=r("./core/parameter/index.js"),E=r("./core/post/legacy/Tw2PostEffectStep.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=v.meta.type("Tw2PostEffect"),n=v.meta.boolean,a=v.meta.uint,o=v.meta.isPrivate,s=v.meta.struct("Tw2CurveSet"),l=v.meta.list("Tw2PostEffectStep"),i((p=b=class extends v.meta.Model{constructor(...e){super(...e),T(this,"display",f,this),T(this,"index",d,this),T(this,"curveSet",h,this),T(this,"steps",m,this),this._width=0,this._height=0,this._targets={},this._texture=null,this._visibleSteps=[],this._dirty=!0,this._onChildModified=e=>this.UpdateValues({controller:e})}OnValueChanged(){this._dirty=!0}IsGood(){for(var e=0,t=0;t<this.steps.length;t++)this.steps[t].IsGood()&&e++;return e===this.steps.length}KeepAlive(){for(var e=0;e<this.steps.length;e++)this.steps[e].KeepAlive()}GetResources(e=[]){for(var t=0;t<this.steps.length;t++)this.steps[t].GetResources(e);return e}CreateItem(e={}){var t=E.Tw2PostEffectStep.from(e);return this.AddItem(t),t}AddItem(e){this.steps.includes(e)||(-1===e.index&&(e.index=this.steps.length),e._onModified=this._onChildModified,this.steps.push(e),this.UpdateValues())}RemoveItem(e){var t=this.steps.indexOf(e);-1!==t&&(e._onModified=null,this.steps.splice(t,1),this.UpdateValues())}ClearItems(){for(var e=0;e<this.steps.length;e++)this.steps[e]._onModified=null;this.steps=[],this.UpdateValues()}GetTarget(e){return e&&e in this._targets?this._targets[e]:null}HasTarget(e){return!(!e||!this._targets[e])}CreateTarget(e,t=g.device.viewportWidth,r=g.device.viewportHeight){return this._targets[e]||(this._targets[e]=new y.Tw2RenderTarget,this._targets[e].name=e),this._targets[e].Create(t,r,!1),this._targets[e]}Update(e){this.curveSet&&this.curveSet.Update(e)}Render(){var e=g.device,t=e.gl,r=e.viewportWidth,i=e.viewportHeight;if(!this.IsGood()||!this.display||r<=0||i<=0)return!1;if(r!==this._width||i!==this._height||this._dirty||!this._texture){this._texture||(this._texture=new w.Tw2TextureRes,this._texture.Attach(t.createTexture())),t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null),this._width=r,this._height=i,this._visibleSteps=[];for(var n=0;n<this.steps.length;++n){var a=this.steps[n],o=a.inputs,s=a.effect,l=s.shader,u=s.parameters;for(var c in l.HasTexture("BlitCurrent")&&!u.BlitCurrent&&(u.BlitCurrent=new _.Tw2TextureParameter("BlitCurrent","rgba:/0,0,0,255")),l.HasTexture("BlitOriginal")&&!u.BlitOriginal&&(u.BlitOriginal=new _.Tw2TextureParameter("BlitOriginal","rgba:/0,0,0,255")),a.target?a._renderTarget=this.CreateTarget(a.target,r,i):a._renderTarget=null,o)if(o.hasOwnProperty(c))if(l.HasTexture(c)){u[c]||(u[c]=new _.Tw2TextureParameter(c));var f=u[c],d=o[c];d?f.AttachTextureRes(this.CreateTarget(d,r,i).texture):f.AttachTextureRes(this._texture)}else console.warn("Invalid input parameter ".concat(c)),delete o[c];if("BlitCurrent"in o&&l.HasConstant("g_texelSize")){u.g_texelSize||(u.g_texelSize=new _.Tw2Vector4Parameter("g_texelSize",[1,1,1,1]));var h=u.g_texelSize,m=this.GetTarget(o.BlitCurrent);m?(h.value[0]=1/m.width,h.value[1]=1/m.width):(h.value[0]=1/r,h.value[1]=1/r),h.UpdateValues(this)}a.display&&this._visibleSteps.push(a),a._dirty=!1}this._visibleSteps.sort((e,t)=>e.index-t.index),this._dirty=!1}t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r,i,0),t.bindTexture(t.TEXTURE_2D,null),e.SetStandardStates(g.device.RM_OPAQUE);for(var b=0,p=0;p<this._visibleSteps.length;++p){var v=this._visibleSteps[p];v.display&&(v._renderTarget?v._renderTarget.Set():(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,r,i)),e.RenderFullScreenQuad(v.effect),b++)}return!!b}static from(e={}){var t=new this;if(Object(v.assignIfExists)(t,e,["name","display","index"]),e.steps)for(var r=0;r<e.steps.length;r++)t.CreateItem(e.steps[r]);return t}},b.Item=E.Tw2PostEffectStep,f=S((c=p).prototype,"display",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=S(c.prototype,"index",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=S(c.prototype,"curveSet",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S(c.prototype,"steps",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./core/post/legacy/Tw2PostEffectManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectManager",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./core/post/legacy/Tw2PostEffect.js"),b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("Tw2PostEffectManager"),n=b.meta.string,a=b.meta.boolean,o=b.meta.list("Tw2PostEffect"),i((h=d=class extends b.meta.Model{constructor(...e){super(...e),p(this,"name",u,this),p(this,"display",c,this),p(this,"effects",f,this),this._dirty=!0,this._onChildValueChanged=e=>this.UpdateValues({controller:e}),this._visibleEffects=[]}OnValueChanged(){this._dirty=!0}IsGood(){for(var e=0,t=0;t<this.effects.length;t++)this.effects[t].IsGood()&&e++;return e===this.effects.length}KeepAlive(){for(var e=0;e<this.effects.length;e++)this.effects[e].KeepAlive()}GetResources(e=[]){for(var t=0;t<this.effects.length;t++)this.effects[t].GetResources(e);return e}CreateItem(e={}){var t=m.Tw2PostEffect.from(e);return this.AddItem(t),t}AddItem(e){this.effects.includes(e)||(-1===e.index&&(e.index=this.effects.length),e._onModified=this._onChildValueChanged,this.effects.push(e),this.UpdateValues())}RemoveItem(e){var t=this.effects.indexOf(e);-1!==t&&(e._onModified=null,this.effects.splice(t,1),this.UpdateValues())}ClearItems(){for(var e=0;e<this.effects.length;e++)this.effects[e]._onModified=null,this.effects[e].ClearItems();this.effects=[],this.UpdateValues()}Update(e){if(this._dirty){this._visibleEffects=[];for(var t=0;t<this.effects.length;t++)this.effects[t].display&&this._visibleEffects.push(this.effects[t]);this._visibleEffects.sort((e,t)=>e.index-t.index),this._dirty=!1}for(var r=0;r<this.effects.length;r++)this.effects[r].Update(e)}Render(){if(!this.display)return this.KeepAlive(),!1;for(var e=0,t=0;t<this._visibleEffects.length;t++)this._visibleEffects[t].Render()&&e++;return!!e}},d.Item=m.Tw2PostEffect,u=v((l=h).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Post manager"}}),c=v(l.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=v(l.prototype,"effects",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./core/post/legacy/Tw2PostEffectStep.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectStep",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js"),w=r("./core/mesh/Tw2Effect.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T=(i=y.meta.type("Tw2PostEffectStep"),n=y.meta.uint,a=y.meta.isPrivate,o=y.meta.boolean,s=y.meta.struct("Tw2Effect"),l=y.meta.string,u=y.meta.plain,c=y.meta.isPrivate,i((g=class extends y.meta.Model{constructor(...e){super(...e),_(this,"index",h,this),_(this,"display",m,this),_(this,"effect",b,this),_(this,"target",p,this),_(this,"inputs",v,this),this._renderTarget=null,this._dirty=!0}OnValueChanged(){this._dirty=!0}IsGood(){return!!this.effect&&this.effect.IsGood()}KeepAlive(){this.effect&&this.effect.KeepAlive()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}static from(e={}){var t=new this;return Object(y.assignIfExists)(t,e,["name","display","target","index"]),e.inputs&&Object.assign(t.inputs,e.inputs),t.effect=w.Tw2Effect.from({name:e.name,autoParameter:!0,effectFilePath:e.effectFilePath,parameters:e.parameters,textures:e.textures,overrides:e.overrides}),t}},h=E((d=g).prototype,"index",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),m=E(d.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=E(d.prototype,"effect",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=E(d.prototype,"target",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E(d.prototype,"inputs",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=d))||f)},"./core/post/legacy/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/post/legacy/Tw2PostEffect.js");r.d(t,"Tw2PostEffect",(function(){return i.Tw2PostEffect}));var n=r("./core/post/legacy/Tw2PostEffectManager.js");r.d(t,"Tw2PostEffectManager",(function(){return n.Tw2PostEffectManager}));var a=r("./core/post/legacy/Tw2PostEffectStep.js");r.d(t,"Tw2PostEffectStep",(function(){return a.Tw2PostEffectStep}))},"./core/reader/Tw2BinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BinaryReader",(function(){return i}));class i{constructor(e){this.data=null,this.cursor=0,this.data=e}ReadUInt8(){return this.data[this.cursor++]}ReadInt8(){var e=this.data[this.cursor++];return e>127&&(e=e-255-1),e}ReadUInt16(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)}ReadInt16(){var e=this.data[this.cursor++]+(this.data[this.cursor++]<<8);return e>32767&&(e=e-65535-1),e}ReadUInt32(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0)}ReadInt32(){var e=this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0);return e>2147483647&&(e=e-4294967295-1),e}ReadFloat16(){var e=this.data[this.cursor++],t=this.data[this.cursor++],r=(t>>2&31)-15,i=(3&t)<<8|e;return 0===i&&-15===r?0:(1-2*(t>>7))*(1+i*Math.pow(2,-10))*Math.pow(2,r)}ReadFloat32(){var e=this.data[this.cursor++],t=this.data[this.cursor++],r=this.data[this.cursor++],i=this.data[this.cursor++],n=(i<<1&255|r>>7)-127,a=(127&r)<<16|t<<8|e;return 0===a&&-127===n?0:(1-2*(i>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,n)}ReadString(){for(var e=this.data[this.cursor++],t="",r=0;r<e;++r)t+=String.fromCharCode(this.data[this.cursor++]);return t}}},"./core/reader/Tw2BlackBinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackBinaryReader",(function(){return n})),r.d(t,"ErrBinaryReaderReadError",(function(){return a}));var i=r("./core/Tw2Error.js");class n{constructor(e,t){this.data=null,this.context=null,this.cursor=0,this.data=e,this.context=t,this.cursor=0}get length(){return this.data.byteLength-this.cursor}get stringTable(){return this.context._stringTable}get references(){return this.context._ids}AtEnd(){return 0===this.length}ReadBinaryReader(e){return new n(this.ReadDataView(e),this.context)}ReadCString(){for(var e=this.data,t=this.cursor;0!==this.ReadU8(););var r=e.byteOffset+t,i=this.cursor-t-1,a=new Uint8Array(e.buffer,r,i);return n.stringDecoder.decode(a)}ReadCWString(){for(var e=this.data,t=this.cursor;0!==this.ReadU16(););var r=e.byteOffset+t,i=this.cursor-t-2,a=new Uint8Array(e.buffer,r,i);return n.wstringDecoder.decode(a)}ReadDataView(e){if(e<0)throw new a({readError:'Argument should be positive: got "'.concat(e,'"')});if(this.length<e)throw new a({readError:"Argument is too big: remaining ".concat(this.length,', got "').concat(e,'"')});var t=this.data,r=new DataView(t.buffer,t.byteOffset+this.cursor,e);return this.cursor+=e,r}ReadF32(){var e=this.data.getFloat32(this.cursor,!0);return this.cursor+=4,e}ReadF32Array(e){if(e<0)throw new a({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Float32Array(e),r=0;r<e;r++)t[r]=this.ReadF32();return t}ReadF64(){var e=this.data.getFloat64(this.cursor,!0);return this.cursor+=8,e}ReadF64Array(e){if(e<0)throw new a({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Float64Array(e),r=0;r<e;r++)t[r]=this.ReadF64();return t}ReadStringU16(){var e=this.ReadU16();if(e>this.stringTable.length)throw new a({readError:'Reading string "'.concat(e,'" but only ').concat(this.stringTable.length," exist")});return this.stringTable[e]}ReadU8(){var e=this.data.getUint8(this.cursor);return this.cursor+=1,e}ReadU16(){var e=this.data.getUint16(this.cursor,!0);return this.cursor+=2,e}ReadU16Array(e){if(e<0)throw new a({readError:'Argument should be positive but got "'.concat(e,'"')});for(var t=new Uint16Array(e),r=0;r<e;r++)t[r]=this.ReadU16();return t}ReadU32(){var e=this.data.getUint32(this.cursor,!0);return this.cursor+=4,e}ReadU32Array(e){if(e<0)throw new a({readError:"Argument should be positive: got ".concat(e)});for(var t=new Uint32Array(e),r=0;r<e;r++)t[r]=this.ReadU32();return t}ExpectEnd(e){if(0!==this.length)throw new a({readError:"".concat(e,": expected 0 bytes remaining, got ").concat(this.length)})}ExpectU8(e,t){n.expect(this.ReadU8(),e,t)}ExpectU16(e,t){n.expect(this.ReadU16(),e,t)}ExpectU32(e,t){n.expect(this.ReadU32(),e,t)}static expect(e,t,r){if(e!==t)throw new a({readError:"".concat(r,": expected ").concat(t,", got ").concat(e)})}}n.stringDecoder=new TextDecoder("utf-8"),n.wstringDecoder=new TextDecoder("utf-16le");class a extends i.Tw2Error{constructor(e){super(e,"Error reading binary (%readError=undefined%)")}}},"./core/reader/Tw2BlackPropertyReaders.js":function(e,t,r){"use strict";r.r(t),r.d(t,"object",(function(){return f})),r.d(t,"rawObject",(function(){return d})),r.d(t,"array",(function(){return h})),r.d(t,"boolean",(function(){return m})),r.d(t,"string",(function(){return b})),r.d(t,"path",(function(){return v})),r.d(t,"enums",(function(){return g})),r.d(t,"float",(function(){return y})),r.d(t,"ushort",(function(){return w})),r.d(t,"uint",(function(){return _})),r.d(t,"byte",(function(){return E})),r.d(t,"vector2",(function(){return T})),r.d(t,"vector3",(function(){return S})),r.d(t,"color",(function(){return j})),r.d(t,"vector4",(function(){return R})),r.d(t,"matrix",(function(){return P})),r.d(t,"indexBuffer",(function(){return x})),r.d(t,"struct",(function(){return z})),r.d(t,"structList",(function(){return O})),r.d(t,"fromList",(function(){return A})),r.d(t,"notImplemented",(function(){return M}));var i,n=r("./global/index.js"),a=r("./global/math/index.js"),o=r("./core/Tw2Error.js"),s=r("./core/reader/Tw2BlackBinaryReader.js"),l=r("./global/utils/index.js"),u=r("./global/constant/type.js");function c(e){return i||(i={[u.PT_BOOLEAN]:m,[u.PT_PATH]:v,[u.PT_STRING]:b,[u.PT_EXPRESSION]:b,[u.PT_BYTE]:E,[u.PT_UINT]:_,[u.PT_USHORT]:w,[u.PT_FLOAT]:y,[u.PT_VECTOR2]:T,[u.PT_VECTOR3]:S,[u.PT_VECTOR4]:R,[u.PT_QUATERNION]:R,[u.PT_MATRIX4]:P,[u.PT_COLOR]:j,[u.PT_STRUCT]:f,[u.PT_STRUCT_RAW]:d,[u.PT_STRUCT_LIST]:h,[u.PT_ARRAY]:h,[u.PT_PLAIN]:d,[u.PT_ENUM]:g,[u.PT_FLOAT64_ARRAY]:x,[u.PT_FLOAT32_ARRAY]:x,[u.PT_UINT32_ARRAY]:x,[u.PT_UINT16_ARRAY]:x,[u.PT_INT8_ARRAY]:x,[u.PT_INT16_ARRAY]:x,[u.PT_INT32_ARRAY]:x,[u.PT_UINT8_CLAMPED_ARRAY]:x,[u.PT_UINT8_ARRAY]:x,[u.PT_VECTOR]:x,[u.PT_MATRIX3]:x}),i[Number(e)]||M}function f(e,t){var r=e.context,i=void 0!==t,a=n.tw2.GetDebugMode();if(!i){if(0===(t=e.ReadU32()))return null;if(e.references.has(t))return e.references.get(t)}var o=e.ReadBinaryReader(e.ReadU32()),u=o.ReadStringU16(),f=r.ConstructType(u),d=f.constructor.blackReaders||{};for(i||e.references.set(t,f);!o.AtEnd();){var h=o.ReadStringU16(),m=void 0;if(d[h]?(m=d[h]).blackStruct&&(m=m.blackStruct):Object(l.hasMetadata)("black",f,h)?m=Object(l.getMetadata)("black",f,h):Object(l.hasMetadata)("type",f,h)&&(m=c(Object(l.getMetadata)("type",f,h))),!m)throw a&&console.dir(f),new s.ErrBinaryReaderReadError({readError:'Unknown property "'.concat(h,'" for "').concat(u,'"')});if(!Object(l.isFunction)(m))throw a&&console.dir(f),new s.ErrBinaryReaderReadError({readError:'Invalid reader for property "'.concat(h,'" for "').concat(u,'"')});try{m.custom?m(o,f,h):(!(h in f)&&a&&console.log("'".concat(u,"' missing property: '").concat(h,"'")),f[h]=m(o)),f.constructor.onAfterBlackPropertyReader&&f.constructor.onAfterBlackPropertyReader(h,f)}catch(e){throw a&&console.dir(f),new s.ErrBinaryReaderReadError({message:"".concat(h," (").concat(f.constructor.name,") > ")+e.message})}}return o.ExpectEnd("object did not read to end"),"Initialize"in f&&f.Initialize(),f}function d(e){return f(e,null)}function h(e){for(var t=[],r=e.ReadU32(),i=0;i<r;i++)t[i]=f(e);return t}function m(e){return 0!==e.ReadU8()}function b(e){return e.ReadStringU16()}var p=new Map;function v(e){var t=e.ReadStringU16(),r=p.get("*");if(r){var i=r(t);i&&(t=i)}var n=Object(l.getPathExtension)(t),a=p.get(n);if(a){var o=a(t);if(o)return o}return t}function g(e){for(var t=e.ReadStringU16().split(","),r={},i=0;i<t.length;i++){var n=t[i].split("=");r[n[0]]=Number(n[1])}return r}function y(e){return e.ReadF32()}function w(e){return e.ReadU16()}function _(e){return e.ReadU32()}function E(e){return e.ReadU8()}function T(e){return a.vec2.fromValues(e.ReadF32(),e.ReadF32())}function S(e){return a.vec3.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32())}function j(e){return a.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function R(e){return a.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function P(e){return a.mat4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function x(e){var t=e.ReadU32();if(4===e.ReadU16())return e.ReadU32Array(t);throw"unsupported for now"}function z(e){return function(t){return e.blackStruct(t)}}function O(e){return function(t){for(var r=t.ReadU32(),i=t.ReadU16(),n=[],a=0;a<r;a++){var o=t.ReadBinaryReader(i);n[a]=e.blackStruct(o),o.ExpectEnd("struct read to end")}return n}}function A(e){Object(l.isString)(e)&&(e={key:e});var{key:t,struct:r,reroute:i,value:n}=e,a=function(e,a,o){var s=a[i||o];if(!Object(l.isPlain)(s))throw new Error("Target is not a plain object");for(var u=r?O(r)(e):h(e),c=0;c<u.length;c++){var f=u[c],d=u[c][t];if(void 0===d)throw new Error("Array element property is undefined: ".concat(t));if(d in s&&console.warn("Property '".concat(d,"' already defined")),void 0===n)s[d]=f;else{if(!(n in f))throw new Error("Property is undefined: ".concat(n));s[d]=f[n]}}};return a.custom=!0,a}function M(e,t,r){throw new o.ErrFeatureNotImplemented({feature:"Black reader for property '".concat(r,"'")})}v.registerExtensionHandlers=function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&v.setExtensionHandler(t,e[t])},v.setExtensionHandler=function(e,t){if(null===t)p.delete(e);else{if(!Object(l.isFunction)(t))throw new ReferenceError("Invalid handler, must be a function or null");p.set(e,t)}},M.custom=!0},"./core/reader/Tw2BlackReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackReader",(function(){return s}));var i=r("./global/index.js"),n=r("./core/reader/Tw2BlackBinaryReader.js"),a=r("./core/reader/Tw2ObjectReader.js"),o=r("./core/reader/Tw2BlackPropertyReaders.js");class s{constructor(e){this.data=null,this._ids=null,this._comments=null,this._reader=null,this._start=0,this._stringTable=null,e&&(this.data=e instanceof ArrayBuffer?new DataView(e):e,this.Initialize())}Initialize(){if(!(this.data&&this.data instanceof DataView))throw new a.ErrBinaryFormat({formatError:"expected DataView"});var e=new n.Tw2BlackBinaryReader(this.data,this);if(2980901150!==e.ReadU32())throw new a.ErrBinaryFormat({formatError:"wrong FOURCC"});if(1!==e.ReadU32())throw new a.ErrBinaryFormat({formatError:"wrong version"});var t=e.ReadBinaryReader(e.ReadU32()),r=t.ReadU16();this._stringTable=[];for(var i=0;i<r;i++)this._stringTable[i]=t.ReadCString();t.ExpectEnd();var o=e.ReadBinaryReader(e.ReadU32()),s=o.ReadU16();this._comments=[];for(var l=0;l<s;l++)this._comments[l]=o.ReadCWString();o.ExpectEnd(),this._ids=new Map,this._reader=e,this._start=e.cursor}Construct(){return this._reader.cursor=this._start,Object(o.object)(this._reader)}ConstructType(e){if(i.tw2.HasClass(e))return new(i.tw2.GetClass(e));if(s.DEBUG_ENABLED)return{_type:e};throw new a.ErrBinaryObjectTypeNotFound({type:e})}}s.DEBUG_ENABLED=!0},"./core/reader/Tw2ObjectReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ErrBinaryFormat",(function(){return o})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return s})),r.d(t,"Tw2ObjectReader",(function(){return l}));var i=r("./global/index.js"),n=r("./core/reader/Tw2BinaryReader.js"),a=r("./core/Tw2Error.js");class o extends a.Tw2Error{constructor(e){super(e,"Invalid binary format (%formatError=undefined%)")}}class s extends a.Tw2Error{constructor(e){super(e,"Binary object type not found (%type%)")}}class l{constructor(e){this.xmlNode=null,this._inputStack=null,this._initializeObjects=null,this._ids={},this._reader=null,this._stringTable=null,this._start=null,e&&(this.xmlNode=e,e&&this.Initialize())}Initialize(){if(!l.IsValidXML(this.xmlNode))throw new o({formatError:"Invalid binary, expected binred"});this._reader=new n.Tw2BinaryReader(new Uint8Array(this.xmlNode)),this._reader.cursor+=6,this._stringTable=[];for(var e=this._reader.ReadUInt32(),t=0;t<e;++t){var r=this._reader.ReadUInt16();this._stringTable.push(String.fromCharCode.apply(null,this._reader.data.subarray(this._reader.cursor,this._reader.cursor+r))),this._reader.cursor+=r}this._start=this._reader.cursor}Construct(){return this._reader.cursor=this._start,l.ReadElement(this)}static IsValidXML(e){return e&&"binred"===String.fromCharCode.apply(null,new Uint8Array(e).subarray(0,6))}static ConstructObject(e){if("json"===e.type)return e;var t;if(i.tw2.HasClass(e.type))t=i.tw2.GetClass(e.type);else{if(!l.DEBUG_ENABLED)throw new s({type:e.type});t=Object}var r=new t;for(var n in e)if(e.hasOwnProperty(n)&&"type"!==n)if(e[n].constructor===Object){if(this.DEBUG_ENABLED&&(r[n]=r[n]||{}),r[n])for(var a in e[n])e[n].hasOwnProperty(a)&&(r[n][a]=e[n][a])}else r[n]=e[n];return"Initialize"in r&&r.Initialize(),r}static ReadUint(e,t){switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return e._reader.ReadUInt16();default:return e._reader.ReadUInt32()}}static ReadElementData(e,t){var r,i,n,o,s;switch(15&t){case this.ElementRawType.NULL:return null;case this.ElementRawType.BOOL:switch(48&t){case this.ElementSize.SMALL:return 0!==e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return!1;default:return!0}case this.ElementRawType.INT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadInt8();case this.ElementSize.MEDIUM:return e._reader.ReadInt16();default:return e._reader.ReadInt32()}case this.ElementRawType.UINT:return this.ReadUint(e,t);case this.ElementRawType.FLOAT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadFloat16();case this.ElementSize.MEDIUM:return e._reader.ReadFloat32();default:throw new a.ErrFeatureNotImplemented({feature:"Element raw type Float64"})}case this.ElementRawType.STRING:return r=this.ReadUint(e,t),e._stringTable[r];case this.ElementRawType.ARRAY:for(o=this.ReadUint(e,t),n=[],i=0;i<o;++i)n.push(this.ReadElement(e));return n;case this.ElementRawType.MAPPING:for(o=this.ReadUint(e,t),n={},i=0;i<o;++i)n[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return n;case this.ElementRawType.OBJECT:for(o=this.ReadUint(e,t),n={},i=0;i<o;++i)n[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return this.ConstructObject(n);case this.ElementRawType.TYPED_ARRAY:for(o=this.ReadUint(e,t),s=e._reader.ReadUInt8(),n=[],i=0;i<o;++i)n.push(this.ReadElementData(e,s));return s in this.TypedArrays&&(n=new this.TypedArrays[s](n)),n;case this.ElementRawType.TYPED_MAPPING:for(o=this.ReadUint(e,t),s=e._reader.ReadUInt8(),n={},i=0;i<o;++i)n[e._stringTable[this.ReadUint(e,t)]]=this.ReadElementData(e,s);return n}}static ReadElement(e){var t,r=e._reader.ReadUInt8();if(r===this.REFERENCE_BIT)return e._ids[e._reader.ReadUInt16()];0!=(r&this.ID_BIT)&&(t=e._reader.ReadUInt16());var i=this.ReadElementData(e,63&r);return 0!=(r&this.ID_BIT)&&(e._ids[t]=i),i}}l.DEBUG_ENABLED=!1,l.ID_BIT=64,l.REFERENCE_BIT=128,l.ElementRawType={NULL:0,BOOL:1,INT:2,UINT:3,FLOAT:4,STRING:5,ARRAY:6,MAPPING:7,OBJECT:8,TYPED_ARRAY:9,TYPED_MAPPING:10},l.ElementSize={SMALL:0,MEDIUM:16,LARGE:32},l.TypedArrays={2:Int8Array,3:Uint8Array,18:Int16Array,19:Uint16Array,34:Int32Array,35:Uint32Array,4:Float32Array,20:Float32Array,36:Float64Array};var u=l.ElementRawType,c=l.ElementSize;l.ElementTypes={NULL:u.NULL|c.SMALL,BOOL:u.BOOL|c.SMALL,FALSE:u.BOOL|c.MEDIUM,TRUE:u.BOOL|c.LARGE,INT8:u.INT|c.SMALL,UINT8:u.UINT|c.SMALL,INT16:u.INT|c.MEDIUM,UINT16:u.UINT|c.MEDIUM,INT32:u.INT|c.LARGE,UINT32:u.UINT|c.LARGE,FLOAT16:u.FLOAT|c.SMALL,FLOAT32:u.FLOAT|c.MEDIUM,FLOAT64:u.FLOAT|c.LARGE,SHORT_STRING:u.STRING|c.SMALL,MEDIUM_STRING:u.STRING|c.MEDIUM,LARGE_STRING:u.STRING|c.LARGE,SHORT_ARRAY:u.ARRAY|c.SMALL,MEDIUM_ARRAY:u.ARRAY|c.MEDIUM,LARGE_ARRAY:u.ARRAY|c.LARGE,SHORT_MAPPING:u.MAPPING|c.SMALL,MEDIUM_MAPPING:u.MAPPING|c.MEDIUM,LARGE_MAPPING:u.MAPPING|c.LARGE,SHORT_OBJECT:u.OBJECT|c.SMALL,MEDIUM_OBJECT:u.OBJECT|c.MEDIUM,LARGE_OBJECT:u.OBJECT|c.LARGE,SHORT_TYPED_ARRAY:u.TYPED_ARRAY|c.SMALL,MEDIUM_TYPED_ARRAY:u.TYPED_ARRAY|c.MEDIUM,LARGE_TYPED_ARRAY:u.TYPED_ARRAY|c.LARGE,SHORT_TYPED_MAPPING:u.TYPED_MAPPING|c.SMALL,MEDIUM_TYPED_MAPPING:u.TYPED_MAPPING|c.MEDIUM,LARGE_TYPED_MAPPING:u.TYPED_MAPPING|c.LARGE}},"./core/reader/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/reader/Tw2BinaryReader.js");r.d(t,"Tw2BinaryReader",(function(){return i.Tw2BinaryReader}));var n=r("./core/reader/Tw2BlackReader.js");r.d(t,"Tw2BlackReader",(function(){return n.Tw2BlackReader}));var a=r("./core/reader/Tw2ObjectReader.js");r.d(t,"ErrBinaryFormat",(function(){return a.ErrBinaryFormat})),r.d(t,"ErrBinaryObjectTypeNotFound",(function(){return a.ErrBinaryObjectTypeNotFound})),r.d(t,"Tw2ObjectReader",(function(){return a.Tw2ObjectReader}))},"./core/resource/Tw2CakeReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CakeReader",(function(){return c}));var i,n,a,o=r("./core/vertex/index.js"),s=r("./global/constant/index.js"),l=r("./global/utils/index.js"),u=r("./core/Tw2Error.js"),c=l.meta.type("Tw2CakeReader")((a=n=class e{constructor(t){this.name="",this.areas=[],this.declaration=null,this.indexData=null,this.bufferData=null,this.boneBindings=[],this.blendShapes=[],this.models=[],this.animations=[],e.validate(t);var r=t.split(/\r?\n/),i=[],n=[],a=0;function c(){var t=r[a];if(!t)return{name:"EMPTY",value:void 0};var i=t.split(":"),n=i[0].toUpperCase();n.toUpperCase()in e.ShortName&&(n=e.ShortName[n.toUpperCase()]);var o=i[1]||"";switch(n){case"NOTE":case"NAME":return{name:n,value:o}}if(!o)throw new u.Tw2Error({message:"Unexpected value on line ".concat(a+1,": ").concat(i[0]),data:i[0]});if(o.includes(",")||o.includes("[")){o=(o=o.replace("[","").replace("]","")).split(",");for(var s=0;s<o.length;s++)o[s]=Number(o[s])}return{name:n,value:o}}for(;a<r.length;){var{name:f,value:d}=c();switch(f){case"EMPTY":case"NOTE":a++;break;case"NAME":this.name=d||"",a++;break;case"AREA":var h={name:d,start:i.length*e.IndexArray.BYTES_PER_ELEMENT,count:0};for(this.areas.push(h),a++;a<r.length;){var m=c();if("FACE"!==m.name)break;if(!Object(l.isVector3)(m.value))throw new ReferenceError("Unexpected face value on line ".concat(a+1,": ").concat(m.value));h.count+=3,i.push(m.value[0]),i.push(m.value[1]),i.push(m.value[2]),a++}break;case"POSITION":case"NORMAL":case"TANGENT":case"BITANGENT":case"TEXCOORD0":case"TEXCOORD1":for(var b=void 0,p=0;p<n.length;p++)n[p].name===f&&(b=n[p]);if(b||(b=e.getDeclarationObjectByName(f),n.push(b)),!Object(l.isVector)(d)||d.length!==b.elements)throw new ReferenceError('Invalid value for declaration "'.concat(f,'" on line ').concat(a+1,": ").concat(d));b.vertices.push(d),a++;break;default:throw new ReferenceError("Unexpected value type on line ".concat(a+1,": ").concat(f))}}var v=0,g=n.length?n[0].vertices.length:0;this.declaration=new o.Tw2VertexDeclaration;for(var y=0;y<n.length;y++){var{vertices:w,usageIndex:_,usage:E,elements:T,name:S}=n[y];if(w.length!==g)throw new ReferenceError("Unexpected vertex count: ".concat(S));this.declaration.elements.push(o.Tw2VertexElement.from({usage:E,usageIndex:_,elements:T,type:s.GL_FLOAT,offset:4*v})),v+=T}this.declaration.RebuildHash(),this.declaration.stride=4*v;var j=g*v;if(j){this.bufferData=new Float32Array(j);for(var R=0,P=0;P<g;P++)for(var x=0;x<n.length;x++)for(var z=0;z<n[x].elements;z++)this.bufferData[R++]=n[x].vertices[P][z]}this.indexData=new e.IndexArray(i)}static construct(t){this.validate(t);for(var r=t.split("MESH"),i=[],n=0;n<r.length;n++)i.push(new e(r[n]));return i}static validate(e){if(!Object(l.isString)(e))throw new ReferenceError("Invalid format, expected string")}static getDeclarationObjectByName(e){return e in this.ShortName&&(e=this.ShortName[e]),{name:e,vertices:[],usageIndex:this.UsageIndex[e],usage:this.Usage[e],elements:this.Elements[e]}}},n.IndexArray=Uint32Array,n.ShortName={"#":"NOTE",A:"AREA",M:"NAME",P:"POSITION",N:"NORMAL",T:"TANGENT",BT:"BITANGENT",T0:"TEXCOORD0",T1:"TEXCOORD1",F:"FACE"},n.Elements={POSITION:3,NORMAL:3,TANGENT:4,BITANGENT:4,TEXCOORD0:2,TEXCOORD1:2},n.UsageIndex={POSITION:0,NORMAL:0,TANGENT:0,BITANGENT:0,TEXCOORD0:0,TEXCOORD1:1},n.Usage={POSITION:o.Tw2VertexElement.Type.POSITION,NORMAL:o.Tw2VertexElement.Type.NORMAL,TANGENT:o.Tw2VertexElement.Type.TANGENT,BITANGENT:o.Tw2VertexElement.Type.BINORMAL,TEXCOORD0:o.Tw2VertexElement.Type.TEXCOORD,TEXCOORD1:o.Tw2VertexElement.Type.TEXCOORD},i=a))||i},"./core/resource/Tw2EffectRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EffectRes",(function(){return c})),r.d(t,"ErrShaderVersion",(function(){return f})),r.d(t,"ErrShaderHeaderSize",(function(){return d}));var i,n=r("./global/utils/index.js"),a=r("./core/reader/index.js"),o=r("./core/resource/Tw2Resource.js"),s=r("./core/shader/index.js"),l=r("./core/Tw2Error.js"),u=r("./global/index.js"),c=n.meta.type("Tw2EffectRes")(i=class e extends o.Tw2Resource{constructor(...e){super(...e),this.passes=[],this.annotations={},this.permutations=[],this.offsets=[],this.reader=null,this.version=0,this.stringTable="",this.shaders=[],this.ReadString=null,this.validShadowShader=!1,this._extension=null,this._requestResponseType=null}PrepareFX(e){var t=this.reader=new a.Tw2BinaryReader(new Uint8Array(e)),r=t.ReadUInt32();if(r<2||r>8)this.OnError(new f({path:this.path,version:r}));else{var i,n,o;if(this.ReadString=function(){for(var e=t.ReadUInt32(),r=e;o.charCodeAt(r);)++r;return o.substr(e,r-e)},r<5){if(0===(i=t.ReadUInt32()))return void this.OnError(new d({path:this.path}));t.ReadUInt32();var l=t.ReadUInt32();t.cursor=8+3*i*4,n=t.ReadUInt32(),this.stringTableOffset=t.cursor,o=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+n)),t.cursor=l}else{n=t.ReadUInt32(),this.stringTableOffset=t.cursor,o=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+n)),t.cursor+=n;for(var u=t.ReadUInt8(),c=0;c<u;++c){var h=s.Tw2ShaderPermutation.fromCCPBinary(t,this);this.permutations.push(h)}if(0===(i=t.ReadUInt32()))return void this.OnError(new d({path:this.path}));for(var m=0;m<i;++m)this.offsets.push({index:t.ReadUInt32(),offset:t.ReadUInt32(),size:t.ReadUInt32()});t.ReadUInt32(),t.cursor=t.ReadUInt32()}this.reader=t,this.version=r,this.stringTable=o}}GetShaderFX(e){for(var t=0,r=1,i=0;i<this.permutations.length;++i){var n=this.permutations[i],a=n.defaultOption;if(e.hasOwnProperty(n.name))try{a=n.GetOption(e[n.name])}catch(e){return this.OnError(e),null}t+=a*r,r*=n.optionCount}if(this.shaders.hasOwnProperty(t))return this.shaders[t];this.version>4&&(this.reader.cursor=this.offsets[t].offset);var o=null;try{o=s.Tw2Shader.fromCCPBinary(this.reader,this)}catch(e){return this.OnError(e),null}return this.shaders[t]=o}PrepareJSON(e){this.reader=e}GetShaderJSON(e){return this.shaders[0]||(this.shaders[0]=s.Tw2Shader.fromJSON(this.reader,this),this.reader=null),this.shaders[0]}Prepare(e){switch(this.permutations.splice(0),this.offsets.splice(0),this.passes.splice(0),Object(n.emptyObject)(this.annotations),this.reader=null,this.version=0,this.stringTable="",this.shaders.splice(0),this._extension){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":this.PrepareFX(e);break;case"sm_json":this.PrepareJSON(e);break;default:throw new o.ErrResourceFormatUnsupported({format:this._extension})}this.OnPrepared()}GetShader(e){if(!this.IsGood())return null;switch(this._extension){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":return this.GetShaderFX(e);case"sm_json":return this.GetShaderJSON(e);default:throw new o.ErrResourceFormatUnsupported({format:this._extension})}}DoCustomLoad(e,t){switch(this._extension=null,t){case"fx":case"sm_hi":case"sm_lo":case"sm_depth":return this._requestResponseType="arraybuffer",void(this._extension=t);case"sm_json":return this._requestResponseType="json",void(this._extension=t);default:throw new o.ErrResourceFormatUnsupported({format:this._extension})}}static fromJSON(t){if(!t.name)throw new ReferenceError("Invalid shader name");var r=new e,i="manual:/"+t.name+".sm_json";return r.path=i.toLowerCase(),r._extension="sm_json",r.doNotPurge=1,r.Prepare(t),u.tw2.AddResource(r.path,r),r}})||i;class f extends l.Tw2Error{constructor(e){super(e,"Invalid version of effect file (%version%)")}}class d extends l.Tw2Error{constructor(e){super(e,"Effect file contains no compiled effects")}}},"./core/resource/Tw2GeometryRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryRes",(function(){return m})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return b})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return p})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return v})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return g})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return y})),r.d(t,"ErrGeometryFileType",(function(){return w}));var i,n=r("./global/utils/index.js"),a=r("./global/index.js"),o=r("./global/math/index.js"),s=r("./core/reader/index.js"),l=r("./core/vertex/index.js"),u=r("./core/resource/Tw2Resource.js"),c=r("./core/Tw2Error.js"),f=r("./core/resource/Tw2CakeReader.js"),d=r("./core/resource/Tw2WavefrontReader.js"),h=r("./core/geometry/index.js"),m=n.meta.type("Tw2GeometryRes","TriGeometryRes")(i=class e extends u.Tw2Resource{constructor(...e){super(...e),this.meshes=[],this.minBounds=o.vec3.fromValues(0,0,0),this.maxBounds=o.vec3.fromValues(0,0,0),this.boundsSpherePosition=o.vec3.create(),this.boundsSphereRadius=0,this.models=[],this.animations=[],this.systemMirror=a.resMan.systemMirror,this._requestResponseType=null,this._extension=null}GetBoundingBox(e,t){return o.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&o.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return o.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&o.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){var t=this.minBounds,r=this.maxBounds;o.box3.bounds.empty(t,r);for(var i=0;i<this.meshes.length;i++){var n=this.meshes[i];n.RebuildBounds(e),o.box3.bounds.union(t,r,t,r,n.minBounds,n.maxBounds)}this.boundsSphereRadius=o.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}GetInstanceBuffer(e){return e<this.meshes.length?this.meshes[e].buffer:void 0}GetInstanceDeclaration(e){return this.meshes[e].declaration}GetInstanceStride(e){return this.meshes[e].declaration.stride}GetInstanceCount(e){return 4*this.meshes[e].bufferLength/this.meshes[e].declaration.stride}DoCustomLoad(e,t){switch(this._extension=null,this._requestResponseType=null,t){case"wbg":this._extension=t,this._requestResponseType="arraybuffer";break;case"cake":case"obj":this._extension=t,this._requestResponseType="text";break;default:throw new u.ErrResourceFormatUnsupported({format:t})}}Prepare(e){switch(this.meshes.splice(0),this.models.splice(0),this.animations.splice(0),o.vec3.set(this.minBounds,0,0,0),o.vec3.set(this.maxBounds,0,0,0),o.vec3.set(this.boundsSpherePosition,0,0,0),this.boundsSphereRadius=0,this._extension){case"wbg":this.PrepareWBG(e);break;case"cake":this.PrepareCustom(f.Tw2CakeReader.construct(e));break;case"obj":this.PrepareCustom(d.Tw2WaveFrontReader.construct(e));break;default:throw new u.ErrResourceFormatUnsupported({format:this._extension})}}PrepareCustom(e){for(var t=a.device.gl,r=0;r<e.length;r++){var{bufferData:i,indexData:n,declaration:o,areas:s,name:l="".concat(this.path,"_model_").concat(r)}=e[r],u=new h.Tw2GeometryMesh;this.meshes[r]=u,u.name=l,u.declaration=o,u.bufferLength=i.length,u.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u.buffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),u.indexes=t.createBuffer(),u.indexType=2===n.BYTES_PER_ELEMENT?t.UNSIGNED_SHORT:t.UNSIGNED_INT,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u.indexes),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW);for(var c=0;c<s.length;++c){var{name:f,start:d,count:m}=s[c],b=new h.Tw2GeometryMeshArea;b.name=f,b.start=d,b.count=m,u.areas.push(b),u.RebuildAreaBounds(b,i,n,!0)}u._areas=s.length,u._faces=n.length/3,u._vertices=i.length/(u.declaration.stride/4),this.systemMirror&&(u.bufferData=i,u.indexData=n),this.models[r]=new h.Tw2GeometryModel}this.RebuildBounds(),this.OnPrepared()}PrepareWBG(t){var r=a.device.gl,i=new s.Tw2BinaryReader(new Uint8Array(t));i.ReadUInt8();for(var n=i.ReadUInt8(),l=0;l<n;++l){var u=new h.Tw2GeometryMesh;u.name=i.ReadString();var c=e.ReadVertexBuffer(i,u.declaration,this.path);c?(u.bufferLength=c.length,u.buffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,u.buffer),r.bufferData(r.ARRAY_BUFFER,c,r.STATIC_DRAW)):u.buffer=null;var f=e.ReadIndexBuffer(i);f?(u.indexes=r.createBuffer(),u.indexType=2===f.BYTES_PER_ELEMENT?r.UNSIGNED_SHORT:r.UNSIGNED_INT,r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,u.indexes),r.bufferData(r.ELEMENT_ARRAY_BUFFER,f,r.STATIC_DRAW)):u.indexes=null;for(var d=i.ReadUInt8(),m=0;m<d;++m){var b=new h.Tw2GeometryMeshArea;u.areas.push(b),b.name=i.ReadString(),b.start=i.ReadUInt32()*f.BYTES_PER_ELEMENT,b.count=3*i.ReadUInt32(),o.vec3.set(b.minBounds,i.ReadFloat32(),i.ReadFloat32(),i.ReadFloat32()),o.vec3.set(b.maxBounds,i.ReadFloat32(),i.ReadFloat32(),i.ReadFloat32()),b.boundsSphereRadius=o.box3.bounds.toPositionRadius(b.minBounds,b.maxBounds,b.boundsSpherePosition),o.box3.bounds.isEmpty(b.minBounds,b.maxBounds)&&(u.RebuildAreaBounds(b,c,f,!0)||console.log("Could not generate bounds for area: "+b.name||!1))}var p=i.ReadUInt8();u.boneBindings=[];for(var v=0;v<p;++v)u.boneBindings[v]=i.ReadString();var g=i.ReadUInt16();if((g||this.systemMirror)&&(u.bufferData=c,u.indexData=f),g){u.blendShapes=[];for(var y=0;y<g;++y)u.blendShapes[y]=new h.Tw2BlendShapeData,u.blendShapes[y].name=i.ReadString(),u.blendShapes[y].buffer=e.ReadVertexBuffer(i,u.blendShapes[y].declaration,this.path),u.blendShapes[y].indexes=e.ReadIndexBuffer(i)}u._areas=d,u._faces=f.length/3,u._vertices=c.length/(u.declaration.stride/4),this.meshes[l]=u}this.RebuildBounds();for(var w=i.ReadUInt8(),_=0;_<w;++_){var E=new h.Tw2GeometryModel;E.name=i.ReadString(),E.skeleton=new h.Tw2GeometrySkeleton;for(var T=i.ReadUInt8(),S=0;S<T;++S){var j=new h.Tw2GeometryBone;j.name=i.ReadString();var R=i.ReadUInt8();if(j.parentIndex=i.ReadUInt8(),255===j.parentIndex&&(j.parentIndex=-1),0!=(1&R)?o.vec3.set(j.position,i.ReadFloat32(),i.ReadFloat32(),i.ReadFloat32()):o.vec3.set(j.position,0,0,0),0!=(2&R)?o.quat.set(j.orientation,i.ReadFloat32(),i.ReadFloat32(),i.ReadFloat32(),i.ReadFloat32()):o.quat.identity(j.orientation),0!=(4&R))for(var P=0;P<9;++P)j.scaleShear[P]=i.ReadFloat32();else o.mat3.identity(j.scaleShear);E.skeleton.bones[S]=j}for(var x=0;x<E.skeleton.bones.length;++x)E.skeleton.bones[x].UpdateTransform(),-1!==E.skeleton.bones[x].parentIndex?o.mat4.multiply(E.skeleton.bones[x].worldTransform,E.skeleton.bones[E.skeleton.bones[x].parentIndex].worldTransform,E.skeleton.bones[x].localTransform):o.mat4.copy(E.skeleton.bones[x].worldTransform,E.skeleton.bones[x].localTransform),o.mat4.invert(E.skeleton.bones[x].worldTransformInv,E.skeleton.bones[x].worldTransform);for(var z=i.ReadUInt8(),O=0;O<z;++O){var A=i.ReadUInt8();A<this.meshes.length&&e.BindMeshToModel(this.meshes[A],E,this)}this.models[this.models.length]=E}for(var M=i.ReadUInt8(),C=0;C<M;++C){var D=new h.Tw2GeometryAnimation;D.name=i.ReadString(),D.duration=i.ReadFloat32();for(var I=i.ReadUInt8(),L=0;L<I;++L){var F=new h.Tw2GeometryTrackGroup;F.name=i.ReadString();for(var G=0;G<this.models.length;++G)if(this.models[G].name===F.name){F.model=this.models[G];break}for(var B=i.ReadUInt8(),N=0;N<B;++N){var k=new h.Tw2GeometryTransformTrack;if(k.name=i.ReadString(),k.orientation=e.ReadCurve(i),k.position=e.ReadCurve(i),k.scaleShear=e.ReadCurve(i),k.orientation)for(var U=0,V=0,H=0,q=0,W=0;W<k.orientation.controls.length;W+=4){var Y=k.orientation.controls[W],K=k.orientation.controls[W+1],X=k.orientation.controls[W+2],Q=k.orientation.controls[W+3];U*Y+V*K+H*X+q*Q<0&&(k.orientation.controls[W]=-Y,k.orientation.controls[W+1]=-K,k.orientation.controls[W+2]=-X,k.orientation.controls[W+3]=-Q),U=Y,V=K,H=X,q=Q}F.transformTracks[F.transformTracks.length]=k}D.trackGroups[D.trackGroups.length]=F}this.animations[this.animations.length]=D}this.OnPrepared()}static BindMeshToModel(e,t,r){var i=new h.Tw2GeometryMeshBinding;i.mesh=e;for(var n=0;n<i.mesh.boneBindings.length;++n){var a=i.mesh.boneBindings[n],o=t.FindBoneByName(a);if(!o)throw new g({path:r.path,mesh:i.mesh.name,bone:a,model:t.name});i.bones[i.bones.length]=o}t.meshBindings[t.meshBindings.length]=i}RenderAreasInstanced(e,t,r,i,n,o,s,l,u){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;var c=a.device,f=c.gl,d=this.meshes[e],h=i.GetPassCount(n);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,d.indexes);for(var m=0;m<h;++m){i.ApplyPass(n,m);var b=i.GetPassInput(n,m);if(0!==b.elements.length){f.bindBuffer(f.ARRAY_BUFFER,d.buffer),d.declaration.SetPartialDeclaration(c,b,d.declaration.stride),f.bindBuffer(f.ARRAY_BUFFER,o);var p=s.SetPartialDeclaration(c,b,l,0,1);c.ApplyShadowState();for(var g=0;g<r;++g)if(g+t<d.areas.length){for(var y=d.areas[g+t],w=y.start,_=y.count;g+1<r;){if(!(y=d.areas[g+1+t]))return this.OnError(new v({path:this.path,areaIndex:g+1+t})),!1;if(y.start!==w+2*_)break;_+=y.count,++g}f.drawElementsInstanced(f.TRIANGLES,_,d.indexType,w,u)}s.ResetInstanceDivisors(c,p)}}return!0}RenderAreas(e,t,r,i,n){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;var o=a.device,s=o.gl,l=this.meshes[e]||this.meshes[0],u=i.GetPassCount(n);s.bindBuffer(s.ARRAY_BUFFER,l.buffer),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l.indexes);for(var c=0;c<u;++c){i.ApplyPass(n,c);var f=i.GetPassInput(n,c);if(!l.declaration.SetDeclaration(o,f,l.declaration.stride))return this.OnError(new y({path:this.path,pass:c,passInput:f,meshStride:l.declaration.stride})),!1;o.ApplyShadowState();for(var d=0;d<r;++d)if(d+t<l.areas.length){for(var h=l.areas[d+t],m=h.start,b=h.count;d+1<r;){if(!(h=l.areas[d+1+t]))return this.OnError(new v({path:this.path,areaIndex:d+1+t})),!1;if(h.start!==m+2*b)break;b+=h.count,++d}s.drawElements(s.TRIANGLES,b,l.indexType,m)}}return!0}RenderLines(e,t,r,i,n){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;var o=a.device,s=o.gl,l=this.meshes[e],u=i.GetPassCount(n);s.bindBuffer(s.ARRAY_BUFFER,l.buffer),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l.indexes);for(var c=0;c<u;++c){i.ApplyPass(n,c);var f=i.GetPassInput(n,c);if(!l.declaration.SetDeclaration(o,f,l.declaration.stride))return this.OnError(new y({path:this.path,pass:c,passInput:f,meshStride:l.declaration.stride})),!1;o.ApplyShadowState();for(var d=0;d<r;++d)if(d+t<l.areas.length){for(var h=l.areas[d+t],m=h.start,b=h.count;d+1<r;){if(!(h=l.areas[d+1+t]))return this.OnError(new v({path:this.path,areaIndex:d+1+t})),!1;if(h.start!==m+2*b)break;b+=h.count,++d}s.drawElements(s.LINES,b,l.indexType,m)}}return!0}RenderDebugInfo(e){if(!this.IsGood())return!1;for(var t=0;t<this.models.length;++t)if(this.models[t].skeleton)for(var r=0;r<this.models[t].skeleton.bones.length;++r){var i=this.models[t].skeleton.bones[r];if(i.parentIndex>=0){var n=this.models[t].skeleton.bones[i.parentIndex];e.AddLine([i.worldTransform[12],i.worldTransform[13],i.worldTransform[14]],[n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[0,.7,0,1],[0,.7,0,1])}}}Unload(e){for(var t=0;t<this.meshes.length;++t){var r=a.device.gl;this.meshes[t].buffer&&(r.deleteBuffer(this.meshes[t].buffer),this.meshes[t].buffer=null),this.meshes[t].indexes&&(r.deleteBuffer(this.meshes[t].indexes),this.meshes[t].indexes=null)}return this.OnUnloaded(e),!0}static ReadVertexBuffer(e,t,r){for(var i=e.ReadUInt8(),n=0,o=0;o<i;++o){var s=new l.Tw2VertexElement;s.usage=e.ReadUInt8(),s.usageIndex=e.ReadUInt8(),s.fileType=e.ReadUInt8(),s.type=a.device.gl.FLOAT,s.elements=1+(s.fileType>>5),s.offset=4*n,t.elements[o]=s,n+=s.elements}t.RebuildHash(),t.stride=4*n;var u=e.ReadUInt32();if(0===u)return null;for(var c=new Float32Array(n*u),f=0,d=0;d<u;++d)for(var h=0;h<i;++h){var m=t.elements[h];switch(15&m.fileType){case 0:if(0!=(16&m.fileType))for(var b=0;b<m.elements;++b)c[f++]=e.ReadInt8()/127;else for(var p=0;p<m.elements;++p)c[f++]=e.ReadInt8();break;case 1:if(0!=(16&m.fileType))for(var v=0;v<m.elements;++v)c[f++]=e.ReadInt8()/32767;else for(var g=0;g<m.elements;++g)c[f++]=e.ReadInt16();break;case 2:for(var y=0;y<m.elements;++y)c[f++]=e.ReadInt32();break;case 3:for(var _=0;_<m.elements;++_)c[f++]=e.ReadFloat16();break;case 4:for(var E=0;E<m.elements;++E)c[f++]=e.ReadFloat32();break;case 8:if(0!=(16&m.fileType))for(var T=0;T<m.elements;++T)c[f++]=e.ReadUInt8()/255;else for(var S=0;S<m.elements;++S)c[f++]=e.ReadUInt8();break;case 9:if(0!=(16&m.fileType))for(var j=0;j<t.elements[h].elements;++j)c[f++]=e.ReadUInt8()/65535;else for(var R=0;R<m.elements;++R)c[f++]=e.ReadUInt16();break;case 10:for(var P=0;P<m.elements;++P)c[f++]=e.ReadUInt32();break;default:throw new w({path:r,key:"fileType",value:15&m.fileType})}}return c}static ReadIndexBuffer(e){var t=e.ReadUInt8(),r=e.ReadUInt32();if(0===t){for(var i=new Uint16Array(r),n=0;n<r;++n)i[n]=e.ReadUInt16();return i}for(var a=new Uint32Array(r),o=0;o<r;++o)a[o]=e.ReadUInt32();return a}static ReadCurve(e){if(0===e.ReadUInt8())return null;var t=new h.Tw2GeometryCurve;t.dimension=e.ReadUInt8(),t.degree=e.ReadUInt8();var r=e.ReadUInt32();t.knots=new Float32Array(r);for(var i=0;i<r;++i)t.knots[i]=e.ReadFloat32();var n=e.ReadUInt32();t.controls=new Float32Array(n);for(var a=0;a<n;++a)t.controls[a]=e.ReadFloat32();return t}})||i;class b extends c.Tw2Error{constructor(e){super(e,"Input geometry mesh lacks element required by particle system")}}class p extends c.Tw2Error{constructor(e){super(e,"Input geometry mesh elements do not have the required number of components")}}class v extends c.Tw2Error{constructor(e){super(e,"Geometry mesh missing expected area at index %areaIndex%")}}class g extends c.Tw2Error{constructor(e){super(e,"Geometry mesh has invalid bone name for model")}}class y extends c.Tw2Error{constructor(e){super(e,"Error binding geometry mesh to effect")}}class w extends c.Tw2Error{constructor(e){super(e,"Invalid geometry file type (%fileType%)")}}},"./core/resource/Tw2LoadingObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LoadingObject",(function(){return s}));var i=r("./global/index.js"),n=r("./core/resource/Tw2Resource.js"),a=r("./core/reader/Tw2ObjectReader.js"),o=r("./core/reader/Tw2BlackReader.js");class s extends n.Tw2Resource{constructor(...e){super(...e),this.path="",this._view=null,this._inPrepare=null,this._objects=[],this._constructor=null,this._requestResponseType="arraybuffer"}AddObject(e,t){var r=this.GetLastError();r?t&&t(r):this._objects.push({onResolved:e,onRejected:t})}Prepare(e){var t=this.path.lastIndexOf(".");if(-1===t)return null;var r,i=this.path.substr(t+1);if(null===this._inPrepare){switch(this._view=e,i){case"red":try{this._constructor=new a.Tw2ObjectReader(e)}catch(t){try{this._constructor=new o.Tw2BlackReader(e)}catch(e){throw t}}break;case"black":this._constructor=new o.Tw2BlackReader(e);break;default:throw new n.ErrResourceFormatUnsupported({format:i})}this._inPrepare=0,r=this._constructor.Construct()}for(;this._inPrepare<this._objects.length;){var s=this._objects[this._inPrepare];try{r?(s.onResolved(r),r=null):s.onResolved(this._constructor.Construct())}catch(e){s.onRejected&&(s.onRejected(e),s.onRejected=null),this.OnWarning({err:e,message:"Error preparing child object"})}this._inPrepare++}this.OnPrepared()}OnError(e){super.OnError(e);for(var t=0;t<this._objects.length;t++)this._objects[t].onRejected&&this._objects[t].onRejected(e);return i.tw2.RemoveResource(this.path),this._objects.splice(0),e}OnPrepared(e){i.tw2.RemoveResource(this.path),this._objects.splice(0),super.OnPrepared(e)}}s.isLoadingObject=!0},"./core/resource/Tw2Notifications.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Notifications",(function(){return n}));var i=r("./global/utils/index.js");class n{RegisterNotification(e){this.HasNotification(e)||this.constructor.onNotification&&this.constructor.onNotification(this,e)||(this._notifications=this._notifications||new Set,this._notifications.add(e))}UpdateNotifications(e,t){this._notifications&&(this._notifications.forEach(r=>{var n=!1;Object(i.isFunction)(r)?n=r(this,t,e):e&&e in r&&(n=r[e](this,t)),n&&this.UnregisterNotification(r)}),0===this._notifications.size&&this.ClearNotifications())}HasNotification(e){return!!this._notifications&&this._notifications.has(e)}UnregisterNotification(e){this._notifications&&this._notifications.delete(e)}ClearNotifications(){this._notifications&&(this._notifications.clear(),Reflect.deleteProperty(this,"_notifications"))}}n.onNotification=null},"./core/resource/Tw2Resource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Resource",(function(){return c})),r.d(t,"ErrResourceFormatInvalid",(function(){return f})),r.d(t,"ErrResourceFormatUnsupported",(function(){return d})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return h}));var i,n,a,o=r("./global/index.js"),s=r("./global/utils/index.js"),l=r("./core/Tw2Error.js"),u=r("./core/resource/Tw2Notifications.js"),c=s.meta.type("Tw2Resource")((a=n=class e extends u.Tw2Notifications{constructor(...t){super(...t),this.path="",this.activeFrame=0,this.doNotPurge=0,this._state=e.State.NO_INIT,this._errors=[],this._requested=null,this._requestResponseType=null}get isResource(){return!0}get requestResponseType(){return this._requestResponseType}Lock(){this.doNotPurge++,this.activeFrame=o.resMan.activeFrame,(this.IsPurged()||this.IsUnloaded())&&this.Reload({hide:!0,detail:"locked"})}Unlock(){this.doNotPurge=Math.max(this.doNotPurge-1,0)}HasErrored(){return this._state===e.State.ERROR}HasCompleted(){return this.HasErrored()||this.IsPurged()||this.HasPrepared()}HasRequested(){return this._state===e.State.REQUESTED||this.HasLoaded()}HasLoaded(){return this._state===e.State.LOADED||this._state===e.State.PREPARED}HasPrepared(){return this._state===e.State.PREPARED}IsGood(){return this.KeepAlive(),this.HasLoaded()}IsUnloaded(){return this._state===e.State.UNLOADED}IsPurged(){return this._state===e.State.PURGED}Unload(e){return!1}Reload(e){this.HasLoaded()&&this.Unload({hide:!0,detail:"reloading"}),(this.IsPurged()||this.IsUnloaded())&&o.resMan.LoadResource(this,e)}KeepAlive(){this.activeFrame=o.resMan.activeFrame,(this.IsPurged()||this.IsUnloaded())&&this.Reload({hide:!0,detail:"inuse"})}GetErrors(){return Array.from(this._errors)}GetLastError(){return this._errors[0]}OnWarning(t){o.resMan.OnPathEvent(this.path,"warning",t),this.UpdateNotifications(e.Callback.WARNING)}OnDebug(t){o.resMan.OnPathEvent(this.path,"debug",t),this.UpdateNotifications(e.Callback.DEBUG)}OnError(t=new l.Tw2Error){var r=this.HasLoaded();return this._errors.includes(t)||this._errors.unshift(t),this._SetState(e.State.ERROR),r&&this.Unload({hide:!0,detail:"errored"}),o.resMan.OnPathEvent(this.path,"error",t),this.UpdateNotifications(e.Callback.ERROR,t),t}OnRequested(t){var r=this._state===e.State.NO_INIT?"REQUESTED":"RELOADING";this._SetState(e.State.REQUESTED)&&(this._requested=Date.now(),o.resMan.OnPathEvent(this.path,r.toLowerCase(),t),this.UpdateNotifications(e.Callback[r]))}OnLoaded(t={}){this._SetState(e.State.LOADED)&&(null===this._requested&&(this._requested=Date.now()),t.time=.001*(Date.now()-this._requested),o.resMan.OnPathEvent(this.path,"loaded",t),this.UpdateNotifications(e.Callback.LOADED))}OnPrepared(t={}){this._SetState(e.State.PREPARED)&&(null===this._requested&&(this._requested=Date.now()),t.time=.001*(Date.now()-this._requested),o.resMan.OnPathEvent(this.path,"prepared",t),this.UpdateNotifications(e.Callback.PREPARED))}OnUnloaded(t){this._SetState(e.State.UNLOADED)&&(o.resMan.OnPathEvent(this.path,"unloaded",t),this.UpdateNotifications(e.Callback.UNLOADED))}OnPurged(t){this._SetState(e.State.PURGED),o.resMan.OnPathEvent(this.path,"purged",t),this.UpdateNotifications(e.Callback.PURGED,this.GetLastError())}_SetState(t){return this._state!==e.State.ERROR&&(this._state=t,!0)}RegisterCallbacks(e,t){if(this.KeepAlive(),e||t){this.RegisterNotification((function(r,i){return!!r.HasCompleted()&&(i?t&&t(i):e&&e(r),!0)}))}}static onNotification(t,r){var i,n;switch(t._state){case e.State.ERROR:i=e.Callback.ERROR,n=t.GetLastError();break;case e.State.REQUESTED:i=e.Callback.REQUESTED;break;case e.State.LOADED:i=e.Callback.LOADED;break;case e.State.PREPARED:i=e.Callback.PREPARED;break;case e.State.UNLOADED:i=e.Callback.UNLOADED;break;case e.State.PURGED:i=e.Callback.PURGED,n=t.GetLastError()}return Object(s.isFunction)(r)?!!r(t,n,i):i&&i in r?!!r[i](t,n):"OnResEvent"in r&&!!r.OnResEvent(t,n)}static parentOnResEvent(e,t,r,i){if(e[t]===r){var{Event:n,State:a}=this,o=!1;switch(r._state){case a.ERROR:e.EmitEvent(n.RES_ERROR,e,r,i),o=!0;break;case a.PURGED:e.EmitEvent(n.RES_PURGED,e,r);break;case a.UNLOADED:e.EmitEvent(n.RES_UNLOADED,e,r);break;case a.REQUESTED:e.EmitEvent(n.RES_REQUESTED,e,r);break;case a.LOADED:e.EmitEvent(n.RES_LOADED,e,r);break;case a.PREPARED:e.EmitEvent(n.RES_PREPARED,e,r),o=!0}o&&(e.EmitEvent(n.RES_COMPLETED,e,r,i),r.UnregisterNotification(e))}else r.UnregisterNotification(e)}static parentOnListener(t,r,i,n,a){var o=t[r];if(!o)return!1;var s,{Event:l}=e;switch(i){case l.RES_COMPLETED:return o.HasCompleted()&&n.call(a,t,o,o.GetLastError()),!1;case l.RES_ERROR:return!!o.HasErrored()&&(n.call(a,t,o,o.GetLastError()),!0);case l.RES_UNLOADED:o.IsUnloaded()&&(s=!0);break;case l.RES_PURGED:o.IsPurged()&&(s=!0);break;case l.RES_REQUESTED:o.HasRequested()&&(s=!0);break;case l.RES_LOADED:o.HasLoaded()&&(s=!0);break;case l.RES_PREPARED:o.HasPrepared()&&(s=!0)}return!!s&&(n.call(a,t,o),!0)}},n.State={ERROR:-3,PURGED:-2,UNLOADED:-1,NO_INIT:0,REQUESTED:1,LOADED:2,PREPARED:3},n.Callback={ERROR:"OnResError",PURGED:"OnResPurged",UNLOADED:"OnResUnloaded",REQUESTED:"OnResRequested",LOADED:"OnResLoaded",PREPARED:"OnResPrepared",WARNING:"OnResWarning",DEBUG:"OnResDebug"},n.Event={RES_UNLOADED:"unloaded",RES_PURGED:"purged",RES_ERROR:"error",RES_REQUESTED:"requested",RES_LOADED:"loaded",RES_PREPARED:"prepared",RES_REMOVED:"removed",RES_COMPLETED:"completed"},i=a))||i;c.prototype.DoCustomLoad=null;class f extends l.Tw2Error{constructor(e){super(e,"Resource format invalid: %format% (%reason=unknown%)")}}class d extends l.Tw2Error{constructor(e){super(e,"Resource format not supported: %format% (%reason=unknown%)")}}class h extends l.Tw2Error{constructor(e){super(e,"Resource format not implemented: %format% (%reason=unknown%)")}}},"./core/resource/Tw2TextureRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureRes",(function(){return c}));var i,n=r("./global/utils/index.js"),a=r("./global/math/index.js"),o=r("./global/index.js"),s=r("./core/engine/Tw2ResMan.js"),l=r("./core/resource/Tw2Resource.js"),u=r("./global/constant/index.js"),c=n.meta.type("Tw2TextureRes")(i=class e extends l.Tw2Resource{constructor(...e){super(...e),this.texture=null,this.attachment=null,this._currentSampler=0,this._isAttached=!1,this._extension="",this._width=0,this._height=0,this._type=null,this._format=null,this._internalFormat=null,this._target=null,this._hasMipMaps=!1,this._isCube=!1,this._isPowerOfTwo=!1,this._useNoMipFilter=!1}DeleteGL(){this.texture&&(o.device.gl.deleteTexture(this.texture),this.texture=null)}Prepare(t){var r=o.device.gl,i="ccpGLFormat"in t?t.ccpGLFormat:r.RGBA;switch(this.DeleteGL(),this._extension){case"cube":this._target=r.TEXTURE_CUBE_MAP,this._format=i,this._type=r.UNSIGNED_BYTE,this._isPowerOfTwo=e.IsPowerOfTwo(t.height),this._width=this._height=t.height,this.texture=r.createTexture(),r.bindTexture(this._target,this.texture);var n=document.createElement("canvas");n.width=n.height=t.height;for(var a=n.getContext("2d"),s=0;s<6;++s)a.drawImage(t,s*n.width,0,n.width,n.height,0,0,n.width,n.height),r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,this._format,this._format,this._type,n);(this._isPowerOfTwo||o.device.glVersion>1)&&r.generateMipmap(this._target),r.bindTexture(this._target,null),this._hasMipMaps=!0;break;case"png":this._target=r.TEXTURE_2D,this._format=i,this._type=r.UNSIGNED_BYTE,this._isPowerOfTwo=e.IsPowerOfTwo(t.width,t.height),this.texture=r.createTexture(),r.bindTexture(this._target,this.texture),r.texImage2D(this._target,0,this._format,this._format,this._type,t),(this._isPowerOfTwo||o.device.glVersion>1)&&(r.generateMipmap(this._target),this._hasMipMaps=!0),r.bindTexture(this._target,null),this._width=t.width,this._height=t.height;break;case"dds":var c=e.GetDDSInfo(t);c.filePath=this.path;var{name:f,fourCC:d,isRGB:h,isLuminance:m,isCube:b,blockBytes:p,dataOffset:v,faces:g,isCompressed:y,clientSupport:w,width:_,height:E,mipmaps:T}=c;if(!w)throw new l.ErrResourceFormatUnsupported({format:"DDS",reason:f,data:c});if(!y&&!h&&!m)throw new l.ErrResourceFormatNotImplemented({format:"DDS",reason:f,data:c});(h||m||d===u.FOURCC_ATI1||d===u.FOURCC_ATI2)&&o.tw2.Debug({name:"Tw2TextureRes",message:"Partial or incomplete support for ".concat(f,": ").concat(this.path),data:c}),1!==o.device.glVersion||c.isPowerOfTwo||(T=1,o.tw2.Debug({name:"Tw2TextureRes",message:"Texture not power of 2: ".concat(this.path),data:c})),this._type=c.type,this._format=c.format,this._internalFormat=c.internalFormat,this._target=c.target,this._mipCount=T,this._hasMipMaps=this._mipCount>1,this._isCube=b,this._isPowerOfTwo=c.isPowerOfTwo,this._width=_,this._height=E,this._useNoMipFilter=!0,this.texture=r.createTexture(),r.bindTexture(this._target,this.texture);for(var S=r.getParameter(r.UNPACK_ALIGNMENT),j=0;j<g;j++)for(var R=_,P=E,x=v,z=b?r.TEXTURE_CUBE_MAP_POSITIVE_X+j:this._target,O=void 0,A=void 0,M=0;M<this._mipCount;M++){if(y)O=Math.max(4,R)/4*Math.max(4,P)/4*p,A=new Uint8Array(t,x,O),r.compressedTexImage2D(z,M,this._internalFormat,R,P,0,A),x+=O;else if(m){S=1;var C=R;O=Math.floor((R+S-1)/S)*S*(E-1)+C,r.pixelStorei(r.UNPACK_ALIGNMENT,S),A=e.GetLuminanceArrayBuffer(R,P,t.byteOffset+x,O,t.buffer),r.texImage2D(z,M,this._internalFormat,R,P,0,this._format,this._type,A),x+=O}else{var{rOffset:D,bOffset:I,gOffset:L,aOffset:F,bpp:G}=c;S=1,r.pixelStorei(r.UNPACK_ALIGNMENT,S),i===r.RGB?(O=R*P*3,A=e.GetRGBArrayBuffer(R,P,t.byteOffset+x,O,t.buffer,D,L,I)):(O=R*P*4,A=e.GetRGBAArrayBuffer(R,P,t.byteOffset+x,O,t.buffer,D,L,I,F)),r.texImage2D(z,M,this._internalFormat,R,P,0,this._format,this._type,A),x+=R*P*(G/8)}R=Math.max(R>>1,1),P=Math.max(P>>1,1)}r.bindTexture(this._target,null);break;default:throw new l.ErrResourceFormatUnsupported({format:this._extension})}this._isAttached=!1,this.OnPrepared()}Bind(e,t){var r=o.device,{gl:i}=o.device;if(this.KeepAlive(),this.attachment&&this.attachment.UpdateTextureRes(this),null===this._target)this._target=e.samplerType,this._isCube=e.samplerType===i.TEXTURE_CUBE_MAP;else if(e.samplerType!==this._target)return;if(this.texture)e.isVolume&&i.uniform1f(t,this._height/this._width),i.bindTexture(this._target,this.texture),null!==e.hash&&e.hash===this._currentSampler||(e.Apply(r,this._hasMipMaps,this._useNoMipFilter),this._currentSampler=e.hash);else{var n=this._target===i.TEXTURE_2D?r.GetFallbackTexture():r.GetFallbackCubeMap();i.bindTexture(this._target,n)}}_ClearMeta(){this._extension=null,this._isAttached=!1,this._isCube=null,this._target=null,this._type=null,this._internalFormat=null,this._mipCount=null,this._hasMipMaps=null,this._useNoMipFilter=null}DoCustomLoad(t,r){switch(r){case"cube":this._extension=r,this._isCube=!0,t=t.substr(0,t.length-5)+".png";break;case"qube":this._extension="cube",t=t.replace(".qube",".cube"),this._isCube=!0;break;case"png":this._extension=r,this._isCube=!1;break;case"dds":return this._extension=r,o.resMan.Fetch(e.AddMipLevelSkipCount(t),"arraybuffer").then(e=>{this.OnLoaded(),o.resMan.Queue(this,e)}).catch(e=>{this.OnError(e)}),!0;default:throw new l.ErrResourceFormatUnsupported({format:r})}o.resMan.AddPendingLoad(t);var i=new Image;return i.crossOrigin="anonymous",i.onerror=()=>{o.resMan.RemovePendingLoad(t),this.OnError(new s.ErrHTTPRequest({path:t}))},i.onload=()=>{o.resMan.RemovePendingLoad(t),o.resMan.Queue(this,i),this.OnLoaded()},i.src=e.AddMipLevelSkipCount(t),!0}Unload(e){return this.DeleteGL(),this._ClearMeta(),this.OnUnloaded(e),!0}Attach(e,t=""){this.DeleteGL(),this._ClearMeta(),this.path=t,this.texture=e,this._isAttached=!0,this.OnLoaded({hide:!0,path:"attachment"}),this.OnPrepared({hide:!0,path:"attachment"})}Reload(e){if(!this._isAttached)return super.Reload(e)}static IsPowerOfTwo(...e){for(var t=0;t<e.length;t++)if(0!=(e[t]&e[t]-1))return!1;return!0}static AddMipLevelSkipCount(e){var t=o.device;if(t.mipLevelSkipCount>0){var r=e.lastIndexOf(".");r>=0&&(e=e.substr(0,r-2)+"."+t.mipLevelSkipCount.toString()+e.substr(r))}return e}static Int32ToFourCC(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}static CreateImageFrom2DTexture(e,t=512,r=512,i=o.device.gl.RGBA){var n=o.device.gl,a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var s=new Uint8Array(t*r*4);n.readPixels(0,0,t,r,n.RGBA,n.UNSIGNED_BYTE,s),n.deleteFramebuffer(a);var l=document.createElement("canvas");l.width=t,l.height=r;var u=l.getContext("2d"),c=u.createImageData(t,r);c.data.set(s),u.putImageData(c,0,0);var f=new Image;return f.src=l.toDataURL(),f}static GetDDSInfo(t){if(!t.byteLength)throw new l.ErrResourceFormatInvalid({format:"DDS",reason:"file is empty"});var r=new Int32Array(t,0,u.DDS_HEADER_LENGTH_INT);if(r[u.DDS_HEADER_OFFSET_MAGIC]!==u.DDS_MAGIC)throw new l.ErrResourceFormatInvalid({format:"DDS",reason:"missing magic number"});var{gl:i}=o.device,n=r[u.DDS_HEADER_OFFSET_PF_FOURCC],s=new Int32Array(t.buffer,t.byteOffset,u.DDS_HEADER_LENGTH_INT+4),c=r[u.DDS_HEADER_OFFSET_PF_FLAGS&&u.DDPF_FOURCC]===u.DDPF_FOURCC,f=c&&n===u.FOURCC_DXT10?s[u.DDS_HEADER_OFFSET_DXGI_FORMAT]:0,d=(r[u.DDS_HEADER_OFFSET_CAPS2]&u.DDSCAPS2_CUBEMAP)===u.DDSCAPS2_CUBEMAP,h=o.device.GetExtension("compressed_texture_s3tc"),m=o.device.GetExtension("EXT_texture_compression_rgtc"),b=r[u.DDS_HEADER_OFFSET_WIDTH],p=r[u.DDS_HEADER_OFFSET_HEIGHT],v=r[u.DDS_HEADER_OFFSET_RGB_BPP],g=r[u.DDS_HEADER_OFFSET_FLAGS]&u.DDSD_MIPMAPCOUNT,y={fourCC:n,width:b,height:p,isFourCC:c,isCube:d,name:e.Int32ToFourCC(n),isPowerOfTwo:e.IsPowerOfTwo(b,p),isLuminance:(r[u.DDS_HEADER_OFFSET_PF_FLAGS]&u.DDPF_LUMINANCE)===u.DDPF_LUMINANCE,hasAlpha:(r[u.DDS_HEADER_OFFSET_PF_FLAGS]&u.DDPF_ALPHAPIXELS)===u.DDPF_ALPHAPIXELS,isRGB:(r[u.DDS_HEADER_OFFSET_PF_FLAGS]&u.DDPF_RGB)===u.DDPF_RGB,isVolume:r[u.DDS_HEADER_OFFSET_CAPS2]&u.DDSCAPS2_VOLUME==u.DDSCAPS2_VOLUME,dataOffset:r[u.DDS_HEADER_OFFSET_SIZE]+4,mipmaps:g?Math.max(1,r[u.DDS_HEADER_OFFSET_MIPMAP_COUNT]):1,format:null,type:null,internalFormat:null,target:d?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,faces:d?6:1,isCompressed:!1,clientSupport:!1};switch(y.fourCC){case u.FOURCC_DXT1:y.blockBytes=8,y.internalFormat=h?h.COMPRESSED_RGBA_S3TC_DXT1_EXT:null,y.clientSupport=!!y.internalFormat,y.isCompressed=!0;break;case u.FOURCC_DXT3:y.blockBytes=16,y.internalFormat=h?h.COMPRESSED_RGBA_S3TC_DXT3_EXT:null,y.clientSupport=!!y.internalFormat,y.isCompressed=!0;break;case u.FOURCC_DXT5:y.blockBytes=16,y.internalFormat=h?h.COMPRESSED_RGBA_S3TC_DXT5_EXT:null,y.clientSupport=!!y.internalFormat,y.isCompressed=!0;break;case u.FOURCC_ATI1:y.blockBytes=8,y.internalFormat=m?m.COMPRESSED_RED_RGTC1_EXT:null,y.clientSupport=!!y.internalFormat,y.isCompressed=!0,y.format=i.UNSIGNED_BYTE,y.format=i.RED;break;case u.FOURCC_ATI2:y.blockBytes=16,y.internalFormat=m?m.COMPRESSED_RED_GREEN_RGTC2_EXT:null,y.clientSupport=!!y.internalFormat,y.isCompressed=!0,y.format=i.UNSIGNED_BYTE,y.internalFormat=i.RG;break;case u.FOURCC_D3DFMT_R16G16B16A16F:y.type=i.HALF_FLOAT,y.format=i.RGBA,y.clientSupport=!0;break;case u.FOURCC_D3DFMT_R32G32B32A32F:y.type=i.FLOAT,y.format=i.RGBA,y.clientSupport=!0;break;case u.FOURCC_DXT10:switch(y.dataOffset+=20,y.dxgiFormat=f,y.clientSupport=!0,f){case u.DXGI_FORMAT_R16G16B16A16_FLOAT:y.type=i.HALF_FLOAT,y.format=i.RGBA;break;case u.DXGI_FORMAT_R32G32B32A32_FLOAT:y.type=i.FLOAT,y.format=i.RGBA;break;case u.DXGI_FORMAT_B8G8R8X8_UNORM:y.isFourCC=!1,y.isRGB=!0,v=32;break;default:throw new l.ErrResourceFormatUnsupported({format:"DDS",reason:"DX10 ".concat(f),info:y})}break;default:if(y.isRGB){y.bpp=v,y.type=i.UNSIGNED_BYTE,y.clientSupport=!0,y.isUncompressedRGBA=!0,y.rOffset=a.num.getLongWordOrder(r[u.DDS_HEADER_OFFSET_R_MASK]),y.gOffset=a.num.getLongWordOrder(r[u.DDS_HEADER_OFFSET_G_MASK]),y.bOffset=a.num.getLongWordOrder(r[u.DDS_HEADER_OFFSET_B_MASK]),24===v?(y.name="RGB",y.format=i.RGB,y.internalFormat=1===o.device.glVersion?i.RGB:i.RGB8):(y.name="RGBA",y.format=i.RGBA,y.internalFormat=1===o.device.glVersion?i.RGBA:i.RGBA8,y.aOffset=a.num.getLongWordOrder(r[u.DDS_HEADER_OFFSET_A_MASK]));break}if(y.isLuminance){y.hasAlpha?(y.name="Luminance Alpha",y.type=i.UNSIGNED_BYTE,y.format=i.LUMINANCE_ALPHA,y.internalFormat=i.LUMINANCE_ALPHA):(y.name="Luminance",y.type=i.UNSIGNED_BYTE,y.format=i.LUMINANCE,y.internalFormat=i.LUMINANCE),y.clientSupport=!0;break}console.dir(y);var w=e.Int32ToFourCC(y.fourCC);throw new l.ErrResourceFormatUnsupported({format:"DDS",reason:"FOURCC ".concat(w),info:y})}return y.isFourCC&&y.isCompressed,y}static GetLuminanceArrayBuffer(e,t,r,i,n){for(var a=new Uint8Array(i),o=new Uint8Array(n,r),s=0,l=0;l<t;l++)for(var u=0;u<e;u++){var c=u+l*e;a[s]=o[c],s++}return a}static GetRGBArrayBuffer(e,t,r,i,n,a,o,s){for(var l=new Uint8Array(i),u=new Uint8Array(n,r,i),c=0,f=0;f<t;f++)for(var d=0;d<e;d++){var h=3*(d+f*e);l[c]=u[h+a],l[c+1]=u[h+o],l[c+2]=u[h+s],c+=3}return l}static GetRGBAArrayBuffer(e,t,r,i,n,a,o,s,l){for(var u=new Uint8Array(i),c=new Uint8Array(n,r,i),f=0,d=0;d<t;d++)for(var h=0;h<e;h++){var m=4*(h+d*e);u[f]=c[m+a],u[f+1]=c[m+o],u[f+2]=c[m+s],u[f+3]=c[m+l],f+=4}return u}})||i},"./core/resource/Tw2VideoRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VideoRes",(function(){return l}));var i,n=r("./global/utils/index.js"),a=r("./global/index.js"),o=r("./core/resource/Tw2Resource.js"),s=r("./core/engine/Tw2ResMan.js"),l=n.meta.type("Tw2VideoRes")(i=class extends o.Tw2Resource{constructor(...e){super(...e),this.texture=null,this.video=null,this.width=0,this.height=0,this.cycle=!0,this.playOnLoad=!0,this._currentSampler=0,this._currentTime=-1,this._playable=!1,this._isPlaying=!1,this._onPlaying=null,this._onPause=null,this._onEnded=null}IsGood(){return this.KeepAlive(),super.IsGood()&&this.video&&this._playable}KeepAlive(){this.activeFrame=a.resMan.activeFrame}Play(e=!1,t=null){this.cycle=e,this._onEnded=t,this.video&&this._playable?(this.video.loop=this.cycle,this.video.play()):this.playOnLoad=!0}Pause(){this.video?this.video.pause():this.playOnLoad=!1}Prepare(e){var t=a.device.gl;switch(this.DeleteGL(),this._extension){case"mp4":case"webm":case"ogg":this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video),t.bindTexture(t.TEXTURE_2D,null),this.width=this.video.width,this.height=this.video.height,this.video.loop=this.cycle,this.playOnLoad&&this.video.play();break;default:throw new o.ErrResourceFormatUnsupported({format:this._extension})}this.OnPrepared()}DoCustomLoad(e,t){switch(t){case"mp4":case"webm":case"ogg":this._extension=t;break;default:throw new o.ErrResourceFormatUnsupported({format:t})}return a.resMan.AddPendingLoad(e),this.video=document.createElement("video"),this.video.crossOrigin="anonymous",this.video.muted=!0,this.video.onerror=()=>{a.resMan.RemovePendingLoad(e),this.video=null,this.OnError(new s.ErrHTTPRequest({path:e}))},this.video.oncanplay=()=>{this._playable=!0,this.video.oncanplay=null,a.resMan.RemovePendingLoad(e),a.resMan.Queue(this,void 0,t),this.OnLoaded()},this.video.onended=()=>{this._isPlaying=!1,this._onEnded&&this._onEnded(this)},this.video.onpause=()=>{this._isPlaying=!1,this._onPause&&this._onPause(this)},this.video.onplaying=()=>{this._isPlaying=!0,this._onPlaying&&this._onPlaying(this)},this.video.src=e,!0}DeleteGL(){this.texture&&(a.device.gl.deleteTexture(this.texture),this.texture=null)}Unload(e){return this.DeleteGL(),this._extension=null,this._isPlaying=!1,this._playable=!1,this.playOnLoad=!0,this.video=null,this.OnUnloaded(e),!0}Attach(e,t=""){this.DeleteGL(),this.path=t,this.texture=e,this._isAttached=!0,this.OnLoaded({hide:!0,path:"attachment"}),this.OnPrepared({hide:!0,path:"attachment"})}Bind(e){var t=a.device,r=t.gl;this.KeepAlive();var i=e.samplerType;i===r.TEXTURE_2D&&(this.texture?(this._currentTime=this.video.currentTime,r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.video),r.bindTexture(r.TEXTURE_2D,null),r.bindTexture(i,this.texture),e.hash!==this._currentSampler&&(e.Apply(t,!1),this._currentSampler=e.hash)):r.bindTexture(r.TEXTURE_2D,t.GetFallbackTexture()))}})||i},"./core/resource/Tw2WavefrontReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2WaveFrontReader",(function(){return u}));var i=r("../node_modules/webgl-obj-loader/dist/webgl-obj-loader.min.js"),n=r("./core/resource/Tw2CakeReader.js"),a=r("./global/utils/index.js"),o=r("./core/vertex/index.js"),s=r("./global/constant/gl.js"),l=r("./global/tw2.js");class u{constructor(e){this.name="",this.areas=[],this.declaration=null,this.indexData=null,this.bufferData=null,this.boneBindings=[],this.blendShapes=[],this.models=[],this.animations=[];var t=new i.Mesh(e);function r(e,t,r){for(var i=[],n=0,a=0;a<e.length;a+=t){for(var o=[],s=0;s<t;s++)o[s]=e[n],n+=1;r&&o.push(0),i.push(o)}return i}this.declaration=new o.Tw2VertexDeclaration;var a=[],u=n.Tw2CakeReader.getDeclarationObjectByName("POSITION");u.vertices=r(t.vertices,3),a.push(u);var c=n.Tw2CakeReader.getDeclarationObjectByName("NORMAL");c.vertices=r(t.vertexNormals,3),a.push(c);var f=n.Tw2CakeReader.getDeclarationObjectByName("TEXCOORD0");f.vertices=r(t.textures,2),a.push(f);try{t.calculateTangentsAndBitangents();var d=n.Tw2CakeReader.getDeclarationObjectByName("TANGENT");d.vertices=r(t.tangents,3,!0),a.push(d);var h=n.Tw2CakeReader.getDeclarationObjectByName("BITANGENT");h.vertices=r(t.bitangents,3,!0),a.push(h)}catch(e){l.tw2.Debug({name:"Tw2WavefrontReader",message:"Could not generate tangents and bitangents..."})}for(var m=[],b=0;b<t.materialNames.length;b++){this.areas.push({name:t.materialNames[b],start:m.length*Uint32Array.BYTES_PER_ELEMENT,count:t.indicesPerMaterial[b].length});for(var p=0;p<t.indicesPerMaterial[b].length;p++)m.push(t.indicesPerMaterial[b][p])}for(var v=0,g=a.length?a[0].vertices.length:0,y=0;y<a.length;y++){var{vertices:w,usageIndex:_,usage:E,elements:T,name:S}=a[y];if(w.length!==g)throw new ReferenceError("Unexpected vertex count: ".concat(S));this.declaration.elements.push(o.Tw2VertexElement.from({usage:E,usageIndex:_,elements:T,type:s.GL_FLOAT,offset:4*v})),v+=T}this.declaration.RebuildHash(),this.declaration.stride=4*v;var j=g*v;if(j){this.bufferData=new Float32Array(j);for(var R=0,P=0;P<g;P++)for(var x=0;x<a.length;x++)for(var z=0;z<a[x].elements;z++)this.bufferData[R++]=a[x].vertices[P][z]}this.indexData=new n.Tw2CakeReader.IndexArray(m)}static construct(e){return this.validate(e),[new this(e)]}static validate(e){if(!Object(a.isString)(e))throw new ReferenceError("Invalid format, expected string")}}},"./core/resource/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/resource/Tw2EffectRes.js");r.d(t,"Tw2EffectRes",(function(){return i.Tw2EffectRes})),r.d(t,"ErrShaderVersion",(function(){return i.ErrShaderVersion})),r.d(t,"ErrShaderHeaderSize",(function(){return i.ErrShaderHeaderSize}));var n=r("./core/resource/Tw2GeometryRes.js");r.d(t,"Tw2GeometryRes",(function(){return n.Tw2GeometryRes})),r.d(t,"ErrGeometryMeshMissingParticleElement",(function(){return n.ErrGeometryMeshMissingParticleElement})),r.d(t,"ErrGeometryMeshElementComponentsMissing",(function(){return n.ErrGeometryMeshElementComponentsMissing})),r.d(t,"ErrGeometryMeshAreaMissing",(function(){return n.ErrGeometryMeshAreaMissing})),r.d(t,"ErrGeometryMeshBoneNameInvalid",(function(){return n.ErrGeometryMeshBoneNameInvalid})),r.d(t,"ErrGeometryMeshEffectBinding",(function(){return n.ErrGeometryMeshEffectBinding})),r.d(t,"ErrGeometryFileType",(function(){return n.ErrGeometryFileType}));var a=r("./core/resource/Tw2LoadingObject.js");r.d(t,"Tw2LoadingObject",(function(){return a.Tw2LoadingObject}));var o=r("./core/resource/Tw2Resource.js");r.d(t,"Tw2Resource",(function(){return o.Tw2Resource})),r.d(t,"ErrResourceFormatInvalid",(function(){return o.ErrResourceFormatInvalid})),r.d(t,"ErrResourceFormatUnsupported",(function(){return o.ErrResourceFormatUnsupported})),r.d(t,"ErrResourceFormatNotImplemented",(function(){return o.ErrResourceFormatNotImplemented}));var s=r("./core/resource/Tw2TextureRes.js");r.d(t,"Tw2TextureRes",(function(){return s.Tw2TextureRes}));var l=r("./core/resource/Tw2VideoRes.js");r.d(t,"Tw2VideoRes",(function(){return l.Tw2VideoRes}));var u=r("./core/resource/Tw2CakeReader.js");r.d(t,"Tw2CakeReader",(function(){return u.Tw2CakeReader}));var c=r("./core/resource/Tw2WavefrontReader.js");r.d(t,"Tw2WaveFrontReader",(function(){return c.Tw2WaveFrontReader}))},"./core/sampler/Tw2SamplerOverride.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerOverride",(function(){return I}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A=r("./global/utils/index.js"),M=r("./core/sampler/Tw2SamplerState.js");function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var I=(i=A.meta.type("Tw2SamplerOverride"),n=A.meta.string,a=A.meta.boolean,o=A.meta.uint,s=A.meta.uint,l=A.meta.uint,u=A.meta.uint,c=A.meta.uint,f=A.meta.uint,d=A.meta.notImplemented,h=A.meta.uint,m=A.meta.notImplemented,b=A.meta.uint,p=A.meta.uint,i((O=class extends A.meta.Model{constructor(...e){super(...e),C(this,"name",y,this),C(this,"enable",w,this),C(this,"addressUMode",_,this),C(this,"addressVMode",E,this),C(this,"addressWMode",T,this),C(this,"filterMode",S,this),C(this,"mipFilterMode",j,this),C(this,"magFilterMode",R,this),C(this,"lodBias",P,this),C(this,"maxMipLevel",x,this),C(this,"maxAnisotropy",z,this),this._sampler=null,this._isDirty=!0}OnValueChanged(){this._isDirty=!0}GetSampler(e){if(!this.enable)return e;if(this._sampler&&!this._isDirty)return this._sampler;var t=this._sampler=this._sampler||new M.Tw2SamplerState;t.name=e.name,t.samplerType=e.samplerType,t.isVolume=e.isVolume,t.registerIndex=e.registerIndex;var r={filterMode:-1!==this.filterMode?this.filterMode:e.filterMode,mipFilterMode:-1!==this.mipFilterMode?this.mipFilterMode:e.mipFilterMode,magFilterMode:-1!==this.magFilterMode?this.magFilterMode:e.magFilterMode,addressUMode:-1!==this.addressUMode?this.addressUMode:e.addressUMode,addressVMode:-1!==this.addressVMode?this.addressVMode:e.addressVMode,addressWMode:-1!==this.addressWMode?this.addressWMode:e.addressWMode,maxAnisotropy:-1!==this.maxAnisotropy?this.maxAnisotropy:e.maxAnisotropy};return t.ResolveModes(r),this._isDirty=!1,t}},y=D((g=O).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=D(g.prototype,"enable",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=D(g.prototype,"addressUMode",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=D(g.prototype,"addressVMode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=D(g.prototype,"addressWMode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),S=D(g.prototype,"filterMode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),j=D(g.prototype,"mipFilterMode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=D(g.prototype,"magFilterMode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),P=D(g.prototype,"lodBias",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),x=D(g.prototype,"maxMipLevel",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),z=D(g.prototype,"maxAnisotropy",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=g))||v)},"./core/sampler/Tw2SamplerState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerState",(function(){return q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F=r("./global/utils/index.js"),G=r("./global/math/index.js"),B=r("./global/constant/index.js");function N(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function k(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var U=[0,B.GL_REPEAT,B.GL_MIRRORED_REPEAT,B.GL_CLAMP_TO_EDGE,B.GL_CLAMP_TO_EDGE,B.GL_CLAMP_TO_EDGE],V={[B.GL_NEAREST]:0,[B.GL_LINEAR]:0,[B.GL_NEAREST_MIPMAP_NEAREST]:1,[B.GL_LINEAR_MIPMAP_NEAREST]:1,[B.GL_NEAREST_MIPMAP_LINEAR]:2,[B.GL_LINEAR_MIPMAP_LINEAR]:2},H={[B.GL_NEAREST]:1,[B.GL_LINEAR]:2},q=(i=F.meta.type("Tw2SamplerState"),n=F.meta.string,a=F.meta.uint,o=F.meta.uint,s=F.meta.uint,l=F.meta.uint,u=F.meta.uint,c=F.meta.uint,f=F.meta.uint,d=F.meta.uint,h=F.meta.uint,m=F.meta.uint,b=F.meta.boolean,p=F.meta.uint,v=F.meta.isPrivate,g=F.meta.uint,i((L=I=class e extends F.meta.Model{constructor(...e){super(...e),N(this,"name",_,this),N(this,"registerIndex",E,this),N(this,"minFilter",T,this),N(this,"maxFilter",S,this),N(this,"magFilter",j,this),N(this,"minFilterNoMips",R,this),N(this,"addressU",P,this),N(this,"addressV",x,this),N(this,"addressW",z,this),N(this,"anisotropy",O,this),N(this,"samplerType",A,this),N(this,"isVolume",M,this),N(this,"hash",C,this),N(this,"maxAnisotropy",D,this),this._borderColor=null,this._comparison=null,this._comparisonFunc=null,this._mipLODBias=null,this._minLOD=null,this._maxLOD=null}get addressUMode(){return U.indexOf(this.addressU)}set addressUMode(e){this.addressUMode!==e&&void 0!==e&&(this.addressU=U[e],this.hash=null)}get addressVMode(){return U.indexOf(this.addressV)}set addressVMode(e){this.addressVMode!==e&&void 0!==e&&(this.addressV=U[e],this.hash=null)}get addressWMode(){return U.indexOf(this.addressW)}set addressWMode(e){this.addressUMode!==e&&void 0!==e&&(this.addressW=U[e],this.hash=null)}get filterMode(){return this.minFilterNoMips in H?H[this.minFilterNoMips]:2}set filterMode(e){void 0!==e&&e!==this.filterMode&&this.UpdateFilterModes(e,this.mipFilterMode,this.magFilterMode)}set magFilterMode(e){void 0!==e&&e!==this.magFilterMode&&this.UpdateFilterModes(this.filterMode,this.mipFilterMode,e)}get magFilterMode(){return this.magFilter in H?H[this.magFilter]:2}get mipFilterMode(){return this.minFilter in V?V[this.minFilter]:2}set mipFilterMode(e){void 0!==e&&e!==this.mipFilterMode&&this.UpdateFilterModes(this.filterMode,e,this.magFilterMode)}UpdateFilterModes(e=this.filterMode,t=this.mipFilterMode,r=this.magFilterMode){if(e!==this.filterMode||t!==this.mipFilterMode||r!==this.magFilterMode){switch(e){case B.FilterMode.NEAREST:switch(t){case B.MipFilterMode.NONE:this.minFilter=B.GL_NEAREST;break;case B.MipFilterMode.NEAREST:this.minFilter=B.GL_NEAREST_MIPMAP_NEAREST;break;case B.MipFilterMode.LINEAR:default:this.minFilter=B.GL_NEAREST_MIPMAP_LINEAR}this.minFilterNoMips=B.GL_NEAREST,this.magFilter=B.GL_NEAREST;break;case B.FilterMode.LINEAR:default:switch(t){case B.MipFilterMode.NONE:this.minFilter=B.GL_LINEAR;break;case B.MipFilterMode.NEAREST:this.minFilter=B.GL_LINEAR_MIPMAP_NEAREST;break;case B.MipFilterMode.LINEAR:default:this.minFilter=B.GL_LINEAR_MIPMAP_LINEAR}this.minFilterNoMips=B.GL_LINEAR,this.magFilter=B.GL_LINEAR}3!==t&&3!==r&&3!==e||(this.anisotropy=Math.max(this.maxAnisotropy,1)),this.hash=null}}OnValueUpdated(){this.hash=null}ComputeHash(){this.hash=2166136261,this.hash*=16777619,this.hash^=this.minFilter,this.hash*=16777619,this.hash^=this.minFilterNoMips,this.hash*=16777619,this.hash^=this.maxFilter,this.hash*=16777619,this.hash^=this.addressU,this.hash*=16777619,this.hash^=this.addressV,this.hash*=16777619,this.hash^=this.addressW,this.hash*=16777619,this.hash^=this.anisotropy}Apply(e,t,r){var i=this.samplerType,{gl:n}=e,a=e.GetExtension("EXT_texture_filter_anisotropic"),o=r?this.minFilterNoMips:this.minFilter;if(n.texParameteri(i,n.TEXTURE_WRAP_S,t?this.addressU:n.CLAMP_TO_EDGE),n.texParameteri(i,n.TEXTURE_WRAP_T,t?this.addressV:n.CLAMP_TO_EDGE),i!==n.TEXTURE_3D&&i!==n.TEXTURE_2D_ARRAY||n.texParameteri(i,n.TEXTURE_WRAP_R,t?this.addressW:n.CLAMP_TO_EDGE),n.texParameteri(i,n.TEXTURE_MIN_FILTER,t?o:this.minFilterNoMips),n.texParameteri(i,n.TEXTURE_MAG_FILTER,this.magFilter),a&&e.enableAnisotropicFiltering){var s=Math.min(this.maxAnisotropy,a.maxAnisotropy);n.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.anisotropy,s))}null===this.hash&&this.ComputeHash()}ResolveModes(e={}){var{addressUMode:t,addressVMode:r,addressWMode:i,maxAnisotropy:n,filterMode:a,mipFilterMode:o,magFilterMode:s,type:l}=e;return void 0!==n&&n!==this.maxAnisotropy&&(this.maxAnisotropy=n,this.hash=null),void 0!==l&&this.samplerType!==B.TexTypeToGLTexture[l]&&(this.samplerType=B.TexTypeToGLTexture[l],this.hash=null),void 0!==t&&(this.addressUMode=t),void 0!==r&&(this.addressVMode=r),void 0!==i&&(this.addressWMode=i),this.UpdateFilterModes(a,o,s),null===this.hash&&(this.ComputeHash(),!0)}static fromJSON(t={},r){var i=new e;return Object(F.assignIfExists)(i,t,["name","registerIndex","samplerType","isVolume"]),i.ResolveModes(t),i}static fromCCPBinary(t,r,i){var n=new e;n.registerIndex=t.ReadUInt8(),n.name=r.version>=4?r.ReadString():"",n._comparison=t.ReadUInt8();var a=t.ReadUInt8(),o=t.ReadUInt8(),s=t.ReadUInt8(),l=t.ReadUInt8(),u=t.ReadUInt8(),c=t.ReadUInt8();n._mipLODBias=t.ReadFloat32();var f=t.ReadUInt8();n._comparisonFunc=t.ReadUInt8(),n._borderColor=G.quat.fromValues(t.ReadFloat32(),t.ReadFloat32(),t.ReadFloat32(),t.ReadFloat32()),n._minLOD=t.ReadFloat32(),n._maxLOD=t.ReadFloat32(),r.version<4&&t.ReadUInt8();for(var d=0;d<i.length;++d)if(i[d].registerIndex===n.registerIndex){n.samplerType=i[d].glType,n.isVolume=i[d].isVolume;break}return n.ResolveModes({mipFilterMode:s,filterMode:a,magFilterMode:o,addressUMode:l,addressVMode:u,addressWMode:c,maxAnisotropy:f}),n}},I.WrapModes=U,I.FilterToModeTable=H,I.MipFilterToModeTable=V,_=k((w=L).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=k(w.prototype,"registerIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=k(w.prototype,"minFilter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),S=k(w.prototype,"maxFilter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),j=k(w.prototype,"magFilter",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),R=k(w.prototype,"minFilterNoMips",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_LINEAR}}),P=k(w.prototype,"addressU",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),x=k(w.prototype,"addressV",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),z=k(w.prototype,"addressW",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_REPEAT}}),O=k(w.prototype,"anisotropy",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),A=k(w.prototype,"samplerType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.GL_TEXTURE_2D}}),M=k(w.prototype,"isVolume",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=k(w.prototype,"hash",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=k(w.prototype,"maxAnisotropy",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),y=w))||y)},"./core/sampler/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/sampler/Tw2SamplerState.js");r.d(t,"Tw2SamplerState",(function(){return i.Tw2SamplerState}));var n=r("./core/sampler/Tw2SamplerOverride.js");r.d(t,"Tw2SamplerOverride",(function(){return n.Tw2SamplerOverride}))},"./core/shader/Tw2Shader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Shader",(function(){return y})),r.d(t,"ErrShaderCompile",(function(){return w})),r.d(t,"ErrShaderLink",(function(){return _}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/index.js"),m=r("./core/Tw2Error.js"),b=r("./core/shader/Tw2ShaderAnnotation.js"),p=r("./core/shader/Tw2ShaderTechnique.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=d.meta.type("Tw2Shader"),n=d.meta.plain,a=d.meta.plain,i((f=c=class e{constructor(){v(this,"techniques",l,this),v(this,"annotations",u,this)}FindPerObjectDataUsage(t,r="Main"){if(!e.DEBUG_ENABLED)throw new Error("Debug mode must be enabled to find per object data");var i={vs:{frame:{},object:{},parameter:{},inputDefinitions:[]},ps:{frame:{},object:{},parameter:{},inputDefinitions:[]},ffe:{object:{}},inputDefinitions:{}},{perFramePSData:n,perFrameVSData:a}=h.device,o=this.techniques[r].passes[0],[s,l]=o.stages,u=s.shaderCode+l.shaderCode;if(o.shaderProgram.input.elementsSorted.forEach(e=>{i.inputDefinitions[e._attr]=e.string}),s.inputDefinition.elementsSorted.forEach(e=>{i.vs.inputDefinitions.push(e.string)}),l.inputDefinition.elementsSorted.forEach(e=>{i.ps.inputDefinitions.push(e.string)}),!u)throw new Error("Debug mode must be enabled when the shader was created");var c=u.split(/\r\n|\r|\n/),f={cb0:{name:"ConstantVertex",source:s,target:i.vs.parameter,isStage:!0,short:"cb0"},cb1:{name:"PerFrameVS",source:a,target:i.vs.frame,short:"cb1"},cb2:{name:"PerFramePS",source:n,target:i.ps.frame,short:"cb2"},cb3:{name:"PerObjectVS",source:t.vs||t._perFrameVS,target:i.vs.object,short:"cb3"},cb4:{name:"PerObjectPS",source:t.ps||t._perFramePS,target:i.ps.object,short:"cb4"},cb5:{name:"PerObjectFFE",source:t.ffe,target:i.ffe.object,short:"cb5"},cb7:{name:"ConstantFragment",source:l,target:i.ps.parameter,isStage:!0,short:"cb7"}},d={ConstantVertex:"cb0",PerFrameVS:"cb1",PerObjectVS:"cb3",PerFramePS:"cb2",PerObjectPS:"cb4",PerObjectFFE:"cb5",ConstantFragment:"cb7"},m=["x","y","z","w"];function b(e,t){var{target:r}=e,i=e.source.FindElementFromIndex(t);if(i){var{name:n,offset:a,array:o}=i,s=t-a;return r[n="".concat(e.short,"[").concat(a/4,"]_").concat(n)]=r[n]||[],void(r[n][s]=o[s])}throw new Error("Error finding element in ".concat(e.name," at index: ").concat(t))}function p(e,t){for(var{target:r,source:i}=e,{constants:n,constantValues:a}=i,o=0;o<n.length;o++){var{offset:s,name:l,type:u,size:c}=n[o];if(!(t<s||t>s+c-1)){var h=t-s;return void(3===u?b(f[d[l]],h):(r[l]=r[l]||[],r[l][h]=a[s+h]))}}throw new Error("Error finding element in ".concat(e.name," at index: ").concat(t))}return c.forEach(e=>{if(e){var t=e.match(/cb[0123457]\[\d+\](|\.?[xyzw]?[xyzw]?[xyzw]?[xyzw])+/g);if(t&&!e.includes("uniform vec4 cb"))for(var r=0;r<t.length;r++)for(var[i,n]=t[r].split("."),a=i.match(/(cb[0-7])/g)[0],o=4*parseInt(i.replace(a,"").replace("[","").replace("]","")),s=n&&n.length?n.split("").map(e=>m.indexOf(e)):[0,1,2,3],l=f[a],u=0;u<s.length;u++)l.isStage?p(l,o+s[u]):b(l,o+s[u])}}),i}ApplyPass(e,t,r){this.techniques[e].passes[t].Apply(r)}GetParameterNames(e={},t){if(t&&t.technique)return this.techniques[t.technique]?this.techniques[t.technique].GetParameterNames(e,t):e;for(var r in this.techniques)this.techniques.hasOwnProperty(r)&&this.techniques[r].GetParameterNames(e,t);return e}HasConstant(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasConstant(e))return!0;return!1}HasTexture(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasTexture(e))return!0;return!1}HasSampler(e){for(var t in this.techniques)if(this.techniques.hasOwnProperty(t)&&this.techniques[t].HasSampler(e))return!0;return!1}static fromJSON(t,r){var{techniques:i={},annotations:n={}}=t,a=new e;for(var o in i)i.hasOwnProperty(o)&&(a.techniques[o]=p.Tw2ShaderTechnique.fromJSON(i[o],r,o));for(var s in n)n.hasOwnProperty(s)&&(a.annotations[s]=b.Tw2ShaderAnnotation.fromJSON(n[s],r,s));return a}static fromCCPBinary(t,r){for(var i=new e,n=r.version>6?t.ReadUInt8():1,a=0;a<n;a++){var o=r.version>6?r.ReadString():"Main";if(i.techniques[o])throw new Error("Invalid technique, already defined: "+o);i.techniques[o]=p.Tw2ShaderTechnique.fromCCPBinary(t,r,o)}for(var s=t.ReadUInt16(),l=0;l<s;++l){var u=b.Tw2ShaderAnnotation.fromCCPBinary(t,r);i.annotations[u.name]=u}return i}},c.DEBUG_ENABLED=!1,l=g((s=f).prototype,"techniques",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=g(s.prototype,"annotations",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=s))||o);class w extends m.Tw2Error{constructor(e){super(e,"Error compiling %shaderType% shader (%infoLog%)")}}class _ extends m.Tw2Error{constructor(e){super(e,"Error linking shaders")}}},"./core/shader/Tw2ShaderAnnotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderAnnotation",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=g.meta.type("Tw2ShaderAnnotation"),n=g.meta.string,a=g.meta.string,o=g.meta.array,s=g.meta.boolean,l=g.meta.string,u=g.meta.string,i((d=w((f=class e{constructor(){y(this,"name",d,this),y(this,"description",h,this),y(this,"components",m,this),y(this,"display",b,this),y(this,"group",p,this),y(this,"widget",v,this)}static fromJSON(t,r,i){var n=new e;Object(g.assignIfExists)(n,t,["name","description","display","group","widget"]);var a=[];if(t.components)for(var o=0;o<t.components.length;o++)a[o]=t.components[o];return a.length&&(n.components=a),n.name=n.name||i,n}static fromCCPBinary(t,r){var i=new e;i.name=r.ReadString();for(var n=t.ReadUInt8(),a=[],o=0;o<n;++o){var s=r.ReadString(),l=void 0;switch(t.ReadUInt8()){case 0:l=0!==t.ReadUInt32();break;case 1:l=t.ReadInt32();break;case 2:l=t.ReadFloat32();break;default:l=r.ReadString()}switch(s.toUpperCase()){case"UIWIDGET":i.widget=l.toUpperCase(),"LINEARCOLOR"===i.widget&&(a[0]="Linear red",a[1]="Linear green",a[2]="Linear blue",a[3]="Linear alhpa");break;case"SASUIVISIBLE":i.display=l;break;case"SASUIDESCRIPTION":i.description=l;break;case"GROUP":i.group=l;break;case"COMPONENT1":a[0]=l;break;case"COMPONENT2":a[1]=l;break;case"COMPONENT3":a[2]=l;break;case"COMPONENT4":a[3]=l;break;default:i[s=s.charAt(0).toLowerCase()+s.substring(1)]=l}}return!i.widget&&i.name.toUpperCase().includes("MAP")&&(i.widget="TEXTURE",i.group="Textures"),a.length&&(i.components=a),i}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=w(f.prototype,"description",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=w(f.prototype,"components",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=w(f.prototype,"display",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=w(f.prototype,"group",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"None"}}),v=w(f.prototype,"widget",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=f))||c)},"./core/shader/Tw2ShaderPass.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderPass",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./global/index.js"),p=r("./core/shader/Tw2ShaderStage.js"),v=r("./core/shader/Tw2ShaderState.js"),g=r("./core/shader/Tw2ShaderProgram.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=m.meta.type("Tw2ShaderPass"),n=m.meta.struct("Tw2ShaderProgram"),a=m.meta.struct("Tw2ShaderProgram"),o=m.meta.list("Tw2ShaderStage"),s=m.meta.list("Tw2ShaderState"),i((c=w((u=class e{constructor(){y(this,"shaderProgram",c,this),y(this,"shadowShaderProgram",f,this),y(this,"stages",d,this),y(this,"states",h,this)}get vertex(){return this.stages[0]}get vs(){return this.stages[0]}get fragment(){return this.stages[1]}get ps(){return this.stages[1]}Apply(e){for(var{gl:t}=b.device,r=0;r<this.states.length;r++)b.device.SetRenderState(this.states[r].state,this.states[r].value);if(e)if(Object(m.isArray)(e))for(var i=0;i<e.length;i++)b.device.SetRenderState(e[i].state,e[i].value);else for(var n in e)e.hasOwnProperty(n)&&b.device.SetRenderState(n,e[n]);b.device.IsAlphaTestEnabled()?(t.useProgram(this.shadowShaderProgram.program),b.device.SetShadowHandles(this.shadowShaderProgram)):(t.useProgram(this.shaderProgram.program),b.device.SetShadowHandles(null))}SetState(e,t){if(e=Number(e),isNaN(e))throw new Error("Invalid render state: "+e);var r=this.states.find(t=>t.state===e);r?r.value=t:(this.states.push(v.Tw2ShaderState.fromJSON({state:e,value:t})),this.states.sort((e,t)=>e.state-t.state))}SetStates(e){if(e)if(Object(m.isArray)(e))for(var t=0;t<e.length;t++)this.SetState(e[t].state,e[t].value);else for(var r in e)e.hasOwnProperty(r)&&this.SetState(r,e[r])}GetParameterNames(e={},t){if(t&&t.stage)return this.stages[t.stage]?this.stages[t.stage].GetParameterNames(e,t):e;for(var r=0;r<this.stages.length;r++)this.stages[r].GetParameterNames(e);return e}HasConstant(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasConstant(e))return!0;return!1}HasTexture(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasTexture(e))return!0;return!1}HasSampler(e){for(var t=0;t<this.stages.length;t++)if(this.stages[t].HasSampler(e))return!0;return!1}static fromJSON(t,r){r.validShadowShader=!1;var i=new e;return i.stages[0]=p.Tw2ShaderStage.fromJSON(t.vertex||t.vs,r,p.Tw2ShaderStage.Type.VERTEX),i.stages[1]=p.Tw2ShaderStage.fromJSON(t.fragment||t.ps,r,p.Tw2ShaderStage.Type.FRAGMENT),i.SetStates(t.states),this.createPrograms(i,r)}static fromCCPBinary(t,r){var i=new e,n=t.ReadUInt8();r.validShadowShader=!0;for(var a=0;a<n;a++)i.stages.push(p.Tw2ShaderStage.fromCCPBinary(t,r)),r.version>=3&&t.ReadUInt8(),r.version>7&&t.ReadUInt8();for(var o=t.ReadUInt8(),s=0;s<o;s++)i.states.push(v.Tw2ShaderState.fromCCPBinary(t));return i.states.sort((e,t)=>e.state-t.state),this.createPrograms(i,r)}static createPrograms(e,t){return e.shaderProgram=g.Tw2ShaderProgram.create(e.stages[0].shader,e.stages[1].shader,e,t),t.validShadowShader?(e.shadowShaderProgram=g.Tw2ShaderProgram.create(e.stages[0].shadowShader,e.stages[1].shadowShader,e,t,!0),null===e.shadowShaderProgram&&(e.shadowShaderProgram=e.shaderProgram)):e.shadowShaderProgram=e.shaderProgram,e}}).prototype,"shaderProgram",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=w(u.prototype,"shadowShaderProgram",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=w(u.prototype,"stages",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=w(u.prototype,"states",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l)},"./core/shader/Tw2ShaderPermutation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderPermutation",(function(){return S})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./core/Tw2Error.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=w.meta.type("Tw2ShaderPermutation"),n=w.meta.string,a=w.meta.uint,o=w.meta.string,s=w.meta.uint,l=w.meta.plain,u=w.meta.uint,i((y=g=class e{constructor(){E(this,"name",d,this),E(this,"defaultOption",h,this),E(this,"description",m,this),E(this,"type",b,this),E(this,"options",p,this),E(this,"optionCount",v,this)}get string(){return Object(w.getKeyFromValue)(e.Type,this.type,"INVALID")}HasOption(e){return e.toUpperCase()in this.options}GetOption(e){if(e=e.toUpperCase(),this.HasOption(e))return this.options[e];throw new j({name:this.name,option:e})}static fromCCPBinary(t,r){var i=new e;i.name=r.ReadString(),i.defaultOption=t.ReadUInt8(),i.description=r.ReadString(),i.type=t.ReadUInt8(),i.optionCount=t.ReadUInt8();for(var n=0;n<i.optionCount;n++)i.options[r.ReadString()]=n;return i}},g.Type={INVALID:-1,UNKNOWN_0:0,UNKNOWN_1:1,UNKNOWN_2:2,UNKNOWN_3:3,UNKNOWN_4:4},d=T((f=y).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=T(f.prototype,"defaultOption",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=T(f.prototype,"description",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=T(f.prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.Type.INVALID}}),p=T(f.prototype,"options",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),v=T(f.prototype,"optionCount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c);class j extends _.Tw2Error{constructor(e){super(e,"Invalid shader permutation option for %name% (%option%)")}}},"./core/shader/Tw2ShaderProgram.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderProgram",(function(){return R}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/index.js"),E=r("./core/vertex/index.js"),T=r("./core/shader/Tw2Shader.js");function S(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function j(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var R=(i=w.meta.type("Tw2ShaderProgram"),n=w.meta.list(WebGLUniformLocation),a=w.meta.struct("Tw2VertexDeclaration"),o=w.meta.list(WebGLUniformLocation),s=w.meta.struct(WebGLUniformLocation),l=w.meta.struct(WebGLUniformLocation),u=w.meta.struct(WebGLUniformLocation),c=w.meta.array,i((h=j((d=class e{constructor(){S(this,"constantBufferHandles",h,this),S(this,"input",m,this),S(this,"samplerHandles",b,this),S(this,"shadowStateFloat",p,this),S(this,"shadowStateInt",v,this),S(this,"shadowStateYFlip",g,this),S(this,"volumeSlices",y,this)}static create(t,r,i,n,a){var{gl:o}=_.device,s=new e;if(s.program=o.createProgram(),o.attachShader(s.program,t),o.attachShader(s.program,r),o.linkProgram(s.program),!o.getProgramParameter(s.program,o.LINK_STATUS)){if(!a)throw new T.ErrShaderLink({path:n.path,infoLog:o.getProgramInfoLog(s.program)});return null}o.useProgram(s.program);for(var l=0;l<16;++l)s.constantBufferHandles[l]=o.getUniformLocation(s.program,"cb"+l);for(var u=0;u<16;++u)s.samplerHandles[u]=o.getUniformLocation(s.program,"s"+u),o.uniform1i(s.samplerHandles[u],u);for(var c=0;c<16;++c)s.samplerHandles[c+12]=o.getUniformLocation(s.program,"vs"+c),o.uniform1i(s.samplerHandles[c+12],c+12);for(var{elements:f}=i.stages[0].inputDefinition,d=0;d<f.length;++d){var h="attr"+d,m=o.getAttribLocation(s.program,h);if(m>=0){var b=E.Tw2VertexElement.from({usage:f[d].usage,usageIndex:f[d].usageIndex,location:m,attr:h});s.input.elements.push(b),f[d]._attr=h,f[d]._registerIndex=d,f[d].location=m}}s.input.RebuildHash(),s.shadowStateInt=o.getUniformLocation(s.program,"ssi"),s.shadowStateFloat=o.getUniformLocation(s.program,"ssf"),s.shadowStateYFlip=o.getUniformLocation(s.program,"ssyf"),o.uniform3f(s.shadowStateYFlip,0,0,1);for(var{samplers:p}=i.stages[1],v=0;v<p.length;++v)p[v]._attr="s".concat(p[v].registerIndex),p[v].isVolume&&(s.volumeSlices[p[v].registerIndex]=o.getUniformLocation(s.program,"s"+p[v].registerIndex+"sl"));return s}}).prototype,"constantBufferHandles",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=j(d.prototype,"input",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new E.Tw2VertexDeclaration}}),b=j(d.prototype,"samplerHandles",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=j(d.prototype,"shadowStateFloat",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=j(d.prototype,"shadowStateInt",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=j(d.prototype,"shadowStateYFlip",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=j(d.prototype,"volumeSlices",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f)},"./core/shader/Tw2ShaderStage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStage",(function(){return q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C=r("./global/utils/index.js"),D=r("./core/vertex/index.js"),I=r("./core/sampler/index.js"),L=r("./core/shader/Tw2Shader.js"),F=r("./core/shader/Tw2ShaderStageConstant.js"),G=r("./core/shader/Tw2ShaderStageTexture.js"),B=r("./global/tw2.js"),N=r("./core/shader/shaderOverrides.json"),k=r("./core/shader/Tw2ShaderAnnotation.js");function U(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function V(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function H(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var q=(i=C.meta.type("Tw2ShaderStage"),n=C.meta.uint,a=C.meta.vector,o=C.meta.list("Tw2ShaderStageConstant"),s=C.meta.struct("Tw2VertexDeclaration"),l=C.meta.list("Tw2SamplerState"),u=C.meta.struct(WebGLShader),c=C.meta.isPrivate,f=C.meta.string,d=C.meta.struct("WebGLShader"),h=C.meta.isPrivate,m=C.meta.string,b=C.meta.uint,p=C.meta.isPrivate,v=C.meta.list("Tw2ShaderTexture"),i((M=A=class e{constructor(){V(this,"constantSize",w,this),V(this,"constantValues",_,this),V(this,"constants",E,this),V(this,"inputDefinition",T,this),V(this,"samplers",S,this),V(this,"shader",j,this),V(this,"shaderCode",R,this),V(this,"shadowShader",P,this),V(this,"shadowShaderCode",x,this),V(this,"type",z,this),V(this,"textures",O,this)}get string(){return Object(C.getKeyFromValue)(e.Type,this.type,"INVALID")}GetParameterNames(e={}){e.constants=e.constants||[],e.textures=e.textures||[],e.samplers=e.samplers||[];for(var t=0;t<this.constants.length;t++)Object(C.addToArray)(e.constants,this.constants[t].name);for(var r=0;r<this.textures.length;r++)Object(C.addToArray)(e.textures,this.textures[r].name);for(var i=0;i<this.samplers.length;i++)Object(C.addToArray)(e.samplers,this.samplers[i].name);return e}HasConstant(e){for(var t=0;t<this.constants.length;t++)if(this.constants[t].name===e)return!0;return!1}HasTexture(e){for(var t=0;t<this.textures.length;t++)if(this.textures[t].name===e)return!0;return!1}HasSampler(e){for(var t=0;t<this.samplers.length;t++)if(this.samplers[t].name===e)return!0;return!1}static fromJSON(t,r,i=e.Type.INVALID){var n=new e;n.type=i;for(var{constants:a=[],textures:o=[],inputDefinitions:s=[],shader:l,shadowShader:u}=t,c=0;c<s.length;c++)n.inputDefinition.elements.push(D.Tw2VertexElement.from(s[c]));n.inputDefinition.RebuildHash(),L.Tw2Shader.DEBUG_ENABLED&&(console.group(r.path),console.dir({path:r.path,shader:l,shadowShader:u,type:0===n.type?"vertex":"fragment"}),console.groupEnd(),n.shaderCode=l,n.shadowShaderCode=u),n.shader=this.compileShader(n.type,"",l,r.path),r.validShadowShader&&u&&(n.shadowShader=this.compileShader(n.type,"",u,r.path,!0));var f=!1;function d(e){if(F.Tw2ShaderStageConstant.IgnoreOffset.includes(e.name)){if(n.constantSize>e.offset)throw new ReferenceError("Constant offset out of bounds: ".concat(e.name));return e.offset}var t;if(-1!==e.offset)f=!0,t=e.offset;else{if(f)throw new ReferenceError("Cannot auto offset when an offset has been manually defined");if(!e.size||1===e.size)throw new ReferenceError("Invalid constant size");t=n.constantSize}return n.constantSize+=e.size,t}for(var h=0;h<a.length;h++){a[h].name||(a[h].name="Constant"+h);var m=F.Tw2ShaderStageConstant.fromJSON(a[h],r);if(m.offset=d(m),n.constants.push(m),a[h].ui){var b=k.Tw2ShaderAnnotation.fromJSON(a[h].ui,r);b.name||(b.name=m.name),b.group||(b.group="Constant"),r.annotations[b.name]=b}}n.constantValues=new Float32Array(n.constantSize);for(var p=0;p<n.constants.length;p++){var{name:v,defaults:g,offset:y,size:w}=n.constants[p];if(!F.Tw2ShaderStageConstant.IgnoreOffset.includes(v)){for(var _=0;_<g.length;_++)n.constantValues[y+_]=g[_];L.Tw2Shader.DEBUG_ENABLED?n.constants[p].defaults=n.constantValues.subarray(y,y+w):n.constants[p].defaults=null}}var E=!1;function T(e,t){if(void 0!==e.registerIndex)return E=!0,e.registerIndex;if(E)throw new ReferenceError("Cannot automatically resolve a register index when one has already been defined");return t}for(var S=0;S<o.length;S++){var j=o[S],{sampler:R={},ui:P}=j,x=U(j,["sampler","ui"]);x.registerIndex=T(x,S),x.name=Object(C.get)(o[S],"name","Texture"+S);var z=G.Tw2ShaderStageTexture.fromJSON(x,r);if(n.textures.push(z),R.name=Object(C.get)(R,"name",z.name+"Sampler"),R.registerIndex=z.registerIndex,R.isVolume=z.isVolume,R.samplerType=z.glType,n.samplers.push(I.Tw2SamplerState.fromJSON(R,r)),P){var O=k.Tw2ShaderAnnotation.fromJSON(P,r);O.name||(O.name=o[S].name),O.group||(O.group="Textures"),r.annotations[O.name]=O}}return n.constants.sort((e,t)=>e.offset-t.offset),n.textures.sort((e,t)=>e.registerIndex-t.registerIndex),n.samplers.sort((e,t)=>e.registerIndex-t.registerIndex),n}static fromCCPBinary(t,r){var i=new e;i.type=t.ReadUInt8();for(var n,a,o,s,l=t.ReadUInt8(),u=0;u<l;u++){var c=t.ReadUInt8(),f=t.ReadUInt8(),d=t.ReadUInt8(),h=t.ReadUInt8(),m=D.Tw2VertexElement.from({usage:c,usageIndex:d,type:0,registerIndex:f,usedMask:h});i.inputDefinition.elements.push(m)}if(i.inputDefinition.RebuildHash(),r.version<5)n=t.ReadUInt32(),a=t.data.subarray(t.cursor,t.cursor+n),t.cursor+=n,o=t.ReadUInt32(),s=t.data.subarray(t.cursor,t.cursor+o),t.cursor+=o;else{n=t.ReadUInt32();var b=t.ReadUInt32();a=this.inspectShaderCode(r.stringTable.substr(b,n),r.path,i.type),o=t.ReadUInt32(),b=t.ReadUInt32(),s=this.inspectShaderCode(r.stringTable.substr(b,o),r.path,i.type)}L.Tw2Shader.DEBUG_ENABLED&&(console.group(r.path),console.dir({path:r.path,shaderCode:a,shadowShaderCode:s,type:0===i.type?"vertex":"fragment"}),console.groupEnd(),i.shaderCode=a,i.shadowShaderCode=s),i.shader=this.compileShader(i.type,"",a,r.path),r.validShadowShader?(i.shadowShader=0===o?this.compileShader(i.type,"//shadow\n#define PS\n",a,r.path,!0):this.compileShader(i.type,"//shadow\n",s,r.path,!0),null===i.shadowShader&&(r.validShadowShader=!1)):i.shadowShader=null,r.version>=3&&(t.ReadUInt32(),t.ReadUInt32(),t.ReadUInt32()),i.constantSize=0;for(var p=t.ReadUInt32(),v=0;v<p;++v){var g=F.Tw2ShaderStageConstant.fromCCPBinary(t,r);if(i.constants.push(g),!F.Tw2ShaderStageConstant.IgnoreOffset.includes(g.name)){var y=g.offset+g.size;y>i.constantSize&&(i.constantSize=y)}}var w=t.ReadUInt32()/4;if(i.constantValues=new Float32Array(w),r.version<5)for(var _=0;_<w;++_)i.constantValues[_]=t.ReadFloat32();else{var E=t.ReadUInt32(),T=t.cursor;t.cursor=r.stringTableOffset+E;for(var S=0;S<w;++S)i.constantValues[S]=t.ReadFloat32();t.cursor=T}i.constantSize=Math.max(i.constantSize,w);for(var j=0;j<i.constants.length;j++)if(L.Tw2Shader.DEBUG_ENABLED){var{name:R,size:P,offset:x}=i.constants[j];F.Tw2ShaderStageConstant.IgnoreOffset.includes(R)||(i.constants[j].defaults=i.constantValues.subarray(x,x+P))}else i.constants[j].defaults=null;for(var z=t.ReadUInt8(),O=0;O<z;++O)i.textures.push(G.Tw2ShaderStageTexture.fromCCPBinary(t,r));for(var A=t.ReadUInt8(),M=0;M<A;++M)i.samplers.push(I.Tw2SamplerState.fromCCPBinary(t,r,i.textures));return i.constants.sort((e,t)=>e.offset-t.offset),i.textures.sort((e,t)=>e.registerIndex-t.registerIndex),i.samplers.sort((e,t)=>e.registerIndex-t.registerIndex),i}static compileShader(e,t,r,i,n){var{gl:a}=B.device,o=a.createShader(0===e?a.VERTEX_SHADER:a.FRAGMENT_SHADER),s=B.device.GetExtension("CCP_shader_binary"),l=i.split("/");if(l="//".concat(l[l.length-1],"\n"),s)s.shaderBinary(o,r);else{var u=l+t+(Object(C.isString)(r)?r:String.fromCharCode.apply(null,r));u=u.substr(0,u.length-1),a.shaderSource(o,u),a.compileShader(o)}if(!a.getShaderParameter(o,a.COMPILE_STATUS)){if(!n)throw new L.ErrShaderCompile({path:i,shaderType:0===e?"vertex":"fragment",infoLog:a.getShaderInfoLog(o)});return null}return o}static inspectShaderCode(e,t,r){var i,n,a,o=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")).toLowerCase(),s=N[o],l=N[o+(0===r?".vertex":".fragment")],u=Object.assign({},s,l);if(!Object.keys(u).length)return e;for(var c in u)u.hasOwnProperty(c)&&(i=e,n=c,a=u[c],e=i.replace(new RegExp(n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"g"),a));return e}},A.Type={INVALID:-1,VERTEX:0,FRAGMENT:1},w=H((y=M).prototype,"constantSize",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=H(y.prototype,"constantValues",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=H(y.prototype,"constants",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=H(y.prototype,"inputDefinition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new D.Tw2VertexDeclaration}}),S=H(y.prototype,"samplers",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=H(y.prototype,"shader",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=H(y.prototype,"shaderCode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=H(y.prototype,"shadowShader",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=H(y.prototype,"shadowShaderCode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=H(y.prototype,"type",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.Type.INVALID}}),O=H(y.prototype,"textures",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=y))||g)},"./core/shader/Tw2ShaderStageConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStageConstant",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js");function x(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O=(i=P.meta.type("Tw2ShaderStageConstant"),n=P.meta.string,a=P.meta.uint,o=P.meta.uint,s=P.meta.uint,l=P.meta.boolean,u=P.meta.todo("Why is this here?"),c=P.meta.uint,f=P.meta.uint,d=P.meta.uint,h=P.meta.vector,i((R=j=class e{constructor(){x(this,"name",p,this),x(this,"dimension",v,this),x(this,"elements",g,this),x(this,"isAutoregister",y,this),x(this,"isSRGB",w,this),x(this,"offset",_,this),x(this,"size",E,this),x(this,"type",T,this),x(this,"defaults",S,this)}get string(){return Object(P.getKeyFromValue)(e.Type,this.type,"UNKNOWN")}static fromJSON(t,r){var{name:i,dimension:n=0,elements:a=1,isAutoregister:o=0,isSRGB:s=0,offset:l=-1,size:u=0,type:c=e.Type.PARAMETER,value:f=[]}=t;if(f=Object(P.toArray)(f),u||(u=f.length),!n&&u&&(n=u/a)%1>0)throw new ReferenceError("Invalid size or elements");if(!i||!u)throw new ReferenceError("Invalid shader constant definition: invalid inputs");var d=new e;if(d.name=i,d.dimension=n,d.isAutoregister=o,d.elements=a,d.type=c,d.isSRGB=s,d.size=u,e.IgnoreOffset.includes(d.name))d.defaults=null;else for(var h=0;h<d.size;h++)d.defaults[h]=void 0!==f[h]?f[h]:0;return d.offset=l,d}static fromCCPBinary(t,r){var i=new e;return i.name=r.ReadString(),i.offset=t.ReadUInt32()/4,i.size=t.ReadUInt32()/4,i.type=t.ReadUInt8(),i.dimension=t.ReadUInt8(),i.elements=t.ReadUInt32(),i.isSRGB=t.ReadUInt8(),i.isAutoregister=t.ReadUInt8(),i}},j.IgnoreOffset=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"],j.Type={PARAMETER:0,UNKNOWN_1:1,UNKNOWN_2:2,PER:3},p=z((b=R).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=z(b.prototype,"dimension",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=z(b.prototype,"elements",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=z(b.prototype,"isAutoregister",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=z(b.prototype,"isSRGB",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=z(b.prototype,"offset",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=z(b.prototype,"size",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=z(b.prototype,"type",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=z(b.prototype,"defaults",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=b))||m)},"./core/shader/Tw2ShaderStageTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderStageTexture",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/constant/d3d.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.type("Tw2ShaderStageTexture"),n=p.meta.string,a=p.meta.uint,o=p.meta.uint,s=p.meta.uint,l=p.meta.uint,i((f=y((c=class e{constructor(){g(this,"name",f,this),g(this,"isAutoregister",d,this),g(this,"isSRGB",h,this),g(this,"registerIndex",m,this),g(this,"type",b,this)}get glType(){return this.type in v.TexTypeToGLTexture?v.TexTypeToGLTexture[this.type]:0}get isVolume(){return this.type===v.TEX_VOLUME}get string(){return this.type in v.TexTypeToString?v.TexTypeToString[this.type]:"UNKNOWN"}static fromJSON(t,r){var i=new e;if(Object(p.assignIfExists)(i,t,["name","registerIndex","type","isSRGB","isAutoregister"]),-1===i.registerIndex||0===i.glType)throw new ReferenceError("Invalid shader texture definition");return i}static fromCCPBinary(t,r){var i=new e;return i.registerIndex=t.ReadUInt8(),i.name=r.ReadString(),i.type=t.ReadUInt8(),i.isSRGB=t.ReadUInt8(),i.isAutoregister=t.ReadUInt8(),i}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y(c.prototype,"isAutoregister",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=y(c.prototype,"isSRGB",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=y(c.prototype,"registerIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=y(c.prototype,"type",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),u=c))||u)},"./core/shader/Tw2ShaderState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderState",(function(){return h}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");function f(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function d(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var h=(i=c.meta.type("Tw2ShaderState"),n=c.meta.float,a=c.meta.float,i((l=d((s=class e{constructor(){f(this,"state",l,this),f(this,"value",u,this)}static fromJSON(t){var r=new e;return void 0!==t.state&&(r.state=t.state),void 0!==t.value&&(r.value=t.value),r}static fromCCPBinary(t){var r=new e;return r.state=t.ReadUInt32(),r.value=t.ReadUInt32(),r}}).prototype,"state",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),u=d(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),o=s))||o)},"./core/shader/Tw2ShaderTechnique.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ShaderTechnique",(function(){return m}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./core/shader/Tw2ShaderPass.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=c.meta.type("Tw2ShaderTechnique"),n=c.meta.string,a=c.meta.list("Tw2ShaderPass"),i((l=h((s=class e{constructor(){d(this,"name",l,this),d(this,"passes",u,this)}GetParameterNames(e={},t){if(t&&t.pass)return this.passes[t.pass]?this.passes[t.pass].GetParameterNames(e,t):e;for(var r=0;r<this.passes.length;r++)this.passes[r].GetParameterNames(e,t);return e}HasConstant(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasConstant(e))return!0;return!1}HasTexture(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasTexture(e))return!0;return!1}HasSampler(e){for(var t=0;t<this.passes.length;t++)if(this.passes[t].HasSampler(e))return!0;return!1}static fromJSON(t,r,i){var{name:n=i,passes:a}=t,o=new e;o.name=n,a||(a=[t]);for(var s=0;s<a.length;s++)o.passes.push(f.Tw2ShaderPass.fromJSON(a[s],r));return o}static fromCCPBinary(t,r,i){var n=new e;n.name=i;for(var a=t.ReadUInt8(),o=0;o<a;o++)n.passes.push(f.Tw2ShaderPass.fromCCPBinary(t,r));return n}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=h(s.prototype,"passes",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./core/shader/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/shader/Tw2Shader.js");r.d(t,"Tw2Shader",(function(){return i.Tw2Shader})),r.d(t,"ErrShaderCompile",(function(){return i.ErrShaderCompile})),r.d(t,"ErrShaderLink",(function(){return i.ErrShaderLink}));var n=r("./core/shader/Tw2ShaderAnnotation.js");r.d(t,"Tw2ShaderAnnotation",(function(){return n.Tw2ShaderAnnotation}));var a=r("./core/shader/Tw2ShaderPass.js");r.d(t,"Tw2ShaderPass",(function(){return a.Tw2ShaderPass}));var o=r("./core/shader/Tw2ShaderPermutation.js");r.d(t,"Tw2ShaderPermutation",(function(){return o.Tw2ShaderPermutation})),r.d(t,"ErrShaderPermutationOptionInvalid",(function(){return o.ErrShaderPermutationOptionInvalid}));var s=r("./core/shader/Tw2ShaderProgram.js");r.d(t,"Tw2ShaderProgram",(function(){return s.Tw2ShaderProgram}));var l=r("./core/shader/Tw2ShaderStage.js");r.d(t,"Tw2ShaderStage",(function(){return l.Tw2ShaderStage}));var u=r("./core/shader/Tw2ShaderStageConstant.js");r.d(t,"Tw2ShaderStageConstant",(function(){return u.Tw2ShaderStageConstant}));var c=r("./core/shader/Tw2ShaderStageTexture.js");r.d(t,"Tw2ShaderStageTexture",(function(){return c.Tw2ShaderStageTexture}));var f=r("./core/shader/Tw2ShaderState.js");r.d(t,"Tw2ShaderState",(function(){return f.Tw2ShaderState}));var d=r("./core/shader/Tw2ShaderTechnique.js");r.d(t,"Tw2ShaderTechnique",(function(){return d.Tw2ShaderTechnique}))},"./core/shader/shaderOverrides.json":function(e){e.exports=JSON.parse('{"blinkinglightspool":{"r0.xy=r0.xx*c[0+a0.x].xy;":"if(a0.x==0){r0.xy=r0.xx*c[0].xy;}else if(a0.x==1){r0.xy=r0.xx*c[1].xy;}else if(a0.x==2){r0.xy=r0.xx*c[2].xy;}else if(a0.x==3){r0.xy=r0.xx*c[3].xy;}else if(a0.x==4){r0.xy=r0.xx*c[4].xy;}","texcoord=r3.zzww*c[0+a0.x].zwzz;":"if(a0.x==0){texcoord=r3.zzww*c[0].zwzz;}else if(a0.x==1){texcoord=r3.zzww*c[1].zwzz;}else if(a0.x==2){texcoord=r3.zzww*c[2].zwzz;}else if(a0.x==3){texcoord=r3.zzww*c[3].zwzz;}else if(a0.x==4){texcoord=r3.zzww*c[4].zwzz;}","v0=color":"v0=color;v0.w=0.5"},"boostervolumetric":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<12;++i){"},"quadv5":{"gl_FragData[0].w=(-r0.x)+c21.x;":"gl_FragData[0].w=(r0.x)+c21.x;"},"fxarmorimpactv5":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<255;++i){"},"flarequad":{"r1.xyz=r0.zzw*c[0+a0.x].xyx;":"if(a0.x==0){r1.xyz=r0.zzw*c[0].xyx;}else if(a0.x==1){r1.xyz=r0.zzw*c[1].xyx;}else if(a0.x==2){r1.xyz=r0.zzw*c[2].xyx;}else if (a0.x==3){r1.xyz=r0.zzw*c[3].xyx;}else if(a0.x==4){r1.xyz=r0.zzw*c[4].xyx;}else if(a0.x==5){r1.xyz=r0.zzw*c[5].xyx;}","texcoord.xyw=r0.zzw*c[0+a0.x].zwz;":"if(a0.x==0){texcoord.xyw=r0.zzw*c[0].zwz;}else if(a0.x==1){texcoord.xyw=r0.zzw*c[1].zwz;}else if(a0.x==2){texcoord.xyw=r0.zzw*c[2].zwz;}else if(a0.x==3){texcoord.xyw=r0.zzw*c[3].zwz;}else if(a0.x==4){texcoord.xyw=r0.zzw*c[4].zwz;}else if(a0.x==5){texcoord.xyw=r0.zzw*c[5].zwz;}","r0.x=saturate(sqrt(abs(r0.x)));":"r0.x=clamp(sqrt(abs(r0.x)),0.0,1.0);"},"flarequadsoft":{"r1.xyz=r0.zzw*c[0+a0.x].xyx;":"if(a0.x==0){r1.xyz=r0.zzw*c[0].xyx;}else if(a0.x==1){r1.xyz=r0.zzw*c[1].xyx;}else if(a0.x==2){r1.xyz=r0.zzw*c[2].xyx;}else if (a0.x==3){r1.xyz=r0.zzw*c[3].xyx;}else if(a0.x==4){r1.xyz=r0.zzw*c[4].xyx;}else if(a0.x==5){r1.xyz=r0.zzw*c[5].xyx;}","texcoord.xyw=r0.zzw*c[0+a0.x].zwz;":"if(a0.x==0){texcoord.xyw=r0.zzw*c[0].zwz;}else if(a0.x==1){texcoord.xyw=r0.zzw*c[1].zwz;}else if(a0.x==2){texcoord.xyw=r0.zzw*c[2].zwz;}else if(a0.x==3){texcoord.xyw=r0.zzw*c[3].zwz;}else if(a0.x==4){texcoord.xyw=r0.zzw*c[4].zwz;}else if(a0.x==5){texcoord.xyw=r0.zzw*c[5].zwz;}","r0.x=saturate(sqrt(abs(r0.x)));":"r0.x=clamp(sqrt(abs(r0.x)),0.0,1.0);"},"motionfx":{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<8;++i){"}}')},"./core/store/Tw2ConstructorStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ConstructorStore",(function(){return a}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js");class a extends i.Tw2GenericStore{constructor(){super(),i.STORE.get(this).DEBUG_ENABLED=!1}SetDebugMode(e){var t=i.STORE.get(this);for(var[r,n]of(t.DEBUG_ENABLED=e,t.map))"DEBUG_ENABLED"in n&&(n.DEBUG_ENABLED=e)}GetDebugMode(){return i.STORE.get(this).DEBUG_ENABLED}static isValue(e){return Object(n.isFunction)(e)}static onBefore(e,t,r){"DEBUG_ENABLED"in e&&(e.DEBUG_ENABLED=i.STORE.get(r).DEBUG_ENABLED)}}a.isConstructorStore=!0,a.storeName="Constructor"},"./core/store/Tw2GenericStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"STORE",(function(){return o})),r.d(t,"Tw2GenericStore",(function(){return s})),r.d(t,"ErrStoreKeyReserved",(function(){return u})),r.d(t,"ErrStoreValueInvalid",(function(){return c})),r.d(t,"ErrStoreKeyUnregistered",(function(){return f}));var i=r("./global/utils/index.js"),n=r("./core/Tw2Error.js"),a=r("./core/Tw2EventEmitter.js"),o=new WeakMap;class s extends a.Tw2EventEmitter{constructor(){super(),o.set(this,{map:new Map})}Set(e,t){var r=this.constructor,{storeName:i}=r;if(r.isValue&&!r.isValue(t))throw new c({storeName:i,key:e});if(r.restrictedKeys&&r.restrictedKeys.includes(e))throw new u({storeName:i,key:e});if(r.onBefore){var n=r.onBefore(t,e,this);n&&(t=n)}return o.get(this).map.set(e,t),this.EmitEvent("stored",{key:e,value:t}),t}Get(e){var{isConstructorStore:t,storeName:r}=this.constructor,[i,n]=l(this,e,t);if(!n){var a=o.get(this);throw a.missing||(a.missing=[]),a.missing.includes(e)||(a.missing.push(e),this.EmitEvent("missing",{key:e})),new f({storeName:r,key:e})}return i!==e&&this.EmitEvent("substitute",{original:e,substitute:i}),n}Has(e){return!!l(this,e,this.constructor.isConstructorStore)[1]}Register(e){e=Object(i.toArray)(e);for(var t=0;t<e.length;t++)for(var r in e[t])e[t].hasOwnProperty(r)&&this.Set(r,e[t][r])}GetMissing(){var{missing:e}=o.get(this);return e?Array.from(e):[]}static isValue(e){return!0}}function l(e,t,r){var{map:n}=o.get(e);if(n.has(t))return[t,n.get(t)];if(r&&Object(i.isTr2OrTri)(t)){var a=Object(i.toTw2)(t);if(n.has(a))return[a,n.get(a)]}return[t]}s.onBefore=null,s.isConstructorStore=!1,s.restrictedKeys=null,s.storeName="Generic";class u extends n.Tw2Error{constructor(e){super(e,"'%storeName%' store key restricted (%key%)")}}class c extends n.Tw2Error{constructor(e){super(e,"'%storeName%' store value invalid (%key%)")}}class f extends n.Tw2Error{constructor(e){super(e,"'%storeName%' store key is unregistered (%key%)")}}},"./core/store/Tw2ResourceDynamicPathStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourceDynamicPathStore",(function(){return o}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js"),a=r("./core/store/Tw2ResourcePathStore.js");class o extends i.Tw2GenericStore{static isValue(e){return Object(n.isArray)(e)}static onBefore(e){e=Array.from(e);for(var t=0;t<e.length;t++)e[t]=a.Tw2ResourcePathStore.normalizePath(e[t]);return e}}o.storeName="Dynamic resource path"},"./core/store/Tw2ResourceExtensionStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourceExtensionStore",(function(){return o}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js"),a=r("./core/store/Tw2ResourcePathStore.js");class o extends i.Tw2GenericStore{IsLoadingObject(e){return this.Get(e).isLoadingObject}FromPath(e){if(!(e=a.Tw2ResourcePathStore.normalizePath(e)))throw new TypeError("Expected string");return this.Get(Object(n.getPathExtension)(e))}static isValue(e){return Object(n.isFunction)(e)}}o.isConstructorStore=!0,o.storeName="Resource extension"},"./core/store/Tw2ResourcePathStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResourcePathStore",(function(){return o})),r.d(t,"ErrStorePathUndefined",(function(){return s}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js"),a=r("./core/Tw2Error.js");class o extends i.Tw2GenericStore{Resolve(e){var t=(e=o.normalizePath(e)).indexOf(":/");if(-1===t)throw new s({path:e});var r=e.substr(0,t);return"http"===r||"https"===r?e:this.Get(r)+e.substr(t+2)}static isValue(e){return Object(n.isString)(e)}static onBefore(e){return"/"!==e.charAt(e.length-1)&&(e+="/"),this.normalizePath(e)}static normalizePath(e){return e=(e=e.toLowerCase()).replace("\\","/")}}o.storeName="Resource path",o.restrictedKeys=["rgba","manual","dynamic"];class s extends a.Tw2Error{constructor(e){super(e,"Undefined resource prefix")}}},"./core/store/Tw2VariableStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableStore",(function(){return a}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js");class a extends i.Tw2GenericStore{constructor(e){super(),i.STORE.get(this).typeStore=e}Set(e,t){return Object(n.isPlain)(t)||(t=this.Create(e,t)),super.Set(e,t)}Create(e,t,r){if(Object(n.isPlain)(t)&&(r=t.Type||t.type,t=t.value),Object(n.isFunction)(r))return new r(e,t);var{typeStore:a}=i.STORE.get(this);return Object(n.isString)(r)&&(r=a.Get(r)),r||(r=a.GetByValue(t)),new r(e,t)}SetValue(e,t,r){return this.Get(e).SetValue(t,r)}GetValue(e){return this.Get(e).GetValue(e)}static isValue(e){return e&&Object(n.isFunction)(e.GetValue)&&Object(n.isFunction)(e.SetValue)}}a.storeName="Variable"},"./core/store/Tw2VariableTypeStore.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableTypeStore",(function(){return o})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return s}));var i=r("./core/store/Tw2GenericStore.js"),n=r("./global/utils/index.js"),a=r("./core/Tw2Error.js");class o extends i.Tw2GenericStore{GetByValue(e){var{map:t}=i.STORE.get(this);for(var[r,n]of t)if("isValue"in n&&n.isValue(e))return n;throw new s({value:e})}static isValue(e){return Object(n.isFunction)(e)}}o.isConstructorStore=!0,o.storeName="Variable Type";class s extends a.Tw2Error{constructor(e){super(e,"Could not identify variable type from value (%value%)")}}},"./core/store/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/store/Tw2GenericStore.js");r.d(t,"Tw2GenericStore",(function(){return i.Tw2GenericStore}));var n=r("./core/store/Tw2ConstructorStore.js");r.d(t,"Tw2ConstructorStore",(function(){return n.Tw2ConstructorStore}));var a=r("./core/store/Tw2VariableTypeStore.js");r.d(t,"Tw2VariableTypeStore",(function(){return a.Tw2VariableTypeStore})),r.d(t,"ErrStoreVariableTypeNotFoundByValue",(function(){return a.ErrStoreVariableTypeNotFoundByValue}));var o=r("./core/store/Tw2VariableStore.js");r.d(t,"Tw2VariableStore",(function(){return o.Tw2VariableStore}));var s=r("./core/store/Tw2ResourcePathStore.js");r.d(t,"Tw2ResourcePathStore",(function(){return s.Tw2ResourcePathStore})),r.d(t,"ErrStorePathUndefined",(function(){return s.ErrStorePathUndefined}));var l=r("./core/store/Tw2ResourceDynamicPathStore.js");r.d(t,"Tw2ResourceDynamicPathStore",(function(){return l.Tw2ResourceDynamicPathStore}));var u=r("./core/store/Tw2ResourceExtensionStore.js");r.d(t,"Tw2ResourceExtensionStore",(function(){return u.Tw2ResourceExtensionStore}))},"./core/value/Tw2Float.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Float",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("Tw2Float","TriFloat"),n=u.meta.float,i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="value",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},c=(o=l).prototype,f="value",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./core/value/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/value/Tw2Float.js");r.d(t,"Tw2Float",(function(){return i.Tw2Float}))},"./core/vertex/Tw2VertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexDeclaration",(function(){return b}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js"),d=r("./core/vertex/Tw2VertexElement.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=f.meta.type("Tw2VertexDeclaration"),n=f.meta.list("Tw2VertexElement"),a=f.meta.list("Tw2VertexElement"),o=f.meta.isPrivate,i((u=m((l=class e{constructor(){h(this,"elements",u,this),h(this,"elementsSorted",c,this)}UpdateValues(){this.RebuildHash()}Clear(){this.elements.splice(0,this.elements.length),this.RebuildHash()}SetStride(e){return this.stride=e,this}RebuildHash(){this.elementsSorted.splice(0,this.elementsSorted.length);for(var t=0;t<this.elements.length;++t)this.elementsSorted.push(this.elements[t]);this.elementsSorted.sort(e.CompareDeclarationElements)}FindUsage(e,t){for(var r=0;r<this.elementsSorted.length;++r){var i=this.elementsSorted[r];if(i.usage===e){if(i.usageIndex===t)return i;if(i.usageIndex>t)return null}if(i.usage>e)return null}return null}SetDeclaration(t,r,i){for(var n=t.gl,a=0,o=0;o<r.elementsSorted.length;++o){var s=r.elementsSorted[o];if(!(s.location<0))for(;;){if(a>=this.elementsSorted.length){n.disableVertexAttribArray(s.location),n.vertexAttrib4f(s.location,0,0,0,0);break}var l=this.elementsSorted[a],u=e.CompareDeclarationElements(l,s);if(u>0){n.disableVertexAttribArray(s.location),n.vertexAttrib4f(s.location,0,0,0,0);break}if(0===u){l.customSetter?l.customSetter(s):(n.enableVertexAttribArray(s.location),n.vertexAttribPointer(s.location,l.elements,l.type,!1,i,l.offset));break}a++}}return!0}SetPartialDeclaration(t,r,i,n,a){for(var o=t.gl,s=[],l=0,u=0;u<r.elementsSorted.length;++u){var c=r.elementsSorted[u];if(!(c.location<0))for(;;){var f=this.elementsSorted[l],d=e.CompareDeclarationElements(f,c,n);if(0===d){f.customSetter?f.customSetter(c):(o.enableVertexAttribArray(c.location),o.vertexAttribPointer(c.location,f.elements,f.type,!1,i,f.offset),o.vertexAttribDivisor(c.location,a),a&&s.push(c.location));break}if(d>0){a||(o.disableVertexAttribArray(c.location),o.vertexAttrib4f(c.location,0,0,0,0));break}if(++l>=this.elementsSorted.length)return a||(o.disableVertexAttribArray(c.location),o.vertexAttrib4f(c.location,0,0,0,0)),s}}return s}ResetInstanceDivisors(e,t){if(t)for(var r=0;r<t.length;++r)e.gl.vertexAttribDivisor(t[r],0)}static CompareDeclarationElements(e,t,r=0){return e.usage<t.usage?-1:e.usage>t.usage?1:e.usageIndex+r<t.usageIndex?-1:e.usageIndex+r>t.usageIndex?1:0}static from(t,r){var i=new e;if(t){for(var n=0,a=0;a<t.length;a++)t[a].offset=n,i.elements.push(d.Tw2VertexElement.from(t[a])),n+=4*t[a].elements;r&&r.skipUpdate||i.RebuildHash()}return i}}).prototype,"elements",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=m(l.prototype,"elementsSorted",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./core/vertex/Tw2VertexElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexElement",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/constant/index.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=w.meta.type("Tw2VertexElement"),n=w.meta.uint,a=w.meta.uint,o=w.meta.uint,s=w.meta.uint,l=w.meta.uint,u=w.meta.uint,i((y=g=class e{constructor(){this.customSetter=null,E(this,"elements",d,this),E(this,"location",h,this),E(this,"offset",m,this),E(this,"type",b,this),E(this,"usage",p,this),E(this,"usageIndex",v,this),this._registerIndex=null,this._usedMask=null,this._attr=null}get string(){return Object(w.getKeyFromValue)(this.constructor.Type,this.usage,"UNKNOWN")}static from(t){var r=new e;if(t){var{usage:i,usageIndex:n}=t;if(r.usage=Object(w.isString)(i)?this.Type[i.toUpperCase()]:i,r.usageIndex=n,Object(w.isNoU)(r.usage))throw new Error("Invalid vertex usage: ".concat(i));var{elements:a=null,offset:o=0,location:s=null,customSetter:l=null}=t;r.offset=o,r.elements=a,r.location=s,r.customSetter=l;var{type:u=_.GL_FLOAT}=t;if(Object(w.isString)(u)&&("GL_"!==u.substring(0,3)&&(u="GL_"+u),void 0===(u=_[u])))throw new ReferenceError("Invalid gl type: ".concat(u));r.type=u;var{registerIndex:c=null,usedMask:f=null,attr:d=null}=t;r._registerIndex=c,r._usedMask=f,r._attr=d}return r}},g.Type={POSITION:0,COLOR:1,NORMAL:2,TANGENT:3,BINORMAL:4,TEXCOORD:5,BLENDWEIGHT:6,BLENDINDICES:7,BITANGENT:4,BLENDWEIGHTS:6,BLENDINDICE:7},d=T((f=y).prototype,"elements",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=T(f.prototype,"location",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=T(f.prototype,"offset",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=T(f.prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T(f.prototype,"usage",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=T(f.prototype,"usageIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c)},"./core/vertex/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./core/vertex/Tw2VertexDeclaration.js");r.d(t,"Tw2VertexDeclaration",(function(){return i.Tw2VertexDeclaration}));var n=r("./core/vertex/Tw2VertexElement.js");r.d(t,"Tw2VertexElement",(function(){return n.Tw2VertexElement}))},"./curve/Tw2CurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSet",(function(){return x}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=j.meta.type("Tw2CurveSet","TriCurveSet"),n=j.meta.string,a=j.meta.list("Tw2ValueBinding"),o=j.meta.list("Tw2Curve"),s=j.meta.boolean,l=j.meta.notImplemented,u=j.meta.list("TriCurveSetRange"),c=j.meta.float,f=j.meta.notImplemented,d=j.meta.boolean,h=j.meta.float,i((S=class extends j.meta.Model{constructor(...e){super(...e),R(this,"name",p,this),R(this,"bindings",v,this),R(this,"curves",g,this),R(this,"playOnLoad",y,this),R(this,"ranges",w,this),R(this,"scale",_,this),R(this,"useSimTimeRebase",E,this),R(this,"scaledTime",T,this),this._isPlaying=!1}Initialize(){this.playOnLoad&&this.Play()}Play(){this._isPlaying=!0,this.scaledTime=0}PlayFrom(e=0){this._isPlaying=!0,this.scaledTime=e*this.scale}Stop(){this._isPlaying=!1}Update(e){if(this._isPlaying){this.scaledTime+=e*this.scale;for(var t=0;t<this.curves.length;++t)this.curves[t].UpdateValue(this.scaledTime);for(var r=0;r<this.bindings.length;++r)this.bindings[r].CopyValue()}}GetRangeByName(e){for(var t=0;t<this.ranges.length;t++)if(this.ranges[t].name===e)return this.ranges[t];return null}GetMaxCurveDuration(){for(var e=0,t=0;t<this.curves.length;++t)"GetLength"in this.curves[t]&&(e=Math.max(e,this.curves[t].GetLength()));return e}},p=P((b=S).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=P(b.prototype,"bindings",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=P(b.prototype,"curves",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=P(b.prototype,"playOnLoad",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=P(b.prototype,"ranges",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=P(b.prototype,"scale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=P(b.prototype,"useSimTimeRebase",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=P(b.prototype,"scaledTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)},"./curve/Tw2ValueBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ValueBinding",(function(){return P})),r.d(t,"ErrBindingValueUndefined",(function(){return x})),r.d(t,"ErrBindingType",(function(){return z})),r.d(t,"ErrBindingReference",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E=r("./global/utils/index.js"),T=r("./global/math/index.js"),S=r("./core/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=E.meta.type("Tw2ValueBinding","TriValueBinding"),n=E.meta.string,a=E.meta.string,o=E.meta.struct(),s=E.meta.vector4,l=E.meta.float,u=E.meta.string,c=E.meta.struct(),i((_=w=class e extends E.meta.Model{constructor(...e){super(...e),j(this,"name",h,this),j(this,"destinationAttribute",m,this),j(this,"destinationObject",b,this),j(this,"offset",p,this),j(this,"scale",v,this),j(this,"sourceAttribute",g,this),j(this,"sourceObject",y,this),this._copyFunc=null,this._destinationElement=null,this._destinationIsArray=null,this._destinationIsRGBA=null,this._sourceElement=null,this._sourceIsArray=null,this._sourceIsRGBA=null}Initialize(){this.UpdateValues()}OnValueChanged(){if(null===this._copyFunc&&this.sourceObject&&""!==this.sourceAttribute&&this.destinationObject&&""!==this.destinationAttribute){var t=!1,r=!1,i=e.FromAttribute(this.sourceAttribute);i.swizzle&&(t=!0,this._sourceElement=i.element,this._sourceIsRGBA=["r","g","b","a"].includes(i.swizzle),this.sourceAttribute=i.attr);var n=e.FromAttribute(this.destinationAttribute);n.swizzle&&(r=!0,this._destinationElement=n.element,this._sourceIsRGBA=["r","g","b","a"].includes(n.swizzle),this.destinationAttribute=n.attr);var a=this.sourceObject[this.sourceAttribute],o=this.destinationObject[this.destinationAttribute];if(void 0===a)throw console.dir(this),new x({name:this.name,objectType:"source",property:this.sourceAttribute,object:this.sourceObject});if(void 0===o)throw console.dir(this),new x({name:this.name,objectType:"destination",property:this.destinationAttribute,object:this.destinationObject});var s=this._sourceIsArray=Object(E.isArrayLike)(a),l=this._destinationIsArray=Object(E.isArrayLike)(o),u=e,c=Object(E.isArrayLike)(this._sourceElement),f=Object(E.isArrayLike)(this._destinationElement);if(c||f){if(!s||!l)throw new Error("Invalid swizzle(s), expected two arrays");if(c&&!f){this._destinationElement=[];for(var d=0;d<this._destinationElement.length;d++)this._destinationElement[d]=d}else if(!c&&f){this._sourceElement=[];for(var h=0;h<this._sourceElement.length;h++)this._sourceElement[h]=h}this._copyFunc=e.CopySwizzledArrays}else{var m;if(s===l&&typeof a==typeof o?s?t?m=r?u.CopyElementToElement:u.ReplicateElement:a.length<=o.length?m=u.CopyArray:16===a.length&&(m=u.ExtractPos):m=u.CopyValueToValue:s&&t&&Object(E.isNumber)(o)?m=u.CopyElementToValue:l&&Object(E.isNumber)(a)?m=r?u.CopyValueToElement:u.ReplicateValue:Object(E.isNumber)(a)&&Object(E.isBoolean)(o)?m=u.CopyFloatToBoolean:Object(E.isBoolean)(a)&&Object(E.isNumber)(o)&&(m=u.CopyBooleanToFloat),!m)throw new z({name:this.name});this._copyFunc=m}}}CopyValue(e=this){this._copyFunc&&(this._copyFunc(this),"UpdateValues"in this.destinationObject?this.destinationObject.UpdateValues({controller:e}):"OnValueChanged"in this.destinationObject&&this.destinationObject.OnValueChanged({controller:e}))}GetDestinationTarget(){return this._copyFunc?this.constructor.GetAttribute(this.destinationObject,this.destinationAttribute,this._destinationElement,this._destinationIsRGBA):this.destinationAttribute}GetSourceTarget(){return this._copyFunc?this.constructor.GetAttribute(this.sourceObject,this.sourceAttribute,this._sourceElement,this._sourceIsRGBA):this.sourceAttribute}SetSource(e,t,r,i){var{object:n,attribute:a}=this.constructor.GetTargets(e,t,r,i);this.sourceObject=n,this.sourceAttribute=a,this._copyFunc=null}SetDestination(e,t,r,i){var{object:n,attribute:a}=this.constructor.GetTargets(e,t,r,i);this.destinationObject=n,this.destinationAttribute=a,this._copyFunc=null}static GetAttribute(e,t,r,i){if(e instanceof S.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:return"v0";case 1:return"v1";case 2:return"v2";case 3:return"v4";default:return t}switch(r){case 0:return t+i?".r":".x";case 1:return t+i?".g":".y";case 2:return t+i?".b":".z";case 3:return t+i?".a":".w";default:if(Object(E.isArrayLike)(r)){for(var n=".",a=0;a<r.length;a++){var o=Object(E.getKeyFromValue)(this.CharacterSwizzle,r[a]);if(void 0===o)throw new Error("Unknown swizzle source: "+r[a]);n+=o}return t+n}return t}}static GetTargets(e,t,r,i){return void 0!==r&&void 0===i&&(i=t.toUpperCase().includes("COLOR")),{object:e,attribute:t=this.GetAttribute(e,t,r,i)}}static FromAttribute(t){var{Vector4Swizzle:r,CharacterSwizzle:i}=e,n=t.split(".")[1];if(!n||!n.length)return{attr:t,element:null,swizzle:null};if((n=n.toLowerCase())in r)return{attr:"value",element:r[n],swizzle:n};if(n in i)return{attr:t.substring(0,t.length-2),element:i[n],swizzle:n};if(1===n.length)throw new Error("Invalid swizzle: "+n);for(var a=[],o=0;o<n.length;o++)if(a[o]=i[n[o].toLowerCase()],void 0===a[o])throw new Error("Invalid swizzle: "+n);return{attr:t.substring(0,t.length-n.length-1),element:a,swizzle:n}}static CopySwizzledArrays(e){for(var t=e.sourceObject[e.sourceAttribute],r=e.destinationObject[e.destinationAttribute],i=e._sourceElement,n=e._destinationElement,a=Math.min(i.length,n.length),o=0;o<a;o++){if(void 0===r[n[o]]||void 0===t[i[o]])throw new Error("Invalid swizzle(s)");r[n[o]]=t[i[o]]*e.scale+e.offset[0]}}static CopyValueToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyArray(e){for(var t=Math.min(e.destinationObject[e.destinationAttribute].length,e.sourceObject[e.sourceAttribute].length),r=0;r<t;++r)e.destinationObject[e.destinationAttribute][r]=e.sourceObject[e.sourceAttribute][r]*e.scale+e.offset[r]}static CopyElementToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static ReplicateValue(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[t]}static ReplicateElement(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[t]}static ExtractPos(e){for(var t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][t+12]*e.scale+e.offset[t]}static CopyElementToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static CopyValueToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyFloatToBoolean(e){e.destinationObject[e.destinationAttribute]=0!==e.sourceObject[e.sourceAttribute]}static CopyBooleanToFloat(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]?1:0}},w.CharacterSwizzle={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},w.Vector4Swizzle={v1:0,v2:1,v3:2,v4:3},h=R((d=_).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=R(d.prototype,"destinationAttribute",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=R(d.prototype,"destinationObject",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=R(d.prototype,"offset",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec4.create()}}),v=R(d.prototype,"scale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=R(d.prototype,"sourceAttribute",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=R(d.prototype,"sourceObject",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f);class x extends S.Tw2Error{constructor(e){super(e,"Error binding '%name=unknown%', %objectType%'s property is undefined (%property%)")}}class z extends S.Tw2Error{constructor(e){super(e,"Error binding '%name=unknown%', cannot identify binding type")}}class O extends S.Tw2Error{constructor(e){super(e,"Error binding '%name=unknown%', could not find '%object%' object reference")}}},"./curve/curve/Tw2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveKey",(function(){return w})),r.d(t,"Tw2Curve",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.string,n=p.meta.float,l=class extends p.meta.Model{constructor(...e){super(...e),g(this,"name",o,this),g(this,"time",s,this)}},o=y((a=l).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=y(a.prototype,"time",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a),_=(u=p.meta.string,c=p.meta.abstract,f=p.meta.abstract,b=m=class e extends p.meta.Model{constructor(...e){super(...e),g(this,"name",h,this)}Initialize(){this.Sort()}Sort(){}GetLength(){}UpdateValue(e){}static Compare(e,t){return e.time<t.time?-1:e.time>t.time?1:0}static Sort(t,r=t.keys){r&&r.length&&(r.sort(e.Compare),t.length=r[r.length-1].time)}static Sort2(t){if(t.keys&&t.keys.length){t.keys.sort(e.Compare);var r=t.keys[t.keys.length-1];if(r.time>t.length){var i=t.length,n=t.endValue,a=t.endTangent;t.length=r.time,t.endValue=r.value,t.endTangent=r.leftTangent,i>0&&(r.time=i,r.value=n,r.leftTangent=a)}}}static Sort3(e){e.sort((e,t)=>e.index<t.index?-1:e.index>t.index?1:0);for(var t=0,r=0;r<e.length;r++)e[r].index=r,r===e.length-1&&(t=e[r].time);return t}},m.inputDimension=null,m.outputDimension=null,m.valueProperty=null,m.curveType=null,m.Key=null,m.Interpolation=null,m.Extrapolation=null,m.Type={CURVE:1,CURVE2:2,CURVE3:3,CURVE_MAYA:4,CURVE_NO_KEYS:5,SEQUENCER:100,SEQUENCER2:101,EXPRESSION:200,ADAPTER:300},m.global={vec3_0:v.vec3.create(),vec4_0:v.vec4.create(),quat_0:v.quat.create(),quat_1:v.quat.create()},h=y((d=b).prototype,"name",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y(d.prototype,"GetLength",[c],Object.getOwnPropertyDescriptor(d.prototype,"GetLength"),d.prototype),y(d.prototype,"UpdateValue",[f],Object.getOwnPropertyDescriptor(d.prototype,"UpdateValue"),d.prototype),d)},"./curve/curve/Tw2EventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventKey",(function(){return A})),r.d(t,"Tw2EventCurve",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R=r("./curve/curve/Tw2Curve.js"),P=r("./global/utils/index.js");function x(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O={NONE:0,CYCLE:3},A=(i=P.meta.type("Tw2EventKey","TriEventKey"),n=P.meta.float,a=P.meta.ushort,i((c=class extends R.Tw2CurveKey{constructor(...e){super(...e),x(this,"time",l,this),x(this,"value",u,this)}},l=z((s=c).prototype,"time",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=z(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=s))||o),M=(f=P.meta.type("Tw2EventCurve","TriEventCurve"),d=P.meta.string,h=P.meta.uint,m=P.meta.enums(O),b=P.meta.list("Tw2EventKey"),p=P.meta.ushort,v=P.meta.isPrivate,f((j=S=class e extends R.Tw2Curve{constructor(...e){super(...e),x(this,"name",w,this),x(this,"extrapolation",_,this),x(this,"keys",E,this),x(this,"value",T,this),this._time=0,this._currentKey=0,this._length=0}Sort(){this.keys.length&&(this.keys.sort(R.Tw2Curve.Compare),this._length=this.keys[this.keys.length-1].time)}GetLength(){return this._length}UpdateValue(t){if(this._length<=0)return this.value;var r=this._time;if(this._time=t,this._time<r&&(this._currentKey=0),this.extrapolation===e.Extrapolation.CYCLE){var i=this._time%this._length;i<r&&(this._currentKey=0),this._time=i}for(;this._currentKey<this.keys.length&&this._time>=this.keys[this._currentKey].time;)this.value=this.keys[this._currentKey].value,++this._currentKey}},S.dimension=1,S.outputDimension=1,S.valueProperty="value",S.curveType=R.Tw2Curve.Type.CURVE,S.Key=A,S.Extrapolation=O,w=z((y=j).prototype,"name",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=z(y.prototype,"extrapolation",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=z(y.prototype,"keys",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=z(y.prototype,"value",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=y))||g)},"./curve/curve/Tw2PerlinCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerlinCurve",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js"),R=r("./global/math/index.js"),P=r("./curve/curve/Tw2Curve.js");function x(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O=(i=j.meta.type("Tw2PerlinCurve","TriPerlinCurve"),n=j.meta.string,a=j.meta.float,o=j.meta.float,s=j.meta.uint,l=j.meta.float,u=j.meta.float,c=j.meta.float,f=j.meta.float,d=j.meta.isPrivate,i((S=T=class extends P.Tw2Curve{constructor(...e){super(...e),x(this,"name",b,this),x(this,"alpha",p,this),x(this,"beta",v,this),x(this,"N",g,this),x(this,"offset",y,this),x(this,"scale",w,this),x(this,"speed",_,this),x(this,"value",E,this)}Sort(){}GetLength(){return 0}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return e-=this.offset,(R.noise.perlin1D(e*this.speed,this.alpha,this.beta,this.N)+1)/2*this.scale+this.offset}},T.outputDimension=1,T.valueProperty="value",T.curveType=P.Tw2Curve.Type.CURVE_NO_KEYS,b=z((m=S).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=z(m.prototype,"alpha",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=z(m.prototype,"beta",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=z(m.prototype,"N",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=z(m.prototype,"offset",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=z(m.prototype,"scale",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=z(m.prototype,"speed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=z(m.prototype,"value",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h)},"./curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/curve/Tw2EventCurve.js");r.d(t,"Tw2EventKey",(function(){return i.Tw2EventKey})),r.d(t,"Tw2EventCurve",(function(){return i.Tw2EventCurve}));var n=r("./curve/curve/Tw2PerlinCurve.js");r.d(t,"Tw2PerlinCurve",(function(){return n.Tw2PerlinCurve}));var a=r("./curve/curve/Tw2Curve.js");r.d(t,"Tw2CurveKey",(function(){return a.Tw2CurveKey})),r.d(t,"Tw2Curve",(function(){return a.Tw2Curve}));var o=r("./curve/curve/legacy/index.js");r.d(t,"Tw2ColorKey",(function(){return o.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return o.Tw2ColorCurve})),r.d(t,"Tw2ColorKey2",(function(){return o.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return o.Tw2ColorCurve2})),r.d(t,"Tw2QuaternionKey2",(function(){return o.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return o.Tw2QuaternionCurve})),r.d(t,"Tw2RandomConstantCurve",(function(){return o.Tw2RandomConstantCurve})),r.d(t,"Tw2Torque",(function(){return o.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return o.Tw2RigidOrientation})),r.d(t,"Tw2QuaternionKey",(function(){return o.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return o.Tw2RotationCurve})),r.d(t,"Tw2ScalarKey",(function(){return o.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return o.Tw2ScalarCurve})),r.d(t,"Tw2ScalarKey2",(function(){return o.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return o.Tw2ScalarCurve2})),r.d(t,"Tw2SineCurve",(function(){return o.Tw2SineCurve})),r.d(t,"Tw2Vector2Key",(function(){return o.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return o.Tw2Vector2Curve})),r.d(t,"Tw2Vector3Key",(function(){return o.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return o.Tw2Vector3Curve})),r.d(t,"Tw2VectorKey",(function(){return o.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return o.Tw2VectorCurve}))},"./curve/curve/legacy/Tw2ColorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey",(function(){return B})),r.d(t,"Tw2ColorCurve",(function(){return N}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js"),D=r("./curve/curve/Tw2Curve.js");function I(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function L(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var F={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},G={NONE:0,CONSTANT:1,LINEAR:2},B=(i=M.meta.type("Tw2ColorKey"),n=M.meta.vector4,a=M.meta.vector4,o=M.meta.vector4,s=M.meta.enums(G),i((m=class extends D.Tw2CurveKey{constructor(...e){super(...e),I(this,"value",c,this),I(this,"left",f,this),I(this,"right",d,this),I(this,"interpolation",h,this)}},c=L((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),f=L(u.prototype,"left",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),d=L(u.prototype,"right",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),h=L(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=u))||l),N=(b=M.meta.type("Tw2ColorCurve"),p=M.meta.float,v=M.meta.vector4,g=M.meta.isPrivate,y=M.meta.enums(F),w=M.meta.list("Tw2ColorKey"),_=M.meta.float,E=M.meta.isPrivate,b((A=O=class extends D.Tw2Curve{constructor(...e){super(...e),I(this,"start",j,this),I(this,"value",R,this),I(this,"extrapolation",P,this),I(this,"keys",x,this),I(this,"length",z,this),this._currentKey=1}Sort(){D.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return C.vec4.copy(t,this.value);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e>=i.time)switch(this.extrapolation){case F.NONE:return C.vec4.copy(t,this.value);case F.CONSTANT:return C.vec4.copy(t,i.value);case F.GRADIENT:return C.vec4.scaleAndAdd(t,i.value,i.right,e-i.time);default:e%=i.time}else if(e<0||e<r.time)switch(this.extrapolation){case F.NONE:return C.vec4.copy(t,this.value);case F.GRADIENT:return C.vec4.scaleAndAdd(t,r.value,r.left,e*this.length-i.time);default:return C.vec4.copy(t,r.value)}for(var n=this.keys[this._currentKey],a=this.keys[this._currentKey-1];e>=n.time||e<a.time;)e<a.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],a=this.keys[this._currentKey-1];var o=(e-a.time)/(n.time-a.time);switch(a.interpolation){case G.CONSTANT:return C.vec4.copy(t,a.value);default:return t[0]=a.value[0]*(1-o)+n.value[0]*o,t[1]=a.value[1]*(1-o)+n.value[1]*o,t[2]=a.value[2]*(1-o)+n.value[2]*o,t[3]=a.value[3]*(1-o)+n.value[3]*o,t}}},O.inputDimension=4,O.outputDimension=4,O.valueProperty="value",O.curveType=D.Tw2Curve.Type.CURVE,O.Key=B,O.Extrapolation=F,O.Interpolation=G,j=L((S=A).prototype,"start",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=L(S.prototype,"value",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),P=L(S.prototype,"extrapolation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(S.prototype,"keys",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=L(S.prototype,"length",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=S))||T)},"./curve/curve/legacy/Tw2ColorCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey2",(function(){return J})),r.d(t,"Tw2ColorCurve2",(function(){return $}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function X(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Z={CONSTANT:0,LINEAR:1},J=(i=W.meta.type("Tw2ColorKey2"),n=W.meta.vector4,a=W.meta.vector4,o=W.meta.vector4,s=W.meta.enums(Z),i((m=class extends K.Tw2CurveKey{constructor(...e){super(...e),X(this,"value",c,this),X(this,"leftTangent",f,this),X(this,"rightTangent",d,this),X(this,"interpolation",h,this)}},c=Q((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),f=Q(u.prototype,"leftTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),d=Q(u.prototype,"rightTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),h=Q(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=u))||l),$=(b=W.meta.type("Tw2ColorCurve2"),p=W.meta.boolean,v=W.meta.boolean,g=W.meta.float,y=W.meta.float,w=W.meta.vector4,_=W.meta.vector4,E=W.meta.isPrivate,T=W.meta.vector4,S=W.meta.vector4,j=W.meta.vector4,R=W.meta.enums(Z),P=W.meta.list("Tw2ColorKey2"),x=W.meta.float,z=W.meta.isPrivate,b((q=H=class extends K.Tw2Curve{constructor(...e){super(...e),X(this,"cycle",M,this),X(this,"reversed",C,this),X(this,"timeOffset",D,this),X(this,"timeScale",I,this),X(this,"startValue",L,this),X(this,"currentValue",F,this),X(this,"endValue",G,this),X(this,"startTangent",B,this),X(this,"endTangent",N,this),X(this,"interpolation",k,this),X(this,"keys",U,this),X(this,"length",V,this)}Sort(){K.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return Y.vec4.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?Y.vec4.copy(t,this.startValue):Y.vec4.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(var n=0;n+1<this.keys.length&&(r=this.keys[n],i=this.keys[n+1],!(r.time<=e&&i.time>e));++n);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){Y.vec4.copy(i,this.startValue);var n=this.startValue,a=this.endValue,o=this.interpolation,s=this.length;switch(null!==t&&(o=t.interpolation,e-=t.time),o){case Z.LINEAR:return t&&r?(n=t.value,a=r.value,s=r.time-t.time):r?(a=r.value,s=r.time):t&&(n=t.value,s=this.length-t.time),i[0]=n[0]+(a[0]-n[0])*(e/s),i[1]=n[1]+(a[1]-n[1])*(e/s),i[2]=n[2]+(a[2]-n[2])*(e/s),i[3]=n[3]+(a[3]-n[3])*(e/s),i;default:return i}}},H.inputDimension=4,H.outputDimension=4,H.valueProperty="currentValue",H.curveType=K.Tw2Curve.Type.CURVE2,H.Key=J,H.Interpolation=Z,M=Q((A=q).prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Q(A.prototype,"reversed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Q(A.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(A.prototype,"timeScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=Q(A.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.fromValues(0,0,0,1)}}),F=Q(A.prototype,"currentValue",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.fromValues(0,0,0,1)}}),G=Q(A.prototype,"endValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.fromValues(0,0,0,1)}}),B=Q(A.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),N=Q(A.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),k=Q(A.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=Q(A.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Q(A.prototype,"length",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=A))||O)},"./curve/curve/legacy/Tw2QuaternionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey2",(function(){return J})),r.d(t,"Tw2QuaternionCurve",(function(){return $}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function X(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Z={CONSTANT:0,SPHERICAL_LINEAR:4},J=(i=W.meta.type("Tw2QuaternionKey2"),n=W.meta.quaternion,a=W.meta.vector4,o=W.meta.vector4,s=W.meta.enums(Z),i((m=class extends K.Tw2CurveKey{constructor(...e){super(...e),X(this,"value",c,this),X(this,"leftTangent",f,this),X(this,"rightTangent",d,this),X(this,"interpolation",h,this)}},c=Q((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.quat.create()}}),f=Q(u.prototype,"leftTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),d=Q(u.prototype,"rightTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),h=Q(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=u))||l),$=(b=W.meta.type("Tw2QuaternionCurve"),p=W.meta.boolean,v=W.meta.boolean,g=W.meta.float,y=W.meta.float,w=W.meta.quaternion,_=W.meta.quaternion,E=W.meta.isPrivate,T=W.meta.quaternion,S=W.meta.vector4,j=W.meta.vector4,R=W.meta.enums(Z),P=W.meta.list("Tw2QuaternionKey"),x=W.meta.float,z=W.meta.isPrivate,b((q=H=class extends K.Tw2Curve{constructor(...e){super(...e),X(this,"cycle",M,this),X(this,"reversed",C,this),X(this,"timeOffset",D,this),X(this,"timeScale",I,this),X(this,"startValue",L,this),X(this,"currentValue",F,this),X(this,"endValue",G,this),X(this,"startTangent",B,this),X(this,"endTangent",N,this),X(this,"interpolation",k,this),X(this,"keys",U,this),X(this,"length",V,this)}Sort(){K.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t;if(e>this.length){if(!this.cycle)return this.reversed?(t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t):(t[0]=this.endValue[0],t[1]=this.endValue[1],t[2]=this.endValue[2],t);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(var n=0;n+1<this.keys.length&&(r=this.keys[n],i=this.keys[n+1],!(r.time<=e&&i.time>e));++n);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){i[0]=this.startValue[0],i[1]=this.startValue[1],i[2]=this.startValue[2];var n=this.startValue,a=this.endValue,o=this.interpolation,s=this.length;switch(null!==t&&(o=t.interpolation,e-=t.time),o){case Z.SPHERICAL_LINEAR:return t&&r?(n=t.value,a=r.value,s=r.time-t.time):r?(a=r.value,s=r.time):t&&(n=t.value,s=this.length-t.time),Y.quat.slerp(i,n,a,e/s),i;default:return i}}},H.inputDimension=4,H.outputDimension=4,H.valueProperty="currentValue",H.curveType=K.Tw2Curve.Type.CURVE2,H.Key=J,H.Interpolation=Z,M=Q((A=q).prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Q(A.prototype,"reversed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Q(A.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(A.prototype,"timeScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=Q(A.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.quat.create()}}),F=Q(A.prototype,"currentValue",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.quat.create()}}),G=Q(A.prototype,"endValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.quat.create()}}),B=Q(A.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),N=Q(A.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),k=Q(A.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=Q(A.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Q(A.prototype,"length",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=A))||O)},"./curve/curve/legacy/Tw2RandomConstantCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomConstantCurve",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./curve/curve/Tw2Curve.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=v.meta.type("Tw2RandomConstantCurve"),n=v.meta.float,a=v.meta.isPrivate,o=v.meta.float,s=v.meta.float,l=v.meta.boolean,i((p=b=class extends g.Tw2Curve{constructor(...e){super(...e),y(this,"value",f,this),y(this,"min",d,this),y(this,"max",h,this),y(this,"hold",m,this)}Sort(){}GetLength(){return 0}UpdateValue(){this.value=this.GetValueAt()}GetValueAt(){return this.hold?this.value:this.min+(this.max-this.min)*Math.random()}},b.outputDimension=1,b.valueProperty="value",b.curveType=g.Tw2Curve.Type.CURVE_NO_KEYS,f=w((c=p).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=w(c.prototype,"min",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=w(c.prototype,"max",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=w(c.prototype,"hold",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=c))||u)},"./curve/curve/legacy/Tw2RigidOrientation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Torque",(function(){return B})),r.d(t,"Tw2RigidOrientation",(function(){return N}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D=r("./global/utils/index.js"),I=r("./global/math/index.js"),L=r("./curve/curve/Tw2Curve.js");function F(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function G(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var B=(i=D.meta.type("Tw2Torque"),n=D.meta.quaternion,a=D.meta.vector4,o=D.meta.vector4,i((d=class extends L.Tw2CurveKey{constructor(...e){super(...e),F(this,"rot0",u,this),F(this,"omega0",c,this),F(this,"torque",f,this)}},u=G((l=d).prototype,"rot0",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.quat.create()}}),c=G(l.prototype,"omega0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),f=G(l.prototype,"torque",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.vec3.create()}}),s=l))||s),N=(h=D.meta.type("Tw2RigidOrientation"),m=D.meta.string,b=D.meta.float,p=D.meta.float,v=D.meta.quaternion,g=D.meta.isPrivate,y=D.meta.float,w=D.meta.list("Tw2Torque"),_=D.meta.float,E=D.meta.isPrivate,h((C=M=class extends L.Tw2Curve{constructor(...e){super(...e),F(this,"name",j,this),F(this,"I",R,this),F(this,"drag",P,this),F(this,"value",x,this),F(this,"start",z,this),F(this,"states",O,this),F(this,"length",A,this)}Sort(){L.Tw2Curve.Sort(this,this.states)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.states.length||e<0||e<this.states[0].time)return I.quat.copy(t,this.value);var r=0;if(e>=this.states[this.states.length-1].time)r=this.states.length-1;else for(;r+1<this.states.length&&!(e>=this.states[r].time&&e<this.states[r+1].time);++r);var i=L.Tw2Curve.global.vec3_0,n=L.Tw2Curve.global.quat_0,a=this.states[r];return I.vec3.exponentialDecay(i,a.omega0,a.torque,this.I,this.drag,e-a.time),I.quat.exp(n,i),I.quat.multiply(t,this.states[r].rot0,n),t}},M.inputDimension=4,M.outputDimension=4,M.valueProperty="value",M.curveType=L.Tw2Curve.Type.CURVE,M.Key=B,j=G((S=C).prototype,"name",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=G(S.prototype,"I",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=G(S.prototype,"drag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=G(S.prototype,"value",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.quat.create()}}),z=G(S.prototype,"start",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=G(S.prototype,"states",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=G(S.prototype,"length",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=S))||T)},"./curve/curve/legacy/Tw2RotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey",(function(){return N})),r.d(t,"Tw2RotationCurve",(function(){return k}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C=r("./global/utils/index.js"),D=r("./global/math/index.js"),I=r("./curve/curve/Tw2Curve.js");function L(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function F(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var G={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},B={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,SLERP:5,SQUAD:6},N=(i=C.meta.type("Tw2QuaternionKey"),n=C.meta.quaternion,a=C.meta.isPrivate,o=C.meta.vector4,s=C.meta.vector4,l=C.meta.enums(B),i((b=class extends I.Tw2CurveKey{constructor(...e){super(...e),L(this,"value",f,this),L(this,"left",d,this),L(this,"right",h,this),L(this,"interpolation",m,this)}},f=F((c=b).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.quat.create()}}),d=F(c.prototype,"left",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),h=F(c.prototype,"right",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),m=F(c.prototype,"interpolation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),u=c))||u),k=(p=C.meta.type("Tw2RotationCurve"),v=C.meta.float,g=C.meta.quaternion,y=C.meta.isPrivate,w=C.meta.enums(G),_=C.meta.list("Tw2QuaternionKey"),E=C.meta.float,T=C.meta.isPrivate,p((M=A=class e extends I.Tw2Curve{constructor(...e){super(...e),L(this,"start",R,this),L(this,"value",P,this),L(this,"extrapolation",x,this),L(this,"keys",z,this),L(this,"length",O,this),this._currentKey=1}Sort(){I.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(t,r){if(0===this.length)return D.quat.copy(r,this.value);var i=I.Tw2Curve.global,n=this.keys[0],a=this.keys[this.keys.length-1];if(t>=a.time)switch(this.extrapolation){case G.NONE:return D.quat.copy(r,this.value);case G.CONSTANT:return D.quat.copy(r,a.value);default:t%=a.time}else if(t<0||t<n.time)switch(this.extrapolation){case G.NONE:return D.quat.copy(r,this.value);default:return D.quat.copy(r,n.value)}for(var o=this.keys[this._currentKey],s=this.keys[this._currentKey-1];t>=o.time||t<s.time;)t<s.time&&(this._currentKey=0),this._currentKey++,o=this.keys[this._currentKey],s=this.keys[this._currentKey-1];var l=(t-s.time)/(o.time-s.time);switch(s.interpolation){case B.CONSTANT:return D.quat.copy(r,s.value);case e.Interpolation.LINEAR:return r[0]=s.value[0]*(1-l)+o.value[0]*l,r[1]=s.value[1]*(1-l)+o.value[1]*l,r[2]=s.value[2]*(1-l)+o.value[2]*l,r[3]=s.value[3]*(1-l)+o.value[3]*l,r;case B.HERMITE:for(var u=D.quat.identity(i.quat_0),c=[s.value,s.right,o.left,o.value],f=3;f>0;f--){var d=D.num.biCumulative(l,f);d>1&&D.quat.multiply(r,u,c[f]),r[0]=-c[f-1][0],r[1]=-c[f-1][1],r[2]=-c[f-1][2],r[3]=c[f-1][3],D.quat.multiply(r,r,c[f]),D.quat.pow(r,r,d),D.quat.multiply(u,u,r)}return D.quat.multiply(r,u,s.value);case e.Interpolation.SLERP:return D.quat.slerp(r,s.value,o.value,l);default:return D.quat.sqlerp(r,s.value,s.right,o.left,o.value,l)}}},A.outputDimension=4,A.inputDimension=4,A.valueProperty="value",A.curveType=I.Tw2Curve.Type.CURVE,A.Child=N,A.Extrapolation=G,A.Interpolation=B,R=F((j=M).prototype,"start",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=F(j.prototype,"value",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.quat.create()}}),x=F(j.prototype,"extrapolation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=F(j.prototype,"keys",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=F(j.prototype,"length",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=j))||S)},"./curve/curve/legacy/Tw2ScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey",(function(){return U})),r.d(t,"Tw2ScalarCurve",(function(){return V}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L=r("./global/utils/index.js"),F=r("./curve/curve/Tw2Curve.js");function G(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function B(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var N={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},k={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,CATMULROM:4},U=(i=L.meta.type("Tw2ScalarKey"),n=L.meta.float,a=L.meta.float,o=L.meta.float,s=L.meta.enums(k),i((m=class extends F.Tw2CurveKey{constructor(...e){super(...e),G(this,"value",c,this),G(this,"left",f,this),G(this,"right",d,this),G(this,"interpolation",h,this)}},c=B((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=B(u.prototype,"left",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=B(u.prototype,"right",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=B(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=u))||l),V=(b=L.meta.type("Tw2ScalarCurve"),p=L.meta.float,v=L.meta.float,g=L.meta.float,y=L.meta.float,w=L.meta.isPrivate,_=L.meta.enums(N),E=L.meta.list("Tw2ScalarKey"),T=L.meta.float,S=L.meta.isPrivate,b((I=D=class extends F.Tw2Curve{constructor(...e){super(...e),G(this,"start",P,this),G(this,"timeScale",x,this),G(this,"timeOffset",z,this),G(this,"value",O,this),G(this,"extrapolation",A,this),G(this,"keys",M,this),G(this,"length",C,this),this._currentKey=1}Sort(){F.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale-this.timeOffset,0===this.length)return this.value;var t=this.keys[0],r=this.keys[this.keys.length-1];if(e>=r.time)switch(this.extrapolation){case N.NONE:return this.value;case N.CONSTANT:return r.value;case N.GRADIENT:return r.value+(e-r.time)*r.right;default:e%=r.time}else if(e<0||e<t.time)switch(this.extrapolation){case N.NONE:return this.value;case N.GRADIENT:return t.value+(e*this.length-r.time)*t.left;default:return t.value}for(var i=this.keys[this._currentKey],n=this.keys[this._currentKey-1];e>=i.time||e<n.time;)e<n.time&&(this._currentKey=0),this._currentKey++,i=this.keys[this._currentKey],n=this.keys[this._currentKey-1];var a=(e-n.time)/(i.time-n.time);switch(n.interpolation){case k.CONSTANT:return n.value;case k.LINEAR:return n.value*(1-a)+i.value*a;case k.HERMITE:var o=-2*a*a*a+3*a*a,s=a*a*a-2*a*a+a,l=a*a*a-a*a;return(2*a*a*a-3*a*a+1)*n.value+o*i.value+s*n.right+l*i.left;default:var u=1+(Math.sqrt(n.value/i.value)-1)*Math.exp(-e/n.right);return u*u*i.value}}},D.inputDimension=1,D.outputDimension=1,D.valueProperty="value",D.curveType=F.Tw2Curve.Type.CURVE,D.Key=U,D.Extrapolation=N,D.Interpolation=k,P=B((R=I).prototype,"start",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=B(R.prototype,"timeScale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=B(R.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=B(R.prototype,"value",[y,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=B(R.prototype,"extrapolation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=B(R.prototype,"keys",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=B(R.prototype,"length",[T,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=R))||j)},"./curve/curve/legacy/Tw2ScalarCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey2",(function(){return Z})),r.d(t,"Tw2ScalarCurve2",(function(){return J}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./curve/curve/Tw2Curve.js");function K(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function X(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Q={CONSTANT:0,LINEAR:1,HERMITE:2},Z=(i=W.meta.type("Tw2ScalarKey2"),n=W.meta.float,a=W.meta.float,o=W.meta.float,s=W.meta.enums(Q),i((m=class extends Y.Tw2CurveKey{constructor(...e){super(...e),K(this,"value",c,this),K(this,"leftTangent",f,this),K(this,"rightTangent",d,this),K(this,"interpolation",h,this)}},c=X((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=X(u.prototype,"leftTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=X(u.prototype,"rightTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=X(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=u))||l),J=(b=W.meta.type("Tw2ScalarCurve2"),p=W.meta.boolean,v=W.meta.boolean,g=W.meta.float,y=W.meta.float,w=W.meta.float,_=W.meta.float,E=W.meta.isPrivate,T=W.meta.float,S=W.meta.float,j=W.meta.float,R=W.meta.enums(Q),P=W.meta.list("Tw2ScalarKey2"),x=W.meta.float,z=W.meta.isPrivate,b((q=H=class extends Y.Tw2Curve{constructor(...e){super(...e),K(this,"cycle",M,this),K(this,"reversed",C,this),K(this,"timeOffset",D,this),K(this,"timeScale",I,this),K(this,"startValue",L,this),K(this,"currentValue",F,this),K(this,"endValue",G,this),K(this,"startTangent",B,this),K(this,"endTangent",N,this),K(this,"interpolation",k,this),K(this,"keys",U,this),K(this,"length",V,this)}Sort(){Y.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.currentValue=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return this.startValue;if(e>this.length){if(!this.cycle)return this.reversed?this.startValue:this.endValue;e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null);var t=this.keys[0],r=this.keys[this.keys.length-1];if(e<=t.time)return this.Interpolate(e,null,t);if(e>=r.time)return this.Interpolate(e,r,null);for(var i=0;i+1<this.keys.length&&(t=this.keys[i],r=this.keys[i+1],!(t.time<=e&&r.time>e));++i);return this.Interpolate(e,t,r)}Interpolate(e,t,r){var i=this.startValue,n=this.endValue,a=this.interpolation,o=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case Q.LINEAR:return t&&r?(i=t.value,n=r.value,o=r.time-t.time):r?(n=r.value,o=r.time):t&&(i=t.value,o=this.length-t.time),i+e/o*(n-i);case Q.HERMITE:var s=this.startTangent,l=this.endTangent;t&&r?(i=t.value,s=t.rightTangent,n=r.value,l=r.leftTangent,o=r.time-t.time):r?(n=r.value,l=r.leftTangent,o=r.time):t&&(i=t.value,s=t.rightTangent,o=this.length-t.time);var u=e/o,c=u*u,f=c*u,d=-2*f+3*c,h=f-c;return i*(1-d)+n*d+s*(u+h-c)+l*h;default:return this.startValue}}},H.inputDimension=1,H.outputDimension=1,H.valueProperty="currentValue",H.curveType=Y.Tw2Curve.Type.CURVE2,H.Key=Z,H.Interpolation=Q,M=X((A=q).prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=X(A.prototype,"reversed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=X(A.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=X(A.prototype,"timeScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=X(A.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=X(A.prototype,"currentValue",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=X(A.prototype,"endValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=X(A.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=X(A.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=X(A.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=X(A.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=X(A.prototype,"length",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=A))||O)},"./curve/curve/legacy/Tw2SineCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SineCurve",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./curve/curve/Tw2Curve.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=v.meta.type("Tw2SineCurve"),n=v.meta.float,a=v.meta.isPrivate,o=v.meta.float,s=v.meta.float,l=v.meta.float,i((p=b=class extends g.Tw2Curve{constructor(...e){super(...e),y(this,"value",f,this),y(this,"offset",d,this),y(this,"scale",h,this),y(this,"speed",m,this)}Sort(){}GetLength(){return 0}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return Math.sin(e*Math.PI*2*this.speed)*this.scale+this.offset}},b.outputDimension=1,b.valueProperty="value",b.curveType=g.Tw2Curve.Type.CURVE_NO_KEYS,f=w((c=p).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=w(c.prototype,"offset",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=w(c.prototype,"scale",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=w(c.prototype,"speed",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=c))||u)},"./curve/curve/legacy/Tw2Vector2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Key",(function(){return J})),r.d(t,"Tw2Vector2Curve",(function(){return $}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function X(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Z={CONSTANT:0,LINEAR:1,HERMITE:2},J=(i=W.meta.type("Tw2Vector2Key"),n=W.meta.vector2,a=W.meta.vector2,o=W.meta.vector2,s=W.meta.enums(Z),i((m=class extends K.Tw2CurveKey{constructor(...e){super(...e),X(this,"value",c,this),X(this,"leftTangent",f,this),X(this,"rightTangent",d,this),X(this,"interpolation",h,this)}},c=Q((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),f=Q(u.prototype,"leftTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),d=Q(u.prototype,"rightTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),h=Q(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=u))||l),$=(b=W.meta.type("Tw2Vector2Curve"),p=W.meta.boolean,v=W.meta.boolean,g=W.meta.float,y=W.meta.float,w=W.meta.vector2,_=W.meta.vector2,E=W.meta.isPrivate,T=W.meta.vector2,S=W.meta.vector2,j=W.meta.vector2,R=W.meta.enums(Z),P=W.meta.list("Tw2Vector2Key"),x=W.meta.float,z=W.meta.isPrivate,b((q=H=class extends K.Tw2Curve{constructor(...e){super(...e),X(this,"cycle",M,this),X(this,"reversed",C,this),X(this,"timeOffset",D,this),X(this,"timeScale",I,this),X(this,"startValue",L,this),X(this,"currentValue",F,this),X(this,"endValue",G,this),X(this,"startTangent",B,this),X(this,"endTangent",N,this),X(this,"interpolation",k,this),X(this,"keys",U,this),X(this,"length",V,this)}Sort(){K.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return Y.vec2.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?Y.vec2.copy(t,this.startValue):Y.vec2.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(var n=0;n+1<this.keys.length&&(r=this.keys[n],i=this.keys[n+1],!(r.time<=e&&i.time>e));++n);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){Y.vec2.copy(i,this.startValue);var n=this.startValue,a=this.endValue,o=this.interpolation,s=this.length;switch(null!==t&&(o=t.interpolation,e-=t.time),o){case Z.LINEAR:return t&&r?(n=t.value,a=r.value,s=r.time-t.time):r?(a=r.value,s=r.time):t&&(n=t.value,s=this.length-t.time),i[0]=n[0]+(a[0]-n[0])*(e/s),i[1]=n[1]+(a[1]-n[1])*(e/s),i;case Z.HERMITE:var l=this.startTangent,u=this.endTangent;t&&r?(n=t.value,l=t.rightTangent,a=r.value,u=r.leftTangent,s=r.time-t.time):r?(a=r.value,u=r.leftTangent,s=r.time):t&&(n=t.value,l=t.rightTangent,s=this.length-t.time);var c=e/s,f=c*c,d=f*c,h=-2*d+3*f,m=1-h,b=d-f,p=c+b-f;return i[0]=n[0]*m+a[0]*h+l[0]*p+u[0]*b,i[1]=n[1]*m+a[1]*h+l[1]*p+u[1]*b,i;default:return i}}},H.inputDimension=2,H.outputDimension=2,H.valueProperty="value",H.curveType=K.Tw2Curve.Type.CURVE2,H.Key=J,H.Interpolation=Z,M=Q((A=q).prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Q(A.prototype,"reversed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Q(A.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(A.prototype,"timeScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=Q(A.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),F=Q(A.prototype,"currentValue",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),G=Q(A.prototype,"endValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),B=Q(A.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),N=Q(A.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec2.create()}}),k=Q(A.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=Q(A.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Q(A.prototype,"length",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=A))||O)},"./curve/curve/legacy/Tw2Vector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Key",(function(){return J})),r.d(t,"Tw2Vector3Curve",(function(){return $}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W=r("./global/utils/index.js"),Y=r("./global/math/index.js"),K=r("./curve/curve/Tw2Curve.js");function X(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Z={CONSTANT:0,LINEAR:1,HERMITE:2},J=(i=W.meta.type("Tw2Vector3Key"),n=W.meta.vector3,a=W.meta.vector3,o=W.meta.vector3,s=W.meta.enums(Z),i((m=class extends K.Tw2CurveKey{constructor(...e){super(...e),X(this,"value",c,this),X(this,"leftTangent",f,this),X(this,"rightTangent",d,this),X(this,"interpolation",h,this)}},c=Q((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),f=Q(u.prototype,"leftTangent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),d=Q(u.prototype,"rightTangent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),h=Q(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=u))||l),$=(b=W.meta.type("Tw2Vector3Curve"),p=W.meta.boolean,v=W.meta.boolean,g=W.meta.float,y=W.meta.float,w=W.meta.vector3,_=W.meta.vector3,E=W.meta.isPrivate,T=W.meta.vector3,S=W.meta.vector3,j=W.meta.vector3,R=W.meta.enums(Z),P=W.meta.list("Tw2Vector3Key"),x=W.meta.float,z=W.meta.isPrivate,b((q=H=class extends K.Tw2Curve{constructor(...e){super(...e),X(this,"cycle",M,this),X(this,"reversed",C,this),X(this,"timeOffset",D,this),X(this,"timeScale",I,this),X(this,"startValue",L,this),X(this,"currentValue",F,this),X(this,"endValue",G,this),X(this,"startTangent",B,this),X(this,"endTangent",N,this),X(this,"interpolation",k,this),X(this,"keys",U,this),X(this,"length",V,this)}Sort(){K.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return Y.vec3.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?Y.vec3.copy(t,this.startValue):Y.vec3.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(var n=0;n+1<this.keys.length&&(r=this.keys[n],i=this.keys[n+1],!(r.time<=e&&i.time>e));++n);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){Y.vec3.copy(i,this.startValue);var n=this.startValue,a=this.endValue,o=this.interpolation,s=this.length;switch(null!==t&&(o=t.interpolation,e-=t.time),o){case Z.LINEAR:return t&&r?(n=t.value,a=r.value,s=r.time-t.time):r?(a=r.value,s=r.time):t&&(n=t.value,s=this.length-t.time),i[0]=n[0]+(a[0]-n[0])*(e/s),i[1]=n[1]+(a[1]-n[1])*(e/s),i[2]=n[2]+(a[2]-n[2])*(e/s),i;case Z.HERMITE:var l=this.startTangent,u=this.endTangent;t&&r?(n=t.value,l=t.rightTangent,a=r.value,u=r.leftTangent,s=r.time-t.time):r?(a=r.value,u=r.leftTangent,s=r.time):t&&(n=t.value,l=t.rightTangent,s=this.length-t.time);var c=e/s,f=c*c,d=f*c,h=-2*d+3*f,m=1-h,b=d-f,p=c+b-f;return i[0]=n[0]*m+a[0]*h+l[0]*p+u[0]*b,i[1]=n[1]*m+a[1]*h+l[1]*p+u[1]*b,i[2]=n[2]*m+a[2]*h+l[2]*p+u[2]*b,i;default:return i}}},H.inputDimension=3,H.outputDimension=3,H.valueProperty="currentValue",H.curveType=K.Tw2Curve.Type.CURVE2,H.Key=J,H.Interpolation=Z,M=Q((A=q).prototype,"cycle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Q(A.prototype,"reversed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Q(A.prototype,"timeOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=Q(A.prototype,"timeScale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=Q(A.prototype,"startValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),F=Q(A.prototype,"currentValue",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),G=Q(A.prototype,"endValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),B=Q(A.prototype,"startTangent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),N=Q(A.prototype,"endTangent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),k=Q(A.prototype,"interpolation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=Q(A.prototype,"keys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=Q(A.prototype,"length",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=A))||O)},"./curve/curve/legacy/Tw2VectorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorKey",(function(){return B})),r.d(t,"Tw2VectorCurve",(function(){return N}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js"),D=r("./curve/curve/Tw2Curve.js");function I(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function L(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var F={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},G={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3},B=(i=M.meta.type("Tw2VectorKey"),n=M.meta.vector3,a=M.meta.vector3,o=M.meta.vector3,s=M.meta.enums(G),i((m=class extends D.Tw2CurveKey{constructor(...e){super(...e),I(this,"value",c,this),I(this,"left",f,this),I(this,"right",d,this),I(this,"interpolation",h,this)}},c=L((u=m).prototype,"value",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),f=L(u.prototype,"left",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),d=L(u.prototype,"right",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),h=L(u.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=u))||l),N=(b=M.meta.type("Tw2VectorCurve"),p=M.meta.float,v=M.meta.vector3,g=M.meta.isPrivate,y=M.meta.enums(F),w=M.meta.list(),_=M.meta.float,E=M.meta.isPrivate,b((A=O=class extends D.Tw2Curve{constructor(...e){super(...e),I(this,"start",j,this),I(this,"value",R,this),I(this,"extrapolation",P,this),I(this,"keys",x,this),I(this,"length",z,this),this._currentKey=1}Sort(){D.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return C.vec3.copy(t,this.value);var r=this.keys[0],i=this.keys[this.keys.length-1];if(e>=i.time)switch(this.extrapolation){case F.NONE:return C.vec3.copy(t,this.value);case F.CONSTANT:return C.vec3.copy(t,i.value);case F.GRADIENT:return C.vec3.scaleAndAdd(t,i.value,i.right,e-i.time);default:e%=i.time}else if(e<0||e<r.time)switch(this.extrapolation){case F.NONE:return C.vec3.copy(t,this.value);case F.GRADIENT:return C.vec3.scaleAndAdd(t,r.value,r.left,e*this.length-i.time);default:return C.vec3.copy(t,r.value)}for(var n=this.keys[this._currentKey],a=this.keys[this._currentKey-1];e>=n.time||e<a.time;)e<a.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],a=this.keys[this._currentKey-1];var o=(e-a.time)/(n.time-a.time);switch(a.interpolation){case G.CONSTANT:return C.vec3.copy(t,a.value);case G.LINEAR:return t[0]=a.value[0]*(1-o)+n.value[0]*o,t[1]=a.value[1]*(1-o)+n.value[1]*o,t[2]=a.value[2]*(1-o)+n.value[2]*o,t;case G.HERMITE:var s=2*o*o*o-3*o*o+1,l=-2*o*o*o+3*o*o,u=o*o*o-2*o*o+o,c=o*o*o-o*o;return t[0]=s*a.value[0]+l*n.value[0]+u*a.right[0]+c*n.left[0],t[1]=s*a.value[1]+l*n.value[1]+u*a.right[1]+c*n.left[1],t[2]=s*a.value[2]+l*n.value[2]+u*a.right[2]+c*n.left[2],t;default:return t}}},O.inputDimension=3,O.outputDimension=3,O.valueProperty="value",O.curveType=D.Tw2Curve.Type.CURVE,O.Key=B,O.Extrapolation=F,O.Interpolation=G,j=L((S=A).prototype,"start",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=L(S.prototype,"value",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),P=L(S.prototype,"extrapolation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(S.prototype,"keys",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=L(S.prototype,"length",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=S))||T)},"./curve/curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/curve/legacy/Tw2ColorCurve.js");r.d(t,"Tw2ColorKey",(function(){return i.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return i.Tw2ColorCurve}));var n=r("./curve/curve/legacy/Tw2ColorCurve2.js");r.d(t,"Tw2ColorKey2",(function(){return n.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return n.Tw2ColorCurve2}));var a=r("./curve/curve/legacy/Tw2QuaternionCurve.js");r.d(t,"Tw2QuaternionKey2",(function(){return a.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return a.Tw2QuaternionCurve}));var o=r("./curve/curve/legacy/Tw2RandomConstantCurve.js");r.d(t,"Tw2RandomConstantCurve",(function(){return o.Tw2RandomConstantCurve}));var s=r("./curve/curve/legacy/Tw2RigidOrientation.js");r.d(t,"Tw2Torque",(function(){return s.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return s.Tw2RigidOrientation}));var l=r("./curve/curve/legacy/Tw2RotationCurve.js");r.d(t,"Tw2QuaternionKey",(function(){return l.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return l.Tw2RotationCurve}));var u=r("./curve/curve/legacy/Tw2ScalarCurve.js");r.d(t,"Tw2ScalarKey",(function(){return u.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return u.Tw2ScalarCurve}));var c=r("./curve/curve/legacy/Tw2ScalarCurve2.js");r.d(t,"Tw2ScalarKey2",(function(){return c.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return c.Tw2ScalarCurve2}));var f=r("./curve/curve/legacy/Tw2SineCurve.js");r.d(t,"Tw2SineCurve",(function(){return f.Tw2SineCurve}));var d=r("./curve/curve/legacy/Tw2Vector2Curve.js");r.d(t,"Tw2Vector2Key",(function(){return d.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return d.Tw2Vector2Curve}));var h=r("./curve/curve/legacy/Tw2Vector3Curve.js");r.d(t,"Tw2Vector3Key",(function(){return h.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return h.Tw2Vector3Curve}));var m=r("./curve/curve/legacy/Tw2VectorCurve.js");r.d(t,"Tw2VectorKey",(function(){return m.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return m.Tw2VectorCurve}))},"./curve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/Tw2CurveSet.js");r.d(t,"Tw2CurveSet",(function(){return i.Tw2CurveSet}));var n=r("./curve/Tw2ValueBinding.js");r.d(t,"Tw2ValueBinding",(function(){return n.Tw2ValueBinding})),r.d(t,"ErrBindingValueUndefined",(function(){return n.ErrBindingValueUndefined})),r.d(t,"ErrBindingType",(function(){return n.ErrBindingType})),r.d(t,"ErrBindingReference",(function(){return n.ErrBindingReference}));var a=r("./curve/curve/index.js");r.d(t,"Tw2EventKey",(function(){return a.Tw2EventKey})),r.d(t,"Tw2EventCurve",(function(){return a.Tw2EventCurve})),r.d(t,"Tw2PerlinCurve",(function(){return a.Tw2PerlinCurve})),r.d(t,"Tw2CurveKey",(function(){return a.Tw2CurveKey})),r.d(t,"Tw2Curve",(function(){return a.Tw2Curve})),r.d(t,"Tw2ColorKey",(function(){return a.Tw2ColorKey})),r.d(t,"Tw2ColorCurve",(function(){return a.Tw2ColorCurve})),r.d(t,"Tw2ColorKey2",(function(){return a.Tw2ColorKey2})),r.d(t,"Tw2ColorCurve2",(function(){return a.Tw2ColorCurve2})),r.d(t,"Tw2QuaternionKey2",(function(){return a.Tw2QuaternionKey2})),r.d(t,"Tw2QuaternionCurve",(function(){return a.Tw2QuaternionCurve})),r.d(t,"Tw2RandomConstantCurve",(function(){return a.Tw2RandomConstantCurve})),r.d(t,"Tw2Torque",(function(){return a.Tw2Torque})),r.d(t,"Tw2RigidOrientation",(function(){return a.Tw2RigidOrientation})),r.d(t,"Tw2QuaternionKey",(function(){return a.Tw2QuaternionKey})),r.d(t,"Tw2RotationCurve",(function(){return a.Tw2RotationCurve})),r.d(t,"Tw2ScalarKey",(function(){return a.Tw2ScalarKey})),r.d(t,"Tw2ScalarCurve",(function(){return a.Tw2ScalarCurve})),r.d(t,"Tw2ScalarKey2",(function(){return a.Tw2ScalarKey2})),r.d(t,"Tw2ScalarCurve2",(function(){return a.Tw2ScalarCurve2})),r.d(t,"Tw2SineCurve",(function(){return a.Tw2SineCurve})),r.d(t,"Tw2Vector2Key",(function(){return a.Tw2Vector2Key})),r.d(t,"Tw2Vector2Curve",(function(){return a.Tw2Vector2Curve})),r.d(t,"Tw2Vector3Key",(function(){return a.Tw2Vector3Key})),r.d(t,"Tw2Vector3Curve",(function(){return a.Tw2Vector3Curve})),r.d(t,"Tw2VectorKey",(function(){return a.Tw2VectorKey})),r.d(t,"Tw2VectorCurve",(function(){return a.Tw2VectorCurve}));var o=r("./curve/legacy/index.js");r.d(t,"Tw2WbgTrack",(function(){return o.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return o.Tw2WbgTransformTrack})),r.d(t,"Tw2TransformTrack",(function(){return o.Tw2TransformTrack})),r.d(t,"Tw2MayaEulerRotationCurve",(function(){return o.Tw2MayaEulerRotationCurve})),r.d(t,"Tw2MayaScalarCurve",(function(){return o.Tw2MayaScalarCurve})),r.d(t,"Tw2MayaVector3Curve",(function(){return o.Tw2MayaVector3Curve})),r.d(t,"Tw2MayaAnimationEngine",(function(){return o.Tw2MayaAnimationEngine}));var s=r("./curve/sequencer/index.js");r.d(t,"TriColorSequencer",(function(){return s.TriColorSequencer})),r.d(t,"Tw2CurveColor",(function(){return s.Tw2CurveColor})),r.d(t,"Tw2CurveEulerRotation",(function(){return s.Tw2CurveEulerRotation})),r.d(t,"Tw2CurveVector3",(function(){return s.Tw2CurveVector3})),r.d(t,"Tw2CurveSequencer",(function(){return s.Tw2CurveSequencer})),r.d(t,"Tw2ColorSequencer",(function(){return s.Tw2ColorSequencer})),r.d(t,"Tw2EulerRotation",(function(){return s.Tw2EulerRotation})),r.d(t,"Tw2QuaternionSequencer",(function(){return s.Tw2QuaternionSequencer})),r.d(t,"Tw2RGBAScalarSequencer",(function(){return s.Tw2RGBAScalarSequencer})),r.d(t,"Tw2ScalarSequencer",(function(){return s.Tw2ScalarSequencer})),r.d(t,"Tw2VectorSequencer",(function(){return s.Tw2VectorSequencer})),r.d(t,"Tw2XYZScalarSequencer",(function(){return s.Tw2XYZScalarSequencer})),r.d(t,"Tw2YPRSequencer",(function(){return s.Tw2YPRSequencer}))},"./curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/legacy/tracks/index.js");r.d(t,"Tw2WbgTrack",(function(){return i.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return i.Tw2WbgTransformTrack})),r.d(t,"Tw2TransformTrack",(function(){return i.Tw2TransformTrack}));var n=r("./curve/legacy/maya/index.js");r.d(t,"Tw2MayaEulerRotationCurve",(function(){return n.Tw2MayaEulerRotationCurve})),r.d(t,"Tw2MayaScalarCurve",(function(){return n.Tw2MayaScalarCurve})),r.d(t,"Tw2MayaVector3Curve",(function(){return n.Tw2MayaVector3Curve})),r.d(t,"Tw2MayaAnimationEngine",(function(){return n.Tw2MayaAnimationEngine}))},"./curve/legacy/maya/Tw2MayaAnimationEngine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaAnimationEngine",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/math/index.js"),g=r("./core/index.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=p.meta.type("Tw2MayaAnimationEngine"),n=p.meta.list(),a=p.meta.list(),o=p.meta.list(),s=p.meta.readOnly,i((b=m=class e{constructor(){y(this,"curves",c,this),y(this,"hermiteSegments",f,this),y(this,"bezierSegments",d,this),y(this,"_id",h,this),this._currentCurveIndex=0,this._evalCache=null}Evaluate(t,r){if(this.curves.length<=t)return 0;if(this._currentCurveIndex=t,!this._evalCache){this._evalCache=new Array(this.curves.length);for(var i=0;i<this._evalCache.length;++i)this._evalCache[i]=-1}var n=this.curves[t],a=n[e.AnimCurveFields.SEGMENT_OFFSET],o=null;return r<(o=n[e.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments:this.hermiteSegments)[a][e.AnimSegment.TIME]?n[e.AnimCurveFields.PRE_INFINITY]===e.INFINITY?o[a][e.AnimSegment.VALUE]:this._EvaluateInfinities(n,o,a,r,!0):r>n[e.AnimCurveFields.END_TIME]?n[e.AnimCurveFields.POST_INFINITY]===e.INFINITY?n[e.AnimCurveFields.END_VALUE]:this._EvaluateInfinities(n,o,a,r,!1):this._EvaluateImpl(n,o,a,r)}_EvaluateImpl(t,r,i,n){var a,o=!1,s=null,l=null;if(this._evalCache[this._currentCurveIndex]>=0)if(l=i+this._evalCache[this._currentCurveIndex],this._evalCache[this._currentCurveIndex]<t[e.AnimCurveFields.NUM_SEGMENTS-1]&&n>r[l][e.AnimSegment.TIME]){if(n===r[s=i+this._evalCache[this._currentCurveIndex]+1][e.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]++,r[s][e.AnimSegment.VALUE];n<r[s][e.AnimSegment.TIME]?(a=this._evalCache[this._currentCurveIndex]+1,o=!0):s=null}else if(this._evalCache[this._currentCurveIndex]>0&&n<r[l][e.AnimSegment.TIME]){var u=i+this._evalCache[this._currentCurveIndex]-1;if(n>r[u][e.AnimSegment.TIME])a=this._evalCache[this._currentCurveIndex],o=!0;else if(n===r[u][e.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]--,r[u][e.AnimSegment.VALUE]}if(!o){var c=this._Find(t,n,r,i);if(a=c[1],c[0]||0===a)return a===t[e.AnimCurveFields.NUM_SEGMENTS]?(a--,this._evalCache[this._currentCurveIndex]=a,t[e.AnimCurveFields.END_VALUE]):(this._evalCache[this._currentCurveIndex]=a,r[i+a][e.AnimSegment.VALUE]);if(a===t[e.AnimCurveFields.NUM_SEGMENTS]+1)return this._evalCache[this._currentCurveIndex]=0,t[e.AnimCurveFields.END_VALUE]}if(this._evalCache[this._currentCurveIndex]!==a-1&&(this._evalCache[this._currentCurveIndex]=a-1,l=i+this._evalCache[this._currentCurveIndex],null===s&&(s=i+a)),t[e.AnimCurveFields.IS_WEIGHTED]){var f=r[l];if(f[e.BezierSegment.IS_STEP])return f[e.BezierSegment.VALUE];if(f[e.BezierSegment.IS_STEP_NEXT])return null===s?t[e.AnimCurveFields.END_VALUE]:r[s][e.BezierSegment.VALUE];var d=t[e.AnimCurveFields.END_TIME];return this._evalCache[this._currentCurveIndex]+1<t[e.AnimCurveFields.NUM_SEGMENTS]&&(d=r[s][e.BezierSegment.TIME]),this._EvaluateBezier(f,n,d)}var h=r[l];return h[e.HermiteSegment.IS_STEP]?h[e.HermiteSegment.VALUE]:h[e.HermiteSegment.IS_STEP_NEXT]?null===s?t[e.AnimCurveFields.END_VALUE]:r[s][e.HermiteSegment.VALUE]:this._EvaluateHermite(h,n)}_EvaluateInfinities(e,t,r,i,n){throw new g.ErrFeatureNotImplemented({feature:"Maya animation engine evaluate infinities"})}_EvaluateHermite(t,r){var i=r-t[e.HermiteSegment.TIME],n=t[e.HermiteSegment.COEFF];return i*(i*(i*n[0]+n[1])+n[2])+n[3]}_EvaluateBezier(t,r,i){var n,a;if(a=(r-t[e.BezierSegment.TIME])/(i-t[e.BezierSegment.TIME]),t[e.BezierSegment.IS_LINEAR])n=a;else{var o=v.vec4.create();o[3]=t[e.BezierSegment.COEFF][3],o[2]=t[e.BezierSegment.COEFF][2],o[1]=t[e.BezierSegment.COEFF][1],o[0]=t[e.BezierSegment.COEFF][0]-a;var s=[];n=1===v.curve.polyZeroes(o,3,0,1,1,1,s)?s[0]:0}var l=t[e.BezierSegment.POLYY];return n*(n*(n*l[3]+l[2])+l[1])+l[0]}_Find(t,r,i,n){var a,o,s,l,u=0,c=0;if((a=t[e.AnimCurveFields.NUM_SEGMENTS]+1)>0){s=0,l=a-1;do{if(r<(c=(o=s+l>>1)<a-1?i[n+o][e.AnimSegment.TIME]:t[e.AnimCurveFields.END_TIME]))l=o-1;else{if(!(r>c))return[!0,u=o];s=o+1}}while(s<=l);u=s}return[!1,u]}GetNumberOfCurves(){return this.curves.length}GetLength(t){if(t<0||t>=this.curves.length)return 0;var r,i=this.curves[t];return r=i[e.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments[i[e.AnimCurveFields.SEGMENT_OFFSET]]:this.hermiteSegments[i[e.AnimCurveFields.SEGMENT_OFFSET]],i[e.AnimCurveFields.END_TIME]-r[e.AnimSegment.TIME]}},m.AnimCurveFields={NUM_SEGMENTS:0,SEGMENT_OFFSET:1,END_TIME:2,END_VALUE:3,IN_TANGENT:4,OUT_TANGENT:5,PRE_INFINITY:6,POST_INFINITY:7,IS_WEIGHTED:8},m.AnimSegment={TIME:0,VALUE:1},m.HermiteSegment={TIME:0,VALUE:1,COEFF:2,IS_STEP:3,IS_STEP_NEXT:4},m.BezierSegment={TIME:0,VALUE:1,COEFF:2,POLYY:3,IS_STEP:4,IS_STEP_NEXT:5,IS_LINEAR:6},m.INFINITY=0,c=w((u=b).prototype,"curves",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=w(u.prototype,"hermiteSegments",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=w(u.prototype,"bezierSegments",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=w(u.prototype,"_id",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(p.generateID)()}}),l=u))||l)},"./curve/legacy/maya/Tw2MayaEulerRotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaEulerRotationCurve",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js"),x=r("./global/math/index.js"),z=r("./curve/index.js");function O(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var M=(i=P.meta.type("Tw2MayaEulerRotationCurve"),n=P.meta.float,a=P.meta.float,o=P.meta.float,s=P.meta.struct("Tw2MayaAnimationEngine"),l=P.meta.vector3,u=P.meta.isPrivate,c=P.meta.boolean,f=P.meta.quaternion,d=P.meta.isPrivate,h=P.meta.float,m=P.meta.isPrivate,i((R=j=class extends z.Tw2Curve{constructor(...e){super(...e),O(this,"xIndex",v,this),O(this,"yIndex",g,this),O(this,"zIndex",y,this),O(this,"animationEngine",w,this),O(this,"eulerValue",_,this),O(this,"updateQuaternion",E,this),O(this,"quatValue",T,this),O(this,"length",S,this)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){if(this.animationEngine&&(this.xIndex&&(this.eulerValue[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.eulerValue[1]=this.eulerValue[0]:this.eulerValue[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.eulerValue[2]=this.eulerValue[0]:this.eulerValue[2]=this.animationEngine.Evaluate(this.zIndex,e)),this.updateQuaternion)){var t=Math.sin(this.eulerValue[0]/2),r=Math.cos(this.eulerValue[0]/2),i=Math.sin(this.eulerValue[1]/2),n=Math.cos(this.eulerValue[1]/2),a=Math.sin(this.eulerValue[2]/2),o=Math.cos(this.eulerValue[2]/2);this.quatValue[0]=t*n*a+r*i*o,this.quatValue[1]=t*n*o-r*i*a,this.quatValue[2]=r*n*a-t*i*o,this.quatValue[3]=r*n*o+t*i*a}}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}},j.outputDimension=3,j.valueProperty="eulerValue",j.curveType=z.Tw2Curve.Type.CURVE_MAYA,v=A((p=R).prototype,"xIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=A(p.prototype,"yIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=A(p.prototype,"zIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=A(p.prototype,"animationEngine",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A(p.prototype,"eulerValue",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),E=A(p.prototype,"updateQuaternion",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=A(p.prototype,"quatValue",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),S=A(p.prototype,"length",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b)},"./curve/legacy/maya/Tw2MayaScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaScalarCurve",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./curve/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=g.meta.type("Tw2MayaScalarCurve"),n=g.meta.float,a=g.meta.struct("Tw2MayaAnimationEngine"),o=g.meta.float,s=g.meta.isPrivate,l=g.meta.float,u=g.meta.isPrivate,i((v=p=class extends y.Tw2Curve{constructor(...e){super(...e),w(this,"index",d,this),w(this,"animationEngine",h,this),w(this,"value",m,this),w(this,"length",b,this)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.value=this.animationEngine.Evaluate(this.index,e))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&this.index>=0&&(this.length=this.animationEngine.GetLength(this.index))}},p.outputDimension=1,p.valueProperty="value",p.curveType=y.Tw2Curve.Type.CURVE_MAYA,d=_((f=v).prototype,"index",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=_(f.prototype,"animationEngine",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(f.prototype,"value",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=_(f.prototype,"length",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c)},"./curve/legacy/maya/Tw2MayaVector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaVector3Curve",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E=r("./global/utils/index.js"),T=r("./global/math/index.js"),S=r("./curve/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=E.meta.type("Tw2MayaVector3Curve"),n=E.meta.float,a=E.meta.float,o=E.meta.float,s=E.meta.struct("Tw2MayaAnimationEngine"),l=E.meta.vector3,u=E.meta.isPrivate,c=E.meta.float,f=E.meta.isPrivate,i((_=w=class extends S.Tw2Curve{constructor(...e){super(...e),j(this,"xIndex",m,this),j(this,"yIndex",b,this),j(this,"zIndex",p,this),j(this,"animationEngine",v,this),j(this,"value",g,this),j(this,"length",y,this)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.xIndex&&(this.value[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.value[1]=this.value[0]:this.value[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.value[2]=this.value[0]:this.value[2]=this.animationEngine.Evaluate(this.zIndex,e)))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}},w.outputDimension=3,w.valueProperty="value",w.curveType=S.Tw2Curve.Type.CURVE_MAYA,m=R((h=_).prototype,"xIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=R(h.prototype,"yIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=R(h.prototype,"zIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=R(h.prototype,"animationEngine",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R(h.prototype,"value",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec3.create()}}),y=R(h.prototype,"length",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=h))||d)},"./curve/legacy/maya/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/legacy/maya/Tw2MayaEulerRotationCurve.js");r.d(t,"Tw2MayaEulerRotationCurve",(function(){return i.Tw2MayaEulerRotationCurve}));var n=r("./curve/legacy/maya/Tw2MayaScalarCurve.js");r.d(t,"Tw2MayaScalarCurve",(function(){return n.Tw2MayaScalarCurve}));var a=r("./curve/legacy/maya/Tw2MayaVector3Curve.js");r.d(t,"Tw2MayaVector3Curve",(function(){return a.Tw2MayaVector3Curve}));var o=r("./curve/legacy/maya/Tw2MayaAnimationEngine.js");r.d(t,"Tw2MayaAnimationEngine",(function(){return o.Tw2MayaAnimationEngine}))},"./curve/legacy/tracks/Tw2TransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformTrack",(function(){return B}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D=r("./global/utils/index.js"),I=r("./global/index.js"),L=r("./global/math/index.js");function F(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function G(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var B=(i=D.meta.type("Tw2TransformTrack"),n=D.meta.string,a=D.meta.path,o=D.meta.struct(),s=D.meta.string,l=D.meta.boolean,u=D.meta.float,c=D.meta.vector3,f=D.meta.quaternion,d=D.meta.vector3,h=D.meta.matrix4,m=D.meta.struct(),b=D.meta.struct(),p=D.meta.struct(),v=D.meta.readOnly,i((w=G((y=class{constructor(){F(this,"name",w,this),F(this,"resPath",_,this),F(this,"res",E,this),F(this,"group",T,this),F(this,"cycle",S,this),F(this,"duration",j,this),F(this,"translation",R,this),F(this,"rotation",P,this),F(this,"scale",x,this),F(this,"scaleShear",z,this),F(this,"positionCurve",O,this),F(this,"orientationCurve",A,this),F(this,"scaleCurve",M,this),F(this,"_id",C,this)}Initialize(){""!==this.resPath&&(this.res=I.tw2.GetResource(this.resPath))}GetLength(){return this.duration}UpdateValue(e){this.res&&this.res.IsGood()&&(this.positionCurve||this.FindTracks(),this.positionCurve&&(this.cycle&&(e%=this.duration),e>this.duration||e<0||(L.curve.evaluate(this.positionCurve,e,this.translation,this.cycle,this.duration),L.curve.evaluate(this.orientationCurve,e,this.rotation,this.cycle,this.duration),L.quat.normalize(this.rotation,this.rotation),L.curve.evaluate(this.scaleCurve,e,this.scaleShear,this.cycle,this.duration),L.mat4.getScaling(this.scale,this.scaleCurve))))}FindTracks(){for(var e=null,t=0;t<this.res.animations.length;++t)for(var r=0;r<this.res.animations[t].trackGroups.length;++r)if(this.res.animations[t].trackGroups[r].name===this.group){this.duration=this.res.animations[t].duration,e=this.res.animations[t].trackGroups[r];break}if(e)for(var i=0;i<e.transformTracks.length;++i)if(this.name===e.transformTracks[i].name){this.positionCurve=e.transformTracks[i].position,this.orientationCurve=e.transformTracks[i].orientation,this.scaleCurve=e.transformTracks[i].scaleShear;break}}}).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=G(y.prototype,"resPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=G(y.prototype,"res",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=G(y.prototype,"group",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=G(y.prototype,"cycle",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=G(y.prototype,"duration",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=G(y.prototype,"translation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.create()}}),P=G(y.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.quat.create()}}),x=G(y.prototype,"scale",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.fromValues(0,0,0)}}),z=G(y.prototype,"scaleShear",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.mat4.create()}}),O=G(y.prototype,"positionCurve",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=G(y.prototype,"orientationCurve",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=G(y.prototype,"scaleCurve",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=G(y.prototype,"_id",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(D.generateID)()}}),g=y))||g)},"./curve/legacy/tracks/Tw2WbgTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2WbgTrack",(function(){return o})),r.d(t,"Tw2WbgTransformTrack",(function(){return s}));var i=r("./global/utils/index.js"),n=r("./global/index.js"),a=r("./global/math/index.js");function o(){this.name="",this.geometryResPath="",this.geometryRes=null,this.group="",this.duration=0,this.cycle=!1,this._id=Object(i.generateID)(),this.Initialize=function(){this.geometryResPath&&(this.geometryRes=n.tw2.GetResource(this.geometryResPath,e=>function(e){if(e.name&&e.group&&e.geometryRes)for(var t=0;t<e.geometryRes.animations.length;++t)for(var r=e.geometryRes.animations[t],i=0;i<r.trackGroups.length;++i)r.trackGroups[i].name===e.group&&e._ApplyTracks(r.trackGroups[i],r.duration)}(this)))},this.UpdateValue=function(e){this._TracksReady()&&(this.cycle&&(e%=this.duration),e<=this.duration&&e>=0&&this._UpdateValue(e))}}function s(){this._id=Object(i.generateID)(),this.translation=a.vec3.create(),this.rotation=a.quat.create(),this.rotation[3]=1,this.scale=a.vec3.create();var e=null,t=null,r=null,n=a.mat4.create();this._TracksReady=function(){return e||t||r},this._ApplyTracks=function(i,n){for(var a=0;a<i.transformTracks.length;++a){var o=i.transformTracks[a];o.name===this.name&&(this.duration=n,e=o.position,t=o.orientation,r=o.scaleShear)}this.UpdateValue(0)},this._UpdateValue=function(i){e&&a.curve.evaluate(e,i,this.translation,this.cycle,this.duration),t&&(a.curve.evaluate(t,i,this.rotation,this.cycle,this.duration),a.quat.normalize(this.rotation,this.rotation)),r&&a.curve.evaluate(r,i,n,this.cycle,this.duration),this.scale[0]=n[0],this.scale[1]=n[5],this.scale[2]=n[10]}}Object(i.defineMetadata)("type","Tw2WbgTrack",o),s.prototype=new o,Object(i.defineMetadata)("type","Tw2WbgTransformTrack",s)},"./curve/legacy/tracks/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/legacy/tracks/Tw2WbgTrack.js");r.d(t,"Tw2WbgTrack",(function(){return i.Tw2WbgTrack})),r.d(t,"Tw2WbgTransformTrack",(function(){return i.Tw2WbgTransformTrack}));var n=r("./curve/legacy/tracks/Tw2TransformTrack.js");r.d(t,"Tw2TransformTrack",(function(){return n.Tw2TransformTrack}))},"./curve/sequencer/TriColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriColorSequencer",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),y=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=v.meta.type("TriColorSequencer"),n=v.meta.todo("Make backwards compatible with old Tw2ColorSequencer"),a=v.meta.stage(2),o=v.meta.string,s=v.meta.list("Tr2CurveScalar"),l=v.meta.vector4,u=v.meta.isPrivate,i(c=n(c=a((p=b=class extends y.Tw2CurveSequencer{constructor(...e){super(...e),w(this,"name",d,this),w(this,"functions",h,this),w(this,"value",m,this)}Sort(){y.Tw2CurveSequencer.Sort(this)}GetLength(){return y.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){var r=y.Tw2CurveSequencer.global.vec4_0;g.vec4.set(r,0,0,0,0);for(var i=0;i<this.functions.length;i++)this.functions[i].GetValueAt(e,t),g.vec4.add(t,t,r);return t}},b.inputDimension=4,b.outputDimension=4,b.valueProperty="value",b.curveType=y.Tw2CurveSequencer.Type.SEQUENCER,b.childArray="functions",d=_((f=p).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=_(f.prototype,"functions",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=_(f.prototype,"value",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),c=f))||c)||c)||c)},"./curve/sequencer/Tw2CurveColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveColor",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js"),R=r("./global/math/index.js"),P=r("./curve/sequencer/Tw2CurveSequencer.js");function x(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function z(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O=(i=j.meta.type("Tw2CurveColor","Tr2CurveColor"),n=j.meta.stage(2),a=j.meta.string,o=j.meta.raw("Tr2CurveScalar"),s=j.meta.raw("Tr2CurveScalar"),l=j.meta.raw("Tr2CurveScalar"),u=j.meta.raw("Tr2CurveScalar"),c=j.meta.color,f=j.meta.isPrivate,d=j.meta.notImplemented,h=j.meta.boolean,i(m=n((S=T=class extends P.Tw2CurveSequencer{constructor(...e){super(...e),x(this,"name",p,this),x(this,"r",v,this),x(this,"g",g,this),x(this,"b",y,this),x(this,"a",w,this),x(this,"currentValue",_,this),x(this,"srgbOutput",E,this)}Sort(){P.Tw2CurveSequencer.Sort2(this)}GetLength(){return P.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){return t[0]=this.r?this.r.GetValueAt(e):0,t[1]=this.g?this.g.GetValueAt(e):0,t[2]=this.b?this.b.GetValueAt(e):0,t[3]=this.a?this.a.GetValueAt(e):0,t}},T.inputDimension=1,T.outputDimension=4,T.valueProperty="currentValue",T.curveType=P.Tw2CurveSequencer.Type.SEQUENCER,T.childProperties=["r","g","b","a"],p=z((b=S).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=z(b.prototype,"r",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=z(b.prototype,"g",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=z(b.prototype,"b",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z(b.prototype,"a",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=z(b.prototype,"currentValue",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec4.create()}}),E=z(b.prototype,"srgbOutput",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=b))||m)||m)},"./curve/sequencer/Tw2CurveEulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveEulerRotation",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./curve/sequencer/Tw2CurveSequencer.js"),_=r("./global/utils/index.js"),E=r("./global/math/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=_.meta.type("Tw2CurveEulerRotation","Tr2CurveEulerRotation"),n=_.meta.stage(2),a=_.meta.string,o=_.meta.raw("Tr2CurveScalar"),s=_.meta.raw("Tr2CurveScalar"),l=_.meta.raw("Tr2CurveScalar"),u=_.meta.quaternion,c=_.meta.isPrivate,i(f=n((y=g=class extends w.Tw2CurveSequencer{constructor(...e){super(...e),T(this,"name",h,this),T(this,"pitch",m,this),T(this,"roll",b,this),T(this,"yaw",p,this),T(this,"currentValue",v,this)}Sort(){w.Tw2CurveSequencer.Sort2(this)}GetLength(){return w.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){var r=this.yaw?this.yaw.GetValueAt(e):0,i=this.pitch?this.pitch.GetValueAt(e):0,n=this.roll?this.roll.GetValueAt(e):0,a=Math.sin(r/2),o=Math.cos(r/2),s=Math.sin(i/2),l=Math.cos(i/2),u=Math.sin(n/2),c=Math.cos(n/2);return t[0]=a*l*u+o*s*c,t[1]=a*l*c-o*s*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t}},g.inputDimension=1,g.outputDimension=4,g.valueProperty="currentValue",g.curveType=w.Tw2CurveSequencer.Type.SEQUENCER2,g.childProperties=["yaw","pitch","roll"],h=S((d=y).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=S(d.prototype,"pitch",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S(d.prototype,"roll",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=S(d.prototype,"yaw",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S(d.prototype,"currentValue",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.quat.create()}}),f=d))||f)||f)},"./curve/sequencer/Tw2CurveSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSequencer",(function(){return l}));var i,n,a,o=r("./global/utils/index.js"),s=r("./curve/curve/Tw2Curve.js"),l=o.meta.type("Tw2CurveSequencer")((a=n=class extends s.Tw2Curve{static Sort(e,t=e.constructor.childArray){var r=e[t];if(r&&r.length)for(var i=0;i<r.length;i++)r[i]&&"Sort"in r[i]&&r[i].Sort()}static Sort2(e,t=e.constructor.childProperties){if(t)for(var r=0;r<t.length;r++){var i=e[t[r]];i&&"Sort"in i&&i.Sort()}}static GetLengthFromKeys(e,t=e.constructor.childArray){for(var r=e[t],i=0,n=0;n<r.length;++n)"GetLength"in r[n]&&(i=Math.max(i,r[n].GetLength()));return i}static GetLengthFromProperties(e,t=e.constructor.childProperties){for(var r=0,i=0;i<t.length;i++){var n=e[t[i]];n&&"GetLength"in n&&(r=Math.max(r,n.GetLength()))}return r}},n.inputDimension=null,n.outputDimension=null,n.childProperties=null,n.childArray=null,n.Operator=null,i=a))||i},"./curve/sequencer/Tw2CurveVector3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveVector3",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./curve/sequencer/Tw2CurveSequencer.js"),_=r("./global/utils/index.js"),E=r("./global/math/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=_.meta.type("Tw2CurveVector3","Tr2CurveVector3"),n=_.meta.stage(2),a=_.meta.string,o=_.meta.raw("Tr2CurveScalar"),s=_.meta.raw("Tr2CurveScalar"),l=_.meta.raw("Tr2CurveScalar"),u=_.meta.vector3,c=_.meta.isPrivate,i(f=n((y=g=class extends w.Tw2CurveSequencer{constructor(...e){super(...e),T(this,"name",h,this),T(this,"x",m,this),T(this,"y",b,this),T(this,"z",p,this),T(this,"currentValue",v,this)}Sort(){w.Tw2CurveSequencer.Sort2(this)}GetLength(){return w.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){return t[0]=this.x?this.x.GetValueAt(e):0,t[1]=this.y?this.y.GetValueAt(e):0,t[2]=this.z?this.z.GetValueAt(e):0,t}},g.inputDimension=1,g.outputDimension=3,g.valueProperty="currentValue",g.curveType=w.Tw2CurveSequencer.Type.SEQUENCER2,g.childProperties=["x","y","z"],h=S((d=y).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=S(d.prototype,"x",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S(d.prototype,"y",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=S(d.prototype,"z",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S(d.prototype,"currentValue",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec3.create()}}),f=d))||f)||f)},"./curve/sequencer/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/sequencer/TriColorSequencer.js");r.d(t,"TriColorSequencer",(function(){return i.TriColorSequencer}));var n=r("./curve/sequencer/Tw2CurveColor.js");r.d(t,"Tw2CurveColor",(function(){return n.Tw2CurveColor}));var a=r("./curve/sequencer/Tw2CurveEulerRotation.js");r.d(t,"Tw2CurveEulerRotation",(function(){return a.Tw2CurveEulerRotation}));var o=r("./curve/sequencer/Tw2CurveVector3.js");r.d(t,"Tw2CurveVector3",(function(){return o.Tw2CurveVector3}));var s=r("./curve/sequencer/Tw2CurveSequencer.js");r.d(t,"Tw2CurveSequencer",(function(){return s.Tw2CurveSequencer}));var l=r("./curve/sequencer/legacy/index.js");r.d(t,"Tw2ColorSequencer",(function(){return l.Tw2ColorSequencer})),r.d(t,"Tw2EulerRotation",(function(){return l.Tw2EulerRotation})),r.d(t,"Tw2QuaternionSequencer",(function(){return l.Tw2QuaternionSequencer})),r.d(t,"Tw2RGBAScalarSequencer",(function(){return l.Tw2RGBAScalarSequencer})),r.d(t,"Tw2ScalarSequencer",(function(){return l.Tw2ScalarSequencer})),r.d(t,"Tw2VectorSequencer",(function(){return l.Tw2VectorSequencer})),r.d(t,"Tw2XYZScalarSequencer",(function(){return l.Tw2XYZScalarSequencer})),r.d(t,"Tw2YPRSequencer",(function(){return l.Tw2YPRSequencer}))},"./curve/sequencer/legacy/Tw2ColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorSequencer",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/math/index.js"),w=r("./curve/sequencer/Tw2CurveSequencer.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T={MULTIPLY:0,ADD:1},S=(i=g.meta.type("Tw2ColorSequencer"),n=g.meta.string,a=g.meta.float,o=g.meta.vector4,s=g.meta.enums(T),l=g.meta.list("Tw2Curve"),i((v=p=class e extends w.Tw2CurveSequencer{constructor(...e){super(...e),_(this,"name",f,this),_(this,"start",d,this),_(this,"value",h,this),_(this,"operator",m,this),_(this,"functions",b,this)}Sort(){w.Tw2CurveSequencer.Sort(this)}GetLength(){return w.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(t,r){var i=w.Tw2CurveSequencer.global.vec4_0;switch(this.operator){case e.Operator.MULTIPLY:y.vec4.set(r,1,1,1,1);for(var n=0;n<this.functions.length;++n)this.functions[n].GetValueAt(t,i),y.vec4.multiply(r,r,i);break;default:y.vec4.set(r,0,0,0,0);for(var a=0;a<this.functions.length;++a)this.functions[a].GetValueAt(t,i),y.vec4.add(r,r,i)}return r}},p.inputDimension=4,p.outputDimension=4,p.valueProperty="value",p.curveType=w.Tw2CurveSequencer.Type.SEQUENCER,p.childArray="functions",p.Operator=T,f=E((c=v).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=E(c.prototype,"start",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=E(c.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),m=E(c.prototype,"operator",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=E(c.prototype,"functions",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./curve/sequencer/legacy/Tw2EulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EulerRotation",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),y=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=v.meta.type("Tw2EulerRotation"),n=v.meta.struct("Tw2Curve"),a=v.meta.struct("Tw2Curve"),o=v.meta.struct("Tw2Curve"),s=v.meta.quaternion,l=v.meta.isPrivate,i((p=b=class extends y.Tw2CurveSequencer{constructor(...e){super(...e),w(this,"yawCurve",f,this),w(this,"pitchCurve",d,this),w(this,"rollCurve",h,this),w(this,"currentValue",m,this)}Sort(){y.Tw2CurveSequencer.Sort2(this)}GetLength(){return y.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){var r=this.yawCurve?this.yawCurve.GetValueAt(e):0,i=this.pitchCurve?this.pitchCurve.GetValueAt(e):0,n=this.rollCurve?this.rollCurve.GetValueAt(e):0,a=Math.sin(r/2),o=Math.cos(r/2),s=Math.sin(i/2),l=Math.cos(i/2),u=Math.sin(n/2),c=Math.cos(n/2);return t[0]=a*l*u+o*s*c,t[1]=a*l*c-o*s*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t}},b.inputDimension=1,b.outputDimension=4,b.valueProperty="currentValue",b.curveType=y.Tw2CurveSequencer.Type.SEQUENCER2,b.childProperties=["yawCurve","pitchCurve","rollCurve"],f=_((c=p).prototype,"yawCurve",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_(c.prototype,"pitchCurve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_(c.prototype,"rollCurve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(c.prototype,"currentValue",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.quat.create()}}),u=c))||u)},"./curve/sequencer/legacy/Tw2QuaternionSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionSequencer",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js"),v=r("./curve/sequencer/Tw2CurveSequencer.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=b.meta.type("Tw2QuaternionSequencer"),n=b.meta.float,a=b.meta.quaternion,o=b.meta.isPrivate,s=b.meta.list("Tw2Curve"),i((m=h=class extends v.Tw2CurveSequencer{constructor(...e){super(...e),g(this,"start",c,this),g(this,"value",f,this),g(this,"functions",d,this)}Sort(){v.Tw2CurveSequencer.Sort(this)}GetLength(){return v.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){p.quat.identity(t);for(var r=v.Tw2CurveSequencer.global.quat_0,i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),p.quat.multiply(t,t,r);return t}},h.inputDimension=4,h.outputDimension=4,h.valueProperty="value",h.curveType=v.Tw2CurveSequencer.Type.SEQUENCER,h.childArray="functions",c=y((u=m).prototype,"start",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=y(u.prototype,"value",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.quat.create()}}),d=y(u.prototype,"functions",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l)},"./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RGBAScalarSequencer",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js"),w=r("./global/math/index.js"),_=r("./curve/sequencer/Tw2CurveSequencer.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=y.meta.type("Tw2RGBAScalarSequencer"),n=y.meta.vector4,a=y.meta.isPrivate,o=y.meta.struct("Tw2Curve"),s=y.meta.struct("Tw2Curve"),l=y.meta.struct("Tw2Curve"),u=y.meta.struct("Tw2Curve"),i((g=v=class extends _.Tw2CurveSequencer{constructor(...e){super(...e),E(this,"value",d,this),E(this,"RedCurve",h,this),E(this,"GreenCurve",m,this),E(this,"BlueCurve",b,this),E(this,"AlphaCurve",p,this)}Sort(){_.Tw2CurveSequencer.Sort2(this)}GetLength(){return _.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.RedCurve?this.RedCurve.GetValueAt(e):0,t[1]=this.GreenCurve?this.GreenCurve.GetValueAt(e):0,t[2]=this.BlueCurve?this.BlueCurve.GetValueAt(e):0,t[3]=this.AlphaCurve?this.AlphaCurve.GetValueAt(e):0,t}},v.inputDimension=1,v.outputDimension=4,v.valueProperty="value",v.curveType=_.Tw2CurveSequencer.Type.SEQUENCER2,v.childProperties=["RedCurve","GreenCurve","BlueCurve","AlphaCurve"],d=T((f=g).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),h=T(f.prototype,"RedCurve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=T(f.prototype,"GreenCurve",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=T(f.prototype,"BlueCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T(f.prototype,"AlphaCurve",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c)},"./curve/sequencer/legacy/Tw2ScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarSequencer",(function(){return O}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js"),R=r("./curve/sequencer/Tw2CurveSequencer.js");function P(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var z={MULTIPLY:0,ADD:1},O=(i=j.meta.type("Tw2ScalarSequencer"),n=j.meta.float,a=j.meta.isPrivate,o=j.meta.enums(z),s=j.meta.list("Tw2Curve"),l=j.meta.float,u=j.meta.float,c=j.meta.float,f=j.meta.float,d=j.meta.boolean,i((S=T=class e extends R.Tw2CurveSequencer{constructor(...e){super(...e),P(this,"value",b,this),P(this,"operator",p,this),P(this,"functions",v,this),P(this,"inMinClamp",g,this),P(this,"inMaxClamp",y,this),P(this,"outMinClamp",w,this),P(this,"outMaxClamp",_,this),P(this,"clamping",E,this)}Sort(){R.Tw2CurveSequencer.Sort(this)}GetLength(){return R.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(t){var r;switch(this.operator){case e.Operator.MULTIPLY:r=1;for(var i=0;i<this.functions.length;++i){var n=this.functions[i].GetValueAt(t);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),r*=n}break;default:r=0;for(var a=0;a<this.functions.length;++a){var o=this.functions[a].GetValueAt(t);this.clamping&&(o=Math.min(Math.max(o,this.inMinClamp),this.inMaxClamp)),r+=o}}return this.clamping&&(r=Math.min(Math.max(r,this.outMinClamp),this.outMaxClamp)),r}},T.inputDimension=1,T.outputDimension=1,T.valueProperty="value",T.curveType=R.Tw2CurveSequencer.Type.SEQUENCER,T.childArray="functions",T.Operator=z,b=x((m=S).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=x(m.prototype,"operator",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=x(m.prototype,"functions",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=x(m.prototype,"inMinClamp",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=x(m.prototype,"inMaxClamp",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=x(m.prototype,"outMinClamp",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=x(m.prototype,"outMaxClamp",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=x(m.prototype,"clamping",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=m))||h)},"./curve/sequencer/legacy/Tw2VectorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorSequencer",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),y=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E={MULTIPLY:0,ADD:1},T=(i=v.meta.type("Tw2VectorSequencer"),n=v.meta.float,a=v.meta.vector3,o=v.meta.isPrivate,s=v.meta.enums(E),l=v.meta.list("Tw2Curve"),i((p=b=class e extends y.Tw2CurveSequencer{constructor(...e){super(...e),w(this,"start",f,this),w(this,"value",d,this),w(this,"operator",h,this),w(this,"functions",m,this)}Sort(){y.Tw2CurveSequencer.Sort(this)}GetLength(){return y.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(t,r){var i=y.Tw2CurveSequencer.global.vec3_0;switch(this.operator){case e.Operator.MULTIPLY:g.vec3.set(r,1,1,1);for(var n=0;n<this.functions.length;++n)this.functions[n].GetValueAt(t,i),g.vec3.multiply(r,r,i);return r;default:g.vec3.set(r,0,0,0);for(var a=0;a<this.functions.length;++a)this.functions[a].GetValueAt(t,i),g.vec3.add(r,r,i);return r}}},b.inputDimension=3,b.outputDimension=3,b.valueProperty="value",b.curveType=y.Tw2CurveSequencer.Type.SEQUENCER,b.childArray="functions",b.Operator=E,f=_((c=p).prototype,"start",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=_(c.prototype,"value",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec3.create()}}),h=_(c.prototype,"operator",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=_(c.prototype,"functions",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)},"./curve/sequencer/legacy/Tw2XYZScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2XYZScalarSequencer",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/math/index.js"),y=r("./curve/sequencer/Tw2CurveSequencer.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=v.meta.type("Tw2XYZScalarSequencer"),n=v.meta.vector3,a=v.meta.isPrivate,o=v.meta.struct("Tw2Curve"),s=v.meta.struct("Tw2Curve"),l=v.meta.struct("Tw2Curve"),i((p=b=class extends y.Tw2CurveSequencer{constructor(...e){super(...e),w(this,"value",f,this),w(this,"XCurve",d,this),w(this,"YCurve",h,this),w(this,"ZCurve",m,this)}Sort(){y.Tw2CurveSequencer.Sort2(this)}GetLength(){return y.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.XCurve?this.XCurve.GetValueAt(e):0,t[1]=this.YCurve?this.YCurve.GetValueAt(e):0,t[2]=this.ZCurve?this.ZCurve.GetValueAt(e):0,t}},b.inputDimension=1,b.outputDimension=3,b.valueProperty="value",b.curveType=y.Tw2CurveSequencer.Type.SEQUENCER2,b.childProperties=["XCurve","YCurve","ZCurve"],f=_((c=p).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec3.create()}}),d=_(c.prototype,"XCurve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_(c.prototype,"YCurve",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(c.prototype,"ZCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u)},"./curve/sequencer/legacy/Tw2YPRSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2YPRSequencer",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./global/math/index.js"),E=r("./curve/sequencer/Tw2CurveSequencer.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=w.meta.type("Tw2YPRSequencer"),n=w.meta.quaternion,a=w.meta.isPrivate,o=w.meta.vector3,s=w.meta.isPrivate,l=w.meta.struct("Tw2Curve"),u=w.meta.struct("Tw2Curve"),c=w.meta.struct("Tw2Curve"),i((y=g=class extends E.Tw2CurveSequencer{constructor(...e){super(...e),T(this,"value",h,this),T(this,"YawPitchRoll",m,this),T(this,"YawCurve",b,this),T(this,"PitchCurve",p,this),T(this,"RollCurve",v,this)}Sort(){E.Tw2CurveSequencer.Sort2(this)}GetLength(){return E.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){this.YawCurve&&(this.YawPitchRoll[0]=this.YawCurve.GetValueAt(e)),this.PitchCurve&&(this.YawPitchRoll[1]=this.PitchCurve.GetValueAt(e)),this.RollCurve&&(this.YawPitchRoll[2]=this.RollCurve.GetValueAt(e));var r=Math.sin(this.YawPitchRoll[0]/180*Math.PI/2),i=Math.cos(this.YawPitchRoll[0]/180*Math.PI/2),n=Math.sin(this.YawPitchRoll[1]/180*Math.PI/2),a=Math.cos(this.YawPitchRoll[1]/180*Math.PI/2),o=Math.sin(this.YawPitchRoll[2]/180*Math.PI/2),s=Math.cos(this.YawPitchRoll[2]/180*Math.PI/2);return t[0]=r*a*o+i*n*s,t[1]=r*a*s-i*n*o,t[2]=i*a*o-r*n*s,t[3]=i*a*s+r*n*o,t}},g.inputDimension=1,g.outputDimension=4,g.valueProperty="value",g.curveType=E.Tw2CurveSequencer.Type.SEQUENCER2,g.childProperties=["YawCurve","PitchCurve","RollCurve"],h=S((d=y).prototype,"value",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.quat.create()}}),m=S(d.prototype,"YawPitchRoll",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.vec3.create()}}),b=S(d.prototype,"YawCurve",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=S(d.prototype,"PitchCurve",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S(d.prototype,"RollCurve",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f)},"./curve/sequencer/legacy/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./curve/sequencer/legacy/Tw2ColorSequencer.js");r.d(t,"Tw2ColorSequencer",(function(){return i.Tw2ColorSequencer}));var n=r("./curve/sequencer/legacy/Tw2EulerRotation.js");r.d(t,"Tw2EulerRotation",(function(){return n.Tw2EulerRotation}));var a=r("./curve/sequencer/legacy/Tw2QuaternionSequencer.js");r.d(t,"Tw2QuaternionSequencer",(function(){return a.Tw2QuaternionSequencer}));var o=r("./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js");r.d(t,"Tw2RGBAScalarSequencer",(function(){return o.Tw2RGBAScalarSequencer}));var s=r("./curve/sequencer/legacy/Tw2ScalarSequencer.js");r.d(t,"Tw2ScalarSequencer",(function(){return s.Tw2ScalarSequencer}));var l=r("./curve/sequencer/legacy/Tw2VectorSequencer.js");r.d(t,"Tw2VectorSequencer",(function(){return l.Tw2VectorSequencer}));var u=r("./curve/sequencer/legacy/Tw2XYZScalarSequencer.js");r.d(t,"Tw2XYZScalarSequencer",(function(){return u.Tw2XYZScalarSequencer}));var c=r("./curve/sequencer/legacy/Tw2YPRSequencer.js");r.d(t,"Tw2YPRSequencer",(function(){return c.Tw2YPRSequencer}))},"./eve/EveMissile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMissileWarhead",(function(){return Te})),r.d(t,"EveMissile",(function(){return Se}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve=r("./global/utils/index.js"),ge=r("./global/math/index.js"),ye=r("./core/index.js"),we=r("./eve/object/EveObject.js");function _e(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Ee(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Te=(i=ve.meta.type("EveMissileWarhead"),n=ve.meta.stage(2),a=ve.meta.string,o=ve.meta.boolean,s=ve.meta.notImplemented,l=ve.meta.float,u=ve.meta.float,c=ve.meta.notImplemented,f=ve.meta.float,d=ve.meta.float,h=ve.meta.float,m=ve.meta.struct("Tw2Mesh"),b=ve.meta.list("Tw2ParticleEmitter"),p=ve.meta.notImplemented,v=ve.meta.float,g=ve.meta.notImplemented,y=ve.meta.float,w=ve.meta.struct("EveSpriteSet"),_=ve.meta.float,E=ve.meta.notImplemented,T=ve.meta.float,S=ve.meta.notImplemented,j=ve.meta.float,i(R=n((H=V=class e extends ve.meta.Model{constructor(...t){super(...t),_e(this,"name",x,this),_e(this,"display",z,this),_e(this,"acceleration",O,this),_e(this,"durationEjectPhase",A,this),_e(this,"impactDuration",M,this),_e(this,"impactSize",C,this),_e(this,"maxExplosionDistance",D,this),_e(this,"mesh",I,this),_e(this,"particleEmitters",L,this),_e(this,"pathOffsetNoiseScale",F,this),_e(this,"pathOffsetNoiseSpeed",G,this),_e(this,"spriteSet",B,this),_e(this,"startEjectVelocity",N,this),_e(this,"warheadLength",k,this),_e(this,"warheadRadius",U,this),this._perObjectData=ye.Tw2PerObjectData.from(e.perObjectData),this._state=e.State.READY,this._time=0,this._transform=ge.mat4.create(),this._velocity=ge.vec3.create()}Initialize(){this.spriteSet&&this.spriteSet.UseQuads(!0)}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),this.spriteSet&&this.spriteSet.GetResources(e),e}Launch(t){ge.mat4.copy(this._transform,t),this._velocity[0]=t[8]*this.startEjectVelocity,this._velocity[1]=t[9]*this.startEjectVelocity,this._velocity[2]=t[10]*this.startEjectVelocity,this._time=0,this._state=e.State.IN_FLIGHT}UpdateViewDependentData(){this.display&&this._state!==e.State.DEAD&&(ge.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._transform),ge.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._transform))}Update(t,r,i){if(this._state===e.State.IN_FLIGHT){var n=we.EveObject.global,a=ge.mat4.getTranslation(n.vec3_0,this._transform),o=n.vec3_1,s=n.vec3_2,l=n.vec3_3;this._time+=t,this._time>this.durationEjectPhase?(ge.vec3.subtract(a,this._velocity,r),ge.vec3.lerp(a,a,r,1-Math.exp(.9999*-t)),ge.mat4.setTranslation(this._transform,a),ge.vec3.subtract(o,i,a),ge.vec3.length(o)<this.maxExplosionDistance&&(console.log(a,o),this._state=e.State.DEAD)):(ge.vec3.scale(o,this._velocity,t),this._transform[12]+=o[0],this._transform[13]+=o[1],this._transform[14]+=o[2]);var u=ge.vec3.normalize(o,this._velocity);Math.abs(u[0])<.99?ge.vec3.cross(s,u,[1,0,0]):ge.vec3.cross(s,u,[0,1,0]),ge.vec3.normalize(s,s),ge.vec3.cross(l,s,u),this._transform[0]=s[0],this._transform[1]=s[1],this._transform[2]=s[2],this._transform[4]=l[0],this._transform[5]=l[1],this._transform[6]=l[2],this._transform[8]=u[0],this._transform[9]=u[1],this._transform[10]=u[2]}this.spriteSet&&this.spriteSet.Update(t)}GetBatches(t,r){this.display&&this.mesh&&this._state!==e.State.DEAD&&(this.mesh&&this.mesh.GetBatches(t,r,this._perObjectData),this.spriteSet&&this.spriteSet.GetBatches(t,r,this._perObjectData,this._transform))}},V.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4]]},V.State={READY:0,IN_FLIGHT:1,DEAD:2},x=Ee((P=H).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Ee(P.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=Ee(P.prototype,"acceleration",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=Ee(P.prototype,"durationEjectPhase",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Ee(P.prototype,"impactDuration",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),C=Ee(P.prototype,"impactSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=Ee(P.prototype,"maxExplosionDistance",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),I=Ee(P.prototype,"mesh",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=Ee(P.prototype,"particleEmitters",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Ee(P.prototype,"pathOffsetNoiseScale",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Ee(P.prototype,"pathOffsetNoiseSpeed",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=Ee(P.prototype,"spriteSet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Ee(P.prototype,"startEjectVelocity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=Ee(P.prototype,"warheadLength",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Ee(P.prototype,"warheadRadius",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=P))||R)||R),Se=(q=ve.meta.type("EveMissile"),W=ve.meta.stage(2),Y=ve.meta.string,K=ve.meta.boolean,X=ve.meta.vector3,Q=ve.meta.isPrivate,Z=ve.meta.notImplemented,J=ve.meta.float,$=ve.meta.isPrivate,ee=ve.meta.notImplemented,te=ve.meta.struct("Tr2TranslationAdapter"),re=ve.meta.list("EveMissileWarhead"),ie=ve.meta.list("Tw2CurveSet"),ne=ve.meta.todo("Is this deprecated?"),ae=ve.meta.float,q(oe=W((pe=class extends ve.meta.Model{constructor(...e){super(...e),_e(this,"name",le,this),_e(this,"display",ue,this),_e(this,"boundingSphereCenter",ce,this),_e(this,"boundingSphereRadius",fe,this),_e(this,"modelTranslationCurve",de,this),_e(this,"warheads",he,this),_e(this,"curveSets",me,this),_e(this,"speed",be,this),this._position=ge.vec3.create(),this._target=ge.vec3.create(),this._warheadExplosionCallback=null,this._missileFinishedCallback=null}OnWarheadExplosion(e){this._warheadExplosionCallback=e}OnMissileFinished(e){this._missileFinishedCallback=e}Launch(e,t,r){if(ge.vec3.copy(this._position,e),ge.vec3.copy(this._target,r),this.warheads.length>t.length)this.warheads.splice(t.length);else for(;this.warheads.length<t.length;)this.warheads.push(this.constructor.CloneWarhead(this.warheads[0]));for(var i=0;i<this.warheads.length;++i)this.warheads[0].Launch(t[i])}GetResources(e=[]){for(var t=0;t<this.warheads.length;++t)this.warheads[t].GetResources(e);return e}UpdateViewDependentData(){for(var e=0;e<this.warheads.length;++e)this.warheads[e].UpdateViewDependentData()}Update(e){var t=ge.vec3.subtract(we.EveObject.global.vec3_0,this._target,this._position),r=ge.vec3.length(t);r>.1&&(ge.vec3.normalize(t,t),ge.vec3.scale(t,t,Math.min(e*this.speed,r)),ge.vec3.add(this._position,this._position,t));for(var i=0;i<this.curveSets.length;++i)this.curveSets[i].Update(e);for(var n=!1,a=0;a<this.warheads.length;++a){var o=this.warheads[a]._state;this.warheads[a].Update(e,this._position,this._target),o!==Te.State.DEAD&&this.warheads[a]._state===Te.State.DEAD&&(this._warheadExplosionCallback&&this._warheadExplosionCallback(this.warheads[a]),n=!0)}if(n&&this._missileFinishedCallback){for(var s=0;s<this.warheads.length;++s)if(this.warheads[s]._state!==Te.State.DEAD)return;this._missileFinishedCallback(this)}}GetBatches(e,t){if(this.display)for(var r=0;r<this.warheads.length;++r)this.warheads[r].GetBatches(e,t)}static CloneWarhead(e){var t=new Te;return t.mesh=e.mesh,t.spriteSet=e.spriteSet,t}},le=Ee((se=pe).prototype,"name",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ue=Ee(se.prototype,"display",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ce=Ee(se.prototype,"boundingSphereCenter",[X,Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec3.create()}}),fe=Ee(se.prototype,"boundingSphereRadius",[Z,J,$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Ee(se.prototype,"modelTranslationCurve",[ee,te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=Ee(se.prototype,"warheads",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Ee(se.prototype,"curveSets",[ie,ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=Ee(se.prototype,"speed",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),oe=se))||oe)||oe)},"./eve/EveSpaceScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceScene",(function(){return lt}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve,ge,ye,we,_e,Ee,Te,Se,je,Re,Pe,xe,ze,Oe,Ae,Me,Ce,De,Ie,Le,Fe,Ge,Be,Ne,ke,Ue,Ve,He,qe,We,Ye,Ke,Xe,Qe,Ze,Je,$e,et,tt=r("./global/utils/index.js"),rt=r("./global/index.js"),it=r("./global/math/index.js"),nt=r("./core/index.js");function at(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function ot(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function st(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var lt=(i=tt.meta.type("EveSpaceScene"),n=tt.meta.color,a=tt.meta.struct("Tw2Effect"),o=tt.meta.list("EveObject"),s=tt.meta.boolean,l=tt.meta.list("Tw2CurveSet"),u=tt.meta.notImplemented,c=tt.meta.boolean,f=tt.meta.path,d=tt.meta.path,h=tt.meta.path,m=tt.meta.quaternion,b=tt.meta.notImplemented,p=tt.meta.list("Tr2ExternalParameter"),v=tt.meta.color,g=tt.meta.float,y=tt.meta.float,w=tt.meta.float,_=tt.meta.uint,E=tt.meta.uint,T=tt.meta.float,S=tt.meta.notImplemented,j=tt.meta.path,R=tt.meta.notImplemented,P=tt.meta.path,x=tt.meta.float,z=tt.meta.list("EveObject"),O=tt.meta.notImplemented,A=tt.meta.path,M=tt.meta.notImplemented,C=tt.meta.struct(),D=tt.meta.notImplemented,I=tt.meta.boolean,L=tt.meta.notImplemented,F=tt.meta.struct("Tr2ShLightingManager"),G=tt.meta.notImplemented,B=tt.meta.float,N=tt.meta.todo("Identify ps/vs frame data"),k=tt.meta.notImplemented,U=tt.meta.float,V=tt.meta.todo("Identify ps/vs frame data"),H=tt.meta.notImplemented,q=tt.meta.struct("EveStarField"),W=tt.meta.color,Y=tt.meta.notImplemented,K=tt.meta.color,X=tt.meta.vector3,Q=tt.meta.notImplemented,Z=tt.meta.boolean,J=tt.meta.color,$=tt.meta.boolean,ee=tt.meta.vector3,te=tt.meta.list("EveLensflare"),re=tt.meta.list("EvePlanet"),ie=tt.meta.list("EveCurveLineSet"),ne=tt.meta.notImplemented,ae=tt.meta.struct("Tr2PostProcess"),oe=tt.meta.notImplemented,se=tt.meta.struct("Tw2Effect"),le=tt.meta.plain,i((et=$e=class e extends tt.meta.Model{constructor(){super(),ot(this,"ambientColor",fe,this),ot(this,"backgroundEffect",de,this),ot(this,"backgroundObjects",he,this),ot(this,"backgroundRenderingEnabled",me,this),ot(this,"curveSets",be,this),ot(this,"enableShadows",pe,this),ot(this,"envMap1ResPath",ve,this),ot(this,"envMap2ResPath",ge,this),ot(this,"envMapResPath",ye,this),ot(this,"envMapRotation",we,this),ot(this,"externalParameters",_e,this),ot(this,"fogColor",Ee,this),ot(this,"fogEnd",Te,this),ot(this,"fogMax",Se,this),ot(this,"fogStart",je,this),ot(this,"fogBlur",Re,this),ot(this,"fogType",Pe,this),ot(this,"contrast",xe,this),ot(this,"lowQualityNebulaMixResPath",ze,this),ot(this,"lowQualityNebulaResPath",Oe,this),ot(this,"nebulaIntensity",Ae,this),ot(this,"objects",Me,this),ot(this,"postProcessPath",Ce,this),ot(this,"postprocess",De,this),ot(this,"selfShadowOnly",Ie,this),ot(this,"shLightingManager",Le,this),ot(this,"shadowFadeThreshold",Fe,this),ot(this,"shadowThreshold",Ge,this),ot(this,"starfield",Be,this),ot(this,"sunDiffuseColor",Ne,this),ot(this,"sunDiffuseColorWithDynamicLights",ke,this),ot(this,"sunDirection",Ue,this),ot(this,"useSunDiffuseColorWithDynamicLights",Ve,this),ot(this,"clearColor",He,this),ot(this,"display",qe,this),ot(this,"envMapScaling",We,this),ot(this,"lensflares",Ye,this),ot(this,"planets",Ke,this),ot(this,"lineSets",Xe,this),ot(this,"postProcess",Qe,this),ot(this,"shadowEffect",Ze,this),ot(this,"visible",Je,this),this._shadowCameraRange=it.vec4.fromValues(1,0,0,0),this._shadowMapSettings=it.vec4.fromValues(1,1,0,0),this._shadowView=it.mat4.create(),this._shadowViewProjection=it.mat4.create(),this._shadowViewTranspose=it.mat4.create(),this._shadowViewProjectionTranspose=it.mat4.create(),this._localTransform=it.mat4.create(),this._debugHelper=null,this._batches=new nt.Tw2BatchAccumulator,this._emptyTexture=null,this._frustum=new nt.Tw2Frustum,this._lodEnabled=!1,this._perFrameVS=nt.Tw2RawData.from(e.perFrameData.vs),this._perFramePS=nt.Tw2RawData.from(e.perFrameData.ps),this._envMapRes=null,this._envMap1Res=null,this._envMap2Res=null,Object.defineProperty(this.visible,"environment",{get:()=>this.backgroundRenderingEnabled,set:e=>this.backgroundRenderingEnabled=e?1:0}),Object.defineProperty(this.visible,"shadow",{get:()=>this.enableShadows,set:e=>this.enableShadows=e?1:0}),e.init()}Initialize(){if(this.SetEnvMapReflection(this.envMapPath),this.SetEnvMapDiffuse(this.envMap1ResPath),this.SetEnvMapBlur(this.envMap2ResPath),this.FetchPostProcess(this.postProcessPath).then(),this.objects.length){for(var e=0;e<this.objects.length;e++)this.backgroundObjects.push(this.objects[e]);this.objects.splice(0)}}SetTransform(e){it.mat4.copy(this._localTransform,e)}GetTransform(e){it.mat4.copy(e,this._localTransform)}SetEnvironmentTransform(e){it.mat4.getRotation(this.envMapRotation,e),it.mat4.getScaling(this.envMapScaling,e)}GetEnvironmentTransform(t){var r=it.vec3.set(e.global.vec3_ZERO,0,0,0);it.mat4.fromRotationTranslationScale(t,this.envMapRotation,r,this.envMapScaling)}FetchPostProcess(e=""){var t,r=this;return(t=function*(){return e?(r.postProcessPath=e.toLowerCase(),r.postProcess=yield rt.tw2.Fetch(e)):(r.postProcessPath="",r.postProcess=null),r.postProcess},function(){var e=this,r=arguments;return new Promise((function(i,n){var a=t.apply(e,r);function o(e){at(a,i,n,o,s,"next",e)}function s(e){at(a,i,n,o,s,"throw",e)}o(void 0)}))})()}SetEnvMapReflection(e=""){e?(this.envMapResPath=e,this._envMapRes=rt.tw2.GetResource(e)):(this.envMapPath="",this._envMapRes=null)}SetEnvMapDiffuse(e=""){e?(this.envMap1ResPath=e.toLowerCase(),this._envMap1Res=rt.tw2.GetResource(e)):(this.envMap1ResPath="",this._envMap1Res=null)}SetEnvMapBlur(e=""){if(!e)return this.envMap2ResPath="",void(this._envMap1Res=null);this.envMap2ResPath=e.toLowerCase(),this._envMap2Res=rt.tw2.GetResource(e)}EnableLod(e){this._lodEnabled=e,e||this.PerChildObject("ResetLod")}KeepAlive(){var e=this.GetResources();this.GetChildResources(e);for(var t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(e=[]){for(var t=0;t<this.lensflares.length;t++)this.lensflares[t].GetResources(e);return this.backgroundEffect&&this.backgroundEffect.GetResources(e),this.postProcess&&this.postProcess.GetResources(e),this.starfield&&this.starfield.GetResources(e),this._envMapRes&&!e.includes(this._envMapRes)&&e.push(this._envMapRes),this._envMap1Res&&!e.includes(this._envMap1Res)&&e.push(this._envMap1Res),this._envMap2Res&&!e.includes(this._envMap2Res)&&e.push(this._envMap2Res),e}GetChildResources(e=[]){return this.PerChildObject("GetResources",e),e}PerChildObject(e,...t){for(var r=0;r<this.planets.length;r++)e in this.planets[r]&&this.planets[r][e](...t);for(var i=0;i<this.backgroundObjects.length;i++)e in this.backgroundObjects[i]&&this.backgroundObjects[i][e](...t);for(var n=0;n<this.objects.length;n++)e in this.objects[n]&&this.objects[n][e](...t);for(var a=0;a<this.lineSets.length;a++)e in this.lineSets[a]&&this.lineSets[a][e](...t)}GetEmptyTexture(){return this._emptyTexture||(this._emptyTexture=rt.tw2.GetResource("res:/texture/global/black.dds.0.png")),this._emptyTexture}Update(e){for(var t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);this.starField&&this.starField.Update(e),this.PerChildObject("Update",e)}GetRenderBatches(e,t,r=this._batches){for(var i=0;i<t.length;++i)"GetBatches"in t[i]&&t[i].GetBatches(e,r)}RenderBackgroundEffect(e=this.visible.environment){this.backgroundEffect&&(e?(rt.device.SetStandardStates(rt.device.RM_FULLSCREEN),rt.device.RenderCameraSpaceQuad(this.backgroundEffect)):this.backgroundEffect.KeepAlive())}Render(t){this.ApplyPerFrameData();var r=rt.device,i=e.global,n=this._localTransform,a=this.visible,o=it.mat4.maxScaleOnAxis(this._localTransform);if(this.RenderBackgroundEffect(),a.planets&&this.planets.length){var s=it.mat4.copy(i.mat4_0,r.projection),l=it.mat4.copy(i.mat4_1,r.projection),u=1e11;l[10]=u/(1e4-u),l[14]=-10000.0010000001,r.SetProjection(l,!0),this.UpdateViewProjectionFrameData();for(var c=0;c<this.planets.length;++c)this.planets[c].UpdateViewDependentData&&this.planets[c].UpdateViewDependentData(n,t,o);this._batches.Clear(),r.gl.depthRange(.9,1),this.GetRenderBatches(r.RM_OPAQUE,this.planets),this.GetRenderBatches(r.RM_DECAL,this.planets),this.GetRenderBatches(r.RM_TRANSPARENT,this.planets),this.GetRenderBatches(r.RM_ADDITIVE,this.planets),this._batches.Render(),r.SetProjection(s,!0),this.UpdateViewProjectionFrameData(),r.gl.depthRange(0,.9)}if(this._lodEnabled&&(this._frustum.Initialize(r.view,r.projection,r.viewportWidth,r.viewInverse,r.viewProjection),this.PerChildObject("UpdateLod",this._frustum)),a.backgroundObjects)for(var f=0;f<this.backgroundObjects.length;f++)this.backgroundObjects[f].UpdateViewDependentData&&this.backgroundObjects[f].UpdateViewDependentData(n,t,o);if(a.objects)for(var d=0;d<this.objects.length;++d)this.objects[d].UpdateViewDependentData&&this.objects[d].UpdateViewDependentData(n,t,o);if(a.lineSets)for(var h=0;h<this.lineSets.length;h++)this.lineSets[h].UpdateViewDependentData(n,t);if(a.lensflares)for(var m=0;m<this.lensflares.length;++m)this.lensflares[m].PrepareRender();if(this._batches.Clear(),a.planets)for(var b=0;b<this.planets.length;++b)this.planets[b].GetZOnlyBatches(r.RM_OPAQUE,this._batches);if(a.backgroundObjects&&(this.GetRenderBatches(r.RM_OPAQUE,this.backgroundObjects),this.GetRenderBatches(r.RM_DECAL,this.backgroundObjects),this.GetRenderBatches(r.RM_TRANSPARENT,this.backgroundObjects),this.GetRenderBatches(r.RM_ADDITIVE,this.backgroundObjects)),a.objects&&(this.GetRenderBatches(r.RM_OPAQUE,this.objects),this.GetRenderBatches(r.RM_DECAL,this.objects),this.GetRenderBatches(r.RM_TRANSPARENT,this.objects),this.GetRenderBatches(r.RM_ADDITIVE,this.objects)),a.lineSets&&(this.GetRenderBatches(r.RM_TRANSPARENT,this.lineSets),this.GetRenderBatches(r.RM_ADDITIVE,this.lineSets)),this._batches.Render(),a.lensflares)for(var p=0;p<this.lensflares.length;++p)this.lensflares[p].GetBatches(r.RM_ADDITIVE,this._batches);if(this.starfield,this.shadowEffect,this.postProcess,this._batches.Render(),a.lensflares)for(var v=0;v<this.lensflares.length;++v)this.lensflares[v].UpdateOccluders();a.debug&&e.DebugRenderer&&(this._debugHelper||(this._debugHelper=new e.DebugRenderer),this.PerChildObject("RenderDebugInfo",this._debugHelper),this._debugHelper.Render())}UpdateViewProjectionFrameData(){it.mat4.transpose(this._shadowViewTranspose,this._shadowView),it.mat4.transpose(this._shadowViewProjectionTranspose,this._shadowViewProjection);var e=rt.device,t=this._perFrameVS,r=this._perFramePS;e.perFrameVSData=t,e.perFramePSData=r,t.Set("TargetResolution",e.targetResolution),t.Set("ViewInverseTransposeMat",e.viewInverse),t.Set("ViewProjectionMat",e.viewProjectionTranspose),t.Set("ViewMat",e.viewTranspose),t.Set("ProjectionMat",e.projectionTranspose),t.Set("ShadowViewMat",this._shadowViewTranspose),t.Set("ShadowViewProjectionMat",this._shadowViewProjectionTranspose),r.Set("TargetResolution",e.targetResolution),r.Set("FovXY",[e.targetResolution[3],e.targetResolution[2]]),r.Set("ViewInverseTransposeMat",e.viewInverse),r.Set("ViewMat",e.viewTranspose),r.SetIndex("ProjectionToView",0,-e.projection[14]),r.SetIndex("ProjectionToView",1,-e.projection[10]-1)}ApplyPerFrameData(){this.UpdateViewProjectionFrameData();var t=rt.device,r=e.global,i=this._localTransform,n=r.mat4_2,a=r.vec3_0,o=this.visible;it.mat4.fromQuat(n,this.envMapRotation),it.mat4.scale(n,n,this.envMapScaling),it.mat4.multiply(n,n,i),n[12]=0,n[13]=0,n[14]=0,it.mat4.transpose(n,n),it.vec3.transformMat4(a,this.sunDirection,i),it.vec3.negate(a,a),it.vec3.normalize(a,a);var s=this._perFrameVS,l=this._perFramePS;if(t.perFrameVSData=s,t.perFramePSData=l,this.visible.fog){var u=this.fogEnd-this.fogStart;Math.abs(u)<1e-5&&(u=1e-5);var c=1/u;s.Set("FogFactors",[this.fogEnd*c,c,this.fogMax,1]),l.Set("SceneData.FogColor",this.fogColor),l.Set("MiscSettings",[t.currentTime,this.fogType,this.fogBlur,this.contrast])}else s.Set("FogFactors",[0,0,0,0]),l.Set("SceneData.FogColor",[0,0,0,0]),l.Set("MiscSettings",[t.currentTime,0,0,this.contrast]);s.Set("ViewportAdjustment",[1,1,1,1]),s.Set("MiscSettings",[t.currentTime,0,t.viewportWidth,t.viewportHeight]),s.Set("SunData.DirWorld",[a[0],a[1],a[2],0]),s.Set("SunData.DiffuseColor",this.sunDiffuseColor),s.Set("EnvMapRotationMat",n),l.Set("EnvMapRotationMat",n),l.Set("SunData.DirWorld",[a[0],a[1],a[2],0]),l.Set("SunData.DiffuseColor",this.sunDiffuseColor),l.Set("SceneData.AmbientColor",this.ambientColor),l.Set("ShadowMapSettings",this._shadowMapSettings),l.Set("ShadowCameraRange",this._shadowCameraRange),l.SetIndex("SceneData.NebulaIntensity",0,this.nebulaIntensity),l.SetIndex("ViewportSize",0,t.viewportWidth),l.SetIndex("ViewportSize",1,t.viewportHeight);var f=this._envMapRes&&o.environmentReflection?this._envMapRes:this.GetEmptyTexture(),d=this._envMap1Res&&o.environmentDiffuse?this._envMap1Res:this.GetEmptyTexture(),h=this._envMap2Res&&o.environmentBlur?this._envMap2Res:this.GetEmptyTexture();rt.tw2.GetVariable("EveSpaceSceneEnvMap").AttachTextureRes(f),rt.tw2.GetVariable("EnvMap1").AttachTextureRes(d),rt.tw2.GetVariable("EnvMap2").AttachTextureRes(h)}static init(){e.global||(e.global={vec3_ZERO:it.vec3.create(),vec3_0:it.vec3.create(),vec4_0:it.vec4.create(),mat4_0:it.mat4.create(),mat4_1:it.mat4.create(),mat4_2:it.mat4.create()})}},$e.perFrameData={ps:[["ViewInverseTransposeMat",16],["ViewMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["SceneData.AmbientColor",3],["SceneData.NebulaIntensity",1],["SceneData.FogColor",4],["ViewportOffset",2],["ViewportSize",2],["TargetResolution",4],["ShadowMapSettings",4],["ShadowCameraRange",4],["ProjectionToView",2],["FovXY",2],["MiscSettings",4],["Unknown0",4]],vs:[["ViewInverseTransposeMat",16],["ViewProjectionMat",16],["ViewMat",16],["ProjectionMat",16],["ShadowViewMat",16],["ShadowViewProjectionMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["FogFactors",4],["TargetResolution",4],["ViewportAdjustment",4],["MiscSettings",4]]},$e.global=null,$e.DebugRenderer=window.Tw2DebugRenderer||null,fe=st((ce=et).prototype,"ambientColor",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec4.fromValues(.25,.25,.25,1)}}),de=st(ce.prototype,"backgroundEffect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=st(ce.prototype,"backgroundObjects",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=st(ce.prototype,"backgroundRenderingEnabled",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),be=st(ce.prototype,"curveSets",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=st(ce.prototype,"enableShadows",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=st(ce.prototype,"envMap1ResPath",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ge=st(ce.prototype,"envMap2ResPath",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ye=st(ce.prototype,"envMapResPath",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),we=st(ce.prototype,"envMapRotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.quat.create()}}),_e=st(ce.prototype,"externalParameters",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=st(ce.prototype,"fogColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec4.fromValues(.25,.25,.25,1)}}),Te=st(ce.prototype,"fogEnd",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Se=st(ce.prototype,"fogMax",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),je=st(ce.prototype,"fogStart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=st(ce.prototype,"fogBlur",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pe=st(ce.prototype,"fogType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=st(ce.prototype,"contrast",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ze=st(ce.prototype,"lowQualityNebulaMixResPath",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oe=st(ce.prototype,"lowQualityNebulaResPath",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ae=st(ce.prototype,"nebulaIntensity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Me=st(ce.prototype,"objects",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=st(ce.prototype,"postProcessPath",[O,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),De=st(ce.prototype,"postprocess",[M,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=st(ce.prototype,"selfShadowOnly",[D,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Le=st(ce.prototype,"shLightingManager",[L,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=st(ce.prototype,"shadowFadeThreshold",[G,B,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ge=st(ce.prototype,"shadowThreshold",[k,U,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Be=st(ce.prototype,"starfield",[H,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=st(ce.prototype,"sunDiffuseColor",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec4.fromValues(1,1,1,1)}}),ke=st(ce.prototype,"sunDiffuseColorWithDynamicLights",[Y,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec4.fromValues(1,1,1,1)}}),Ue=st(ce.prototype,"sunDirection",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec3.fromValues(1,-1,1)}}),Ve=st(ce.prototype,"useSunDiffuseColorWithDynamicLights",[Q,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),He=st(ce.prototype,"clearColor",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec4.fromValues(0,0,0,1)}}),qe=st(ce.prototype,"display",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),We=st(ce.prototype,"envMapScaling",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.vec3.fromValues(1,1,1)}}),Ye=st(ce.prototype,"lensflares",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ke=st(ce.prototype,"planets",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xe=st(ce.prototype,"lineSets",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qe=st(ce.prototype,"postProcess",[ne,ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=st(ce.prototype,"shadowEffect",[oe,se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=st(ce.prototype,"visible",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{backgroundObjects:!0,clearColor:!0,debug:!1,environmentReflection:!0,environmentDiffuse:!0,environmentBlur:!0,fog:!0,lensflares:!0,lineSets:!0,objects:!0,planets:!0,post:!0,starField:!0}}}),ue=ce))||ue)},"./eve/child/EveChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChild",(function(){return a}));var i=r("./global/utils/index.js"),n=r("./global/math/index.js");class a extends i.meta.Model{constructor(...e){super(...e),this._lod=3}get isEffectChild(){return!0}UpdateLod(e,t){this._lod=t}ResetLod(){this._lod=3}Update(e,t,r){}GetResources(e=[]){return e}GetBatches(e,t,r){}}a.global={mat4_0:n.mat4.create(),vec3_0:n.vec3.create(),mat4_1:n.mat4.create()},a.perObjectData={ffe:[["world",16],["worldInverseTranspose",16]]},a.__isEffectChild=!0},"./eve/child/EveChildBillboard.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBillboard",(function(){return C}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R=r("./global/utils/index.js"),P=r("./global/index.js"),x=r("./global/math/index.js"),z=r("./core/index.js"),O=r("./eve/child/EveChild.js");function A(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function M(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var C=(i=R.meta.type("EveChildBillboard"),n=R.meta.todo("Deprecated?"),a=R.meta.boolean,o=R.meta.matrix4,s=R.meta.uint,l=R.meta.struct(["Tw2Mesh","Tw2InstancedMesh"]),u=R.meta.quaternion,c=R.meta.vector3,f=R.meta.vector3,d=R.meta.boolean,h=R.meta.boolean,i(m=n((j=class extends O.EveChild{constructor(...e){super(...e),A(this,"display",p,this),A(this,"localTransform",v,this),A(this,"lowestLodVisible",g,this),A(this,"mesh",y,this),A(this,"rotation",w,this),A(this,"translation",_,this),A(this,"scaling",E,this),A(this,"staticTransform",T,this),A(this,"useSRT",S,this),this._perObjectData=z.Tw2PerObjectData.from(O.EveChild.perObjectData),this._worldTransform=x.mat4.create(),this._worldTransformLast=x.mat4.create()}GetResources(e){return this.mesh&&this.mesh.GetResources(e),e}Update(e,t){this.useSRT&&(x.quat.normalize(this.rotation,this.rotation),x.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),x.mat4.copy(this._worldTransformLast,this._worldTransform),x.mat4.multiply(this._worldTransform,t,this.localTransform);var r=O.EveChild.global.mat4_0,i=O.EveChild.global.vec3_0;x.mat4.lookAt(r,P.device.eyePosition,this._worldTransform.subarray(12),[0,1,0]),x.mat4.transpose(r,r),x.mat4.getScaling(i,t),x.vec3.multiply(i,i,this.scaling),this._worldTransform[0]=r[0]*i[0],this._worldTransform[1]=r[1]*i[0],this._worldTransform[2]=r[2]*i[0],this._worldTransform[4]=r[4]*i[1],this._worldTransform[5]=r[5]*i[1],this._worldTransform[6]=r[6]*i[1],this._worldTransform[8]=r[8]*i[2],this._worldTransform[9]=r[9]*i[2],this._worldTransform[10]=r[10]*i[2]}GetBatches(e,t){this.display&&this.mesh&&this.mesh.IsGood()&&!(this._lod<this.lowestLodVisible)&&(x.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),x.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}},p=M((b=j).prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=M(b.prototype,"localTransform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.mat4.create()}}),g=M(b.prototype,"lowestLodVisible",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),y=M(b.prototype,"mesh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=M(b.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),_=M(b.prototype,"translation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),E=M(b.prototype,"scaling",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(1,1,1)}}),T=M(b.prototype,"staticTransform",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=M(b.prototype,"useSRT",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=b))||m)||m)},"./eve/child/EveChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildContainer",(function(){return oe}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te=r("./eve/child/EveChild.js"),re=r("./global/utils/index.js"),ie=r("./global/math/index.js");function ne(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function ae(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var oe=(i=re.meta.type("EveChildContainer",!0),n=re.meta.stage(2),a=re.meta.string,o=re.meta.notImplemented,s=re.meta.boolean,l=re.meta.uint,u=re.meta.notImplemented,c=re.meta.list("Tr2Controller"),f=re.meta.list("Tw2CurveSet"),d=re.meta.boolean,h=re.meta.notImplemented,m=re.meta.struct(),b=re.meta.notImplemented,p=re.meta.boolean,v=re.meta.notImplemented,g=re.meta.struct("EveChildInheritProperties"),y=re.meta.notImplemented,w=re.meta.list("Tr2PointLight"),_=re.meta.matrix4,E=re.meta.list("EveChild"),T=re.meta.notImplemented,S=re.meta.list("TriObserverLocal"),j=re.meta.quaternion,R=re.meta.vector3,P=re.meta.notImplemented,x=re.meta.boolean,z=re.meta.notImplemented,O=re.meta.list("EveChildModifier"),A=re.meta.vector3,M=re.meta.boolean,i(C=n((ee=class extends te.EveChild{constructor(...e){super(...e),ne(this,"name",I,this),ne(this,"alwaysOn",L,this),ne(this,"boneIndex",F,this),ne(this,"controllers",G,this),ne(this,"curveSets",B,this),ne(this,"display",N,this),ne(this,"displayFilter",k,this),ne(this,"hideOnLowQuality",U,this),ne(this,"inheritProperties",V,this),ne(this,"lights",H,this),ne(this,"localTransform",q,this),ne(this,"objects",W,this),ne(this,"observers",Y,this),ne(this,"rotation",K,this),ne(this,"scaling",X,this),ne(this,"staticTransform",Q,this),ne(this,"transformModifiers",Z,this),ne(this,"translation",J,this),ne(this,"useSRT",$,this),this._worldTransform=ie.mat4.create()}ResetLod(){this._lod=3;for(var e=0;e<this.objects.length;e++)this.objects[e].ResetLod()}UpdateLod(e,t){this._lod=t;for(var r=0;r<this.objects.length;r++)this.objects[r].UpdateLod(e,this._lod)}GetResources(e=[]){for(var t=0;t<this.objects.length;t++)this.objects[t].GetResources(e);return e}Update(e,t,r){if(this.useSRT&&ie.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),this.transformModifiers.length)for(var i=0;i<this.transformModifiers.length;i++)"Modify"in this.transformModifiers[i]&&this.transformModifiers[i].Modify(this,r);if(this.boneIndex>=0){var{mat4_0:n}=te.EveChild.global,a=r.Get("JointMat");ie.mat4.fromJointMatIndex(n,a,this.boneIndex),ie.mat4.multiply(n,n,this.localTransform),ie.mat4.multiply(this._worldTransform,t,n)}else ie.mat4.multiply(this._worldTransform,t,this.localTransform);for(var o=0;o<this.curveSets.length;o++)this.curveSets[o].Update(e);for(var s=0;s<this.objects.length;s++)this.objects[s].Update(e,this._worldTransform,r)}GetBatches(e,t,r){if(this.display)for(var i=0;i<this.objects.length;i++)this.objects[i].GetBatches(e,t,r)}},I=ae((D=ee).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=ae(D.prototype,"alwaysOn",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=ae(D.prototype,"boneIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),G=ae(D.prototype,"controllers",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=ae(D.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=ae(D.prototype,"display",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=ae(D.prototype,"displayFilter",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ae(D.prototype,"hideOnLowQuality",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=ae(D.prototype,"inheritProperties",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=ae(D.prototype,"lights",[y,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=ae(D.prototype,"localTransform",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.mat4.create()}}),W=ae(D.prototype,"objects",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=ae(D.prototype,"observers",[T,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=ae(D.prototype,"rotation",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.quat.create()}}),X=ae(D.prototype,"scaling",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.vec3.fromValues(1,1,1)}}),Q=ae(D.prototype,"staticTransform",[P,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=ae(D.prototype,"transformModifiers",[z,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=ae(D.prototype,"translation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ie.vec3.create()}}),$=ae(D.prototype,"useSRT",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=D))||C)||C)},"./eve/child/EveChildMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildMesh",(function(){return W}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./global/math/index.js"),U=r("./core/index.js"),V=r("./eve/child/EveChild.js");function H(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W=(i=N.meta.type("EveChildMesh",!0),n=N.meta.string,a=N.meta.boolean,o=N.meta.matrix4,s=N.meta.notImplemented,l=N.meta.uint,u=N.meta.struct(["Tw2Mesh","Tw2InstancedMesh"]),c=N.meta.notImplemented,f=N.meta.float,d=N.meta.quaternion,h=N.meta.vector3,m=N.meta.notImplemented,b=N.meta.float,p=N.meta.notImplemented,v=N.meta.boolean,g=N.meta.notImplemented,y=N.meta.list("EveChildModifier"),w=N.meta.vector3,_=N.meta.boolean,E=N.meta.boolean,i((B=class extends V.EveChild{constructor(...e){super(...e),H(this,"name",j,this),H(this,"display",R,this),H(this,"localTransform",P,this),H(this,"lowestLodVisible",x,this),H(this,"mesh",z,this),H(this,"minScreenSize",O,this),H(this,"rotation",A,this),H(this,"scaling",M,this),H(this,"sortValueOffset",C,this),H(this,"staticTransform",D,this),H(this,"transformModifiers",I,this),H(this,"translation",L,this),H(this,"useSRT",F,this),H(this,"useSpaceObjectData",G,this),this._worldTransform=k.mat4.create(),this._worldTransformLast=k.mat4.create(),this._perObjectData=null}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),e}Update(e,t,r){if(this.useSRT&&(k.quat.normalize(this.rotation,this.rotation),k.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),this.transformModifiers.length)for(var i=0;i<this.transformModifiers.length;i++)"Modify"in this.transformModifiers[i]&&this.transformModifiers[i].Modify(this,r);k.mat4.copy(this._worldTransformLast,this._worldTransform),k.mat4.multiply(this._worldTransform,t,this.localTransform)}GetBatches(e,t,r){!this.display||!this.mesh||this._lod<this.lowestLodVisible||(this.useSpaceObjectData?(this._perObjectData||(this._perObjectData=new U.Tw2PerObjectData,this._perObjectData.vs=new U.Tw2RawData,this._perObjectData.vs.data=new Float32Array(r.vs.data.length),this._perObjectData.vs.data[33]=1,this._perObjectData.vs.data[35]=1,this._perObjectData.ps=new U.Tw2RawData,this._perObjectData.ps.data=new Float32Array(r.ps.data.length),this._perObjectData.ps.data[1]=1,this._perObjectData.ps.data[3]=1),this._perObjectData.vs.data.set(r.vs.data),this._perObjectData.ps.data.set(r.ps.data),k.mat4.transpose(this._perObjectData.vs.data,this._worldTransform),k.mat4.transpose(this._perObjectData.vs.data.subarray(16),this._worldTransformLast)):(this._perObjectData||(this._perObjectData=U.Tw2PerObjectData.from(V.EveChild.perObjectData)),k.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),k.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform)),this.mesh.GetBatches(e,t,this._perObjectData))}},j=q((S=B).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=q(S.prototype,"display",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=q(S.prototype,"localTransform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.mat4.create()}}),x=q(S.prototype,"lowestLodVisible",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),z=q(S.prototype,"mesh",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=q(S.prototype,"minScreenSize",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=q(S.prototype,"rotation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.quat.create()}}),M=q(S.prototype,"scaling",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.fromValues(1,1,1)}}),C=q(S.prototype,"sortValueOffset",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=q(S.prototype,"staticTransform",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=q(S.prototype,"transformModifiers",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=q(S.prototype,"translation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),F=q(S.prototype,"useSRT",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=q(S.prototype,"useSpaceObjectData",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=S))||T)},"./eve/child/EveChildParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSystem",(function(){return W}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./global/math/index.js"),U=r("./core/index.js"),V=r("./eve/child/EveChild.js");function H(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W=(i=N.meta.type("EveChildParticleSystem",!0),n=N.meta.stage(1),a=N.meta.string,o=N.meta.boolean,s=N.meta.matrix4,l=N.meta.notImplemented,u=N.meta.float,c=N.meta.struct("Tw2InstancedMesh"),f=N.meta.notImplemented,d=N.meta.float,h=N.meta.list("Tw2ParticleEmitter"),m=N.meta.list(["Tw2ParticleSystem","Tr2GpuParticleSystem"]),b=N.meta.quaternion,p=N.meta.vector3,v=N.meta.vector3,g=N.meta.list(),y=N.meta.notImplemented,w=N.meta.boolean,_=N.meta.boolean,E=N.meta.todo("Deprecated?"),i(T=n((B=class extends V.EveChild{constructor(...e){super(...e),H(this,"name",j,this),H(this,"display",R,this),H(this,"localTransform",P,this),H(this,"lodSphereRadius",x,this),H(this,"mesh",z,this),H(this,"minScreenSize",O,this),H(this,"particleEmitters",A,this),H(this,"particleSystems",M,this),H(this,"rotation",C,this),H(this,"scaling",D,this),H(this,"translation",I,this),H(this,"transformModifiers",L,this),H(this,"useDynamicLod",F,this),H(this,"useSRT",G,this),this._worldTransform=k.mat4.create(),this._worldTransformLast=k.mat4.create(),this._perObjectData=U.Tw2PerObjectData.from(V.EveChild.perObjectData)}UpdateLod(e,t){this._lod=e.IsSphereVisible(this.translation,this.lodSphereRadius)?3:0}GetResources(e=[]){this.mesh&&this.mesh.GetResources(e);for(var t=0;t<this.particleEmitters.length;t++)this.particleEmitters[t].GetResources(e);for(var r=0;r<this.particleSystems.length;r++)this.particleSystems[r].GetResources(e);return e}Update(e,t){this.useSRT&&(k.quat.normalize(this.rotation,this.rotation),k.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),k.mat4.copy(this._worldTransformLast,this._worldTransform),k.mat4.multiply(this._worldTransform,t,this.localTransform);for(var r=0;r<this.particleEmitters.length;++r)this.particleEmitters[r].Update(e);for(var i=0;i<this.particleSystems.length;++i)this.particleSystems[i].Update(e)}GetBatches(e,t){this.display&&this.mesh&&(k.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),k.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}},j=q((S=B).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=q(S.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=q(S.prototype,"localTransform",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.mat4.create()}}),x=q(S.prototype,"lodSphereRadius",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=q(S.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=q(S.prototype,"minScreenSize",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=q(S.prototype,"particleEmitters",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=q(S.prototype,"particleSystems",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=q(S.prototype,"rotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.quat.create()}}),D=q(S.prototype,"scaling",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.fromValues(1,1,1)}}),I=q(S.prototype,"translation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),L=q(S.prototype,"transformModifiers",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=q(S.prototype,"useDynamicLod",[y,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=q(S.prototype,"useSRT",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=S))||T)||T)},"./eve/child/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./eve/child/EveChild.js");r.d(t,"EveChild",(function(){return i.EveChild}));var n=r("./eve/child/EveChildBillboard.js");r.d(t,"EveChildBillboard",(function(){return n.EveChildBillboard}));var a=r("./eve/child/EveChildContainer.js");r.d(t,"EveChildContainer",(function(){return a.EveChildContainer}));var o=r("./eve/child/EveChildMesh.js");r.d(t,"EveChildMesh",(function(){return o.EveChildMesh}));var s=r("./eve/child/EveChildParticleSystem.js");r.d(t,"EveChildParticleSystem",(function(){return s.EveChildParticleSystem}))},"./eve/effect/EveLensflare.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLensflare",(function(){return ae}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z=r("./global/utils/index.js"),J=r("./global/index.js"),$=r("./global/constant/index.js"),ee=r("./global/math/index.js"),te=r("./core/index.js"),re=r("./eve/effect/EveOccluder.js");function ie(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function ne(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ae=(i=Z.meta.type("EveLensflare"),n=Z.meta.string,a=Z.meta.notImplemented,o=Z.meta.list("EveOccluder"),s=Z.meta.list("Tw2ValueBinding"),l=Z.meta.list("Tw2Curve"),u=Z.meta.list("Tw2Curve"),c=Z.meta.struct("Tw2Mesh"),f=Z.meta.list("EveOccluder"),d=Z.meta.vector3,h=Z.meta.list("Tw2Curve"),m=Z.meta.list("Tw2Curve"),b=Z.meta.list("Tw2Curve"),p=Z.meta.list("Tw2Curve"),v=Z.meta.boolean,g=Z.meta.boolean,y=Z.meta.boolean,w=Z.meta.float,_=Z.meta.list("EveLensflare"),E=Z.meta.todo("Deprecated?"),T=Z.meta.float,S=Z.meta.float,j=Z.meta.list("Tw2CurveSet"),R=Z.meta.todo("Deprecated?"),i((Q=X=class e extends Z.meta.Model{constructor(){super(),ie(this,"name",z,this),ie(this,"backgroundOccluders",O,this),ie(this,"bindings",A,this),ie(this,"distanceToCenterCurves",M,this),ie(this,"distanceToEdgeCurves",C,this),ie(this,"mesh",D,this),ie(this,"occluders",I,this),ie(this,"position",L,this),ie(this,"radialAngleCurves",F,this),ie(this,"xDistanceToCenter",G,this),ie(this,"yDistanceToCenter",B,this),ie(this,"zDistanceToCenter",N,this),ie(this,"display",k,this),ie(this,"update",U,this),ie(this,"doOcclusionQueries",V,this),ie(this,"cameraFactor",H,this),ie(this,"flares",q,this),ie(this,"occlusionIntensity",W,this),ie(this,"backgroundOcclusionIntensity",Y,this),ie(this,"curveSets",K,this),this._direction=ee.vec3.create(),this._transform=ee.mat4.create(),this._backBuffer=null,e.init()}UpdateOccluders(){if(this.doOcclusionQueries){var t=J.device,r=t.gl,i=e.global;if(!i.occluderLevels[0].texture||i.occluderLevels[0].width<2*this.occluders.length)for(var n=0;n<i.occluderLevels.length;++n)i.occluderLevels[n].Create(2*this.occluders.length,1,!1);for(var a=0;a<this.flares.length;++a)"_backBuffer"in this.flares[a]&&(this.flares[a]._backBuffer.textureRes=i.occluderLevels.texture);this.occlusionIntensity=1,this.backgroundOcclusionIntensity=1,i.occluderLevels[i.occludedLevelIndex].Set(),t.SetStandardStates(t.RM_OPAQUE),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),i.occluderLevels[i.occludedLevelIndex].Unset();var o=1;t.antialiasing&&(o=t.msaaSamples,r.sampleCoverage(1/o,!1));for(var s=0;s<this.occluders.length;++s)t.SetRenderState($.RS_COLORWRITEENABLE,8),r.colorMask(!1,!1,!1,!0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),t.antialiasing&&(r.enable(r.SAMPLE_COVERAGE),r.sampleCoverage(.25,!1)),this.occluders[s].UpdateValue(this._transform,s),t.antialiasing&&r.disable(r.SAMPLE_COVERAGE),i.backBuffer.texture||i.backBuffer.Attach(r.createTexture()),r.bindTexture(r.TEXTURE_2D,i.backBuffer.texture),i.backBuffer.width===t.viewportWidth&&i.backBuffer.height===t.viewportHeight||(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.viewportWidth,t.viewportHeight,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),i.backBuffer.width=t.viewportWidth,i.backBuffer.height=t.viewportHeight),r.copyTexImage2D(r.TEXTURE_2D,0,t.alphaBlendBackBuffer?r.RGBA:r.RGB,0,0,i.backBuffer.width,i.backBuffer.height,0),r.bindTexture(r.TEXTURE_2D,null),i.occluderLevels[i.occludedLevelIndex].Set(),re.EveOccluder.CollectSamples(i.backBuffer,s,i.occluderLevels[0].width/2,o),i.occluderLevels[i.occludedLevelIndex].Unset();t.antialiasing&&r.sampleCoverage(1,!1),i.occluderLevels[(i.occludedLevelIndex+1)%i.occluderLevels.length].Set();var l=new Uint8Array(4*i.occluderLevels[0].width);r.readPixels(0,0,2,1,r.RGBA,r.UNSIGNED_BYTE,l),i.occluderLevels[(i.occludedLevelIndex+1)%i.occluderLevels.length].Unset(),this.occlusionIntensity=1;for(var u=0;u<2*i.occluderLevels[0].width;u+=4)this.occlusionIntensity*=l[u+1]?l[u]/l[u+1]:1;this.backgroundOcclusionIntensity=this.occlusionIntensity,J.tw2.SetVariableValue("LensflareFxOccScale",[this.occlusionIntensity,this.occlusionIntensity,0,0]),i.occludedLevelIndex=(i.occludedLevelIndex+1)%i.occluderLevels.length}}GetBatches(t,r,i){if(this.display){var n=ee.vec4.set(e.global.vec4_0,0,0,1,0);if(ee.vec4.transformMat4(n,n,J.device.viewInverse),ee.vec3.dot(n,this._direction)<0)return;for(var a=0;a<this.flares.length;++a)this.flares[a].GetBatches(t,r,i);this.mesh&&this.mesh.GetBatches(t,r,i)}}PrepareRender(){if(this.display){var t=e.global,r=t.vec4_0,i=t.vec3_0,n=ee.mat4.identity(t.mat4_0),a=t.vec3_2,o=t.vec3_3,s=t.vec3_1,l=t.vec4_1;ee.vec3.transformMat4(i,[0,0,0],J.device.viewInverse),0===ee.vec3.length(this.position)?ee.vec3.negate(s,i):(ee.vec3.negate(s,this.position),ee.vec3.normalize(this._direction,s)),ee.vec4.transformMat4(r,[0,0,1,0],J.device.viewInverse),ee.vec3.scaleAndAdd(a,i,r,-this.cameraFactor),ee.vec3.negate(o,this._direction),ee.mat4.arcFromForward(this._transform,o),ee.mat4.setTranslation(this._transform,a),ee.mat4.scale(n,n,[this.occlusionIntensity,this.occlusionIntensity,1]);var u=this._direction;J.tw2.SetVariableValue("LensflareFxDirectionScale",[u[0],u[1],u[2],1]),ee.vec4.set(l,u[0],u[1],u[2],0),ee.vec4.transformMat4(l,l,J.device.view),ee.vec4.transformMat4(l,l,J.device.projection),l[0]/=l[3],l[1]/=l[3];for(var c=1-Math.min(1-Math.abs(l[0]),1-Math.abs(l[1])),f=Math.sqrt(l[0]*l[0]+l[1]*l[1]),d=Math.atan2(l[1],l[0])+Math.PI,h=0;h<this.distanceToEdgeCurves.length;++h)this.distanceToEdgeCurves[h].UpdateValue(c);for(var m=0;m<this.distanceToCenterCurves.length;++m)this.distanceToCenterCurves[m].UpdateValue(f);for(var b=0;b<this.radialAngleCurves.length;++b)this.radialAngleCurves[b].UpdateValue(d);for(var p=0;p<this.xDistanceToCenter.length;++p)this.xDistanceToCenter[p].UpdateValue(l[0]+10);for(var v=0;v<this.yDistanceToCenter.length;++v)this.yDistanceToCenter[v].UpdateValue(l[1]+10);for(var g=0;g<this.bindings.length;++g)this.bindings[g].CopyValue();for(var y=0;y<this.flares.length;++y)this.flares[y].UpdateViewDependentData(this._transform)}}static init(){if(!e.global){var t=e.global={};t.vec3_0=ee.vec3.create(),t.vec3_1=ee.vec3.create(),t.vec3_2=ee.vec3.create(),t.vec3_3=ee.vec3.create(),t.vec4_0=ee.vec4.create(),t.vec4_1=ee.vec4.create(),t.mat4_0=ee.mat4.create(),t.backBuffer=new te.Tw2TextureRes,t.backBuffer.width=0,t.backBuffer.height=0,t.backBuffer.hasMipMaps=!1,t.occludedLevelIndex=0,t.occluderLevels=[new te.Tw2RenderTarget,new te.Tw2RenderTarget,new te.Tw2RenderTarget,new te.Tw2RenderTarget]}}},X.global=null,z=ne((x=Q).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=ne(x.prototype,"backgroundOccluders",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=ne(x.prototype,"bindings",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=ne(x.prototype,"distanceToCenterCurves",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=ne(x.prototype,"distanceToEdgeCurves",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=ne(x.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=ne(x.prototype,"occluders",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=ne(x.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ee.vec3.create()}}),F=ne(x.prototype,"radialAngleCurves",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=ne(x.prototype,"xDistanceToCenter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=ne(x.prototype,"yDistanceToCenter",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=ne(x.prototype,"zDistanceToCenter",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=ne(x.prototype,"display",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),U=ne(x.prototype,"update",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=ne(x.prototype,"doOcclusionQueries",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=ne(x.prototype,"cameraFactor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),q=ne(x.prototype,"flares",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=ne(x.prototype,"occlusionIntensity",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=ne(x.prototype,"backgroundOcclusionIntensity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),K=ne(x.prototype,"curveSets",[j,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=x))||P)},"./eve/effect/EveMeshOverlayEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMeshOverlayEffect",(function(){return D}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x=r("./global/utils/index.js"),z=r("./core/index.js"),O=r("./curve/index.js"),A=r("./global/constant/index.js");function M(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function C(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var D=(i=x.meta.type("EveMeshOverlayEffect"),n=x.meta.string,a=x.meta.list("Tw2Effect"),o=x.meta.struct("Tw2CurveSet"),s=x.meta.list("Tw2Effect"),l=x.meta.boolean,u=x.meta.notImplemented,c=x.meta.list("Tw2Effect"),f=x.meta.list("Tw2Effect"),d=x.meta.list("Tw2Effect"),h=x.meta.boolean,m=x.meta.plain,i((P=class e extends x.meta.Model{constructor(...e){super(...e),M(this,"name",v,this),M(this,"additiveEffects",g,this),M(this,"curveSet",y,this),M(this,"decalEffects",w,this),M(this,"display",_,this),M(this,"distortionEffects",E,this),M(this,"opaqueEffects",T,this),M(this,"transparentEffects",S,this),M(this,"update",j,this),M(this,"visible",R,this)}Update(e){this.update&&this.curveSet&&this.curveSet.Update(e)}GetBatches(e,t,r,i){if(this.display&&i&&i.IsGood())for(var n=this.GetEffects(e),a=0;a<n.length;a++){var o=new z.Tw2GeometryBatch;o.renderMode=e,o.perObjectData=r,o.geometryRes=i.geometryResource,o.meshIx=i.meshIndex,o.start=0,o.count=i.geometryResource.meshes[i.meshIndex].areas.length,o.effect=n[a],t.Commit(o)}}GetEffects(e){if(this.display)switch(e){case A.RM_OPAQUE:if(this.visible.opaqueEffects)return this.opaqueEffects;break;case A.RM_TRANSPARENT:if(this.visible.transparentEffects)return this.transparentEffects;break;case A.RM_ADDITIVE:if(this.visible.additiveEffects)return this.additiveEffects;break;case A.RM_DECAL:if(this.visible.decalEffects)return this.decalEffects;break;case A.RM_DISTORTION:if(this.visible.distortionEffects)return this.distortionEffects}return[]}static createAreaEffects(e,t,r){r=Object(x.toArray)(r);for(var i=0;i<r.length;i++){var n=r[i];if(n in t&&n in e)for(var a=0;a<t[n].length;a++)e[n].push(z.Tw2Effect.from(t[n][a]))}}static from(t,r){var i=new e;if(t){Object(x.assignIfExists)(i,t,["name","display","update"]),t.curveSet&&(i.curveSet=O.Tw2CurveSet.from(t.curveSet));var n=["additiveEffects","distortionEffects","opaqueEffects","transparentEffects","decalEffects"];t.visible&&Object(x.assignIfExists)(i.visible,t.visible,n),this.createAreaEffects(i,t,n)}return!r||r.skipUpdate,i}},v=C((p=P).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=C(p.prototype,"additiveEffects",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=C(p.prototype,"curveSet",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C(p.prototype,"decalEffects",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=C(p.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=C(p.prototype,"distortionEffects",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=C(p.prototype,"opaqueEffects",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=C(p.prototype,"transparentEffects",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=C(p.prototype,"update",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=C(p.prototype,"visible",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opaqueEffects:!0,decalEffects:!0,transparentEffects:!0,additiveEffects:!0,distortionEffects:!0}}}),b=p))||b)},"./eve/effect/EveOccluder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveOccluder",(function(){return g}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/index.js"),m=r("./global/math/index.js"),b=r("./core/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=d.meta.type("EveOccluder"),n=d.meta.string,a=d.meta.list("EveTransform"),i((f=c=class e extends d.meta.Model{constructor(){super(),p(this,"name",l,this),p(this,"sprites",u,this),e.init()}UpdateValue(t,r){if(h.device.alphaBlendBackBuffer){var i=h.device,n=e.global,a=n.mat4_0,o=n.vec4_0;n.accumulator.Clear();for(var s=0;s<this.sprites.length;++s)this.sprites[s].UpdateViewDependentData(t),this.sprites[s].GetBatches(i.RM_DECAL,n.accumulator);h.tw2.SetVariableValue("OccluderValue",[(1<<2*r)/255,(2<<2*r)/255,0,0]),n.accumulator.Render(),m.mat4.multiply(a,i.viewProjection,this.sprites[0]._worldTransform),m.vec4.transformMat4(o,[0,0,0,1],a);var l=.5*(o[0]/o[3]+1),u=.5*(o[1]/o[3]+1);m.vec4.set(o,.5,.5,0,1),m.vec4.transformMat4(o,o,a);var c=.5*(o[0]/o[3]+1),f=.5*(o[1]/o[3]+1);o[0]=l,o[1]=u,o[2]=c-l,o[3]=f-u,n.effect.parameters.OccluderPosition.SetValue(o)}}static CollectSamples(e,t,r,i){var n=h.device,a=this.global,o=a.effect,s=a.vertexBuffer,l=a.decl;if(!o.effectRes||!o.effectRes.IsGood())return!1;o.parameters.BackBuffer.AttachTextureRes(e),o.parameters.OccluderIndex.SetValue([t,r,i]),n.SetStandardStates(n.RM_ADDITIVE),n.gl.bindBuffer(n.gl.ARRAY_BUFFER,s);for(var u=0;u<o.GetPassCount("Main");++u){if(o.ApplyPass("Main",u),l.SetDeclaration(n,o.GetPassInput("Main",u),16))return!1;n.ApplyShadowState(),n.gl.drawArrays(n.gl.TRIANGLES,0,1530)}return!0}static init(){if(!e.global){var t=h.device,r=e.global={};r.mat4_0=m.mat4.create(),r.vec4_0=m.vec4.create(),r.accumulator=new b.Tw2BatchAccumulator,r.effect=b.Tw2Effect.from({name:"Occluder sampler",effectFilePath:"cdn:/graphics/effect/managed/space/specialfx/lensflares/collectsamples.fx",parameters:{OccluderPosition:[1,1,1,1],OccluderIndex:[1,1,1],BackBuffer:""}}),r.vertexBuffer=null,r.decl=b.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:0,elements:2}]),r.decl.RebuildHash();for(var i=new Float32Array(6120),n=0,a=0;a<16;++a)for(var o=0;o<16;++o){var s=(a+Math.random())/16*2-1,l=(o+Math.random())/16*2-1;i[n++]=1,i[n++]=1,i[n++]=s,i[n++]=l,i[n++]=-1,i[n++]=1,i[n++]=s,i[n++]=l,i[n++]=1,i[n++]=-1,i[n++]=s,i[n++]=l,i[n++]=-1,i[n++]=1,i[n++]=s,i[n++]=l,i[n++]=1,i[n++]=-1,i[n++]=s,i[n++]=l,i[n++]=-1,i[n++]=-1,i[n++]=s,i[n++]=l}r.vertexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,r.vertexBuffer),t.gl.bufferData(t.gl.ARRAY_BUFFER,i,t.gl.STATIC_DRAW),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,null)}}},c.global=null,l=v((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=v(s.prototype,"sprites",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./eve/effect/EveStretch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch",(function(){return K}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V=r("./global/utils/index.js"),H=r("./global/math/index.js"),q=r("./core/index.js");function W(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var K=(i=V.meta.type("EveStretch"),n=V.meta.string,a=V.meta.list("Tw2CurveSet"),o=V.meta.boolean,s=V.meta.struct(),l=V.meta.struct(),u=V.meta.struct("Tw2Float"),c=V.meta.notImplemented,f=V.meta.struct("Tw2CurveSet"),d=V.meta.notImplemented,h=V.meta.struct(),m=V.meta.notImplemented,b=V.meta.struct("Tw2Curve"),p=V.meta.struct(),v=V.meta.notImplemented,g=V.meta.list("Tr2PointLight"),y=V.meta.struct(),w=V.meta.struct(),_=V.meta.boolean,E=V.meta.notImplemented,T=V.meta.boolean,i((U=k=class e extends V.meta.Model{constructor(){super(),W(this,"name",R,this),W(this,"curveSets",P,this),W(this,"display",x,this),W(this,"dest",z,this),W(this,"destObject",O,this),W(this,"length",A,this),W(this,"moveCompletion",M,this),W(this,"moveObject",C,this),W(this,"progressCurve",D,this),W(this,"source",I,this),W(this,"sourceLights",L,this),W(this,"sourceObject",F,this),W(this,"stretchObject",G,this),W(this,"update",B,this),W(this,"useCurveLod",N,this),this._destinationPosition=H.vec3.create(),this._displayDestObject=!0,this._displaySourceObject=!0,this._isNegZForward=!1,this._useTransformsForStretch=!1,this._sourcePosition=H.vec3.create(),this._sourceTransform=null,this._time=0,this._useParentMatrix=!1,e.init()}GetResources(e=[]){return this.source&&this.source.GetResources&&this.source.GetResources(e),this.dest&&this.dest.GetResources&&this.dest.GetResources(e),this.sourceObject&&this.sourceObject.GetResources&&this.sourceObject.GetResources(e),this.destObject&&this.destObject.GetResources&&this.destObject.GetResources(e),this.stretchObject&&this.stretchObject.GetResources&&this.stretchObject.GetResources(e),e}SetSourcePosition(e){this._useTransformsForStretch=!1,H.vec3.copy(this._sourcePosition,e)}SetSourcePositionFromTransform(e){this._useTransformsForStretch=!1,this._sourcePosition[0]=e[12],this._sourcePosition[1]=e[13],this._sourcePosition[2]=e[14]}SetDestinationPosition(e){H.vec3.copy(this._destinationPosition,e)}SetSourceTransform(e){this._useTransformsForStretch=!0,this._sourceTransform=e}SetIsNegZForward(e){this._isNegZForward=e}UpdateViewDependentData(t){if(this.display){var r=e.global,i=H.vec3.subtract(r.vec3_0,this._destinationPosition,this._sourcePosition),n=H.mat4.identity(r.mat4_0),a=H.vec3.set(r.vec3_1,0,0,0),o=H.vec3.set(r.vec3_2,0,0,0),s=H.mat4.identity(r.mat4_1),l=H.vec3.length(i);H.vec3.normalize(i,i),this._useTransformsForStretch?(H.mat4.rotateX(n,n,-Math.PI/2),H.mat4.multiply(n,this._sourceTransform,n)):(Math.abs(i[1])>.9?o[2]=1:o[1]=1,H.vec3.cross(a,o,i),H.vec3.normalize(a,a),H.vec3.cross(o,i,a),n[0]=a[0],n[1]=a[1],n[2]=a[2],n[4]=-i[0],n[5]=-i[1],n[6]=-i[2],n[8]=o[0],n[9]=o[1],n[10]=o[2],H.mat4.multiply(n,t,n)),this.destObject&&this._displayDestObject&&(H.mat4.setTranslation(n,this._destinationPosition),this.destObject.UpdateViewDependentData(n)),this.sourceObject&&this._displaySourceObject&&(this._useTransformsForStretch?(H.mat4.identity(n),H.mat4.rotateX(n,n,-Math.PI/2),H.mat4.multiply(n,this._sourceTransform,n)):H.mat4.setTranslation(n,this._sourcePosition),this.sourceObject.UpdateViewDependentData(n)),this.stretchObject&&(this._useTransformsForStretch?(H.mat4.identity(n),H.mat4.scale(n,n,[1,1,l]),H.mat4.multiply(n,this._sourceTransform,n)):(n[0]=a[0],n[1]=a[1],n[2]=a[2],n[4]=o[0],n[5]=o[1],n[6]=o[2],n[8]=-i[0],n[9]=-i[1],n[10]=-i[2],this._isNegZForward&&(l=-l),H.mat4.scale(s,s,[1,1,l]),H.mat4.multiply(n,n,s)),this.stretchObject.UpdateViewDependentData(n))}}Update(t){for(var r=0;r<this.curveSets.length;++r)this.curveSets[r].Update(t);this._time+=t,this.source?this.source.GetValueAt(this._time,this._sourcePosition):this._useTransformsForStretch&&(this._sourcePosition[0]=this._sourceTransform[12],this._sourcePosition[1]=this._sourceTransform[13],this._sourcePosition[2]=this._sourceTransform[14]),this.dest&&this.source.GetValueAt(this._time,this._destinationPosition);var i=H.vec3.subtract(e.global.vec3_0,this._destinationPosition,this._sourcePosition);this.length.value=H.vec3.length(i),H.vec3.normalize(i,i),this.sourceObject&&this._displaySourceObject&&this.sourceObject.Update(t),this.destObject&&this._displayDestObject&&this.destObject.Update(t),this.stretchObject&&this.stretchObject.Update(t)}GetBatches(e,t,r){this.display&&(this.sourceObject&&this._displaySourceObject&&this.sourceObject.GetBatches(e,t,r),this.destObject&&this._displayDestObject&&this.destObject.GetBatches(e,t,r),this.stretchObject&&this.stretchObject.GetBatches(e,t,r))}static init(){e.global||(e.global={vec3_0:H.vec3.create(),vec3_1:H.vec3.create(),vec3_2:H.vec3.create(),mat4_0:H.mat4.create(),mat4_1:H.mat4.create()})}},k.global=null,R=Y((j=U).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=Y(j.prototype,"curveSets",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=Y(j.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=Y(j.prototype,"dest",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=Y(j.prototype,"destObject",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Y(j.prototype,"length",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new q.Tw2Float}}),M=Y(j.prototype,"moveCompletion",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Y(j.prototype,"moveObject",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=Y(j.prototype,"progressCurve",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Y(j.prototype,"source",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=Y(j.prototype,"sourceLights",[v,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Y(j.prototype,"sourceObject",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=Y(j.prototype,"stretchObject",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=Y(j.prototype,"update",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=Y(j.prototype,"useCurveLod",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=j))||S)},"./eve/effect/EveTurretFiringFX.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretFiringFX",(function(){return Ee}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve=r("./global/utils/index.js"),ge=r("./global/math/index.js");function ye(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function we(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class _e{constructor(){this.constantDelay=0,this.currentStartDelay=0,this.elapsedTime=0,this.muzzlePositionBone=null,this.muzzleTransform=ge.mat4.create(),this.readyToStart=!1,this.started=!1}}var Ee=(i=ve.meta.type("EveTurretFiringFX"),n=ve.meta.stage(2),a=ve.meta.string,o=ve.meta.string,s=ve.meta.boolean,l=ve.meta.notImplemented,u=ve.meta.struct("TriObserverLocal"),c=ve.meta.float,f=ve.meta.float,d=ve.meta.float,h=ve.meta.float,m=ve.meta.float,b=ve.meta.todo("Deprecated?"),p=ve.meta.float,v=ve.meta.todo("Deprecated?"),g=ve.meta.float,y=ve.meta.todo("Deprecated?"),w=ve.meta.float,_=ve.meta.todo("Deprecated?"),E=ve.meta.notImplemented,T=ve.meta.float,S=ve.meta.notImplemented,j=ve.meta.float,R=ve.meta.boolean,P=ve.meta.notImplemented,x=ve.meta.float,z=ve.meta.float,O=ve.meta.notImplemented,A=ve.meta.float,M=ve.meta.float,C=ve.meta.notImplemented,D=ve.meta.boolean,I=ve.meta.notImplemented,L=ve.meta.struct("TriObserverLocal"),F=ve.meta.notImplemented,G=ve.meta.struct("Tw2CurveSet"),B=ve.meta.notImplemented,N=ve.meta.struct("Tw2CurveSet"),k=ve.meta.list(["EveStretch","EveStretch2"]),U=ve.meta.boolean,i(V=n((pe=class extends ve.meta.Model{constructor(...e){super(...e),ye(this,"name",q,this),ye(this,"boneName",W,this),ye(this,"display",Y,this),ye(this,"destinationObserver",K,this),ye(this,"firingDelay1",X,this),ye(this,"firingDelay2",Q,this),ye(this,"firingDelay3",Z,this),ye(this,"firingDelay4",J,this),ye(this,"firingDelay5",$,this),ye(this,"firingDelay6",ee,this),ye(this,"firingDelay7",te,this),ye(this,"firingDelay8",re,this),ye(this,"firingDurationOverride",ie,this),ye(this,"firingPeakTime",ne,this),ye(this,"isLoopFiring",ae,this),ye(this,"maxRadius",oe,this),ye(this,"maxScale",se,this),ye(this,"minRadius",le,this),ye(this,"minScale",ue,this),ye(this,"scaleEffectTarget",ce,this),ye(this,"sourceObserver",fe,this),ye(this,"startCurveSet",de,this),ye(this,"stopCurveSet",he,this),ye(this,"stretch",me,this),ye(this,"useMuzzleTransform",be,this),this._endPosition=ge.vec3.create(),this._firingDuration=0,this._isFiring=!1,this._perMuzzleData=[]}Initialize(){this._firingDuration=this.GetCurveDuration();for(var e=0;e<this.stretch.length;++e)this._perMuzzleData[e]=new _e;var t=this._perMuzzleData;t.length>0&&(t[0].constantDelay=this.firingDelay1),t.length>1&&(t[1].constantDelay=this.firingDelay2),t.length>2&&(t[2].constantDelay=this.firingDelay3),t.length>3&&(t[3].constantDelay=this.firingDelay4),t.length>4&&(t[4].constantDelay=this.firingDelay5),t.length>5&&(t[5].constantDelay=this.firingDelay6),t.length>6&&(t[6].constantDelay=this.firingDelay7),t.length>7&&(t[7].constantDelay=this.firingDelay8)}GetCurveDuration(){for(var e=0,t=0;t<this.stretch.length;++t)for(var r=this.stretch[t],i=0;i<r.curveSets.length;++i)e=Math.max(e,r.curveSets[i].GetMaxCurveDuration());return e}GetPerMuzzleEffectCount(){return this.stretch.length}SetEndPosition(e){this._endPosition[0]=e[0],this._endPosition[1]=e[1],this._endPosition[2]=e[2]}SetMuzzleBoneID(e,t){this._perMuzzleData[e].muzzlePositionBone=t}GetMuzzleTransform(e){return this._perMuzzleData[e].muzzleTransform}PrepareFiring(e,t=-1){for(var r=0;r<this.stretch.length;++r)t<0||t===r?(this._perMuzzleData[r].currentStartDelay=e+this._perMuzzleData[r].constantDelay,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0):(this._perMuzzleData[r].currentStartDelay=Number.MAX_VALUE,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0);this._isFiring=!0}StartMuzzleEffect(e){for(var t=this.stretch[e],r=0;r<t.curveSets.length;++r){var i=t.curveSets[r];switch(i.name){case"play_start":case"play_loop":i.PlayFrom(-this._perMuzzleData[e].currentStartDelay);break;case"play_stop":i.Stop()}}this._perMuzzleData[e].started=!0,this._perMuzzleData[e].readyToStart=!1}StopFiring(){for(var e=0;e<this.stretch.length;++e){for(var t=this.stretch[e],r=0;r<t.curveSets.length;++r){var i=t.curveSets[r];switch(i.name){case"play_start":case"play_loop":i.Stop();break;case"play_stop":i.Play()}}this._perMuzzleData[e].started=!1,this._perMuzzleData[e].readyToStart=!1,this._perMuzzleData[e].currentStartDelay=0,this._perMuzzleData[e].elapsedTime=0}this._isFiring=!1}UpdateViewDependentData(e){for(var t=0;t<this.stretch.length;++t)this.stretch[t].UpdateViewDependentData(e)}Update(e){for(var t=0;t<this.stretch.length;++t)this._perMuzzleData[t].started&&(this._perMuzzleData[t].elapsedTime+=e),(this._perMuzzleData[t].elapsedTime<this._firingDuration||this.isLoopFiring)&&this._isFiring&&(this._perMuzzleData[t].started?(this.useMuzzleTransform?this.stretch[t].SetSourceTransform(this._perMuzzleData[t].muzzleTransform):this.stretch[t].SetSourcePositionFromTransform(this._perMuzzleData[t].muzzleTransform),this.stretch[t].SetDestinationPosition(this._endPosition),this.stretch[t].SetIsNegZForward(!0)):(this._perMuzzleData[t].readyToStart?(this.StartMuzzleEffect(t),this._perMuzzleData[t].currentStartDelay=0,this._perMuzzleData[t].elapsedTime=0):this._perMuzzleData[t].currentStartDelay-=e,this._perMuzzleData[t].currentStartDelay<=0&&(this._perMuzzleData[t].readyToStart=!0))),this.stretch[t].Update(e)}GetBatches(e,t,r){if(this.display&&this._isFiring)for(var i=0;i<this.stretch.length;++i)this._perMuzzleData[i].started&&(this._firingDuration>=this._perMuzzleData[i].elapsedTime||this.isLoopFiring)&&this.stretch[i].GetBatches(e,t,r)}},q=we((H=pe).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=we(H.prototype,"boneName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=we(H.prototype,"display",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),K=we(H.prototype,"destinationObserver",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=we(H.prototype,"firingDelay1",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=we(H.prototype,"firingDelay2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=we(H.prototype,"firingDelay3",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=we(H.prototype,"firingDelay4",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=we(H.prototype,"firingDelay5",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=we(H.prototype,"firingDelay6",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=we(H.prototype,"firingDelay7",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=we(H.prototype,"firingDelay8",[w,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=we(H.prototype,"firingDurationOverride",[E,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=we(H.prototype,"firingPeakTime",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ae=we(H.prototype,"isLoopFiring",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oe=we(H.prototype,"maxRadius",[P,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=we(H.prototype,"maxScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),le=we(H.prototype,"minRadius",[O,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=we(H.prototype,"minScale",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=we(H.prototype,"scaleEffectTarget",[C,D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fe=we(H.prototype,"sourceObserver",[I,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=we(H.prototype,"startCurveSet",[F,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=we(H.prototype,"stopCurveSet",[B,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=we(H.prototype,"stretch",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=we(H.prototype,"useMuzzleTransform",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=H))||V)||V)},"./eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./eve/effect/EveLensflare.js");r.d(t,"EveLensflare",(function(){return i.EveLensflare}));var n=r("./eve/effect/EveMeshOverlayEffect.js");r.d(t,"EveMeshOverlayEffect",(function(){return n.EveMeshOverlayEffect}));var a=r("./eve/effect/EveOccluder.js");r.d(t,"EveOccluder",(function(){return a.EveOccluder}));var o=r("./eve/effect/EveStretch.js");r.d(t,"EveStretch",(function(){return o.EveStretch}));var s=r("./eve/effect/EveTurretFiringFX.js");r.d(t,"EveTurretFiringFX",(function(){return s.EveTurretFiringFX}))},"./eve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./eve/child/index.js");r.d(t,"EveChild",(function(){return i.EveChild})),r.d(t,"EveChildBillboard",(function(){return i.EveChildBillboard})),r.d(t,"EveChildContainer",(function(){return i.EveChildContainer})),r.d(t,"EveChildMesh",(function(){return i.EveChildMesh})),r.d(t,"EveChildParticleSystem",(function(){return i.EveChildParticleSystem}));var n=r("./eve/effect/index.js");r.d(t,"EveLensflare",(function(){return n.EveLensflare})),r.d(t,"EveMeshOverlayEffect",(function(){return n.EveMeshOverlayEffect})),r.d(t,"EveOccluder",(function(){return n.EveOccluder})),r.d(t,"EveStretch",(function(){return n.EveStretch})),r.d(t,"EveTurretFiringFX",(function(){return n.EveTurretFiringFX}));var a=r("./eve/item/index.js");r.d(t,"EveBoosterBatch",(function(){return a.EveBoosterBatch})),r.d(t,"EveBoosterSetItem",(function(){return a.EveBoosterSetItem})),r.d(t,"EveBoosterSet",(function(){return a.EveBoosterSet})),r.d(t,"EveCurveLineSetItem",(function(){return a.EveCurveLineSetItem})),r.d(t,"EveCurveLineSet",(function(){return a.EveCurveLineSet})),r.d(t,"EveCustomMask",(function(){return a.EveCustomMask})),r.d(t,"EveLocator2",(function(){return a.EveLocator2})),r.d(t,"EveLocator",(function(){return a.EveLocator})),r.d(t,"EveObjectSetItem",(function(){return a.EveObjectSetItem})),r.d(t,"EveObjectSet",(function(){return a.EveObjectSet})),r.d(t,"EvePlaneSetItem",(function(){return a.EvePlaneSetItem})),r.d(t,"EvePlaneSet",(function(){return a.EvePlaneSet})),r.d(t,"EveSpaceObjectDecal",(function(){return a.EveSpaceObjectDecal})),r.d(t,"EveSpotlightSetItem",(function(){return a.EveSpotlightSetItem})),r.d(t,"EveSpotlightSet",(function(){return a.EveSpotlightSet})),r.d(t,"EveSpriteSetItem",(function(){return a.EveSpriteSetItem})),r.d(t,"EveSpriteSet",(function(){return a.EveSpriteSet})),r.d(t,"EveTurretSetItem",(function(){return a.EveTurretSetItem})),r.d(t,"EveTurretSet",(function(){return a.EveTurretSet}));var o=r("./eve/object/index.js");r.d(t,"EveTransform",(function(){return o.EveTransform})),r.d(t,"EveEffectRoot",(function(){return o.EveEffectRoot})),r.d(t,"EvePlanet",(function(){return o.EvePlanet})),r.d(t,"EveShip",(function(){return o.EveShip})),r.d(t,"EveShip2",(function(){return o.EveShip2})),r.d(t,"EveSpaceObject",(function(){return o.EveSpaceObject})),r.d(t,"EveStation",(function(){return o.EveStation}));var s=r("./eve/EveMissile.js");r.d(t,"EveMissileWarhead",(function(){return s.EveMissileWarhead})),r.d(t,"EveMissile",(function(){return s.EveMissile}));var l=r("./eve/EveSpaceScene.js");r.d(t,"EveSpaceScene",(function(){return l.EveSpaceScene}))},"./eve/item/EveBoosterSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterBatch",(function(){return je})),r.d(t,"EveBoosterSetItem",(function(){return Re})),r.d(t,"EveBoosterSet",(function(){return Pe}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe=r("./global/utils/index.js"),ve=r("./global/index.js"),ge=r("./global/math/index.js"),ye=r("./core/index.js"),we=r("./eve/item/EveObjectSet.js"),_e=r("./core/mesh/index.js"),Ee=r("./eve/item/EveSpriteSet.js");function Te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Se(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class je extends ye.Tw2RenderBatch{constructor(...e){super(...e),this.boosters=null}Commit(e){this.boosters.Render(e)}}var Re=(i=pe.meta.type("EveBoosterSetItem"),n=pe.meta.string,a=pe.meta.uint,o=pe.meta.uint,s=pe.meta.plain,l=pe.meta.string,u=pe.meta.float,c=pe.meta.matrix4,f=pe.meta.boolean,d=pe.meta.plain,h=pe.meta.float,i((R=class extends we.EveObjectSetItem{constructor(...e){super(...e),Te(this,"name",p,this),Te(this,"atlas0",v,this),Te(this,"atlas1",g,this),Te(this,"customValues",y,this),Te(this,"locatorName",w,this),Te(this,"seed",_,this),Te(this,"transform",E,this),Te(this,"updateFromLocator",T,this),Te(this,"visible",S,this),Te(this,"wavePhase",j,this)}GetPosition(e){return ge.mat4.getTranslation(e,this.transform)}GetDirection(e){ge.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),ge.vec3.normalize(e,e);var t=this.GetScale();return t<3&&ge.vec3.scale(e,e,t/3),e}GetScale(){var e=this.transform;return Math.max(ge.vec3.length([e[0],e[1],e[2]]),ge.vec3.length([e[4],e[5],e[6]]))}},p=Se((b=R).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Se(b.prototype,"atlas0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=Se(b.prototype,"atlas1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=Se(b.prototype,"customValues",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Se(b.prototype,"locatorName",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Se(b.prototype,"seed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 7*Math.random()}}),E=Se(b.prototype,"transform",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.mat4.create()}}),T=Se(b.prototype,"updateFromLocator",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=Se(b.prototype,"visible",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{glow:!0,symHalo:!0,halo:!0,trail:!0,customValues:!0}}}),j=Se(b.prototype,"wavePhase",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Math.random()}}),m=b))||m),Pe=(P=pe.meta.type("EveBoosterSet",!0),x=pe.meta.notImplemented,z=pe.meta.boolean,O=pe.meta.struct("Tw2Effect"),A=pe.meta.color,M=pe.meta.struct("EveSpriteSet"),C=pe.meta.float,D=pe.meta.color,I=pe.meta.float,L=pe.meta.float,F=pe.meta.notImplemented,G=pe.meta.float,B=pe.meta.float,N=pe.meta.color,k=pe.meta.vector4,U=pe.meta.color,V=pe.meta.color,H=pe.meta.float,q=pe.meta.float,W=pe.meta.float,Y=pe.meta.plain,P((be=me=class e extends we.EveObjectSet{constructor(...t){super(...t),Te(this,"alwaysOn",Q,this),Te(this,"effect",Z,this),Te(this,"glowColor",J,this),Te(this,"glows",$,this),Te(this,"glowScale",ee,this),Te(this,"haloColor",te,this),Te(this,"haloScaleX",re,this),Te(this,"haloScaleY",ie,this),Te(this,"maxVel",ne,this),Te(this,"symHaloScale",ae,this),Te(this,"trailColor",oe,this),Te(this,"trailSize",se,this),Te(this,"warpGlowColor",le,this),Te(this,"warpHaloColor",ue,this),Te(this,"glowDistance",ce,this),Te(this,"haloDistance",fe,this),Te(this,"symHaloDistance",de,this),Te(this,"visible",he,this),this._parentTransform=ge.mat4.create(),this._positions=null,this._decl=ye.Tw2VertexDeclaration.from(e.vertexDeclarations),this._perObjectData=ye.Tw2PerObjectData.from(e.perObjectData),this._locatorDirty=!0}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}RebuildItems(t){var r=this.glows,i=e.global,n=i.vec3_0;r&&r.ClearItems({skipUpdate:!0}),this._visibleItems=[];for(var a=0;a<this.items.length;a++){var o=this.items[a];if(o.display){if(this._visibleItems.push(o),r){var s=o.customValues&&o.customValues.display?o.customValues:this,l=o.GetPosition(i.vec3_1),u=o.GetDirection(i.vec3_2),c=o.GetScale();this.visible.glows&&o.visible.glow&&r.CreateItem({name:o.name+"_glow",position:ge.vec3.subtract(n,l,ge.vec3.scale(n,u,s.glowDistance)),blinkRate:o.seed,blinkPhase:o.seed,minScale:s.glowScale*c,maxScale:s.glowScale*c,color:s.glowColor,warpColor:s.warpGlowColor},t),this.visible.symHalos&&o.visible.symHalo&&r.CreateItem({name:o.name+"_symHalo",position:ge.vec3.subtract(n,l,ge.vec3.scale(n,u,s.symHaloDistance)),blinkRate:o.seed,blinkPhase:o.seed+1,minScale:s.symHaloScale*c,maxScale:s.symHaloScale*c,color:s.haloColor,warpColor:s.warpHaloColor},t),this.visible.halos&&o.visible.halo&&r.CreateItem({name:o.name+"_halo",position:ge.vec3.subtract(n,l,ge.vec3.scale(n,u,s.haloDistance)),blinkRate:o.seed,blinkPhase:o.seed+1,minScale:s.haloScaleX*c,maxScale:s.haloScaleY*c,color:s.haloColor,warpColor:s.warpHaloColor},t)}o._dirty=!1}}this._dirty=!0}FindItemByLocatorName(e){for(var t=0;t<this.items.length;t++)if(this.items[t].locatorName&&this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(e){for(var t=Array.from(this.items),r=0;r<e.length;r++){var{name:i,transform:n,atlasIndex0:a,atlasIndex1:o}=e[r],s=this.FindItemByLocatorName(i);s?(t.splice(t.indexOf(s),1),s.updateFromLocator&&(ge.mat4.copy(s.transform,n),s.atlas0=a,s.atlas1=o,s.UpdateValues())):this.CreateItem({name:i,locatorName:i,updateFromLocator:!0,atlas0:a,atlas1:o,transform:n})}for(var l=0;l<t.length;l++)null!==t[l].locatorName&&(this.RemoveItem(t[l]),l--);this._locatorDirty=!1,this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}SetWorldSpriteScale(e){this.glows&&this.glows.SetWorldSpriteScale(e)}Update(e,t){ge.mat4.copy(this._parentTransform,t),super.Update(e),this.glows&&this.glows.Update(e)}Unload(e){this._positions&&(ve.device.gl.deleteBuffer(this._positions),this._positions=null),this.glows&&this.glows.Unload(e),super.Unload(e)}Rebuild(t){this.RebuildItems(t);var r=this._visibleItems.length;if(this._dirty=!1,r){for(var i=ve.device,n=e._box,a=new Float32Array(r*n.length*6*28),o=[0,3,1,3,2,1],s=0,l=0;l<r;++l)for(var u=this._visibleItems[l],c=0;c<n.length;++c)for(var f=0;f<o.length;++f)a[s++]=n[c][o[f]][0],a[s++]=n[c][o[f]][1],a[s++]=n[c][o[f]][2],a[s++]=0,a[s++]=0,a.set(u.transform,s),s+=16,a[s++]=0,a[s++]=1,a[s++]=1,a[s++]=1,a[s++]=u.wavePhase,a[s++]=u.atlas0,a[s++]=u.atlas1;this._positions=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._positions),i.gl.bufferData(i.gl.ARRAY_BUFFER,a,i.gl.STATIC_DRAW),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,null),this._positions.count=12*r*3,this.glows&&this.glows.Rebuild(t),super.Rebuild(t)}else super.Rebuild(t)}GetBatches(e,t,r){if(this.display&&e===ve.device.RM_ADDITIVE&&this._positions&&this._visibleItems.length){if(this.effect){var i=new je;ge.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._parentTransform),this._perObjectData.vs.Set("Shipdata",r.vs.Get("Shipdata")),this._perObjectData.ps=r.ps,i.perObjectData=this._perObjectData,i.boosters=this,i.renderMode=ve.device.RM_ADDITIVE,t.Commit(i)}this.glows&&this.glows.GetBoosterGlowBatches(e,t,r,this._parentTransform,r.vs.Get("Shipdata")[0],0)}}Render(e){if(!this.effect||!this.effect.IsGood()||!this._positions)return!1;var t=ve.device,r=t.gl;r.bindBuffer(r.ARRAY_BUFFER,this._positions);for(var i=0;i<this.effect.GetPassCount(e);++i){if(this.effect.ApplyPass(e,i),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,i),112))return!1;t.ApplyShadowState(),r.drawArrays(r.TRIANGLES,0,this._positions.count)}return!0}static from(t,r){var i=new e;if(t&&(Object(pe.assignIfExists)(i,t,["alwaysOn","glowColor","glowScale","haloColor","haloScaleX","haloScaleY","maxVel","symHaloScale","trailColor","trailSize","warpGlowColor","name","display","glowDistance","haloDistance","symHaloDistance","warpHaloColor"]),void 0!==t.warpHalpColor&&(i.warpHaloColor=t.warpHalpColor),t.visible&&Object(pe.assignIfExists)(i.visible,t.visible,["glows","symHalos","halos","trails"]),t.effect&&(i.effect=_e.Tw2Effect.from(t.effect)),t.glows&&(i.glows=Ee.EveSpriteSet.from(t.glows)),t.items))for(var n=0;n<t.items.length;n++)i.CreateItem(t.items[n]);return r&&r.skipUpdate||i.Initialize(),i}},me.Item=Re,me.perObjectData={vs:[["WorldMat",16],["Shipdata",4]]},me.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:2}],me._box=[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],[[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,-1,-1]],[[-1,-1,0],[-1,1,0],[-1,1,-1],[-1,-1,-1]],[[1,-1,0],[1,-1,-1],[1,1,-1],[1,1,0]],[[-1,-1,0],[-1,-1,-1],[1,-1,-1],[1,-1,0]],[[-1,1,0],[1,1,0],[1,1,-1],[-1,1,-1]]],Q=Se((X=be).prototype,"alwaysOn",[x,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Z=Se(X.prototype,"effect",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Se(X.prototype,"glowColor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),$=Se(X.prototype,"glows",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Se(X.prototype,"glowScale",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te=Se(X.prototype,"haloColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),re=Se(X.prototype,"haloScaleX",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ie=Se(X.prototype,"haloScaleY",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ne=Se(X.prototype,"maxVel",[F,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),ae=Se(X.prototype,"symHaloScale",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),oe=Se(X.prototype,"trailColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),se=Se(X.prototype,"trailSize",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),le=Se(X.prototype,"warpGlowColor",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),ue=Se(X.prototype,"warpHaloColor",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.vec4.create()}}),ce=Se(X.prototype,"glowDistance",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),fe=Se(X.prototype,"haloDistance",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3.01}}),de=Se(X.prototype,"symHaloDistance",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),he=Se(X.prototype,"visible",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{glows:!0,symHalos:!0,halos:!0,trails:!0}}}),K=X))||K)},"./eve/item/EveCurveLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCurveLineSetItem",(function(){return ve})),r.d(t,"EveCurveLineSet",(function(){return ge}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue=r("./global/index.js"),ce=r("./global/utils/index.js"),fe=r("./global/math/index.js"),de=r("./core/index.js"),he=r("./eve/item/EveObjectSet.js");function me(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function be(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var pe={INVALID:0,STRAIGHT:1,SPHERED:2,CURVED:3},ve=(i=ce.meta.type("EveCurveLineSetItem"),n=ce.meta.float,a=ce.meta.float,o=ce.meta.color,s=ce.meta.color,l=ce.meta.vector3,u=ce.meta.color,c=ce.meta.float,f=ce.meta.uint,d=ce.meta.color,h=ce.meta.vector3,m=ce.meta.vector3,b=ce.meta.float,p=ce.meta.uint,i((C=M=class e extends he.EveObjectSetItem{constructor(...e){super(...e),me(this,"animationSpeed",y,this),me(this,"animationScale",w,this),me(this,"color1",_,this),me(this,"color2",E,this),me(this,"intermediatePosition",T,this),me(this,"multiColor",S,this),me(this,"multiColorBorder",j,this),me(this,"numOfSegments",R,this),me(this,"overlayColor",P,this),me(this,"position1",x,this),me(this,"position2",z,this),me(this,"width",O,this),me(this,"type",A,this)}ChangePositionFromOriginDirection(t,r,i=e.DEFAULT_RAY_LENGTH){fe.vec3.copy(this.position1,t),fe.vec3.scaleAndAdd(this.position2,t,r,i),this.UpdateValues()}ChangePositionFromRay3(t,r=e.DEFAULT_RAY_LENGTH){return this.ChangePositionFromOriginDirection(fe.ray3.$v1(t),fe.ray3.$v2(t),r)}ChangeColor(e,t){fe.vec3.copy(this.color1,e),fe.vec3.copy(this.color2,t),this.UpdateValues()}ChangeWidth(e){this.width=e,this.UpdateValues()}ChangeCartesian(e,t,r){fe.vec3.copy(this.position1,e),fe.vec3.copy(this.position2,t),fe.vec3.copy(this.intermediatePosition,r),this.UpdateValues()}ChangePositionCartesian(e,t){fe.vec3.copy(this.position1,e),fe.vec3.copy(this.position2,t),this.UpdateValues()}ChangeIntermediateCartesian(e){fe.vec3.copy(this.intermediatePosition,e),this.UpdateValues()}ChangeSpherical(e,t,r,i){fe.vec3.fromSpherical(this.position1,e,i),fe.vec3.fromSpherical(this.position2,t,i),fe.vec3.fromSpherical(this.intermediatePosition,r,i),this.UpdateValues()}ChangePositionSpherical(e,t,r){fe.vec3.fromSpherical(this.position1,e,r),fe.vec3.fromSpherical(this.position2,t,r),this.UpdateValues()}ChangeIntermediateSpherical(e,t){fe.vec3.fromSpherical(this.intermediatePosition,e,t),this.UpdateValues()}ChangeMultiColor(e,t){fe.vec4.copy(this.multiColor,e),this.multiColorBorder=t,this.UpdateValues()}ChangeAnimation(e,t,r){fe.vec4.copy(this.overlayColor,e),this.animationSpeed=t,this.animationScale=r,this.UpdateValues()}ChangeSegmentation(t){this.type!==e.Type.STRAIGHT&&(this.numOfSegments=t,this.UpdateValues())}},M.Type=pe,M.DEFAULT_RAY_LENGTH=1e3,M.DEFAULT_CURVED_SEGMENTS=20,M.DEFAULT_SPHERED_SEGMENTS=20,y=be((g=C).prototype,"animationSpeed",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=be(g.prototype,"animationScale",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=be(g.prototype,"color1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec4.fromValues(1,1,1,1)}}),E=be(g.prototype,"color2",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec4.fromValues(1,1,1,1)}}),T=be(g.prototype,"intermediatePosition",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec3.create()}}),S=be(g.prototype,"multiColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec4.fromValues(0,0,0,1)}}),j=be(g.prototype,"multiColorBorder",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=be(g.prototype,"numOfSegments",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=be(g.prototype,"overlayColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec4.fromValues(0,0,0,1)}}),x=be(g.prototype,"position1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec3.create()}}),z=be(g.prototype,"position2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec3.create()}}),O=be(g.prototype,"width",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=be(g.prototype,"type",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pe.INVALID}}),v=g))||v),ge=(D=ce.meta.type("EveCurveLineSet"),I=ce.meta.boolean,L=ce.meta.struct("Tw2Effect"),F=ce.meta.struct("Tw2Effect"),G=ce.meta.notImplemented,B=ce.meta.float,N=ce.meta.float,k=ce.meta.notImplemented,U=ce.meta.float,V=ce.meta.boolean,H=ce.meta.quaternion,q=ce.meta.vector3,W=ce.meta.vector3,Y=ce.meta.matrix4,D((le=se=class e extends he.EveObjectSet{constructor(){super(),me(this,"additive",Q,this),me(this,"lineEffect",Z,this),me(this,"pickEffect",J,this),me(this,"scrollSpeed",$,this),me(this,"lineWidthFactor",ee,this),me(this,"depthOffset",te,this),me(this,"pickable",re,this),me(this,"rotation",ie,this),me(this,"scaling",ne,this),me(this,"translation",ae,this),me(this,"transform",oe,this),this._worldTransform=fe.mat4.create(),this._vertexSize=26,this._vbSize=0,this._vb=null,this._perObjectData=de.Tw2PerObjectData.from(e.perObjectData),this._decl=de.Tw2VertexDeclaration.from(e.vertexDeclarations).SetStride(104),e.init()}get lines(){return this.items}set lines(e){this.items=e}get lineCount(){for(var e=0,t=0;t<this.items.length;t++)this.items[t].type!==ve.Type.INVALID&&(e+=this.items[t].numOfSegments);return e}Initialize(){this.UpdateValues(),this.Rebuild()}GetResources(e=[]){return this.lineEffect&&this.lineEffect.GetResources(e),e}AddBoxLinesFromBox3(e,t,r,i){var n=e[0],a=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=[n,a,o],f=[n,a,u],d=[s,a,u],h=[s,a,o],m=[n,l,o],b=[n,l,u],p=[s,l,u],v=[s,l,o];return[this.AddStraightLine(c,f,t,r,i),this.AddStraightLine(f,d,t,r,i),this.AddStraightLine(d,h,t,r,i),this.AddStraightLine(h,c,t,r,i),this.AddStraightLine(m,b,t,r,i),this.AddStraightLine(b,p,t,r,i),this.AddStraightLine(p,v,t,r,i),this.AddStraightLine(v,m,t,r,i),this.AddStraightLine(c,m,t,r,i),this.AddStraightLine(f,b,t,r,i),this.AddStraightLine(d,p,t,r,i),this.AddStraightLine(h,v,t,r,i)]}AddBoxLinesFromBounds(e,t,r,i,n){var{box3_0:a}=this.constructor.global;return this.AddBoxLinesFromBox3(fe.box3.fromBounds(a,e,t),r,i,n)}AddBoxLinesFromSph3(e,t,r,i){var{box3_0:n}=this.constructor.global;return this.AddBoxLinesFromBox3(fe.box3.fromSph3(n,e),t,r,i)}AddBoxLinesFromPositionRadius(e,t,r,i,n){var{box3_0:a}=this.constructor.global;return this.AddBoxLinesFromBox3(fe.box3.fromPositionRadius(a,e,t),r,i,n)}AddBoxLinesFromItem(e,t,r,i){if(e.GetBoundingBox){var{box3_0:n}=this.constructor.global;if(e.GetBoundingBox(n,!0))return this.AddBoxLinesFromBox3(n,t,r,i)}else if(e.GetBoundingSphere){var{sph3_0:a}=this.constructor.global;if(e.GetBoundingSphere(a,!0))return this.AddBoxLinesFromSph3(a,t,r,i)}throw new Error("Item doesn't provide bounds data or bounds dirty")}AddStraightLineFromOriginDirection(e,t,r,i,n,a){var o=this.AddStraightLine([0,0,0],[0,0,0],i,n,a);return o.ChangePositionFromOriginDirection(e,t,r),o}AddStraightLineFromRay3(e,t,r,i,n){var a=this.AddStraightLine([0,0,0],[0,0,0],r,i,n);return a.ChangePositionFromRay3(e,t),a}AddStraightLine(e,t,r,i,n){return this.CreateItem({type:ve.Type.STRAIGHT,position1:e,position2:t,color1:i,color2:n,width:r})}AddCurvedLineCrt(e,t,r,i,n,a){return this.CreateItem({type:ve.Type.CURVED,position1:e,position2:t,intermediatePosition:r,color1:n,color2:a,width:i,numOfSegments:ve.DEFAULT_CURVED_SEGMENTS})}AddCurvedLineSph(t,r,i,n,a,o,s){var l=e.global;return this.CreateItem({type:ve.Type.CURVED,position1:fe.vec3.fromSpherical(l.vec3_0,t,i),position2:fe.vec3.fromSpherical(l.vec3_1,r,i),intermediatePosition:fe.vec3.fromSpherical(l.vec3_2,n,i),color1:o,color2:s,width:a,numOfSegments:ve.DEFAULT_CURVED_SEGMENTS})}AddSpheredLineCrt(e,t,r,i,n,a){return this.CreateItem({type:ve.Type.SPHERED,position1:e,position2:t,intermediatePosition:r,color1:n,color2:a,width:i,numOfSegments:ve.DEFAULT_SPHERED_SEGMENTS})}AddSpheredLineSph(t,r,i,n,a,o,s){var l=e.global;return this.CreateItem({type:ve.Type.SPHERED,position1:fe.vec3.fromSpherical(l.vec3_0,t,i),position2:fe.vec3.fromSpherical(l.vec3_1,r,i),intermediatePosition:fe.vec3.fromSpherical(l.vec3_2,n,i),color1:o,color2:s,width:a,numOfSegments:ve.DEFAULT_SPHERED_SEGMENTS})}OnValueChanged(){fe.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}UpdateViewDependentData(e){e?fe.mat4.multiply(this._worldTransform,e,this.transform):fe.mat4.copy(this._worldTransform,this.transform)}Unload(e){this._vb&&(ue.device.gl.deleteBuffer(this._vb),this._vb=null),super.Unload(e)}Rebuild(t){this.RebuildItems(t),this._vbSize=this.lineCount,this._dirty=!1;var r=this._visibleItems.length;if(r){for(var i,n=e.global,a=new Float32Array(6*this._vbSize*this._vertexSize),o=n.vec3_0,s=n.vec3_1,l=n.vec3_2,u=n.vec3_3,c=n.vec3_4,f=n.vec3_5,d=n.vec3_6,h=n.mat4_0,m=n.vec3_7,b=n.vec3_8,p=n.vec3_9,v=n.vec3_10,g=n.vec4_0,y=n.vec4_1,w=0,_=0;_<r;++_){var E=this._visibleItems[_];switch(E.type){case ve.Type.INVALID:break;case ve.Type.STRAIGHT:e.WriteLineVerticesToBuffer(this,E.position1,E.color1,0,E.position2,E.color2,1,_,a,w),w+=6*this._vertexSize;break;case ve.Type.SPHERED:fe.vec3.subtract(o,E.position1,E.intermediatePosition),fe.vec3.subtract(s,E.position2,E.intermediatePosition),fe.vec3.normalize(l,o),fe.vec3.normalize(u,s),fe.vec3.cross(c,o,s);var T=Math.acos(fe.vec3.dot(l,u))/E.numOfSegments;fe.mat4.identity(h),fe.mat4.rotate(h,h,T,c),fe.vec3.copy(m,o),fe.vec4.copy(g,E.color1);for(var S=0;S<this.lines[_].numOfSegments;++S){var j=(S+1)/E.numOfSegments;fe.vec3.transformMat4(b,m,h),y[0]=E.color1[0]*(1-j)+E.color2[0]*j,y[1]=E.color1[1]*(1-j)+E.color2[1]*j,y[2]=E.color1[2]*(1-j)+E.color2[2]*j,y[3]=E.color1[3]*(1-j)+E.color2[3]*j,fe.vec3.add(p,m,E.intermediatePosition),fe.vec3.add(v,b,E.intermediatePosition),e.WriteLineVerticesToBuffer(this,p,g,S/E.numOfSegments,v,y,j,_,a,w),w+=6*this._vertexSize,i=m,m=b,b=i,i=g,g=y,y=i}break;case ve.Type.CURVED:fe.vec3.subtract(f,E.intermediatePosition,E.position1),fe.vec3.subtract(d,E.position2,E.intermediatePosition),fe.vec3.copy(p,E.position1),fe.vec3.copy(g,E.color1);for(var R=0;R<E.numOfSegments;++R){var P=(R+1)/E.numOfSegments;fe.vec3.hermite(v,E.position1,f,E.position2,d,P),y[0]=E.color1[0]*(1-P)+E.color2[0]*P,y[1]=E.color1[1]*(1-P)+E.color2[1]*P,y[2]=E.color1[2]*(1-P)+E.color2[2]*P,y[3]=E.color1[3]*(1-P)+E.color2[3]*P,e.WriteLineVerticesToBuffer(this,p,g,R/E.numOfSegments,v,y,P,_,a,w),w+=6*this._vertexSize,i=p,p=v,v=i,i=g,g=y,y=i}}}this._vb=ue.device.gl.createBuffer(),ue.device.gl.bindBuffer(ue.device.gl.ARRAY_BUFFER,this._vb),ue.device.gl.bufferData(ue.device.gl.ARRAY_BUFFER,a,ue.device.gl.STATIC_DRAW),ue.device.gl.bindBuffer(ue.device.gl.ARRAY_BUFFER,null),super.Rebuild(t)}else super.Rebuild(t)}GetBatches(t,r){if(this.display&&this._vb){var i;switch(t){case ue.device.RM_TRANSPARENT:if(this.additive||!this.lineEffect)return;i=this.lineEffect;break;case ue.device.RM_ADDITIVE:if(!this.additive||!this.lineEffect)return;i=this.lineEffect;break;case ue.device.RM_PICKABLE:if(!this.pickable||!this.pickEffect)return;i=this.pickEffect}var n=new de.Tw2ForwardingRenderBatch,a=fe.mat4.transpose(e.global.mat4_0,this._worldTransform);this._perObjectData.vs.Set("WorldMat",a),this._perObjectData.ps.Set("WorldMat",a),n.perObjectData=this._perObjectData,n.geometryProvider=this,n.renderMode=t,n.effect=i,r.Commit(n)}}Render(e,t){if(!e.effect||!e.effect.IsGood()||!this._vb)return!1;var r=ue.device,i=r.gl;i.bindBuffer(i.ARRAY_BUFFER,this._vb);for(var n=e.effect.GetPassCount(t),a=0;a<n;++a){e.effect.ApplyPass(t,a);var o=e.effect.GetPassInput(t,a);if(!this._decl.SetDeclaration(r,o,this._decl.stride))return!1;r.ApplyShadowState(),i.drawArrays(i.TRIANGLES,0,6*this._vbSize)}return!0}static FillColorVertices(e,t,r){return t[r++]=e.multiColor[0],t[r++]=e.multiColor[1],t[r++]=e.multiColor[2],t[r++]=e.multiColor[3],t[r++]=e.overlayColor[0],t[r++]=e.overlayColor[1],t[r++]=e.overlayColor[2],t[r++]=e.overlayColor[3],r}static WriteLineVerticesToBuffer(t,r,i,n,a,o,s,l,u,c){var f=t.items[l];u[c++]=r[0],u[c++]=r[1],u[c++]=r[2],u[c++]=a[0]-r[0],u[c++]=a[1]-r[1],u[c++]=a[2]-r[2],u[c++]=-t.lineWidthFactor*f.width,u[c++]=0,u[c++]=n,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=i[0],u[c++]=i[1],u[c++]=i[2],u[c++]=i[3],c=e.FillColorVertices(f,u,c),u[c++]=r[0],u[c++]=r[1],u[c++]=r[2],u[c++]=a[0]-r[0],u[c++]=a[1]-r[1],u[c++]=a[2]-r[2],u[c++]=t.lineWidthFactor*f.width,u[c++]=0,u[c++]=n,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=i[0],u[c++]=i[1],u[c++]=i[2],u[c++]=i[3],c=e.FillColorVertices(f,u,c),u[c++]=a[0],u[c++]=a[1],u[c++]=a[2],u[c++]=r[0]-a[0],u[c++]=r[1]-a[1],u[c++]=r[2]-a[2],u[c++]=-t.lineWidthFactor*f.width,u[c++]=1,u[c++]=s,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=o[0],u[c++]=o[1],u[c++]=o[2],u[c++]=o[3],c=e.FillColorVertices(f,u,c),u[c++]=r[0],u[c++]=r[1],u[c++]=r[2],u[c++]=a[0]-r[0],u[c++]=a[1]-r[1],u[c++]=a[2]-r[2],u[c++]=t.lineWidthFactor*f.width,u[c++]=0,u[c++]=n,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=i[0],u[c++]=i[1],u[c++]=i[2],u[c++]=i[3],c=e.FillColorVertices(f,u,c),u[c++]=a[0],u[c++]=a[1],u[c++]=a[2],u[c++]=r[0]-a[0],u[c++]=r[1]-a[1],u[c++]=r[2]-a[2],u[c++]=t.lineWidthFactor*f.width,u[c++]=1,u[c++]=s,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=o[0],u[c++]=o[1],u[c++]=o[2],u[c++]=o[3],c=e.FillColorVertices(f,u,c),u[c++]=a[0],u[c++]=a[1],u[c++]=a[2],u[c++]=r[0]-a[0],u[c++]=r[1]-a[1],u[c++]=r[2]-a[2],u[c++]=-t.lineWidthFactor*f.width,u[c++]=1,u[c++]=s,u[c++]=f.multiColorBorder,u[c++]=s-n,u[c++]=f.animationSpeed,u[c++]=f.animationScale,u[c++]=l,u[c++]=o[0],u[c++]=o[1],u[c++]=o[2],u[c++]=o[3],e.FillColorVertices(f,u,c)}static init(){e.global||(e.global={vec3_0:fe.vec3.create(),vec3_1:fe.vec3.create(),vec3_2:fe.vec3.create(),vec3_3:fe.vec3.create(),vec3_4:fe.vec3.create(),vec3_5:fe.vec3.create(),vec3_6:fe.vec3.create(),vec3_7:fe.vec3.create(),vec3_8:fe.vec3.create(),vec3_9:fe.vec3.create(),vec3_10:fe.vec3.create(),vec4_0:fe.vec4.create(),vec4_1:fe.vec4.create(),mat4_0:fe.mat4.create(),box3_0:fe.box3.create(),sph3_0:fe.sph3.create()})}},se.Item=ve,se.global=null,se.perObjectData={vs:[["WorldMat",16]],ps:[["WorldMat",16]]},se.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:3},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4},{usage:"COLOR",usageIndex:2,elements:4}],Q=be((X=le).prototype,"additive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=be(X.prototype,"lineEffect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.Tw2Effect.from({effectFilePath:"res:/Graphics/Effect/Managed/Space/SpecialFX/Lines3D.fx",textures:{TexMap:"res:/texture/global/white.dds.0.png",OverlayTexMap:"res:/texture/global/white.dds.0.png"}})}}),J=be(X.prototype,"pickEffect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=be(X.prototype,"scrollSpeed",[G,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ee=be(X.prototype,"lineWidthFactor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te=be(X.prototype,"depthOffset",[k,U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=be(X.prototype,"pickable",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ie=be(X.prototype,"rotation",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.quat.create()}}),ne=be(X.prototype,"scaling",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec3.fromValues(1,1,1)}}),ae=be(X.prototype,"translation",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.vec3.create()}}),oe=be(X.prototype,"transform",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.mat4.create()}}),K=X))||K)},"./eve/item/EveCustomMask.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCustomMask",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/math/index.js"),x=r("./global/utils/index.js"),z=r("./core/index.js");function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=x.meta.type("EveCustomMask"),n=x.meta.stage(1),a=x.meta.string,o=x.meta.boolean,s=x.meta.boolean,l=x.meta.uint,u=x.meta.quaternion,c=x.meta.vector3,f=x.meta.vector4,d=x.meta.plain,h=x.meta.todo("Move to direct class properties"),m=x.meta.isPrivate,b=x.meta.vector3,i(p=n((R=class extends z.Tw2Transform{constructor(...e){super(...e),D(this,"name",g,this),D(this,"display",y,this),D(this,"isMirrored",w,this),D(this,"materialIndex",_,this),D(this,"rotation",E,this),D(this,"scaling",T,this),D(this,"targetMaterials",S,this),D(this,"parameters",j,this),this._worldInverseTranspose=P.mat4.create()}get position(){return this.translation}set position(e){this.SetTranslation(e)}UpdatePerObjectData(e,t,r,i){this.SetParentTransform(e).RebuildTransforms();var n=this.display&&i?this.targetMaterials:P.vec4.ZERO,a=0,o=0,s=0;if(this.parameters&&this.parameters.PatternMaskMap&&this.parameters.PatternMaskMap.overrides){var{addressUMode:l,addressVMode:u,addressWMode:c}=this.parameters.PatternMaskMap.overrides;4===l&&(a=1),4===u&&(o=1),4===c&&(s=1)}t.ps.Set("CustomMaskTarget"+r,n),t.ps.Set("CustomMaskMaterialID"+r,[this.materialIndex,a,o,s]),t.vs.SetIndex("CustomMaskData"+r,1,this.isMirrored?1:0),t.vs.Set("CustomMaskMatrix"+r,this._worldInverseTranspose)}GetParameters(e={}){return z.Tw2Effect.getParameterObject(this.parameters,e,!1,!0,!0)}SetParameters(e,t){var r=z.Tw2Effect.setParameterObject(this.parameters,e,!1,!0,!0);return r&&!t&&this.UpdateValues(),r}static get(e,t,r){t=super.get(e,t,r);var{PatternMaskMap:i,PatternMaskMap:{overrides:n}}=e.parameters;return t.resourcePath=i.GetValue(),t.addressUMode=n?n.addressUMode:1,t.addressVMode=n?n.addressVMode:1,t.parameters=e.GetParameters(),t}static set(e,t,r={}){var{skipUpdate:i}=r,n=C(r,["skipUpdate"]),a=super.set(e,t,A(A({},n),{},{skipUpdate:!0}));if(t){var{parameters:o,addressUMode:s,addressVMode:l,resourcePath:u}=t;e.parameters.PatternMaskMap.SetValue(u)&&(a=!0),e.parameters.PatternMaskMap.SetOverrides({addressUMode:s,addressVMode:l})&&(a=!0),o&&e.SetParameters(o,!0)&&(a=!0)}return a&&!i&&e.UpdateValues(r),a}static ApplyMaterials(e,t,r){var i=0===r?"PMtl1":"PMtl2",n=0===r?"PatternMask1Map":"PatternMask2Map",a=e.parameters,o=t.parameters;function s(e,t){e&&t&&(t.SetValue(e.GetValue()),e.OnEvent("modified",()=>t.SetValue(e.GetValue())),e instanceof z.Tw2TextureParameter&&(t.overrides=e.overrides,e.OnEvent("overrides_modified",()=>{t.overrides=e.overrides})))}s(o.DiffuseColor,a[i+"DiffuseColor"]),s(o.DustDiffuseColor,a[i+"DustDiffuseColor"]),s(o.FresnelColor,a[i+"FresnelColor"]),s(o.Gloss,a[i+"Gloss"]),s(o.PatternMaskMap,a[n])}},g=I((v=R).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=I(v.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=I(v.prototype,"isMirrored",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=I(v.prototype,"materialIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=I(v.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.quat.create()}}),T=I(v.prototype,"scaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec3.fromValues(1,1,1)}}),S=I(v.prototype,"targetMaterials",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.vec4.fromValues(1,1,1,1)}}),j=I(v.prototype,"parameters",[d,h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{PatternMaskMap:new z.Tw2TextureParameter("PatternMaskMap","res:/texture/global/black.dds.0.png"),DiffuseColor:new z.Tw2Vector4Parameter("DiffuseColor",[0,0,0,1]),DustDiffuseColor:new z.Tw2Vector4Parameter("DustDiffuseColor",[0,0,0,1]),FresnelColor:new z.Tw2Vector4Parameter("FresnelColor",[0,0,0,1]),Gloss:new z.Tw2Vector4Parameter("Gloss",[0,0,0,0])}}}),I(v.prototype,"position",[b],Object.getOwnPropertyDescriptor(v.prototype,"position"),v.prototype),p=v))||p)||p)},"./eve/item/EveLocator2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocator2",(function(){return P})),r.d(t,"EveLocator",(function(){return x}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=T.meta.type("EveLocator2"),n=T.meta.stage(1),a=T.meta.string,o=T.meta.matrix4,s=T.meta.uint,l=T.meta.todo("Move to EveLocator only?"),u=T.meta.uint,c=T.meta.todo("Move to EveLocator only?"),f=T.meta.struct("Tw2Bone"),d=T.meta.isPrivate,i(h=n((_=w=class e extends T.meta.Model{constructor(...e){super(...e),j(this,"name",b,this),j(this,"transform",p,this),j(this,"atlasIndex0",v,this),j(this,"atlasIndex1",g,this),j(this,"bone",y,this)}get type(){var t=this.name.split("_")[1];return e.LocatorType[t.toUpperCase()]||-1}GetBoundingBox(e){return S.box3.fromPositionRadius(e,this.GetTranslation(S.vec3.create()),2*this.GetScale())}GetBoundingSphere(e){return S.sph3.fromPositionRadius(e,this.GetTranslation(S.vec3.create()),2*this.GetScale())}Intersect(e,t,r){if(!e.GetOption("locators","skip")){var i=e.IntersectSph3(this.GetBoundingSphere(S.vec3.create()),r);if(i)return i.name=this.name,i.item=this,t.push(i),i}}GetGlowTranslation(t,r,i){return this.GetDirection(t),r&&S.vec3.scale(t,t,r),S.vec3.subtract(t,t,this.GetTranslation(e.global.vec3_0)),i&&S.vec3.transformMat4(t,t,i),t}GetWeaponRotationTranslation(t,r,i){var n=S.mat4.copy(e.global.mat4_0,this.transform);S.vec3.normalize(n.subarray(0,3),n.subarray(0,3)),S.vec3.normalize(n.subarray(4,7),n.subarray(4,7)),S.vec3.normalize(n.subarray(8,11),n.subarray(8,11)),i&&S.mat4.multiply(n,i,n),S.mat4.getRotation(t,n),S.mat4.getTranslation(r,n)}GetTranslation(e,t){return S.mat4.getTranslation(e,this.transform),t&&S.vec3.transformMat4(e,e,t),e}GetDirection(e,t){S.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),t&&S.vec3.transformMat4(e,e,t),S.vec3.normalize(e,e);var r=this.GetScale();return r<3&&S.vec3.scale(e,e,r/3),e}GetScale(){var e=this.transform;return Math.max(S.vec3.length([e[0],e[1],e[2]]),S.vec3.length([e[4],e[5],e[6]]))}FindBone(e){return this.bone=e.FindBoneForMesh(this.name,0),this.bone}},w.global={vec3_0:S.vec3.create(),mat4_0:S.mat4.create()},w.LocatorType={UNKNOWN:0,AUDIO:1,ATTACH:2,BOOSTER:3,TURRET:100,XL_TURRET:101,LAUNCHER:102,CHAIN:103,ATOMIC:104},w.Type={AUDIO:"locator_audio",ATTACH:"locator_attach",BOOSTER:"locator_booster",TURRET:"locator_turret",XL_TURRET:"locator_xl",CHAIN:"locator_chain",ATOMIC:"locator_atomic",LAUNCHER:"locator_launcher"},b=R((m=_).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=R(m.prototype,"transform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.mat4.create()}}),v=R(m.prototype,"atlasIndex0",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=R(m.prototype,"atlasIndex1",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(m.prototype,"bone",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h)||h),x=T.meta.type("EveLocator")(E=class extends P{})||E},"./eve/item/EveLocatorSets.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocatorSetItem",(function(){return x})),r.d(t,"EveLocatorSets",(function(){return z}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js"),j=r("./global/math/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=S.meta.type("EveLocatorSetItem"),n=S.meta.stage(1),a=S.meta.uint,o=S.meta.vector3,s=S.meta.quaternion,l=S.meta.vector3,i(u=n((b=class e extends S.meta.Model{constructor(...e){super(...e),R(this,"boneIndex",f,this),R(this,"position",d,this),R(this,"rotation",h,this),R(this,"scaling",m,this)}static blackStruct(t){var r=new e;return j.vec3.copy(r.position,t.ReadF32Array(3)),r.boneIndex=t.ReadUint(),j.vec4.copy(r.rotation,t.ReadF32Array(4)),r}},f=P((c=b).prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),d=P(c.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.create()}}),h=P(c.prototype,"rotation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),m=P(c.prototype,"scaling",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.fromValues(1,1,1)}}),u=c))||u)||u),z=(p=S.meta.type("EveLocatorSets",!0),v=S.meta.string,g=S.meta.list(x),p((T=class extends S.meta.Model{constructor(...e){super(...e),R(this,"name",_,this),R(this,"locators",E,this)}},_=P((w=T).prototype,"name",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=P(w.prototype,"locators",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=w))||y)},"./eve/item/EveObjectSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObjectSetItem",(function(){return E})),r.d(t,"EveObjectSet",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/math/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=g.meta.boolean,o=class extends g.meta.Model{constructor(...e){super(...e),w(this,"display",a,this),this._dirty=!0}OnValueChanged(){this._dirty=!0}},a=_((n=o).prototype,"display",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n),T=(s=g.meta.boolean,l=g.meta.boolean,u=g.meta.list(),c=g.meta.abstract,f=g.meta.abstract,v=p=class extends g.meta.Model{constructor(...e){super(...e),w(this,"autoRebuild",h,this),w(this,"display",m,this),w(this,"items",b,this),this._dirty=!0,this._visibleItems=[]}Initialize(){this.Rebuild()}OnValueChanged(){this._dirty=!0}OnItemModified(e,t){var r=t&&t.skipEvents;this.items.includes(e)?(this._dirty=!0,r||this.EmitEvent("item_modified",e,t)):(r||this.EmitEvent("item_removed",e,t),e.OffEvent("modified",this.OnItemModified))}CreateItem(e={},t){var r=this.constructor.Item.from(e);return this.items.push(r),this._dirty=!0,r.OnEvent("modified",this.OnItemModified,this),t&&t.skipEvents||this.EmitEvent("item_created",r,t),t&&t.skipUpdate||this.UpdateValues(t),r}AddItem(e,t){return!this.items.includes(e)&&(this.items.push(e),this._dirty=!0,e.OnEvent("modified",this.OnItemModified,this),t&&t.skipEvents||this.EmitEvent("item_added",e,t),t&&t.skipUpdate||this.UpdateValues(t),!0)}RemoveItem(e,t){var r=this.items.indexOf(e);return-1!==r&&(this.items.splice(r,1),this._dirty=!0,e.OffEvent("modified",this.OnItemModified),t&&t.skipEvents||this.EmitEvent("item_removed",e,t),t&&t.skipUpdate||this.UpdateValues(t),!0)}ClearItems(e){if(!this.items.length)return!1;var t,r=e&&e.skipEvents;r||(t=Array.from(this.items));for(var i=0;i<this.items.length;i++)this.RemoveItem(this.items[i],{skipEvents:!0,skipUpdate:!0}),i--;return r||this.EmitEvent("items_cleared",t,e),e&&e.skipUpdate||this.UpdateValues(e),!0}RebuildItems(e){this._visibleItems.splice(0);for(var t=0;t<this.items.length;t++){var r=this.items[t],i=e&&e.skipEvents;r.HasEvent("modified",this.OnItemModified)||(i||this.EmitEvent("item_added",r,e),r.OnEvent("modified",this.OnItemModified,this)),r.display&&this._visibleItems.push(r),r._dirty&&!i&&this.EmitEvent("item_rebuilt",r,e),r._dirty=!1}this._dirty=!0}AreItemsDirty(){for(var e=0;e<this.items.length;e++)if(this.items[e]._dirty)return!0;return!1}Update(e){!this._dirty&&this.autoRebuild&&this.AreItemsDirty()&&(this._dirty=!0),this._dirty&&this.Rebuild()}Unload(e){e&&e.skipEvents||this.EmitEvent("unloaded",this,e)}Rebuild(e){e&&e.skipEvents||this.EmitEvent("rebuilt",this,e)}GetBatches(e,t,r){}Render(){}},p.Item=null,p.global={vec3_0:y.vec3.create(),vec3_1:y.vec3.create(),vec3_2:y.vec3.create(),vec4_0:y.vec4.create(),vec4_1:y.vec4.create(),mat4_0:y.mat4.create()},h=_((d=v).prototype,"autoRebuild",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=_(d.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=_(d.prototype,"items",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_(d.prototype,"GetBatches",[c],Object.getOwnPropertyDescriptor(d.prototype,"GetBatches"),d.prototype),_(d.prototype,"Render",[f],Object.getOwnPropertyDescriptor(d.prototype,"Render"),d.prototype),d)},"./eve/item/EvePlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlaneSetItem",(function(){return ge})),r.d(t,"EvePlaneSet",(function(){return ye}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce=r("./global/utils/index.js"),fe=r("./global/index.js"),de=r("./global/math/index.js"),he=r("./core/index.js"),me=r("./eve/item/EveObjectSet.js");function be(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function pe(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class ve extends he.Tw2RenderBatch{constructor(...e){super(...e),this.planeSet=null}Commit(e){this.planeSet.Render(e)}}var ge=(i=ce.meta.type("EvePlaneSetItem",!0),n=ce.meta.string,a=ce.meta.notImplemented,o=ce.meta.float,s=ce.meta.notImplemented,l=ce.meta.float,u=ce.meta.notImplemented,c=ce.meta.uint,f=ce.meta.notImplemented,d=ce.meta.float,h=ce.meta.notImplemented,m=ce.meta.float,b=ce.meta.color,p=ce.meta.vector4,v=ce.meta.vector4,g=ce.meta.vector4,y=ce.meta.vector4,w=ce.meta.uint,_=ce.meta.vector3,E=ce.meta.quaternion,T=ce.meta.vector3,S=ce.meta.uint,j=ce.meta.uint,R=ce.meta.todo("Identify if this is required anywhere apart from the EVESOF, or if it can be deprecated"),P=ce.meta.alias("maskAtlasID"),i((Y=class extends me.EveObjectSetItem{constructor(...e){super(...e),be(this,"name",O,this),be(this,"blinkRate",A,this),be(this,"blinkPhase",M,this),be(this,"blinkMode",C,this),be(this,"dutyCycle",D,this),be(this,"rate",I,this),be(this,"color",L,this),be(this,"layer1Scroll",F,this),be(this,"layer1Transform",G,this),be(this,"layer2Scroll",B,this),be(this,"layer2Transform",N,this),be(this,"maskAtlasID",k,this),be(this,"position",U,this),be(this,"rotation",V,this),be(this,"scaling",H,this),be(this,"boneIndex",q,this),be(this,"groupIndex",W,this)}get maskMapAtlasIndex(){return this.maskAtlasID}set maskMapAtlasIndex(e){this.maskAtlasID=e}OnValueChanged(){this._dirty=!0}static set(e,t,r){return t&&void 0!==t.maskMapAtlasIndex&&(t.maskAtlasID=t.maskMapAtlasIndex),super.set(e,t,r)}},O=pe((z=Y).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=pe(z.prototype,"blinkRate",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=pe(z.prototype,"blinkPhase",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=pe(z.prototype,"blinkMode",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=pe(z.prototype,"dutyCycle",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=pe(z.prototype,"rate",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=pe(z.prototype,"color",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec4.create()}}),F=pe(z.prototype,"layer1Scroll",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec4.create()}}),G=pe(z.prototype,"layer1Transform",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec4.create()}}),B=pe(z.prototype,"layer2Scroll",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec4.create()}}),N=pe(z.prototype,"layer2Transform",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec4.create()}}),k=pe(z.prototype,"maskAtlasID",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=pe(z.prototype,"position",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.create()}}),V=pe(z.prototype,"rotation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.quat.create()}}),H=pe(z.prototype,"scaling",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.fromValues(1,1,1)}}),q=pe(z.prototype,"boneIndex",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),W=pe(z.prototype,"groupIndex",[j,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),pe(z.prototype,"maskMapAtlasIndex",[P],Object.getOwnPropertyDescriptor(z.prototype,"maskMapAtlasIndex"),z.prototype),x=z))||x),ye=(K=ce.meta.type("EvePlaneSet",!0),X=ce.meta.string,Q=ce.meta.struct(),Z=ce.meta.notImplemented,J=ce.meta.boolean,$=ce.meta.notImplemented,ee=ce.meta.byte,te=ce.meta.list("EvePlaneSetItem"),K((ue=le=class e extends me.EveObjectSet{constructor(...t){super(...t),be(this,"name",ne,this),be(this,"effect",ae,this),be(this,"hideOnLowQuality",oe,this),be(this,"pickBufferID",se,this),this._vertexBuffer=null,this._indexBuffer=null,this._decl=he.Tw2VertexDeclaration.from(e.vertexDeclarations)}get planes(){return this.items}set planes(e){this.items=e}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}Unload(e){this._vertexBuffer&&(fe.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(fe.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(t){this.RebuildItems(t),this._dirty=!1;var r=this._visibleItems.length;if(r){for(var i=new Float32Array(4*r*35),n=0;n<r;++n){var a=this._visibleItems[n],o=4*n*35;i[o+35-3]=0,i[o+35+35-3]=1,i[o+70+35-3]=2,i[o+105+35-3]=3;for(var s=de.mat4.fromRotationTranslationScale(me.EveObjectSet.global.mat4_0,a.rotation,a.position,a.scaling),l=0;l<4;++l){var u=o+35*l;i[u]=s[0],i[u+1]=s[4],i[u+2]=s[8],i[u+3]=s[12],i[u+4]=s[1],i[u+5]=s[5],i[u+6]=s[9],i[u+7]=s[13],i[u+8]=s[2],i[u+9]=s[6],i[u+10]=s[10],i[u+11]=s[14],i[u+12]=a.color[0],i[u+13]=a.color[1],i[u+14]=a.color[2],i[u+15]=a.color[3]*e.alphaMultiplier,i[u+16]=a.layer1Transform[0],i[u+17]=a.layer1Transform[1],i[u+18]=a.layer1Transform[2],i[u+19]=a.layer1Transform[3],i[u+20]=a.layer2Transform[0],i[u+21]=a.layer2Transform[1],i[u+22]=a.layer2Transform[2],i[u+23]=a.layer2Transform[3],i[u+24]=a.layer1Scroll[0],i[u+25]=a.layer1Scroll[1],i[u+26]=a.layer1Scroll[2],i[u+27]=a.layer1Scroll[3],i[u+28]=a.layer2Scroll[0],i[u+29]=a.layer2Scroll[1],i[u+30]=a.layer2Scroll[2],i[u+31]=a.layer2Scroll[3],i[u+33]=a.boneIndex,i[u+34]=a.maskAtlasID}}var{gl:c}=fe.device;this._vertexBuffer=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,this._vertexBuffer),c.bufferData(c.ARRAY_BUFFER,i,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null);for(var f=new Uint16Array(6*r),d=0;d<r;++d){var h=6*d,m=4*d;f[h]=m,f[h+1]=m+2,f[h+2]=m+1,f[h+3]=m,f[h+4]=m+3,f[h+5]=m+2}this._indexBuffer=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this._indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,f,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*r,super.Rebuild(t)}else super.Rebuild(t)}GetBatches(e,t,r){if(this.display&&e===fe.device.RM_ADDITIVE&&this._indexBuffer&&this._vertexBuffer&&this._visibleItems.length){var i=new ve;i.renderMode=fe.device.RM_ADDITIVE,i.planeSet=this,i.perObjectData=r,t.Commit(i)}}Render(e){if(!(this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;var{gl:t}=fe.device;fe.device.SetStandardStates(fe.device.RM_ADDITIVE),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var r=0;r<this.effect.GetPassCount(e);++r){if(this.effect.ApplyPass(e,r),!this._decl.SetDeclaration(fe.device,this.effect.GetPassInput(e,r),140))return!1;fe.device.ApplyShadowState(),t.drawElements(t.TRIANGLES,this._indexBuffer.count,t.UNSIGNED_SHORT,0)}return!0}static from(t,r){var i=new e;if(t&&(Object(ce.assignIfExists)(i,t,["name","display","hideOnLowQuality"]),t.effect&&(i.effect=he.Tw2Effect.from(t.effect)),t.items))for(var n=0;n<t.items.length;n++)i.CreateItem(t.items[n]);return r&&r.skipUpdate||i.Initialize(),i}},le.alphaMultiplier=1,le.Item=ge,le.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:4},{usage:"TEXCOORD",usageIndex:7,elements:3}],ne=pe((ie=ue).prototype,"name",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ae=pe(ie.prototype,"effect",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=pe(ie.prototype,"hideOnLowQuality",[Z,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=pe(ie.prototype,"pickBufferID",[$,ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe(ie.prototype,"planes",[te],Object.getOwnPropertyDescriptor(ie.prototype,"planes"),ie.prototype),re=ie))||re)},"./eve/item/EveSpaceObjectDecal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObjectDecal",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O=r("./global/utils/index.js"),A=r("./global/index.js"),M=r("./global/math/index.js"),C=r("./core/index.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=O.meta.type("EveSpaceObjectDecal",!0),n=O.meta.string,a=O.meta.struct("Tw2Effect"),o=O.meta.boolean,s=O.meta.uint,l=O.meta.uint16Array,u=O.meta.uint,c=O.meta.boolean,f=O.meta.struct("Tw2Effect"),d=O.meta.vector3,h=O.meta.quaternion,m=O.meta.vector3,i((z=x=class e extends O.meta.Model{constructor(...t){super(...t),D(this,"name",v,this),D(this,"decalEffect",g,this),D(this,"display",y,this),D(this,"groupIndex",w,this),D(this,"indexBuffer",_,this),D(this,"parentBoneIndex",E,this),D(this,"pickable",T,this),D(this,"pickEffect",S,this),D(this,"position",j,this),D(this,"rotation",R,this),D(this,"scaling",P,this),this._dirty=!0,this._indexBuffer=null,this._localTransform=M.mat4.create(),this._localTransformInverse=M.mat4.create(),this._perObjectData=C.Tw2PerObjectData.from(e.perObjectData)}Initialize(){this.UpdateValues()}GetResources(e=[]){return this.decalEffect&&this.decalEffect.GetResources(e),this.pickEffect&&this.pickEffect.GetResources(e),e}OnValueChanged(){M.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.position,this.scaling),M.mat4.invert(this._localTransformInverse,this._localTransform)}Unload(e){this._indexBuffer&&(A.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),e&&e.skipEvents||this.EmitEvent("unloaded",this,e)}Rebuild(e){if(this.Unload({skipEvents:!0}),this.indexBuffer){var t=A.device.gl,r=new Uint16Array(this.indexBuffer);this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW),this._dirty=!1}e&&e.skipEvents||this.EmitEvent("rebuilt",this,e)}GetBatches(e,t,r,i,n=0){if(this.display&&i&&i.IsGood()){var a;switch(e){case A.device.RM_DECAL:a=this.decalEffect;break;case A.device.RM_PICKABLE:a=this.pickable?this.pickEffect:null}if(a&&a.IsGood()&&(!this._dirty||(this.Rebuild(),this._dirty))){var o=new C.Tw2ForwardingRenderBatch;if(this._perObjectData.vs.Set("worldMatrix",r.vs.Get("WorldMat")),this.parentBoneIndex>=0){var s=r.vs.Get("JointMat"),l=12*this.parentBoneIndex;if(s[l]||s[l+4]||s[l+8]){var u=this._perObjectData.vs.Get("parentBoneMatrix");u[0]=s[l],u[1]=s[l+4],u[2]=s[l+8],u[3]=0,u[4]=s[l+1],u[5]=s[l+5],u[6]=s[l+9],u[7]=0,u[8]=s[l+2],u[9]=s[l+6],u[10]=s[l+10],u[11]=0,u[12]=s[l+3],u[13]=s[l+7],u[14]=s[l+11],u[15]=1,M.mat4.transpose(u,u)}}M.mat4.invert(this._perObjectData.vs.Get("invWorldMatrix"),this._perObjectData.vs.Get("worldMatrix")),M.mat4.transpose(this._perObjectData.vs.Get("decalMatrix"),this._localTransform),M.mat4.transpose(this._perObjectData.vs.Get("invDecalMatrix"),this._localTransformInverse),this._perObjectData.ps.SetIndex("displayData",0,n),this._perObjectData.ps.Set("shipData",r.ps.data),o._geometryRes=i,o.perObjectData=this._perObjectData,o.geometryProvider=this,o.renderMode=e,o.effect=a,t.Commit(o)}}}Render(e,t){var r=e._geometryRes.meshes[0],i=r.indexes,n=r.areas[0].start,a=r.areas[0].count,o=r.indexType;A.tw2.SetVariableValue("u_DecalMatrix",this._localTransform),A.tw2.SetVariableValue("u_InvDecalMatrix",this._localTransformInverse),r.indexes=this._indexBuffer,r.areas[0].start=0,r.areas[0].count=this.indexBuffer.length,r.indexType=A.device.gl.UNSIGNED_SHORT,e._geometryRes.RenderAreas(0,0,1,e.effect,t),r.indexes=i,r.areas[0].start=n,r.areas[0].count=a,r.indexType=o}static from(t,r){var i=new e;if(t){Object(O.assignIfExists)(i,t,["name","display","pickable","position","rotation","scaling","groupIndex","parentBoneIndex"]),t.indexBuffer&&(i.indexBuffer=new Uint16Array(t.indexBuffer)),t.pickEffect&&(i.pickEffect=C.Tw2Effect.from(t.pickEffect));var n=t.decalEffect||t.effect;n&&(i.decalEffect=C.Tw2Effect.from(n))}return r&&r.skipUpdate||i.Initialize(),i}},x.perObjectData={vs:[["worldMatrix",16],["invWorldMatrix",16],["decalMatrix",16],["invDecalMatrix",16],["parentBoneMatrix",M.mat4.identity([])],["clampDecalToEdge",4]],ps:[["displayData",[0,1,0,0]],["shipData",12]]},v=I((p=z).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=I(p.prototype,"decalEffect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=I(p.prototype,"display",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=I(p.prototype,"groupIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=I(p.prototype,"indexBuffer",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=I(p.prototype,"parentBoneIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=I(p.prototype,"pickable",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=I(p.prototype,"pickEffect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=I(p.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),R=I(p.prototype,"rotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.quat.create()}}),P=I(p.prototype,"scaling",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.fromValues(1,1,1)}}),b=p))||b)},"./eve/item/EveSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpotlightSetItem",(function(){return ie})),r.d(t,"EveSpotlightSet",(function(){return ne}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X=r("./global/utils/index.js"),Q=r("./global/index.js"),Z=r("./global/math/index.js"),J=r("./core/index.js"),$=r("./eve/item/EveObjectSet.js");function ee(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function te(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class re extends J.Tw2RenderBatch{constructor(...e){super(...e),this.spotlightSet=null}Commit(e){this.spotlightSet.RenderCones(e),this.spotlightSet.RenderGlow(e)}}var ie=(i=X.meta.type("EveSpotlightSetItem",!0),n=X.meta.string,a=X.meta.boolean,o=X.meta.uint,s=X.meta.color,l=X.meta.float,u=X.meta.boolean,c=X.meta.color,f=X.meta.float,d=X.meta.uint,h=X.meta.color,m=X.meta.float,b=X.meta.vector3,p=X.meta.matrix4,v=X.meta.uint,i((D=class extends $.EveObjectSetItem{constructor(...e){super(...e),ee(this,"name",w,this),ee(this,"boosterGainInfluence",_,this),ee(this,"boneIndex",E,this),ee(this,"coneColor",T,this),ee(this,"coneIntensity",S,this),ee(this,"display",j,this),ee(this,"flareColor",R,this),ee(this,"flareIntensity",P,this),ee(this,"groupIndex",x,this),ee(this,"spriteColor",z,this),ee(this,"spriteIntensity",O,this),ee(this,"spriteScale",A,this),ee(this,"transform",M,this),ee(this,"colorType",C,this)}},w=te((y=D).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=te(y.prototype,"boosterGainInfluence",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=te(y.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=te(y.prototype,"coneColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.vec4.create()}}),S=te(y.prototype,"coneIntensity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=te(y.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=te(y.prototype,"flareColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.vec4.create()}}),P=te(y.prototype,"flareIntensity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=te(y.prototype,"groupIndex",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),z=te(y.prototype,"spriteColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.vec4.create()}}),O=te(y.prototype,"spriteIntensity",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=te(y.prototype,"spriteScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.vec3.fromValues(1,1,1)}}),M=te(y.prototype,"transform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.mat4.create()}}),C=te(y.prototype,"colorType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=y))||g),ne=(I=X.meta.type("EveSpotlightSet",!0),L=X.meta.string,F=X.meta.struct("Tw2Effect"),G=X.meta.struct("Tw2Effect"),B=X.meta.float,N=X.meta.list("EveSpotlightSetItem"),I((K=Y=class e extends $.EveObjectSet{constructor(...t){super(...t),ee(this,"name",V,this),ee(this,"coneEffect",H,this),ee(this,"glowEffect",q,this),ee(this,"intensity",W,this),this._coneVertexBuffer=null,this._decl=J.Tw2VertexDeclaration.from(e.vertexDeclarations),this._indexBuffer=null,this._spriteVertexBuffer=null,this._worldSpriteScale=1,this._indexOrder=[0,1,2,2,3,0]}get spotlightItems(){return this.items}set spotlightItems(e){this.items=e}GetResources(e=[]){return this.coneEffect&&this.coneEffect.GetResources(e),this.glowEffect&&this.glowEffect.GetResources(e),e}Unload(e){this._coneVertexBuffer&&(Q.device.gl.deleteBuffer(this._coneVertexBuffer),this._coneVertexBuffer=null),this._spriteVertexBuffer&&(Q.device.gl.deleteBuffer(this._spriteVertexBuffer),this._spriteVertexBuffer=null),this._indexBuffer&&(Q.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}SetWorldSpriteScale(e){this._worldSpriteScale!==e&&(this._worldSpriteScale=e,this._dirty=!0)}SetIndexOrder(e,t,r,i,n,a){this._indexOrder[0]=e,this._indexOrder[1]=t,this._indexOrder[2]=r,this._indexOrder[3]=i,this._indexOrder[4]=n,this._indexOrder[5]=a,this._dirty=!0}Rebuild(t){this.RebuildItems(t),this._dirty=!1;var r=this._visibleItems.length;if(r){for(var i=Q.device,n=[1,0,2,3],a=new Float32Array(22*(4*r*4)),o=0;o<r;++o)for(var s=this._visibleItems[o],l=0;l<4;++l)for(var u=0;u<4;++u){var c=22*(4*o*4+4*l+u);a[c]=s.coneColor[0]*s.coneIntensity*this.intensity,a[c+1]=s.coneColor[1]*s.coneIntensity*this.intensity,a[c+2]=s.coneColor[2]*s.coneIntensity*this.intensity,a[c+3]=s.coneColor[3]*e.alphaMultiplier,a[c+4]=s.transform[0],a[c+5]=s.transform[4],a[c+6]=s.transform[8],a[c+7]=s.transform[12],a[c+8]=s.transform[1],a[c+9]=s.transform[5],a[c+10]=s.transform[9],a[c+11]=s.transform[13],a[c+12]=s.transform[2],a[c+13]=s.transform[6],a[c+14]=s.transform[10],a[c+15]=s.transform[14],a[c+16]=1,a[c+17]=1,a[c+18]=1,a[c+19]=4*l+n[u],a[c+20]=s.boneIndex,a[c+21]=s.boosterGainInfluence?255:0}this._coneVertexBuffer=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._coneVertexBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,a,i.gl.STATIC_DRAW),this._coneVertexBuffer.count=4*r*6;for(var f=new Float32Array(22*(2*r*4)),d=[1,0,2,3],h=0;h<r;++h)for(var m=this._visibleItems[h],b=0;b<2;++b)for(var p=0;p<4;++p){var v=22*(2*h*4+4*b+p);b%2==0?(f[v]=m.spriteColor[0]*m.spriteIntensity*this.intensity,f[v+1]=m.spriteColor[1]*m.spriteIntensity*this.intensity,f[v+2]=m.spriteColor[2]*m.spriteIntensity*this.intensity,f[v+3]=m.spriteColor[3],f[v+16]=m.spriteScale[0]*this._worldSpriteScale,f[v+17]=1,f[v+18]=1):(f[v]=m.flareColor[0]*m.flareIntensity*this.intensity,f[v+1]=m.flareColor[1]*m.flareIntensity*this.intensity,f[v+2]=m.flareColor[2]*m.flareIntensity*this.intensity,f[v+3]=m.flareColor[3],f[v+16]=1,f[v+17]=m.spriteScale[1]*this._worldSpriteScale,f[v+18]=m.spriteScale[2]*this._worldSpriteScale),f[v+4]=m.transform[0],f[v+5]=m.transform[4],f[v+6]=m.transform[8],f[v+7]=m.transform[12],f[v+8]=m.transform[1],f[v+9]=m.transform[5],f[v+10]=m.transform[9],f[v+11]=m.transform[13],f[v+12]=m.transform[2],f[v+13]=m.transform[6],f[v+14]=m.transform[10],f[v+15]=m.transform[14],f[v+19]=4*b+d[p],f[v+20]=m.boneIndex,f[v+21]=m.boosterGainInfluence?255:0}var g=this._indexOrder;this._spriteVertexBuffer=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,this._spriteVertexBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,f,i.gl.STATIC_DRAW),this._spriteVertexBuffer.count=2*r*6;for(var y=new Uint16Array(4*r*6),w=0;w<4*r;++w){var _=6*w,E=4*w;y[_]=E+g[0],y[_+1]=E+g[1],y[_+2]=E+g[2],y[_+3]=E+g[3],y[_+4]=E+g[4],y[_+5]=E+g[5]}this._indexBuffer=i.gl.createBuffer(),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,y,i.gl.STATIC_DRAW),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=r,super.Rebuild(t)}else super.Rebuild(t)}GetBatches(e,t,r){if(this.display&&e===Q.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count){var i=new re;i.renderMode=Q.device.RM_ADDITIVE,i.spotlightSet=this,i.perObjectData=r,t.Commit(i)}}RenderCones(t){return e.Render(this,this.coneEffect,t,this._coneVertexBuffer)}RenderGlow(t){return e.Render(this,this.glowEffect,t,this._spriteVertexBuffer)}static Render(e,t,r,i){if(!(t&&t.IsGood()&&i&&e._indexBuffer))return!1;var n=Q.device,a=n.gl;n.SetStandardStates(n.RM_ADDITIVE),a.bindBuffer(a.ARRAY_BUFFER,i),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e._indexBuffer);for(var o=0;o<t.GetPassCount(r);++o){if(t.ApplyPass(r,o),!e._decl.SetDeclaration(n,t.GetPassInput(r,o),88))return!1;n.ApplyShadowState(),n.gl.drawElements(a.TRIANGLES,i.count,a.UNSIGNED_SHORT,0)}return!0}static from(t,r){var i=new e;if(t&&(Object(X.assignIfExists)(i,t,["name","display","intensity"]),t.coneEffect&&(Object(X.isFunction)(t.coneEffect)?i.coneEffect=t.coneEffect:i.coneEffect=J.Tw2Effect.from(t.coneEffect)),t.glowEffect&&(Object(X.isFunction)(t.glowEffect)?i.glowEffect=t.glowEffect:i.glowEffect=J.Tw2Effect.from(t.glowEffect)),t.items))for(var n=0;n<t.items.length;n++)i.CreateItem(t.items[n]);return r&&r.skipUpdate||i.Initialize(),i}},Y.alphaMultiplier=1,Y.Item=ie,Y.vertexDeclarations=[{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:3},{usage:"TEXCOORD",usageIndex:4,elements:3}],V=te((U=K).prototype,"name",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=te(U.prototype,"coneEffect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=te(U.prototype,"glowEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=te(U.prototype,"intensity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),te(U.prototype,"spotlightItems",[N],Object.getOwnPropertyDescriptor(U.prototype,"spotlightItems"),U.prototype),k=U))||k)},"./eve/item/EveSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteSetItem",(function(){return ee})),r.d(t,"EveSpriteSet",(function(){return te}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q=r("./global/utils/index.js"),W=r("./global/index.js"),Y=r("./global/math/index.js"),K=r("./core/index.js"),X=r("./eve/item/EveObjectSet.js"),Q=r("./core/mesh/index.js");function Z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function J(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class $ extends K.Tw2RenderBatch{constructor(...e){super(...e),this.boosterGlow=!1,this.spriteSet=null,this.world=null,this.boosterGain=0,this.warpIntensity=0}Commit(e){this.boosterGlow?this.spriteSet.RenderBoosterGlow(e,this.world,this.boosterGain,this.warpIntensity):this.spriteSet.Render(e,this.world,this.perObjectData)}}var ee=(i=q.meta.type("EveSpriteSetItem",!0),n=q.meta.string,a=q.meta.float,o=q.meta.float,s=q.meta.uint,l=q.meta.color,u=q.meta.float,c=q.meta.float,f=q.meta.float,d=q.meta.float,h=q.meta.vector3,m=q.meta.color,b=q.meta.uint,i((O=class extends X.EveObjectSetItem{constructor(...e){super(...e),Z(this,"name",g,this),Z(this,"blinkPhase",y,this),Z(this,"blinkRate",w,this),Z(this,"boneIndex",_,this),Z(this,"color",E,this),Z(this,"falloff",T,this),Z(this,"intensity",S,this),Z(this,"maxScale",j,this),Z(this,"minScale",R,this),Z(this,"position",P,this),Z(this,"warpColor",x,this),Z(this,"groupIndex",z,this)}},g=J((v=O).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=J(v.prototype,"blinkPhase",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=J(v.prototype,"blinkRate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=J(v.prototype,"boneIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=J(v.prototype,"color",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),T=J(v.prototype,"falloff",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=J(v.prototype,"intensity",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=J(v.prototype,"maxScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=J(v.prototype,"minScale",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=J(v.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec3.create()}}),x=J(v.prototype,"warpColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.vec4.create()}}),z=J(v.prototype,"groupIndex",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=v))||p),te=(A=q.meta.type("EveSpriteSet",!0),M=q.meta.string,C=q.meta.struct("Tw2Effect"),D=q.meta.boolean,I=q.meta.boolean,L=q.meta.list("EveSpriteSetItem"),A((H=V=class e extends X.EveObjectSet{constructor(...e){super(...e),Z(this,"name",B,this),Z(this,"effect",N,this),Z(this,"skinned",k,this),Z(this,"useQuads",U,this),this._time=0,this._vertexBuffer=null,this._indexBuffer=null,this._instanceBuffer=null,this._decl=null,this._vdecl=K.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageType:5,elements:1}]),this._worldSpriteScale=1}get sprites(){return this.items}set sprites(e){this.items=e}Initialize(){for(var e=Y.num.randomFloat(0,.2),t=0;t<this.items.length;t++){var{blinkRate:r}=this.items[t];r&&(this.items[t].blinkRate+=e)}this.UseQuads(!!this.useQuads),this.Rebuild()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}UseQuads(t){this.useQuads=t,this._decl=K.Tw2VertexDeclaration.from(t?e.quadVertexDeclarations:e.vertexDeclarations),this._dirty=!0}SetWorldSpriteScale(e){this._worldSpriteScale!==e&&(this._worldSpriteScale=e,this._dirty=!0)}Update(e){this._time+=e,super.Update(e)}Unload(e){var t=W.device.gl;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._instanceBuffer&&(t.deleteBuffer(this._instanceBuffer),this._instanceBuffer=null),super.Unload(e)}Rebuild(e){this.RebuildItems(e),this._dirty=!1;var t=this._visibleItems.length;if(t){var{gl:r}=W.device;if(this.useQuads)return this._vertexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,2,2,3,0]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),void(this._instanceBuffer=r.createBuffer());for(var i=new Float32Array(4*t*13),n=0;n<t;++n){var a=this._visibleItems[n],o=4*n*13;i[o]=0,i[o+13]=1,i[o+26]=2,i[o+39]=3;for(var s=0;s<4;++s){var l=o+13*s;i[l+1]=a.boneIndex,i[l+2]=a.position[0],i[l+3]=a.position[1],i[l+4]=a.position[2],i[l+5]=a.color[0]*a.intensity,i[l+6]=a.color[1]*a.intensity,i[l+7]=a.color[2]*a.intensity,i[l+8]=a.blinkPhase,i[l+9]=a.blinkRate,i[l+10]=a.minScale*this._worldSpriteScale,i[l+11]=a.maxScale*this._worldSpriteScale,i[l+12]=a.falloff}}this._vertexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null);for(var u=new Uint16Array(6*t),c=0;c<t;++c){var f=6*c,d=4*c;u[f]=d,u[f+1]=d+2,u[f+2]=d+1,u[f+3]=d,u[f+4]=d+3,u[f+5]=d+2}this._indexBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,u,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*t,super.Rebuild()}else super.Rebuild(e)}GetBatches(e,t,r,i){if(this.display&&e===W.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){var n=new $;n.world=i,n.renderMode=W.device.RM_ADDITIVE,n.spriteSet=this,n.perObjectData=r,t.Commit(n)}}GetBoosterGlowBatches(e,t,r,i,n,a){if(this.display&&e===W.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){var o=new $;o.boosterGlow=!0,o.world=i,o.boosterGain=n,o.warpIntensity=a,o.renderMode=W.device.RM_ADDITIVE,o.spriteSet=this,o.perObjectData=r,t.Commit(o)}}Render(e,t,r){if(this.useQuads)return this.RenderQuads(e,t,r);if(!(this.display&&this.effect&&this.effect.IsGood()&&this._indexBuffer&&this._vertexBuffer))return!1;var i=W.device,n=i.gl;i.SetStandardStates(i.RM_ADDITIVE),n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var a=0;a<this.effect.GetPassCount(e);++a){if(this.effect.ApplyPass(e,a),!this._decl.SetDeclaration(i,this.effect.GetPassInput(e,a),52))return!1;i.ApplyShadowState(),n.drawElements(n.TRIANGLES,this._indexBuffer.count,n.UNSIGNED_SHORT,0)}return!0}RenderBoosterGlow(e,t,r,i){if(!(this.display&&this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;var n=W.device,a=n.gl,o=X.EveObjectSet.global.vec3_0,s=this._visibleItems.length,l=new Float32Array(17*s);n.SetStandardStates(n.RM_ADDITIVE);for(var u=0,c=0;c<s;++c){var f=this._visibleItems[c];Y.vec3.transformMat4(o,f.position,t),l[u++]=o[0],l[u++]=o[1],l[u++]=o[2],l[u++]=t[8],l[u++]=f.blinkPhase,l[u++]=t[9],l[u++]=f.minScale*this._worldSpriteScale,l[u++]=f.maxScale*this._worldSpriteScale,l[u++]=t[10],l[u++]=f.color[0],l[u++]=f.color[1],l[u++]=f.color[2],l[u++]=r,l[u++]=f.warpColor[0],l[u++]=f.warpColor[1],l[u++]=f.warpColor[2],l[u++]=i}a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer),a.bufferData(a.ARRAY_BUFFER,l,a.DYNAMIC_DRAW);for(var d=0;d<this.effect.GetPassCount(e);++d){this.effect.ApplyPass(e,d);var h=this.effect.GetPassInput(e,d);a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(n,h,4),a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer);var m=this._decl.SetPartialDeclaration(n,h,68,0,1);n.ApplyShadowState(),a.drawArraysInstanced(a.TRIANGLES,0,6,s),this._decl.ResetInstanceDivisors(n,m)}return!0}RenderQuads(e,t,r){if(!(this.display&&this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;var i=W.device,n=i.gl,a=this._visibleItems.length,o=new Float32Array(17*a),s=X.EveObjectSet.global.vec3_0,l=r.vs.Get("JointMat");i.SetStandardStates(i.RM_ADDITIVE);for(var u=0,c=0;c<a;++c){var f=this._visibleItems[c];if(this.skinned){var d=12*f.boneIndex;s[0]=l[d]*f.position[0]+l[d+1]*f.position[1]+l[d+2]*f.position[2]+l[d+3],s[1]=l[d+4]*f.position[0]+l[d+5]*f.position[1]+l[d+6]*f.position[2]+l[d+7],s[2]=l[d+8]*f.position[0]+l[d+9]*f.position[1]+l[d+10]*f.position[2]+l[d+11],Y.vec3.transformMat4(s,s,t)}else Y.vec3.transformMat4(s,f.position,t);o[u++]=s[0],o[u++]=s[1],o[u++]=s[2],o[u++]=1,o[u++]=f.blinkPhase,o[u++]=f.blinkRate,o[u++]=f.minScale*this._worldSpriteScale,o[u++]=f.maxScale*this._worldSpriteScale,o[u++]=f.falloff,o[u++]=f.color[0],o[u++]=f.color[1],o[u++]=f.color[2],o[u++]=1,o[u++]=f.warpColor[0],o[u++]=f.warpColor[1],o[u++]=f.warpColor[2],o[u++]=1}n.bindBuffer(n.ARRAY_BUFFER,this._instanceBuffer),n.bufferData(n.ARRAY_BUFFER,o,n.DYNAMIC_DRAW);for(var h=0;h<this.effect.GetPassCount(e);++h){this.effect.ApplyPass(e,h);var m=this.effect.GetPassInput(e,h);n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(i,m,4),n.bindBuffer(n.ARRAY_BUFFER,this._instanceBuffer);var b=this._decl.SetPartialDeclaration(i,m,68,0,1);i.ApplyShadowState(),n.drawArraysInstanced(n.TRIANGLES,0,6,a),this._decl.ResetInstanceDivisors(i,b)}return!0}static from(t,r){var i=new e;if(t&&(Object(q.assignIfExists)(i,t,["name","intensity","skinned","useQuads"]),t.effect&&(i.effect=Q.Tw2Effect.from(t.effect)),t.items))for(var n=0;n<t.items.length;n++)i.CreateItem(t.items[n]);return r&&r.skipUpdate||i.Initialize(),i}},V.Item=ee,V.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:5,elements:2},{usage:"POSITION",usageIndex:0,elements:3},{usage:"COLOR",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:1},{usage:"TEXCOORD",usageIndex:1,elements:1},{usage:"TEXCOORD",usageIndex:2,elements:1},{usage:"TEXCOORD",usageIndex:3,elements:1},{usage:"TEXCOORD",usageIndex:4,elements:1}],V.quadVertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4}],B=J((G=H).prototype,"name",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=J(G.prototype,"effect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=J(G.prototype,"skinned",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=J(G.prototype,"useQuads",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J(G.prototype,"sprites",[L],Object.getOwnPropertyDescriptor(G.prototype,"sprites"),G.prototype),F=G))||F)},"./eve/item/EveTurretSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretSetItem",(function(){return Xe})),r.d(t,"EveTurretSet",(function(){return Qe}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve,ge,ye,we,_e,Ee,Te,Se,je,Re,Pe,xe,ze,Oe,Ae,Me,Ce,De,Ie,Le,Fe,Ge,Be,Ne=r("./global/utils/index.js"),ke=r("./global/index.js"),Ue=r("./global/math/index.js"),Ve=r("./core/index.js"),He=r("./eve/item/EveObjectSet.js");function qe(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function We(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ye,Ke,Xe=(i=Ne.meta.type("EveTurretSetItem"),n=Ne.meta.string,a=Ne.meta.boolean,o=Ne.meta.boolean,s=Ne.meta.vector3,l=Ne.meta.quaternion,i((p=class extends He.EveObjectSetItem{constructor(...e){super(...e),qe(this,"locatorName",f,this),qe(this,"updateFromLocator",d,this),qe(this,"canFireWhenHidden",h,this),qe(this,"position",m,this),qe(this,"rotation",b,this),this._bone=null,this._localTransform=Ue.mat4.create(),this._localRotation=Ue.quat.create()}Initialize(){this.UpdateValues()}OnValueChanged(){this._dirty=!0,this.UpdateTransforms()}UpdateTransforms(){Ue.mat4.fromRotationTranslation(this._localTransform,this.rotation,this.position),this._bone?(Ue.mat4.multiply(this._localTransform,this._bone.offsetTransform,this._localTransform),Ue.mat4.getRotation(this._localRotation,this._localTransform)):Ue.quat.copy(this._localRotation,this.rotation)}},f=We((c=p).prototype,"locatorName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=We(c.prototype,"updateFromLocator",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=We(c.prototype,"canFireWhenHidden",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=We(c.prototype,"position",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.vec3.create()}}),b=We(c.prototype,"rotation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.quat.create()}}),u=c))||u),Qe=(v=Ne.meta.type("EveTurretSet",!0),g=Ne.meta.stage(1),y=Ne.meta.string,w=Ne.meta.notImplemented,_=Ne.meta.float,E=Ne.meta.vector4,T=Ne.meta.notImplemented,S=Ne.meta.boolean,j=Ne.meta.notImplemented,R=Ne.meta.uint,P=Ne.meta.path,x=Ne.meta.path,z=Ne.meta.notImplemented,O=Ne.meta.float,A=Ne.meta.notImplemented,M=Ne.meta.boolean,C=Ne.meta.string,D=Ne.meta.notImplemented,I=Ne.meta.uint,L=Ne.meta.notImplemented,F=Ne.meta.boolean,G=Ne.meta.notImplemented,B=Ne.meta.float,N=Ne.meta.notImplemented,k=Ne.meta.float,U=Ne.meta.notImplemented,V=Ne.meta.float,H=Ne.meta.notImplemented,q=Ne.meta.float,W=Ne.meta.notImplemented,Y=Ne.meta.float,K=Ne.meta.notImplemented,X=Ne.meta.float,Q=Ne.meta.notImplemented,Z=Ne.meta.float,J=Ne.meta.struct("Tw2Effect"),$=Ne.meta.notImplemented,ee=Ne.meta.boolean,te=Ne.meta.notImplemented,re=Ne.meta.boolean,ie=Ne.meta.notImplemented,ne=Ne.meta.boolean,ae=Ne.meta.struct(),oe=Ne.meta.struct("Tw2GeometryResource"),se=Ne.meta.todo("Make private"),le=Ne.meta.plain,ue=Ne.meta.todo("Update parent class and replace with direct value"),v(ce=g((Be=Ge=class e extends He.EveObjectSet{constructor(...t){super(...t),qe(this,"name",de,this),qe(this,"bottomClipHeight",he,this),qe(this,"boundingSphere",me,this),qe(this,"chooseRandomLocator",be,this),qe(this,"cyclingFireGroupCount",pe,this),qe(this,"firingEffectResPath",ve,this),qe(this,"geometryResPath",ge,this),qe(this,"impactSize",ye,this),qe(this,"laserMissBehaviour",we,this),qe(this,"locatorName",_e,this),qe(this,"maxCyclingFirePos",Ee,this),qe(this,"projectileMissBehaviour",Te,this),qe(this,"sysBoneHeight",Se,this),qe(this,"sysBonePitch01Factor",je,this),qe(this,"sysBonePitch02Factor",Re,this),qe(this,"sysBonePitchFactor",Pe,this),qe(this,"sysBonePitchMax",xe,this),qe(this,"sysBonePitchMin",ze,this),qe(this,"sysBonePitchOffset",Oe,this),qe(this,"turretEffect",Ae,this),qe(this,"updatePitchPose",Me,this),qe(this,"useDynamicBounds",Ce,this),qe(this,"useRandomFiringDelay",De,this),qe(this,"firingEffect",Ie,this),qe(this,"geometryResource",Le,this),qe(this,"visible",Fe,this),this._activeAnimation=new Ve.Tw2AnimationController,this._activeTurret=-1,this._currentCyclingFiresPos=0,this._fireCallback=null,this._fireCallbackPending=!1,this._hasCyclingFiringPos=!1,this._inactiveAnimation=new Ve.Tw2AnimationController,this._locatorDirty=!0,this._parentTransform=Ue.mat4.create(),this._perObjectDataActive=Ve.Tw2PerObjectData.from(e.perObjectData),this._perObjectDataInactive=Ve.Tw2PerObjectData.from(e.perObjectData),this._state=e.State.IDLE,this._targetPosition=Ue.vec3.create(),this._recheckTimeLeft=0}get turrets(){return this.items}set turrets(e){this.items=e}Initialize(){this.turretEffect&&""!==this.geometryResPath&&(this.geometryResource=ke.tw2.GetResource(this.geometryResPath,e=>this.OnResPrepared(e)),this._activeAnimation.SetGeometryResource(this.geometryResource),this._inactiveAnimation.SetGeometryResource(this.geometryResource)),""!==this.firingEffectResPath&&ke.tw2.Fetch(this.firingEffectResPath).then(e=>this.firingEffect=e),this.Rebuild()}InitializeFiringEffect(){if(this.firingEffect&&this.geometryResource&&this.geometryResource.models.length)for(var t=this.geometryResource.models[0],r=0;r<this.firingEffect.GetPerMuzzleEffectCount();++r)this.firingEffect.SetMuzzleBoneID(r,t.FindBoneByName(e.positionBoneSkeletonNames[r]))}GetResources(e=[]){return this.turretEffect&&this.turretEffect.GetResources(e),this.firingEffect&&this.firingEffect.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnTurretFired(e){this._fireCallback=e}SetTargetPosition(e){Ue.vec3.copy(this._targetPosition,e)}GetClosestTurret(){for(var t=-1,r=-2,i=e.global,n=i.vec3_0,a=i.vec4_0,o=i.vec4_1,s=0;s<this.items.length;++s){var l=this.items[s];if(l.display||l.canFireWhenHidden){o[0]=l._localTransform[12],o[1]=l._localTransform[13],o[2]=l._localTransform[14],o[3]=1,Ue.vec4.transformMat4(o,o,this._parentTransform),Ue.vec3.subtract(n,this._targetPosition,o),Ue.vec3.normalize(n,n),Ue.vec4.set(a,0,1,0,0),Ue.vec4.transformMat4(a,a,l._localTransform),Ue.vec4.transformMat4(a,a,this._parentTransform);var u=Ue.vec3.dot(a,n);u>r&&(t=this.items.indexOf(l),r=u)}}return t}EnterStateDeactive(){this._state!==e.State.INACTIVE&&this._state!==e.State.PACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._activeAnimation.PlayAnimation("Pack",!1,()=>{this._state=e.State.INACTIVE,this._activeAnimation.PlayAnimation("Inactive",!0)}),this._inactiveAnimation.PlayAnimation("Pack",!1,()=>{this._state=e.State.INACTIVE,this._inactiveAnimation.PlayAnimation("Inactive",!0)}),this._state=e.State.PACKING):this._state=e.State.INACTIVE,this._activeTurret=-1,this.DoStopFiring())}EnterStateIdle(){this._state!==e.State.IDLE&&this._state!==e.State.UNPACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===e.State.FIRING?(this._activeAnimation.PlayAnimation("Active",!0),this._inactiveAnimation.PlayAnimation("Active",!0)):(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this._state=e.State.IDLE,this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._state=e.State.IDLE,this._inactiveAnimation.PlayAnimation("Active",!0)})),this._state=e.State.UNPACKING):this._state=e.State.IDLE,this._activeTurret=-1,this.DoStopFiring())}EnterStateFiring(){if(!this.turretEffect||this._state===e.State.FIRING)return this.DoStartFiring(),void(this.turretEffect&&this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}));this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===e.State.INACTIVE?(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)})}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._inactiveAnimation.PlayAnimation("Active",!0)}),this._state=e.State.UNPACKING):(this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Active",!0))}OnResPrepared(t){this.geometryResource=t;for(var r=Ve.Tw2VertexElement.from({usage:"TEXCOORD",usageIndex:1,elements:2}),i=this.geometryResource.meshes,n=this._activeAnimation,a=this._inactiveAnimation,o=0;o<i.length;++o)i[o].declaration.elements.push(r),i[o].declaration.RebuildHash();switch(this._state){case e.State.INACTIVE:n.PlayAnimation("Inactive",!0),a.PlayAnimation("Inactive",!0);break;case e.State.IDLE:n.PlayAnimation("Active",!0),a.PlayAnimation("Active",!0);break;case e.State.FIRING:n.PlayAnimation("Fire",!1,()=>n.PlayAnimation("Active",!0)),a.PlayAnimation("Active",!0);break;case e.State.PACKING:this.EnterStateIdle();break;case e.State.UNPACKING:this.EnterStateDeactive()}}FindItemByLocatorName(e){for(var t=0;t<this.items.length;t++)if(this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(t){for(var r=e.global,i=Array.from(this.items),n=r.mat4_0,a=0;a<t.length;a++){var{name:o,transform:s,bone:l=null}=t[a],u=this.FindItemByLocatorName(o);u?i.splice(i.indexOf(u),1):u=this.CreateItem({name:o,locatorName:o,updateFromLocator:!0}),u.updateFromLocator&&(u._bone=l,Ue.mat4.copy(n,s),Ue.vec3.normalize(n.subarray(0,3),n.subarray(0,3)),Ue.vec3.normalize(n.subarray(4,7),n.subarray(4,7)),Ue.vec3.normalize(n.subarray(8,11),n.subarray(8,11)),Ue.mat4.getRotation(u.rotation,n),Ue.mat4.getTranslation(u.position,n),u.UpdateValues())}for(var c=0;c<i.length;c++)i[c].locatorName&&(this.RemoveItem(i[c]),c--);this.RebuildItemsFromLocators(),this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}UpdateViewDependentData(e){Ue.mat4.copy(this._parentTransform,e),this.firingEffect&&this.firingEffect.UpdateViewDependentData(e)}Rebuild(e){this.RebuildItems(e),this._dirty=!1,super.Rebuild(e)}Update(t){if(super.Update(t),this.turretEffect&&(this._activeAnimation.Update(t),this._inactiveAnimation.Update(t)),this.firingEffect&&this._visibleItems.length){if(-1!==this._activeTurret){this.firingEffect.isLoopFiring&&this._state===e.State.FIRING&&(this._recheckTimeLeft-=t,this._recheckTimeLeft<=0&&this.DoStartFiring());var r=this.items[this._activeTurret];if(this._activeAnimation.models.length)for(var i=this._activeAnimation.models[0].bonesByName,n=0;n<this.firingEffect.GetPerMuzzleEffectCount();++n){var a=i[e.positionBoneSkeletonNames[n]].worldTransform,o=this.firingEffect.GetMuzzleTransform(n);Ue.mat4.multiply(o,r._localTransform,a),Ue.mat4.multiply(o,this._parentTransform,o)}else for(var s=0;s<this.firingEffect.GetPerMuzzleEffectCount();++s)Ue.mat4.multiply(this.firingEffect.GetMuzzleTransform(s),this._parentTransform,r._localTransform);if(this._fireCallbackPending){if(this._fireCallback){for(var l=[],u=0;u<this.firingEffect.GetPerMuzzleEffectCount();++u)l.push(this.firingEffect.GetMuzzleTransform(u));this._fireCallback(this,l,r)}this._fireCallbackPending=!1,this.EmitEvent("fired",{turretSet:this,turret:r})}}this.firingEffect.SetEndPosition(this._targetPosition),this.firingEffect.Update(t)}}GetBatches(t,r,i,n){if(this.turretEffect&&this.geometryResource&&this.display&&this._visibleItems.length){if(t===ke.device.RM_OPAQUE&&this.visible.turrets){var a=this._inactiveAnimation.GetBoneMatrices(0);if(0!==a.length){this.UpdatePerObjectData(this._perObjectDataInactive.vs,a),this._perObjectDataInactive.ps=i.ps;var o=new Ve.Tw2ForwardingRenderBatch;if(o.renderMode=t,o.renderActive=!1,o.perObjectData=this._perObjectDataInactive,o.geometryProvider=this,r.Commit(o),this._state===e.State.FIRING){var s=this._activeAnimation.GetBoneMatrices(0);if(0!==s.length){this.UpdatePerObjectData(this._perObjectDataActive.vs,s,!0),this._perObjectDataActive.ps=i.ps;var l=new Ve.Tw2ForwardingRenderBatch;l.renderActive=!0,l.perObjectData=this._perObjectDataActive,l.geometryProvider=this,r.Commit(l)}}}}n&&this.firingEffect&&this.visible.firingEffects&&this.firingEffect.GetBatches(t,r,i)}}GetFiringEffectBatches(e,t,r){this.firingEffect&&this.display&&this._visibleItems.length&&this.visible.firingEffects&&this.firingEffect.GetBatches(e,t,r)}Render(t,r){if(!this.turretEffect||!this.turretEffect.IsGood()||!this._visibleItems.length)return!1;for(var i=0,n=function(e){ke.device.gl.disableVertexAttribArray(e.location),ke.device.gl.vertexAttrib2f(e.location,i,i)},a=0;a<this.geometryResource.meshes.length;++a){var o=this.geometryResource.meshes[a].declaration.FindUsage(Ve.Tw2VertexElement.Type.TEXCOORD,1);o?o.customSetter=n:ke.tw2.Debug({name:"EveTurretSet",message:"Could not find usage TEXCOORD usage 1"})}for(var s=0;i<this.items.length;++i)if(this.items[i].display){var l=this._state===e.State.FIRING&&i===this._activeTurret;t.renderActive===l&&(this.geometryResource.RenderAreas(0,0,1,this.turretEffect,r),s++)}return!!s}UpdatePerObjectData(t,r,i){Ue.mat4.transpose(t.Get("shipMatrix"),this._parentTransform);var n=r.length/12;t.Get("turretSetData")[0]=n,t.Get("baseCutoffData")[0]=this.bottomClipHeight;for(var a=t.Get("turretTranslation"),o=t.Get("turretRotation"),s=t.Get("turretPoseTransAndRot"),l=0;l<this._visibleItems.length;++l){for(var u=this._visibleItems[l],c=0;c<n;++c)s[2*(l*n+c)*4]=r[12*c+3],s[2*(l*n+c)*4+1]=r[12*c+7],s[2*(l*n+c)*4+2]=r[12*c+11],s[2*(l*n+c)*4+3]=1,e.mat3x4toquat(r,c,s,2*(l*n+c)+1);u._bone&&!i&&u.UpdateTransforms(),a[4*l]=u._localTransform[12],a[4*l+1]=u._localTransform[13],a[4*l+2]=u._localTransform[14],a[4*l+3]=1,o[4*l]=u.rotation[0],o[4*l+1]=u.rotation[1],o[4*l+2]=u.rotation[2],o[4*l+3]=u.rotation[3]}}DoStartFiring(){this._hasCyclingFiringPos&&(this._currentCyclingFiresPos=1-this._currentCyclingFiresPos),this.firingEffect&&this.firingEffect.PrepareFiring(0,this._hasCyclingFiringPos?this._currentCyclingFiresPos:-1),this._activeTurret=this.GetClosestTurret(),this._state=e.State.FIRING,this._recheckTimeLeft=2,this._fireCallbackPending=!0}DoStopFiring(){this.firingEffect&&this.firingEffect.StopFiring()}},Ge.Item=Xe,Ge.State={INACTIVE:0,IDLE:1,FIRING:2,PACKING:2,UNPACKING:4},Ge.worldNames=["turretWorld0","turretWorld1","turretWorld2"],Ge.positionBoneSkeletonNames=["Pos_Fire01","Pos_Fire02","Pos_Fire03","Pos_Fire04","Pos_Fire05","Pos_Fire06","Pos_Fire07","Pos_Fire08"],Ge.perObjectData={vs:[["baseCutoffData",4],["turretSetData",4],["shipMatrix",16],["turretTranslation",96],["turretRotation",96],["turretPoseTransAndRot",576]]},Ge.mat3x4toquat=function(e,t,r,i){Ye||(Ye=Ue.mat4.create(),Ke=Ue.quat.create()),t*=12,i*=4,Ye[0]=e[t],Ye[1]=e[t+4],Ye[2]=e[t+8],Ye[3]=0,Ye[4]=e[t+1],Ye[5]=e[t+5],Ye[6]=e[t+9],Ye[7]=0,Ye[8]=e[t+2],Ye[9]=e[t+6],Ye[10]=e[t+10],Ye[11]=0,Ye[12]=e[t+3],Ye[13]=e[t+7],Ye[14]=e[t+11],Ye[15]=1,Ue.mat4.getRotation(Ke,Ye),r[i]=Ke[0],r[i+1]=Ke[1],r[i+2]=Ke[2],r[i+3]=Ke[3]},de=We((fe=Be).prototype,"name",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he=We(fe.prototype,"bottomClipHeight",[w,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),me=We(fe.prototype,"boundingSphere",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ue.vec4.create()}}),be=We(fe.prototype,"chooseRandomLocator",[T,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=We(fe.prototype,"cyclingFireGroupCount",[j,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=We(fe.prototype,"firingEffectResPath",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ge=We(fe.prototype,"geometryResPath",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ye=We(fe.prototype,"impactSize",[z,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),we=We(fe.prototype,"laserMissBehaviour",[A,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=We(fe.prototype,"locatorName",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ee=We(fe.prototype,"maxCyclingFirePos",[D,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Te=We(fe.prototype,"projectileMissBehaviour",[L,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=We(fe.prototype,"sysBoneHeight",[G,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),je=We(fe.prototype,"sysBonePitch01Factor",[N,k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Re=We(fe.prototype,"sysBonePitch02Factor",[U,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pe=We(fe.prototype,"sysBonePitchFactor",[H,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=We(fe.prototype,"sysBonePitchMax",[W,Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ze=We(fe.prototype,"sysBonePitchMin",[K,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oe=We(fe.prototype,"sysBonePitchOffset",[Q,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ae=We(fe.prototype,"turretEffect",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=We(fe.prototype,"updatePitchPose",[$,ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=We(fe.prototype,"useDynamicBounds",[te,re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De=We(fe.prototype,"useRandomFiringDelay",[ie,ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ie=We(fe.prototype,"firingEffect",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=We(fe.prototype,"geometryResource",[oe,se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=We(fe.prototype,"visible",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{turrets:!0,firingEffects:!0}}}),We(fe.prototype,"turrets",[ue],Object.getOwnPropertyDescriptor(fe.prototype,"turrets"),fe.prototype),ce=fe))||ce)||ce)},"./eve/item/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./eve/item/EveBoosterSet.js");r.d(t,"EveBoosterBatch",(function(){return i.EveBoosterBatch})),r.d(t,"EveBoosterSetItem",(function(){return i.EveBoosterSetItem})),r.d(t,"EveBoosterSet",(function(){return i.EveBoosterSet}));var n=r("./eve/item/EveCurveLineSet.js");r.d(t,"EveCurveLineSetItem",(function(){return n.EveCurveLineSetItem})),r.d(t,"EveCurveLineSet",(function(){return n.EveCurveLineSet}));var a=r("./eve/item/EveCustomMask.js");r.d(t,"EveCustomMask",(function(){return a.EveCustomMask}));var o=r("./eve/item/EveLocator2.js");r.d(t,"EveLocator2",(function(){return o.EveLocator2})),r.d(t,"EveLocator",(function(){return o.EveLocator}));var s=r("./eve/item/EveObjectSet.js");r.d(t,"EveObjectSetItem",(function(){return s.EveObjectSetItem})),r.d(t,"EveObjectSet",(function(){return s.EveObjectSet}));var l=r("./eve/item/EvePlaneSet.js");r.d(t,"EvePlaneSetItem",(function(){return l.EvePlaneSetItem})),r.d(t,"EvePlaneSet",(function(){return l.EvePlaneSet}));var u=r("./eve/item/EveSpaceObjectDecal.js");r.d(t,"EveSpaceObjectDecal",(function(){return u.EveSpaceObjectDecal}));var c=r("./eve/item/EveSpotlightSet.js");r.d(t,"EveSpotlightSetItem",(function(){return c.EveSpotlightSetItem})),r.d(t,"EveSpotlightSet",(function(){return c.EveSpotlightSet}));var f=r("./eve/item/EveSpriteSet.js");r.d(t,"EveSpriteSetItem",(function(){return f.EveSpriteSetItem})),r.d(t,"EveSpriteSet",(function(){return f.EveSpriteSet}));var d=r("./eve/item/EveTurretSet.js");r.d(t,"EveTurretSetItem",(function(){return d.EveTurretSetItem})),r.d(t,"EveTurretSet",(function(){return d.EveTurretSet}))},"./eve/object/EveEffectRoot.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z=r("./global/utils/index.js"),O=r("./global/math/index.js"),A=r("./core/index.js"),M=r("./eve/object/EveObject.js"),C=r("./eve/object/EveSpaceObject.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=z.meta.type("EveEffectRoot"),n=z.meta.todo("Implement LOD"),a=z.meta.list("Tw2CurveSet"),o=z.meta.list("EveMeshOverlayEffect"),s=z.meta.float,l=z.meta.vector3,u=z.meta.quaternion,c=z.meta.vector3,f=z.meta.matrix4,d=z.meta.isPrivate,h=z.meta.vector3,m=z.meta.isPrivate,b=z.meta.float,p=z.meta.isPrivate,i(v=n((x=class extends M.EveObject{constructor(...e){super(...e),D(this,"curveSets",y,this),D(this,"effectChildren",w,this),D(this,"duration",_,this),D(this,"scaling",E,this),D(this,"rotation",T,this),D(this,"translation",S,this),D(this,"localTransform",j,this),D(this,"boundingSphereCenter",R,this),D(this,"boundingSphereRadius",P,this),this._worldTransform=O.mat4.create(),this._perObjectData=A.Tw2PerObjectData.from(C.EveSpaceObject.perObjectData),this._boundsDirty=!0,this._boundingSphere=null,this._boundingBox=null}RebuildBounds(e){super.RebuildBounds(e),(e||this._boundsDirty)&&(O.sph3.fromPositionRadius(this._boundingSphere,this.boundingSphereCenter,this.boundingSphereRadius),O.box3.fromSph3(this._boundingBox,this._boundingSphere),this._boundsDirty=!1)}SetChildrenLod(e){for(var t=0;t<this.effectChildren.length;t++)this.effectChildren[t].SetLod&&this.effectChildren[t].SetLod(e)}ResetLod(){this._lod=3;for(var e=0;e<this.children.length;e++)this.children[e].ResetLod&&this.children[e].ResetLod()}UpdateLod(e){this._lod=3;for(var t=0;t<this.children.length;t++)this.children[t].UpdateLod&&this.children[t].UpdateLod(e,this._lod)}SetTransform(e){O.mat4.getRotation(this.rotation,e),O.mat4.getScaling(this.scaling,e),O.mat4.getTranslation(this.translation,e)}GetTransform(e){return O.mat4.copy(e,this.localTransform)}GetWorldTransform(e){return O.mat4.copy(e,this._worldTransform)}GetResources(e=[]){for(var t=0;t<this.effectChildren.length;++t)this.effectChildren[t].GetResources(e);return e}Start(){for(var e=0;e<this.curveSets.length;++e)this.curveSets[e].Play()}Stop(){for(var e=0;e<this.curveSets.length;++e)this.curveSets[e].Stop()}UpdateViewDependentData(e){O.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),e?O.mat4.multiply(this._worldTransform,e,this.localTransform):O.mat4.copy(this._worldTransform,this.localTransform)}Update(e){for(var t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(var r=0;r<this.effectChildren.length;++r)this.effectChildren[r].Update(e,this._worldTransform)}GetBatches(e,t){if(this.display)for(var r=0;r<this.effectChildren.length;++r)this.effectChildren[r].GetBatches(e,t,this._perObjectData)}},y=I((g=x).prototype,"curveSets",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=I(g.prototype,"effectChildren",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=I(g.prototype,"duration",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=I(g.prototype,"scaling",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.fromValues(1,1,1)}}),T=I(g.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.quat.create()}}),S=I(g.prototype,"translation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),j=I(g.prototype,"localTransform",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.mat4.create()}}),R=I(g.prototype,"boundingSphereCenter",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),P=I(g.prototype,"boundingSphereRadius",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=g))||v)||v)},"./eve/object/EveObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObject",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.string,n=p.meta.boolean,a=p.meta.abstract,o=p.meta.abstract,s=p.meta.abstract,l=p.meta.abstract,u=p.meta.abstract,c=p.meta.abstract,b=m=class e extends p.meta.Model{constructor(...e){super(...e),g(this,"name",d,this),g(this,"display",h,this),this._lod=3,this._boundsDirty=!1,this._boundingBox=null,this._boundingSphere=null}SetTransform(e){}GetTransform(e){}GetWorldTransform(e){}RebuildBounds(e){this._boundingSphere&&this._boundingBox||(this._boundsDirty=!0,this._boundingSphere=v.sph3.create(),this._boundingBox=v.box3.create())}GetBoundingBox(e,t){return this.RebuildBounds(t),v.box3.copy(e,this._boundingBox),this._boundsDirty?null:e}GetBoundingSphere(e,t){return this.RebuildBounds(t),v.sph3.copy(e,this._boundingSphere),this._boundsDirty?null:e}GetWorldBoundingBox(t){if(this.GetBoundingBox(t)){var r=this.GetWorldTransform(e.global.mat4_0);return v.box3.transformMat4(t,t,r),t}return null}GetWorldBoundingSphere(t){if(this.GetBoundingSphere(t)){var r=this.GetWorldTransform(e.global.mat4_0);return v.sph3.transformMat4(t,t,r),t}return null}ResetLod(){this._lod=3}UpdateLod(e){this._lod=3}GetResources(e=[]){}Update(e){}GetBatches(e,t){}},m.global={vec3_0:v.vec3.create(),vec3_1:v.vec3.create(),vec3_2:v.vec3.create(),vec3_3:v.vec3.create(),vec3_4:v.vec3.create(),vec3_5:v.vec3.create(),vec3_6:v.vec3.create(),vec3_7:v.vec3.create(),mat4_0:v.mat4.create(),mat4_1:v.mat4.create(),mat4_2:v.mat4.create(),mat4_ID:v.mat4.create(),box3_0:v.box3.create(),sph3_0:v.sph3.create()},d=y((f=b).prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=y(f.prototype,"display",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y(f.prototype,"SetTransform",[a],Object.getOwnPropertyDescriptor(f.prototype,"SetTransform"),f.prototype),y(f.prototype,"GetTransform",[o],Object.getOwnPropertyDescriptor(f.prototype,"GetTransform"),f.prototype),y(f.prototype,"GetWorldTransform",[s],Object.getOwnPropertyDescriptor(f.prototype,"GetWorldTransform"),f.prototype),y(f.prototype,"GetResources",[l],Object.getOwnPropertyDescriptor(f.prototype,"GetResources"),f.prototype),y(f.prototype,"Update",[u],Object.getOwnPropertyDescriptor(f.prototype,"Update"),f.prototype),y(f.prototype,"GetBatches",[c],Object.getOwnPropertyDescriptor(f.prototype,"GetBatches"),f.prototype),f)},"./eve/object/EvePlanet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlanet",(function(){return Q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./global/index.js"),U=r("./global/math/index.js"),V=r("./core/index.js"),H=r("./eve/object/EveTransform.js"),q=r("./eve/object/EveObject.js");function W(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){W(a,i,n,o,s,"next",e)}function s(e){W(a,i,n,o,s,"throw",e)}o(void 0)}))}}function K(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function X(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Q=(i=N.meta.type("EvePlanet"),n=N.meta.struct("EveTransform"),a=N.meta.struct("Tw2Effect"),o=N.meta.struct("Tw2RenderTarget"),s=N.meta.struct("EveTransform"),l=N.meta.uint,u=N.meta.isPrivate,c=N.meta.path,f=N.meta.isPrivate,d=N.meta.path,h=N.meta.isPrivate,m=N.meta.list("EveChild"),b=N.meta.notImplemented,p=N.meta.float,v=N.meta.uint,g=N.meta.uint,y=N.meta.vector3,w=N.meta.vector3,_=N.meta.quaternion,i((B=G=class e extends q.EveObject{constructor(...e){super(...e),K(this,"highDetail",S,this),K(this,"effectHeight",j,this),K(this,"heightMap",R,this),K(this,"zOnlyModel",P,this),K(this,"itemID",x,this),K(this,"heightMapResPath1",z,this),K(this,"heightMapResPath2",O,this),K(this,"effectChildren",A,this),K(this,"radius",M,this),K(this,"minScreenSize",C,this),K(this,"estimatedPixelDiameter",D,this),K(this,"scaling",I,this),K(this,"translation",L,this),K(this,"rotation",F,this),this._worldTransform=U.mat4.create(),this._localTransform=U.mat4.create(),this._pendingLoad=null,this._atmosphere=null,this._planet=null}SetTransform(e){U.mat4.getRotation(this.rotation,e),U.mat4.getScaling(this.scaling,e),U.mat4.getTranslation(this.translation,e);var t=U.mat4.maxScaleOnAxis(e);Math.round(this.radius)!==Math.round(t)&&(this.radius=t,this._boundsDirty=!0)}GetTransform(e){return U.mat4.copy(e,this._localTransform)}GetWorldTransform(e){return U.mat4.copy(e,this._worldTransform)}RebuildBounds(e){super.RebuildBounds(e),(e||this._boundsDirty)&&(U.sph3.fromMat4(this._boundingSphere,this._localTransform),U.box3.fromSph3(this._boundingBox,this._boundingSphere),this._boundsDirty=!1)}Fetch(t={}){var r=this;return Y((function*(){var{name:i="",itemID:n=0,resPath:a="",atmospherePath:o="",heightMap1:s="",heightMap2:l="",radius:u=0}=t;r.name=i,r.itemID=n,r.heightMapResPath1=s,r.heightMapResPath2=l,r.highDetail.children.splice(0),r.radius=u;var c=2*u;U.vec3.set(r.highDetail.scaling,c,c,c);var[f,d,h]=yield k.tw2.FetchAll([e.zOnlyModelPath,a,[o,!0]]);return r._planet=d,r._atmosphere=h,r.zOnlyModel=f,r.highDetail.children[0]=d,h&&(r.highDetail.children[1]=h),r.Rebuild()}))()}Create(e,t=(e=>e)){this.Fetch(e).then(t)}UpdateLod(e){this._lod=e.IsSphereVisible(this.translation,this.radius)?3:0}GetResources(e=[]){return this.highDetail&&this.highDetail.GetResources(e),this.effectHeight&&this.effectHeight.GetResources(e),e}UpdateViewDependentData(e){U.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling),U.mat4.multiply(this._worldTransform,e,this._localTransform),this.highDetail.SetTransform(this._localTransform),this.highDetail.UpdateViewDependentData(e),this.zOnlyModel&&(this.zOnlyModel.translation=this.highDetail.translation,this.zOnlyModel.scaling=this.highDetail.scaling,this.zOnlyModel.UpdateViewDependentData(e))}Update(e){this.display&&this.highDetail.Update(e)}GetBatches(e,t){this.display&&this._lod&&this._planet&&this.highDetail.GetBatches(e,t)}GetZOnlyBatches(e,t){this.display&&this._lod&&this.zOnlyModel&&this.zOnlyModel.GetBatches(e,t)}Rebuild(){var e=this;return Y((function*(){var{effectHeight:t,heightMap:r}=e;function i(e){var t=e.mesh?e.mesh.transparentAreas[0]||e.mesh.opaqueAreas[0]:null;return t?t.effect:null}function n(e,t){var{parameters:r}=t;for(var i in r)r.hasOwnProperty(i)&&(e.parameters[i]=r[i])}e._boundsDirty=!0;var a=i(e.highDetail.children[0]),o="res:/Graphics/Effect/Managed/Space/Planet/EarthlikePlanet.fx";a&&(o=a.effectFilePath,n(t,a));for(var s=0;s<e.highDetail.children[0].children.length;++s){i(e.highDetail.children[0].children[s])&&n(t,a)}t.SetParameters({Random:e.itemID%100,TargetTextureHeight:1048,NormalHeight1:e.heightMapResPath1,NormalHeight2:e.heightMapResPath2});var l="."+Object(N.getPathExtension)(o);return o=o.replace(l,"BlitHeight".concat(l)),t.SetValue(o),e._pendingLoad?e._pendingLoad:e._pendingLoad=k.tw2.Watch(e,e=>console.dir(e)).then(()=>(e.heightMap.Create(2048,1024,!1),e.heightMap.Set(),k.device.SetStandardStates(k.device.RM_FULLSCREEN),k.device.gl.clearColor(0,0,0,0),k.device.gl.clear(k.device.gl.COLOR_BUFFER_BIT),k.device.RenderFullScreenQuad(e.effectHeight),e.heightMap.Unset(),a&&(a.SetTextures({HeightMap:""}),a.parameters.HeightMap.AttachTextureRes(r.texture)),e._pendingLoad=null,e))}))()}},G.zOnlyModelPath="res:/dx9/model/worldObject/planet/planetZOnly.red",S=X((T=B).prototype,"highDetail",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new H.EveTransform}}),j=X(T.prototype,"effectHeight",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V.Tw2Effect}}),R=X(T.prototype,"heightMap",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V.Tw2RenderTarget}}),P=X(T.prototype,"zOnlyModel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=X(T.prototype,"itemID",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=X(T.prototype,"heightMapResPath1",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=X(T.prototype,"heightMapResPath2",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=X(T.prototype,"effectChildren",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=X(T.prototype,"radius",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=X(T.prototype,"minScreenSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=X(T.prototype,"estimatedPixelDiameter",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=X(T.prototype,"scaling",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.vec3.fromValues(1,1,1)}}),L=X(T.prototype,"translation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.vec3.fromValues(1,1,1)}}),F=X(T.prototype,"rotation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.quat.create()}}),E=T))||E)},"./eve/object/EveShip.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js"),m=r("./eve/object/EveSpaceObject.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=h.meta.type("EveShip"),n=h.meta.struct("EveBoosterSet"),a=h.meta.list("EveTurretSet"),o=h.meta.float,i((d=class extends m.EveSpaceObject{constructor(...e){super(...e),b(this,"boosters",u,this),b(this,"turretSets",c,this),b(this,"boosterGain",f,this)}Initialize(){super.Initialize(),this.boosters&&this.RebuildBoosterSet(),this.visible.boosters=!0,this.visible.firingEffect=!0}GetResources(e=[]){super.GetResources(e);for(var t=0;t<this.turretSets.length;t++)this.turretSets[t].GetResources(e);return this.boosters&&this.boosters.GetResources(e),e}RebuildBoosterSet(){this.boosters&&this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster"))}RebuildTurretPositions(){for(var e=0;e<this.turretSets.length;e++)this.RebuildTurretSet(e)}RebuildTurretSet(e){if(Object(h.isNumber)(e)||(e=this.turretSets.indexOf(e)),void 0!==this.turretSets[e]){for(var t=this.turretSets[e],r=t.locatorName,i=this.GetLocatorCount(r),n=[],a=0;a<i;++a){var o=r+String.fromCharCode("a".charCodeAt(0)+a),s=this.FindLocatorByName(o);s&&(s.FindBone(this.animation),n.push(s))}t.UpdateItemsFromLocators(n)}}UpdateViewDependentData(e,t,r){var i=this._worldSpriteScale!==r;super.UpdateViewDependentData(e,t,r),!i&&this.boosters&&this.boosters.SetWorldSpriteScale(this._worldSpriteScale);for(var n=0;n<this.turretSets.length;++n)this.turretSets[n].UpdateViewDependentData(this._worldTransform)}Update(e){super.Update(e),this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.SetWorldSpriteScale(this._worldSpriteScale),this.boosters.Update(e,this._worldTransform));for(var t=0;t<this.turretSets.length;++t)this.turretSets[t]._locatorDirty&&this.RebuildTurretSet(t),this.turretSets[t].Update(e)}GetBatches(e,t){if(this.display&&this._lod>0&&(super.GetBatches(e,t),this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this._perObjectData.ps.Get("Shipdata")[0]=this.boosterGain,this.boosters&&this.visible.boosters&&this.boosters.GetBatches(e,t,this._perObjectData),this.visible.turretSets))if(this._lod>1)for(var r=0;r<this.turretSets.length;++r)this.turretSets[r].GetBatches(e,t,this._perObjectData,this.visible.firingEffects);else if(this.visible.firingEffects)for(var i=0;i<this.turretSets.length;++i)this.turretSets[i].GetFiringEffectBatches(e,t,this._perObjectData)}},u=p((l=d).prototype,"boosters",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=p(l.prototype,"turretSets",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p(l.prototype,"boosterGain",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=l))||s)},"./eve/object/EveShip2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip2",(function(){return ce}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J=r("./global/utils/index.js"),$=r("./global/math/index.js"),ee=r("./eve/object/EveObject.js"),te=r("./core/data/index.js"),re=r("./core/model/index.js"),ie=r("./eve/item/index.js"),ne=r("./eve/effect/index.js"),ae=r("./unsupported/eve/item/EveHazeSet.js"),oe=r("./core/batch/index.js"),se=r("./global/constant/ccpwgl.js");function le(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function ue(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ce=(i=J.meta.type("EveShip2"),n=J.meta.stage(2),a=J.meta.struct("Tw2Animation"),o=J.meta.isPrivate,s=J.meta.list("EveObjectSet"),l=J.meta.struct("EveBoosterSet2"),u=J.meta.vector3,c=J.meta.float,f=J.meta.list("EveObject"),d=J.meta.list("EveCustomMask"),h=J.meta.list("EveSpaceObjectDecal"),m=J.meta.string,b=J.meta.list("EveLocatorSets"),p=J.meta.list("EveLocator2"),v=J.meta.struct("Tw2Mesh","Tw2InstancedMesh","Tr2MeshLod"),g=J.meta.struct("EveCurve"),y=J.meta.struct("Tw2Effect"),w=J.meta.vector3,_=J.meta.vector3,E=J.meta.struct("EveCurve"),T=J.meta.uint,S=J.meta.float,j=J.meta.list("EveChild"),R=J.meta.plain,i(P=n((Z=Q=class e extends ee.EveObject{constructor(...t){super(...t),le(this,"animation",z,this),le(this,"attachments",O,this),le(this,"boosters",A,this),le(this,"boundingSphereCenter",M,this),le(this,"boundingSphereRadius",C,this),le(this,"children",D,this),le(this,"customMasks",I,this),le(this,"decals",L,this),le(this,"dna",F,this),le(this,"locatorSets",G,this),le(this,"locators",B,this),le(this,"mesh",N,this),le(this,"rotationCurve",k,this),le(this,"shadowEffect",U,this),le(this,"shapeEllipsoidCenter",V,this),le(this,"shapeEllipsoidRadius",H,this),le(this,"translationCurve",q,this),le(this,"killCount",W,this),le(this,"boosterGain",Y,this),le(this,"effectChildren",K,this),le(this,"visible",X,this),this._enableCurves=!1,this._pixelSizeAcross=0,this._worldSpriteScale=1,this._localTransform=$.mat4.create(),this._worldTransform=$.mat4.create(),this._perObjectData=te.Tw2PerObjectData.from(e.perObjectData)}Initialize(){this.RebuildBoosterSet()}RebuildBounds(e){if(this.animation&&this.animation.animations.length)throw new Error("Rebuilding bounds on animated meshes not yet supported");if(super.RebuildBounds(e),!this.mesh||!this.mesh.IsGood())return $.box3.empty(this._boundingBox),$.sph3.empty(this._boundingSphere),this._boundsDirty=!0,!1;if(e||this._boundsDirty){$.box3.empty(this._boundingBox),this.mesh.geometryResource.GetBoundingBox(this._boundingBox);var{box3_0:t,sph3_0:r}=ee.EveObject.global,i=(i=[])=>{for(var n=0;n<i.length;n++)"GetBoundingBox"in i[n]?(i[n].GetBoundingBox(t,e),$.box3.union(this._boundingBox,this._boundingBox,t)):"GetBoundingSphere"in i[n]&&(i[n].GetBoundingSphere(r,e),$.box3.fromSph3(t,r),$.box3.union(this._boundingBox,this._boundingBox,t))};i(this.attachments),i(this.effectChildren),i(this.children),$.sph3.fromBox3(this._boundingSphere,this._boundingBox),this._boundsDirty=!1}}FindTurretSetByLocatorName(e){for(var t=0;t<this.attachments.length;t++)if(this.attachments[t]instanceof ie.EveTurretSet&&this.attachments[t].locatorName===e)return this.attachments[t]}FindTurretPrefixes(e=[]){function t(t){if(!t)return!1;var r=t[0].substring(0,t[0].length-1);return e.includes(r)||e.push(r),!0}for(var r=0;r<this.locators.length;r++){var i=this.locators[r].name;t(/^locator_turret_([0-9]+)[a-z]$/i.exec(i))||t(/^locator_xl_([0-9]+)[a-z]$/i.exec(i))}return e.sort(),e}GetLocatorCount(e){return this.FindLocatorsByPrefix(e).length}FindLocatorJointByName(e){var t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}FindLocatorTransformByName(e){var t=this.FindLocatorByName(e);return t?t.transform:null}HasLocatorPrefix(e){for(var t=0;t<this.locators.length;t++)if(0===this.locators[t].name.indexOf(e))return!0;return!1}FindLocatorBoneByName(e){return this.animation?this.animation.FindBoneForMesh(e,0):null}FindLocatorByName(e){for(var t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}FindLocatorsByPrefix(e,t=[]){for(var r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}UpdateLod(e){var t=$.vec3.transformMat4(ee.EveObject.global.vec3_0,this.boundingSphereCenter,this._worldTransform);e.IsSphereVisible(t,this.boundingSphereRadius)?(this._pixelSizeAcross=e.GetPixelSizeAcross(t,this.boundingSphereRadius),this._pixelSizeAcross<se.LodLevelPixels.ONE?this._lod=1:this._pixelSizeAcross<se.LodLevelPixels.TWO?this._lod=2:this._lod=3):(this._pixelSizeAcross=0,this._lod=0);for(var r=0;r<this.children.length;r++)this.children[r].UpdateLod&&this.children[r].UpdateLod(e,this._lod);for(var i=0;i<this.effectChildren.length;i++)this.effectChildren[i].UpdateLod(e,this._lod)}ResetLod(){this._lod=3;for(var e=0;e<this.children.length;e++)this.children[e].ResetLod&&this.children[e].ResetLod();for(var t=0;t<this.effectChildren.length;t++)this.effectChildren[t].ResetLod()}SetTransform(e){$.mat4.copy(this._localTransform,e)}GetTransform(e){return $.mat4.copy(e,this._localTransform)}GetWorldTransform(e){return $.mat4.copy(e,this._worldTransform)}GetResources(e=[]){return this.PerChild(t=>{"GetResources"in t.struct&&t.struct.GetResources(e)}),e}RebuildBoosterSet(){return!!this.boosters&&(this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster")),!0)}GetTurretSetByLocatorName(e){for(var t=0;t<this.attachments.length;t++)if(this.attachments[t]instanceof ie.EveTurretSet&&this.attachments[t].locatorName===e)return this.attachments[t];return null}RemoveTurretSet(e){var t=this.attachments.indexOf(e);return-1!==t&&(this.attachments.splice(t,1),!0)}AddTurretSet(e){if(!e.locatorName)throw new ReferenceError("Turret set must have a locator name");var t=this.GetTurretSetByLocatorName(e.locatorName);return t!==e&&(this.attachments.splice(this.attachments.indexOf(t),1),this.attachments.push(e),this.RebuildTurretSet(e),!0)}RebuildTurretSet(e){for(var t=e.locatorName,r=this.GetLocatorCount(t),i=[],n=0;n<r;++n){var a=t+String.fromCharCode("a".charCodeAt(0)+n),o=this.FindLocatorByName(a);o&&(o.FindBone(this.animation),i.push(o))}return e.UpdateItemsFromLocators(i),!0}RebuildOverlays(e=[]){for(var t=!1,r=0;r<this.attachments.length;r++)this.attachments[r]instanceof ne.EveMeshOverlayEffect&&(t=!0,this.attachments.splice(r,1),r--);for(var i=0;i<e.length;i++)this.attachments.push(e[i]),t=!0;return t}Update(e){if(!(this._lod<1)&&this.display){this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.Update(e,this._worldTransform));for(var t=0;t<this.attachments.length;t++)this.attachments[t]instanceof ie.EveTurretSet&&this.attachments[t]._locatorDirty&&this.RebuildTurretSet(this.attachments[t]),this.attachments[t].Update(e,this);for(var r=0;r<this.children.length;r++)this.children[r].Update(e,this._worldTransform);for(var i=0;i<this.effectChildren.length;i++)this.effectChildren[i].Update(e,this._worldTransform);this.animation&&this.animation.Update(e)}}GetShadowBatch(e,t){if(!this._lod<1||!this.display||!this.visible.shadows)return!1;if(!(this.mesh&&this.mesh.IsGood()&&this.shadowEffect&&this.shadowEffect.IsGood()))return!1;var{geometryResource:r,meshIndex:i}=this.mesh,n=new oe.Tw2GeometryBatch;return n.renderMode=e,n.perObjectData=this._perObjectData,n.geometryRes=r,n.meshIx=i,n.start=0,n.count=r.meshes[i].areas.length,n.effect=this.shadowEffect,t.Commit(n),!0}GetBatches(e,t){if(this.display&&!(this._lod<1)){var r=this.visible,i=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;r.mesh&&i&&this.mesh.GetBatches(e,t,this._perObjectData);var n=r.firingEffect;if(this._lod>1){r.boosters&&this.boosters&&(this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this._perObjectData.ps.Get("Shipdata")[0]=this.boosterGain,this.boosters.GetBatches(e,t,this._perObjectData));for(var a=0;a<this.attachments.length;a++){var o=this.attachments[a];switch(o.constructor){case ie.EveTurretSet:r.turretSets&&(n=!1,o.GetBatches(e,t,this._perObjectData,r.firingEffect));break;case ie.EveSpotlightSet:r.spotlightSets&&o.GetBatches(e,t,this._perObjectData,this._worldTransform);break;case ie.EvePlaneSet:r.planeSets&&o.GetBatches(e,t,this._perObjectData);break;case ie.EveSpriteSet:r.spriteSets&&o.GetBatches(e,t,this._perObjectData,this._worldTransform);break;case ie.EveCurveLineSet:r.lineSets&&o.GetBatches(e,t);break;case ne.EveMeshOverlayEffect:r.overlayEffects&&o.GetBatches(e,t,this._perObjectData,this.mesh);break;case ae.EveHazeSet:r.hazeSets&&o.GetBatches(e,t,this._perObjectData);break;default:console.log("Attachment not supported")}}if(i&&r.decals)for(var s=r.killmarks&&this._lod>2?this.killCount:0,l=0;l<this.decals.length;l++)this.decals[l].GetBatches(e,t,this._perObjectData,i,s)}if(n)for(var u=0;u<this.attachments.length;u++)this.attachments[u]instanceof ie.EveTurretSet&&this.attachments[u].GetFiringEffectBatches(e,t,this._perObjectData);if(r.children)for(var c=0;c<this.children.length;c++)this.children[c].GetBatches(e,t,this._perObjectData);if(r.effectChildren)for(var f=0;f<this.effectChildren.length;f++)this.effectChildren[f].GetBatches(e,t,this._perObjectData)}}UpdateViewDependentData(e,t,r){if($.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),this._enableCurves&&this.rotationCurve||this.translationCurve){var i=ee.EveObject.global.quat_0,n=ee.EveObject.global.vec3_0,a=$.mat4.getScaling(ee.EveObject.global.vec3_0,this._localTransform);this.rotationCurve&&this.rotationCurve.GetValueAt(t,i),this.translationCurve&&this.translationCurve.GetValueAt(t,n),$.mat4.fromRotationTranslationScale(this._localTransform,i,n,a)}e?$.mat4.multiply(this._worldTransform,e,this._localTransform):$.mat4.copy(this._worldTransform,this._localTransform);var o=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;if(o&&this.animation&&(this.animation.HasGeometryResource(o)||this.animation.SetGeometryResource(o),this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(0))),r!==this._worldSpriteScale){this._worldSpriteScale=r,this.boosters&&this.boosters.SetWorldSpriteScale(r);for(var s=0;s<this.attachments.length;s++)"SetWorldSpriteScale"in this.attachments[s]&&this.attachments[s].SetWorldSpriteScale(r)}for(var l=0;l<this.children.length;++l)this.children[l].UpdateViewDependentData(this._worldTransform);$.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform);var u=this._perObjectData.vs.Get("EllipsoidCenter"),c=this._perObjectData.vs.Get("EllipsoidRadii");if(this.shapeEllipsoidRadius[0]>0)u[0]=this.shapeEllipsoidCenter[0],u[1]=this.shapeEllipsoidCenter[1],u[2]=this.shapeEllipsoidCenter[2],c[0]=this.shapeEllipsoidRadius[0],c[1]=this.shapeEllipsoidRadius[1],c[2]=this.shapeEllipsoidRadius[2];else if(o){var{maxBounds:f,minBounds:d}=o;$.vec3.subtract(u,f,d),$.vec3.scale(u,u,.8660254035),$.vec3.add(c,f,d),$.vec3.scale(c,c,.5)}for(var h=$.mat4.identity(ee.EveObject.global.mat4_0),m=0;m<this.customMasks.length;++m)this.customMasks[m].UpdatePerObjectData(h,this._perObjectData,m,this.visible.customMasks);for(var b=0;b<this.attachments.length;b++)"UpdateViewDependentData"in this.attachments[b]&&this.attachments[b].UpdateViewDependentData(this._worldTransform,t,r)}},Q.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["OldEllipsoidRadii",4],["OldEllipsoidCenter",4],["Unknown0",[0,1,0,1]],["Unknown1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",$.mat4.create()],["CustomMaskMatrix1",$.mat4.create()],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4],["Unknown4",4]]},z=ue((x=Z).prototype,"animation",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new re.Tw2AnimationController}}),O=ue(x.prototype,"attachments",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=ue(x.prototype,"boosters",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=ue(x.prototype,"boundingSphereCenter",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec3.create()}}),C=ue(x.prototype,"boundingSphereRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=ue(x.prototype,"children",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=ue(x.prototype,"customMasks",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=ue(x.prototype,"decals",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=ue(x.prototype,"dna",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=ue(x.prototype,"locatorSets",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=ue(x.prototype,"locators",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=ue(x.prototype,"mesh",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=ue(x.prototype,"rotationCurve",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ue(x.prototype,"shadowEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ue(x.prototype,"shapeEllipsoidCenter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec3.create()}}),H=ue(x.prototype,"shapeEllipsoidRadius",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec3.create()}}),q=ue(x.prototype,"translationCurve",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ue(x.prototype,"killCount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=ue(x.prototype,"boosterGain",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),K=ue(x.prototype,"effectChildren",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=ue(x.prototype,"visible",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,hazeSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0,shadows:!0}}}),P=x))||P)||P)},"./eve/object/EveSpaceObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObject",(function(){return se})),r.d(t,"EveStation",(function(){return se}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te=r("./global/utils/index.js"),re=r("./global/math/index.js"),ie=r("./core/index.js"),ne=r("./eve/object/EveObject.js");function ae(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function oe(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var se=(i=te.meta.type("EveSpaceObject"),n=te.meta.struct("Tw2AnimationController"),a=te.meta.isPrivate,o=te.meta.vector3,s=te.meta.isPrivate,l=te.meta.float,u=te.meta.isPrivate,c=te.meta.list("EveObject"),f=te.meta.list("Tw2CurveSet"),d=te.meta.list("EveCustomMask"),h=te.meta.list("EveSpaceObjectDecal"),m=te.meta.list("EveChild"),b=te.meta.float,p=te.meta.list("EveCurveLineSet"),v=te.meta.list("EveLocator"),g=te.meta.struct("Tw2Mesh"),y=te.meta.list("EveMeshOverlayEffect"),w=te.meta.list("EvePlaneSet"),_=te.meta.vector3,E=te.meta.isPrivate,T=te.meta.vector3,S=te.meta.isPrivate,j=te.meta.list("EveSpotlightSet"),R=te.meta.list("EveSpriteSet"),P=te.meta.matrix4,x=te.meta.list("EveTurretSet"),z=te.meta.plain,i((ee=$=class e extends ne.EveObject{constructor(...t){super(...t),ae(this,"animation",M,this),ae(this,"boundingSphereCenter",C,this),ae(this,"boundingSphereRadius",D,this),ae(this,"children",I,this),ae(this,"curveSets",L,this),ae(this,"customMasks",F,this),ae(this,"decals",G,this),ae(this,"effectChildren",B,this),ae(this,"killCount",N,this),ae(this,"lineSets",k,this),ae(this,"locators",U,this),ae(this,"mesh",V,this),ae(this,"overlayEffects",H,this),ae(this,"planeSets",q,this),ae(this,"shapeEllipsoidRadius",W,this),ae(this,"shapeEllipsoidCenter",Y,this),ae(this,"spotlightSets",K,this),ae(this,"spriteSets",X,this),ae(this,"transform",Q,this),ae(this,"turretSets",Z,this),ae(this,"visible",J,this),this._lod=3,this._worldSpriteScale=1,this._worldTransform=re.mat4.create(),this._offsetTransform=null,this._perObjectData=ie.Tw2PerObjectData.from(e.perObjectData)}Initialize(){this.mesh&&this.animation.SetGeometryResource(this.mesh.geometryResource)}RebuildBounds(e){if(this.animation&&this.animation.animations.length)throw new Error("Rebuilding bounds on animated meshes not yet supported");if(super.RebuildBounds(e),!this.mesh||!this.mesh.IsGood())return re.box3.empty(this._boundingBox),re.sph3.empty(this._boundingSphere),this._boundsDirty=!0,!1;if(e||this._boundsDirty){var{box3_0:t,sph3_0:r}=ne.EveObject.global;re.box3.empty(this._boundingBox),this.mesh.geometryResource.GetBoundingBox(this._boundingBox);var i=(i=[])=>{for(var n=0;n<i.length;n++)"GetBoundingBox"in i[n]?(i[n].GetBoundingBox(t,e),re.box3.union(this._boundingBox,this._boundingBox,t)):"GetBoundingSphere"in i[n]&&(i[n].GetBoundingSphere(r,e),re.box3.fromSph3(t,r),re.box3.union(this._boundingBox,this._boundingBox,t))};i(this.spriteSets),i(this.spotlightSets),i(this.planeSets),i(this.children),i(this.effectChildren),i(this.boosters),i(this.turretSets),re.sph3.fromBox3(this._boundingSphere,this._boundingBox),this._boundsDirty=!1}}SetTransform(e,t){t&&(this._offsetTransform?re.mat4.copy(this._offsetTransform,t):this._offsetTransform=re.mat4.clone(t)),this._offsetTransform?re.mat4.multiply(this.transform,e,this._offsetTransform):re.mat4.copy(this.transform,e)}GetTransform(e){return re.mat4.copy(e,this.transform)}GetWorldTransform(e){return re.mat4.copy(e,this._worldTransform)}GetResources(e=[]){this.mesh&&this.mesh.GetResources(e),this.animation&&this.animation.GetResources(e);var t=te.perArrayChild;return t(this.spriteSets,"GetResources",e),t(this.turretSets,"GetResources",e),t(this.decals,"GetResources",e),t(this.spotlightSets,"GetResources",e),t(this.planeSets,"GetResources",e),t(this.lineSets,"GetResources",e),t(this.overlayEffects,"GetResources",e),t(this.effectChildren,"GetResources",e),t(this.children,"GetResources",e),e}ResetLod(){this._lod=3}UpdateLod(e){var t=re.vec3.transformMat4(ne.EveObject.global.vec3_0,this.boundingSphereCenter,this.transform);e.IsSphereVisible(t,this.boundingSphereRadius)?e.GetPixelSizeAcross(t,this.boundingSphereRadius)<100?this._lod=1:this._lod=2:this._lod=0;for(var r=0;r<this.children.length;r++)this.children[r].UpdateLod&&this.children[r].UpdateLod(e,this._lod);for(var i=0;i<this.effectChildren.length;i++)this.effectChildren[i].UpdateLod&&this.effectChildren[i].UpdateLod(e,this._lod)}FindTurretPrefixes(e=[]){function t(t){if(!t)return!1;var r=t[0].substring(0,t[0].length-1);return e.includes(r)||e.push(r),!0}for(var r=0;r<this.locators.length;r++){var i=this.locators[r].name;t(/^locator_turret_([0-9]+)[a-z]$/i.exec(i))||t(/^locator_xl_([0-9]+)[a-z]$/i.exec(i))}return e.sort(),e}GetLocatorCount(e){return this.FindLocatorsByPrefix(e).length}FindLocatorJointByName(e){var t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}FindLocatorTransformByName(e){var t=this.FindLocatorByName(e);return t?t.transform:null}HasLocatorPrefix(e){for(var t=0;t<this.locators.length;t++)if(0===this.locators[t].name.indexOf(e))return!0;return!1}FindLocatorBoneByName(e){return this.animation?this.animation.FindBoneForMesh(e,0):null}FindLocatorByName(e){for(var t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}FindLocatorsByPrefix(e,t=[]){for(var r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}RebuildOverlays(e=[]){if(0===e.length&&0===this.overlayEffects.length)return!1;this.overlayEffects.splice(0);for(var t=0;t<e.length;t++)this.overlayEffects.push(e[t]);return!0}UpdateViewDependentData(e,t,r){re.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform),e?re.mat4.multiply(this._worldTransform,e,this.transform):re.mat4.copy(this._worldTransform,this.transform);var i=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;if(i&&(this.animation.HasGeometryResource(i)||this.animation.SetGeometryResource(i),this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(0))),this._worldSpriteScale!==r){this._worldSpriteScale=r;for(var n=0;n<this.spriteSets.length;n++)this.spriteSets[n].SetWorldSpriteScale(r)}for(var a=0;a<this.children.length;++a)this.children[a].UpdateViewDependentData(this._worldTransform,t,r);re.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform);var o=this._perObjectData.vs.Get("EllipsoidCenter"),s=this._perObjectData.vs.Get("EllipsoidRadii");if(this.shapeEllipsoidRadius[0]>0)o[0]=this.shapeEllipsoidCenter[0],o[1]=this.shapeEllipsoidCenter[1],o[2]=this.shapeEllipsoidCenter[2],s[0]=this.shapeEllipsoidRadius[0],s[1]=this.shapeEllipsoidRadius[1],s[2]=this.shapeEllipsoidRadius[2];else if(i){var{maxBounds:l,minBounds:u}=i;re.vec3.subtract(o,l,u),re.vec3.scale(o,o,.8660254035),re.vec3.add(s,l,u),re.vec3.scale(s,s,.5)}var c=re.mat4.copy(ne.EveObject.global.mat4_0,this._worldTransform);c[12]=0,c[13]=0,c[14]=0;for(var f=0;f<this.customMasks.length;++f)this.customMasks[f].UpdatePerObjectData(c,this._perObjectData,f,this.visible.customMasks);for(var d=0;d<this.lineSets.length;++d)this.lineSets[d].UpdateViewDependentData(this._worldTransform)}Update(e){if(this._lod>0){for(var t=0;t<this.spriteSets.length;++t)this.spriteSets[t].Update(e);for(var r=0;r<this.planeSets.length;r++)this.planeSets[r].Update(e);for(var i=0;i<this.spotlightSets.length;i++)this.spotlightSets[i].Update(e);for(var n=0;n<this.children.length;++n)this.children[n].Update(e);for(var a=0;a<this.effectChildren.length;++a)this.effectChildren[a].Update(e,this._worldTransform,this._lod);for(var o=0;o<this.curveSets.length;++o)this.curveSets[o].Update(e);for(var s=0;s<this.overlayEffects.length;++s)this.overlayEffects[s].Update(e);for(var l=0;l<this.lineSets.length;l++)this.lineSets[l].Update(e);this.animation&&this.animation.Update(e)}}GetBatches(e,t){if(this.display&&!(this._lod<1)){var r=this.visible,i=this.mesh&&this.mesh.IsGood()?this.mesh.geometryResource:null;if(r.mesh&&i&&this.mesh.GetBatches(e,t,this._perObjectData),this._lod>1){if(r.spriteSets)for(var n=0;n<this.spriteSets.length;n++)this.spriteSets[n].GetBatches(e,t,this._perObjectData,this._worldTransform);if(r.spotlightSets)for(var a=0;a<this.spotlightSets.length;a++)this.spotlightSets[a].GetBatches(e,t,this._perObjectData);if(r.planeSets)for(var o=0;o<this.planeSets.length;o++)this.planeSets[o].GetBatches(e,t,this._perObjectData);if(r.lineSets)for(var s=0;s<this.lineSets.length;s++)this.lineSets[s].GetBatches(e,t);if(i){if(r.decals)for(var l=0;l<this.decals.length;l++)this.decals[l].GetBatches(e,t,this._perObjectData,i,r.killmarks?this.killCount:0);if(r.overlayEffects)for(var u=0;u<this.overlayEffects.length;u++)this.overlayEffects[u].GetBatches(e,t,this._perObjectData,this.mesh)}}if(r.children)for(var c=0;c<this.children.length;c++)this.children[c].GetBatches(e,t,this._perObjectData);if(r.effectChildren)for(var f=0;f<this.effectChildren.length;f++)this.effectChildren[f].GetBatches(e,t,this._perObjectData)}}RenderDebugInfo(e){this.animation&&this.animation.RenderDebugInfo(e)}},$.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",re.mat4.identity([])],["CustomMaskMatrix1",re.mat4.identity([])],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4]]},M=oe((A=ee).prototype,"animation",[n,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ie.Tw2AnimationController}}),C=oe(A.prototype,"boundingSphereCenter",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.vec3.create()}}),D=oe(A.prototype,"boundingSphereRadius",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=oe(A.prototype,"children",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=oe(A.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=oe(A.prototype,"customMasks",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=oe(A.prototype,"decals",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=oe(A.prototype,"effectChildren",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=oe(A.prototype,"killCount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=oe(A.prototype,"lineSets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=oe(A.prototype,"locators",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=oe(A.prototype,"mesh",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=oe(A.prototype,"overlayEffects",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=oe(A.prototype,"planeSets",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=oe(A.prototype,"shapeEllipsoidRadius",[_,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.vec3.create()}}),Y=oe(A.prototype,"shapeEllipsoidCenter",[T,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.vec3.create()}}),K=oe(A.prototype,"spotlightSets",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=oe(A.prototype,"spriteSets",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=oe(A.prototype,"transform",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.mat4.create()}}),Z=oe(A.prototype,"turretSets",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=oe(A.prototype,"visible",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0}}}),O=A))||O)},"./eve/object/EveTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTransform",(function(){return ge}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce=r("./global/utils/index.js"),fe=r("./global/index.js"),de=r("./global/math/index.js"),he=r("./core/index.js"),me=r("./eve/object/EveObject.js");function be(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function pe(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ve={NONE:0,BILLBOARD:1,TRANSLATE_WITH_CAMERA:2,LOOK_AT_CAMERA:3,SIMPLE_HALO:4,EVE_CAMERA_ROTATION_ALIGNED:100,EVE_BOOSTER:101,EVE_SIMPLE_HALO:102,EVE_CAMERA_ROTATION:103},ge=(i=ce.meta.type("EveTransform"),n=ce.meta.string,a=ce.meta.list("EveObject"),o=ce.meta.list("Tw2CurveSet"),s=ce.meta.boolean,l=ce.meta.notImplemented,u=ce.meta.float,c=ce.meta.notImplemented,f=ce.meta.float,d=ce.meta.notImplemented,h=ce.meta.boolean,m=ce.meta.struct(["Tw2Mesh","Tr2MeshLOD","Tw2InstancedMesh"]),b=ce.meta.uint,p=ce.meta.enums(ve),v=ce.meta.list("Tr2ObserverLocal"),g=ce.meta.notImplemented,y=ce.meta.vector3,w=ce.meta.notImplemented,_=ce.meta.vector3,E=ce.meta.list("EveParticleEmitter"),T=ce.meta.list("EveParticleSystem"),S=ce.meta.quaternion,j=ce.meta.vector3,R=ce.meta.notImplemented,P=ce.meta.float,x=ce.meta.vector3,z=ce.meta.boolean,O=ce.meta.notImplemented,A=ce.meta.boolean,M=ce.meta.notImplemented,C=ce.meta.boolean,D=ce.meta.notImplemented,I=ce.meta.float,L=ce.meta.plain,i((ue=le=class e extends me.EveObject{constructor(...t){super(...t),be(this,"name",B,this),be(this,"children",N,this),be(this,"curveSets",k,this),be(this,"display",U,this),be(this,"distanceBasedScaleArg1",V,this),be(this,"distanceBasedScaleArg2",H,this),be(this,"hideOnLowQuality",q,this),be(this,"mesh",W,this),be(this,"modifier",Y,this),be(this,"observers",K,this),be(this,"overrideBoundsMax",X,this),be(this,"overrideBoundsMin",Q,this),be(this,"particleEmitters",Z,this),be(this,"particleSystems",J,this),be(this,"rotation",$,this),be(this,"scaling",ee,this),be(this,"sortValueMultiplier",te,this),be(this,"translation",re,this),be(this,"update",ie,this),be(this,"useDistanceBasedScale",ne,this),be(this,"useLodLevel",ae,this),be(this,"visibilityThreshold",oe,this),be(this,"visible",se,this),this._localTransform=de.mat4.create(),this._worldTransform=de.mat4.create(),this._perObjectData=he.Tw2PerObjectData.from(e.perObjectData)}Initialize(){de.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling)}SetTransform(e){de.mat4.getRotation(this.rotation,e),de.mat4.getScaling(this.scaling,e),de.mat4.getTranslation(this.translation,e)}GetResources(e=[]){this.mesh&&this.mesh.GetResources(e);for(var t=0;t<this.children.length;t++)this.children[t].GetResources(e);return e}UpdateViewDependentData(t){var r=fe.device,i=me.EveObject.global,n=i.vec3_0,a=i.vec3_1,o=i.vec3_2,s=r.viewInverse,l=this._localTransform,u=this._worldTransform;switch(t||(t=i.mat4_ID),de.quat.normalize(this.rotation,this.rotation),de.mat4.fromRotationTranslationScale(l,this.rotation,this.translation,this.scaling),de.mat4.getScaling(a,t),this.modifier){case e.Modifier.BILLBOARD:case e.Modifier.SIMPLE_HALO:var c=i.vec3_3;if(de.mat4.multiply(u,t,l),de.vec3.multiply(n,this.scaling,a),this.modifier===e.Modifier.SIMPLE_HALO){de.vec3.subtract(o,r.GetEyePosition(o),u.subarray(12)),de.vec3.normalize(c,u.subarray(8)),de.vec3.normalize(o,o);var f=de.vec3.dot(o,c);f<0&&(f=0),de.vec3.scale(n,n,f*f)}u[0]=s[0]*n[0],u[1]=s[1]*n[0],u[2]=s[2]*n[0],u[4]=s[4]*n[1],u[5]=s[5]*n[1],u[6]=s[6]*n[1],u[8]=s[8]*n[2],u[9]=s[9]*n[2],u[10]=s[10]*n[2];break;case e.Modifier.EVE_CAMERA_ROTATION:var d=i.vec3_3;de.vec3.transformMat4(d,this.translation,t),de.mat4.fromRotationTranslationScale(l,this.rotation,d,this.scaling),de.mat4.multiply(u,s,l),u[12]=l[12],u[13]=l[13],u[14]=l[14];break;case e.Modifier.EVE_CAMERA_ROTATION_ALIGNED:case e.Modifier.EVE_SIMPLE_HALO:var h=i.vec3_3,m=i.vec3_4,b=i.vec3_5,p=i.vec3_6,v=i.vec3_7,g=i.mat4_0,y=i.mat4_1,w=i.mat4_2;if(de.mat4.translate(u,t,this.translation),de.mat4.transpose(g,t),r.GetEyePosition(o),o[0]-=u[12],o[1]-=u[13],o[2]-=u[14],de.vec3.copy(h,o),de.vec3.transformMat4(h,h,g),de.vec3.divide(h,h,a),de.vec3.normalize(h,h),de.vec3.set(m,r.view[0],r.view[4],r.view[8]),de.vec3.transformMat4(m,m,g),de.vec3.normalize(m,m),de.vec3.cross(b,h,m),de.vec3.normalize(b,b),de.vec3.cross(m,b,h),y[0]=m[0],y[1]=m[1],y[2]=m[2],y[4]=b[0],y[5]=b[1],y[6]=b[2],y[8]=h[0],y[9]=h[1],y[10]=h[2],y[15]=1,de.mat4.fromQuat(w,this.rotation),de.mat4.multiply(y,y,w),this.modifier===e.Modifier.EVE_SIMPLE_HALO){de.vec3.normalize(p,u.subarray(8)),de.vec3.normalize(v,o);var _=-de.vec3.dot(v,p);_<0&&(_=0),de.mat4.multiply(u,u,y),de.mat4.scale(u,u,[this.scaling[0]*_,this.scaling[1]*_,this.scaling[2]*_])}else de.mat4.scale(u,u,this.scaling),de.mat4.multiply(u,u,y);break;case e.Modifier.LOOK_AT_CAMERA:var E=i.mat4_0;de.mat4.multiply(u,t,l),de.mat4.lookAt(E,s.subarray(12),u.subarray(12),[0,1,0]),de.mat4.transpose(E,E),de.vec3.multiply(n,this.scaling,a),u[0]=E[0]*n[0],u[1]=E[1]*n[0],u[2]=E[2]*n[0],u[4]=E[4]*n[1],u[5]=E[5]*n[1],u[6]=E[6]*n[1],u[8]=E[8]*n[2],u[9]=E[9]*n[2],u[10]=E[10]*n[2];break;default:de.mat4.multiply(u,t,l)}for(var T=0;T<this.children.length;++T)this.children[T].UpdateViewDependentData(u)}Update(e){for(var t=0;t<this.children.length;++t)this.children[t].Update(e);for(var r=0;r<this.particleEmitters.length;++r)this.particleEmitters[r].Update(e);for(var i=0;i<this.particleSystems.length;++i)this.particleSystems[i].Update(e);for(var n=0;n<this.curveSets.length;++n)this.curveSets[n].Update(e)}GetBatches(e,t,r){if(this.display&&(this.visible.mesh&&this.mesh&&(de.mat4.transpose(this._perObjectData.ffe.Get("World"),this._worldTransform),de.mat4.invert(this._perObjectData.ffe.Get("WorldInverseTranspose"),this._worldTransform),r&&(this._perObjectData.vs=r.vs,this._perObjectData.ps=r.ps),this.mesh.GetBatches(e,t,this._perObjectData)),this.visible.children))for(var i=0;i<this.children.length;++i)this.children[i].GetBatches(e,t,r)}static Multiply3x3(e,t,r){r||(r=t);var i=t[0],n=t[1];return t=t[2],r[0]=e[0]*i+e[4]*n+e[8]*t,r[1]=e[1]*i+e[5]*n+e[9]*t,r[2]=e[2]*i+e[6]*n+e[10]*t,r}},le.perObjectData={ffe:[["World",16],["WorldInverseTranspose",16]]},le.Modifier=ve,B=pe((G=ue).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=pe(G.prototype,"children",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=pe(G.prototype,"curveSets",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=pe(G.prototype,"display",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=pe(G.prototype,"distanceBasedScaleArg1",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),H=pe(G.prototype,"distanceBasedScaleArg2",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.63}}),q=pe(G.prototype,"hideOnLowQuality",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=pe(G.prototype,"mesh",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=pe(G.prototype,"modifier",[b,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ge.Modifier.NONE}}),K=pe(G.prototype,"observers",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=pe(G.prototype,"overrideBoundsMax",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.create()}}),Q=pe(G.prototype,"overrideBoundsMin",[w,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.create()}}),Z=pe(G.prototype,"particleEmitters",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=pe(G.prototype,"particleSystems",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=pe(G.prototype,"rotation",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.quat.create()}}),ee=pe(G.prototype,"scaling",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.fromValues(1,1,1)}}),te=pe(G.prototype,"sortValueMultiplier",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),re=pe(G.prototype,"translation",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.vec3.create()}}),ie=pe(G.prototype,"update",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ne=pe(G.prototype,"useDistanceBasedScale",[O,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ae=pe(G.prototype,"useLodLevel",[M,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oe=pe(G.prototype,"visibilityThreshold",[D,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=pe(G.prototype,"visible",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{mesh:!0,children:!0}}}),F=G))||F)},"./eve/object/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./eve/object/EveTransform.js");r.d(t,"EveTransform",(function(){return i.EveTransform}));var n=r("./eve/object/EveEffectRoot.js");r.d(t,"EveEffectRoot",(function(){return n.EveEffectRoot}));var a=r("./eve/object/EvePlanet.js");r.d(t,"EvePlanet",(function(){return a.EvePlanet}));var o=r("./eve/object/EveShip.js");r.d(t,"EveShip",(function(){return o.EveShip}));var s=r("./eve/object/EveShip2.js");r.d(t,"EveShip2",(function(){return s.EveShip2}));var l=r("./eve/object/EveSpaceObject.js");r.d(t,"EveSpaceObject",(function(){return l.EveSpaceObject})),r.d(t,"EveStation",(function(){return l.EveStation}))},"./global/constant/ccpwgl.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DeviceTextureQuality",(function(){return i})),r.d(t,"DeviceShaderQuality",(function(){return n})),r.d(t,"SceneLodSettings",(function(){return a})),r.d(t,"LodLevelPixels",(function(){return o}));var i={HIGH:0,MEDIUM:1,LOW:2},n={HIGH:"hi",LOW:"lo"},a={LOD_DISABLED:0,LOD_ENABLED:1},o={ONE:100,TWO:250}},"./global/constant/d3d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"RM_ANY",(function(){return n})),r.d(t,"RM_OPAQUE",(function(){return a})),r.d(t,"RM_DECAL",(function(){return o})),r.d(t,"RM_TRANSPARENT",(function(){return s})),r.d(t,"RM_ADDITIVE",(function(){return l})),r.d(t,"RM_DEPTH",(function(){return u})),r.d(t,"RM_FULLSCREEN",(function(){return c})),r.d(t,"RM_PICKABLE",(function(){return f})),r.d(t,"RM_DISTORTION",(function(){return d})),r.d(t,"RS_ZENABLE",(function(){return h})),r.d(t,"RS_FILLMODE",(function(){return m})),r.d(t,"RS_SHADEMODE",(function(){return b})),r.d(t,"RS_ZWRITEENABLE",(function(){return p})),r.d(t,"RS_ALPHATESTENABLE",(function(){return v})),r.d(t,"RS_LASTPIXEL",(function(){return g})),r.d(t,"RS_SRCBLEND",(function(){return y})),r.d(t,"RS_DESTBLEND",(function(){return w})),r.d(t,"RS_CULLMODE",(function(){return _})),r.d(t,"RS_ZFUNC",(function(){return E})),r.d(t,"RS_ALPHAREF",(function(){return T})),r.d(t,"RS_ALPHAFUNC",(function(){return S})),r.d(t,"RS_DITHERENABLE",(function(){return j})),r.d(t,"RS_ALPHABLENDENABLE",(function(){return R})),r.d(t,"RS_FOGENABLE",(function(){return P})),r.d(t,"RS_SPECULARENABLE",(function(){return x})),r.d(t,"RS_FOGCOLOR",(function(){return z})),r.d(t,"RS_FOGTABLEMODE",(function(){return O})),r.d(t,"RS_FOGSTART",(function(){return A})),r.d(t,"RS_FOGEND",(function(){return M})),r.d(t,"RS_FOGDENSITY",(function(){return C})),r.d(t,"RS_RANGEFOGENABLE",(function(){return D})),r.d(t,"RS_STENCILENABLE",(function(){return I})),r.d(t,"RS_STENCILFAIL",(function(){return L})),r.d(t,"RS_STENCILZFAIL",(function(){return F})),r.d(t,"RS_STENCILPASS",(function(){return G})),r.d(t,"RS_STENCILFUNC",(function(){return B})),r.d(t,"RS_STENCILREF",(function(){return N})),r.d(t,"RS_STENCILMASK",(function(){return k})),r.d(t,"RS_STENCILWRITEMASK",(function(){return U})),r.d(t,"RS_TEXTUREFACTOR",(function(){return V})),r.d(t,"RS_WRAP0",(function(){return H})),r.d(t,"RS_WRAP1",(function(){return q})),r.d(t,"RS_WRAP2",(function(){return W})),r.d(t,"RS_WRAP3",(function(){return Y})),r.d(t,"RS_WRAP4",(function(){return K})),r.d(t,"RS_WRAP5",(function(){return X})),r.d(t,"RS_WRAP6",(function(){return Q})),r.d(t,"RS_WRAP7",(function(){return Z})),r.d(t,"RS_CLIPPING",(function(){return J})),r.d(t,"RS_LIGHTING",(function(){return $})),r.d(t,"RS_AMBIENT",(function(){return ee})),r.d(t,"RS_FOGVERTEXMODE",(function(){return te})),r.d(t,"RS_COLORVERTEX",(function(){return re})),r.d(t,"RS_LOCALVIEWER",(function(){return ie})),r.d(t,"RS_NORMALIZENORMALS",(function(){return ne})),r.d(t,"RS_DIFFUSEMATERIALSOURCE",(function(){return ae})),r.d(t,"RS_SPECULARMATERIALSOURCE",(function(){return oe})),r.d(t,"RS_AMBIENTMATERIALSOURCE",(function(){return se})),r.d(t,"RS_EMISSIVEMATERIALSOURCE",(function(){return le})),r.d(t,"RS_VERTEXBLEND",(function(){return ue})),r.d(t,"RS_CLIPPLANEENABLE",(function(){return ce})),r.d(t,"RS_POINTSIZE",(function(){return fe})),r.d(t,"RS_POINTSIZE_MIN",(function(){return de})),r.d(t,"RS_POINTSPRITEENABLE",(function(){return he})),r.d(t,"RS_POINTSCALEENABLE",(function(){return me})),r.d(t,"RS_POINTSCALE_A",(function(){return be})),r.d(t,"RS_POINTSCALE_B",(function(){return pe})),r.d(t,"RS_POINTSCALE_C",(function(){return ve})),r.d(t,"RS_MULTISAMPLEANTIALIAS",(function(){return ge})),r.d(t,"RS_MULTISAMPLEMASK",(function(){return ye})),r.d(t,"RS_PATCHEDGESTYLE",(function(){return we})),r.d(t,"RS_DEBUGMONITORTOKEN",(function(){return _e})),r.d(t,"RS_POINTSIZE_MAX",(function(){return Ee})),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",(function(){return Te})),r.d(t,"RS_COLORWRITEENABLE",(function(){return Se})),r.d(t,"RS_TWEENFACTOR",(function(){return je})),r.d(t,"RS_BLENDOP",(function(){return Re})),r.d(t,"RS_POSITIONDEGREE",(function(){return Pe})),r.d(t,"RS_NORMALDEGREE",(function(){return xe})),r.d(t,"RS_SCISSORTESTENABLE",(function(){return ze})),r.d(t,"RS_SLOPESCALEDEPTHBIAS",(function(){return Oe})),r.d(t,"RS_ANTIALIASEDLINEENABLE",(function(){return Ae})),r.d(t,"RS_TWOSIDEDSTENCILMODE",(function(){return Me})),r.d(t,"RS_CCW_STENCILFAIL",(function(){return Ce})),r.d(t,"RS_CCW_STENCILZFAIL",(function(){return De})),r.d(t,"RS_CCW_STENCILPASS",(function(){return Ie})),r.d(t,"RS_CCW_STENCILFUNC",(function(){return Le})),r.d(t,"RS_COLORWRITEENABLE1",(function(){return Fe})),r.d(t,"RS_COLORWRITEENABLE2",(function(){return Ge})),r.d(t,"RS_COLORWRITEENABLE3",(function(){return Be})),r.d(t,"RS_BLENDFACTOR",(function(){return Ne})),r.d(t,"RS_SRGBWRITEENABLE",(function(){return ke})),r.d(t,"RS_DEPTHBIAS",(function(){return Ue})),r.d(t,"RS_SEPARATEALPHABLENDENABLE",(function(){return Ve})),r.d(t,"RS_SRCBLENDALPHA",(function(){return He})),r.d(t,"RS_DESTBLENDALPHA",(function(){return qe})),r.d(t,"RS_BLENDOPALPHA",(function(){return We})),r.d(t,"CULL_NONE",(function(){return Ye})),r.d(t,"CULL_CW",(function(){return Ke})),r.d(t,"CULL_CCW",(function(){return Xe})),r.d(t,"CMP_NEVER",(function(){return Qe})),r.d(t,"CMP_LESS",(function(){return Ze})),r.d(t,"CMP_EQUAL",(function(){return Je})),r.d(t,"CMP_LEQUAL",(function(){return $e})),r.d(t,"CMP_GREATER",(function(){return et})),r.d(t,"CMP_NOTEQUAL",(function(){return tt})),r.d(t,"CMP_GREATEREQUAL",(function(){return rt})),r.d(t,"CMP_ALWAYS",(function(){return it})),r.d(t,"BLEND_ZERO",(function(){return nt})),r.d(t,"BLEND_ONE",(function(){return at})),r.d(t,"BLEND_SRCCOLOR",(function(){return ot})),r.d(t,"BLEND_INVSRCCOLOR",(function(){return st})),r.d(t,"BLEND_SRCALPHA",(function(){return lt})),r.d(t,"BLEND_INVSRCALPHA",(function(){return ut})),r.d(t,"BLEND_DESTALPHA",(function(){return ct})),r.d(t,"BLEND_INVDESTALPHA",(function(){return ft})),r.d(t,"BLEND_DESTCOLOR",(function(){return dt})),r.d(t,"BLEND_INVDESTCOLOR",(function(){return ht})),r.d(t,"BLEND_SRCALPHASAT",(function(){return mt})),r.d(t,"BLEND_BOTHSRCALPHA",(function(){return bt})),r.d(t,"BLEND_BOTHINVSRCALPHA",(function(){return pt})),r.d(t,"BLEND_BLENDFACTOR",(function(){return vt})),r.d(t,"BLEND_INVBLENDFACTOR",(function(){return gt})),r.d(t,"BLENDOP_ADD",(function(){return yt})),r.d(t,"BLENDOP_SUBTRACT",(function(){return wt})),r.d(t,"BLENDOP_REVSUBTRACT",(function(){return _t})),r.d(t,"BLENDOP_MIN",(function(){return Et})),r.d(t,"BLENDOP_MAX",(function(){return Tt})),r.d(t,"BlendTable",(function(){return St})),r.d(t,"WrapMode",(function(){return jt})),r.d(t,"FilterMode",(function(){return Rt})),r.d(t,"MipFilterMode",(function(){return Pt})),r.d(t,"TEX_2D",(function(){return xt})),r.d(t,"TEX_VOLUME",(function(){return zt})),r.d(t,"TEX_CUBE_MAP",(function(){return Ot})),r.d(t,"TEX_SHADOW_MAP",(function(){return At})),r.d(t,"TexTypeToGLTexture",(function(){return Mt})),r.d(t,"TexTypeToString",(function(){return Ct}));var i=r("./global/constant/gl.js"),n=-1,a=0,o=1,s=2,l=3,u=4,c=5,f=6,d=7,h=7,m=8,b=9,p=14,v=15,g=16,y=19,w=20,_=22,E=23,T=24,S=25,j=26,R=27,P=28,x=29,z=34,O=35,A=36,M=37,C=38,D=48,I=52,L=53,F=54,G=55,B=56,N=57,k=58,U=59,V=60,H=128,q=129,W=130,Y=131,K=132,X=133,Q=134,Z=135,J=136,$=137,ee=139,te=140,re=141,ie=142,ne=143,ae=145,oe=146,se=147,le=148,ue=151,ce=152,fe=154,de=155,he=156,me=157,be=158,pe=159,ve=160,ge=161,ye=162,we=163,_e=165,Ee=166,Te=167,Se=168,je=170,Re=171,Pe=172,xe=173,ze=174,Oe=175,Ae=176,Me=185,Ce=186,De=187,Ie=188,Le=189,Fe=190,Ge=191,Be=192,Ne=193,ke=194,Ue=195,Ve=206,He=207,qe=208,We=209,Ye=1,Ke=2,Xe=3,Qe=1,Ze=2,Je=3,$e=4,et=5,tt=6,rt=7,it=8,nt=1,at=2,ot=3,st=4,lt=5,ut=6,ct=7,ft=8,dt=9,ht=10,mt=11,bt=12,pt=13,vt=14,gt=15,yt=1,wt=2,_t=3,Et=4,Tt=5,St=[-1,i.GL_ZERO,i.GL_ONE,i.GL_SRC_COLOR,i.GL_ONE_MINUS_SRC_COLOR,i.GL_SRC_ALPHA,i.GL_ONE_MINUS_SRC_ALPHA,i.GL_DST_ALPHA,i.GL_ONE_MINUS_DST_ALPHA,i.GL_DST_COLOR,i.GL_ONE_MINUS_DST_COLOR,i.GL_SRC_ALPHA_SATURATE,-1,-1,i.GL_CONSTANT_COLOR,i.GL_ONE_MINUS_CONSTANT_COLOR],jt={REPEAT:1,MIRRORED_REPEAT:2,CLAMP_TO_EDGE:3,CLAMP_TO_BORDER:4},Rt={NEAREST:1,LINEAR:2,LINEAR_ANISOTROPY:3},Pt={NONE:0,NEAREST:1,LINEAR:2,LINEAR_ANISOTROPY:3},xt=2,zt=3,Ot=4,At=5,Mt={[xt]:i.GL_TEXTURE_2D,[zt]:i.GL_TEXTURE_2D,[Ot]:i.GL_TEXTURE_CUBE_MAP,[At]:i.GL_TEXTURE_2D},Ct={[xt]:"2D",[zt]:"VOLUME",[Ot]:"CUBE_MAP",[At]:"SHADOW_MAP"}},"./global/constant/dds.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DDS_MAGIC",(function(){return i})),r.d(t,"DDSD_CAPS",(function(){return n})),r.d(t,"DDSD_HEIGHT",(function(){return a})),r.d(t,"DDSD_WIDTH",(function(){return o})),r.d(t,"DDSD_PITCH",(function(){return s})),r.d(t,"DDSD_PIXELFORMAT",(function(){return l})),r.d(t,"DDSD_MIPMAPCOUNT",(function(){return u})),r.d(t,"DDSD_LINEARSIZE",(function(){return c})),r.d(t,"DDSD_DEPTH",(function(){return f})),r.d(t,"DDSCAPS_COMPLEX",(function(){return d})),r.d(t,"DDSCAPS_MIPMAP",(function(){return h})),r.d(t,"DDSCAPS_TEXTURE",(function(){return m})),r.d(t,"DDSCAPS2_CUBEMAP",(function(){return b})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",(function(){return p})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",(function(){return v})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",(function(){return g})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",(function(){return y})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",(function(){return w})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",(function(){return _})),r.d(t,"DDSCAPS2_VOLUME",(function(){return E})),r.d(t,"DDPF_ALPHAPIXELS",(function(){return T})),r.d(t,"DDPF_ALPHA",(function(){return S})),r.d(t,"DDPF_FOURCC",(function(){return j})),r.d(t,"DDPF_RGB",(function(){return R})),r.d(t,"DDPF_YUV",(function(){return P})),r.d(t,"DDPF_LUMINANCE",(function(){return x})),r.d(t,"DDS_HEADER_LENGTH_INT",(function(){return z})),r.d(t,"DDS_HEADER_OFFSET_MAGIC",(function(){return O})),r.d(t,"DDS_HEADER_OFFSET_SIZE",(function(){return A})),r.d(t,"DDS_HEADER_OFFSET_FLAGS",(function(){return M})),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",(function(){return C})),r.d(t,"DDS_HEADER_OFFSET_WIDTH",(function(){return D})),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",(function(){return I})),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",(function(){return L})),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",(function(){return F})),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",(function(){return G})),r.d(t,"DDS_HEADER_OFFSET_R_MASK",(function(){return B})),r.d(t,"DDS_HEADER_OFFSET_G_MASK",(function(){return N})),r.d(t,"DDS_HEADER_OFFSET_B_MASK",(function(){return k})),r.d(t,"DDS_HEADER_OFFSET_A_MASK",(function(){return U})),r.d(t,"DDS_HEADER_OFFSET_CAPS1",(function(){return V})),r.d(t,"DDS_HEADER_OFFSET_CAPS2",(function(){return H})),r.d(t,"DDS_HEADER_OFFSET_CAPS3",(function(){return q})),r.d(t,"DDS_HEADER_OFFSET_CAPS4",(function(){return W})),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",(function(){return Y})),r.d(t,"FOURCC_ATI1",(function(){return K})),r.d(t,"FOURCC_ATI2",(function(){return X})),r.d(t,"FOURCC_ETC1",(function(){return Q})),r.d(t,"FOURCC_DXT1",(function(){return Z})),r.d(t,"FOURCC_DXT5",(function(){return J})),r.d(t,"FOURCC_DXT3",(function(){return $})),r.d(t,"FOURCC_DXT10",(function(){return ee})),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",(function(){return te})),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",(function(){return re})),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",(function(){return ie})),r.d(t,"DXGI_FORMAT_R32G32B32A32_FLOAT",(function(){return ne})),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",(function(){return ae}));var i=542327876,n=1,a=2,o=4,s=8,l=4096,u=131072,c=524288,f=8388608,d=8,h=4194304,m=4096,b=512,p=1024,v=2048,g=4096,y=8192,w=16384,_=32768,E=2097152,T=1,S=2,j=4,R=64,P=512,x=131072,z=31,O=0,A=1,M=2,C=3,D=4,I=7,L=20,F=21,G=22,B=23,N=24,k=25,U=26,V=27,H=28,q=29,W=30,Y=32,K=826889281,X=843666497,Q=826496069,Z=827611204,J=894720068,$=861165636,ee=827611204,te=113,re=116,ie=10,ne=2,ae=88},"./global/constant/gl.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GL_COLOR_BUFFER_BIT",(function(){return i})),r.d(t,"GL_DEPTH_BUFFER_BIT",(function(){return n})),r.d(t,"GL_STENCIL_BUFFER_BIT",(function(){return a})),r.d(t,"GL_TEXTURE_2D",(function(){return o})),r.d(t,"GL_TEXTURE_CUBE_MAP",(function(){return s})),r.d(t,"GL_TEXTURE_3D",(function(){return l})),r.d(t,"GL_TEXTURE_MAG_FILTER",(function(){return u})),r.d(t,"GL_TEXTURE_MIN_FILTER",(function(){return c})),r.d(t,"GL_TEXTURE_WRAP_S",(function(){return f})),r.d(t,"GL_TEXTURE_WRAP_T",(function(){return d})),r.d(t,"GL_BYTE",(function(){return h})),r.d(t,"GL_UNSIGNED_BYTE",(function(){return m})),r.d(t,"GL_SHORT",(function(){return b})),r.d(t,"GL_UNSIGNED_SHORT",(function(){return p})),r.d(t,"GL_INT",(function(){return v})),r.d(t,"GL_UNSIGNED_INT",(function(){return g})),r.d(t,"GL_FLOAT",(function(){return y})),r.d(t,"GL_HALF_FLOAT_OES",(function(){return w})),r.d(t,"GL_HALF_FLOAT",(function(){return _})),r.d(t,"GL_DEPTH_COMPONENT16",(function(){return E})),r.d(t,"GL_DEPTH_COMPONENT24",(function(){return T})),r.d(t,"GL_DEPTH_COMPONENT32F",(function(){return S})),r.d(t,"GL_FLOAT_VEC2",(function(){return j})),r.d(t,"GL_FLOAT_VEC3",(function(){return R})),r.d(t,"GL_FLOAT_VEC4",(function(){return P})),r.d(t,"GL_INT_VEC2",(function(){return x})),r.d(t,"GL_INT_VEC3",(function(){return z})),r.d(t,"GL_INT_VEC4",(function(){return O})),r.d(t,"GL_BOOL",(function(){return A})),r.d(t,"GL_BOOL_VEC2",(function(){return M})),r.d(t,"GL_BOOL_VEC3",(function(){return C})),r.d(t,"GL_BOOL_VEC4",(function(){return D})),r.d(t,"GL_FLOAT_MAT2",(function(){return I})),r.d(t,"GL_FLOAT_MAT3",(function(){return L})),r.d(t,"GL_FLOAT_MAT4",(function(){return F})),r.d(t,"GL_TYPE_LENGTH",(function(){return G})),r.d(t,"GL_SAMPLER_2D",(function(){return B})),r.d(t,"GL_SAMPLER_3D",(function(){return N})),r.d(t,"GL_SAMPLER_CUBE",(function(){return k})),r.d(t,"GL_DEPTH_COMPONENT",(function(){return U})),r.d(t,"GL_ALPHA",(function(){return V})),r.d(t,"GL_RGB",(function(){return H})),r.d(t,"GL_RGBA",(function(){return q})),r.d(t,"GL_LUMINANCE",(function(){return W})),r.d(t,"GL_LUMINANCE_ALPHA",(function(){return Y})),r.d(t,"GL_DEPTH_STENCIL",(function(){return K})),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",(function(){return X})),r.d(t,"GL_R8",(function(){return Q})),r.d(t,"GL_R16F",(function(){return Z})),r.d(t,"GL_R32F",(function(){return J})),r.d(t,"GL_R8UI",(function(){return $})),r.d(t,"GL_RG8",(function(){return ee})),r.d(t,"GL_RG16F",(function(){return te})),r.d(t,"GL_RG32F",(function(){return re})),r.d(t,"GL_RGB8",(function(){return ie})),r.d(t,"GL_SRGB8",(function(){return ne})),r.d(t,"GL_RGB565",(function(){return ae})),r.d(t,"GL_R11F_G11F_B10F",(function(){return oe})),r.d(t,"GL_RGB9_E5",(function(){return se})),r.d(t,"GL_RGB16F",(function(){return le})),r.d(t,"GL_RGB32F",(function(){return ue})),r.d(t,"GL_RGB8UI",(function(){return ce})),r.d(t,"GL_RGBA8",(function(){return fe})),r.d(t,"GL_RGB5_A1",(function(){return de})),r.d(t,"GL_RGBA16F",(function(){return he})),r.d(t,"GL_RGBA32F",(function(){return me})),r.d(t,"GL_RGBA8UI",(function(){return be})),r.d(t,"GL_RGBA16I",(function(){return pe})),r.d(t,"GL_RGBA16UI",(function(){return ve})),r.d(t,"GL_RGBA32I",(function(){return ge})),r.d(t,"GL_RGBA32UI",(function(){return ye})),r.d(t,"GL_NEAREST",(function(){return we})),r.d(t,"GL_LINEAR",(function(){return _e})),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",(function(){return Ee})),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",(function(){return Te})),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",(function(){return Se})),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",(function(){return je})),r.d(t,"GL_REPEAT",(function(){return Re})),r.d(t,"GL_CLAMP_TO_EDGE",(function(){return Pe})),r.d(t,"GL_MIRRORED_REPEAT",(function(){return xe})),r.d(t,"GL_ZERO",(function(){return ze})),r.d(t,"GL_ONE",(function(){return Oe})),r.d(t,"GL_SRC_COLOR",(function(){return Ae})),r.d(t,"GL_ONE_MINUS_SRC_COLOR",(function(){return Me})),r.d(t,"GL_SRC_ALPHA",(function(){return Ce})),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",(function(){return De})),r.d(t,"GL_DST_ALPHA",(function(){return Ie})),r.d(t,"GL_ONE_MINUS_DST_ALPHA",(function(){return Le})),r.d(t,"GL_DST_COLOR",(function(){return Fe})),r.d(t,"GL_ONE_MINUS_DST_COLOR",(function(){return Ge})),r.d(t,"GL_SRC_ALPHA_SATURATE",(function(){return Be})),r.d(t,"GL_CONSTANT_COLOR",(function(){return Ne})),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",(function(){return ke})),r.d(t,"GL_CONSTANT_ALPHA",(function(){return Ue})),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",(function(){return Ve})),r.d(t,"GL_VERTEX_SHADER",(function(){return He})),r.d(t,"GL_FRAGMENT_SHADER",(function(){return qe})),r.d(t,"GL_FRONT",(function(){return We})),r.d(t,"GL_BACK",(function(){return Ye})),r.d(t,"GL_FRONT_AND_BACK",(function(){return Ke})),r.d(t,"GL_NEVER",(function(){return Xe})),r.d(t,"GL_LESS",(function(){return Qe})),r.d(t,"GL_EQUAL",(function(){return Ze})),r.d(t,"GL_LEQUAL",(function(){return Je})),r.d(t,"GL_GREATER",(function(){return $e})),r.d(t,"GL_NOTEQUAL",(function(){return et})),r.d(t,"GL_GEQUAL",(function(){return tt})),r.d(t,"GL_ALWAYS",(function(){return rt})),r.d(t,"GL_KEEP",(function(){return it})),r.d(t,"GL_REPLACE",(function(){return nt})),r.d(t,"GL_INCR",(function(){return at})),r.d(t,"GL_DECR",(function(){return ot})),r.d(t,"GL_INCR_WRAP",(function(){return st})),r.d(t,"GL_DECR_WRAP",(function(){return lt})),r.d(t,"GL_INVERT",(function(){return ut})),r.d(t,"GL_STREAM_DRAW",(function(){return ct})),r.d(t,"GL_STATIC_DRAW",(function(){return ft})),r.d(t,"GL_DYNAMIC_DRAW",(function(){return dt})),r.d(t,"GL_ARRAY_BUFFER",(function(){return ht})),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",(function(){return mt})),r.d(t,"GL_POINTS",(function(){return bt})),r.d(t,"GL_LINES",(function(){return pt})),r.d(t,"GL_LINE_LOOP",(function(){return vt})),r.d(t,"GL_LINE_STRIP",(function(){return gt})),r.d(t,"GL_TRIANGLES",(function(){return yt})),r.d(t,"GL_TRIANGLE_STRIP",(function(){return wt})),r.d(t,"GL_TRIANGLE_FAN",(function(){return _t})),r.d(t,"GL_CW",(function(){return Et})),r.d(t,"GL_CCW",(function(){return Tt})),r.d(t,"GL_CULL_FACE",(function(){return St})),r.d(t,"GL_DEPTH_TEST",(function(){return jt})),r.d(t,"GL_BLEND",(function(){return Rt}));var i=16384,n=256,a=1024,o=3553,s=34067,l=32879,u=10240,c=10241,f=10242,d=10243,h=5120,m=5121,b=5122,p=5123,v=5124,g=5125,y=5126,w=36193,_=5131,E=33189,T=33190,S=36012,j=35664,R=35665,P=35666,x=35667,z=35668,O=35669,A=35670,M=35671,C=35672,D=35673,I=35674,L=35675,F=35676,G={[y]:1,[v]:1,[h]:1,[A]:1,[j]:2,[x]:2,[M]:2,[R]:3,[z]:3,[C]:3,[P]:4,[O]:4,[D]:4,[L]:9,[F]:16},B=35678,N=35679,k=35680,U=6402,V=6406,H=6407,q=6408,W=6409,Y=6410,K=34041,X=34042,Q=33321,Z=33325,J=33326,$=33330,ee=33323,te=33327,re=33328,ie=32849,ne=35905,ae=36194,oe=35898,se=35901,le=34843,ue=34837,ce=36221,fe=32856,de=32855,he=34842,me=34836,be=36220,pe=36232,ve=36214,ge=36226,ye=36208,we=9728,_e=9729,Ee=9984,Te=9985,Se=9986,je=9987,Re=10497,Pe=33071,xe=33648,ze=0,Oe=1,Ae=768,Me=769,Ce=770,De=771,Ie=772,Le=773,Fe=774,Ge=775,Be=776,Ne=32769,ke=32770,Ue=32771,Ve=32772,He=35633,qe=35632,We=1028,Ye=1029,Ke=1032,Xe=512,Qe=513,Ze=514,Je=515,$e=516,et=517,tt=518,rt=519,it=7680,nt=7681,at=7682,ot=7683,st=34055,lt=34056,ut=5386,ct=35040,ft=35044,dt=35048,ht=34962,mt=34963,bt=0,pt=1,vt=2,gt=3,yt=4,wt=5,_t=6,Et=2304,Tt=2305,St=2884,jt=2929,Rt=3042},"./global/constant/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./global/constant/d3d.js");r.d(t,"RM_ANY",(function(){return i.RM_ANY})),r.d(t,"RM_OPAQUE",(function(){return i.RM_OPAQUE})),r.d(t,"RM_DECAL",(function(){return i.RM_DECAL})),r.d(t,"RM_TRANSPARENT",(function(){return i.RM_TRANSPARENT})),r.d(t,"RM_ADDITIVE",(function(){return i.RM_ADDITIVE})),r.d(t,"RM_DEPTH",(function(){return i.RM_DEPTH})),r.d(t,"RM_FULLSCREEN",(function(){return i.RM_FULLSCREEN})),r.d(t,"RM_PICKABLE",(function(){return i.RM_PICKABLE})),r.d(t,"RM_DISTORTION",(function(){return i.RM_DISTORTION})),r.d(t,"RS_ZENABLE",(function(){return i.RS_ZENABLE})),r.d(t,"RS_FILLMODE",(function(){return i.RS_FILLMODE})),r.d(t,"RS_SHADEMODE",(function(){return i.RS_SHADEMODE})),r.d(t,"RS_ZWRITEENABLE",(function(){return i.RS_ZWRITEENABLE})),r.d(t,"RS_ALPHATESTENABLE",(function(){return i.RS_ALPHATESTENABLE})),r.d(t,"RS_LASTPIXEL",(function(){return i.RS_LASTPIXEL})),r.d(t,"RS_SRCBLEND",(function(){return i.RS_SRCBLEND})),r.d(t,"RS_DESTBLEND",(function(){return i.RS_DESTBLEND})),r.d(t,"RS_CULLMODE",(function(){return i.RS_CULLMODE})),r.d(t,"RS_ZFUNC",(function(){return i.RS_ZFUNC})),r.d(t,"RS_ALPHAREF",(function(){return i.RS_ALPHAREF})),r.d(t,"RS_ALPHAFUNC",(function(){return i.RS_ALPHAFUNC})),r.d(t,"RS_DITHERENABLE",(function(){return i.RS_DITHERENABLE})),r.d(t,"RS_ALPHABLENDENABLE",(function(){return i.RS_ALPHABLENDENABLE})),r.d(t,"RS_FOGENABLE",(function(){return i.RS_FOGENABLE})),r.d(t,"RS_SPECULARENABLE",(function(){return i.RS_SPECULARENABLE})),r.d(t,"RS_FOGCOLOR",(function(){return i.RS_FOGCOLOR})),r.d(t,"RS_FOGTABLEMODE",(function(){return i.RS_FOGTABLEMODE})),r.d(t,"RS_FOGSTART",(function(){return i.RS_FOGSTART})),r.d(t,"RS_FOGEND",(function(){return i.RS_FOGEND})),r.d(t,"RS_FOGDENSITY",(function(){return i.RS_FOGDENSITY})),r.d(t,"RS_RANGEFOGENABLE",(function(){return i.RS_RANGEFOGENABLE})),r.d(t,"RS_STENCILENABLE",(function(){return i.RS_STENCILENABLE})),r.d(t,"RS_STENCILFAIL",(function(){return i.RS_STENCILFAIL})),r.d(t,"RS_STENCILZFAIL",(function(){return i.RS_STENCILZFAIL})),r.d(t,"RS_STENCILPASS",(function(){return i.RS_STENCILPASS})),r.d(t,"RS_STENCILFUNC",(function(){return i.RS_STENCILFUNC})),r.d(t,"RS_STENCILREF",(function(){return i.RS_STENCILREF})),r.d(t,"RS_STENCILMASK",(function(){return i.RS_STENCILMASK})),r.d(t,"RS_STENCILWRITEMASK",(function(){return i.RS_STENCILWRITEMASK})),r.d(t,"RS_TEXTUREFACTOR",(function(){return i.RS_TEXTUREFACTOR})),r.d(t,"RS_WRAP0",(function(){return i.RS_WRAP0})),r.d(t,"RS_WRAP1",(function(){return i.RS_WRAP1})),r.d(t,"RS_WRAP2",(function(){return i.RS_WRAP2})),r.d(t,"RS_WRAP3",(function(){return i.RS_WRAP3})),r.d(t,"RS_WRAP4",(function(){return i.RS_WRAP4})),r.d(t,"RS_WRAP5",(function(){return i.RS_WRAP5})),r.d(t,"RS_WRAP6",(function(){return i.RS_WRAP6})),r.d(t,"RS_WRAP7",(function(){return i.RS_WRAP7})),r.d(t,"RS_CLIPPING",(function(){return i.RS_CLIPPING})),r.d(t,"RS_LIGHTING",(function(){return i.RS_LIGHTING})),r.d(t,"RS_AMBIENT",(function(){return i.RS_AMBIENT})),r.d(t,"RS_FOGVERTEXMODE",(function(){return i.RS_FOGVERTEXMODE})),r.d(t,"RS_COLORVERTEX",(function(){return i.RS_COLORVERTEX})),r.d(t,"RS_LOCALVIEWER",(function(){return i.RS_LOCALVIEWER})),r.d(t,"RS_NORMALIZENORMALS",(function(){return i.RS_NORMALIZENORMALS})),r.d(t,"RS_DIFFUSEMATERIALSOURCE",(function(){return i.RS_DIFFUSEMATERIALSOURCE})),r.d(t,"RS_SPECULARMATERIALSOURCE",(function(){return i.RS_SPECULARMATERIALSOURCE})),r.d(t,"RS_AMBIENTMATERIALSOURCE",(function(){return i.RS_AMBIENTMATERIALSOURCE})),r.d(t,"RS_EMISSIVEMATERIALSOURCE",(function(){return i.RS_EMISSIVEMATERIALSOURCE})),r.d(t,"RS_VERTEXBLEND",(function(){return i.RS_VERTEXBLEND})),r.d(t,"RS_CLIPPLANEENABLE",(function(){return i.RS_CLIPPLANEENABLE})),r.d(t,"RS_POINTSIZE",(function(){return i.RS_POINTSIZE})),r.d(t,"RS_POINTSIZE_MIN",(function(){return i.RS_POINTSIZE_MIN})),r.d(t,"RS_POINTSPRITEENABLE",(function(){return i.RS_POINTSPRITEENABLE})),r.d(t,"RS_POINTSCALEENABLE",(function(){return i.RS_POINTSCALEENABLE})),r.d(t,"RS_POINTSCALE_A",(function(){return i.RS_POINTSCALE_A})),r.d(t,"RS_POINTSCALE_B",(function(){return i.RS_POINTSCALE_B})),r.d(t,"RS_POINTSCALE_C",(function(){return i.RS_POINTSCALE_C})),r.d(t,"RS_MULTISAMPLEANTIALIAS",(function(){return i.RS_MULTISAMPLEANTIALIAS})),r.d(t,"RS_MULTISAMPLEMASK",(function(){return i.RS_MULTISAMPLEMASK})),r.d(t,"RS_PATCHEDGESTYLE",(function(){return i.RS_PATCHEDGESTYLE})),r.d(t,"RS_DEBUGMONITORTOKEN",(function(){return i.RS_DEBUGMONITORTOKEN})),r.d(t,"RS_POINTSIZE_MAX",(function(){return i.RS_POINTSIZE_MAX})),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",(function(){return i.RS_INDEXEDVERTEXBLENDENABLE})),r.d(t,"RS_COLORWRITEENABLE",(function(){return i.RS_COLORWRITEENABLE})),r.d(t,"RS_TWEENFACTOR",(function(){return i.RS_TWEENFACTOR})),r.d(t,"RS_BLENDOP",(function(){return i.RS_BLENDOP})),r.d(t,"RS_POSITIONDEGREE",(function(){return i.RS_POSITIONDEGREE})),r.d(t,"RS_NORMALDEGREE",(function(){return i.RS_NORMALDEGREE})),r.d(t,"RS_SCISSORTESTENABLE",(function(){return i.RS_SCISSORTESTENABLE})),r.d(t,"RS_SLOPESCALEDEPTHBIAS",(function(){return i.RS_SLOPESCALEDEPTHBIAS})),r.d(t,"RS_ANTIALIASEDLINEENABLE",(function(){return i.RS_ANTIALIASEDLINEENABLE})),r.d(t,"RS_TWOSIDEDSTENCILMODE",(function(){return i.RS_TWOSIDEDSTENCILMODE})),r.d(t,"RS_CCW_STENCILFAIL",(function(){return i.RS_CCW_STENCILFAIL})),r.d(t,"RS_CCW_STENCILZFAIL",(function(){return i.RS_CCW_STENCILZFAIL})),r.d(t,"RS_CCW_STENCILPASS",(function(){return i.RS_CCW_STENCILPASS})),r.d(t,"RS_CCW_STENCILFUNC",(function(){return i.RS_CCW_STENCILFUNC})),r.d(t,"RS_COLORWRITEENABLE1",(function(){return i.RS_COLORWRITEENABLE1})),r.d(t,"RS_COLORWRITEENABLE2",(function(){return i.RS_COLORWRITEENABLE2})),r.d(t,"RS_COLORWRITEENABLE3",(function(){return i.RS_COLORWRITEENABLE3})),r.d(t,"RS_BLENDFACTOR",(function(){return i.RS_BLENDFACTOR})),r.d(t,"RS_SRGBWRITEENABLE",(function(){return i.RS_SRGBWRITEENABLE})),r.d(t,"RS_DEPTHBIAS",(function(){return i.RS_DEPTHBIAS})),r.d(t,"RS_SEPARATEALPHABLENDENABLE",(function(){return i.RS_SEPARATEALPHABLENDENABLE})),r.d(t,"RS_SRCBLENDALPHA",(function(){return i.RS_SRCBLENDALPHA})),r.d(t,"RS_DESTBLENDALPHA",(function(){return i.RS_DESTBLENDALPHA})),r.d(t,"RS_BLENDOPALPHA",(function(){return i.RS_BLENDOPALPHA})),r.d(t,"CULL_NONE",(function(){return i.CULL_NONE})),r.d(t,"CULL_CW",(function(){return i.CULL_CW})),r.d(t,"CULL_CCW",(function(){return i.CULL_CCW})),r.d(t,"CMP_NEVER",(function(){return i.CMP_NEVER})),r.d(t,"CMP_LESS",(function(){return i.CMP_LESS})),r.d(t,"CMP_EQUAL",(function(){return i.CMP_EQUAL})),r.d(t,"CMP_LEQUAL",(function(){return i.CMP_LEQUAL})),r.d(t,"CMP_GREATER",(function(){return i.CMP_GREATER})),r.d(t,"CMP_NOTEQUAL",(function(){return i.CMP_NOTEQUAL})),r.d(t,"CMP_GREATEREQUAL",(function(){return i.CMP_GREATEREQUAL})),r.d(t,"CMP_ALWAYS",(function(){return i.CMP_ALWAYS})),r.d(t,"BLEND_ZERO",(function(){return i.BLEND_ZERO})),r.d(t,"BLEND_ONE",(function(){return i.BLEND_ONE})),r.d(t,"BLEND_SRCCOLOR",(function(){return i.BLEND_SRCCOLOR})),r.d(t,"BLEND_INVSRCCOLOR",(function(){return i.BLEND_INVSRCCOLOR})),r.d(t,"BLEND_SRCALPHA",(function(){return i.BLEND_SRCALPHA})),r.d(t,"BLEND_INVSRCALPHA",(function(){return i.BLEND_INVSRCALPHA})),r.d(t,"BLEND_DESTALPHA",(function(){return i.BLEND_DESTALPHA})),r.d(t,"BLEND_INVDESTALPHA",(function(){return i.BLEND_INVDESTALPHA})),r.d(t,"BLEND_DESTCOLOR",(function(){return i.BLEND_DESTCOLOR})),r.d(t,"BLEND_INVDESTCOLOR",(function(){return i.BLEND_INVDESTCOLOR})),r.d(t,"BLEND_SRCALPHASAT",(function(){return i.BLEND_SRCALPHASAT})),r.d(t,"BLEND_BOTHSRCALPHA",(function(){return i.BLEND_BOTHSRCALPHA})),r.d(t,"BLEND_BOTHINVSRCALPHA",(function(){return i.BLEND_BOTHINVSRCALPHA})),r.d(t,"BLEND_BLENDFACTOR",(function(){return i.BLEND_BLENDFACTOR})),r.d(t,"BLEND_INVBLENDFACTOR",(function(){return i.BLEND_INVBLENDFACTOR})),r.d(t,"BLENDOP_ADD",(function(){return i.BLENDOP_ADD})),r.d(t,"BLENDOP_SUBTRACT",(function(){return i.BLENDOP_SUBTRACT})),r.d(t,"BLENDOP_REVSUBTRACT",(function(){return i.BLENDOP_REVSUBTRACT})),r.d(t,"BLENDOP_MIN",(function(){return i.BLENDOP_MIN})),r.d(t,"BLENDOP_MAX",(function(){return i.BLENDOP_MAX})),r.d(t,"BlendTable",(function(){return i.BlendTable})),r.d(t,"WrapMode",(function(){return i.WrapMode})),r.d(t,"FilterMode",(function(){return i.FilterMode})),r.d(t,"MipFilterMode",(function(){return i.MipFilterMode})),r.d(t,"TEX_2D",(function(){return i.TEX_2D})),r.d(t,"TEX_VOLUME",(function(){return i.TEX_VOLUME})),r.d(t,"TEX_CUBE_MAP",(function(){return i.TEX_CUBE_MAP})),r.d(t,"TEX_SHADOW_MAP",(function(){return i.TEX_SHADOW_MAP})),r.d(t,"TexTypeToGLTexture",(function(){return i.TexTypeToGLTexture})),r.d(t,"TexTypeToString",(function(){return i.TexTypeToString}));var n=r("./global/constant/dds.js");r.d(t,"DDS_MAGIC",(function(){return n.DDS_MAGIC})),r.d(t,"DDSD_CAPS",(function(){return n.DDSD_CAPS})),r.d(t,"DDSD_HEIGHT",(function(){return n.DDSD_HEIGHT})),r.d(t,"DDSD_WIDTH",(function(){return n.DDSD_WIDTH})),r.d(t,"DDSD_PITCH",(function(){return n.DDSD_PITCH})),r.d(t,"DDSD_PIXELFORMAT",(function(){return n.DDSD_PIXELFORMAT})),r.d(t,"DDSD_MIPMAPCOUNT",(function(){return n.DDSD_MIPMAPCOUNT})),r.d(t,"DDSD_LINEARSIZE",(function(){return n.DDSD_LINEARSIZE})),r.d(t,"DDSD_DEPTH",(function(){return n.DDSD_DEPTH})),r.d(t,"DDSCAPS_COMPLEX",(function(){return n.DDSCAPS_COMPLEX})),r.d(t,"DDSCAPS_MIPMAP",(function(){return n.DDSCAPS_MIPMAP})),r.d(t,"DDSCAPS_TEXTURE",(function(){return n.DDSCAPS_TEXTURE})),r.d(t,"DDSCAPS2_CUBEMAP",(function(){return n.DDSCAPS2_CUBEMAP})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",(function(){return n.DDSCAPS2_CUBEMAP_POSITIVEX})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",(function(){return n.DDSCAPS2_CUBEMAP_NEGATIVEX})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",(function(){return n.DDSCAPS2_CUBEMAP_POSITIVEY})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",(function(){return n.DDSCAPS2_CUBEMAP_NEGATIVEY})),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",(function(){return n.DDSCAPS2_CUBEMAP_POSITIVEZ})),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",(function(){return n.DDSCAPS2_CUBEMAP_NEGATIVEZ})),r.d(t,"DDSCAPS2_VOLUME",(function(){return n.DDSCAPS2_VOLUME})),r.d(t,"DDPF_ALPHAPIXELS",(function(){return n.DDPF_ALPHAPIXELS})),r.d(t,"DDPF_ALPHA",(function(){return n.DDPF_ALPHA})),r.d(t,"DDPF_FOURCC",(function(){return n.DDPF_FOURCC})),r.d(t,"DDPF_RGB",(function(){return n.DDPF_RGB})),r.d(t,"DDPF_YUV",(function(){return n.DDPF_YUV})),r.d(t,"DDPF_LUMINANCE",(function(){return n.DDPF_LUMINANCE})),r.d(t,"DDS_HEADER_LENGTH_INT",(function(){return n.DDS_HEADER_LENGTH_INT})),r.d(t,"DDS_HEADER_OFFSET_MAGIC",(function(){return n.DDS_HEADER_OFFSET_MAGIC})),r.d(t,"DDS_HEADER_OFFSET_SIZE",(function(){return n.DDS_HEADER_OFFSET_SIZE})),r.d(t,"DDS_HEADER_OFFSET_FLAGS",(function(){return n.DDS_HEADER_OFFSET_FLAGS})),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",(function(){return n.DDS_HEADER_OFFSET_HEIGHT})),r.d(t,"DDS_HEADER_OFFSET_WIDTH",(function(){return n.DDS_HEADER_OFFSET_WIDTH})),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",(function(){return n.DDS_HEADER_OFFSET_MIPMAP_COUNT})),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",(function(){return n.DDS_HEADER_OFFSET_PF_FLAGS})),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",(function(){return n.DDS_HEADER_OFFSET_PF_FOURCC})),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",(function(){return n.DDS_HEADER_OFFSET_RGB_BPP})),r.d(t,"DDS_HEADER_OFFSET_R_MASK",(function(){return n.DDS_HEADER_OFFSET_R_MASK})),r.d(t,"DDS_HEADER_OFFSET_G_MASK",(function(){return n.DDS_HEADER_OFFSET_G_MASK})),r.d(t,"DDS_HEADER_OFFSET_B_MASK",(function(){return n.DDS_HEADER_OFFSET_B_MASK})),r.d(t,"DDS_HEADER_OFFSET_A_MASK",(function(){return n.DDS_HEADER_OFFSET_A_MASK})),r.d(t,"DDS_HEADER_OFFSET_CAPS1",(function(){return n.DDS_HEADER_OFFSET_CAPS1})),r.d(t,"DDS_HEADER_OFFSET_CAPS2",(function(){return n.DDS_HEADER_OFFSET_CAPS2})),r.d(t,"DDS_HEADER_OFFSET_CAPS3",(function(){return n.DDS_HEADER_OFFSET_CAPS3})),r.d(t,"DDS_HEADER_OFFSET_CAPS4",(function(){return n.DDS_HEADER_OFFSET_CAPS4})),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",(function(){return n.DDS_HEADER_OFFSET_DXGI_FORMAT})),r.d(t,"FOURCC_ATI1",(function(){return n.FOURCC_ATI1})),r.d(t,"FOURCC_ATI2",(function(){return n.FOURCC_ATI2})),r.d(t,"FOURCC_ETC1",(function(){return n.FOURCC_ETC1})),r.d(t,"FOURCC_DXT1",(function(){return n.FOURCC_DXT1})),r.d(t,"FOURCC_DXT5",(function(){return n.FOURCC_DXT5})),r.d(t,"FOURCC_DXT3",(function(){return n.FOURCC_DXT3})),r.d(t,"FOURCC_DXT10",(function(){return n.FOURCC_DXT10})),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",(function(){return n.FOURCC_D3DFMT_R16G16B16A16F})),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",(function(){return n.FOURCC_D3DFMT_R32G32B32A32F})),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",(function(){return n.DXGI_FORMAT_R16G16B16A16_FLOAT})),r.d(t,"DXGI_FORMAT_R32G32B32A32_FLOAT",(function(){return n.DXGI_FORMAT_R32G32B32A32_FLOAT})),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",(function(){return n.DXGI_FORMAT_B8G8R8X8_UNORM}));var a=r("./global/constant/gl.js");r.d(t,"GL_COLOR_BUFFER_BIT",(function(){return a.GL_COLOR_BUFFER_BIT})),r.d(t,"GL_DEPTH_BUFFER_BIT",(function(){return a.GL_DEPTH_BUFFER_BIT})),r.d(t,"GL_STENCIL_BUFFER_BIT",(function(){return a.GL_STENCIL_BUFFER_BIT})),r.d(t,"GL_TEXTURE_2D",(function(){return a.GL_TEXTURE_2D})),r.d(t,"GL_TEXTURE_CUBE_MAP",(function(){return a.GL_TEXTURE_CUBE_MAP})),r.d(t,"GL_TEXTURE_3D",(function(){return a.GL_TEXTURE_3D})),r.d(t,"GL_TEXTURE_MAG_FILTER",(function(){return a.GL_TEXTURE_MAG_FILTER})),r.d(t,"GL_TEXTURE_MIN_FILTER",(function(){return a.GL_TEXTURE_MIN_FILTER})),r.d(t,"GL_TEXTURE_WRAP_S",(function(){return a.GL_TEXTURE_WRAP_S})),r.d(t,"GL_TEXTURE_WRAP_T",(function(){return a.GL_TEXTURE_WRAP_T})),r.d(t,"GL_BYTE",(function(){return a.GL_BYTE})),r.d(t,"GL_UNSIGNED_BYTE",(function(){return a.GL_UNSIGNED_BYTE})),r.d(t,"GL_SHORT",(function(){return a.GL_SHORT})),r.d(t,"GL_UNSIGNED_SHORT",(function(){return a.GL_UNSIGNED_SHORT})),r.d(t,"GL_INT",(function(){return a.GL_INT})),r.d(t,"GL_UNSIGNED_INT",(function(){return a.GL_UNSIGNED_INT})),r.d(t,"GL_FLOAT",(function(){return a.GL_FLOAT})),r.d(t,"GL_HALF_FLOAT_OES",(function(){return a.GL_HALF_FLOAT_OES})),r.d(t,"GL_HALF_FLOAT",(function(){return a.GL_HALF_FLOAT})),r.d(t,"GL_DEPTH_COMPONENT16",(function(){return a.GL_DEPTH_COMPONENT16})),r.d(t,"GL_DEPTH_COMPONENT24",(function(){return a.GL_DEPTH_COMPONENT24})),r.d(t,"GL_DEPTH_COMPONENT32F",(function(){return a.GL_DEPTH_COMPONENT32F})),r.d(t,"GL_FLOAT_VEC2",(function(){return a.GL_FLOAT_VEC2})),r.d(t,"GL_FLOAT_VEC3",(function(){return a.GL_FLOAT_VEC3})),r.d(t,"GL_FLOAT_VEC4",(function(){return a.GL_FLOAT_VEC4})),r.d(t,"GL_INT_VEC2",(function(){return a.GL_INT_VEC2})),r.d(t,"GL_INT_VEC3",(function(){return a.GL_INT_VEC3})),r.d(t,"GL_INT_VEC4",(function(){return a.GL_INT_VEC4})),r.d(t,"GL_BOOL",(function(){return a.GL_BOOL})),r.d(t,"GL_BOOL_VEC2",(function(){return a.GL_BOOL_VEC2})),r.d(t,"GL_BOOL_VEC3",(function(){return a.GL_BOOL_VEC3})),r.d(t,"GL_BOOL_VEC4",(function(){return a.GL_BOOL_VEC4})),r.d(t,"GL_FLOAT_MAT2",(function(){return a.GL_FLOAT_MAT2})),r.d(t,"GL_FLOAT_MAT3",(function(){return a.GL_FLOAT_MAT3})),r.d(t,"GL_FLOAT_MAT4",(function(){return a.GL_FLOAT_MAT4})),r.d(t,"GL_TYPE_LENGTH",(function(){return a.GL_TYPE_LENGTH})),r.d(t,"GL_SAMPLER_2D",(function(){return a.GL_SAMPLER_2D})),r.d(t,"GL_SAMPLER_3D",(function(){return a.GL_SAMPLER_3D})),r.d(t,"GL_SAMPLER_CUBE",(function(){return a.GL_SAMPLER_CUBE})),r.d(t,"GL_DEPTH_COMPONENT",(function(){return a.GL_DEPTH_COMPONENT})),r.d(t,"GL_ALPHA",(function(){return a.GL_ALPHA})),r.d(t,"GL_RGB",(function(){return a.GL_RGB})),r.d(t,"GL_RGBA",(function(){return a.GL_RGBA})),r.d(t,"GL_LUMINANCE",(function(){return a.GL_LUMINANCE})),r.d(t,"GL_LUMINANCE_ALPHA",(function(){return a.GL_LUMINANCE_ALPHA})),r.d(t,"GL_DEPTH_STENCIL",(function(){return a.GL_DEPTH_STENCIL})),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",(function(){return a.GL_UNSIGNED_INT_24_8_WEBGL})),r.d(t,"GL_R8",(function(){return a.GL_R8})),r.d(t,"GL_R16F",(function(){return a.GL_R16F})),r.d(t,"GL_R32F",(function(){return a.GL_R32F})),r.d(t,"GL_R8UI",(function(){return a.GL_R8UI})),r.d(t,"GL_RG8",(function(){return a.GL_RG8})),r.d(t,"GL_RG16F",(function(){return a.GL_RG16F})),r.d(t,"GL_RG32F",(function(){return a.GL_RG32F})),r.d(t,"GL_RGB8",(function(){return a.GL_RGB8})),r.d(t,"GL_SRGB8",(function(){return a.GL_SRGB8})),r.d(t,"GL_RGB565",(function(){return a.GL_RGB565})),r.d(t,"GL_R11F_G11F_B10F",(function(){return a.GL_R11F_G11F_B10F})),r.d(t,"GL_RGB9_E5",(function(){return a.GL_RGB9_E5})),r.d(t,"GL_RGB16F",(function(){return a.GL_RGB16F})),r.d(t,"GL_RGB32F",(function(){return a.GL_RGB32F})),r.d(t,"GL_RGB8UI",(function(){return a.GL_RGB8UI})),r.d(t,"GL_RGBA8",(function(){return a.GL_RGBA8})),r.d(t,"GL_RGB5_A1",(function(){return a.GL_RGB5_A1})),r.d(t,"GL_RGBA16F",(function(){return a.GL_RGBA16F})),r.d(t,"GL_RGBA32F",(function(){return a.GL_RGBA32F})),r.d(t,"GL_RGBA8UI",(function(){return a.GL_RGBA8UI})),r.d(t,"GL_RGBA16I",(function(){return a.GL_RGBA16I})),r.d(t,"GL_RGBA16UI",(function(){return a.GL_RGBA16UI})),r.d(t,"GL_RGBA32I",(function(){return a.GL_RGBA32I})),r.d(t,"GL_RGBA32UI",(function(){return a.GL_RGBA32UI})),r.d(t,"GL_NEAREST",(function(){return a.GL_NEAREST})),r.d(t,"GL_LINEAR",(function(){return a.GL_LINEAR})),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",(function(){return a.GL_NEAREST_MIPMAP_NEAREST})),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",(function(){return a.GL_LINEAR_MIPMAP_NEAREST})),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",(function(){return a.GL_NEAREST_MIPMAP_LINEAR})),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",(function(){return a.GL_LINEAR_MIPMAP_LINEAR})),r.d(t,"GL_REPEAT",(function(){return a.GL_REPEAT})),r.d(t,"GL_CLAMP_TO_EDGE",(function(){return a.GL_CLAMP_TO_EDGE})),r.d(t,"GL_MIRRORED_REPEAT",(function(){return a.GL_MIRRORED_REPEAT})),r.d(t,"GL_ZERO",(function(){return a.GL_ZERO})),r.d(t,"GL_ONE",(function(){return a.GL_ONE})),r.d(t,"GL_SRC_COLOR",(function(){return a.GL_SRC_COLOR})),r.d(t,"GL_ONE_MINUS_SRC_COLOR",(function(){return a.GL_ONE_MINUS_SRC_COLOR})),r.d(t,"GL_SRC_ALPHA",(function(){return a.GL_SRC_ALPHA})),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",(function(){return a.GL_ONE_MINUS_SRC_ALPHA})),r.d(t,"GL_DST_ALPHA",(function(){return a.GL_DST_ALPHA})),r.d(t,"GL_ONE_MINUS_DST_ALPHA",(function(){return a.GL_ONE_MINUS_DST_ALPHA})),r.d(t,"GL_DST_COLOR",(function(){return a.GL_DST_COLOR})),r.d(t,"GL_ONE_MINUS_DST_COLOR",(function(){return a.GL_ONE_MINUS_DST_COLOR})),r.d(t,"GL_SRC_ALPHA_SATURATE",(function(){return a.GL_SRC_ALPHA_SATURATE})),r.d(t,"GL_CONSTANT_COLOR",(function(){return a.GL_CONSTANT_COLOR})),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",(function(){return a.GL_ONE_MINUS_CONSTANT_COLOR})),r.d(t,"GL_CONSTANT_ALPHA",(function(){return a.GL_CONSTANT_ALPHA})),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",(function(){return a.GL_ONE_MINUS_CONSTANT_ALPHA})),r.d(t,"GL_VERTEX_SHADER",(function(){return a.GL_VERTEX_SHADER})),r.d(t,"GL_FRAGMENT_SHADER",(function(){return a.GL_FRAGMENT_SHADER})),r.d(t,"GL_FRONT",(function(){return a.GL_FRONT})),r.d(t,"GL_BACK",(function(){return a.GL_BACK})),r.d(t,"GL_FRONT_AND_BACK",(function(){return a.GL_FRONT_AND_BACK})),r.d(t,"GL_NEVER",(function(){return a.GL_NEVER})),r.d(t,"GL_LESS",(function(){return a.GL_LESS})),r.d(t,"GL_EQUAL",(function(){return a.GL_EQUAL})),r.d(t,"GL_LEQUAL",(function(){return a.GL_LEQUAL})),r.d(t,"GL_GREATER",(function(){return a.GL_GREATER})),r.d(t,"GL_NOTEQUAL",(function(){return a.GL_NOTEQUAL})),r.d(t,"GL_GEQUAL",(function(){return a.GL_GEQUAL})),r.d(t,"GL_ALWAYS",(function(){return a.GL_ALWAYS})),r.d(t,"GL_KEEP",(function(){return a.GL_KEEP})),r.d(t,"GL_REPLACE",(function(){return a.GL_REPLACE})),r.d(t,"GL_INCR",(function(){return a.GL_INCR})),r.d(t,"GL_DECR",(function(){return a.GL_DECR})),r.d(t,"GL_INCR_WRAP",(function(){return a.GL_INCR_WRAP})),r.d(t,"GL_DECR_WRAP",(function(){return a.GL_DECR_WRAP})),r.d(t,"GL_INVERT",(function(){return a.GL_INVERT})),r.d(t,"GL_STREAM_DRAW",(function(){return a.GL_STREAM_DRAW})),r.d(t,"GL_STATIC_DRAW",(function(){return a.GL_STATIC_DRAW})),r.d(t,"GL_DYNAMIC_DRAW",(function(){return a.GL_DYNAMIC_DRAW})),r.d(t,"GL_ARRAY_BUFFER",(function(){return a.GL_ARRAY_BUFFER})),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",(function(){return a.GL_ELEMENT_ARRAY_BUFFER})),r.d(t,"GL_POINTS",(function(){return a.GL_POINTS})),r.d(t,"GL_LINES",(function(){return a.GL_LINES})),r.d(t,"GL_LINE_LOOP",(function(){return a.GL_LINE_LOOP})),r.d(t,"GL_LINE_STRIP",(function(){return a.GL_LINE_STRIP})),r.d(t,"GL_TRIANGLES",(function(){return a.GL_TRIANGLES})),r.d(t,"GL_TRIANGLE_STRIP",(function(){return a.GL_TRIANGLE_STRIP})),r.d(t,"GL_TRIANGLE_FAN",(function(){return a.GL_TRIANGLE_FAN})),r.d(t,"GL_CW",(function(){return a.GL_CW})),r.d(t,"GL_CCW",(function(){return a.GL_CCW})),r.d(t,"GL_CULL_FACE",(function(){return a.GL_CULL_FACE})),r.d(t,"GL_DEPTH_TEST",(function(){return a.GL_DEPTH_TEST})),r.d(t,"GL_BLEND",(function(){return a.GL_BLEND}));var o=r("./global/constant/web.js");r.d(t,"VendorRequestAnimationFrame",(function(){return o.VendorRequestAnimationFrame})),r.d(t,"VendorCancelAnimationFrame",(function(){return o.VendorCancelAnimationFrame})),r.d(t,"VendorRequestFullScreen",(function(){return o.VendorRequestFullScreen})),r.d(t,"VendorExitFullScreen",(function(){return o.VendorExitFullScreen})),r.d(t,"VendorGetFullScreenElement",(function(){return o.VendorGetFullScreenElement})),r.d(t,"VendorWebglPrefixes",(function(){return o.VendorWebglPrefixes}));var s=r("./global/constant/type.js");r.d(t,"PT_UNKNOWN",(function(){return s.PT_UNKNOWN})),r.d(t,"PT_BOOLEAN",(function(){return s.PT_BOOLEAN})),r.d(t,"PT_STRING",(function(){return s.PT_STRING})),r.d(t,"PT_PATH",(function(){return s.PT_PATH})),r.d(t,"PT_EXPRESSION",(function(){return s.PT_EXPRESSION})),r.d(t,"PT_BYTE",(function(){return s.PT_BYTE})),r.d(t,"PT_UINT",(function(){return s.PT_UINT})),r.d(t,"PT_USHORT",(function(){return s.PT_USHORT})),r.d(t,"PT_FLOAT",(function(){return s.PT_FLOAT})),r.d(t,"PT_STRUCT",(function(){return s.PT_STRUCT})),r.d(t,"PT_STRUCT_RAW",(function(){return s.PT_STRUCT_RAW})),r.d(t,"PT_STRUCT_LIST",(function(){return s.PT_STRUCT_LIST})),r.d(t,"PT_PLAIN",(function(){return s.PT_PLAIN})),r.d(t,"PT_ARRAY",(function(){return s.PT_ARRAY})),r.d(t,"PT_VECTOR",(function(){return s.PT_VECTOR})),r.d(t,"PT_VECTOR2",(function(){return s.PT_VECTOR2})),r.d(t,"PT_VECTOR3",(function(){return s.PT_VECTOR3})),r.d(t,"PT_VECTOR4",(function(){return s.PT_VECTOR4})),r.d(t,"PT_COLOR",(function(){return s.PT_COLOR})),r.d(t,"PT_QUATERNION",(function(){return s.PT_QUATERNION})),r.d(t,"PT_MATRIX3",(function(){return s.PT_MATRIX3})),r.d(t,"PT_MATRIX4",(function(){return s.PT_MATRIX4})),r.d(t,"PT_ENUM",(function(){return s.PT_ENUM})),r.d(t,"PT_UINT8_ARRAY",(function(){return s.PT_UINT8_ARRAY})),r.d(t,"PT_UINT8_CLAMPED_ARRAY",(function(){return s.PT_UINT8_CLAMPED_ARRAY})),r.d(t,"PT_UINT16_ARRAY",(function(){return s.PT_UINT16_ARRAY})),r.d(t,"PT_UINT32_ARRAY",(function(){return s.PT_UINT32_ARRAY})),r.d(t,"PT_INT8_ARRAY",(function(){return s.PT_INT8_ARRAY})),r.d(t,"PT_INT16_ARRAY",(function(){return s.PT_INT16_ARRAY})),r.d(t,"PT_INT32_ARRAY",(function(){return s.PT_INT32_ARRAY})),r.d(t,"PT_FLOAT32_ARRAY",(function(){return s.PT_FLOAT32_ARRAY})),r.d(t,"PT_FLOAT64_ARRAY",(function(){return s.PT_FLOAT64_ARRAY})),r.d(t,"VectorLengths",(function(){return s.VectorLengths}));var l=r("./global/constant/ccpwgl.js");r.d(t,"DeviceTextureQuality",(function(){return l.DeviceTextureQuality})),r.d(t,"DeviceShaderQuality",(function(){return l.DeviceShaderQuality})),r.d(t,"SceneLodSettings",(function(){return l.SceneLodSettings})),r.d(t,"LodLevelPixels",(function(){return l.LodLevelPixels}))},"./global/constant/type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"PT_UNKNOWN",(function(){return i})),r.d(t,"PT_BOOLEAN",(function(){return n})),r.d(t,"PT_STRING",(function(){return a})),r.d(t,"PT_PATH",(function(){return o})),r.d(t,"PT_EXPRESSION",(function(){return s})),r.d(t,"PT_BYTE",(function(){return l})),r.d(t,"PT_UINT",(function(){return u})),r.d(t,"PT_USHORT",(function(){return c})),r.d(t,"PT_FLOAT",(function(){return f})),r.d(t,"PT_STRUCT",(function(){return d})),r.d(t,"PT_STRUCT_RAW",(function(){return h})),r.d(t,"PT_STRUCT_LIST",(function(){return m})),r.d(t,"PT_PLAIN",(function(){return b})),r.d(t,"PT_ARRAY",(function(){return p})),r.d(t,"PT_VECTOR",(function(){return v})),r.d(t,"PT_VECTOR2",(function(){return g})),r.d(t,"PT_VECTOR3",(function(){return y})),r.d(t,"PT_VECTOR4",(function(){return w})),r.d(t,"PT_COLOR",(function(){return _})),r.d(t,"PT_QUATERNION",(function(){return E})),r.d(t,"PT_MATRIX3",(function(){return T})),r.d(t,"PT_MATRIX4",(function(){return S})),r.d(t,"PT_ENUM",(function(){return j})),r.d(t,"PT_UINT8_ARRAY",(function(){return R})),r.d(t,"PT_UINT8_CLAMPED_ARRAY",(function(){return P})),r.d(t,"PT_UINT16_ARRAY",(function(){return x})),r.d(t,"PT_UINT32_ARRAY",(function(){return z})),r.d(t,"PT_INT8_ARRAY",(function(){return O})),r.d(t,"PT_INT16_ARRAY",(function(){return A})),r.d(t,"PT_INT32_ARRAY",(function(){return M})),r.d(t,"PT_FLOAT32_ARRAY",(function(){return C})),r.d(t,"PT_FLOAT64_ARRAY",(function(){return D})),r.d(t,"VectorLengths",(function(){return I}));var i=0,n=1,a=10,o=11,s=12,l=20,u=21,c=22,f=23,d=30,h=31,m=32,b=33,p=34,v=50,g=51,y=52,w=53,_=60,E=61,T=70,S=71,j=80,R=81,P=82,x=83,z=84,O=85,A=86,M=87,C=88,D=89,I={[g]:2,[y]:3,[w]:4,[E]:4,[_]:4,[T]:9,[S]:16}},"./global/constant/web.js":function(e,t,r){"use strict";r.r(t),r.d(t,"VendorRequestAnimationFrame",(function(){return i})),r.d(t,"VendorCancelAnimationFrame",(function(){return n})),r.d(t,"VendorRequestFullScreen",(function(){return a})),r.d(t,"VendorExitFullScreen",(function(){return o})),r.d(t,"VendorGetFullScreenElement",(function(){return s})),r.d(t,"VendorWebglPrefixes",(function(){return l}));var i=["requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],n=["cancelAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],a=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],o=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],s=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],l=["","MOZ_","WEBKIT_","WEBGL_"]},"./global/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./global/tw2.js");r.d(t,"tw2",(function(){return i.tw2})),r.d(t,"resMan",(function(){return i.resMan})),r.d(t,"device",(function(){return i.device}))},"./global/math/box3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"box3",(function(){return a}));var i=r("./global/math/num.js"),n=r("./global/math/vec3.js"),a=(r("./global/math/sph3.js"),r("./global/math/mat4.js"),{bounds:{}}),o=null;a.$min=function(e){return e.subarray(0,3)},a.$max=function(e){return e.subarray(3,6)},a.addPoint=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[0]),e[4]=Math.max(t[4],r[1]),e[5]=Math.max(t[5],r[2]),e},a.addPoints=function(e,t,r){for(var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=0;u<r.length;u++)i=Math.min(i,r[u][0]),n=Math.min(n,r[u][1]),a=Math.min(a,r[u][2]),o=Math.max(o,r[u][0]),s=Math.max(s,r[u][1]),l=Math.max(l,r[u][2]);return e[0]=i,e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e},a.clone=function(e){var t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.contains=function(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&t[4]<=e[4]&&e[2]<=t[2]&&t[5]<=e[5]},a.containsBounds=function(e,t,r){return e[0]<=t[0]&&r[0]<=e[3]&&e[1]<=t[1]&&r[1]<=e[4]&&e[2]<=t[2]&&r[2]<=e[5]},a.containsPoint=function(e,t){return!(t[0]<e[0]||t[0]>e[3]||t[1]<e[1]||t[1]>e[4]||t[2]<e[2]||t[2]>e[5])},a.containsValue=function(e,t,r,i){return!(t<e[0]||t>e[3]||r<e[1]||r>e[4]||i<e[2]||i>e[5])},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copyMin=n.vec3.copy,a.copyMax=function(e,t){return e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.create=function(){return a.empty(new Float32Array(6))},a.distanceToPoint=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],i=Math.max(e[1],Math.min(e[4],t[1]))-t[1],n=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return Math.sqrt(r*r+i*i+n*n)},a.distanceToValues=function(e,t,r,i){var n=Math.max(e[0],Math.min(e[3],t))-t,a=Math.max(e[1],Math.min(e[4],r))-r,o=Math.max(e[2],Math.min(e[5],i))-i;return Math.sqrt(n*n+a*a+o*o)},a.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e},a.bounds.empty=function(e,t){e[0]=0,e[1]=0,e[2]=0,t[0]=0,t[1]=0,t[2]=0},a.equals=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],d=t[3],h=t[4],m=t[5];return Math.abs(r-u)<=i.num.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=i.num.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-f)<=i.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=i.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=i.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-m)<=i.num.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))},a.equalsBounds=function(e,t,r){var n=e[0],a=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=t[0],f=t[1],d=t[2],h=r[0],m=r[1],b=r[2];return Math.abs(n-c)<=i.num.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-f)<=i.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=i.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=i.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-m)<=i.num.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-b)<=i.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))},a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},a.exactEqualsBounds=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r[0]&&e[4]===r[1]&&e[5]===r[2]},a.expandScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]+r,e[4]=t[4]+r,e[5]=t[5]+r,e},a.expandValues=function(e,t,r,i,n){return e[0]=t[0]-r,e[1]=t[1]-i,e[2]=t[2]-n,e[3]=t[3]+r,e[4]=t[4]+i,e[5]=t[5]+n,e},a.expandVec3=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},a.fromArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e},a.fromBounds=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e},a.fromPositionSize=function(e,t,r){return e[0]=t[0]-.5*r[0],e[1]=t[1]-.5*r[1],e[2]=t[2]-.5*r[2],e[3]=t[0]+.5*r[0],e[4]=t[1]+.5*r[1],e[5]=t[2]+.5*r[2],e},a.fromPoints=function(e,t){a.empty(e);for(var r=0;r<t.length;r++)e[0]=Math.min(e[0],t[r][0]),e[1]=Math.min(e[1],t[r][1]),e[2]=Math.min(e[2],t[r][2]),e[3]=Math.max(e[3],t[r][0]),e[4]=Math.max(e[4],t[r][1]),e[5]=Math.max(e[5],t[r][2]);return e},a.fromPositionRadius=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[0]+r,e[4]=t[1]+r,e[5]=t[2]+r,e},a.fromSph3=function(e,t){return e[0]=t[0]-t[3],e[1]=t[1]-t[3],e[2]=t[2]-t[3],e[3]=t[0]+t[3],e[4]=t[1]+t[3],e[5]=t[2]+t[3],e},a.fromValues=function(e,t,r,i,n,o){var s=a.create();return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=n,s[5]=o,s},a.getCenter=function(e,t){return a.isEmpty(t)?(e[0]=0,e[1]=0,e[2]=0,e):(e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e)},a.getClampedPoint=function(e,t,r){return e[0]=Math.max(t[0],Math.min(t[3],r[0])),e[1]=Math.max(t[1],Math.min(t[4],r[1])),e[2]=Math.max(t[2],Math.min(t[5],r[2])),e},a.getMax=function(e,t){return e[0]=t[3],e[1]=t[4],e[2]=t[5],e},a.getMin=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.getSize=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},a.getPosition=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},a.radius=function(e){var t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return.5*Math.sqrt(t*t+r*r+i*i)},a.intersect=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e[4]=Math.min(t[4],r[4]),e[5]=Math.min(t[5],r[5]),e},a.intersectBounds=function(e,t,r,i){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],i[0]),e[4]=Math.min(t[4],i[1]),e[5]=Math.min(t[5],i[2]),e},a.intersects=function(e,t){return!(t[3]<e[0]||t[0]>e[3]||t[4]<e[1]||t[1]>e[4]||t[5]<e[2]||t[2]>e[5])},a.intersectsBounds=function(e,t,r){return!(r[0]<e[0]||t[0]>e[3]||r[1]<e[1]||t[1]>e[4]||r[2]<e[2]||t[2]>e[5])},a.intersectsNormalConstant=function(e,t,r){var i,n;return t[0]>0?(i=t[0]*e[0],n=t[0]*e[3]):(i=t[0]*e[3],n=t[0]*e[0]),t[1]>0?(i=t[1]*e[1],n=t[1]*e[4]):(i=t[1]*e[4],n=t[1]*e[1]),t[2]>0?(i+=t[2]*e[2],n+=t[2]*e[5]):(i+=t[2]*e[5],n+=t[2]*e[2]),i<=r&&n>=r},a.intersectsPln=function(e,t){return a.intersectsNormalConstant(e,t,t[3])},a.intersectsPoint=function(e,t){return t[0]>=e[0]&&t[0]<=e[3]&&t[1]>=e[1]&&t[1]<=e[4]&&t[2]>=e[2]&&t[2]<=e[5]},a.intersectsValues=function(e,t,r,i){return t>=e[0]&&t<=e[3]&&r>=e[1]&&r<=e[4]&&i>=e[2]&&i<=e[5]},a.intersectsPositionRadius=function(e,t,r){var i=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],a=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return i*i+n*n+a*a<=r*r},a.intersectsSph3=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],i=Math.max(e[1],Math.min(e[4],t[1]))-t[1],n=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+i*i+n*n<=t[3]*t[3]},a.isEmpty=function(e){return e[0]+e[1]+e[2]+e[0]+e[1]+e[2]===0||(e[3]<e[0]||e[4]<e[1]||e[5]<e[2])},a.bounds.isEmpty=function(e,t){return e[0]+e[1]+e[2]+t[0]+t[1]+t[2]===0||(t[0]<e[0]||t[1]<e[1]||t[2]<e[2])},a.set=function(e,t,r,i,n,a,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e},a.squaredDistanceToPoint=function(e,t){var r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],i=Math.max(e[1],Math.min(e[4],t[1]))-t[1],n=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+i*i+n*n},a.surfaceArea=function(e){var t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*(r+i)+r*i)},a.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],e},a.toBounds=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},a.toPoints=function(e,t=[]){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=a+Math.abs(r),u=o+Math.abs(i),c=s+Math.abs(n);return t.push([a+0,o+0,s+0]),t.push([a-l,o+0,s+0]),t.push([a+0,o+0,s-c]),t.push([a-l,o+0,s-c]),t.push([a+0,o-u,s+0]),t.push([a-l,o-u,s+0]),t.push([a+0,o-u,s-c]),t.push([a-l,o-u,s-c]),t},a.toPositionRadius=function(e,t){var r=e[3]-e[0],i=e[4]-e[1],n=e[5]-e[2];return t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]),.5*Math.sqrt(r*r+i*i+n*n)},a.bounds.toPositionRadius=function(e,t,r){var i=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r[0]=.5*(e[0]+t[0]),r[1]=.5*(e[1]+t[1]),r[2]=.5*(e[2]+t[2]),.5*Math.sqrt(i*i+n*n+a*a)},a.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},a.transformMat4=function(e,t,r){return o||(o=[n.vec3.create(),n.vec3.create(),n.vec3.create(),n.vec3.create(),n.vec3.create(),n.vec3.create(),n.vec3.create(),n.vec3.create()]),a.isEmpty(t)?a.empty(e):(n.vec3.transformMat4(o[0],[t[0],t[1],t[2]],r),n.vec3.transformMat4(o[1],[t[0],t[1],t[5]],r),n.vec3.transformMat4(o[2],[t[0],t[4],t[2]],r),n.vec3.transformMat4(o[3],[t[0],t[4],t[5]],r),n.vec3.transformMat4(o[4],[t[3],t[1],t[2]],r),n.vec3.transformMat4(o[5],[t[3],t[1],t[5]],r),n.vec3.transformMat4(o[6],[t[3],t[4],t[2]],r),n.vec3.transformMat4(o[7],[t[3],t[4],t[5]],r),a.fromPoints(e,o))},a.union=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},a.unionBounds=function(e,t,r,i){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],i[0]),e[4]=Math.max(t[4],i[1]),e[5]=Math.max(t[5],i[2]),e},a.bounds.union=function(e,t,r,i,n,a){e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),t[0]=Math.max(i[0],a[0]),t[1]=Math.max(i[1],a[1]),t[2]=Math.max(i[2],a[2])}},"./global/math/curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"curve",(function(){return i}));var i={evaluate:function(e,t,r,i,n){for(var a=e.knots.length,o=a-1,s=0,l=0;l<e.knots.length;++l)if(e.knots[l]>t){o=l;break}if(0===e.degree)for(var u=0;u<e.dimension;++u)r[u]=e.controls[o*e.dimension+u];else if(1===e.degree){var c=i?(o+a-1)%a:0===o?0:o-1,f=e.knots[o]-e.knots[c];f<0&&(f+=n),f>0&&(s=(t-e.knots[e.knots.length-1])/f);for(var d=0;d<e.dimension;++d)r[d]=e.controls[c*e.dimension+d]*(1-s)+e.controls[o*e.dimension+d]*s}else{var h=i?(o+a-2)%a:0===o?0:o-2,m=i?(o+a-1)%a:0===o?0:o-1,b=h*e.dimension,p=m*e.dimension,v=o*e.dimension,g=e.knots[h],y=e.knots[m],w=e.knots[o],_=e.knots[(o+1)%a];g>w&&(w+=n,_+=n,t+=n),y>w&&(w+=n,_+=n,t+=n),_<w&&(_+=n);var E=t-y,T=E/(w-y),S=(t-g)/(w-g),j=S+T-T*S,R=T*(E/(_-y)),P=j-R;j=1-j;for(var x=0;x<e.dimension;++x)r[x]=j*e.controls[b+x]+P*e.controls[p+x]+R*e.controls[v+x]}},ag_horner1:function(e,t,r){for(var i=e[t];--t>=0;)i=r*i+e[t];return i},ag_zeroin2:function(e,t,r,n,a,o){var s,l,u,c,f,d,h,m,b,p;for(var v=!0;v&&(s=e,c=r,u=l=t-e),Math.abs(c)<Math.abs(n)&&(e=t,t=s,s=e,r=n,n=c,c=r),v=!1,f=2.384185792e-7*Math.abs(t)+.5*a,d=.5*(s-t),Math.abs(d)>f&&0!==n;)Math.abs(u)<f||Math.abs(r)<=Math.abs(n)?u=l=d:(p=n/r,e===s?(h=2*d*p,m=1-p):(h=p*(2*d*(m=r/c)*(m-(b=n/c))-(t-e)*(b-1)),m=(m-1)*(b-1)*(p-1)),h>0?m=-m:h=-h,p=u,u=l,2*h<3*d*m-Math.abs(f*m)&&h<Math.abs(.5*p*m)?l=h/m:u=l=d),e=t,r=n,Math.abs(l)>f?t+=l:d>0?t+=f:t-=f,(n=i.ag_horner1(o.p,o.deg,t))*(c/Math.abs(c))>0&&(v=!0);return t},ag_zeroin:function(e,t,r,n){var a,o;return a=i.ag_horner1(n.p,n.deg,e),Math.abs(a)<1.192092896e-7?e:(o=i.ag_horner1(n.p,n.deg,t),Math.abs(o)<1.192092896e-7?t:i.ag_zeroin2(e,t,a,o,r,n))},polyZeroes:function(e,t,r,n,a,o,s){var l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=new Array(22),S=new Array(22),j=new Array(22),R={p:[],deg:0};for(m=v=0,b=0,l=0;l<t+1;++l)b+=Math.abs(e[l]);if(b<=(y=(Math.abs(r)+Math.abs(a))*(t+1)*1.192092896e-7))return-1;for(w=T,_=S,E=j,l=0;l<t+1;++l)w[l]=1/b*e[l];for(;Math.abs(w[t])<y;)t--;if(f=0,0===t)return f;if(1===t)return s[0]=-w[0]/w[1],u=n?r<s[0]+y:r<s[0]-y,c=o?a>s[0]-y:a>s[0]+y,(f=u&&c?1:0)&&(n&&s[0]<r?s[0]=r:o&&s[0]>a&&(s[0]=a)),f;for(R.p=w,R.deg=t,l=1;l<=t;l++)_[l-1]=l*w[l];if(0===(d=i.polyZeroes(_,t-1,r,0,a,0,E)).length)return 0;for(l=h=0;l<=d;l++){if(f>t)return f;0===l?(p=r,g=i.ag_horner1(w,t,p),Math.abs(g)<=y&&n&&(s[f++]=r)):(p=m,g=v),l===d?(m=a,h=0):m=E[l],v=i.ag_horner1(w,t,m),h?h=0:Math.abs(v)<y?(l!==d||o)&&(s[f++]=m,h=1):(g<0&&v>0||g>0&&v<0)&&(s[f++]=i.ag_zeroin(p,m,0,R),f>1&&s[f-2]>=s[f-1]-y&&(s[f-2]=.5*(s[f-2]+s[f-1]),f--))}return f}}},"./global/math/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./global/math/num.js");r.d(t,"num",(function(){return i.num}));var n=r("./global/math/vec2.js");r.d(t,"vec2",(function(){return n.vec2}));var a=r("./global/math/vec3.js");r.d(t,"vec3",(function(){return a.vec3}));var o=r("./global/math/vec4.js");r.d(t,"vec4",(function(){return o.vec4}));var s=r("./global/math/quat.js");r.d(t,"quat",(function(){return s.quat}));var l=r("./global/math/mat3.js");r.d(t,"mat3",(function(){return l.mat3}));var u=r("./global/math/mat4.js");r.d(t,"mat4",(function(){return u.mat4}));var c=r("./global/math/noise.js");r.d(t,"noise",(function(){return c.noise}));var f=r("./global/math/curve.js");r.d(t,"curve",(function(){return f.curve}));var d=r("./global/math/box3.js");r.d(t,"box3",(function(){return d.box3}));var h=r("./global/math/tri3.js");r.d(t,"tri3",(function(){return h.tri3}));var m=r("./global/math/lne3.js");r.d(t,"lne3",(function(){return m.lne3}));var b=r("./global/math/pln.js");r.d(t,"pln",(function(){return b.pln}));var p=r("./global/math/ray3.js");r.d(t,"ray3",(function(){return p.ray3}));var v=r("./global/math/sph3.js");r.d(t,"sph3",(function(){return v.sph3}))},"./global/math/lne3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lne3",(function(){return s}));var i,n,a=r("./global/math/vec3.js"),o=r("./global/math/box3.js"),s={};s.$end=o.box3.$max,s.$start=o.box3.$min,s.clone=o.box3.clone,s.closestPointToPointParameter=function(e,t,r){i||(i=a.vec3.create(),n=a.vec3.create());var o=i,s=n;o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],s[0]=e[3]-e[0],s[1]=e[4]-e[1],s[2]=e[5]-e[2];var l=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],u=(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])/l;return r&&(u=Math.max(0,Math.min(1,u))),u},s.copy=o.box3.copy,s.copyStart=a.vec3.copy,s.copyEnd=o.box3.copyMax,s.create=o.box3.create,s.equals=o.box3.equals,s.equalsStartEnd=o.box3.equalsBounds,s.exactEquals=o.box3.equals,s.exactEqualsStartEnd=o.box3.exactEqualsBounds,s.fromArray=o.box3.fromArray,s.fromStartEnd=o.box3.fromBounds,s.get=function(e,t,r){if(r<0||r>1)throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return e[0]=(t[3]-t[0])*r+t[0],e[1]=(t[4]-t[1])*r+t[1],e[2]=(t[5]-t[2])*r+t[2],e},s.getCenter=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},s.getClosestPointToPoint=function(e,t,r,i){return s.get(e,t,s.closestPointToPointParameter(t,r,i))},s.getEnd=o.box3.getMax,s.getDelta=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},s.getStart=o.box3.getMin,s.intersectsNormalConstant=function(e,t,r){var i=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+r,n=t[0]*e[3]+t[1]*e[4]+t[2]*e[5]+r;return i<0&&n>0||n<0&&i>0},s.length=function(e){var t=e[0]-e[3],r=e[1]-e[4],i=e[2]-e[5];return Math.sqrt(t*t+r*r+i*i)},s.set=o.box3.set,s.squaredLength=function(e){var t=e[0]-e[3],r=e[1]-e[4],i=e[2]-e[5];return t*t+r*r+i*i},s.toArray=o.box3.toArray,s.toStartEnd=o.box3.toBounds,s.transformMat4=function(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5];return e[0]=r[0]*i+r[4]*n+r[8]*a+r[12],e[1]=r[1]*i+r[5]*n+r[9]*a+r[13],e[2]=r[2]*i+r[6]*n+r[10]*a+r[14],e[3]=r[0]*o+r[4]*s+r[8]*l+r[12],e[4]=r[1]*o+r[5]*s+r[9]*l+r[13],e[5]=r[2]*o+r[6]*s+r[10]*l+r[14],e},s.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e}},"./global/math/mat3.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat3",(function(){return i.mat3})),i.mat3.fromArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},i.mat3.setArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},i.mat3.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],e}},"./global/math/mat4.js":function(e,t,r){"use strict";r.r(t);var i,n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat4",(function(){return n.mat4})),n.mat4.fromJointMatIndex=function(e,t,r){if(r>=0){var i=12*r;e[0]=t[i],e[1]=t[i+4],e[2]=t[i+8],e[3]=0,e[4]=t[i+1],e[5]=t[i+5],e[6]=t[i+9],e[7]=0,e[8]=t[i+2],e[9]=t[i+6],e[10]=t[i+10],e[11]=0,e[12]=t[i+3],e[13]=t[i+7],e[14]=t[i+11],e[15]=1}else n.mat4.identity(e,e);return e},n.mat4.arcFromForward=function(e,t){i||(i=n.vec3.create());var r=n.vec3.normalize(i,t);if(n.mat4.identity(e),r[2]<-.99999)return e;if(r[2]>.99999)return e[5]=-1,e[10]=-1,e;var a=(1+r[2])/(r[0]*r[0]+r[1]*r[1]);return e[0]=a*r[1]*r[1]-r[2],e[1]=-a*r[0]*r[1],e[2]=r[0],e[4]=e[1],e[5]=a*r[0]*r[0]-r[2],e[6]=r[1],e[8]=-r[0],e[9]=-r[1],e[10]=-r[2],e},n.mat4.copyTranslation=function(e,t){return e[12]=t[12],e[13]=t[13],e[14]=t[14],e},n.mat4.fromMat3=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[3],e[5]=t[4],e[6]=t[5],e[8]=t[6],e[9]=t[7],e[10]=t[8],e[3]=e[7]=e[11]=e[12]=e[13]=e[14]=0,e[15]=1,e},n.mat4.lookAtGL=function(){var e,t,r;return function(i,a,o,s){return e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),n.vec3.subtract(r,a,o),0===n.vec3.squaredLength(r)&&(r[2]=1),n.vec3.normalize(r,r),n.vec3.cross(e,s,r),0===n.vec3.squaredLength(e)&&(r[2]+=1e-4,n.vec3.cross(e,s,r)),n.vec3.normalize(e,e),n.vec3.cross(t,r,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=0,i[4]=t[0],i[5]=t[1],i[6]=t[2],i[7]=0,i[8]=r[0],i[9]=r[1],i[10]=r[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}}(),n.mat4.maxScaleOnAxis=function(e){var t=e[0],r=e[4],i=e[8],n=e[1],a=e[5],o=e[9],s=e[2],l=e[6],u=e[10],c=t*t+r*r+i*i,f=n*n+a*a+o*o,d=s*s+l*l+u*u;return Math.sqrt(Math.max(c,f,d))},n.mat4.perspectiveGL=function(e,t,r,i,a){var o=Math.tan(t/360*Math.PI)*i,s=o*r;return n.mat4.frustum(e,-s,s,-o,o,i,a),e},n.mat4.projectVec3=function(e,t,r){var i=r[0],n=r[1],a=r[2],o=t[0]*i+t[4]*n+t[8]*a+t[12],s=t[1]*i+t[5]*n+t[9]*a+t[13],l=t[2]*i+t[6]*n+t[10]*a+t[14],u=t[3]*i+t[7]*n+t[11]*a+t[15];return e[0]=(o/u+1)/2,e[1]=(s/u+1)/2,e[2]=(l/u+1)/2,e},n.mat4.setTranslation=function(e,t){return e[12]=t[0],e[13]=t[1],e[14]=t[2],e},n.mat4.setTranslationFromValues=function(e,t,r,i){return e[12]=t,e[13]=r,e[14]=i,e},n.mat4.makePerspective=function(e,t,r,i,n,a,o){var s=2*a/(r-t),l=2*a/(i-n),u=(r+t)/(r-t),c=(i+n)/(i-n),f=-(o+a)/(o-a),d=-2*o*a/(o-a);return e[0]=s,e[4]=0,e[8]=u,e[12]=0,e[1]=0,e[5]=l,e[9]=c,e[13]=0,e[2]=0,e[6]=0,e[10]=f,e[14]=d,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,e},n.mat4.makeOrthographic=function(e,t,r,i,n,a,o){var s=1/(r-t),l=1/(i-n),u=1/(o-a),c=(r+t)*s,f=(i+n)*l,d=(o+a)*u;return e[0]=2*s,e[4]=0,e[8]=0,e[12]=-c,e[1]=0,e[5]=2*l,e[9]=0,e[13]=-f,e[2]=0,e[6]=0,e[10]=-2*u,e[14]=-d,e[3]=0,e[7]=0,e[11]=0,e[15]=1,e}},"./global/math/noise.js":function(e,t,r){"use strict";r.r(t),r.d(t,"noise",(function(){return d}));var i,n,a,o,s,l,u,c=r("./global/math/vec3.js"),f=r("./global/math/vec4.js"),d={};d.turbulence=(i=[],n=[],a=[],o=!1,function(e,t,r,s,l,u){o||function(){for(var e=0;e<256;e++)i[e]=f.vec4.fromValues(Math.random()-.5,Math.random()-.5,Math.random()-.5,Math.random()-.5),n[e]=e;for(var t=256;--t;){var r=n[t],s=Math.floor(256*Math.random());n[t]=n[s],n[s]=r}for(var l=0;l<256;l++)n[256+l]=n[l],i[256+l]=i[l],i[512+l]=i[l];for(var u=0;u<15;++u)a[u]=c.vec3.create();o=!0}(),t+=4096,r+=4096,s+=4096,l+=4096;var d=Math.floor(t),h=Math.floor(r),m=Math.floor(s),b=Math.floor(l),p=t-d,v=r-h,g=s-m,y=l-b,w=1+(d&=255),_=1+(h&=255),E=1+(m&=255),T=1+(b&=255),S=n[d],j=n[w],R=n[S+h],P=n[j+h],x=n[S+_],z=n[j+_],O=c.vec3.lerp(a[0],i[R+m+b],i[P+m+b],p),A=c.vec3.lerp(a[1],i[x+m+b],i[z+m+b],p),M=c.vec3.lerp(a[2],i[R+E+b],i[P+E+b],p),C=c.vec3.lerp(a[3],i[R+E+b],i[P+E+b],p),D=c.vec3.lerp(a[4],O,A,v),I=c.vec3.lerp(a[5],M,C,v),L=c.vec3.lerp(a[6],D,I,g);O=c.vec3.lerp(a[7],i[R+m+T],i[P+m+T],p),A=c.vec3.lerp(a[8],i[x+m+T],i[z+m+T],p),M=c.vec3.lerp(a[9],i[R+E+T],i[P+E+T],p),C=c.vec3.lerp(a[10],i[R+E+T],i[P+E+T],p),D=c.vec3.lerp(a[11],O,A,v),I=c.vec3.lerp(a[12],M,C,v);var F=c.vec3.lerp(a[13],D,I,g),G=c.vec3.lerp(a[14],L,F,y);return e[0]+=G[0]*u,e[1]+=G[1]*u,e[2]+=G[2]*u,e}),d.perlin1=(s=!1,l=null,u=null,function(e){s||function(){l=new Array(514),u=new Array(514);var e=0,t=0,r=0;for(e=0;e<256;e++)l[e]=e,u[e]=2*Math.random()-1;for(;--e;)r=l[e],l[e]=l[t=Math.floor(256*Math.random())],l[t]=r;for(e=0;e<258;e++)l[256+e]=l[e],u[256+e]=u[e];s=!0}();var t=e+4096,r=255&Math.floor(t),i=r+1&255,n=t-Math.floor(t),a=n-1,o=n*n*(3-2*n),c=n*u[l[r]];return c+o*(a*u[l[i]]-c)}),d.perlin1D=function(e,t,r,i){for(var n=0,a=e,o=1,s=0;s<i;++s)n+=d.perlin1(a)/o,o*=t,a*=r;return n}},"./global/math/num.js":function(e,t,r){"use strict";r.r(t),r.d(t,"num",(function(){return a}));var i,n,a={};a.EPSILON=1e-6,a.RAD2DEG=180/Math.PI,a.DEG2RAD=Math.PI/180,a.TWO_PI=2*Math.PI,a.PI=Math.PI,a.biCumulative=function(e,t){if(1===t){var r=1-e;return 1-r*r*r}return 2===t?3*e*e-2*e*e*e:e*e*e},a.ceil=Math.ceil,a.clamp=function(e,t,r){return Math.max(t,Math.min(r,e))},a.decimalPlaces=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},a.degrees=function(e){return e*a.RAD2DEG},a.degreesUnwrapped=function(e){return a.unwrapDegrees(e*a.RAD2DEG)},a.dwordToFloat=function(e){var t=(16711680&e)>>16,r=(4278190080&e)>>24,i=(r<<1&255|t>>7)-127,n=(127&t)<<16|(65280&e)>>8<<8|255&e;return 0===n&&-127===i?0:(1-2*(r>>7))*(1+n*Math.pow(2,-23))*Math.pow(2,i)},a.equals=function(e,t){return Math.abs(e-t)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},a.exactEquals=function(e,t){return e===t},a.exponentialDecay=function(e,t,r,i,n){return t*n/i+r*(e*i-t)/(i*i)*(1-Math.pow(Math.E,-i*n/r))},a.fract=function(e){return e-Math.floor(e)},a.fromHalfFloat=function(e){var t=(32768&e)>>15,r=(31744&e)>>10,i=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(i/Math.pow(2,10)):31===r?i?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+i/Math.pow(2,10))},a.floor=Math.floor,a.getLongWordOrder=function(e){return 0===e||255===e||-16777216===e?0:1+a.getLongWordOrder(e>>8)},a.greaterThan=function(e,t){return e>t?1:0},a.greaterThanEqual=function(e,t){return a.isEqual(e,t)||e>t?1:0},a.greaterThanExactEqual=function(e,t){return e>=t?1:0},a.isEven=function(e){return Math.abs(e)%2==0},a.isFloat=function(e){return e%1!=0},a.isFinite=Number.isFinite,a.isInt=function(e){return e%1==0},a.isNaN=Number.isNaN,a.isOdd=function(e){return Math.abs(e)%2==1},a.isPowerOfTwo=function(e){return 0==(e&e-1)&&0!==e},a.lessThan=function(e,t){return e<t?1:0},a.lessThanEqual=function(e,t){return a.isEqual(e,t)||e<t?1:0},a.lessThanExactEqual=function(e,t){return e<=t?1:0},a.log2=function(e){return Math.log(e)*Math.LOG2E},a.max=Math.max,a.min=Math.min,a.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},a.normalizeInt=function(e,t,r,i){var n=r-t,a=e-t,o=a-a/n*n+t;return void 0===i?o:Number(o.toFixed(i))},a.normalizeFloat=function(e,t,r,i){var n=r-t,a=e-t,o=a-Math.floor(a/n)*n+t;return void 0===i?o:Number(o.toFixed(i))},a.radians=function(e){return e*a.DEG2RAD},a.radiansUnwrapped=function(e){return a.unwrapRadians(e*=a.DEG2RAD)},a.randomInt=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},a.randomFloat=function(e,t){return e+Math.random()*(t-e)},a.round=Math.round,a.roundToZero=function(e){return e<0?Math.ceil(e):Math.floor(e)},a.step=a.greaterThan,a.smoothStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},a.smootherStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},a.toHalfFloat=function(e){i||(i=new Float32Array(1),n=new Int32Array(i.buffer)),i[0]=e;var t=n[0],r=t>>16&32768,a=t>>12&2047,o=t>>23&255;return o<103?r:o>142?(r|=31744,r|=(255===o?0:1)&&8388607&t):o<113?r|=((a|=2048)>>114-o)+(a>>113-o&1):(r|=o-112<<10|a>>1,r+=1&a)},a.colorFromLinear=function(e){return Math.min(Math.floor(255*e),255)},a.linearFromColor=function(e){return e/255},a.hexFromLinear=function(e){return a.hexFromColor(a.colorFromLinear(e))},a.hexFromColor=function(e){return(256|e).toString(16).slice(1)},a.unwrapDegrees=function(e){return(e%=360)>180&&(e-=360),e<-180&&(e+=360),e},a.unwrapRadians=function(e){return(e%=a.TWO_PI)>a.PI&&(e-=a.TWO_PI),e<-a.PI&&(e+=a.TWO_PI),e}},"./global/math/pln.js":function(e,t,r){"use strict";r.r(t),r.d(t,"pln",(function(){return c}));var i,n,a=r("./global/math/num.js"),o=r("./global/math/vec3.js"),s=r("./global/math/vec4.js"),l=r("./global/math/mat3.js"),u=r("./global/math/box3.js"),c={};c.$normal=function(e){return e.subarray(0,3)},c.clone=s.vec4.clone,c.constant=function(e){return e[3]},c.copy=s.vec4.copy,c.create=s.vec4.create,c.distanceToPoint=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},c.distanceToPositionRadius=function(e,t,r){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-r},c.distanceToSph3=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3]},c.distanceToValues=function(e,t,r,i){return e[0]*t+e[1]*r+e[2]*i+e[3]},c.equals=s.vec4.equals,c.equalsNormalConstant=function(e,t,r){var i=e[0],n=e[1],o=e[2],s=e[3],l=t[0],u=t[1],c=t[2],f=r;return Math.abs(i-l)<=a.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=a.num.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=a.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-f)<=a.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))},c.exactEquals=s.vec4.exactEquals,c.exactEqualsNormalConstant=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r},c.extract=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},c.fromNormalConstant=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r,e},c.fromCoplanarPoints=function(e,t,r,i){var n=i[0]-r[0],a=i[1]-r[1],o=i[2]-r[2],s=t[0]-r[0],l=t[1]-r[1],u=t[2]-r[2],c=a*u-o*l,f=o*s-n*u,d=n*l-a*s,h=c*c+f*f+d*d;if(!(h>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return h=1/Math.sqrt(h),e[0]=c*h,e[1]=f*h,e[2]=d*h,e[3]=-(t[0]*e[0]+t[1]*e[1]+t[2]*e[2]),e},c.fromNormalAndCoplanarPoint=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e},c.getCoplanarPoint=function(e,t){return e[0]=t[0]*-t[3],e[1]=t[1]*-t[3],e[2]=t[2]*-t[3],e},c.getIntersectLne3=function(e,t,r){var i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5];e[0]=0,e[1]=0,e[2]=0;var u=o-i,c=s-n,f=l-a,d=t[0]*u+t[1]*c+t[2]*f;if(0===d){if(t[0]*i+t[1]*n+t[2]*a+t[3]===0)return e[0]=i,e[1]=n,e[2]=a,e;throw new Error("Denominator error")}var h=(i*t[0]+n*t[1]+a*t[2]+t[3])/d;if(h<0||h>1)throw new Error("Normalization error");return e[0]=u*h+i,e[1]=c*h+n,e[2]=f*h+a,e},c.getIntersectStartEnd=function(e,t,r,n){return i||(i=u.box3.create()),u.box3.from(i,r,n),c.getIntersectLne3(e,t,i)},c.getNormal=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},c.getOrthoPoint=function(e,t,r){var i=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3];return o.vec3.multiplyScalar(e,t,i),e},c.getProjectedPoint=function(e,t,r){return c.getOrthoPoint(e,t,r),e[0]=-(e[0]-r[0]),e[1]=-(e[1]-r[1]),e[2]=-(e[2]-r[2]),e},c.intersectsBounds=function(){var e;return function(t,r,i){return e||(e=u.box3.create()),u.box3.from(e,r,i),u.box3.intersectsPln(e,t)}}(),c.intersectsBox3=function(e,t){return u.box3.intersectsPln(t,e)},c.intersectsLne3=function(e,t){var r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],i=e[0]*t[3]+e[1]*t[4]+e[2]*t[5]+e[3];return r<0&&i>0||i<0&&r>0},c.intersectsPositionRadius=function(e,t,r){var i=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(i-e[3])<=r},c.intersectsSph3=function(e,t){var r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(r-e[3])<=t[3]},c.intersectsStartEnd=function(e,t,r){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],n=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3];return i<0&&n>0||n<0&&i>0},c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-1*t[3],e},c.normalize=function(e,t){var r=t[0],i=t[1],n=t[2],a=r*r+i*i+n*n;if(!(a>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},c.set=s.vec4.set,c.setAndNormalize=function(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,c.normalize(e,e)},c.setArray=s.vec4.setArray,c.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],e},c.transformMat4=function(e,t,r,i){i||n||(n=l.mat3.create()),i=i||l.mat3.normalFromMat4(n,r);var a=t[0]*-t[3],o=t[1]*-t[3],s=t[2]*-t[3],u=r[0]*a+r[4]*o+r[8]*s+r[12],c=r[1]*a+r[5]*o+r[9]*s+r[13],f=r[2]*a+r[6]*o+r[10]*s+r[14],d=t[0],h=t[1],m=t[2],b=d*i[0]+h*i[3]+m*i[6],p=d*i[1]+h*i[4]+m*i[7],v=d*i[2]+h*i[5]+m*i[8],g=b*b+p*p+v*v;if(!(g>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return g=1/Math.sqrt(g),e[0]=b*g,e[1]=p*g,e[2]=v*g,e[3]=-(u*e[0]+c*e[1]+f*e[2]),e},c.translate=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e}},"./global/math/quat.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"quat",(function(){return i.quat})),i.quat.exp=function(e,t){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r?(e[0]=Math.sin(r)*t[0]/r,e[1]=Math.sin(r)*t[1]/r,e[2]=Math.sin(r)*t[2]/r,e[3]=Math.cos(r)):(e[0]=0,e[1]=0,e[2]=0,e[3]=1),e},i.quat.ln=function(e,t){var r=i.quat.length(t);if(r>1.0001||r<.99999)e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0;else if(r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])){var n=Math.atan2(r,t[3])/r;e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=0}else e[0]=0,e[1]=0,e[2]=0,e[3]=0;return e},i.quat.pow=function(e,t,r){return 1===r?i.quat.copy(e,t):(i.quat.ln(e,t),e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=r,i.quat.exp(e,e),e)}},"./global/math/ray3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ray3",(function(){return d}));var i,n,a,o,s=r("./global/math/vec3.js"),l=(r("./global/math/mat4.js"),r("./global/math/pln.js"),r("./global/math/sph3.js")),u=r("./global/math/box3.js"),c=r("./global/math/tri3.js"),f=r("./global/math/mat3.js"),d={};d.$origin=u.box3.$min,d.$direction=u.box3.$max,d.clone=u.box3.clone,d.copy=u.box3.copy,d.copyOrigin=u.box3.copyMin,d.copyDirection=u.box3.copyMax,d.create=u.box3.create,d.distance=function(e,t){return Math.sqrt(d.squaredDistance(e,t))},d.distanceNormalConstant=function(e,t,r){var i=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;if(0===i){if(0===n)return 0;throw new Error("Determinant error")}var a=-n/i;return a>=0?a:null},d.distancePln=function(e,t){var r=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];if(0===r){if(0===i)return 0;throw new Error("Determinant error")}var n=-i/r;return n>=0?n:null},d.equals=u.box3.equals,d.equalsOriginDestination=u.box3.equalsBounds,d.exactEquals=u.box3.exactEquals,d.exactEqualsOriginDestination=u.box3.exactEqualsBounds,d.from=u.box3.from,d.fromArray=u.box3.fromArray,d.fromStartEnd=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],d.normalize(e,e)},d.fromMat4=function(e,t){return i||(i=f.mat3.create()),e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-1,s.vec3.transformMat4(d.$origin(e),d.$origin(e),t),f.mat3.fromMat4(i,t),s.vec3.transformMat3(d.$direction(e),d.$direction(e),i),d.normalize(e,e)},d.fromPerspective=function(e,t,r,i){var n=2*(t[0]-i[0])/i[2]-1,a=2*(t[1]-i[1])/i[3]-1,o=r[3]*n+r[7]*a+-1*r[11]+r[15],s=r[3]*n+r[7]*a+1*r[11]+r[15];if(0===o||0===s)throw new Error("Perspective Divide Error");return e[0]=(r[0]*n+r[4]*a+-1*r[8]+r[12])/o,e[1]=(r[1]*n+r[5]*a+-1*r[9]+r[13])/o,e[2]=(r[2]*n+r[6]*a+-1*r[10]+r[14])/o,e[3]=(r[0]*n+r[4]*a+1*r[8]+r[12])/s-e[0],e[4]=(r[1]*n+r[5]*a+1*r[9]+r[13])/s-e[1],e[5]=(r[2]*n+r[6]*a+1*r[10]+r[14])/s-e[2],d.normalize(e,e)},d.unproject=function(e,t,r,i){var n=[t[0],t[1],0],a=[t[0],t[1],1];s.vec3.unproject(n,n,r,i),s.vec3.unproject(a,a,r,i),d.fromStartEnd(e,n,a)},d.get=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e},d.getDirection=u.box3.getMax,d.getClosestPointToPoint=function(e,t,r){var i=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=i*t[3]+n*t[4]+a*t[5];return o<0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):d.get(e,t,o),e},d.getIntersectBounds=function(e,t,r,i){var n,a,o,s,l,u,c=1/t[3],f=1/t[4],h=1/t[5];return c>=0?(n=(r[0]-t[0])*c,a=(i[0]-t[0])*c):(n=(i[0]-t[0])*c,a=(r[0]-t[0])*c),f>=0?(o=(r[1]-t[1])*f,s=(i[1]-t[1])*f):(o=(i[1]-t[1])*f,s=(r[1]-t[1])*f),n>s||o>a?null:((o>n||n!=n)&&(n=o),(s<a||a!=a)&&(a=s),h>=0?(l=(r[2]-t[2])*h,u=(i[2]-t[2])*h):(l=(i[2]-t[2])*h,u=(r[2]-t[2])*h),n>u||l>a?null:((l>n||n!=n)&&(n=l),(u<a||a!=a)&&(a=u),a<0?null:d.get(e,t,n>=0?n:a)))},d.getIntersectBox3=function(e,t,r){return n||(n=s.vec3.create(),a=s.vec3.create()),u.box3.getMin(n,r),u.box3.getMax(a,r),d.getIntersectBounds(e,t,n,a)},d.getIntersectTri3=function(){var e,t,r;return function(i,n,a,o){return e||(e=s.vec3.create(),t=s.vec3.create(),r=s.vec3.create()),c.tri3.getV1(e,a),c.tri3.getV2(t,a),c.tri3.getV3(r,a),d.getIntersectVertices(i,n,e,t,r,o)}}(),d.getIntersectVertices=function(){var e,t,r,i,n,a;return function(o,l,u,c,f,h){e||(e=s.vec3.create(),t=s.vec3.create(),r=s.vec3.create(),i=s.vec3.create(),n=s.vec3.create(),a=s.vec3.create());var m,b=d.getOrigin(n,l),p=d.getDirection(a,l),v=s.vec3.subtract(e,b,u),g=s.vec3.subtract(t,c,u),y=s.vec3.subtract(r,f,u),w=s.vec3.cross(i,g,y),_=s.vec3.dot(p,w);if(_>0){if(h)return null;m=1}else{if(!(_<0))return null;m=-1,_=-_}s.vec3.cross(y,v,y);var E=m*s.vec3.dot(p,y);if(E<0)return null;s.vec3.cross(g,g,v);var T=m*s.vec3.dot(p,g);if(T<0)return null;if(E+T>_)return null;var S=-m*s.vec3.dot(v,w);return S<0?null:d.get(o,l,S/_)}}(),d.getIntersectNormalConstant=function(e,t,r,i){var n=d.distanceNormalConstant(t,r,i);return null!==n?d.get(e,t,n):null},d.getIntersectPln=function(e,t,r){var i=d.distancePln(t,r);return null!==i?d.get(e,t,i):null},d.getIntersectPositionRadius=function(e,t,r,i){return o||(o=l.sph3.create()),l.sph3.from(o,r,i),d.getIntersectSph3(e,t,o)},d.getIntersectSph3=function(e,t,r){var i=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=r[3]*r[3],s=i*t[3]+n*t[4]+a*t[5],l=i*i+n*n+a*a-s*s;if(l>o)return null;var u=Math.sqrt(o-l),c=s-u,f=s+u;return c<0&&f<0?null:c<0?d.get(e,t,f):d.get(e,t,c)},d.getOrigin=u.box3.getMin,d.intersectsBox3=function(){var e;return function(t,r){return e||(e=s.vec3.create()),d.vec3_0=null!==d.getIntersectBox3(e,t,r)}}(),d.intersectsBounds=function(){var e;return function(t,r,i){return e||(e=s.vec3.create()),null!==d.getIntersectBounds(e,t,r,i)}}(),d.intersectsNormalConstant=function(e,t,r){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;return 0===i||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*i<0},d.intersectsPln=function(e,t){var r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];return 0===r||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*r<0},d.intersectsPositionRadius=function(e,t,r){return d.distance(e,t)<=r},d.intersectsSph3=function(e,t){return d.distance(e,t)<=t[3]},d.lookAt=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],d.normalize(e,e)},d.normalize=function(e,t){e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]);var r=t[3],i=t[4],n=t[5],a=r*r+i*i+n*n;if(!(a>0))throw e[1]=0,e[2]=0,e[3]=0,new Error("Normalization error");return a=1/Math.sqrt(a),e[3]=r*a,e[4]=i*a,e[5]=n*a,e},d.recast=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e[3]=t[3],e[4]=t[4],e[5]=t[5],e},d.set=u.box3.set,d.SORT=function(e,t){return e.distance-t.distance},d.squaredDistance=function(){var e,t;return function(r,i){e||(e=s.vec3.create(),t=s.vec3.create()),e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2];var n=e[0]*r[3]+e[1]*r[4]+e[2]*r[5];return n<0?(d.getOrigin(t,r),s.vec3.squaredDistance(t,i)):(d.get(e,r,n),s.vec3.squaredDistance(e,i))}}(),d.toArray=u.box3.toArray,d.toOriginDirection=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},d.transformMat4=function(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3]+t[0],s=t[4]+t[1],l=t[5]+t[2],u=r[3]*i+r[7]*n+r[11]*a+r[15]||1,c=r[3]*o+r[7]*s+r[11]*l+r[15]||1;return e[0]=(r[0]*i+r[4]*n+r[8]*a+r[12])/u,e[1]=(r[1]*i+r[5]*n+r[9]*a+r[13])/u,e[2]=(r[2]*i+r[6]*n+r[10]*a+r[14])/u,e[3]=(r[0]*o+r[4]*s+r[8]*l+r[12])/c-e[0],e[4]=(r[1]*o+r[5]*s+r[9]*l+r[13])/c-e[1],e[5]=(r[2]*o+r[6]*s+r[10]*l+r[14])/c-e[2],d.normalize(e,e)},d.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/sph3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sph3",(function(){return d}));var i,n,a,o,s=r("./global/math/vec3.js"),l=r("./global/math/vec4.js"),u=r("./global/math/mat4.js"),c=r("./global/math/pln.js"),f=r("./global/math/box3.js"),d={},h=null;d.$position=c.pln.$normal,d.clone=l.vec4.clone,d.containsPoint=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n<=e[3]*e[3]},d.copy=l.vec4.copy,d.create=function(){return new Float32Array([0,0,0,0])},d.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]+e[3];return Math.sqrt(r*r+i*i+n*n)-a},d.distanceToPoint=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)-e[3]},d.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},d.equals=l.vec4.equals,d.equalsPositionRadius=c.pln.equalsNormalConstant,d.exactEquals=l.vec4.exactEquals,d.exactEqualsPositionRadius=c.pln.exactEqualsNormalConstant,d.extract=c.pln.extract,d.fromBox3=function(e,t){var r=t[3]-t[0],i=t[4]-t[1],n=t[5]-t[2];return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e[3]=.5*Math.sqrt(r*r+i*i+n*n),e},d.fromBounds=function(e,t,r){var i=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return e[0]=.5*(t[0]+r[0]),e[1]=.5*(t[1]+r[1]),e[2]=.5*(t[2]+r[2]),e[3]=.5*Math.sqrt(i*i+n*n+a*a),e},d.fromPositionRadius=c.pln.fromNormalConstant,d.fromTranslationRadius=function(e,t,r){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=r,e},d.fromMat4=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=u.mat4.maxScaleOnAxis(t),e},d.union=function(e,t,r){i||(i=s.vec3.create(),n=s.vec3.create(),s.vec3.create(),a=s.vec3.create());var l=d.extract(t,i),u=d.extract(r,n);s.vec3.subtract(a,n,i);var c=s.vec3.length(a);if(l>=c+u)return e===t?e:d.copy(e,t);if(u>=c+l)return e===r?e:d.copy(e,r);o||(o=s.vec3.create());var f=.5*(l+c+u);return s.vec3.scale(o,a,(-l+f)/c),s.vec3.add(o,i,o),d.fromPositionRadius(e,o,f)},d.unionPositionRadius=function(e,t,r,i){return d.union(e,t,d.fromPositionRadius(null,r,i))},d.getClampedPoint=function(e,t,r){e[0]=r[0],e[1]=r[1],e[2]=r[2];var i=t[0]-r[0],n=t[1]-r[1],a=t[2]-r[2];return i*i+n*n+a*a>t[3]*t[3]&&(e[0]=e[0]-t[0],e[1]=e[1]-t[1],e[2]=e[2]-t[2],s.vec3.normalize(e,e),e[0]=e[0]*t[3]+t[0],e[1]=e[1]*t[3]+t[1],e[2]=e[2]*t[3]+t[2]),e},d.getPointFromLongLat=function(e,t,r,i){return e[0]=t[0]+t[3]*Math.sin(i)*Math.cos(r),e[1]=t[1]+t[3]*Math.sin(i)*Math.sin(r),e[2]=t[2]+t[3]*Math.cos(i),e},d.getPosition=c.pln.getNormal,d.intersectsSph3=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=e[3]+t[3];return r*r+i*i+n*n<=a*a},d.intersectsBox3=function(e,t){return f.box3.intersectsSph3(t,e)},d.intersectsBounds=function(e,t,r){var i=Math.max(t[0],Math.min(r[0],e[0]))-e[0],n=Math.max(t[1],Math.min(r[1],e[1]))-e[1],a=Math.max(t[2],Math.min(r[2],e[2]))-e[2];return i*i+n*n+a*a<=e[3]*e[3]},d.intersectsPositionRadius=function(e,t,r){var i=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],o=e[3]+r;return i*i+n*n+a*a<=o*o},d.intersectsPln=function(e,t){return c.pln.intersectsSph3(t,e)},d.intersectsNormalConstant=function(e,t,r){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];return Math.abs(i-r)<=e[3]},d.isEmpty=function(e){return e[3]<=0},d.radius=c.pln.constant,d.set=l.vec4.set,d.setArray=l.vec4.setArray,d.setPoints=function(e,t,r){h||(h=f.box3.create()),r?(e[0]=r[0],e[1]=r[1],e[2]=r[2]):(f.box3.setPoints(h,t),e[0]=.5*(h[0]+h[3]),e[1]=.5*(h[1]+h[4]),e[2]=.5*(h[2]+h[5]));for(var i=0,n=0;n<t.length;n++){var a=e[0]-t[n][0],o=e[1]-t[n][1],s=e[2]-t[n][2];i=Math.max(i,a*a+o*o+s*s)}return e[3]=Math.sqrt(i),e},d.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],a=t[3]+e[3];return r*r+i*i+n*n-a*a},d.squaredDistanceToPoint=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n-e[3]},d.toArray=l.vec4.toArray,d.toBounds=function(e,t,r){h||(h=f.box3.create()),f.box3.fromSph3(h,e),f.box3.toBounds(h,t,r)},d.toPositionRadius=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},d.transformMat4=function(e,t,r){var i=t[0],n=t[1],a=t[2],o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],s=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],l=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return e[0]=r[0]*i+r[4]*n+r[8]*a+r[12],e[1]=r[1]*i+r[5]*n+r[9]*a+r[13],e[2]=r[2]*i+r[6]*n+r[10]*a+r[14],e[3]=t[3]*Math.sqrt(Math.max(o,s,l)),e},d.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/tri3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tri3",(function(){return c}));var i,n,a,o=r("./global/math/vec3.js"),s=r("./global/math/mat3.js"),l=r("./global/math/pln.js"),u=r("./global/math/lne3.js"),c={};c.$v1=u.lne3.$start,c.$v2=u.lne3.$end,c.$v3=function(e){return e.subarray(6,9)},c.area=function(e){var t=e[6]-e[3],r=e[7]-e[4],i=e[8]-e[5],n=e[0]-e[3],a=e[1]-e[4],o=e[2]-e[5],s=t*o-i*a,l=i*n-t*o,u=t*a-r*n;return.5*Math.sqrt(s*s+l*l+u*u)},c.create=function(){var e=new Float32Array(9);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e},c.clone=s.mat3.clone,c.contains=function(){var e;return function(t,r){return e||(e=o.vec3.create()),c.getBaryCentricCoordinates(e,t,r),e[0]>=0&&e[1]>=0&&e[0]+e[1]<=1}}(),c.copy=s.mat3.copy,c.fromVertices=function(e,t,r,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e[6]=i[0],e[7]=i[1],e[8]=i[2],e},c.fromArray=s.mat3.fromArray,c.getBaryCentricCoordinates=function(e,t,r){var i=t[6]-t[0],n=t[7]-t[1],a=t[8]-t[2],o=t[3]-t[0],s=t[4]-t[1],l=t[5]-t[2],u=r[0]-i,c=r[1]-n,f=r[2]-a,d=i*i+n*n+a*a,h=i*o+n*s+a*l,m=i*u+n*c+a*f,b=o*o+s*s+l*l,p=o*u+s*c+l*f,v=d*b-h*h;if(0===v)throw e[0]=-2,e[1]=-1,e[2]=-1,new Error("Denominator error");var g=1/v,y=(b*m-h*p)*g,w=(d*p-h*m)*g;return e[0]=1-y-w,e[1]=w,e[2]=y,e},c.getClosestEdgeToPoint=function(e,t,r,s){i||(i=o.vec3.create(),n=o.vec3.create(),a=[u.lne3.create(),u.lne3.create(),u.lne3.create()]);var l=c.getClosestPointToPoint(i,t,r);u.lne3.set(a[0],t[0],t[1],t[2],t[3],t[4],t[5]),u.lne3.set(a[1],t[3],t[4],t[5],t[6],t[7],t[8]),u.lne3.set(a[2],t[6],t[7],t[8],t[0],t[1],t[2]);for(var f,d=1/0,h=0;h<a.length;h++){var m=u.lne3.getClosestPointToPoint(n,a[h],l,!0),b=o.vec3.squaredDistance(m,l);b<d&&(d=b,e[0]=a[h][0],e[1]=a[h][1],e[2]=a[h][2],e[3]=a[h][3],e[4]=a[h][4],e[5]=a[h][5],f=h)}if(s)switch(f){case 0:s.edgeStart=0,s.edgeEnd=1;break;case 1:s.edgeStart=1,s.edgeEnd=2;break;default:s.edgeStart=2,s.edgeEnd=1}return e},c.getClosestPointToPoint=function(){var e,t,r,i,n,a,s;return function(f,d,h){if(e||(e=l.pln.create(),t=[u.lne3.create(),u.lne3.create(),u.lne3.create()],r=o.vec3.create(),i=o.vec3.create(),n=o.vec3.create(),a=o.vec3.create(),s=o.vec3.create()),c.getV1(n,d),c.getV2(a,d),c.getV3(s,d),l.pln.fromCoplanarPoints(e,n,a,s),l.pln.getProjectedPoint(r,e,h),!0===c.contains(d,r))f[0]=r[0],f[1]=r[1],f[2]=r[2];else{u.lne3.set(t[0],d[0],d[1],d[2],d[3],d[4],d[5]),u.lne3.set(t[1],d[3],d[4],d[5],d[6],d[7],d[8]),u.lne3.set(t[2],d[6],d[7],d[8],d[0],d[1],d[2]);for(var m=1/0,b=0;b<t.length;b++){u.lne3.getClosestPointToPoint(i,t[b],r,!0);var p=o.vec3.squaredDistance(r,i);p<m&&(m=p,f[0]=i[0],f[1]=i[1],f[2]=i[2])}}return f}}(),c.getClosestVertexToPoint=function(){var e,t,r;return function(i,n,a,s){e||(e=o.vec3.create(),t=o.vec3.create(),r=o.vec3.create()),c.getClosestPointToPoint(i,n,a);for(var l,u,f,d,h,m=1/0,b=[c.getV1(e,n),c.getV2(t,n),c.getV3(r,n)],p=0;p<b.length;p++)(l=o.vec3.squaredDistance(b[p],i))<m&&(m=l,u=b[p][0],f=b[p][1],d=b[p][2],h=p);return s&&(s.closest=h),i[0]=u,i[1]=f,i[2]=d,i}}(),c.getMidpoint=function(e,t){return e[0]=(t[0]+t[3]+t[6])*(1/3),e[1]=(t[1]+t[4]+t[7])*(1/3),e[2]=(t[2]+t[5]+t[8])*(1/3),e};var f,d,h,m=null;c.getNormalFromVertices=function(e,t,r,i){return m||(m=c.create()),c.fromVertices(m,t,r,i),c.getNormal(e,m)},c.getNormal=function(e,t){var r=t[6]-t[3],i=t[7]-t[4],n=t[8]-t[5],a=t[0]-t[3],o=t[1]-t[4],s=t[2]-t[5],l=i*s-n*o,u=n*a-r*s,c=r*o-i*a,f=l*l+u*u+c*c;if(!(f>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return f=1/Math.sqrt(f),e[0]=l*f,e[1]=u*f,e[2]=c*f,e},c.getV1=u.lne3.getStart,c.getV2=u.lne3.getEnd,c.getV3=function(e,t){return e[0]=t[6],e[1]=t[7],e[2]=t[8],e},c.toArray=s.mat3.toArray,c.toVertices=function(e,t,r,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[0],r[1]=e[1],r[2]=e[2],i[0]=e[0],i[1]=e[1],i[2]=e[2],e},c.transformMat4=function(e,t,r){return f||(f=o.vec3.create(),d=o.vec3.create(),h=o.vec3.create()),c.getV1(f,t),c.getV2(d,t),c.getV3(h,t),o.vec3.transformMat4(f,f,r),o.vec3.transformMat4(d,d,r),o.vec3.transformMat4(h,h,r),c.fromVertices(e,f,d,h)}},"./global/math/vec2.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec2",(function(){return i.vec2})),i.vec2.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e},i.vec2.isEmpty=function(e){return 0===e[0]&&0===e[1]},i.vec2.divideScalar=function(e,t,r){return i.vec2.multiplyScalar(e,t,1/r)},i.vec2.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},i.vec2.setScalar=function(e,t){return e[0]=t,e[1]=t,e},i.vec2.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e}},"./global/math/vec3.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec3",(function(){return i.vec3}));var n,a,o,s,l=r("./global/math/num.js");i.vec3.X_AXIS=i.vec3.fromValues(1,0,0),i.vec3.Y_AXIS=i.vec3.fromValues(0,1,0),i.vec3.Z_AXIS=i.vec3.fromValues(0,0,1),i.vec3.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e},i.vec3.degrees=function(e,t){return e[0]=l.num.degrees(t[0]),e[1]=l.num.degrees(t[1]),e[2]=l.num.degrees(t[2]),e},i.vec3.degreesUnwrapped=function(e,t){return e[0]=l.num.degreesUnwrapped(t[0]),e[1]=l.num.degreesUnwrapped(t[1]),e[2]=l.num.degreesUnwrapped(t[2]),e},i.vec3.direction=function(e,t,r){return i.vec3.subtract(e,t,r),i.vec3.normalize(e,e),e},i.vec3.directionFromQuat=function(e,t,r){return i.vec3.transformQuat(e,t,r)},i.vec3.directionFromMat4=function(e,t,r){return n||(n=i.quat.create()),i.mat4.getRotation(n,r),i.vec3.transformQuat(e,t,n)},i.vec3.divideScalar=function(e,t,r){return i.vec3.multiplyScalar(e,t,1/r)},i.vec3.euler={},i.vec3.euler.DEFAULT_ORDER="XYZ",i.vec3.euler.fromQuat=function(e,t,r=i.vec3.euler.DEFAULT_ORDER){return a||(a=i.mat4.create()),i.mat4.fromQuat(a,t),i.vec3.euler.fromMat4(e,a,r)},i.vec3.euler.fromMat4=function(e,t,r=i.vec3.euler.DEFAULT_ORDER){var n=t[0],a=t[4],o=t[8],s=t[1],u=t[5],c=t[9],f=t[2],d=t[6],h=t[10],m=l.num.clamp;if("XYZ"===r)e[1]=Math.asin(m(o,-1,1)),Math.abs(o)<.99999?(e[0]=Math.atan2(-c,h),e[2]=Math.atan2(-a,n)):(e[0]=Math.atan2(d,u),e[2]=0);else if("YXZ"===r)e[0]=Math.asin(-m(c,-1,1)),Math.abs(c)<.99999?(e[1]=Math.atan2(o,h),e[2]=Math.atan2(s,u)):(e[1]=Math.atan2(-f,n),e[2]=0);else if("ZXY"===r)e[0]=Math.asin(m(d,-1,1)),Math.abs(d)<.99999?(e[1]=Math.atan2(-f,h),e[2]=Math.atan2(-a,u)):(e[1]=0,e[2]=Math.atan2(s,n));else if("ZYX"===r)e[1]=Math.asin(-m(f,-1,1)),Math.abs(f)<.99999?(e[0]=Math.atan2(d,h),e[2]=Math.atan2(s,n)):(e[0]=0,e[2]=Math.atan2(-a,u));else if("YZX"===r)e[2]=Math.asin(m(s,-1,1)),Math.abs(s)<.99999?(e[0]=Math.atan2(-c,u),e[1]=Math.atan2(-f,n)):(e[0]=0,e[1]=Math.atan2(o,h));else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,new Error("Unrecognised euler order: "+r);e[2]=Math.asin(-m(a,-1,1)),Math.abs(a)<.99999?(e[0]=Math.atan2(d,u),e[1]=Math.atan2(o,n)):(e[0]=Math.atan2(-c,h),e[1]=0)}return e},i.vec3.euler.getQuat=function(e,t,r=i.vec3.euler.DEFAULT_ORDER){var n=t[0],a=t[1],o=t[2],s=Math.cos(n/2),l=Math.cos(a/2),u=Math.cos(o/2),c=Math.sin(n/2),f=Math.sin(a/2),d=Math.sin(o/2);if("XYZ"===r)e[0]=c*l*u+s*f*d,e[1]=s*f*u-c*l*d,e[2]=s*l*d+c*f*u,e[3]=s*l*u-c*f*d;else if("YXZ"===r)e[0]=c*l*u+s*f*d,e[1]=s*f*u-c*l*d,e[2]=s*l*d-c*f*u,e[3]=s*l*u+c*f*d;else if("ZXY"===r)e[0]=c*l*u-s*f*d,e[1]=s*f*u+c*l*d,e[2]=s*l*d+c*f*u,e[3]=s*l*u-c*f*d;else if("ZYX"===r)e[0]=c*l*u-s*f*d,e[1]=s*f*u+c*l*d,e[2]=s*l*d-c*f*u,e[3]=s*l*u+c*f*d;else if("YZX"===r)e[0]=c*l*u+s*f*d,e[1]=s*f*u+c*l*d,e[2]=s*l*d-c*f*u,e[3]=s*l*u-c*f*d;else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,e[3]=1,new Error("Unrecognised euler order: "+r);e[0]=c*l*u-s*f*d,e[1]=s*f*u-c*l*d,e[2]=s*l*d+c*f*u,e[3]=s*l*u+c*f*d}return e},i.vec3.euler.getQuatFromValues=function(e,t,r,n,a){return o||(o=i.vec3.create()),i.vec3.set(o,t,r,n),i.vec3.euler.getQuat(e,o,a)},i.vec3.euler.getQuatFromDegrees=function(e,t,r){return o||(o=i.vec3.create()),i.vec3.radians(o,t),i.vec3.euler.getQuat(e,o,r)},i.vec3.euler.getQuatFromDegreeValues=function(e,t,r,n,a){return o||(o=i.vec3.create()),i.vec3.set(o,t,r,n),i.vec3.radians(o,o),i.vec3.euler.getQuat(e,o,a)},i.vec3.euler.fromQuatInDegrees=function(e,t,r){return i.vec3.euler.fromQuat(e,t,r),i.vec3.degrees(e,e)},i.vec3.exponentialDecay=function(e,t,r,i,n,a){return e[0]=l.num.exponentialDecay(t[0],r[0],i,n,a),e[1]=l.num.exponentialDecay(t[1],r[1],i,n,a),e[2]=l.num.exponentialDecay(t[2],r[2],i,n,a),e},i.vec3.fromSpherical=function(e,t,r){var i=t[0],n=t[1],a=t[2];return e[0]=a*Math.sin(i)*Math.sin(n),e[1]=a*Math.cos(n),e[2]=a*Math.cos(i)*Math.sin(n),r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),e},i.vec3.getSpherical=function(e,t){var r=0,n=0,a=i.vec3.length(t);return 0!==a&&(r=Math.acos(Math.max(t[1]/a,Math.min(-1,1))),n=Math.atan2(t[0],t[2])),e[0]=r,e[1]=n,e[2]=a,e},i.vec3.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]},i.vec3.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},i.vec3.polarToCartesian=function(e,t,r,i){return e[0]=t*Math.cos(r)*Math.sin(i),e[1]=t*Math.sin(r),e[2]=t*Math.cos(r)*Math.cos(i),e},i.vec3.project=function(e,t,r,i){var n=t[0],a=t[1],o=t[2],s=r[0]*n+r[4]*a+r[8]*o+r[12],l=r[1]*n+r[5]*a+r[9]*o+r[13],u=r[3]*n+r[7]*a+r[11]*o+r[15],c=(s/u+1)/2,f=1-(l/u+1)/2;return e[0]=c*i[2]+i[0],e[1]=f*i[3]+i[1],e[2]=u,e},i.vec3.radians=function(e,t){return e[0]=l.num.radians(t[0]),e[1]=l.num.radians(t[1]),e[2]=l.num.radians(t[2]),e},i.vec3.radiansUnwrapped=function(e,t){return e[0]=l.num.radiansUnwrapped(t[0]),e[1]=l.num.radiansUnwrapped(t[1]),e[2]=l.num.radiansUnwrapped(t[2]),e},i.vec3.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e},i.vec3.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e},i.vec3.unproject=function(e,t,r,n){s||(s=i.vec4.create());var a=t[0],o=t[1],l=t[2];if(s[0]=2*(a-n[0])/n[2]-1,s[1]=2*(o-n[1])/n[3]-1,s[2]=2*l-1,s[3]=1,i.vec4.transformMat4(s,s,r),0===s[3])throw e[0]=0,e[1]=0,e[2]=0,new Error("Perspective divide error");return e[0]=s[0]/s[3],e[1]=s[1]/s[3],e[2]=s[2]/s[3],e},i.vec3.unwrapDegrees=function(e,t){return e[0]=l.num.unwrapDegrees(t[0]),e[1]=l.num.unwrapDegrees(t[1]),e[2]=l.num.unwrapDegrees(t[2]),e},i.vec3.unwrapRadians=function(e,t){return e[0]=l.num.unwrapRadians(t[0]),e[1]=l.num.unwrapRadians(t[1]),e[2]=l.num.unwrapRadians(t[2]),e},i.vec3.toRGB=function(e,t){return e[0]=l.num.colorFromLinear(t[0]),e[1]=l.num.colorFromLinear(t[1]),e[2]=l.num.colorFromLinear(t[2]),e},i.vec3.toRGBA=function(e,t,r=1){return e[0]=l.num.colorFromLinear(t[0]),e[1]=l.num.colorFromLinear(t[1]),e[2]=l.num.colorFromLinear(t[2]),e[3]=l.num.colorFromLinear(r),e},i.vec3.fromRGB=function(e,t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e},i.vec3.toHex=function(e){return"#"+l.num.hexFromLinear(e[0])+l.num.hexFromLinear(e[1])+l.num.hexFromLinear(e[2])},i.vec3.toHexA=function(e,t=1){return"#"+l.num.hexFromLinear(e[0])+l.num.hexFromLinear(e[1])+l.num.hexFromLinear(e[2])+l.num.hexFromColor(t)},i.vec3.fromHex=function(e,t){if(e[0]=0,e[1]=0,e[2]=0,4===t.length||5===t.length)e[0]=("0x"+t[1]+t[1])/255,e[1]=("0x"+t[2]+t[2])/255,e[2]=("0x"+t[3]+t[3])/255;else{if(7!==t.length&&9!==t.length)throw new TypeError("Invalid hex");e[0]=("0x"+t[1]+t[2])/255,e[1]=("0x"+t[3]+t[4])/255,e[2]=("0x"+t[5]+t[6])/255}return e}},"./global/math/vec4.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec4",(function(){return i.vec4}));var n=r("./global/math/num.js");i.vec4.ZERO=i.vec4.fromValues(0,0,0,0),i.vec4.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e[3]=t[3]+r,e},i.vec4.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]},i.vec4.divideScalar=function(e,t,r){return i.vec4.multiplyScalar(e,t,1/r)},i.vec4.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},i.vec4.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e},i.vec4.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]-r,e},i.vec4.toRGBA=function(e,t,r){return e[0]=n.num.colorFromLinear(t[0]),e[1]=n.num.colorFromLinear(t[1]),e[2]=n.num.colorFromLinear(t[2]),e[3]=r?n.num.colorFromLinear(t[3]):t[3],e},i.vec4.fromRGBA=function(e,t,r){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e[3]=r?n.num.linearFromColor(t[3]):t[3],e},i.vec4.fromRGB=function(e,t,r=1){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e[3]=r,e},i.vec4.toHexA=function(e){return"#"+n.num.hexFromLinear(e[0])+n.num.hexFromLinear(e[1])+n.num.hexFromLinear(e[2])+n.num.hexFromLinear(e[3])},i.vec4.toHex=function(e){return"#"+n.num.hexFromLinear(e[0])+n.num.hexFromLinear(e[1])+n.num.hexFromLinear(e[2])},i.vec4.fromHex=function(e,t,r=1){if(e[0]=0,e[1]=0,e[2]=0,e[3]=r,4===t.length||5===t.length)e[0]=("0x"+t[1]+t[1])/255,e[1]=("0x"+t[2]+t[2])/255,e[2]=("0x"+t[3]+t[3])/255,5===t.length&&(e[3]=("0x"+t[4]+t[4])/255);else{if(7!==t.length&&9!==t.length)throw new TypeError("Invalid hex");e[0]=("0x"+t[1]+t[2])/255,e[1]=("0x"+t[3]+t[4])/255,e[2]=("0x"+t[5]+t[6])/255,9===t.length&&(e[3]=("0x"+t[7]+t[8])/255)}return e}},"./global/meta/@generic.js":function(e,t,r){"use strict";r.r(t),r.d(t,"abstract",(function(){return a})),r.d(t,"singleton",(function(){return o})),r.d(t,"data",(function(){return s})),r.d(t,"alias",(function(){return l})),r.d(t,"readOnly",(function(){return u})),r.d(t,"isPrivate",(function(){return c})),r.d(t,"desc",(function(){return f})),r.d(t,"todo",(function(){return d})),r.d(t,"partialImplementation",(function(){return h})),r.d(t,"notImplemented",(function(){return m})),r.d(t,"stage",(function(){return b}));var i=r("./core/Tw2Error.js"),n=r("./global/utils/reflect.js"),a=Object(n.createDecorator)({noArgs:!0,ctor:({target:e})=>e,method:({target:e,property:t,descriptor:r})=>(Object(n.defineMetadata)("abstract",!0,e,t),r.value=function(){throw new i.ErrAbstractMethod({class:this.constructor.name,method:t})},r)}),o=Object(n.createDecorator)({noArgs:!0,ctor({target:e}){var t=0;return class extends e{constructor(...r){if(++t>1)throw new i.ErrSingletonInstantiation({class:e.name});super(...r)}}}}),s=Object(n.createDecorator)({handler({target:e,property:t},r){Object(n.hasMetadata)("data",e,t)&&Object.assign({},Object(n.getMetadata)("data",e,t),r),Object(n.defineMetadata)("data",r,e,t)}}),l=Object(n.createDecorator)({property({target:e,property:t},r){Object(n.defineMetadata)("alias",r,e,t)}}),u=Object(n.createDecorator)({noArgs:!0,property:({descriptor:e})=>(e.writable=!1,e.enumerable=!1,e)}),c=Object(n.createDecorator)({noArgs:!0,property({target:e,property:t}){Object(n.defineMetadata)("isPrivate",!0,e,t)}}),f=Object(n.createDecorator)({handler({target:e,property:t},r){Object(n.defineMetadata)("desc",r,e,t)}}),d=Object(n.createDecorator)({handler({target:e,property:t},r,i=0){if(Object(n.defineMetadata)("todo",r,e,t),0!==i){var a=Object(n.getMetadata)("stage",e,t)||0;Object(n.defineMetadata)("stage",Math.max(i,a),e,t)}}}),h=Object(n.createDecorator)({noArgs:!0,handler({target:e,property:t}){Object(n.defineMetadata)("stage",2,e,t)}}),m=Object(n.createDecorator)({noArgs:!0,handler({target:e,property:t}){Object(n.defineMetadata)("stage",3,e,t)}}),b=Object(n.createDecorator)({ctor({target:e,property:t},r=0){Object(n.defineMetadata)("stage",r,e,t)}})},"./global/meta/@type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"type",(function(){return l})),r.d(t,"unknown",(function(){return c})),r.d(t,"boolean",(function(){return f})),r.d(t,"string",(function(){return d})),r.d(t,"path",(function(){return h})),r.d(t,"expression",(function(){return m})),r.d(t,"float",(function(){return b})),r.d(t,"uint",(function(){return p})),r.d(t,"ushort",(function(){return v})),r.d(t,"byte",(function(){return g})),r.d(t,"array",(function(){return y})),r.d(t,"vector2",(function(){return w})),r.d(t,"vector3",(function(){return _})),r.d(t,"vector4",(function(){return E})),r.d(t,"color",(function(){return T})),r.d(t,"quaternion",(function(){return S})),r.d(t,"matrix3",(function(){return j})),r.d(t,"matrix4",(function(){return R})),r.d(t,"int8Array",(function(){return P})),r.d(t,"int16Array",(function(){return x})),r.d(t,"int32Array",(function(){return z})),r.d(t,"uint8Array",(function(){return O})),r.d(t,"uint8ClampedArray",(function(){return A})),r.d(t,"uint16Array",(function(){return M})),r.d(t,"uint32Array",(function(){return C})),r.d(t,"float32Array",(function(){return D})),r.d(t,"float64Array",(function(){return I})),r.d(t,"vector",(function(){return L})),r.d(t,"enums",(function(){return F})),r.d(t,"plain",(function(){return G})),r.d(t,"list",(function(){return B})),r.d(t,"fromList",(function(){return N})),r.d(t,"struct",(function(){return U})),r.d(t,"raw",(function(){return V}));var i=r("./core/reader/Tw2BlackPropertyReaders.js"),n=r("./global/utils/type.js"),a=r("./global/utils/reflect.js"),o=r("./global/constant/index.js"),s=function({target:e,property:t},r,...i){switch(void 0!==r&&Object(a.defineMetadata)("type",r,e,t),i[0]&&Object(a.defineMetadata)("typesOf",i,e,t),"_"===t.charAt(0)&&Object(a.defineMetadata)("isPrivate",!0,e,t),r){case o.PT_STRUCT_RAW:case o.PT_STRUCT:var n=Object(a.getMetadata)("structs",e.constructor);(n=n?Array.from(n):[]).includes(t)||(n.push(t),n.sort()),Object(a.defineMetadata)("structs",n,e.constructor);break;case o.PT_STRUCT_LIST:var s=Object(a.getMetadata)("structLists",e.constructor);(s=s?Array.from(s):[]).includes(t)||(s.push(t),s.sort()),Object(a.defineMetadata)("structLists",s,e.constructor)}},l=Object(a.createDecorator)({ctor({target:e},t,r=t){Object(a.defineMetadata)("type",t,e),Object(a.defineMetadata)("ccp",r,e)},parameter(e,t,r){s(e,t,r)}});function u(e,t){return Object(a.createDecorator)({noArgs:!t,property(t,...r){s(t,e,...r)}})}var c=u(o.PT_UNKNOWN),f=u(o.PT_BOOLEAN),d=u(o.PT_STRING),h=u(o.PT_PATH),m=u(o.PT_EXPRESSION),b=u(o.PT_FLOAT),p=u(o.PT_UINT),v=u(o.PT_USHORT),g=u(o.PT_BYTE),y=u(o.PT_ARRAY),w=u(o.PT_VECTOR2),_=u(o.PT_VECTOR3),E=u(o.PT_VECTOR4),T=u(o.PT_COLOR),S=u(o.PT_QUATERNION),j=u(o.PT_MATRIX3),R=u(o.PT_MATRIX4),P=u(o.PT_INT8_ARRAY),x=u(o.PT_INT16_ARRAY),z=u(o.PT_INT32_ARRAY),O=u(o.PT_UINT8_ARRAY),A=u(o.PT_UINT8_CLAMPED_ARRAY),M=u(o.PT_UINT16_ARRAY),C=u(o.PT_UINT32_ARRAY),D=u(o.PT_FLOAT32_ARRAY),I=u(o.PT_FLOAT64_ARRAY),L=u(o.PT_VECTOR),F=Object(a.createDecorator)({property({target:e,property:t},r){s({target:e,property:t},o.PT_ENUM),Object(a.defineMetadata)("isPrivate",!0,e,t),Object(a.defineMetadata)("enumerable",r,e,t)}}),G=u(o.PT_PLAIN),B=Object(a.createDecorator)({property({target:e,property:t},...r){if(Object(n.isFunction)(r[0])){var l=r.shift();Object(a.defineMetadata)("black",i.structList(l),e,t),Object(a.hasMetadata)("type",l)&&r.unshift(Object(a.getMetadata)("type",l))}s({target:e,property:t},o.PT_STRUCT_LIST,...r)}}),N=Object(a.createDecorator)({property({target:e,property:t},r,...l){if(Object(n.isString)(r)&&(r={key:r}),!Object(n.isPlain)(r))throw new Error("Invalid argument for decorator: expected plain object");Object(a.defineMetadata)("black",i.fromList(r),e,t),r.struct&&Object(a.hasMetadata)("type",r.struct)&&l.unshift(Object(a.getMetadata)("type",r.struct)),s({target:e,property:t},o.PT_PLAIN,...l)}});function k(e){return Object(a.createDecorator)({property({target:t,property:r},...o){if(Object(n.isFunction)(o[0])){var l=o.shift();Object(a.defineMetadata)("black",i.struct(l),t,r),Object(a.hasMetadata)("type",l)&&o.unshift(Object(a.getMetadata)("type",l))}s({target:t,property:r},e,...o)}})}var U=k(o.PT_STRUCT),V=k(o.PT_STRUCT_RAW)},"./global/meta/Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Model",(function(){return T}));var i,n,a,o=r("./global/utils/uuid.js"),s=r("./global/utils/reflect.js"),l=r("./global/utils/type.js"),u=r("./global/meta/ModelPropertyTypes.js"),c=r("./global/meta/@generic.js"),f=r("./global/tw2.js");function d(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p,v,g,y,w,_,E=new WeakMap,T=(a=class{constructor(){var e,t,r,i;e=this,t="_id",i=this,(r=n)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}EmitEvent(e,...t){var r=E.get(this);return r?((e=e.toLowerCase())in r&&(r[e].forEach((i,n)=>{n.call(i.context,...t),i.once&&r[e].delete(n)}),0===r[e].size&&Reflect.deleteProperty(r,e)),this):this}AddEvents(e){if(!e)return this;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t],i=t,n=void 0,a=void 0;if(-1!==t.indexOf(".once")&&t.lastIndexOf(".once")===t.length-5&&(i=t.substring(0,t.length-5),a=!0),Object(l.isArray)(r)&&(n=(r=r[0])[1]),!Object(l.isFunction)(r))throw new Error("Invalid listener");this.OnEvent(i,r,n,a)}return this}OnEvent(e,t,r,i){var n=E.get(this);if(n||(n={},E.set(this,n)),n[e=e.toLowerCase()]||(n[e]=new Map),!n[e].has(t))if(this.constructor.onListener){if(this.constructor.onListener(this,e,t,r)&&i)return this}else if(this.OnEventFirstListener&&this.OnEventFirstListener(this,e,t,r)&&i)return this;return n[e].set(t,{context:r,once:i}),this}OnceEvent(e,t,r){return this.OnEvent(e,t,r,!0)}OffEvent(e,t){var r=E.get(this);if(!r)return this;if("*"===e){for(var i in r)r.hasOwnProperty(i)&&(r[i].delete(t),0===r[i].size&&Reflect.deleteProperty(r,i));return this}return(e=e.toLowerCase())in r&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e)),this}HasEvent(e,t){var r=E.get(this);if(!r)return!1;if("*"===e){for(var i in r)if(r.hasOwnProperty(i)&&r[i].has(t))return!0;return!1}return!(!t||!(e in r))&&("*"===t?!!r[e].size:r[e].has(t))}ClearEvent(e){var t=E.get(this);return t?"*"===e?(E.delete(this),this):((e=e.toLowerCase())in t&&(t[e].clear(),Reflect.deleteProperty(t,e)),this):this}Copy(e,t){return this.constructor.copy(this,e,t)}Clone(e){return this.constructor.clone(this,e)}SetValues(e,t={}){return this.constructor.set(this,e,t)}GetValues(e,t){return this.constructor.get(this,e,t)}UpdateValues(e){var t=e&&e.skipEvents;t||this.EmitEvent("modify",this,e),this.OnValueChanged&&this.OnValueChanged(e),t||this.EmitEvent("modified",this,e)}OnModified(e,t,r){this.OnEvent("modified",e,t,r)}OffModified(e){this.OffEvent("modified",e)}Destructor(e={}){e&&e.skipEvents||this.EmitEvent("destruct",this,e),this.OnDestruct&&this.OnDestruct(),e&&e.skipChildren||this.Clear({skipUpdate:!0,skipEvents:!0,controller:e.controller}),e&&e.skipEvents||this.EmitEvent("destructed",this,e),this.ClearEvent("*")}Clear(e={}){var t,r;e.skipEvents||this.EmitEvent("clear",this),this.OnClear&&this.OnClear(),(Object(s.getMetadata)("structLists",this.constructor)||[]).forEach(r=>{if(!Object(s.getMetadata)("isPrivate",this,r)){for(var i=0;i<this[r].length;i++)this[r][i]&&(this[r][i].Destructor&&this[r][i].Destructor({controller:e.controller}),t=!0);this[r].splice(0)}}),(Object(s.getMetadata)("structs",this.constructor)||[]).forEach(i=>{Object(s.getMetadata)("isPrivate",this,i)||this[i]&&(this[i].Destructor&&(r=r||{controller:e.controller},this[i].Destructor(r)),this[i]=null,t=!0)}),e&&e.skipEvents||this.EmitEvent("cleared",this),!t||e&&e.skipUpdate||this.UpdateValues(e)}PerChild(e,t){if(Object(s.hasMetadata)("structs",this.constructor))for(var r=Object(s.getMetadata)("structs",this.constructor),i=0;i<r.length;i++){var n=r[i],a=this[n];if(!Object(s.getMetadata)("isPrivate",this,n)&&(a||t)){var o=e({parent:this,key:n,struct:a,path:"/".concat(n)});if(void 0!==o)return o}}if(Object(s.hasMetadata)("structLists",this.constructor))for(var l=Object(s.getMetadata)("structLists",this.constructor),u=0;u<l.length;u++){var c=l[u],f=this[l[u]];if(!Object(s.getMetadata)("isPrivate",this,c))for(var d=0;d<f.length;d++){var h=f[d];if(h||t){var m=e({parent:this,key:c,struct:h,array:f,index:d,path:"/".concat(c,"/").concat(d)});if(void 0!==m)return m}}}}Filter(e,t=[]){return this.Traverse(r=>{e(r)&&!t.includes(r.struct)&&t.push(r.struct)}),t}FindObjectByID(e){return this.Traverse(t=>{if(t.struct._id===e)return t.struct})}Traverse(e,t={},r=new Set){if(!r.has(this)){r.add(this),t.path=t.path||"root",t.struct=this;var i=e(t);return void 0!==i?i:this.PerChild(i=>{if(i.struct&&i.struct.Traverse){i.path=t.path+i.path;var n=i.struct.Traverse(e,i,r);if(void 0!==n)return n}})}}GetAsyncTasks(e=new Set){return e}static copy(e,t,r={}){return this.set(e,t.GetValues(),m({_clear:!0},r))}static clone(e,t){return this.from(e.GetValues(),t)}static get(e,t={},r={}){if(!Object(s.hasMetadata)("type",this))throw new ReferenceError("No meta type defined");var i=!r._ids;if(i)r._ids=new Map;else if(r._ids.has(e)){var n={__ref:e._id};return r._ids.get(e).push(n),n}for(var a in t={__type:Object(s.getMetadata)("type",e.constructor),__id:e._id},r._ids.set(e,[t]),e)if(e.hasOwnProperty(a)&&Object(s.hasMetadata)("type",e,a)&&!Object(s.getMetadata)("isPrivate",e,a)&&!Object(s.getMetadata)("alias",e,a)){var o=Object(s.getMetadata)("type",e,a),l=u.propTypes.get(o);if(!l)throw new TypeError("Unknown type: "+o);t[a]=l.get(e,a,r)}if(i&&!r.useObjectIds){var c=0;r._ids.forEach(e=>{if(1!==e.length)for(var t="#"+c++,r=0;r<e.length;r++)0===r?e[r].__id=t:e[r].__ref=t;else Reflect.deleteProperty(e[0],"__id")})}return t}static set(e,t,r={}){if(e.constructor!==this)throw new ReferenceError("Invalid constructor");var i=Object(s.getMetadata)("type",this);if(!i)throw new ReferenceError("No meta type defined");if(t&&!Object(l.isObjectObject)(t))throw new ReferenceError("Invalid values, expected plain object or object");var n,{_clear:a,_ids:o=new Map,skipEvents:c,skipUpdate:h}=r,m=d(r,["_clear","_ids","skipEvents","skipUpdate"]);if(o.has(e))return o.get(e);if(m._ids=o,a)throw new Error("Copy feature not implemented");var b=!1;if(t)for(var p in t)if(t.hasOwnProperty(p)){var v=t[p];if(void 0===t[p]){(n=n||{}).undefined=n.undefined||[],n.undefined.push(p);continue}if(Object(s.getMetadata)("isPrivate",e,p)){(n=n||{}).private=n.private||[],n.private.push(p);continue}if(Object(s.hasMetadata)("alias",e,p)&&(p=Object(s.getMetadata)("alias",e,p)),!Object(s.hasMetadata)("type",e,p)){(n=n||{}).noType=n.noType||[],n.noType.push(p);continue}var g=Object(s.getMetadata)("type",e,p),y=u.propTypes.get(g);if(!y)throw new TypeError("".concat(i," > Unknown property type: ").concat(g));if(null===v&&y.delete){y.delete(e,p,m)&&(b=!0);continue}if(!y.is(v,e[p],m))throw new TypeError("".concat(i," > Unexpected value type for property: ").concat(p));if(y.equals(v,e[p]))continue;!1!==y.set(e,p,v,m)&&(b=!0)}return b&&!h&&e.UpdateValues(m),o.set(e,b),n&&f.tw2.Debug({name:"".concat(i,".set"),message:"Properties values skipped",data:n}),b}static from(e,t={}){var r,{skipUpdate:i}=t,n=d(t,["skipUpdate"]);if(e&&e.__type&&Object(s.getMetadata)("type",this)!==e.__type)throw new ReferenceError("Unexpected constructor "+e.__type);return e&&e instanceof this?r=e:(r=new this,e&&r.SetValues(e,m({skipUpdate:!0},n))),!i&&r.Initialize&&r.Initialize(),r}},p=(i=a).prototype,v="_id",g=[c.readOnly],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(o.generateID)()}},_={},Object.keys(y).forEach((function(e){_[e]=y[e]})),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=g.slice().reverse().reduce((function(e,t){return t(p,v,e)||e}),_),w&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(w):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(p,v,_),_=null),n=_,i)},"./global/meta/ModelPropertyTypes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"propTypes",(function(){return o}));var i=r("./global/math/index.js"),n=r("./global/constant/type.js"),a=r("./global/utils/type.js"),o=new Map,s=(e,t)=>Array.from(e[t]),l=(e,t)=>e[t],u=(e,t,r)=>e[t]=r,c=(e,t)=>e===t,f=()=>!1,d=()=>{throw new ReferenceError("Not implemented")};function h(e){o.set(e,{is:a.isNumber,equals:i.num.equals,get:l,set:u,type:e})}function m(e){o.set(e,{is:a.isString,equals:c,get:l,set:u,type:e})}function b(e,t,r){o.set(e,{is:e=>Object(a.isVector)(e,r),equals:a.isVectorEqual,get:s,set:(e,r,i)=>{e[r].length!==i.length?e[r]=new t(i):e[r].set(i)},type:e})}function p(e){o.set(e,{is:a.isVector4,equals:i.vec4.equals,get:s,set:(e,t,r)=>i.vec4.copy(e[t],r),type:e})}function v(e){o.set(e,{is:e=>!!Object(a.isPlain)(e),equals:f,get:(e,t,r)=>null===e[t]?null:e[t].GetValues({},r),set:(e,t,r,i)=>{d()},type:e})}o.set(n.PT_BOOLEAN,{is:a.isBoolean,equals:c,get:l,set:u,type:n.PT_BOOLEAN}),h(n.PT_BYTE),h(n.PT_FLOAT),h(n.PT_UINT),h(n.PT_USHORT),m(n.PT_STRING),m(n.PT_EXPRESSION),m(n.PT_PATH),b(n.PT_VECTOR,Float32Array),b(n.PT_INT32_ARRAY,Int32Array),b(n.PT_INT16_ARRAY,Int16Array),b(n.PT_INT8_ARRAY,Int8Array),b(n.PT_UINT8_ARRAY,Uint8Array),b(n.PT_UINT32_ARRAY,Uint32Array),b(n.PT_UINT16_ARRAY,Uint16Array),b(n.PT_UINT32_ARRAY,Uint32Array),b(n.PT_FLOAT32_ARRAY,Float32Array),b(n.PT_FLOAT64_ARRAY,Float64Array),o.set(n.PT_MATRIX3,{is:a.isMatrix3,equals:i.mat3.equals,get:s,set:(e,t,r)=>i.mat3.copy(e[t],r),type:n.PT_MATRIX3}),o.set(n.PT_MATRIX4,{is:a.isMatrix4,equals:i.mat4.equals,get:s,set:(e,t,r)=>i.mat4.copy(e[t],r),type:n.PT_MATRIX4}),o.set(n.PT_VECTOR2,{is:a.isVector2,equals:i.vec2.equals,get:s,set:(e,t,r)=>i.vec2.copy(e[t],r),type:n.PT_VECTOR2}),o.set(n.PT_VECTOR3,{is:a.isVector3,equals:i.vec3.equals,get:s,set:(e,t,r)=>i.vec3.copy(e[t],r),type:n.PT_VECTOR3}),p(n.PT_VECTOR4),p(n.PT_COLOR),p(n.PT_QUATERNION),o.set(n.PT_PLAIN,{is:a.isPlain,equals:a.isEqual,get:(e,t)=>Object.assign({},e[t]),set:(e,t,r)=>Object.assign(e[t],r),type:n.PT_PLAIN}),v(n.PT_STRUCT),v(n.PT_STRUCT_RAW),o.set(n.PT_STRUCT_LIST,{is:e=>!!Object(a.isArray)(e),equals:f,get(e,t,r){var i=e[t].length;if(!i)return null;for(var n=[],a=0;a<i;a++)try{n.push(e[t][a].GetValues({},r))}catch(r){throw console.dir(e[t][a]),r}return n},set:(e,t,r,i)=>{d()},type:n.PT_STRUCT_LIST})},"./global/meta/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./global/meta/@type.js");r.d(t,"type",(function(){return i.type})),r.d(t,"unknown",(function(){return i.unknown})),r.d(t,"boolean",(function(){return i.boolean})),r.d(t,"string",(function(){return i.string})),r.d(t,"path",(function(){return i.path})),r.d(t,"expression",(function(){return i.expression})),r.d(t,"float",(function(){return i.float})),r.d(t,"uint",(function(){return i.uint})),r.d(t,"ushort",(function(){return i.ushort})),r.d(t,"byte",(function(){return i.byte})),r.d(t,"array",(function(){return i.array})),r.d(t,"vector2",(function(){return i.vector2})),r.d(t,"vector3",(function(){return i.vector3})),r.d(t,"vector4",(function(){return i.vector4})),r.d(t,"color",(function(){return i.color})),r.d(t,"quaternion",(function(){return i.quaternion})),r.d(t,"matrix3",(function(){return i.matrix3})),r.d(t,"matrix4",(function(){return i.matrix4})),r.d(t,"int8Array",(function(){return i.int8Array})),r.d(t,"int16Array",(function(){return i.int16Array})),r.d(t,"int32Array",(function(){return i.int32Array})),r.d(t,"uint8Array",(function(){return i.uint8Array})),r.d(t,"uint8ClampedArray",(function(){return i.uint8ClampedArray})),r.d(t,"uint16Array",(function(){return i.uint16Array})),r.d(t,"uint32Array",(function(){return i.uint32Array})),r.d(t,"float32Array",(function(){return i.float32Array})),r.d(t,"float64Array",(function(){return i.float64Array})),r.d(t,"vector",(function(){return i.vector})),r.d(t,"enums",(function(){return i.enums})),r.d(t,"plain",(function(){return i.plain})),r.d(t,"list",(function(){return i.list})),r.d(t,"fromList",(function(){return i.fromList})),r.d(t,"struct",(function(){return i.struct})),r.d(t,"raw",(function(){return i.raw}));var n=r("./global/meta/@generic.js");r.d(t,"abstract",(function(){return n.abstract})),r.d(t,"singleton",(function(){return n.singleton})),r.d(t,"data",(function(){return n.data})),r.d(t,"alias",(function(){return n.alias})),r.d(t,"readOnly",(function(){return n.readOnly})),r.d(t,"isPrivate",(function(){return n.isPrivate})),r.d(t,"desc",(function(){return n.desc})),r.d(t,"todo",(function(){return n.todo})),r.d(t,"partialImplementation",(function(){return n.partialImplementation})),r.d(t,"notImplemented",(function(){return n.notImplemented})),r.d(t,"stage",(function(){return n.stage}));var a=r("./global/meta/Model.js");r.d(t,"Model",(function(){return a.Model}))},"./global/tw2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tw2",(function(){return i})),r.d(t,"resMan",(function(){return n})),r.d(t,"device",(function(){return a}));var i=new(r("./core/engine/Tw2Library.js").Tw2Library),n=i.resMan,a=i.device},"./global/utils/arr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"addToArray",(function(){return n})),r.d(t,"findElementByPropertyValue",(function(){return a})),r.d(t,"findIndexByPropertyValue",(function(){return o})),r.d(t,"perArrayChild",(function(){return s})),r.d(t,"removeFromArray",(function(){return l})),r.d(t,"toArray",(function(){return u})),r.d(t,"toUniqueArray",(function(){return c})),r.d(t,"chunkArray",(function(){return f}));var i=r("./global/utils/type.js");function n(e,...t){for(var r=!1,i=0;i<t.length;i++)-1===e.indexOf(t[i])&&(e.push(t[i]),r=!0);return r}function a(e,t,r,i){return e[o(e,t,r,i)]}function o(e,t,r,i){for(var n=0;n<e.length;n++)if(t in e[n]&&e[n][t]===r)return n;if(i)throw new i({[t]:r});return-1}function s(e,t,...r){for(var i=0;i<e.length;i++)t in e[i]&&e[i][t](...r)}function l(e,...t){for(var r=!1,i=0;i<t.length;i++){var n=e.indexOf(t[i]);-1!==n&&(e.splice(n,1),r=!0)}return r}function u(e){return Object(i.isArray)(e)?e:[e]}function c(e){return Array.from(new Set(u(e)))}function f(e,t){for(var r=[],i=0;i<e.length;i+=t){var n=e.slice(i,i+t);r.push(n)}return r}},"./global/utils/canvas.js":function(e,t,r){"use strict";function i(e,t={}){var r=document.createElement("canvas"),i=r.getContext("2d"),n=t.fontSize||56;i.font="".concat(n,"px monospace");var a=i.measureText(e).width,o=n;return r.width=a,r.height=o,r.style.width=a+"px",r.style.height=o+"px",i.font="".concat(n,"px monospace"),i.textAlign=t.align||"center",i.textBaseline=t.baseline||"middle",i.fillStyle="transparent",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.fillStyle=t.color||"white",i.fillText(e,a/2,o/2),r}r.r(t),r.d(t,"createTextCanvas",(function(){return i}))},"./global/utils/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./global/utils/arr.js");r.d(t,"addToArray",(function(){return i.addToArray})),r.d(t,"findElementByPropertyValue",(function(){return i.findElementByPropertyValue})),r.d(t,"findIndexByPropertyValue",(function(){return i.findIndexByPropertyValue})),r.d(t,"perArrayChild",(function(){return i.perArrayChild})),r.d(t,"removeFromArray",(function(){return i.removeFromArray})),r.d(t,"toArray",(function(){return i.toArray})),r.d(t,"toUniqueArray",(function(){return i.toUniqueArray})),r.d(t,"chunkArray",(function(){return i.chunkArray}));var n=r("./global/utils/canvas.js");r.d(t,"createTextCanvas",(function(){return n.createTextCanvas}));var a=r("./global/utils/obj.js");r.d(t,"emptyObject",(function(){return a.emptyObject})),r.d(t,"assignIfExists",(function(){return a.assignIfExists})),r.d(t,"get",(function(){return a.get})),r.d(t,"template",(function(){return a.template})),r.d(t,"getKeyFromValue",(function(){return a.getKeyFromValue})),r.d(t,"pick",(function(){return a.pick})),r.d(t,"downloadObjectAsJson",(function(){return a.downloadObjectAsJson}));var o=r("./global/utils/str.js");r.d(t,"getPathExtension",(function(){return o.getPathExtension}));var s=r("./global/utils/type.js");r.d(t,"isArray",(function(){return s.isArray})),r.d(t,"isArrayLike",(function(){return s.isArrayLike})),r.d(t,"isAsyncFunction",(function(){return s.isAsyncFunction})),r.d(t,"isBoolean",(function(){return s.isBoolean})),r.d(t,"isCanvas",(function(){return s.isCanvas})),r.d(t,"isDescriptor",(function(){return s.isDescriptor})),r.d(t,"isDNA",(function(){return s.isDNA})),r.d(t,"isError",(function(){return s.isError})),r.d(t,"isNumber",(function(){return s.isNumber})),r.d(t,"isFunction",(function(){return s.isFunction})),r.d(t,"isNoU",(function(){return s.isNoU})),r.d(t,"isNull",(function(){return s.isNull})),r.d(t,"isObject",(function(){return s.isObject})),r.d(t,"isObjectLike",(function(){return s.isObjectLike})),r.d(t,"isObjectObject",(function(){return s.isObjectObject})),r.d(t,"isPlain",(function(){return s.isPlain})),r.d(t,"isPrimary",(function(){return s.isPrimary})),r.d(t,"isPromise",(function(){return s.isPromise})),r.d(t,"isString",(function(){return s.isString})),r.d(t,"isSymbol",(function(){return s.isSymbol})),r.d(t,"isSubclassOf",(function(){return s.isSubclassOf})),r.d(t,"isTag",(function(){return s.isTag})),r.d(t,"isTr2OrTri",(function(){return s.isTr2OrTri})),r.d(t,"toTw2",(function(){return s.toTw2})),r.d(t,"getTypeUpper",(function(){return s.getTypeUpper})),r.d(t,"isTyped",(function(){return s.isTyped})),r.d(t,"isUndefined",(function(){return s.isUndefined})),r.d(t,"isVector",(function(){return s.isVector})),r.d(t,"isVector2",(function(){return s.isVector2})),r.d(t,"isVector3",(function(){return s.isVector3})),r.d(t,"isVector4",(function(){return s.isVector4})),r.d(t,"isMatrix3",(function(){return s.isMatrix3})),r.d(t,"isMatrix4",(function(){return s.isMatrix4})),r.d(t,"isPrimaryEqual",(function(){return s.isPrimaryEqual})),r.d(t,"isVectorEqual",(function(){return s.isVectorEqual})),r.d(t,"isEqual",(function(){return s.isEqual}));var l=r("./global/utils/uuid.js");r.d(t,"enableUUID",(function(){return l.enableUUID})),r.d(t,"generateID",(function(){return l.generateID}));var u=r("./global/utils/url.js");r.d(t,"getURL",(function(){return u.getURL})),r.d(t,"getURLString",(function(){return u.getURLString})),r.d(t,"getURLInteger",(function(){return u.getURLInteger})),r.d(t,"getURLFloat",(function(){return u.getURLFloat})),r.d(t,"getURLBoolean",(function(){return u.getURLBoolean}));var c=r("./global/utils/reflect.js");r.d(t,"defineMetadata",(function(){return c.defineMetadata})),r.d(t,"hasMetadata",(function(){return c.hasMetadata})),r.d(t,"hasOwnMetadata",(function(){return c.hasOwnMetadata})),r.d(t,"getMetadata",(function(){return c.getMetadata})),r.d(t,"getOwnMetadata",(function(){return c.getOwnMetadata})),r.d(t,"deleteMetadata",(function(){return c.deleteMetadata})),r.d(t,"getMetadataKeys",(function(){return c.getMetadataKeys})),r.d(t,"getOwnMetadataKeys",(function(){return c.getOwnMetadataKeys})),r.d(t,"getMetadataValues",(function(){return c.getMetadataValues})),r.d(t,"getOwnMetadataValues",(function(){return c.getOwnMetadataValues})),r.d(t,"handleDescriptor",(function(){return c.handleDescriptor})),r.d(t,"createDecorator",(function(){return c.createDecorator}));var f=r("./global/meta/index.js");r.d(t,"meta",(function(){return f}))},"./global/utils/obj.js":function(e,t,r){"use strict";r.r(t),r.d(t,"emptyObject",(function(){return a})),r.d(t,"assignIfExists",(function(){return o})),r.d(t,"get",(function(){return s})),r.d(t,"template",(function(){return l})),r.d(t,"getKeyFromValue",(function(){return u})),r.d(t,"pick",(function(){return c})),r.d(t,"downloadObjectAsJson",(function(){return f}));var i=r("./global/utils/type.js"),n=r("./global/utils/arr.js");function a(e){if(Object(i.isArray)(e))return e.splice(0),e;if(Object(i.isPlain)(e)){for(var t in e)e.hasOwnProperty(t)&&Reflect.deleteProperty(e,t);return e}throw new ReferenceError("Invalid object, expected array or plain object")}function o(e,t,r,a){if(!t)return!1;r=Object(n.toArray)(r);for(var o=!1,s=0;s<r.length;s++){var l=r[s],u=l,c=l;if(Object(i.isArray)(l)&&(u=l[1],c=l[0]),void 0!==t[u]&&(!a||void 0!==e[c])){if(Object(i.isArrayLike)(e[c]))if(Object(i.isTyped)(e[c]))if(e[c].length!==t[u].length){var f=e[c].constructor;e[c]=new f(t[u])}else e[c].set(t[u]);else{e[c].splice(0);for(var d=0;d<t[u].length;d++)e[c].push(t[u][d])}else if(Object(i.isTyped)(t[u])){var h=t[u].constructor;e[c]=new h(t[u])}else e[c]=t[u];o=!0}}return o}function s(e,t,r){if(!Object(i.isArray)(t))return void 0!==e[t]?e[t]:r;for(var n=0;n<t.length;n++)if(void 0!==e[t[n]])return e[t[n]];return r}function l(e,t={}){for(var r=e.match(/%([^%]+)?%/g)||[],i=0;i<r.length;i++){var n=r[i],a=n.substring(1,n.length-1).split("="),o=a[0]in t?t[a[0]]:a[1];e=e.replace(n,o)}return e}function u(e,t,r){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t)return i;return r}function c(e,t){return t.reduce((t,r)=>(e&&Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]),t),{})}function f(e,t){var r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download",t+".json"),document.body.appendChild(i),i.click(),i.remove()}},"./global/utils/reflect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"defineMetadata",(function(){return l})),r.d(t,"hasMetadata",(function(){return u})),r.d(t,"hasOwnMetadata",(function(){return c})),r.d(t,"getMetadata",(function(){return f})),r.d(t,"getOwnMetadata",(function(){return d})),r.d(t,"deleteMetadata",(function(){return h})),r.d(t,"getMetadataKeys",(function(){return b})),r.d(t,"getOwnMetadataKeys",(function(){return p})),r.d(t,"getMetadataValues",(function(){return g})),r.d(t,"getOwnMetadataValues",(function(){return y})),r.d(t,"handleDescriptor",(function(){return w})),r.d(t,"createDecorator",(function(){return j}));var i=r("./global/utils/index.js");function n(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return"".concat("tw2",":").concat(e)}function l(e,t,r,i){Reflect.defineMetadata(s(e),t,r,i)}function u(e,t,r){return Reflect.hasMetadata(s(e),t,r)}function c(e,t,r){return Reflect.hasOwnMetadata(s(e),t,r)}function f(e,t,r){return Reflect.getMetadata(s(e),t,r)}function d(e,t,r){return Reflect.getOwnMetadata(s(e),t,r)}function h(e,t,r){return Reflect.deleteMetadata(s(e),t,r)}function m(e){for(var t=[],r=0;r<e.length;r++)0===e[r].indexOf("tw2")&&t.push(e[r].replace("tw2",""));return t}function b(e,t){return m(Reflect.getMetadataKeys(e,t))}function p(e,t){return m(Reflect.getOwnMetadataKeys(e,t))}function v(e,t,r,i){var n=r(e,t),a={};return n.forEach(r=>{var n=i(r,e,t);void 0!==n&&(a[r]=n)}),a}function g(e,t){return v(e,t,b,f)}function y(e,t){return v(e,t,p,d)}function w(e){return!e||e.set||e.get||(void 0===e.writable&&(e.writable=!0),void 0===e.enumerable&&(e.enumerable=!0),void 0===e.configurable&&(e.configurable=!0)),e}var _=()=>{throw new TypeError("Decorator doesn't support classes")},E=()=>{throw new TypeError("Decorator doesn't support methods")},T=()=>{throw new TypeError("Decorator doesn't support properties")};function S(e,t,...r){return function(n,s,l){l&&w(l);var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({target:n,property:s,descriptor:l},t);return s?Object(i.isFunction)(n[s])?e.method(u,...r):e.property(u,...r):e.ctor(u,...r)}}function j(e){var{handler:t,property:r,method:a,ctor:o,noArgs:s}=e,l=n(e,["handler","property","method","ctor","noArgs"]),u=function(e){var{ctor:t,method:r,property:n,handler:a}=e;function o(e,t){return Object(i.isFunction)(e)?e:!1===e?t:Object(i.isFunction)(a)?a:t}return{ctor:o(t,_),method:o(r,E),property:o(n,T)}}(e);return s?S(u,l):function(...e){return S(u,l,...e)}}},"./global/utils/str.js":function(e,t,r){"use strict";function i(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}r.r(t),r.d(t,"getPathExtension",(function(){return i}))},"./global/utils/type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isArray",(function(){return a})),r.d(t,"isArrayLike",(function(){return o})),r.d(t,"isAsyncFunction",(function(){return s})),r.d(t,"isBoolean",(function(){return l})),r.d(t,"isCanvas",(function(){return u})),r.d(t,"isDescriptor",(function(){return c})),r.d(t,"isDNA",(function(){return f})),r.d(t,"isError",(function(){return d})),r.d(t,"isNumber",(function(){return h})),r.d(t,"isFunction",(function(){return m})),r.d(t,"isNoU",(function(){return b})),r.d(t,"isNull",(function(){return p})),r.d(t,"isObject",(function(){return v})),r.d(t,"isObjectLike",(function(){return g})),r.d(t,"isObjectObject",(function(){return y})),r.d(t,"isPlain",(function(){return w})),r.d(t,"isPrimary",(function(){return _})),r.d(t,"isPromise",(function(){return E})),r.d(t,"isString",(function(){return T})),r.d(t,"isSymbol",(function(){return S})),r.d(t,"isSubclassOf",(function(){return j})),r.d(t,"isTag",(function(){return R})),r.d(t,"isTr2OrTri",(function(){return P})),r.d(t,"toTw2",(function(){return x})),r.d(t,"getTypeUpper",(function(){return z})),r.d(t,"isTyped",(function(){return O})),r.d(t,"isUndefined",(function(){return A})),r.d(t,"isVector",(function(){return M})),r.d(t,"isVector2",(function(){return C})),r.d(t,"isVector3",(function(){return D})),r.d(t,"isVector4",(function(){return I})),r.d(t,"isMatrix3",(function(){return L})),r.d(t,"isMatrix4",(function(){return F})),r.d(t,"isPrimaryEqual",(function(){return G})),r.d(t,"isVectorEqual",(function(){return B})),r.d(t,"isEqual",(function(){return N}));var i=r("./global/math/num.js"),n=Object.prototype.toString,a=Array.isArray;function o(e){return!!e&&(a(e)||O(e))}function s(e){return!(!m(e)||"AsyncFunction"!==e.constructor.name)}function l(e){return R(e,"[object Boolean]")}function u(e){return!!(e&&e instanceof HTMLCanvasElement)}function c(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,i=t.length;r<i;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}function f(e){return T(e)&&e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)}function d(e){return!!e&&(e instanceof Error||"Error"===e.constructor.__category)}function h(e){return R(e,"[object Number]")}function m(e){return"function"==typeof e}function b(e){return null==e}function p(e){return null===e}function v(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function g(e){return null!==e&&"object"==typeof e}function y(e){return null!==e&&R(e,"[object Object]")}function w(e){if(!v(e)||!y)return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _(e){return l(e)||h(e)||T(e)}function E(e){return v(e)&&m(e.then)}function T(e){return R(e,"[object String]")}function S(e){return"symbol"==typeof e||R(e,"[object Symbol]")}function j(e,t){if(!m(e))return!1;for(;m(e);){if(e===t)return!0;e=Reflect.getPrototypeOf(e)}return!1}function R(e,t){return n.call(e)===t}function P(e){return e&&0===e.indexOf("Tr2")||0===e.indexOf("Tri")}function x(e){return P(e)?e.replace("Tr2","Tw2").replace("Tri","Tw2"):e}function z(e){return Object.prototype.toString.call(e).slice(8,-1).toUpperCase()}function O(e){return!!e&&!!(e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT)}function A(e){return void 0===e}function M(e,t){if(e){if(O(e))return void 0===t||e.length===t;if(a(e)){if(void 0!==t&&e.length!==t)return!1;for(var r=0;r<e.length;r++)if(!h(e[r]))return!1;return!0}}return!1}function C(e){return M(e,2)}function D(e){return M(e,3)}function I(e){return M(e,4)}function L(e){return M(e,9)}function F(e){return M(e,16)}function G(e,t){return e===t||!(!h(e)||!h(t))&&i.num.equals(e,t)}function B(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!i.num.equals(e[r],t[r]))return!1;return!0}function N(e,t){if(e===t)return!0;if(h(e))return!!h(t)&&i.num.equals(e,t);if(M(e))return!!M(t)&&B(e,t);if(!y(e)||!y(t))return!1;if(e.constructor!==t.constructor)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++){var o=r[a];if(!t.hasOwnProperty(o))return!1;if(!N(e[o],t[o]))return!1}for(var s=0;s<n.length;s++)if(e.hasOwnProperty(n[s]))return!1;return!0}},"./global/utils/url.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getURL",(function(){return f})),r.d(t,"getURLString",(function(){return d})),r.d(t,"getURLInteger",(function(){return h})),r.d(t,"getURLFloat",(function(){return m})),r.d(t,"getURLBoolean",(function(){return b}));for(var i=r("./global/utils/type.js"),n={},a=window.location.search.substring(1).split("&"),o=0;o<a.length;o++){var s=a[o].split("="),l=s[0],u=unescape(s[1]);if(l){var c=u.toLowerCase();switch(c){case"true":c=!0;break;case"false":c=!1;break;case"null":c=null;break;case"undefined":c=void 0;break;default:isNaN(c)||(c=Number(c))}n[l.toLowerCase()]=c}}function f(e){if(Object(i.isPlain)(e)){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=void 0===n[r]?e[r]:n[r]);return t}if(Object(i.isFunction)(e)){var a={};for(var o in n)if(n.hasOwnProperty(o)){var s=e(o,n[o],n);void 0!==s&&(a[o]=s)}return a}return Object.assign({},n)}function d(e,t){return(e=e.toLowerCase())in n?n[e]:t}function h(e,t){return(e=e.toLowerCase())in n?parseInt(n[e],10):t}function m(e,t){return(e=e.toLowerCase())in n?parseFloat(n[e]):t}function b(e,t){return(e=e.toLowerCase())in n?n[e]:t}},"./global/utils/uuid.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableUUID",(function(){return o})),r.d(t,"generateID",(function(){return s}));var i=null,n=0,a=null;function o(e){if(e!==i){if(null!==i)throw new Error("Cannot change id generation type once set");if(e){a=[];for(var t=0;t<256;t++)a[t]=(t<16?"0":"")+t.toString(16).toUpperCase()}i=e}}function s(){return null===i&&(i=!1),i?(e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a[255&e]+a[e>>8&255]+a[e>>16&255]+a[e>>24&255]+"-"+a[255&t]+a[t>>8&255]+"-"+a[t>>16&15|64]+a[t>>24&255]+"-"+a[63&r|128]+a[r>>8&255]+"-"+a[r>>16&255]+a[r>>24&255]+a[255&o]+a[o>>8&255]+a[o>>16&255]+a[o>>24&255]):n++;var e,t,r,o}},"./index.js":function(e,t,r){"use strict";r.r(t);r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.symbol.async-iterator.js"),r("../node_modules/core-js/modules/es.array.flat.js"),r("../node_modules/core-js/modules/es.array.flat-map.js"),r("../node_modules/core-js/modules/es.array.index-of.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.array.last-index-of.js"),r("../node_modules/core-js/modules/es.array.reverse.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.array.splice.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js"),r("../node_modules/core-js/modules/es.array-buffer.constructor.js"),r("../node_modules/core-js/modules/es.array-buffer.slice.js"),r("../node_modules/core-js/modules/es.math.hypot.js"),r("../node_modules/core-js/modules/es.number.parse-float.js"),r("../node_modules/core-js/modules/es.object.define-getter.js"),r("../node_modules/core-js/modules/es.object.define-setter.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.lookup-getter.js"),r("../node_modules/core-js/modules/es.object.lookup-setter.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.promise.finally.js"),r("../node_modules/core-js/modules/es.string.pad-end.js"),r("../node_modules/core-js/modules/es.string.pad-start.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.trim-end.js"),r("../node_modules/core-js/modules/es.string.trim-start.js"),r("../node_modules/core-js/modules/es.typed-array.float32-array.js"),r("../node_modules/core-js/modules/es.typed-array.float64-array.js"),r("../node_modules/core-js/modules/es.typed-array.int8-array.js"),r("../node_modules/core-js/modules/es.typed-array.int16-array.js"),r("../node_modules/core-js/modules/es.typed-array.int32-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint16-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint32-array.js"),r("../node_modules/core-js/modules/es.typed-array.from.js"),r("../node_modules/core-js/modules/es.typed-array.of.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/web.immediate.js"),r("../node_modules/core-js/modules/web.queue-microtask.js"),r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url.to-json.js"),r("../node_modules/core-js/modules/web.url-search-params.js"),r("../node_modules/reflect-metadata/Reflect.js");var i=r("./config.js"),n=r("./global/index.js");r.d(t,"tw2",(function(){return n.tw2})),r.d(t,"CCPWGL",(function(){return n.tw2})),n.tw2.Register(i.config)},"./particle/Tw2ParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSystem",(function(){return W}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B=r("./global/utils/index.js"),N=r("./global/index.js"),k=r("./global/math/index.js"),U=r("./core/index.js"),V=r("./particle/element/index.js");function H(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W=(i=B.meta.type("Tw2ParticleSystem","Tr2ParticleSystem"),n=B.meta.string,a=B.meta.boolean,o=B.meta.boolean,s=B.meta.list("Tw2ParticleConstraint"),l=B.meta.list("Tw2ParticleElementDeclaration"),u=B.meta.struct("Tw2ParticleEmitter"),c=B.meta.struct("Tw2ParticleEmitter"),f=B.meta.list("Tw2ParticleForce"),d=B.meta.uint,h=B.meta.boolean,m=B.meta.boolean,b=B.meta.boolean,p=B.meta.notImplemented,v=B.meta.boolean,g=B.meta.todo("This is unused, remove it?"),y=B.meta.todo("This is unused, remove it?"),i((G=F=class e extends B.meta.Model{constructor(){super(),H(this,"name",E,this),H(this,"applyAging",T,this),H(this,"applyForce",S,this),H(this,"constraints",j,this),H(this,"elements",R,this),H(this,"emitParticleDuringLifeEmitter",P,this),H(this,"emitParticleOnDeathEmitter",x,this),H(this,"forces",z,this),H(this,"maxParticleCount",O,this),H(this,"requiresSorting",A,this),H(this,"updateBoundingBox",M,this),H(this,"updateSimulation",C,this),H(this,"useSimTimeRebase",D,this),H(this,"isGlobal",I,this),H(this,"peakAliveCount",L,this),this._aabbMin=k.vec3.create(),this._aabbMax=k.vec3.create(),this._aliveCount=0,this._bufferDirty=!1,this._buffers=[null,null],this._declaration=null,this._elements=[],this._instanceStride=[null,null],this._isValid=!1,this._distancesBuffer=null,this._sortedBuffer=null,this._sortedIndexes=null,this._stdElements=[null,null,null,null],this._vb=null,this._vertexStride=[null,null],e.init()}Initialize(){this.UpdateElementDeclaration()}GetResources(e=[]){return e}UpdateElementDeclaration(){this._isValid=!1;var e=N.device.gl;if(this._vb&&(e.deleteBuffer(this._vb),this._vb=null),this._declaration=null,this._aliveCount=0,0!==this.elements.length){this._stdElements=[null,null,null,null],this._elements=[],this._instanceStride=[0,0],this._vertexStride=[0,0],this._declaration=new U.Tw2VertexDeclaration,this._buffers=[null,null];for(var t=0;t<this.elements.length;++t){var r=this.elements[t].usedByGPU?0:1,i=this.elements[t],n=V.Tw2ParticleElement.from({elementType:i.elementType,customName:i.customName,dimension:i.GetDimension(),usageIndex:i.usageIndex,usedByGPU:!!i.usedByGPU});if(n.startOffset=this._vertexStride[r],n.offset=n.startOffset,this.elements[t].elementType!==V.Tw2ParticleElement.Type.CUSTOM&&(this._stdElements[this.elements[t].elementType]=n),this._vertexStride[r]+=n.dimension,this._elements.push(n),0===r){var a=this.elements[t].GetDeclaration();a.offset=4*n.startOffset,this._declaration.elements.push(a)}}this._declaration.RebuildHash();for(var o=0;o<this._elements.length;++o){var s=this._elements[o].usedByGPU?0:1;this._elements[o].vertexStride=this._vertexStride[s]}this._instanceStride[0]=4*this._vertexStride[0],this._instanceStride[1]=4*this._vertexStride[1];for(var l=0;l<this._elements.length;++l){var u=this._elements[l].usedByGPU?0:1;this._elements[l].instanceStride=this._instanceStride[u]}this._buffers=[null,null],this._instanceStride[0]&&this.maxParticleCount&&(this._buffers[0]=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._vb=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,this._buffers[0].length,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)),this._instanceStride[1]&&(this._buffers[1]=new Float32Array(this._instanceStride[1]*this.maxParticleCount));for(var c=0;c<this._elements.length;++c){var f=this._elements[c].usedByGPU?0:1;this._elements[c].buffer=this._buffers[f]}this.requiresSorting&&(this._sortedIndexes=new Array(this.maxParticleCount),this._sortedBuffer=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._distancesBuffer=new Float32Array(this.maxParticleCount)),this._isValid=!0,this._bufferDirty=!0}}HasElement(e){return null!==this._stdElements[e]}GetElement(e){return this._stdElements[e]&&(this._stdElements[e].offset=this._stdElements[e].startOffset),this._stdElements[e]}BeginSpawnParticle(){return!this._isValid||this._aliveCount>=this.maxParticleCount?null:this._aliveCount++}EndSpawnParticle(){this._bufferDirty=!0}Update(t){if(t=Math.min(t,.1),this.applyAging&&this.HasElement(V.Tw2ParticleElement.Type.LIFETIME)){for(var r=this.GetElement(V.Tw2ParticleElement.Type.LIFETIME),i=this.emitParticleOnDeathEmitter?this.GetElement(V.Tw2ParticleElement.Type.POSITION):null,n=this.emitParticleOnDeathEmitter?this.GetElement(V.Tw2ParticleElement.Type.VELOCITY):null,a=0;a<this._aliveCount;++a)if(r.buffer[r.offset]+=t/r.buffer[r.offset+1],r.buffer[r.offset]>1){if(this.emitParticleOnDeathEmitter&&this.emitParticleOnDeathEmitter.SpawnParticles(i,n,1),this._aliveCount--,a<this._aliveCount){for(var o=0;o<2;++o)this._buffers[o]&&this._buffers[o].set(this._buffers[o].subarray(this._instanceStride[o]*this._aliveCount,this._instanceStride[o]*this._aliveCount+this._instanceStride[o]),a*this._instanceStride[o]);--a,this._bufferDirty=!0}}else r.offset+=r.instanceStride,i&&(i.offset+=i.instanceStride),n&&(n.offset+=n.instanceStride);r.dirty=!0}var s=e.global.vec3_0;if(this.updateSimulation&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)&&this.HasElement(V.Tw2ParticleElement.Type.VELOCITY)){for(var l=this.applyForce&&this.forces.length,u=0;u<this.forces.length;++u)this.forces[u].Update(t);for(var c=this.GetElement(V.Tw2ParticleElement.Type.POSITION),f=this.GetElement(V.Tw2ParticleElement.Type.VELOCITY),d=l?this.GetElement(V.Tw2ParticleElement.Type.MASS):null,h=0;h<this._aliveCount;++h){if(l){for(var m=d?d.buffer[d.offset]:1,b=k.vec3.set(s,0,0,0),p=0;p<this.forces.length;++p)this.forces[p].ApplyForce(c,f,b,t,m);d&&k.vec3.scale(b,b,1/d.buffer[d.offset]),f.buffer[f.offset]+=b[0]*t,f.buffer[f.offset+1]+=b[1]*t,f.buffer[f.offset+2]+=b[2]*t}c.buffer[c.offset]+=f.buffer[f.offset]*t,c.buffer[c.offset+1]+=f.buffer[f.offset+1]*t,c.buffer[c.offset+2]+=f.buffer[f.offset+2]*t,this.emitParticleDuringLifeEmitter&&this.emitParticleDuringLifeEmitter.SpawnParticles(c,f,t),c.offset+=c.instanceStride,f.offset+=f.instanceStride,d&&(d.offset+=d.instanceStride)}c.dirty=!0,f.dirty=!0}if(this.updateSimulation&&this.constraints.length)for(var v=0;v<this.constraints.length;++v)this.constraints[v].ApplyConstraint(this._buffers,this._instanceStride,this._aliveCount,t);if(this.updateBoundingBox&&this.GetBoundingBox(this._aabbMin,this._aabbMax),this.emitParticleDuringLifeEmitter&&(!this.HasElement(V.Tw2ParticleElement.Type.POSITION)||!this.HasElement(V.Tw2ParticleElement.Type.VELOCITY))&&this.updateSimulation)for(var g=this.GetElement(V.Tw2ParticleElement.Type.POSITION),y=this.GetElement(V.Tw2ParticleElement.Type.VELOCITY),w=0;w<this._aliveCount;++w)this.emitParticleDuringLifeEmitter.SpawnParticles(g,y,1),g&&(g.offset+=g.instanceStride),y&&(y.offset+=y.instanceStride);for(var _=0;_<this._elements.length;++_){var E=this._elements[_];E.offset=E.startOffset,E.dirty&&(this._bufferDirty=!0,E.dirty=!1)}}GetBoundingBox(e,t){if(this._aliveCount&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)){var r=this.GetElement(V.Tw2ParticleElement.Type.POSITION);e[0]=r.buffer[r.offset],e[1]=r.buffer[r.offset+1],e[2]=r.buffer[r.offset+2],t[0]=r.buffer[r.offset],t[1]=r.buffer[r.offset+1],t[2]=r.buffer[r.offset+2];for(var i=0;i<this._aliveCount;++i)e[0]=Math.min(e[0],r.buffer[r.offset]),e[1]=Math.min(e[1],r.buffer[r.offset+1]),e[2]=Math.min(e[2],r.buffer[r.offset+2]),t[0]=Math.max(t[0],r.buffer[r.offset]),t[1]=Math.max(t[1],r.buffer[r.offset+1]),t[2]=Math.max(t[2],r.buffer[r.offset+2]),r.offset+=r.instanceStride;return!0}return!1}_Sort(){for(var t=k.mat4.multiply(e.global.mat4_0,N.device.projection,N.device.view),r=this.GetElement(V.Tw2ParticleElement.Type.POSITION),i=this._aliveCount,n=this._distancesBuffer,a=0;a<i;++a){var o=r.offset+r.instanceStride*a,s=r.buffer[o]-t[12],l=s*s;l+=(s=r.buffer[o+1]-t[13])*s,l+=(s=r.buffer[o+2]-t[14])*s,n[a]=l}for(var u=0;u<this.maxParticleCount;++u)this._sortedIndexes[u]=u;this._sortedIndexes.sort((function(e,t){if(e>=i&&t>=i)return e<t?-1:e>t?1:0;if(e>=i)return 1;if(t>=i)return-1;var r=n[e],a=n[t];return r<a?1:r>a?-1:0}))}GetInstanceBuffer(){if(0!==this._aliveCount){var e=N.device.gl;if(this.requiresSorting&&this.HasElement(V.Tw2ParticleElement.Type.POSITION)&&this._buffers){this._Sort();for(var t=this._instanceStride[0],r=this._buffers[0],i=0;i<this._aliveCount;++i)for(var n=i*t,a=this._sortedIndexes[i]*t,o=0;o<t;++o)this._sortedBuffer[n+o]=r[o+a];e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._sortedBuffer.subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1}else this._bufferDirty&&(e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._buffers[0].subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1);return this._vb}}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return this._instanceStride[0]}GetInstanceCount(){return this._aliveCount}static init(){V.Tw2ParticleElement.global||(e.global={vec3_0:k.vec3.create(),mat4_0:k.mat4.create()})}},F.global=null,E=q((_=G).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=q(_.prototype,"applyAging",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=q(_.prototype,"applyForce",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=q(_.prototype,"constraints",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=q(_.prototype,"elements",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=q(_.prototype,"emitParticleDuringLifeEmitter",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=q(_.prototype,"emitParticleOnDeathEmitter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=q(_.prototype,"forces",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=q(_.prototype,"maxParticleCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=q(_.prototype,"requiresSorting",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=q(_.prototype,"updateBoundingBox",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=q(_.prototype,"updateSimulation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=q(_.prototype,"useSimTimeRebase",[p,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=q(_.prototype,"isGlobal",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=q(_.prototype,"peakAliveCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=_))||w)},"./particle/element/Tw2ParticleElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElement",(function(){return C}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z=r("./global/utils/index.js");function O(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var M={LIFETIME:0,POSITION:1,VELOCITY:2,MASS:3,CUSTOM:4},C=(i=z.meta.type("Tw2ParticleElement"),n=z.meta.enums(M),a=z.meta.string,o=z.meta.uint,s=z.meta.uint,l=z.meta.boolean,u=z.meta.uint,c=z.meta.uint,f=z.meta.uint,d=z.meta.uint,h=z.meta.boolean,m=z.meta.isPrivate,i((x=P=class e{constructor(){O(this,"elementType",v,this),O(this,"customName",g,this),O(this,"dimension",y,this),O(this,"usageIndex",w,this),O(this,"usedByGPU",_,this),this.buffer=null,O(this,"startOffset",E,this),O(this,"offset",T,this),O(this,"instanceStride",S,this),O(this,"vertexStride",j,this),O(this,"dirty",R,this)}get string(){return Object(z.getKeyFromValue)(this.constructor.Type,this.elementType,"UNKNOWN")}static from(t){var r=new e;if(t){var i=t.elementType;r.elementType="string"==typeof i?this.Type[i.toUpperCase()]:i,r.customName=t.customName,r.dimension=t.dimension,r.usageIndex=t.usageIndex,r.usedByGPU=t.usedByGPU?1:0}return r}},P.Type=M,v=A((p=x).prototype,"elementType",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A(p.prototype,"customName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=A(p.prototype,"dimension",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=A(p.prototype,"usageIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A(p.prototype,"usedByGPU",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=A(p.prototype,"startOffset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=A(p.prototype,"offset",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=A(p.prototype,"instanceStride",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=A(p.prototype,"vertexStride",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=A(p.prototype,"dirty",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=p))||b)},"./particle/element/Tw2ParticleElementDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElementDeclaration",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./core/index.js"),y=r("./particle/element/Tw2ParticleElement.js"),w=r("./global/utils/index.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T=(i=w.meta.type("Tw2ParticleElementDeclaration","Tr2ParticleElementDeclaration"),n=w.meta.string,a=w.meta.uint,o=w.meta.uint,s=w.meta.enums(y.Tw2ParticleElement.Type),l=w.meta.uint,u=w.meta.boolean,i((v=class extends w.meta.Model{constructor(...e){super(...e),_(this,"customName",d,this),_(this,"dimension",h,this),_(this,"elementType",m,this),_(this,"usageIndex",b,this),_(this,"usedByGPU",p,this)}GetDimension(){switch(this.elementType){case y.Tw2ParticleElement.Type.LIFETIME:return 2;case y.Tw2ParticleElement.Type.POSITION:case y.Tw2ParticleElement.Type.VELOCITY:return 3;case y.Tw2ParticleElement.Type.MASS:return 1}return this.dimension}GetDeclaration(){var e;switch(this.elementType){case y.Tw2ParticleElement.Type.LIFETIME:e=g.Tw2VertexElement.Type.TANGENT;break;case y.Tw2ParticleElement.Type.POSITION:e=g.Tw2VertexElement.Type.POSITION;break;case y.Tw2ParticleElement.Type.VELOCITY:e=g.Tw2VertexElement.Type.NORMAL;break;case y.Tw2ParticleElement.Type.MASS:e=g.Tw2VertexElement.Type.BINORMAL;break;default:e=g.Tw2VertexElement.Type.TEXCOORD}return g.Tw2VertexElement.from({usage:e,usageIndex:this.usageIndex,elements:this.GetDimension()})}},d=E((f=v).prototype,"customName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=E(f.prototype,"dimension",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=E(f.prototype,"elementType",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Tw2ParticleElement.Type.CUSTOM}}),b=E(f.prototype,"usageIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=E(f.prototype,"usedByGPU",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=f))||c)},"./particle/element/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./particle/element/Tw2ParticleElement.js");r.d(t,"Tw2ParticleElement",(function(){return i.Tw2ParticleElement}));var n=r("./particle/element/Tw2ParticleElementDeclaration.js");r.d(t,"Tw2ParticleElementDeclaration",(function(){return n.Tw2ParticleElementDeclaration}))},"./particle/emitter/Tw2DynamicEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2DynamicEmitter",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./particle/emitter/Tw2ParticleEmitter.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=g.meta.type("Tw2DynamicEmitter","Tr2DynamicEmitter"),n=g.meta.string,a=g.meta.list("Tw2ParticleAttributeGenerator"),o=g.meta.notImplemented,s=g.meta.uint,l=g.meta.struct("Tw2ParticleSystem"),u=g.meta.float,i((v=class extends y.Tw2ParticleEmitter{constructor(...e){super(...e),w(this,"name",d,this),w(this,"generators",h,this),w(this,"maxParticles",m,this),w(this,"particleSystem",b,this),w(this,"rate",p,this),this._accumulatedRate=0,this._isValid=!1}Initialize(){this.Rebind()}Update(e){this.SpawnParticles(null,null,Math.min(e,.1))}Rebind(){if(this._isValid=!1,this.particleSystem){for(var e=0;e<this.generators.length;++e)if(!this.generators[e].Bind(this.particleSystem))return;this._isValid=!0}}SpawnParticles(e,t,r){if(this._isValid){this._accumulatedRate+=this.rate*r;var i=Math.floor(this._accumulatedRate);this._accumulatedRate-=i;for(var n=0;n<i;++n){var a=this.particleSystem.BeginSpawnParticle();if(null===a)break;for(var o=0;o<this.generators.length;++o)this.generators[o].Generate(e,t,a);this.particleSystem.EndSpawnParticle()}}}},d=_((f=v).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=_(f.prototype,"generators",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=_(f.prototype,"maxParticles",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=_(f.prototype,"particleSystem",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_(f.prototype,"rate",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c)},"./particle/emitter/Tw2ParticleEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleEmitter",(function(){return m}));var i,n,a,o,s=r("./global/utils/index.js");var l,u,c,f,d,h,m=(i=s.meta.struct("Tw2ParticleSystem"),o=class extends s.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="particleSystem",n=this,(i=a)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}Initialize(){}GetResources(e=[]){return this.particleSystem&&this.particleSystem.GetResources(e),e}Update(e){}},l=(n=o).prototype,u="particleSystem",c=[i],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},h={},Object.keys(f).forEach((function(e){h[e]=f[e]})),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=c.slice().reverse().reduce((function(e,t){return t(l,u,e)||e}),h),d&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(d):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(l,u,h),h=null),a=h,n)},"./particle/emitter/Tw2StaticEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2StaticEmitter",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/index.js"),w=r("./core/index.js"),_=r("./particle/emitter/Tw2ParticleEmitter.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=g.meta.type("Tw2StaticEmitter","Tr2StaticEmitter"),n=g.meta.string,a=g.meta.path,o=g.meta.uint,s=g.meta.struct("Tw2ParticleSystem"),l=g.meta.struct("Tw2GeometryRes"),u=g.meta.isPrivate,i((v=class extends _.Tw2ParticleEmitter{constructor(...e){super(...e),E(this,"name",d,this),E(this,"geometryResourcePath",h,this),E(this,"meshIndex",m,this),E(this,"particleSystem",b,this),E(this,"geometryResource",p,this),this._spawned=!1}get geometryIndex(){return this.meshIndex}set geometryIndex(e){this.meshIndex=e}Initialize(){""!==this.geometryResourcePath&&(this.geometryResource=y.tw2.GetResource(this.geometryResourcePath,e=>{e.systemMirror=!0,this.OnResPrepared(e)})),this._spawned=!1}GetResources(e=[]){return this.particleSystem&&this.particleSystem.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnResPrepared(){this.geometryResource&&this.geometryResource.meshes.length&&(this.geometryResource.meshes[0].bufferData||(this.geometryResource.systemMirror=!0,this.geometryResource.Reload()))}Update(){var e=this.geometryResource;if(!this._spawned&&this.particleSystem&&e&&e.IsGood()&&e.meshes.length>this.meshIndex&&e.meshes[this.meshIndex].bufferData){this._spawned=!0;for(var t=e.meshes[this.meshIndex],r=this.particleSystem.elements,i=new Array(r.length),n=0;n<r.length;++n){var a=r[n].GetDeclaration(),o=t.declaration.FindUsage(a.usage,a.usageIndex-8);if(null===o)return void e.OnError(new w.ErrGeometryMeshMissingParticleElement({path:e.path,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));if(o.elements<a.elements)return void e.OnError(new w.ErrGeometryMeshElementComponentsMissing({path:e.path,inputCount:o.elements,elementCount:a.elements,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));i[n]=o.offset/4}for(var s=t.bufferData.length/t.declaration.stride*4,l=0;l<s;++l){var u=this.particleSystem.BeginSpawnParticle();if(null===u)break;for(var c=0;c<this.particleSystem._elements.length;++c)for(var f=this.particleSystem._elements[c],d=0;d<f.dimension;++d)f.buffer[f.instanceStride*u+f.startOffset+d]=t.bufferData[i[c]+d+l*t.declaration.stride/4];this.particleSystem.EndSpawnParticle()}}}},d=T((f=v).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=T(f.prototype,"geometryResourcePath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=T(f.prototype,"meshIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=T(f.prototype,"particleSystem",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T(f.prototype,"geometryResource",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c)},"./particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./particle/emitter/Tw2StaticEmitter.js");r.d(t,"Tw2StaticEmitter",(function(){return i.Tw2StaticEmitter}));var n=r("./particle/emitter/Tw2DynamicEmitter.js");r.d(t,"Tw2DynamicEmitter",(function(){return n.Tw2DynamicEmitter}))},"./particle/force/Tw2ParticleAttractorForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttractorForce",(function(){return p}));var i,n,a,o,s,l,u,c,f=r("./global/math/index.js"),d=r("./global/utils/index.js"),h=r("./particle/force/Tw2ParticleForce.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.type("Tw2ParticleAttractorForce","Tr2ParticleAttractorForce"),n=d.meta.float,a=d.meta.vector3,i((c=class extends h.Tw2ParticleForce{constructor(...e){super(...e),m(this,"magnitude",l,this),m(this,"position",u,this)}ApplyForce(e,t,r,i,n){var a=h.Tw2ParticleForce.global.vec3_0;a[0]=this.position[0]-e.buffer[e.offset],a[1]=this.position[1]-e.buffer[e.offset+1],a[2]=this.position[2]-e.buffer[e.offset+2],f.vec3.normalize(a,a),f.vec3.scale(a,a,this.magnitude),f.vec3.add(r,r,a)}},l=b((s=c).prototype,"magnitude",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=b(s.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.vec3.create()}}),o=s))||o)},"./particle/force/Tw2ParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDirectForce",(function(){return g}));var i,n,a,o,s,l,u=r("./global/utils/index.js"),c=r("./global/math/index.js"),f=r("./particle/force/Tw2ParticleForce.js");var d,h,m,b,p,v,g=(i=u.meta.type("Tw2ParticleDirectForce","Tr2ParticleDirectForce"),n=u.meta.vector3,i((l=class extends f.Tw2ParticleForce{constructor(...e){var t,r,i,n;super(...e),t=this,r="force",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}ApplyForce(e,t,r,i,n){c.vec3.add(r,r,this.force)}},d=(o=l).prototype,h="force",m=[n],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.vec3.create()}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),s=v,a=o))||a)},"./particle/force/Tw2ParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDragForce",(function(){return v}));var i,n,a,o,s,l,u=r("./global/utils/index.js"),c=r("./particle/force/Tw2ParticleForce.js");var f,d,h,m,b,p,v=(i=u.meta.type("Tw2ParticleDragForce","Tr2ParticleDragForce"),n=u.meta.float,i((l=class extends c.Tw2ParticleForce{constructor(...e){var t,r,i,n;super(...e),t=this,r="drag",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}ApplyForce(e,t,r,i,n){r[0]+=t.buffer[t.offset]*-this.drag,r[1]+=t.buffer[t.offset+1]*-this.drag,r[2]+=t.buffer[t.offset+2]*-this.drag}},f=(o=l).prototype,d="drag",h=[n],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),s=p,a=o))||a)},"./particle/force/Tw2ParticleFluidDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleFluidDragForce",(function(){return g}));var i,n,a,o,s,l,u=r("./global/utils/index.js"),c=r("./global/math/index.js"),f=r("./particle/force/Tw2ParticleForce.js");var d,h,m,b,p,v,g=(i=u.meta.type("Tw2ParticleFluidDragForce","Tr2ParticleFluidDragForce"),n=u.meta.float,i((l=class extends f.Tw2ParticleForce{constructor(...e){var t,r,i,n;super(...e),t=this,r="drag",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}ApplyForce(e,t,r,i,n){var a=f.Tw2ParticleForce.global.vec3_0,o=f.Tw2ParticleForce.global.vec3_1,s=Math.sqrt(t.buffer[t.offset]*t.buffer[t.offset]+t.buffer[t.offset+1]*t.buffer[t.offset+1]+t.buffer[t.offset+2]*t.buffer[t.offset+2]);a[0]=t.buffer[t.offset]*-s*this.drag,a[1]=t.buffer[t.offset+1]*-s*this.drag,a[2]=t.buffer[t.offset+2]*-s*this.drag,c.vec3.scale(o,a,i*n),o[0]+=t.buffer[t.offset],o[1]+=t.buffer[t.offset+1],o[2]+=t.buffer[t.offset+2],t.buffer[t.offset]*o[0]+t.buffer[t.offset+1]*o[1]+t.buffer[t.offset+2]*o[2]<0?(r[0]=-t.buffer[t.offset]/i/n,r[1]=-t.buffer[t.offset+1]/i/n,r[2]=-t.buffer[t.offset+2]/i/n):c.vec3.copy(r,a)}},d=(o=l).prototype,h="drag",m=[n],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),s=v,a=o))||a)},"./particle/force/Tw2ParticleForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleForce",(function(){return b}));var i,n,a,o,s=r("./global/utils/index.js"),l=r("./global/math/index.js");var u,c,f,d,h,m,b=(i=s.meta.abstract,o=a=class extends s.meta.Model{ApplyForce(e,t,r,i,n){}Update(e){}},a.global={vec3_0:l.vec3.create(),vec3_1:l.vec3.create(),vec4_0:l.vec4.create()},u=(n=o).prototype,c="ApplyForce",f=[i],d=Object.getOwnPropertyDescriptor(n.prototype,"ApplyForce"),h=n.prototype,m={},Object.keys(d).forEach((function(e){m[e]=d[e]})),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=f.slice().reverse().reduce((function(e,t){return t(u,c,e)||e}),m),h&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(h):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(u,c,m),m=null),n)},"./particle/force/Tw2ParticleSpring.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSpring",(function(){return p}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js"),d=r("./global/math/index.js"),h=r("./particle/force/Tw2ParticleForce.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=f.meta.type("Tw2ParticleSpring","Tr2ParticleSpring"),n=f.meta.float,a=f.meta.vector3,i((c=class extends h.Tw2ParticleForce{constructor(...e){super(...e),m(this,"springConstant",l,this),m(this,"position",u,this)}ApplyForce(e,t,r,i,n){r[0]+=(this.position[0]-e.buffer[e.offset])*this.springConstant,r[1]+=(this.position[1]-e.buffer[e.offset+1])*this.springConstant,r[2]+=(this.position[2]-e.buffer[e.offset+2])*this.springConstant}},l=b((s=c).prototype,"springConstant",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=b(s.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec3.create()}}),o=s))||o)},"./particle/force/Tw2ParticleTurbulenceForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleTurbulenceForce",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js"),v=r("./particle/force/Tw2ParticleForce.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=b.meta.type("Tw2ParticleTurbulenceForce","Tr2ParticleTurbulenceForce"),n=b.meta.vector3,a=b.meta.vector4,o=b.meta.float,s=b.meta.float,i((m=class extends v.Tw2ParticleForce{constructor(...e){super(...e),g(this,"amplitude",c,this),g(this,"frequency",f,this),g(this,"noiseLevel",d,this),g(this,"noiseRatio",h,this),this._time=0}ApplyForce(e,t,r,i,n){if(0!==this.noiseLevel){for(var a=e.buffer[e.offset]*this.frequency[0],o=e.buffer[e.offset+1]*this.frequency[1],s=e.buffer[e.offset+2]*this.frequency[2],l=this._time*this.frequency[3],u=0,c=.5,f=1/this.noiseRatio,d=p.vec4.set(v.Tw2ParticleForce.global.vec4_0,0,0,0,0),h=0;h<this.noiseLevel;++h)p.noise.turbulence(d,a,o,s,l,c),u+=c,a*=f,o*=f,s*=f,l*=f,c*=this.noiseRatio;r[0]+=d[0]*this.amplitude[0]*u,r[1]+=d[1]*this.amplitude[1]*u,r[2]+=d[2]*this.amplitude[2]*u}}Update(e){this._time+=e}},c=y((u=m).prototype,"amplitude",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.fromValues(1,1,1)}}),f=y(u.prototype,"frequency",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec4.fromValues(1,1,1,1)}}),d=y(u.prototype,"noiseLevel",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),h=y(u.prototype,"noiseRatio",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),l=u))||l)},"./particle/force/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./particle/force/Tw2ParticleAttractorForce.js");r.d(t,"Tw2ParticleAttractorForce",(function(){return i.Tw2ParticleAttractorForce}));var n=r("./particle/force/Tw2ParticleDirectForce.js");r.d(t,"Tw2ParticleDirectForce",(function(){return n.Tw2ParticleDirectForce}));var a=r("./particle/force/Tw2ParticleDragForce.js");r.d(t,"Tw2ParticleDragForce",(function(){return a.Tw2ParticleDragForce}));var o=r("./particle/force/Tw2ParticleFluidDragForce.js");r.d(t,"Tw2ParticleFluidDragForce",(function(){return o.Tw2ParticleFluidDragForce}));var s=r("./particle/force/Tw2ParticleSpring.js");r.d(t,"Tw2ParticleSpring",(function(){return s.Tw2ParticleSpring}));var l=r("./particle/force/Tw2ParticleTurbulenceForce.js");r.d(t,"Tw2ParticleTurbulenceForce",(function(){return l.Tw2ParticleTurbulenceForce}))},"./particle/generators/Tw2ParticleAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttributeGenerator",(function(){return f}));var i,n,a,o,s,l=r("./global/utils/index.js"),u=r("./global/math/index.js");function c(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var f=(i=l.meta.abstract,n=l.meta.abstract,s=o=class extends l.meta.Model{Bind(e){}Generate(e,t,r){}},o.global={vec3_0:u.vec3.create()},c((a=s).prototype,"Bind",[i],Object.getOwnPropertyDescriptor(a.prototype,"Bind"),a.prototype),c(a.prototype,"Generate",[n],Object.getOwnPropertyDescriptor(a.prototype,"Generate"),a.prototype),a)},"./particle/generators/Tw2RandomIntegerAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/math/index.js"),w=r("./particle/element/Tw2ParticleElement.js"),_=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=g.meta.type("Tw2RandomIntegerAttributeGenerator","Tr2RandomIntegerAttributeGenerator"),n=g.meta.string,a=g.meta.uint,o=g.meta.enums(w.Tw2ParticleElement.Type),s=g.meta.vector4,l=g.meta.vector4,u=g.meta.struct("Tw2ParticleElement"),i((v=class extends _.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),E(this,"customName",d,this),E(this,"elementType",h,this),E(this,"minRange",m,this),E(this,"maxRange",b,this),E(this,"_element",p,this)}Bind(e){for(var t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==w.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(var i=0;i<this._element.dimension;++i)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+i]=Math.floor(this.minRange[i]+Math.random()*(this.maxRange[i]-this.minRange[i])+.5)}},d=T((f=v).prototype,"customName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=T(f.prototype,"elementType",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Tw2ParticleElement.Type.CUSTOM}}),m=T(f.prototype,"minRange",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),b=T(f.prototype,"maxRange",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),p=T(f.prototype,"_element",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c)},"./particle/generators/Tw2RandomUniformAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/math/index.js"),w=r("./particle/element/Tw2ParticleElement.js"),_=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function E(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function T(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var S=(i=g.meta.type("Tw2RandomUniformAttributeGenerator","Tr2RandomUniformAttributeGenerator"),n=g.meta.string,a=g.meta.uint,o=g.meta.enums(w.Tw2ParticleElement.Type),s=g.meta.vector4,l=g.meta.vector4,u=g.meta.struct("Tw2ParticleElement"),i((v=class extends _.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),E(this,"customName",d,this),E(this,"elementType",h,this),E(this,"minRange",m,this),E(this,"maxRange",b,this),E(this,"_element",p,this)}get elementType(){return w.Tw2ParticleElement.Type.CUSTOM}Bind(e){for(var t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==w.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(var i=0;i<this._element.dimension;++i)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+i]=this.minRange[i]+Math.random()*(this.maxRange[i]-this.minRange[i])}},d=T((f=v).prototype,"customName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=T(f.prototype,"elementType",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Tw2ParticleElement.Type.CUSTOM}}),m=T(f.prototype,"minRange",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),b=T(f.prototype,"maxRange",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.vec4.create()}}),p=T(f.prototype,"_element",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=f))||c)},"./particle/generators/Tw2SphereShapeAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return Q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H=r("./global/utils/index.js"),q=r("./global/math/index.js"),W=r("./particle/element/Tw2ParticleElement.js"),Y=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function K(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function X(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Q=(i=H.meta.type("Tw2SphereShapeAttributeGenerator","Tr2SphereShapeAttributeGenerator"),n=H.meta.string,a=H.meta.float,o=H.meta.notImplemented,s=H.meta.float,l=H.meta.float,u=H.meta.float,c=H.meta.float,f=H.meta.float,d=H.meta.float,h=H.meta.float,m=H.meta.float,b=H.meta.float,p=H.meta.vector3,v=H.meta.quaternion,g=H.meta.boolean,y=H.meta.todo("Is this deprecated?"),w=H.meta.boolean,_=H.meta.todo("Is this deprecated?"),E=H.meta.struct("Tw2ParticleElement"),T=H.meta.struct("Tw2ParticleElement"),i((V=class extends Y.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),K(this,"customName",R,this),K(this,"distributionExponent",P,this),K(this,"maxPhi",x,this),K(this,"maxRadius",z,this),K(this,"maxSpeed",O,this),K(this,"maxTheta",A,this),K(this,"minPhi",M,this),K(this,"minRadius",C,this),K(this,"minSpeed",D,this),K(this,"minTheta",I,this),K(this,"parentVelocityFactor",L,this),K(this,"position",F,this),K(this,"rotation",G,this),K(this,"controlPosition",B,this),K(this,"controlVelocity",N,this),K(this,"_position",k,this),K(this,"_velocity",U,this)}Bind(e){this._position=null,this._velocity=null;for(var t=0;t<e._elements.length;++t)e._elements[t].elementType===W.Tw2ParticleElement.Type.POSITION&&this.controlPosition?this._position=e._elements[t]:e._elements[t].elementType===W.Tw2ParticleElement.Type.VELOCITY&&this.controlVelocity&&(this._velocity=e._elements[t]);return!(this.controlPosition&&null===this._position||this.controlVelocity&&null===this._velocity)}Generate(e,t,r){var i=(this.minPhi+Math.random()*(this.maxPhi-this.minPhi))/180*Math.PI,n=(this.minTheta+Math.random()*(this.maxTheta-this.minTheta))/180*Math.PI,a=Y.Tw2ParticleAttributeGenerator.global.vec3_0;if(a[0]=Math.sin(i)*Math.cos(n),a[1]=-Math.cos(i),a[2]=Math.sin(i)*Math.sin(n),q.vec3.transformQuat(a,a,this.rotation),this._velocity){var o=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),s=this._velocity.instanceStride*r+this._velocity.startOffset;this._velocity.buffer[s]=a[0]*o,this._velocity.buffer[s+1]=a[1]*o,this._velocity.buffer[s+2]=a[2]*o,t&&(this._velocity.buffer[s]+=t.buffer[t.offset]*this.parentVelocityFactor,this._velocity.buffer[s+1]+=t.buffer[t.offset+1]*this.parentVelocityFactor,this._velocity.buffer[s+2]+=t.buffer[t.offset+2]*this.parentVelocityFactor)}if(this._position){q.vec3.scale(a,a,this.minRadius+Math.random()*(this.maxRadius-this.minRadius)),q.vec3.add(a,a,this.position),e&&(a[0]+=e.buffer[e.offset],a[1]+=e.buffer[e.offset+1],a[2]+=e.buffer[e.offset+2]);var l=this._position.instanceStride*r+this._position.startOffset;this._position.buffer[l]=a[0],this._position.buffer[l+1]=a[1],this._position.buffer[l+2]=a[2]}}},R=X((j=V).prototype,"customName",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=X(j.prototype,"distributionExponent",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=X(j.prototype,"maxPhi",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),z=X(j.prototype,"maxRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=X(j.prototype,"maxSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=X(j.prototype,"maxTheta",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),M=X(j.prototype,"minPhi",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=X(j.prototype,"minRadius",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=X(j.prototype,"minSpeed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=X(j.prototype,"minTheta",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=X(j.prototype,"parentVelocityFactor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=X(j.prototype,"position",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.vec3.create()}}),G=X(j.prototype,"rotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.quat.create()}}),B=X(j.prototype,"controlPosition",[g,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=X(j.prototype,"controlVelocity",[w,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=X(j.prototype,"_position",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=X(j.prototype,"_velocity",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=j))||S)},"./particle/generators/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./particle/generators/Tw2RandomIntegerAttributeGenerator.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return i.Tw2RandomIntegerAttributeGenerator}));var n=r("./particle/generators/Tw2RandomUniformAttributeGenerator.js");r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return n.Tw2RandomUniformAttributeGenerator}));var a=r("./particle/generators/Tw2SphereShapeAttributeGenerator.js");r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return a.Tw2SphereShapeAttributeGenerator}))},"./particle/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./particle/element/index.js");r.d(t,"Tw2ParticleElement",(function(){return i.Tw2ParticleElement})),r.d(t,"Tw2ParticleElementDeclaration",(function(){return i.Tw2ParticleElementDeclaration}));var n=r("./particle/emitter/index.js");r.d(t,"Tw2StaticEmitter",(function(){return n.Tw2StaticEmitter})),r.d(t,"Tw2DynamicEmitter",(function(){return n.Tw2DynamicEmitter}));var a=r("./particle/force/index.js");r.d(t,"Tw2ParticleAttractorForce",(function(){return a.Tw2ParticleAttractorForce})),r.d(t,"Tw2ParticleDirectForce",(function(){return a.Tw2ParticleDirectForce})),r.d(t,"Tw2ParticleDragForce",(function(){return a.Tw2ParticleDragForce})),r.d(t,"Tw2ParticleFluidDragForce",(function(){return a.Tw2ParticleFluidDragForce})),r.d(t,"Tw2ParticleSpring",(function(){return a.Tw2ParticleSpring})),r.d(t,"Tw2ParticleTurbulenceForce",(function(){return a.Tw2ParticleTurbulenceForce}));var o=r("./particle/generators/index.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",(function(){return o.Tw2RandomIntegerAttributeGenerator})),r.d(t,"Tw2RandomUniformAttributeGenerator",(function(){return o.Tw2RandomUniformAttributeGenerator})),r.d(t,"Tw2SphereShapeAttributeGenerator",(function(){return o.Tw2SphereShapeAttributeGenerator}));var s=r("./particle/Tw2ParticleSystem.js");r.d(t,"Tw2ParticleSystem",(function(){return s.Tw2ParticleSystem}))},"./sof/EveSOF.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOF",(function(){return f})),r.d(t,"ErrSOFHullNotFound",(function(){return d})),r.d(t,"ErrSOFFactionNotFound",(function(){return h})),r.d(t,"ErrSOFRaceNotFound",(function(){return m})),r.d(t,"ErrSOFMaterialNotFound",(function(){return b})),r.d(t,"ErrSOFPatternNotFound",(function(){return p}));var i=r("./global/index.js"),n=r("./global/math/index.js"),a=r("./global/utils/index.js"),o=r("./curve/index.js"),s=r("./core/index.js"),l=r("./eve/index.js");function u(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){u(a,i,n,o,s,"next",e)}function s(e){u(a,i,n,o,s,"throw",e)}o(void 0)}))}}function f(){var e=this,t=this,r=null,u=null;function f(e){return e?Object(a.get)(r.generic,"shaderPrefixAnimated",""):Object(a.get)(r.generic,"shaderPrefix","")}function v(e,t,r,i,n){var o=null;if(Object(a.get)(i,"resPathInsert","").length&&(o=i.resPathInsert),"respathinsert"in n&&1===n.respathinsert.length){if("none"===n.respathinsert[0])return e;o=n.respathinsert[0]}if("MaterialMap"===t||"PaintMaskMap"===t||"PmdgMap"===t){var s=e.lastIndexOf("/"),l=e;if(s>=0&&(l=e.substr(0,s+1)+o+"/"+e.substr(s+1)),(s=l.lastIndexOf("_"))>=0){l=l.substr(0,s)+"_"+o+l.substr(s);var u=Object(a.get)(r,"textureOverrides",{});if(t in u&&i.name in u[t])return l}}return e}function g(e,t){for(var r=0;r<e.length;++r)if(t.substr(0,e[r].length)===e[r])return r;return null}function y(e,t,i,n){var o,s,l,u;return"mesh"in i&&null!==(s=g(o=r.generic.materialPrefixes,e))&&s<i.mesh.length&&0==(Object(a.get)(t,"blockedMaterials",0)&1<<s)&&(l=Object(a.get)(r.material,i.mesh[s],null))?(u=e.substr(o[s].length),Object(a.get)(l.parameters,u,void 0)):(s=g(o=r.generic.patternMaterialPrefixes,e),"pattern"in i&&null!==s&&1+s<i.pattern.length&&(l=Object(a.get)(r.material,i.pattern[1+s],null))||null!==s&&(l=Object(a.get)(r.material,n.defaultPatternLayer1MaterialName,null))?(u=e.substr(o[s].length),Object(a.get)(l.parameters,u,void 0)):void 0)}function w(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}function _(e,t,i,n,o,l,u,c,d){for(var h,m,b,p,g=Object(a.get)(i,t,[]),_=0;_<g.length;++_){var E=g[_],T=new s.Tw2Effect;if(d)for(var S=0;S<2;S++){var j=d[S];if(j){var{PatternMaskMap:R,DiffuseColor:P,FresnelColor:x,Gloss:z}=j.parameters;T.parameters[R.name]=R,T.parameters[P.name]=P,T.parameters[x.name]=x,T.parameters[z.name]=z}else console.error("Missing mask "+S)}T.effectFilePath=r.generic.areaShaderLocation+(h=c||E.shader,m=i.isSkinned,b=void 0,p=void 0,b=f(m),p=(h="/"+h).lastIndexOf("/"),h.substr(0,p+1)+b+h.substr(p+1));for(var O=Object(a.get)(Object(a.get)(r.generic.areaShaders,E.shader,{}),"parameters",[]),A=0;A<O.length;++A){var M=O[A],C=y(M,E,u,o);(C=(C=(C=(C=C||Object(a.get)(Object(a.get)(Object(a.get)(r.generic.hullAreas,E.name,{}),"parameters",{}),M))||Object(a.get)(Object(a.get)(Object(a.get)(o.hullAreas,E.name,{}),"parameters",{}),M))||Object(a.get)(Object(a.get)(Object(a.get)(n.areas,E.name,{}),"parameters",{}),M))||Object(a.get)(Object(a.get)(E,"parameters",{}),M))&&(T.parameters[M]?T.parameters[M].SetValue(C):T.parameters[M]=new s.Tw2Vector4Parameter(M,C))}var D=Object(a.get)(E,"textures",{});for(var I in D)if(D.hasOwnProperty(I)){var L=v(D[I],I,E,n,u);T.parameters[I]?T.parameters[I].SetValue(L):T.parameters[I]=new s.Tw2TextureParameter(I,L)}for(var F=0;F<l.layers.length;++F){var G=l.layers[F]?l.layers[F].textureName:"";if(G&&!T.parameters[G]){var B=new s.Tw2TextureParameter(l.layers[F].textureName);B.resourcePath=l.layers[F].textureResFilePath,B.useAllOverrides=!0,B.addressUMode=w(Object(a.get)(l.layers[F],"projectionTypeU",0)),B.addressVMode=w(Object(a.get)(l.layers[F],"projectionTypeV",0)),B.Initialize(),T.parameters[l.layers[F].textureName]=B}}var N=Object(a.get)(Object(a.get)(r.generic.areaShaders,E.shader,{}),"defaultTextures",{});for(var k in N)N.hasOwnProperty(k)&&(k in T.parameters||(T.parameters[k]=new s.Tw2TextureParameter(k,N[k])));T.Initialize();var U=new s.Tw2MeshArea;U.name=E.name,U.effect=T,U.index=Object(a.get)(E,"index",0),U.count=Object(a.get)(E,"count",1),e.push(U)}}function E(e,t=-1){if(!e)return null;var r="group".concat(t);return e[r]?e[r]:null}this.SKIP_EMPTY_ITEMS=!0;function T(e,t,r,s){function l(t){return function(l){l.constructor.__isEffectChild?e.effectChildren.push(l):e.children.push(l),n.vec3.copy(l.translation,Object(a.get)(t,"translation",[0,0,0])),n.quat.copy(l.rotation,Object(a.get)(t,"rotation",[0,0,0,1])),n.vec3.copy(l.scaling,Object(a.get)(t,"scaling",[1,1,1]));var u=Object(a.get)(t,"id",-1);-1!==u&&s[u]&&function e(t,r,n){if(Array.isArray(t.particleEmitters)){for(var a=0;a<t.particleEmitters.length;++a)if("rate"in t.particleEmitters[a]){var s=new o.Tw2ValueBinding;s.sourceObject=n,s.sourceAttribute="currentValue",s.destinationObject=t.particleEmitters[a],s.destinationAttribute="rate",s.Initialize(),r.bindings.push(s)}for(a=0;a<t.children.length;++a)e(t.children[a],r,n)}else i.tw2.Warning({name:"Space object factory",message:"Unable to bind particle emitters: ".concat(t.constructor.name)})}(l,r,s[u])}}for(var u=Object(a.get)(t,"children",[]),c=0;c<u.length;++c){var f=u[c].redFilePath;f?i.tw2.Fetch(f).then(l(u[c])):i.tw2.Warning({name:"Space object factory",message:'No resource path found for "'.concat(t.name,'" child at index ').concat(c)})}}function S(e,t,i){for(var n=-1,o=0;o<r.generic.materialPrefixes.length;++o)e.substr(0,r.generic.materialPrefixes[o].length)===r.generic.materialPrefixes[o]&&(n=o,e=e.substr(r.generic.materialPrefixes[o].length));if(-1!==n){var s=Object(a.get)(t,"materialUsageMtl"+(n+1),n);if(s>=0&&s<r.generic.materialPrefixes.length&&(e=r.generic.materialPrefixes[s]+e)in i.parameters)return i.parameters[e]}}var j,R=[0,0,0,0];function P(e,t,r,i){switch(i){case"overridable":return t||(r||R);case"half_overridable":return e.indexOf("GlowColor")>=0?r||R:t||(r||R);case"not_overridable":case"half_overridable_2":return r||R}return R}this.SetupTurretMaterial=function(e,t,r,i,n){return this.FetchTurretMaterial(e,t,r).then(i).catch(n)},this.FetchTurretMaterial=function(){var e=c((function*(e,t,i){return yield this.FetchSOF(),function(e,t,i){var a=r.faction[t],o=r.faction[i],l=null;a&&a.areas&&"hull"in a.areas&&(l=a.areas.hull);var u=null;if(o&&o.areas&&"hull"in o.areas&&(u=o.areas.hull),(l||u)&&e.turretEffect){var c=e.turretEffect.parameters;for(var f in c)if(c.hasOwnProperty(f)){if(c[f].constructor.prototype!==s.Tw2Vector4Parameter.prototype)continue;var d=null,h=null;l&&(d=S(f,a,l)),u&&(h=S(f,a,l)),n.vec4.copy(c[f].value,P(f,d,h,e.turretEffect.name))}e.turretEffect.BindParameters()}}(e,t,i),e}));return function(t,r,i){return e.apply(this,arguments)}}(),this.FetchSOF=(j=null,c((function*(){return j||(u=s.Tw2Effect.from({effectFilePath:"cdn:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",parameters:{MainIntensity:1,GradientMap:"cdn:/texture/particle/whitesharp_gradient.dds.0.png"}}),j=i.tw2.Fetch("cdn:/dx9/model/spaceobjectfactory/data.red").then(e=>r=e).catch(e=>{throw i.tw2.Error({name:"Space object factory",message:"Could not load data"}),e})),j})));var x=function(){var t=c((function*(t){var r=yield e.FetchSOF();if(r[t])return r[t];throw new Error("Invalid sof object (".concat(t,")"))}));return function(e){return t.apply(this,arguments)}}(),z=function(){var e=c((function*(e,t,r){var i=yield x(e);if(Object(a.isArray)(i)){for(var n=0;n<i.length;n++)if(i[t].name===e)return i[t]}else if(i[t])return i[t];if(r)throw new r({name:t});throw new Error("Invalid sof object key (".concat(e,":").concat(t,")"))}));return function(t,r,i){return e.apply(this,arguments)}}(),O=function(){var e=c((function*(e){var t=yield x(e),r={};if(Object(a.isArray)(t)){for(var i=0;i<t.length;i++)r[t[i].name]=t[i].description||"";return r}for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n].description||"");return r}));return function(t){return e.apply(this,arguments)}}(),A=function(){var t=c((function*(t,r){yield e.FetchHull(t);for(var{projections:i=[]}=r,n=0;n<i.length;n++)if(i[n].name===t){var a={};return a.name=r.name,a.layer1=r.layer1,a.layer2=r.layer2,a.transformLayer1=i[n].transformLayer1,a.transformLayer2=i[n].transformLayer2,a}}));return function(e,r){return t.apply(this,arguments)}}();this.FetchObject=function(){var i=c((function*(i){if(!Object(a.isDNA)(i))throw new Error("Invalid DNA (".concat(i,")"));for(var c=i.split(":"),d={},h=3;h<c.length;++h){var m=c[h].split("?");d[m[0]]=m[1].split(";")}var b=yield e.FetchHull(c[0]),p=yield e.FetchFaction(c[1]),v=yield e.FetchRace(c[2]);if(d.mesh)for(var g=0;g<d.mesh.length;g++)yield e.FetchMaterial(d.mesh[g]);if(d.pattern&&d.pattern.length>1)for(var y=1;y<d.pattern.length;y++)yield e.FetchMaterial(d.pattern[y]);var S=new(2===Object(a.get)(b,"buildClass",0)?l.EveSpaceObject:l.EveShip),j=function(e,t,i){var n={patterns:[],layers:[]};if("pattern"in i){for(var o={},s=0;s<r.pattern.length;++s)if(r.pattern[s].name===i.pattern[0]){o=r.pattern[s];break}n.layers.push(Object(a.get)(o,"layer1",{})),n.layers.push(Object(a.get)(o,"layer2",{}));for(var l=Object(a.get)(o,"projections",[]),u={},c=0;c<l.length;++c)if(l[c].name===e.name){u=l[c];break}n.patterns.push(Object(a.get)(u,"transformLayer1",{})),n.patterns.push(Object(a.get)(u,"transformLayer2",{}))}else{var f=Object(a.get)(t,"defaultPattern",{});n.layers.push(Object(a.get)(f,"layer1",{})),n.layers.push(Object(a.get)(f,"layer2",{}));var d=Object(a.get)(e,"defaultPattern",{});n.patterns.push(Object(a.get)(d,"transformLayer1",{})),n.patterns.push(Object(a.get)(d,"transformLayer2",{}))}return n}(b,v,d);!function(e,t={}){for(var{patterns:r=[],layers:i=[]}=t,a=0;a<2;++a){var o=r[a]||{},s=i[a]||{},{rotation:u=n.quat.create(),scaling:c=n.vec3.fromValues(1,1,1),position:f=n.vec3.create(),isMirrored:d=!1}=o,{display:h=!!i[a].textureName,materialSource:m=0,textureName:b="PatternMask".concat(a+1,"Map"),textureResFilePath:p="cdn:/texture/global/black.png",projectionTypeU:v=0,projectionTypeV:g=0,isTargetMtl1:y=!0,isTargetMtl2:_=!0,isTargetMtl3:E=!0,isTargetMtl4:T=!0}=s,S=e.customMasks[a]||new l.EveCustomMask;S.name="Pattern".concat(a+1),S.display=h,n.quat.copy(S.rotation,u),n.vec3.copy(S.scaling,c),n.vec3.copy(S.translation,f),n.vec4.set(S.targetMaterials,y?1:0,_?1:0,E?1:0,T?1:0),S.materialIndex=m,S.isMirrored=!!d;var{PatternMaskMap:j,DiffuseColor:R,FresnelColor:P,Gloss:x}=S.parameters;j.name=b,j.resourcePath=p,j.useAllOverrides=!0,j.addressUMode=w(v),j.addressVMode=w(g),j.Initialize();var z="PMtl".concat(a+1);R.name="".concat(z,"DiffuseColor"),P.name="".concat(z,"FresnelColor"),x.name="".concat(z,"Gloss"),S.Initialize(),e.customMasks[a]!==S&&e.customMasks.push(S)}}(S,j),function(e,t,r,i,n,o){var u=e.mesh||new s.Tw2Mesh;u.geometryResPath=t.geometryResFilePath,e.mesh!==u?(e.boundingSphereCenter[0]=t.boundingSphere[0],e.boundingSphereCenter[1]=t.boundingSphere[1],e.boundingSphereCenter[2]=t.boundingSphere[2],e.boundingSphereRadius=t.boundingSphere[3]):u.EmptyAreas();var c=e.customMasks;c[0]=c[0]||new l.EveCustomMask,c[1]=c[1]||new l.EveCustomMask;var f=[t,r,i,o,n,void 0,c];_(Object(a.get)(u,"opaqueAreas",[]),"opaqueAreas",...f),_(Object(a.get)(u,"transparentAreas",[]),"transparentAreas",...f),_(Object(a.get)(u,"additiveAreas",[]),"additiveAreas",...f),_(Object(a.get)(u,"decalAreas",[]),"decalAreas",...f),_(Object(a.get)(u,"depthAreas",[]),"depthAreas",...f),e.mesh!==u&&("shapeEllipsoidCenter"in t&&(e.shapeEllipsoidCenter=t.shapeEllipsoidCenter),"shapeEllipsoidRadius"in t&&(e.shapeEllipsoidRadius=t.shapeEllipsoidRadius)),e.mesh=u,u.Initialize()}(S,b,p,v,d,j),function(e,t,i={}){for(var n=Object(a.get)(t,"hullDecals",[]),o=0;o<n.length;++o){var s=n[o],u=E(i.decals,s.groupIndex);if(!u||u.isVisible){var c=u&&u.shader||s.shader;if(c){var d=r.generic.decalShaderLocation+"/"+f(!1)+c,h=Object.assign({},s.parameters),m=Object.assign(Object(a.get)(Object(a.get)(r.generic.decalShaders,c,{}),"defaultTextures",{}));u&&(Object.assign(h,u.parameters),Object.assign(m,u.textures)),Object.assign(m,s.textures),e.decals.push(l.EveSpaceObjectDecal.from({name:s.name,groupIndex:s.groupIndex,parentBoneIndex:s.boneIndex,indexBuffer:s.indexBuffer,position:s.position,rotation:s.rotation,scaling:s.scaling,effect:{effectFilePath:d,parameters:h,textures:m}}))}}}}(S,b,p),function(e,r,i){for(var o=Object(a.get)(r,"spriteSets",[]),s=Object(a.get)(i,"spriteSets",{}),c=0;c<o.length;++c){for(var f=o[c],d=Object(a.get)(f,"items",[]),h=[],m=0;m<d.length;m++){var b=Object.assign({blinkRate:.1,maxScale:10,minScale:1},d[m]),p=E(s,b.groupIndex);p&&(b.groupName=p.name,Object(a.assignIfExists)(b,p,"color")),(!t.SKIP_EMPTY_ITEMS||b.color&&!n.vec3.isEmpty(b.color))&&h.push(b)}t.SKIP_EMPTY_ITEMS&&!h.length||e.spriteSets.push(l.EveSpriteSet.from({name:f.name,useQuads:!0,skinned:!(!r.isSkinned||!f.skinned),effect:u,items:h}))}}(S,b,p),function(e,r,i){for(var n=Object(a.get)(r,"spotlightSets",[]),o=Object(a.get)(i,"spotlightSets",{}),s=0;s<n.length;++s){for(var u=n[s],c=Object(a.get)(u,"items",[]),f=u.skinned,d=[],h=0;h<c.length;++h){var m=Object.assign({},c[h]),b=E(o,m.groupIndex);b&&Object(a.assignIfExists)(m,b,["coneColor","spriteColor","flareColor"]),t.SKIP_EMPTY_ITEMS&&!b||d.push(m)}t.SKIP_EMPTY_ITEMS&&!d.length||e.spotlightSets.push(l.EveSpotlightSet.from({name:u.name,items:d,coneEffect:{effectFilePath:f?"cdn:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightcone.fx":"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",parameters:{TextureMap:u.coneTextureResPath,zOffset:Object(a.get)(u,"zOffset",0)}},glowEffect:{effectFilePath:f?"cdn:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightglow.fx":"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",parameters:{TextureMap:u.glowTextureResPath}}}))}}(S,b,p),function(e,r,i){for(var o=Object(a.get)(r,"planeSets",[]),s=Object(a.get)(i,"planeSets",{}),u=0;u<o.length;++u){for(var c=o[u],f=Object(a.get)(c,"items",[]),d=[],h=0;h<f.length;++h){var m=Object.assign({boneIndex:-1},f[h]),b=E(s,m.groupIndex);b&&Object(a.assignIfExists)(m,b,"color"),(!t.SKIP_EMPTY_ITEMS||m.color&&!n.vec3.isEmpty(m.color))&&d.push(m)}t.SKIP_EMPTY_ITEMS&&!d.length||e.planeSets.push(l.EvePlaneSet.from({name:c.name,items:d,effect:{effectFilePath:c.skinned?"cdn:/graphics/effect/managed/space/spaceobject/fx/skinned_planeglow.fx":"cdn:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",parameters:{PlaneData:Object(a.get)(c,"planeData",[1,0,0,0])},textures:{Layer1Map:c.layer1MapResPath,Layer2Map:c.layer2MapResPath,MaskMap:c.maskMapResPath}}}))}}(S,b,p),function(e,t,r){if(t.booster){for(var i=[0,0,0,0],n=Object(a.get)(r,"booster",{}),o=t.booster,s=Object(a.get)(o,"items",[]),u=0;u<s.length;++u)e.locators.push(l.EveLocator2.from({name:"locator_booster_"+(u+1),transform:s[u].transform,atlasIndex0:Object(a.get)(s[u],"atlasIndex0",0),atlasIndex1:Object(a.get)(s[u],"atlasIndex1",0)}));e.boosters=l.EveBoosterSet.from({glowScale:n.glowScale,symHaloScale:n.symHaloScale,haloScaleX:n.haloScaleX,haloScaleY:n.haloScaleY,haloColor:n.haloColor,glowColor:n.glowColor,warpGlowColor:n.warpGlowColor,warpHaloColor:n.warpHalpColor,trailColor:n.trailColor,trailSize:n.trailSize,effect:{effectFilePath:"cdn:/Graphics/Effect/Managed/Space/Booster/BoosterVolumetric.fx",parameters:{NoiseFunction0:Object(a.get)(n.shape0,"noiseFunction",0),NoiseSpeed0:Object(a.get)(n.shape0,"noiseSpeed",0),NoiseAmplitudeStart0:Object(a.get)(n.shape0,"noiseAmplitureStart",i),NoiseAmplitudeEnd0:Object(a.get)(n.shape0,"noiseAmplitureEnd",i),NoiseFrequency0:Object(a.get)(n.shape0,"noiseFrequency",i),Color0:Object(a.get)(n.shape0,"color",i),NoiseFunction1:Object(a.get)(n.shape1,"noiseFunction",0),NoiseSpeed1:Object(a.get)(n.shape1,"noiseSpeed",0),NoiseAmplitudeStart1:Object(a.get)(n.shape1,"noiseAmplitureStart",i),NoiseAmplitudeEnd1:Object(a.get)(n.shape1,"noiseAmplitureEnd",i),NoiseFrequency1:Object(a.get)(n.shape1,"noiseFrequency",i),Color1:Object(a.get)(n.shape1,"color",i),WarpNoiseFunction0:Object(a.get)(n.warpShape0,"noiseFunction",0),WarpNoiseSpeed0:Object(a.get)(n.warpShape0,"noiseSpeed",0),WarpNoiseAmplitudeStart0:Object(a.get)(n.warpShape0,"noiseAmplitureStart",i),WarpNoiseAmplitudeEnd0:Object(a.get)(n.warpShape0,"noiseAmplitureEnd",i),WarpNoiseFrequency0:Object(a.get)(n.warpShape0,"noiseFrequency",i),WarpColor0:Object(a.get)(n.warpShape0,"color",i),WarpNoiseFunction1:Object(a.get)(n.warpShape1,"noiseFunction",0),WarpNoiseSpeed1:Object(a.get)(n.warpShape1,"noiseSpeed",0),WarpNoiseAmplitudeStart1:Object(a.get)(n.warpShape1,"noiseAmplitureStart",i),WarpNoiseAmplitudeEnd1:Object(a.get)(n.warpShape1,"noiseAmplitureEnd",i),WarpNoiseFrequency1:Object(a.get)(n.warpShape1,"noiseFrequency",i),WarpColor1:Object(a.get)(n.warpShape1,"color",i),ShapeAtlasSize:[Object(a.get)(n,"shapeAtlasHeight",0),Object(a.get)(n,"shapeAtlasCount",0),0,0],BoosterScale:Object(a.get)(n,"scale",[1,1,1,1])},textures:{ShapeMap:n.shapeAtlasResPath,GradientMap0:n.gradient0ResPath,GradientMap1:n.gradient1ResPath,NoiseMap:"cdn:/Texture/Global/noise32cube_volume.dds.0.png"}},glows:{useQuads:!0,effect:{effectFilePath:"cdn:/Graphics/Effect/Managed/Space/Booster/BoosterGlowAnimated.fx",textures:{DiffuseMap:"cdn:/Texture/Particle/whitesharp.dds.0.png",NoiseMap:"cdn:/Texture/global/noise.dds.0.png"}}}})}}(S,b,v),function(e,t){for(var r=Object(a.get)(t,"locatorTurrets",[]),i=0;i<r.length;++i)e.locators.push(l.EveLocator2.from(r[i]))}(S,b);var R=function(e,t){for(var r=[],i=null,n=Object(a.get)(t,"animations",[]),s=0;s<n.length;++s)if(-1!==Object(a.get)(n[s],"id",-1)&&-1!==Object(a.get)(n[s],"startRate",-1)){i||(i=new o.Tw2CurveSet);var l=new o.Tw2ScalarCurve2;l.keys.push(new o.Tw2ScalarKey2),l.keys.push(new o.Tw2ScalarKey2),l.keys[0].value=Object(a.get)(n[s],"startRate",-1),l.keys[1].time=1,l.keys[1].value=Object(a.get)(n[s],"endRate",-1),l.Initialize(),i.curves.push(l),e.curveSets.push(i),r[Object(a.get)(n[s],"id",-1)]=l}return i&&i.Initialize(),[i,r]}(S,b);return T(S,b,R[0],R[1]),function(e,t,r,i,n,o){for(var u=Object(a.get)(t,"instancedMeshes",[]),c=0;c<u.length;++c){var f=u[c],d=new s.Tw2InstancedMesh;d.instanceGeometryResPath=f.instanceGeometryResPath,d.geometryResPath=f.geometryResPath,d.Initialize(),_(Object(a.get)(d,"opaqueAreas",[]),"opaqueAreas",t,r,i,o,n,f.shader);var h=new l.EveChildMesh;h.mesh=d,e.effectChildren.push(h)}}(S,b,p,v,d,j),S.Initialize(),S}));return function(e){return i.apply(this,arguments)}}(),this.FetchHull=function(){var e=c((function*(e){return z("hull",e,d)}));return function(t){return e.apply(this,arguments)}}(),this.FetchHullNames=c((function*(){return O("hull")})),this.FetchHullPattern=function(){var t=c((function*(t,r){var i=yield e.FetchPattern(r),n=A(t,i);if(n)return n;throw new Error("Invalid pattern for hull (".concat(t,":").concat(r,")"))}));return function(e,r){return t.apply(this,arguments)}}(),this.FetchHullPatternNames=function(){var e=c((function*(e){var t=yield x("pattern"),r=[];return t.forEach(t=>{for(var i=0;i<t.projections.length;i++)if(t.projections[i].name===e){r.push(t.name);break}}),r.sort(),r}));return function(t){return e.apply(this,arguments)}}(),this.FetchHullBuildClass=function(){var t=c((function*(t){var r=t.split(":")[0];return 2===(yield e.FetchHull(r)).buildClass?2:1}));return function(e){return t.apply(this,arguments)}}(),this.FetchRace=function(){var e=c((function*(e){return z("race",e,m)}));return function(t){return e.apply(this,arguments)}}(),this.FetchRaceNames=c((function*(){return O("race")})),this.FetchFaction=function(){var e=c((function*(e){return z("faction",e,h)}));return function(t){return e.apply(this,arguments)}}(),this.FetchFactionNames=c((function*(){return O("faction")})),this.FetchMaterial=function(){var e=c((function*(e){return z("material",e,b)}));return function(t){return e.apply(this,arguments)}}(),this.FetchMaterialNames=c((function*(){return O("material")})),this.FetchPattern=function(){var e=c((function*(e){return z("pattern",e,p)}));return function(t){return e.apply(this,arguments)}}(),this.FetchPatternNames=c((function*(){return O("pattern")}))}class d extends s.Tw2Error{constructor(e){super(e,"SOF Hull not found (%name%)")}}class h extends s.Tw2Error{constructor(e){super(e,"SOF Faction not found (%name%)")}}class m extends s.Tw2Error{constructor(e){super(e,"SOF Race not found (%name%)")}}class b extends s.Tw2Error{constructor(e){super(e,"SOF Material not found (%name%)")}}class p extends s.Tw2Error{constructor(e){super(e,"SOF Pattern not found (%name%)")}}},"./sof/EveSOFData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFData",(function(){return I})),r.d(t,"ErrSOFDNAFormatInvalid",(function(){return L})),r.d(t,"ErrSOFResPathInsertInvalid",(function(){return F}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/index.js"),_=r("./global/math/index.js"),E=r("./global/constant/d3d.js"),T=r("./global/utils/index.js"),S=r("./core/index.js"),j=r("./sof/EveSOF.js"),R=r("./eve/index.js"),P=r("./unsupported/eve/object/index.js"),x=r("./sof/pattern/index.js"),z=r("./sof/faction/index.js"),O=(r("./unsupported/eve/index.js"),r("./eve/item/EveLocatorSets.js"));function A(e,t,r,i,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function M(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){A(a,i,n,o,s,"next",e)}function s(e){A(a,i,n,o,s,"throw",e)}o(void 0)}))}}function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var I=(i=T.meta.type("EveSOFData"),n=T.meta.list("EveSOFDataFaction"),a=T.meta.struct("EveSOFDataGeneric"),o=T.meta.list("EveSOFDataHull"),s=T.meta.list("EveSOFDataMaterial"),l=T.meta.list("EveSOFDataPattern"),u=T.meta.list("EveSOFDataRace"),i((y=g=class e extends T.meta.Model{constructor(...e){super(...e),C(this,"faction",d,this),C(this,"generic",h,this),C(this,"hull",m,this),C(this,"material",b,this),C(this,"pattern",p,this),C(this,"race",v,this),this._options={useSpotlightPool:!0,devColor:[0,0,0,0],multiplier:{generalGlowColor:[10,10,10,1],generalHeatGlowColor:[100,100,100,1],boosterGlowScale:.125,boosterHaloScale:.5,boosterSymHalo:.125,boosterBrightness:1,boosterScale:[.9,.9,.9],boosterAlpha:.5},effect:{sprite:null,banner:null,shadow:null,shadowSkinned:null},materialOverrides:{orange_neon01:{FresnelColor:[0,0,0,1]}},billboardsURL:"cdn:/billboards",billboards:["video/billboards/common/divinity_social.webm","video/billboards/common/egonics_immersia.webm","video/billboards/common/eve_cdia_guristas_billboard.webm","video/billboards/common/eve_shipad_abaddon_timeless.webm","video/billboards/common/eve_shipad_astero_timeless.webm","video/billboards/common/eve_shipad_cynabal_timeless.webm","video/billboards/common/eve_shipad_dominix_timeless.webm","video/billboards/common/eve_shipad_drake_timeless.webm","video/billboards/common/genolution.webm","video/billboards/common/ittu_ittu.webm","video/billboards/common/khanid_works.webm","video/billboards/common/laidai.webm","video/billboards/common/mabebu_trading.webm","video/billboards/common/matigu_sushi.webm","video/billboards/common/mirelle_glasses.webm","video/billboards/common/project_discovery_covid.webm","video/billboards/common/quafe.webm","video/billboards/common/sinfina_mondo.webm","video/billboards/fallback.png","video/billboards/takeover/eve_concord_billboard_takeover.webm","video/billboards/triglavianhangar/trigstationbillboard.webm","video/billboards_zn/common/fallback.webm","video/billboards_zn/fallback.png","video/billboards_zn/takeover/zorya4vorbis48.webm","video/billboards_zn/triglavianhangar/trigstationbillboard.webm","video/billboardswide/wreckingmachine.webm"],effectPath:{plane:"cdn:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",spotlightCone:"res:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",spotlightGlow:"res:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",spotlightConePool:"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightconepool.fx",spotlightGlowPool:"cdn:/graphics/effect/managed/space/spaceobject/fx/spotlightglowpool.fx",boosterVolumetric:"cdn:/graphics/effect/managed/space/booster/boostervolumetric.fx",boosterGlow:"cdn:/graphics/effect/managed/space/booster/boosterglowanimated.fx",spriteSet:"cdn:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",banner:"cdn:/graphics/effect/managed/space/spaceobject/v5/fx/banner/unpacked_fxbannerv5.fx",shadow:"cdn:/graphics/effect/managed/space/spaceobject/shadow/shadow.fx"},texturePath:{noise:"res:/Texture/global/noise.dds.0.png",noise32:"res:/Texture/Global/noise32cube_volume.dds.0.png",whiteSharp:"res:/Texture/Particle/whitesharp.dds.0.png",hologramNoise:"cdn:/texture/fx/hologram/hologram_noise.dds",hologramPulse:"cdn:/texture/fx/hologram/hologram_pulse.dds",hologramInterlace:"cdn:/texture/fx/hologram/hologram_interlace_p.dds",bannerImage:"",bannerBorder:""},decalUsage:["decalv5.fx","decalcounterv5.fx","decalholev5.fx","decalcylindricv5.fx","decalglowcylindricv5.fx","decalglowv5.fx","decalv5.fx"]}}Initialize(e){var t=this;e&&Object.assign(this._options,e);var{effect:r,effectPath:i,texturePath:n}=this._options;r.sprite||(r.sprite=S.Tw2Effect.from({name:"Shared sprite set effect",effectFilePath:i.spriteSet,parameters:{MainIntensity:1,GradientMap:n.whiteSharp}})),r.banner||(r.banner=S.Tw2Effect.from({name:"Shared banner effect",effectFilePath:i.banner,autoParameter:!0,parameters:{Layer1Transform:[1.5,1.5,0,0],Layer2Transform:[1,1,0,0],Layer1Scroll:[.1,.1,.1,.1],Layer2Scroll:[.2,.2,0,0],BaseColor:[1.388235330581665,1.4980392456054688,1.7882353067398071,1]},textures:{BorderMap:n.bannerBorder,ImageMap:n.bannerImage,Layer1Map:n.hologramNoise,Layer2Map:n.hologramPulse,MaskMap:n.hologramInterlace}})),r.shadow||(r.shadow=S.Tw2Effect.from({name:"Shared shadow effect",effectFilePath:i.shadow})),r.shadowSkinned||(r.shadowSkinned=S.Tw2Effect.from({name:"Shared shadow skinned effect",effectFilePath:this.GetShaderPath(i.shadow,!0)}));var{materialOverrides:a}=this._options;if(a){var o=function(e){if(a.hasOwnProperty(e)&&Object.keys(a[e]).length){var r=t.material.find(t=>t.name===e);if(r){var i=a[e],n=function(e){if(i.hasOwnProperty(e)){var t=r.parameters.find(t=>t.name===e);t&&_.vec4.copy(t.value,i[e])}};for(var o in i)n(o)}}};for(var s in a)o(s)}}GetHull(e){return Object(T.findElementByPropertyValue)(this.hull,"name",e,j.ErrSOFHullNotFound)}GetHullNames(t){return e.GetNames(this.hull,t)}HasHull(e){return!!Object(T.findElementByPropertyValue)(this.hull,"name",e)}GetHullResPathInserts(e){return this.GetHull(e),z.EveSOFDataFaction.GetHullResPathInserts(e)}GetHullBuildClass(e){return 2===this.GetHull(e).buildClass?2:1}GetHullPatternNames(e){this.GetHull(e);for(var t=[],r=0;r<this.pattern.length;r++)this.pattern[r].Has(e)&&t.push(this.pattern[r].name);return t.sort()}HasHullPattern(e,t){var r=this.GetHull(e);return!!this.HasPattern(t)&&this.GetPattern(t).Has(r.name)}GetHullPattern(e,t){this.GetHull(e);return this.GetPattern(t).Get(e)}GetFaction(e){return Object(T.findElementByPropertyValue)(this.faction,"name",e,j.ErrSOFFactionNotFound)}GetFactionNames(t){return e.GetNames(this.faction,t)}HasFaction(e){return!!Object(T.findElementByPropertyValue)(this.faction,"name",e)}GetRace(e){return Object(T.findElementByPropertyValue)(this.race,"name",e,j.ErrSOFRaceNotFound)}GetRaceNames(t){return e.GetNames(this.race,t)}HasRace(e){return!!Object(T.findElementByPropertyValue)(this.race,"name",e)}GetMaterial(e){return Object(T.findElementByPropertyValue)(this.material,"name",e,j.ErrSOFMaterialNotFound)}GetMaterialNames(t){return e.GetNames(this.material,t)}HasMaterial(e){return!!Object(T.findElementByPropertyValue)(this.material,"name",e)}GetPattern(e){return Object(T.findElementByPropertyValue)(this.pattern,"name",e,j.ErrSOFPatternNotFound)}GetPatternNames(t){return e.GetNames(this.pattern,t)}HasPattern(e){return!!Object(T.findElementByPropertyValue)(this.pattern,"name",e)}GetShaderPath(e,t){var r=this.generic.GetShaderPrefix(t),i=e.lastIndexOf("/");return e.substring(0,i+1)+r+e.substring(i+1)}ParseDNA(e){if(!Object(T.isDNA)(e))throw new L({dna:e});for(var t=(e=e.toLowerCase()).split(":"),r={},i=3;i<t.length;++i)try{var n=t[i].split("?");r[n[0].toUpperCase()]=n[1].split(";")}catch(t){throw new L({dna:e})}var a=this.GetHull(t[0]),o=this.GetFaction(t[1]),s=this.GetRace(t[2]),l={},u=null,c=null,f=r.MESH||r.MATERIAL;if(f)for(var d=0;d<f.length;d++)this.generic.GetMaterialPrefix(d+1),f[d]&&"NONE"!==f[d].toUpperCase()&&(l["material".concat(d+1)]=this.GetMaterial(f[d]).name);var h=r.PATTERN;if(h){c=h[0]&&"NONE"!==h[0].toUpperCase()?this.GetHullPattern(a.name,h[0]):null;for(var m=1;m<h.length;m++)this.generic.GetPatternMaterialPrefix(m),h[m]&&"NONE"!==h[m].toUpperCase()&&(l["patternMaterial".concat(m)]=this.GetMaterial(h[m]).name)}return c||(o.defaultPattern?c={layer1:o.defaultPattern}:a.defaultPattern&&(c={layer1:a.defaultPattern})),!l.patternMaterial1&&o.defaultPatternLayer1MaterialName&&(l.patternMaterial1=this.GetMaterial(o.defaultPatternLayer1MaterialName).name),u=r.RESPATHINSERT?r.RESPATHINSERT[0]:o.resPathInsert||null,z.EveSOFDataFaction.IsValidResPathInsert(a.name,u)||(u="none"),{hull:a,faction:o,race:s,area:l,resPathInsert:u,pattern:c,dna:e}}ToDNA(e){var{hull:t,faction:r,race:i,area:n,resPathInsert:a,pattern:o}=e;if(Object(T.isObjectObject)(t)&&(t=t.name),Object(T.isObjectObject)(r)&&(r=r.name),Object(T.isObjectObject)(i)&&(i=i.name),Object(T.isObjectObject)(o)&&(o=o.name),!t||!r||!i)throw new ReferenceError("Invalid dna object");var s="".concat(t,":").concat(r,":").concat(i).toLowerCase();if(a&&(s+=":respathinsert?resPathInsert"),n||((n={}).material1=e.material1,n.material2=e.material2,n.material3=e.material3,n.material4=e.material4,n.patternMaterial1=e.material5,n.patternMaterial2=e.material6),n){var l="".concat(n.material1||"none",";").concat(n.material2||"none",";").concat(n.material3||"none",";").concat(n.material4||"none").toLowerCase();"none;none;none;none"!==l&&(s+=":mesh?".concat(l))}if(o&&(s+=":pattern?".concat(o),n)){var u=";".concat(n.patternMaterial1||"none",";").concat(n.patternMaterial2||"none").toLowerCase();";none;none"!==u&&(s+=u)}return s}AssignMaterialParameters(e={},t={}){return e.material1&&this.GetMaterial(e.material1).AssignParameters(t,"Mtl1"),e.material2&&this.GetMaterial(e.material2).AssignParameters(t,"Mtl2"),e.material3&&this.GetMaterial(e.material3).AssignParameters(t,"Mtl3"),e.material4&&this.GetMaterial(e.material4).AssignParameters(t,"Mtl4"),e.patternMaterial1&&this.GetMaterial(e.patternMaterial1).AssignParameters(t,"PMtl1"),e.patternMaterial2&&this.GetMaterial(e.patternMaterial2).AssignParameters(t,"PMtl2"),t}GetParametersFromMaterials(e){for(var t=this,r={},i=0;i<5;i++)e[i]&&function(){var n=t.GetMaterial(e[i]),a=void 0;switch(i){case 0:case 1:case 2:case 3:a="Mtl"+(i+1);break;case 4:case 5:a="PMtl"+(i-3)}n.parameters.forEach(e=>{r[a+e.name]=Array.from(e.value)})}();return r}static GetNames(e,t={}){for(var r=Object(T.isArray)(t),i=0;i<e.length;i++)r?t.push(e[i].name):t[e[i].name]=e[i].description||"";return r&&t.sort(),t}Build(t){var r=this;return M((function*(){var i=r.ParseDNA(t),n=2===i.hull.buildClass?new P.EveStation2:new R.EveShip2;return n.dna=t,yield e.Build(r,n,i,r._options),n.Initialize&&n.Initialize(),n}))()}Rebuild(t,r){var i=this;return M((function*(){var n=i.ParseDNA(r);return t.dna=r,yield e.Build(i,t,n,i._options),t}))()}static Build(e,t,r,i){var n=this;return M((function*(){var a=[e,t,r,i];if(i.billboardsURL)try{var o=yield fetch(w.resMan.BuildUrl(i.billboardsURL));i.billboards=yield o.json()}catch(e){}return n.SetupBounds(...a),n.SetupCustomMasks(...a),yield n.SetupMesh(...a),n.SetupSpotlightSets(...a),n.SetupPlaneSets(...a),n.SetupSpriteSets(...a),n.SetupDecals(...a),n.SetupBoosters(...a),n.SetupLocators(...a),n.SetupInstancedMesh(...a),n.SetupShadows(...a),n.SetupLocatorSets(...a),n.SetupHazeSets(...a),n.SetupSpriteLineSets(...a),n.SetupAudio(...a),n.SetupModelCurves(...a),n.SetupLights(...a),n.SetupObservers(...a),yield n.SetupChildren(...a),n.SetupControllers(...a),t}))()}static SetupCustomMask(e,t,r,i){r?(e.isMirrored=r.isMirrored,e.Compose(r.rotation,r.position,r.scaling)):(e.isMirrored=!1,e.Identity()),e.RebuildTransforms();var n=0,a=0;if(t?(Object(T.getPathExtension)(t.textureResFilePath),e.display=!t.textureResFilepath||t.textureResFilepath.includes("solid_white"),e.materialIndex=t.materialSource,e.parameters.PatternMaskMap.SetValue(t.textureResFilePath),_.vec4.set(e.targetMaterials,t.isTargetMtl1?1:0,t.isTargetMtl2?1:0,t.isTargetMtl3?1:0,t.isTargetMtl4?1:0),n=t.projectionTypeU,a=t.projectionTypeV):(e.display=!1,e.materialIndex=0,e.parameters.PatternMaskMap.SetValue("cdn:/texture/global/black.png"),_.vec4.set(e.targetMaterials,0,0,0,0)),e.parameters.PatternMaskMap.SetOverrides({addressUMode:x.EveSOFDataPatternLayer.ToAddressMode(n),addressVMode:x.EveSOFDataPatternLayer.ToAddressMode(a)}),i){var o=i.AssignParameters({});e.parameters.DiffuseColor.SetValue(o.DiffuseColor),e.parameters.FresnelColor.SetValue(o.FresnelColor),e.parameters.DustDiffuseColor.SetValue(o.DustDiffuseColor),e.parameters.Gloss.SetValue(o.Gloss)}}static SetupCustomMasks(e,t,r,i){t.customMasks&&(t.customMasks[0]||(t.customMasks[0]=new R.EveCustomMask,t.customMasks[0].name="Pattern1"),t.customMasks[1]||(t.customMasks[1]=new R.EveCustomMask,t.customMasks[1].name="Pattern2"));var n=r.area.patternMaterial1?e.GetMaterial(r.area.patternMaterial1):null,a=r.area.patternMaterial2?e.GetMaterial(r.area.patternMaterial2):null,o=r.pattern||{};this.SetupCustomMask(t.customMasks[0],o.layer1,o.transformLayer1,n),this.SetupCustomMask(t.customMasks[1],o.layer2,o.transformLayer2,a)}static SetupBounds(e,t,r,i){var n=Object(T.get)(r.hull,"boundingSphere",[0,0,0,0]);t.boundingSphereRadius=n[3],_.vec3.copy(t.boundingSphereCenter,n);_.vec3.copy(t.shapeEllipsoidCenter,Object(T.get)(r.hull,"shapeEllipsoidCenter",[0,0,0])),_.vec3.copy(t.shapeEllipsoidRadius,Object(T.get)(r.hull,"shapeEllipsoidRadius",[0,0,0]))}static SetupMesh(e,t,r,i){var n=this;return M((function*(){var a=!1;t.mesh||(t.mesh=new S.Tw2Mesh,a=!0);var o=t.mesh,s=Object(T.get)(r.hull,"geometryResFilePath","");if(!s)throw new TypeError("Hull has no geometry");if(o.geometryResPath!==s){try{yield w.tw2.Fetch(s)}catch(e){"cake"===Object(T.getPathExtension)(s)&&(s="res:/"+s.substring(s.indexOf(":")+2).replace(".cake",".wbg"),r.hull.geometryResFilePath=s,r.hull.skinned=!!r.hull._wasSkinned)}o.geometryResPath=s,a=!0}var{hull:l}=r,u=a=>{var s=Array.from(t.mesh[a]);Object(T.get)(l,a,[]).forEach(l=>{var{name:u="",index:c=0,count:f=1,shader:d="",areaType:h}=l,m=t.mesh.FindMeshAreaByTypeAndIndex(a,c);m?s.splice(s.indexOf(m,1)):((m=new S.Tw2MeshArea).name=u,m.index=c,m.count=f,o[a].push(m));var b=e.generic.GetShaderConfig(d,r.hull.isSkinned);b.autoParameter=!0,l.Assign(b);var p=b.parameters.GeneralHeatGlowColor||_.vec4.fromValues(1,1,1,1);p&&r.race.booster.glowColor&&(_.vec4.multiply(p,r.race.booster.glowColor,i.multiplier.generalHeatGlowColor),b.parameters.GeneralHeatGlowColor=p);var v={colorType:0};r.faction.AssignAreaType(h,v,0),Object.assign(v,r.area),e.AssignMaterialParameters(v,b.parameters),b.textures.PmdgMap&&(b.textures.PmdgMap=r.faction.GetResPathInsert(r.hull.name,b.textures.PmdgMap,r.resPathInsert));var g=b.parameters.GeneralGlowColor||_.vec4.fromValues(1,1,1,1);g&&(r.faction.GetColorType(v.colorType,g,0),_.vec4.multiply(g,g,i.multiplier.generalGlowColor),b.parameters.GeneralGlowColor=g),m.effect||(m.effect=new S.Tw2Effect,m.effect.name=m.name+"_effect"),m.effect.SetValues(b,{controller:n});for(var y=0;y<t.customMasks.length;y++)R.EveCustomMask.ApplyMaterials(m.effect,t.customMasks[y],y)}),s.forEach(e=>{e.Destructor(),t.mesh[a].splice(t.mesh[a].indexOf(e),1)})};u("additiveAreas"),u("decalAreas"),u("depthAreas"),u("distortionAreas"),u("opaqueAreas"),u("transparentAreas"),a&&o.Initialize(),t.mesh=o}))()}static FindAttachmentByConstructorAndName(e,t,r){var i=e.filter(e=>e.constructor===t&&e.name===r);if(i.length>1)throw new ReferenceError("Found ".concat(i.length," attachments, expected 1"));return i[0]?i[0]:null}static SetupSpriteSets(t,r,i,n){var{isSkinned:a=!1,spriteSets:o=[]}=i.hull,s=r.attachments||r.spriteSets,l=e.FindObjectsByConstructor(s,R.EveSpriteSet);o.forEach(e=>{var t=this.FindAttachmentByConstructorAndName(s,R.EveSpriteSet,e.name);e.visibilityGroup&&!i.faction.HasVisibilityGroup(e.visibilityGroup)||(t?(t.ClearItems(),l.splice(l.indexOf(t),1)):(t=new R.EveSpriteSet,s.push(t)),t.name=e.name,t.display=!0,t.useQuads=!0,t.skinned=e.skinned&&a,t.effect=n.effect.sprite,e.items.forEach(e=>{var r=_.vec4.fromValues(1,1,1,1);i.faction.GetColorType(e.colorType,r,0),t.items.push(R.EveSpriteSetItem.from(Object.assign({},e,{color:r})))}),t.Initialize())}),l.forEach(e=>{e.Destructor(),s.splice(s.indexOf(e),1)})}static FindObjectsByConstructor(e,t){return e.filter(e=>e.constructor===t)}static SetupSpotlightSets(t,r,i,n){var{isSkinned:a=!1,spotlightSets:o=[]}=i.hull,s=r.attachments||r.spotlightSets,l=e.FindObjectsByConstructor(s,R.EveSpotlightSet);o.forEach(e=>{var r,o,u=this.FindAttachmentByConstructorAndName(s,R.EveSpotlightSet,e.name);u?(u.ClearItems(),l.splice(l.indexOf(u),1)):(u=R.EveSpotlightSet.from({name:e.name}),s.push(u)),u.skinned=a&&e.skinned,n.useSpotlightPool?(u.useQuads=!0,r=n.effectPath.spotlightConePool,o=n.effectPath.spotlightGlowPool):(r=t.GetShaderPath(n.effectPath.spotlightCone,u.skinned),o=t.GetShaderPath(n.effectPath.spotlightGlow,u.skinned)),u.SetValues({display:!0}),u.coneEffect=u.coneEffect||new S.Tw2Effect,u.coneEffect.SetValues({effectFilePath:r,parameters:{zOffset:e.zOffset},textures:{TextureMap:e.coneTextureResPath}}),u.glowEffect=u.glowEffect||new S.Tw2Effect,u.glowEffect.SetValues({effectFilePath:o,textures:{TextureMap:e.glowTextureResPath}}),e.items.forEach(e=>u.CreateItem(e)),u.items.forEach(e=>{var t=i.faction.FindSpotlightSetByGroupIndex(e.groupIndex);t&&e.SetValues({coneColor:t.coneColor,flareColor:t.flareColor,spriteColor:t.spriteColor})})}),l.forEach(e=>{e.Destructor(),s.splice(s.indexOf(e),1)})}static HandleBillboards(e,t){var r=[];(e.attachments||e.planeSets).forEach(e=>{if(e.constructor===R.EvePlaneSet){var t=e.name.split(" ").join("").toUpperCase();(t.includes("BILLBOARD")||t.includes("VIDEOS"))&&r.push(e)}}),r.length?(e.RandomizeBillboards=function(){r.forEach(e=>{var{billboards:r=[]}=t,i=r[_.num.randomInt(0,r.length-1)];-1===i.indexOf(":")&&(i="cdn:/"+i),e.effect.parameters.MaskMap.SetValue(i)})},e.RandomizeBillboards()):e.RandomizeBillboards=()=>{}}static SetupPlaneSets(t,r,i,n){var{isSkinned:a,planeSets:o}=i.hull,s=r.attachments||r.planeSets,l=e.FindObjectsByConstructor(s,R.EvePlaneSet);o.forEach(r=>{var o=this.FindAttachmentByConstructorAndName(s,R.EvePlaneSet,r.name);o?(o.ClearItems(),l.splice(l.indexOf(o),1)):(o=R.EvePlaneSet.from({name:r.name}),s.push(o)),o.SetValues({display:!0}),o.effect=o.effect||new S.Tw2Effect,o.effect.SetValues({effectFilePath:t.GetShaderPath(n.effectPath.plane,a&&r.skinned),autoParameter:!0,parameters:{PlaneData:[0,r.atlasSize||1,0,0]},textures:{Layer1Map:r.layer1MapResPath,Layer2Map:r.layer2MapResPath,MaskMap:r.maskMapResPath}}),r.items.forEach(e=>o.CreateItem(e)),o.items.forEach(t=>{var r=i.faction.FindPlaneSetByGroupIndex(t.groupIndex);r&&t.SetValues({color:r.color}),e.isZeroColor(t.color)&&t.SetValues({display:!1})})}),this.HandleBillboards(r,n),l.forEach(e=>{e.Destructor(),s.splice(s.indexOf(e),1)})}static isZeroColor(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]}static SetupDecals(e,t,r,i){var{hull:n,faction:a}=r,o=t.mesh.FindParameters("PmdgMap"),s=t.mesh.FindParameters("NoMap"),l={textures:{PmdgMap:o[0]?o[0].resourcePath:"",NoMap:s[0]?s[0].resourcePath:""}},u=Array.from(t.decals);n.decalSets.forEach(r=>{var n=!r.visibilityGroup||a.HasVisibilityGroup(r.visibilityGroup);r.items.forEach(o=>{var s="".concat(r.name,"_").concat(o.name),c=this.FindAttachmentByConstructorAndName(t.decals,R.EveSpaceObjectDecal,s),{visibilityGroup:f,logoType:d,usage:h,glowColorType:m}=o,b=!f||a.HasVisibilityGroup(f);if(a.HasLogoType(d)||(w.tw2.Debug({name:"Space object factory",message:"Could not find logo type for decal: ".concat(s," (").concat(d,")")}),b=!1),n&&b){c?u.splice(u.indexOf(c),1):(c=R.EveSpaceObjectDecal.from({name:s}),t.decals.push(c));var p=e.generic.GetShaderConfig(i.decalUsage[h],!1,l);switch(h){case 1:p.overrides.DecalAtMap={addressUMode:E.WrapMode.REPEAT,addressVMode:E.WrapMode.REPEAT,filterMode:E.FilterMode.LINEAR,mipFilterMode:E.MipFilterMode.NONE};break;case 5:p.overrides.DecalAtMap={addressUMode:E.WrapMode.CLAMP_TO_EDGE,addressVMode:E.WrapMode.CLAMP_TO_EDGE,filterMode:E.FilterMode.LINEAR,mipFilterMode:E.MipFilterMode.NONE}}a.AssignLogoType(d,p);var{DecalGlowColor:v}=p.parameters;v&&a.GetColorType(m,v,0),o.Assign(p),c.decalEffect=c.decalEffect||new S.Tw2Effect,c.decalEffect.SetValues(p),c.SetValues(Object.assign({display:!0},{rotation:o.rotation,position:o.position,scaling:o.scaling,parentBoneIndex:o.boneIndex,name:o.name,indexBuffer:o.indexBuffer}))}})}),u.forEach(e=>{e.Destructor(),t.decals.splice(t.decals.indexOf(e),1)})}static SetupBoosters(e,t,r,i){var{hull:n,race:a}=r;if(n.booster&&a.booster){var o=a.booster,{shape0:s,shape1:l,warpShape0:u,warpShape1:c}=o,{boosterGlowScale:f=1,boosterHaloScale:d=1,boosterSymHalo:h=1,boosterBrightness:m=1,boosterAlpha:b=1}=i.multiplier,p=_.vec4.multiplyScalar([],s.color,m),v=_.vec4.multiplyScalar([],l.color,m);p[3]=b,v[3]=b,t.boosters?t.boosters.effect.SetValues({effectFilePath:i.effectPath.boosterVolumetric,autoParameter:!0,parameters:{NoiseFunction0:s.noiseFunction,NoiseSpeed0:s.noiseSpeed,NoiseAmplitudeStart0:s.noiseAmplitureStart,NoiseAmplitudeEnd0:s.noiseAmplitureEnd,NoiseFrequency0:s.noiseFrequency,Color0:p,NoiseFunction1:l.noiseFunction,NoiseSpeed1:l.noiseSpeed,NoiseAmplitudeStart1:l.noiseAmplitureStart,NoiseAmplitudeEnd1:l.noiseAmplitureEnd,NoiseFrequency1:l.noiseFrequency,Color1:v,WarpNoiseFunction0:u.noiseFunction,WarpNoiseSpeed0:u.noiseSpeed,WarpNoiseAmplitudeStart0:u.noiseAmplitureStart,WarpNoiseAmplitudeEnd0:u.noiseAmplitureEnd,WarpNoiseFrequency0:u.noiseFrequency,WarpColor0:u.color,WarpNoiseFunction1:c.noiseFunction,WarpNoiseSpeed1:c.noiseSpeed,WarpNoiseAmplitudeStart1:c.noiseAmplitureStart,WarpNoiseAmplitudeEnd1:c.noiseAmplitureEnd,WarpNoiseFrequency1:c.noiseFrequency,WarpColor1:c.color,ShapeAtlasSize:[o.shapeAtlasHeight,o.shapeAtlasCount,0,0],BoosterScale:o.scale},textures:{ShapeMap:o.shapeAtlasResPath,GradientMap0:o.gradient0ResPath,GradientMap1:o.gradient1ResPath,NoiseMap:i.texturePath.noise32}}):t.boosters=R.EveBoosterSet.from({name:o.name,glowColor:o.glowColor,glowScale:o.glowScale*f,haloColor:o.haloColor,haloScaleX:o.haloScaleX*d,haloScaleY:o.haloScaleY*d,symHaloScale:o.symHaloScale*h,trailColor:o.trailColor,trailSize:o.trailSize,warpGlowColor:o.warpGlowColor,warpHaloColor:o.warpHalpColor,effect:{effectFilePath:i.effectPath.boosterVolumetric,autoParameter:!0,parameters:{NoiseFunction0:s.noiseFunction,NoiseSpeed0:s.noiseSpeed,NoiseAmplitudeStart0:s.noiseAmplitureStart,NoiseAmplitudeEnd0:s.noiseAmplitureEnd,NoiseFrequency0:s.noiseFrequency,Color0:p,NoiseFunction1:l.noiseFunction,NoiseSpeed1:l.noiseSpeed,NoiseAmplitudeStart1:l.noiseAmplitureStart,NoiseAmplitudeEnd1:l.noiseAmplitureEnd,NoiseFrequency1:l.noiseFrequency,Color1:v,WarpNoiseFunction0:u.noiseFunction,WarpNoiseSpeed0:u.noiseSpeed,WarpNoiseAmplitudeStart0:u.noiseAmplitureStart,WarpNoiseAmplitudeEnd0:u.noiseAmplitureEnd,WarpNoiseFrequency0:u.noiseFrequency,WarpColor0:u.color,WarpNoiseFunction1:c.noiseFunction,WarpNoiseSpeed1:c.noiseSpeed,WarpNoiseAmplitudeStart1:c.noiseAmplitureStart,WarpNoiseAmplitudeEnd1:c.noiseAmplitureEnd,WarpNoiseFrequency1:c.noiseFrequency,WarpColor1:c.color,ShapeAtlasSize:[o.shapeAtlasHeight,o.shapeAtlasCount,0,0],BoosterScale:o.scale},textures:{ShapeMap:o.shapeAtlasResPath,GradientMap0:o.gradient0ResPath,GradientMap1:o.gradient1ResPath,NoiseMap:i.texturePath.noise32}},glows:{useQuads:!0,effect:{effectFilePath:i.texturePath.boosterGlow,textures:{DiffuseMap:i.texturePath.whiteSharp,NoiseMap:i.texturePath.noise}}}})}}static SetupLocators(t,r,i,n){var{locatorTurrets:a=[],booster:o}=i.hull,s=Array.from(r.locators);a.forEach(t=>{var i=e.FindAttachmentByConstructorAndName(r.locators,R.EveLocator2,t.name);i?s.splice(s.indexOf(i),1):(i=new R.EveLocator2,r.locators.push(i)),i.SetValues(t)});for(var l=o&&o.items?o.items:[],u=0;u<l.length;++u){var c="locator_booster_"+(u+1),f=r.FindLocatorByName(c);f?s.splice(s.indexOf(f),1):(f=R.EveLocator2.from({name:c}),r.locators.push(f)),f.SetValues({transform:_.mat4.scale([],l[u].transform,n.multiplier.boosterScale),atlasIndex0:l[u].atlasIndex0,atlasIndex1:l[u].atlasIndex1,hasTrail:l[u].hasTrail,lightScale:l[u].lightScale,functionality:l[u].functionality})}s.forEach(e=>{e.Destructor(),r.locators.splice(r.locators.indexOf(e),1)})}static SetupInstancedMesh(e,t,r,i){if((!t.mesh||t.mesh.constructor!==S.Tw2InstancedMesh)&&r.hull.instancedMeshes&&r.hull.instancedMeshes.length){var{gl:n}=w.tw2,{hull:a}=r,{instancedMeshes:o=[]}=a,s=_.mat4.create(),l=_.quat.create(),u=_.vec3.create(),c=_.vec3.create(),f=(_.vec3.create(),new R.EveChildContainer);f.name="Instanced meshes",t.effectChildren.push(f);for(var d=0;d<o.length;d++){var h=o[d],m=new S.Tw2InstancedMesh,b=new S.Tw2GeometryMesh;b.declaration=S.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageIndex:8,elements:4,attr:"attr3"},{usage:"TEXCOORD",usageIndex:9,elements:4,attr:"attr4"},{usage:"TEXCOORD",usageIndex:10,elements:4,attr:"attr5"}]),b.declaration.stride=48,b.declaration.name=h.name;for(var p=[],v=0;v<h.instances.length;v++){var{data:g}=h.instances[v];l[0]=g[0],l[1]=g[1],l[2]=g[2],l[3]=g[3],c[0]=g[4],c[1]=g[5],c[2]=g[6],u[0]=g[7],u[1]=g[8],u[2]=g[9],_.mat4.fromRotationTranslationScale(s,l,u,c),_.mat4.transpose(s,s),p.push(s[0]),p.push(s[1]),p.push(s[2]),p.push(s[3]),p.push(s[4]),p.push(s[5]),p.push(s[6]),p.push(s[7]),p.push(s[8]),p.push(s[9]),p.push(s[10]),p.push(s[11])}b.bufferData=new Float32Array(p),b.bufferLength=b.bufferData.length,b.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,b.buffer),n.bufferData(n.ARRAY_BUFFER,b.bufferData,n.STATIC_DRAW),w.tw2.systemMirror||(b.bufferData=null);var y=new S.Tw2GeometryRes;y.meshes[0]=b,y.OnPrepared(),m.geometryResPath=h.geometryResPath,m.instanceGeometryResource=y,m.Initialize();var E=new R.EveChildMesh;E.useSpaceObjectData=!0,E.useSRT=!0,E.mesh=m;var T=new S.Tw2MeshArea;T.name="instance",T.index=0,T.count=1,E.mesh.opaqueAreas.push(T);var j=e.generic.GetShaderConfig(h.shader,r.hull.isSkinned),P=T.effect=new S.Tw2Effect;P.name=T.name+"_effect",P.effectFilePath=j.effectFilePath,P.autoParameter=!0,j.textures=h.AssignTextures(j.textures);var x={colorType:0};r.faction.AssignAreaType(0,x),Object.assign(x,r.area),e.AssignMaterialParameters(x,j.parameters);var z=j.parameters.GeneralGlowColor||_.vec4.fromValues(1,1,1,1);z&&(r.faction.GetColorType(x.colorType,z),_.vec4.multiply(z,z,i.multiplier.generalGlowColor),j.parameters.GeneralGlowColor=z),P.SetParameters(j.parameters),P.SetTextures(j.textures),P.SetOverrides(j.overrides),P.Initialize(),f.objects.push(E)}}}static SetupShadows(e,t,r,i){return M((function*(){w.tw2.Debug({name:"Space object factory",message:"Shadows not supported"})}))()}static SetupLocatorSets(e,t,r,i){var{hull:n}=r;n.locatorSets.forEach(e=>{var r=new O.EveLocatorSets;r.name=e.name,e.locators.forEach(e=>{var t=new O.EveLocatorSetItem;t.boneIndex=e.boneIndex,_.vec3.copy(t.scaling,e.scaling),_.vec3.copy(t.position,e.position),_.quat.copy(t.rotation,e.rotation),r.locators.push(t)}),t.locatorSets.push(r)})}static SetupModelCurves(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Model curves not implemented"})}static SetupLights(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Lights not implemented"})}static SetupObservers(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Observers not implemented"})}static SetupHazeSets(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Haze sets not implemented"})}static SetupSpriteLineSets(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Sprite line sets not implemented"})}static SetupAudio(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Audio not implemented"})}static SetupAnimations(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Animations not implemented"})}static SetupChildren(e,t,r,i){return M((function*(){w.tw2.Debug({name:"Space object factory",message:"Child objects partially implemented"});for(var e=r.hull.children.filter(e=>r.faction.children.find(t=>t.isVisible&&t.groupIndex===e.groupIndex)),i=0;i<e.length;i++){var n=yield w.tw2.Fetch(e[i].redFilePath);n.Traverse(e=>{e.struct.curveSets&&e.struct.curveSets.forEach(e=>e.Stop())}),_.quat.copy(n.rotation,e[i].rotation),_.vec3.copy(n.translation,e[i].translation),_.vec3.copy(n.scaling,e[i].scaling),n.UpdateValues(),t.effectChildren.push(n)}}))()}static BindParticleEmitters(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Binding child particle emitters not implemented"})}static SetupControllers(e,t,r,i){w.tw2.Debug({name:"Space object factory",message:"Animation controllers not implemented"})}static SetupTurretMaterial(e,t,r,i){w.tw2.Debug({name:"Space  object factory",message:"Turret materials not implemented"})}},g.knownGeometryResPath={},g.modelPath="cdn:/dx9/model/",d=D((f=y).prototype,"faction",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=D(f.prototype,"generic",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=D(f.prototype,"hull",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=D(f.prototype,"material",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=D(f.prototype,"pattern",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=D(f.prototype,"race",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=f))||c);class L extends S.Tw2Error{constructor(e){super(e,"DNA format invalid (%dnaString%)")}}class F extends S.Tw2Error{constructor(e){super(e,"Resource path insert is invalid for hull (%hull%:%resPathInsert%)")}}},"./sof/faction/EveSOFDataFaction.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFaction",(function(){return W}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./sof/shared/index.js"),U=r("./sof/faction/resPathInsert.json"),V=r("./global/tw2.js");function H(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function q(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W=(i=N.meta.type("EveSOFDataFaction"),n=N.meta.string,a=N.meta.struct("EveSOFDataArea"),o=N.meta.list("EveSOFDataFactionChild"),s=N.meta.struct("EveSOFDataFactionColorSet"),l=N.meta.struct("EveSOFDataPatternLayer"),u=N.meta.string,c=N.meta.string,f=N.meta.struct("EveSOFDataLogoSet"),d=N.meta.uint,h=N.meta.uint,m=N.meta.uint,b=N.meta.uint,p=N.meta.list("EveSOFDataFactionPlaneSet"),v=N.meta.string,g=N.meta.list("EveSOFDataFactionSpotlightSet"),y=N.meta.struct("EveSOFDataFactionVisibilityGroupSet"),i((B=G=class e extends N.meta.Model{constructor(...e){super(...e),H(this,"name",E,this),H(this,"areaTypes",T,this),H(this,"children",S,this),H(this,"colorSet",j,this),H(this,"defaultPattern",R,this),H(this,"defaultPatternLayer1MaterialName",P,this),H(this,"description",x,this),H(this,"logoSet",z,this),H(this,"materialUsageMtl1",O,this),H(this,"materialUsageMtl2",A,this),H(this,"materialUsageMtl3",M,this),H(this,"materialUsageMtl4",C,this),H(this,"planeSets",D,this),H(this,"resPathInsert",I,this),H(this,"spotlightSets",L,this),H(this,"visibilityGroupSet",F,this)}HasColorType(e){return this.colorSet.Has(e)}GetColorType(e,t,r){return this.HasColorType(e)?this.colorSet.Get(e,t):void 0!==r&&this.HasColorType(r)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve color type: "+e}),this.colorSet.Get(r,t)):(V.tw2.Debug({name:"Space object factory",message:"Could not resolve color type: "+e}),t[0]=t[1]=t[2]=t[3]=1,t)}HasAreaType(e){return!!this.areaTypes&&this.areaTypes.Has(e)}GetAreaType(e,t){if(!this.areaTypes)throw new k.ErrSOFAreaTypeNotFound({type:e});return this.HasAreaType(e)?this.areaTypes.Get(e):void 0!==t&&this.HasAreaType(t)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve area type: "+e}),this.areaTypes.Get(t)):void V.tw2.Debug({name:"Space object factory",message:"Could not resolve area type: "+e})}AssignAreaType(e,t,r){var i=this.GetAreaType(e,r);if(i)return i.Assign(t),t}HasLogoType(e){return!!this.logoSet&&this.logoSet.Has(e)}GetLogoType(e,t){if(!this.logoSet)throw new k.ErrSOFLogoSetTypeNotFound({type:e});return this.HasLogoType(e)?this.logoSet.Get(e):void 0!==t&&this.HasAreaType(t)?(V.tw2.Debug({name:"Space object factory",message:"Using fallback value, could not resolve area type: "+e}),this.areaTypes.Get(t)):void V.tw2.Debug({name:"Space object factory",message:"Could not resolve logo type: "+e})}AssignLogoType(e,t,r){var i=this.GetLogoType(e,r);if(i)return i.Assign(t),t}HasVisibilityGroup(e){return!!this.visibilityGroupSet&&this.visibilityGroupSet.Has(e)}GetResPathInsert(t,r,i){if(!i||"NONE"===i.toUpperCase()){if(!this.resPathInsert)return r;i=this.resPathInsert}if(!e.IsValidResPathInsert(t,i))return V.tw2.Debug({name:"Space object factory",message:"ResPathInsert not found for hull ".concat(t,": ").concat(i)}),r;var n=r.lastIndexOf("/");return n>=0&&(r=r.substr(0,n+1)+i+"/"+r.substr(n+1)),(n=r.lastIndexOf("_"))>=0&&(r=r.substr(0,n)+"_"+i+r.substr(n)),r}FindPlaneSetByGroupIndex(e){for(var t=0;t<this.planeSets.length;t++)if(this.planeSets[t].groupIndex===e)return this.planeSets[t]}FindSpotlightSetByGroupIndex(e){for(var t=0;t<this.spotlightSets.length;t++)if(this.spotlightSets[t].groupIndex===e)return this.spotlightSets[t]}static IsValidResPathInsert(e,t){var r=U[t];return!!r&&r.includes(e)}static GetHullResPathInserts(e){this.resPathInserts||(this.resPathInserts=Object.assign({},U));var t=[];for(var r in this.resPathInserts)this.resPathInserts.hasOwnProperty(r)&&this.resPathInserts[r].includes(e)&&t.push(r);return t.sort()}},G.resPathInserts=null,E=q((_=B).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=q(_.prototype,"areaTypes",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=q(_.prototype,"children",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=q(_.prototype,"colorSet",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=q(_.prototype,"defaultPattern",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=q(_.prototype,"defaultPatternLayer1MaterialName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=q(_.prototype,"description",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=q(_.prototype,"logoSet",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=q(_.prototype,"materialUsageMtl1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=q(_.prototype,"materialUsageMtl2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=q(_.prototype,"materialUsageMtl3",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=q(_.prototype,"materialUsageMtl4",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=q(_.prototype,"planeSets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=q(_.prototype,"resPathInsert",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=q(_.prototype,"spotlightSets",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=q(_.prototype,"visibilityGroupSet",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=_))||w)},"./sof/faction/EveSOFDataFactionChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionChild",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataFactionChild"),n=h.meta.string,a=h.meta.uint,o=h.meta.boolean,i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"name",u,this),m(this,"groupIndex",c,this),m(this,"isVisible",f,this)}},u=b((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"groupIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=b(l.prototype,"isVisible",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=l))||s)},"./sof/faction/EveSOFDataFactionColorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionColorSet",(function(){return ie})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return ne})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return ae}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J=r("./global/utils/index.js"),$=r("./global/math/index.js"),ee=r("./core/index.js");function te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function re(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ie=(i=J.meta.type("EveSOFDataFactionColorSet"),n=J.meta.color,a=J.meta.color,o=J.meta.color,s=J.meta.color,l=J.meta.color,u=J.meta.color,c=J.meta.color,f=J.meta.color,d=J.meta.color,h=J.meta.color,m=J.meta.color,b=J.meta.color,p=J.meta.color,v=J.meta.color,g=J.meta.color,y=J.meta.color,w=J.meta.color,_=J.meta.color,E=J.meta.color,T=J.meta.color,S=J.meta.color,j=J.meta.color,i((Z=Q=class e extends J.meta.Model{constructor(...e){super(...e),te(this,"Black",x,this),te(this,"Blue",z,this),te(this,"Booster",O,this),te(this,"Cyan",A,this),te(this,"Darkhull",M,this),te(this,"Fire",C,this),te(this,"Glass",D,this),te(this,"Green",I,this),te(this,"Hull",L,this),te(this,"Killmark",F,this),te(this,"Orange",G,this),te(this,"Primary",B,this),te(this,"PrimaryLight",N,this),te(this,"Reactor",k,this),te(this,"Red",U,this),te(this,"Secondary",V,this),te(this,"SecondaryLight",H,this),te(this,"Tertiary",q,this),te(this,"TertiaryLight",W,this),te(this,"White",Y,this),te(this,"WhiteLight",K,this),te(this,"Yellow",X,this)}Has(t){var r=e.Type[t];if(void 0===r)throw new ne({type:t});return!!this[r]}Get(t,r=$.vec4.create()){if(!this.Has(t))throw new ae({type:t});return $.vec4.copy(r,this[e.Type[t]])}},Q.Type=["Primary","Secondary","Tertiary","Black","White","Yellow","Orange","Red","Blue","Green","Cyan","Fire","Hull","Glass","Reactor","Darkhull","Booster","Killmark","PrimaryLight","SecondaryLight","TertiaryLight","WhiteLight"],x=re((P=Z).prototype,"Black",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),z=re(P.prototype,"Blue",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),O=re(P.prototype,"Booster",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),A=re(P.prototype,"Cyan",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),M=re(P.prototype,"Darkhull",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),C=re(P.prototype,"Fire",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),D=re(P.prototype,"Glass",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),I=re(P.prototype,"Green",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),L=re(P.prototype,"Hull",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),F=re(P.prototype,"Killmark",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),G=re(P.prototype,"Orange",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),B=re(P.prototype,"Primary",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),N=re(P.prototype,"PrimaryLight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),k=re(P.prototype,"Reactor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),U=re(P.prototype,"Red",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),V=re(P.prototype,"Secondary",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),H=re(P.prototype,"SecondaryLight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),q=re(P.prototype,"Tertiary",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),W=re(P.prototype,"TertiaryLight",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),Y=re(P.prototype,"White",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),K=re(P.prototype,"WhiteLight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),X=re(P.prototype,"Yellow",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.vec4.create()}}),R=P))||R);class ne extends ee.Tw2Error{constructor(e){super(e,"SOF faction color set type unknown (%type%)"),this.unknownType=!0}}class ae extends ee.Tw2Error{constructor(e){super(e,"SOF faction color set type not found (%type%)")}}},"./sof/faction/EveSOFDataFactionPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionPlaneSet",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js"),m=r("./global/math/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=h.meta.type("EveSOFDataFactionPlaneSet"),n=h.meta.string,a=h.meta.color,o=h.meta.uint,i((d=class extends h.meta.Model{constructor(...e){super(...e),b(this,"name",u,this),b(this,"color",c,this),b(this,"groupIndex",f,this)}},u=p((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=p(l.prototype,"color",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec4.create()}}),f=p(l.prototype,"groupIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),s=l))||s)},"./sof/faction/EveSOFDataFactionSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v=r("./global/utils/index.js"),g=r("./global/math/index.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=v.meta.type("EveSOFDataFactionSpotlightSet"),n=v.meta.string,a=v.meta.color,o=v.meta.color,s=v.meta.uint,l=v.meta.color,i((p=class extends v.meta.Model{constructor(...e){super(...e),y(this,"name",f,this),y(this,"coneColor",d,this),y(this,"flareColor",h,this),y(this,"groupIndex",m,this),y(this,"spriteColor",b,this)}},f=w((c=p).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=w(c.prototype,"coneColor",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),h=w(c.prototype,"flareColor",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),m=w(c.prototype,"groupIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=w(c.prototype,"spriteColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.vec4.create()}}),u=c))||u)},"./sof/faction/EveSOFDataFactionVisibilityGroupSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("EveSOFDataFactionVisibilityGroupSet"),n=u.meta.list("EveSOFDataGenericString"),i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="visibilityGroups",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}Has(e){e=e.toUpperCase();for(var t=0;t<this.visibilityGroups.length;t++)if(this.visibilityGroups[t].str.toUpperCase()===e)return!0;return!1}},c=(o=l).prototype,f="visibilityGroups",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./sof/faction/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/faction/EveSOFDataFaction.js");r.d(t,"EveSOFDataFaction",(function(){return i.EveSOFDataFaction}));var n=r("./sof/faction/EveSOFDataFactionChild.js");r.d(t,"EveSOFDataFactionChild",(function(){return n.EveSOFDataFactionChild}));var a=r("./sof/faction/EveSOFDataFactionColorSet.js");r.d(t,"EveSOFDataFactionColorSet",(function(){return a.EveSOFDataFactionColorSet})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return a.ErrSOFFactionColorSetTypeUnknown})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return a.ErrSOFFactionColorSetTypeNotFound}));var o=r("./sof/faction/EveSOFDataFactionPlaneSet.js");r.d(t,"EveSOFDataFactionPlaneSet",(function(){return o.EveSOFDataFactionPlaneSet}));var s=r("./sof/faction/EveSOFDataFactionSpotlightSet.js");r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return s.EveSOFDataFactionSpotlightSet}));var l=r("./sof/faction/EveSOFDataFactionVisibilityGroupSet.js");r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return l.EveSOFDataFactionVisibilityGroupSet}))},"./sof/faction/resPathInsert.json":function(e){e.exports=JSON.parse('{"bloodraider":["abc1_t1","abc2_t1","abc2_t2","abc3_t1","ab1_t1","ab1_t2","ab2_t1","ab2_t2","ab3_t1","ac1_t1","ac2_t1","ac3_t1","ac4_t1","ac6_t1","ade1_t1","ade2_t1","adn1_t1","adn1_t1","afaux1_t1","af1_t1","af2_t1","af3_t1","af4_t1","af4_t2a","af4_t2b","af5_t1","af5_t2","af6_t1","af7_t1","af8_t1","af9_t1","ai1_t1","ai2_t1","as1_t1","at1_t1"],"igc":["ab1_t1","mb1_t1"],"serenity":["ab1_t1","ab2_t1","ab2_t2","ab3_t1","ac3_t1","af7_t1","angbc1_t1","angb1_t1","cbc2_t1","cbc3_t1","cb1_t1","cb2_t1","cb2_t2","cc2_t1","cc2_t2b","cc3_t1","gbc3_t1","gb1_t1","gb1_t1","gb2_t1","gb3_t1","gc2_t1","gc4_t1","gc4_t2","mb1_t1","mb1_t2b","mf4_t1","morb1_t1","sb1_t1","soec1_t1"],"wreck":["ab1_t1","ab2_t1","aca1_t1","aca2_t1","adn1_t1","afaux1_t1","afr1_t1","angt1_t1","angt1_t1","cb1_t1","cb2_t1","cca1_t1","cca2_t1","cca2_t1","cfaux1_t1","cfr1_t1","ct1_t1","ct1_t1","conb1_t1","gb1_t1","gb2_t1","gca1_t1","gca2_t1","gdn1_t1","gdn1_t1","gfaux1_t1","gfr1_t1","gt1_t1","gt1_t1","jb1_t1","cap1_t1","mb1_t1","mb2_t1","mca1_t1","mca2_t1","mfaux1_t1","mfr1_t1","orecs1_t1","orecs2_t1","soeb1_t1","tgb01_t1","tgdn01_t1"],"tournament-xiv":["ac6_t1","af8_t1"],"fallen":["angbc1_t1","angb1_t1","angf1_t1","angf2_t1","gb2_t1","gc4_t1"],"guardian":["angbc1_t1","angb1_t1","angc1_t1","angf1_t1","angf2_t1","angf3_t1","angf4_t1","angf5_t1","angf6_t1","angf7_t1"],"serpentis":["angf2_t1","gb2_t1"],"guristas":["cbc1_t1","cbc2_t1","cbc2_t2","cbc3_t1","cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cca2_t1","cca2_t1","cc1_t1","cc2_t1","cc3_t1","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cde2_t1","cdn1_t1","cdn1_t1","cfi1_t1","cfaux1_t1","cf1_t1","cf2_t1","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2","cs1_t1","ct1_t1","ct1_t1"],"ishukone":["cbc1_t1","cbc2_t1","cbc2_t2","cb1_t1","cb2_t1","cb3_t1","cca1_t1","cc2_t2b","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cf1_t1","cf1_t2","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"kaalakiota":["cbc1_t1","cbc2_t1","cbc2_t2","cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc2_t2a","cc4_t1","cc4_t2a","cc4_t2b","cde1_t2","cde2_t1","cf2_t2a","cf3_t1","cf3_t2","cf4_t1","cf4_t2","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"navy":["cbc1_t1","cbc2_t1","cbc2_t2","cbc3_t1","cb1_t1","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc1_fn","cc2_t1","cc3_t1","cc4_t1","cc4_t2a","cc4_t2b","cde1_t1","cde1_t2","cfaux1_t1","cf1_t1","cf2_t1","cf3_t1","cf3_t2","cf4_t1","cf5_t1","cf6_t1","cf7_t1","cf7_t2a","cf7_t2b","cf8_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2","gbc1_t1","gbc3_t1","gb1_t1","gb1_t1","gb2_t1","gb2_t2","gb3_t1","gc1_t1","gc2_t1","gc3_t1","gc4_t1","gde1_t1","gde2_t1","gfb1_t1","gfi1_t1","gfaux1_t1","gfr1_t1","gf3_t1","gf4_t1","gf6_t1","gf7_t1","gf7_t2","gf8_t1","mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mf1_t1","mf2_t1","mf3_t1","mf4_t1","mf5_t1","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"sukuuvestaa":["cbc2_t1","cbc2_t2","cb2_t1","cb2_t2","cb3_t1","cf3_t1"],"noh":["cb1_t1","cb1_t2","cb2_t1","cb2_t2","cb3_t1","cca1_t1","cc3_t1","cde2_t1","cfaux1_t1","cf1_t1","cf7_t1","cf7_t2a","cf7_t2b","ci1_t1","ci1_t2","ci2_t1","ci2_t2","ci3_t1","ci3_t2"],"cbd":["cb2_t1","cb2_t2"],"hyasyoda":["cb2_t1","cb2_t2","cf3_t1","cf3_t2"],"tournament-xii":["cb2_t1","cc2_t1","cf2_t2a"],"tournament-x":["cc1_t1","cf7_t1","cf7_t2a","cf7_t2b"],"police":["gbc1_t1","gbc2_t1","gb1_t1","gb1_t1","gb2_t1","gb2_t2","gc2_t1","gc3_t1","gdn1_t1","gfaux1_t1","gf4_t1","gf4_t2a","gf4_t2b","gf6_t1","gf7_t1","gf7_t2","gf8_t1"],"aliastra":["gb1_t1","gb1_t1","gb2_t1","gb2_t2","gb3_t1","gc2_t1","gc3_t1","gc4_t1","gde1_t1","gf4_t1","gf4_t2a","gf4_t2b","gf7_t1","gf7_t2"],"quafeultra":["gb2_t1","gi4_t1"],"creodron":["gc3_t1","gc4_t1"],"tournament-viii":["gc4_t1","gf4_t1"],"interbus":["gs1_t1"],"odyssey":["cap1_t1"],"palatine":["cap1_t1"],"upwell":["cap1_t1"],"brutor":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"nefantar":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mca1_t1","mca1_t1","mca2_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mdn1_t1","mdn1_t1","mfaux1_t1","mfr1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1","mt1_t1","mt1_t1"],"thukker":["mbc1_t1","mbc2_t1","mbc2_t2","mbc3_t1","mb1_t1","mb1_t2b","mb2_t1","mb2_t2a","mb3_t1","mc1_t1","mc1_t2a","mc1_t2b","mc2_t1","mc2_t2a","mc2_t2c","mc3_t1","mc4_t1","mde1_t1","mde2_t1","mfaux1_t1","mfr1_t1","mf1_t1","mf1_t2a","mf1_t2c","mf2_t1","mf2_t2b","mf3_t1","mf4_t1","mf5_t1","mf5_t2a","mf6_t1","mf7_t1","mf8_t1","mi1_t1","mi2_t1","mi3_t1","ms1_t1"],"tournament-vii":["mc2_t1","mf4_t1","mf4_wing"],"tournament-xiii":["sc1_t1","sc1_xiii","sf2_t1","sf2_xiii"],"base":["tgf01_t2"]}')},"./sof/generic/EveSOFDataGeneric.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGeneric",(function(){return K})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return X})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return Q})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return Z})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return J}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V=r("./core/index.js"),H=r("./global/utils/index.js"),q=r("./global/tw2.js");function W(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var K=(i=H.meta.type("EveSOFDataGeneric"),n=H.meta.path,a=H.meta.list("EveSOFDataGenericShader"),o=H.meta.raw("EveSOFDataGenericShader"),s=H.meta.struct("EveSOFDataGenericDamage"),l=H.meta.path,u=H.meta.list("EveSOFDataGenericDecalShader"),c=H.meta.struct("EveSOFDataAreaMaterial"),f=H.meta.struct("EveSOFDataGenericHullDamage"),d=H.meta.list(),h=H.meta.list("EveSOFDataGenericString"),m=H.meta.list("EveSOFDataGenericString"),b=H.meta.path,p=H.meta.path,v=H.meta.path,g=H.meta.string,y=H.meta.struct("EveSOFDataGenericSwarm"),w=H.meta.list("EveSOFDataGenericVariant"),_=H.meta.list("EveSOFDataVisibilityGroup"),i((U=class extends H.meta.Model{constructor(...e){super(...e),W(this,"areaShaderLocation",S,this),W(this,"areaShaders",j,this),W(this,"bannerShader",R,this),W(this,"damage",P,this),W(this,"decalShaderLocation",x,this),W(this,"decalShaders",z,this),W(this,"genericWreckMaterial",O,this),W(this,"hullDamage",A,this),W(this,"hullCategories",M,this),W(this,"materialPrefixes",C,this),W(this,"patternMaterialPrefixes",D,this),W(this,"resPathDefaultAlliance",I,this),W(this,"resPathDefaultCeo",L,this),W(this,"resPathDefaultCorp",F,this),W(this,"shaderPrefixAnimated",G,this),W(this,"swarm",B,this),W(this,"variants",N,this),W(this,"visibilityGroups",k,this)}Initialize(){this.bannerShader&&(this.bannerShader.shader="cdn:/graphics/effect/managed/space/spaceobject/v5/fx/banner/unpacked_fxbannerv5.fx")}GetShaderConfig(e,t,r){var i=this.HasDecalShader(e),n=i?this.GetDecalShader(e):this.GetAreaShader(e),{hasPatternMaskMaps:a=!1}=n,o=i?this.GetDecalShaderPath(e,t):this.GetAreaShaderPath(e,t);return o.includes("quadheatdetail")&&(q.tw2.Debug({name:"Space object factory",message:"Patching missing shader: "+o}),o=o.replace("quadheatdetail","quaddetail")),n.Assign({effectFilePath:o,hasPatternMaskMaps:a,overrides:{}},r)}GetShaderPrefix(e){return e?this.shaderPrefixAnimated:""}GetShaderPath(e,t){var r=this.GetShaderPrefix(t);"/"!==e.charAt(0)&&(e="/"+e);var i=e.lastIndexOf("/");return e.substring(0,i+1)+r+e.substring(i+1)}GetAreaShaderPath(e,t){return this.areaShaderLocation+this.GetShaderPath(e,t)}GetDecalShaderPath(e,t){return this.decalShaderLocation+this.GetShaderPath(e,t)}HasAreaShader(e){return!!Object(H.findElementByPropertyValue)(this.areaShaders,"shader",e)}GetAreaShader(e){return Object(H.findElementByPropertyValue)(this.areaShaders,"shader",e,X)}HasDecalShader(e){return!!Object(H.findElementByPropertyValue)(this.decalShaders,"shader",e)}GetDecalShader(e){return Object(H.findElementByPropertyValue)(this.decalShaders,"shader",e,Q)}GetMaterialPrefixes(){for(var e=[],t=0;t<this.materialPrefixes.length;t++)e.push(this.materialPrefixes[t].str);return e}GetPatternMaterialPrefixes(){for(var e=[],t=0;t<this.patternMaterialPrefixes.length;t++)e.push(this.patternMaterialPrefixes[t].str);return e}GetMaterialPrefix(e){var t=e-1;if(void 0===this.materialPrefixes[t])throw new Z({index:e});return this.materialPrefixes[t].str}GetPatternMaterialPrefix(e){var t=e-1;if(void 0===this.patternMaterialPrefixes[t])throw new J({index:e});return this.patternMaterialPrefixes[t].str}},S=Y((T=U).prototype,"areaShaderLocation",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=Y(T.prototype,"areaShaders",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=Y(T.prototype,"bannerShader",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=Y(T.prototype,"damage",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=Y(T.prototype,"decalShaderLocation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Y(T.prototype,"decalShaders",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Y(T.prototype,"genericWreckMaterial",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Y(T.prototype,"hullDamage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=Y(T.prototype,"hullCategories",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=Y(T.prototype,"materialPrefixes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=Y(T.prototype,"patternMaterialPrefixes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=Y(T.prototype,"resPathDefaultAlliance",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=Y(T.prototype,"resPathDefaultCeo",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F=Y(T.prototype,"resPathDefaultCorp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=Y(T.prototype,"shaderPrefixAnimated",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=Y(T.prototype,"swarm",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Y(T.prototype,"variants",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=Y(T.prototype,"visibilityGroups",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=T))||E);class X extends V.Tw2Error{constructor(e){super(e,"SOF Area shader not found (%name%)")}}class Q extends V.Tw2Error{constructor(e){super(e,"SOF Decal area shader not found (%name%)")}}class Z extends V.Tw2Error{constructor(e){super(e,"SOF Material prefix index not found (%index%)")}}class J extends V.Tw2Error{constructor(e){super(e,"SOF Pattern material prefix index not found (%index%)")}}},"./sof/generic/EveSOFDataGenericDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDamage",(function(){return te}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z=r("./global/utils/index.js"),J=r("./global/math/index.js");function $(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function ee(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var te=(i=Z.meta.type("EveSOFDataGenericDamage"),n=Z.meta.float,a=Z.meta.color,o=Z.meta.color,s=Z.meta.color,l=Z.meta.color,u=Z.meta.float,c=Z.meta.vector2,f=Z.meta.vector2,d=Z.meta.float,h=Z.meta.vector4,m=Z.meta.uint,b=Z.meta.float,p=Z.meta.float,v=Z.meta.float,g=Z.meta.string,y=Z.meta.float,w=Z.meta.float,_=Z.meta.uint,E=Z.meta.float,T=Z.meta.path,S=Z.meta.string,j=Z.meta.string,i((Q=class extends Z.meta.Model{constructor(...e){super(...e),$(this,"armorParticleAngle",x,this),$(this,"armorParticleColor0",z,this),$(this,"armorParticleColor1",O,this),$(this,"armorParticleColor2",A,this),$(this,"armorParticleColor3",M,this),$(this,"armorParticleDrag",C,this),$(this,"armorParticleMinMaxLifeTime",D,this),$(this,"armorParticleMinMaxSpeed",I,this),$(this,"armorParticleRate",L,this),$(this,"armorParticleSizes",F,this),$(this,"armorParticleTextureIndex",G,this),$(this,"armorParticleTurbulenceAmplitude",B,this),$(this,"armorParticleTurbulenceFrequency",N,this),$(this,"armorParticleVelocityStretchRotation",k,this),$(this,"armorShader",U,this),$(this,"flickerPerlinAlpha",V,this),$(this,"flickerPerlinBeta",H,this),$(this,"flickerPerlinN",q,this),$(this,"flickerPerlinSpeed",W,this),$(this,"shieldGeometryResFilePath",Y,this),$(this,"shieldShaderEllipsoid",K,this),$(this,"shieldShaderHull",X,this)}},x=ee((P=Q).prototype,"armorParticleAngle",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=ee(P.prototype,"armorParticleColor0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),O=ee(P.prototype,"armorParticleColor1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),A=ee(P.prototype,"armorParticleColor2",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),M=ee(P.prototype,"armorParticleColor3",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),C=ee(P.prototype,"armorParticleDrag",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=ee(P.prototype,"armorParticleMinMaxLifeTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec2.create()}}),I=ee(P.prototype,"armorParticleMinMaxSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec2.create()}}),L=ee(P.prototype,"armorParticleRate",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=ee(P.prototype,"armorParticleSizes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.vec4.create()}}),G=ee(P.prototype,"armorParticleTextureIndex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=ee(P.prototype,"armorParticleTurbulenceAmplitude",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=ee(P.prototype,"armorParticleTurbulenceFrequency",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=ee(P.prototype,"armorParticleVelocityStretchRotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=ee(P.prototype,"armorShader",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=ee(P.prototype,"flickerPerlinAlpha",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=ee(P.prototype,"flickerPerlinBeta",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=ee(P.prototype,"flickerPerlinN",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=ee(P.prototype,"flickerPerlinSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=ee(P.prototype,"shieldGeometryResFilePath",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=ee(P.prototype,"shieldShaderEllipsoid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=ee(P.prototype,"shieldShaderHull",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=P))||R)},"./sof/generic/EveSOFDataGenericDecalShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDecalShader",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("EveSOFDataGenericDecalShader"),n=b.meta.list("EveSOFDataTexture"),a=b.meta.list("EveSOFDataGenericString"),o=b.meta.list("EveSOFDataGenericString"),s=b.meta.string,i((m=class extends b.meta.Model{constructor(...e){super(...e),p(this,"defaultTextures",c,this),p(this,"parameters",f,this),p(this,"parentTextures",d,this),p(this,"shader",h,this)}Assign(e={},t={}){return e.textures=this.AssignTextures(e.textures,t.textures),e.parameters=this.AssignParameters(e.parameters,t.parameters),e}AssignParameters(e={},t){for(var r=0;r<this.parameters.length;r++){var{str:i}=this.parameters[r];t&&t[i]?e[i]=Array.from(t[i]):e[i]=[0,0,0,1]}return e}AssignTextures(e={},t){for(var r=0;r<this.defaultTextures.length;r++)this.defaultTextures[r].Assign(e);for(var i=0;i<this.parentTextures.length;i++){var{str:n}=this.parentTextures[i];t&&t[n]?e[n]=t[n]:e[n]||(e[n]="")}return e}},c=v((u=m).prototype,"defaultTextures",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=v(u.prototype,"parameters",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v(u.prototype,"parentTextures",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=v(u.prototype,"shader",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)},"./sof/generic/EveSOFDataGenericHullDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericHullDamage",(function(){return F}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C=r("./global/utils/index.js"),D=r("./global/math/index.js");function I(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function L(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var F=(i=C.meta.type("EveSOFDataGenericHullDamage"),n=C.meta.float,a=C.meta.color,o=C.meta.color,s=C.meta.color,l=C.meta.float,u=C.meta.float,c=C.meta.vector2,f=C.meta.vector2,d=C.meta.float,h=C.meta.vector4,m=C.meta.uint,b=C.meta.float,p=C.meta.float,i((M=class extends C.meta.Model{constructor(...e){super(...e),I(this,"hullParticleAngle",y,this),I(this,"hullParticleColor0",w,this),I(this,"hullParticleColor1",_,this),I(this,"hullParticleColor2",E,this),I(this,"hullParticleColorMidpoint",T,this),I(this,"hullParticleDrag",S,this),I(this,"hullParticleMinMaxLifeTime",j,this),I(this,"hullParticleMinMaxSpeed",R,this),I(this,"hullParticleRate",P,this),I(this,"hullParticleSizes",x,this),I(this,"hullParticleTextureIndex",z,this),I(this,"hullParticleTurbulenceAmplitude",O,this),I(this,"hullParticleTurbulenceFrequency",A,this)}},y=L((g=M).prototype,"hullParticleAngle",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(g.prototype,"hullParticleColor0",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),_=L(g.prototype,"hullParticleColor1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),E=L(g.prototype,"hullParticleColor2",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),T=L(g.prototype,"hullParticleColorMidpoint",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=L(g.prototype,"hullParticleDrag",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=L(g.prototype,"hullParticleMinMaxLifeTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec2.create()}}),R=L(g.prototype,"hullParticleMinMaxSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec2.create()}}),P=L(g.prototype,"hullParticleRate",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=L(g.prototype,"hullParticleSizes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec4.create()}}),z=L(g.prototype,"hullParticleTextureIndex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=L(g.prototype,"hullParticleTurbulenceAmplitude",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=L(g.prototype,"hullParticleTurbulenceFrequency",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=g))||v)},"./sof/generic/EveSOFDataGenericShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericShader",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E=r("./global/utils/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=E.meta.type("EveSOFDataGenericShader"),n=E.meta.list("EveSOFDataParameter"),a=E.meta.list("EveSOFDataTexture"),o=E.meta.notImplemented,s=E.meta.boolean,l=E.meta.list("EveSOFDataGenericString"),u=E.meta.path,c=E.meta.notImplemented,f=E.meta.string,i((_=w=class e extends E.meta.Model{constructor(...e){super(...e),T(this,"defaultParameters",m,this),T(this,"defaultTextures",b,this),T(this,"doGenerateDepthArea",p,this),T(this,"parameters",v,this),T(this,"shader",g,this),T(this,"transparencyTextureName",y,this)}get hasPatternMaskMaps(){for(var t=0;t<this.defaultTextures.length;t++)if(e.PatternMaskMaps.includes(this.defaultTextures[t].name))return!0;return!1}Assign(e={},t={}){return e.textures=this.AssignTextures(e.textures,t.textures),e.parameters=this.AssignParameters(e.parameters,t.parameters),e}AssignParameters(e={},t){for(var r=0;r<this.defaultParameters.length;r++)this.defaultParameters[r].Assign(e);for(var i=0;i<this.parameters.length;i++){var{str:n}=this.parameters[i];t&&t[n]?e[n]=Array.from(t[n]):e[n]&&(e[n]=[0,0,0,1])}return e}AssignTextures(e={},t){for(var r=0;r<this.defaultTextures.length;r++)this.defaultTextures[r].Assign(e);return Object.assign(e,t)}},w.PatternMaskMaps=["PatternMask1Map","PatternMask2Map"],m=S((h=_).prototype,"defaultParameters",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=S(h.prototype,"defaultTextures",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(h.prototype,"doGenerateDepthArea",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=S(h.prototype,"parameters",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=S(h.prototype,"shader",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=S(h.prototype,"transparencyTextureName",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=h))||d)},"./sof/generic/EveSOFDataGenericString.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericString",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("EveSOFDataGenericString"),n=u.meta.string,i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="str",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},c=(o=l).prototype,f="str",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./sof/generic/EveSOFDataGenericSwarm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericSwarm",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C=r("./global/utils/index.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=C.meta.type("EveSOFDataGenericShader"),n=C.meta.float,a=C.meta.float,o=C.meta.float,s=C.meta.float,l=C.meta.float,u=C.meta.float,c=C.meta.float,f=C.meta.float,d=C.meta.float,h=C.meta.float,m=C.meta.float,b=C.meta.float,p=C.meta.float,i((M=class extends C.meta.Model{constructor(...e){super(...e),D(this,"formationDistance",y,this),D(this,"maxDeceleration",w,this),D(this,"maxDistance0",_,this),D(this,"separationDistance",E,this),D(this,"wanderDistance",T,this),D(this,"wanderFluctuation",S,this),D(this,"wanderRadius",j,this),D(this,"weightAlign",R,this),D(this,"weightAnchor",P,this),D(this,"weightCohesion",x,this),D(this,"weightDeceleration",z,this),D(this,"weightFormation",O,this),D(this,"weightSeparation",A,this)}},y=I((g=M).prototype,"formationDistance",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=I(g.prototype,"maxDeceleration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=I(g.prototype,"maxDistance0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=I(g.prototype,"separationDistance",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=I(g.prototype,"wanderDistance",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=I(g.prototype,"wanderFluctuation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=I(g.prototype,"wanderRadius",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=I(g.prototype,"weightAlign",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=I(g.prototype,"weightAnchor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=I(g.prototype,"weightCohesion",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=I(g.prototype,"weightDeceleration",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=I(g.prototype,"weightFormation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=I(g.prototype,"weightSeparation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=g))||v)},"./sof/generic/EveSOFDataGenericVariant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericVariant",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataGenericVariant"),n=h.meta.string,a=h.meta.struct("EveSOFDataHullArea"),o=h.meta.boolean,i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"name",u,this),m(this,"hullArea",c,this),m(this,"isTransparent",f,this)}},u=b((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"hullArea",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b(l.prototype,"isTransparent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=l))||s)},"./sof/generic/EveSOFDataVisibilityGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataVisibilityGroup",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("EveSOFDataVisibilityGroup"),n=u.meta.string,i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="name",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},c=(o=l).prototype,f="name",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./sof/generic/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/generic/EveSOFDataGeneric.js");r.d(t,"EveSOFDataGeneric",(function(){return i.EveSOFDataGeneric})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return i.ErrSOFAreaShaderNotFound})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return i.ErrSOFDecalShaderNotFound})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return i.ErrSOFMaterialPrefixNotFound})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return i.ErrSOFPatternMaterialPrefixNotFound}));var n=r("./sof/generic/EveSOFDataGenericDamage.js");r.d(t,"EveSOFDataGenericDamage",(function(){return n.EveSOFDataGenericDamage}));var a=r("./sof/generic/EveSOFDataGenericDecalShader.js");r.d(t,"EveSOFDataGenericDecalShader",(function(){return a.EveSOFDataGenericDecalShader}));var o=r("./sof/generic/EveSOFDataGenericHullDamage.js");r.d(t,"EveSOFDataGenericHullDamage",(function(){return o.EveSOFDataGenericHullDamage}));var s=r("./sof/generic/EveSOFDataGenericShader.js");r.d(t,"EveSOFDataGenericShader",(function(){return s.EveSOFDataGenericShader}));var l=r("./sof/generic/EveSOFDataGenericString.js");r.d(t,"EveSOFDataGenericString",(function(){return l.EveSOFDataGenericString}));var u=r("./sof/generic/EveSOFDataGenericSwarm.js");r.d(t,"EveSOFDataGenericSwarm",(function(){return u.EveSOFDataGenericSwarm}));var c=r("./sof/generic/EveSOFDataGenericVariant.js");r.d(t,"EveSOFDataGenericVariant",(function(){return c.EveSOFDataGenericVariant}));var f=r("./sof/generic/EveSOFDataVisibilityGroup.js");r.d(t,"EveSOFDataVisibilityGroup",(function(){return f.EveSOFDataVisibilityGroup}))},"./sof/hull/EveSOFDataHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHull",(function(){return Ce}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve,ge,ye,we,_e,Ee,Te,Se,je,Re,Pe,xe,ze=r("./global/utils/index.js"),Oe=r("./global/math/index.js");function Ae(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Me(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ce=(i=ze.meta.type("EveSOFDataHull"),n=ze.meta.string,a=ze.meta.list("EveSOFDataHullArea"),o=ze.meta.list("EveSOFDataHullAnimation"),s=ze.meta.vector3,l=ze.meta.list("EveSOFDataHullBanner"),u=ze.meta.struct("EveSOFDataHullBooster"),c=ze.meta.vector4,f=ze.meta.uint,d=ze.meta.boolean,h=ze.meta.string,m=ze.meta.list("EveSOFDataHullChild"),b=ze.meta.list("EveSOFDataHullController"),p=ze.meta.list("EveSOFDataHullArea"),v=ze.meta.list("EveSOFDataHullDecalSet"),g=ze.meta.struct("EveSOFDataPatternPerHull"),y=ze.meta.list("EveSOFDataHullArea"),w=ze.meta.string,_=ze.meta.list("EveSOFDataHullArea"),E=ze.meta.boolean,T=ze.meta.path,S=ze.meta.list("EveSOFDataHullHazeSet"),j=ze.meta.list("EveSOFDataHullDecalSet"),R=ze.meta.uint,P=ze.meta.list("EveSOFDataInstancedMesh"),x=ze.meta.boolean,z=ze.meta.list("EveSOFDataHullLightSet"),O=ze.meta.list("EveSOFDataHullLocatorSet"),A=ze.meta.list("EveSOFDataHullLocator"),M=ze.meta.path,C=ze.meta.list("EveSOFDataHullArea"),D=ze.meta.list("EveSOFDataHullPlaneSet"),I=ze.meta.vector3,L=ze.meta.vector3,F=ze.meta.list("EveSOFDataHullSoundEmitter"),G=ze.meta.list("EveSOFDataHullSpotlightSet"),B=ze.meta.list("EveSOFDataHullSpriteLineSet"),N=ze.meta.list("EveSOFDataHullSpriteSet"),k=ze.meta.list("EveSOFDataHullArea"),i((xe=class extends ze.meta.Model{constructor(...e){super(...e),Ae(this,"name",H,this),Ae(this,"additiveAreas",q,this),Ae(this,"animations",W,this),Ae(this,"audioPosition",Y,this),Ae(this,"banners",K,this),Ae(this,"booster",X,this),Ae(this,"boundingSphere",Q,this),Ae(this,"buildClass",Z,this),Ae(this,"castShadow",J,this),Ae(this,"category",$,this),Ae(this,"children",ee,this),Ae(this,"controllers",te,this),Ae(this,"decalAreas",re,this),Ae(this,"decalSets",ie,this),Ae(this,"defaultPattern",ne,this),Ae(this,"depthAreas",ae,this),Ae(this,"description",oe,this),Ae(this,"distortionAreas",se,this),Ae(this,"enableDynamicBoundingSphere",le,this),Ae(this,"geometryResFilePath",ue,this),Ae(this,"hazeSets",ce,this),Ae(this,"hullDecals",fe,this),Ae(this,"impactEffectType",de,this),Ae(this,"instancedMeshes",he,this),Ae(this,"isSkinned",me,this),Ae(this,"lightSets",be,this),Ae(this,"locatorSets",pe,this),Ae(this,"locatorTurrets",ve,this),Ae(this,"modelRotationCurvePath",ge,this),Ae(this,"opaqueAreas",ye,this),Ae(this,"planeSets",we,this),Ae(this,"shapeEllipsoidCenter",_e,this),Ae(this,"shapeEllipsoidRadius",Ee,this),Ae(this,"soundEmitters",Te,this),Ae(this,"spotlightSets",Se,this),Ae(this,"spriteLineSets",je,this),Ae(this,"spriteSets",Re,this),Ae(this,"transparentAreas",Pe,this)}Initialize(){this.geometryResFilePath.includes(".cake")&&(this._wasSkinned=this.isSkinned,this.isSkinned=!1)}},H=Me((V=xe).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=Me(V.prototype,"additiveAreas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=Me(V.prototype,"animations",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=Me(V.prototype,"audioPosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.vec3.create()}}),K=Me(V.prototype,"banners",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=Me(V.prototype,"booster",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=Me(V.prototype,"boundingSphere",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.vec4.create()}}),Z=Me(V.prototype,"buildClass",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Me(V.prototype,"castShadow",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=Me(V.prototype,"category",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Me(V.prototype,"children",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),te=Me(V.prototype,"controllers",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=Me(V.prototype,"decalAreas",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=Me(V.prototype,"decalSets",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=Me(V.prototype,"defaultPattern",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=Me(V.prototype,"depthAreas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=Me(V.prototype,"description",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),se=Me(V.prototype,"distortionAreas",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=Me(V.prototype,"enableDynamicBoundingSphere",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=Me(V.prototype,"geometryResFilePath",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ce=Me(V.prototype,"hazeSets",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=Me(V.prototype,"hullDecals",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=Me(V.prototype,"impactEffectType",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),he=Me(V.prototype,"instancedMeshes",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Me(V.prototype,"isSkinned",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=Me(V.prototype,"lightSets",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=Me(V.prototype,"locatorSets",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=Me(V.prototype,"locatorTurrets",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=Me(V.prototype,"modelRotationCurvePath",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ye=Me(V.prototype,"opaqueAreas",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=Me(V.prototype,"planeSets",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=Me(V.prototype,"shapeEllipsoidCenter",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.vec3.create()}}),Ee=Me(V.prototype,"shapeEllipsoidRadius",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.vec3.create()}}),Te=Me(V.prototype,"soundEmitters",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=Me(V.prototype,"spotlightSets",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=Me(V.prototype,"spriteLineSets",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=Me(V.prototype,"spriteSets",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pe=Me(V.prototype,"transparentAreas",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=V))||U)},"./sof/hull/EveSOFDataHullAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullAnimation",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=T.meta.type("EveSOFDataHullAnimation"),n=T.meta.string,a=T.meta.float,o=T.meta.float,s=T.meta.quaternion,l=T.meta.uint,u=T.meta.float,c=T.meta.float,f=T.meta.quaternion,i((E=class extends T.meta.Model{constructor(...e){super(...e),j(this,"name",m,this),j(this,"endRate",b,this),j(this,"endRotationTime",p,this),j(this,"endRotationValue",v,this),j(this,"id",g,this),j(this,"startRate",y,this),j(this,"startRotationTime",w,this),j(this,"startRotationValue",_,this)}},m=R((h=E).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=R(h.prototype,"endRate",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=R(h.prototype,"endRotationTime",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(h.prototype,"endRotationValue",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.quat.create()}}),g=R(h.prototype,"id",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(h.prototype,"startRate",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=R(h.prototype,"startRotationTime",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=R(h.prototype,"startRotationValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.quat.create()}}),d=h))||d)},"./sof/hull/EveSOFDataHullArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullArea",(function(){return R}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=r("./global/utils/index.js");function S(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function j(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var R=(i=T.meta.type("EveSOFDataHullArea"),n=T.meta.string,a=T.meta.uint,o=T.meta.uint,s=T.meta.uint,l=T.meta.uint,u=T.meta.list("EveSOFDataParameter"),c=T.meta.string,f=T.meta.list("EveSOFDataTexture"),i((E=class extends T.meta.Model{constructor(...e){super(...e),S(this,"name",m,this),S(this,"areaType",b,this),S(this,"blockedMaterials",p,this),S(this,"count",v,this),S(this,"index",g,this),S(this,"parameters",y,this),S(this,"shader",w,this),S(this,"textures",_,this)}Assign(e={}){return e.textures=this.AssignTextures(e.textures),e.parameters=this.AssignParameters(e.parameters),e}AssignParameters(e={}){for(var t=0;t<this.parameters.length;t++)this.parameters[t].Assign(e);return e}AssignTextures(e={}){for(var t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}},m=j((h=E).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=j(h.prototype,"areaType",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=j(h.prototype,"blockedMaterials",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=j(h.prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=j(h.prototype,"index",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=j(h.prototype,"parameters",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=j(h.prototype,"shader",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=j(h.prototype,"textures",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=h))||d)},"./sof/hull/EveSOFDataHullBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBanner",(function(){return A}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js"),x=r("./global/math/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=P.meta.type("EveSOFDataHullBanner"),n=P.meta.string,a=P.meta.float,o=P.meta.float,s=P.meta.float,l=P.meta.uint,u=P.meta.struct(),c=P.meta.vector3,f=P.meta.quaternion,d=P.meta.vector3,h=P.meta.uint,i((R=class extends P.meta.Model{constructor(...e){super(...e),z(this,"name",p,this),z(this,"angleX",v,this),z(this,"angleY",g,this),z(this,"angleZ",y,this),z(this,"boneIndex",w,this),z(this,"lightOverride",_,this),z(this,"position",E,this),z(this,"rotation",T,this),z(this,"scaling",S,this),z(this,"usage",j,this)}},p=O((b=R).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=O(b.prototype,"angleX",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=O(b.prototype,"angleY",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=O(b.prototype,"angleZ",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=O(b.prototype,"boneIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=O(b.prototype,"lightOverride",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=O(b.prototype,"position",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),T=O(b.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),S=O(b.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(1,1,1)}}),j=O(b.prototype,"usage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)},"./sof/hull/EveSOFDataHullBannerLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBannerLight",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("EveSOFDataHullBannerLight")(i=class extends n.meta.Model{})||i)||i},"./sof/hull/EveSOFDataHullBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBooster",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataHullBooster"),n=h.meta.boolean,a=h.meta.boolean,o=h.meta.list("EveSOFDataHullBoosterItem"),i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"alwaysOn",u,this),m(this,"hasTrails",c,this),m(this,"items",f,this)}},u=b((l=d).prototype,"alwaysOn",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=b(l.prototype,"hasTrails",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=b(l.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)},"./sof/hull/EveSOFDataHullBoosterItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBoosterItem",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_=r("./global/utils/index.js"),E=r("./global/math/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=_.meta.type("EveSOFDataHullBoosterItem"),n=_.meta.uint,a=_.meta.uint,o=_.meta.vector4,s=_.meta.notImplemented,l=_.meta.boolean,u=_.meta.float,c=_.meta.todo("What should the default value be?"),f=_.meta.matrix4,i((w=class extends _.meta.Model{constructor(...e){super(...e),T(this,"atlasIndex0",m,this),T(this,"atlasIndex1",b,this),T(this,"functionality",p,this),T(this,"hasTrail",v,this),T(this,"lightScale",g,this),T(this,"transform",y,this)}},m=S((h=w).prototype,"atlasIndex0",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=S(h.prototype,"atlasIndex1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=S(h.prototype,"functionality",[o,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec4.create()}}),v=S(h.prototype,"hasTrail",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=S(h.prototype,"lightScale",[u,c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=S(h.prototype,"transform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.mat4.create()}}),d=h))||d)},"./sof/hull/EveSOFDataHullChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullChild",(function(){return z}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js"),R=r("./global/math/index.js");function P(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var z=(i=j.meta.type("EveSOFDataHullChild"),n=j.meta.string,a=j.meta.uint,o=j.meta.uint,s=j.meta.uint,l=j.meta.path,u=j.meta.quaternion,c=j.meta.vector3,f=j.meta.vector3,d=j.meta.string,i((S=class extends j.meta.Model{constructor(...e){super(...e),P(this,"name",b,this),P(this,"groupIndex",p,this),P(this,"id",v,this),P(this,"lowestLodVisible",g,this),P(this,"redFilePath",y,this),P(this,"rotation",w,this),P(this,"scaling",_,this),P(this,"translation",E,this),P(this,"visibilityGroup",T,this)}},b=x((m=S).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=x(m.prototype,"groupIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=x(m.prototype,"id",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=x(m.prototype,"lowestLodVisible",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=x(m.prototype,"redFilePath",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=x(m.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.quat.create()}}),_=x(m.prototype,"scaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec3.fromValues(1,1,1)}}),E=x(m.prototype,"translation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.vec3.create()}}),T=x(m.prototype,"visibilityGroup",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=m))||h)},"./sof/hull/EveSOFDataHullController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullController",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("EveSOFDataHullController"),n=u.meta.path,i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="path",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},c=(o=l).prototype,f="path",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./sof/hull/EveSOFDataHullDecalSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSet",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataHullDecalSet"),n=h.meta.string,a=h.meta.list("EveSOFDataHullDecalSetItem"),o=h.meta.string,i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"name",u,this),m(this,"items",c,this),m(this,"visibilityGroup",f,this)}},u=b((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=b(l.prototype,"visibilityGroup",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=l))||s)},"./sof/hull/EveSOFDataHullDecalSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSetItem",(function(){return F}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C=r("./global/utils/index.js"),D=r("./global/math/index.js");function I(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function L(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var F=(i=C.meta.type("EveSOFDataHullDecalSetItem"),n=C.meta.string,a=C.meta.uint,o=C.meta.uint16Array,s=C.meta.uint,l=C.meta.uint,u=C.meta.uint,c=C.meta.list("EveSOFDataParameter"),f=C.meta.vector3,d=C.meta.quaternion,h=C.meta.vector3,m=C.meta.list("EveSOFDataTexture"),b=C.meta.uint,p=C.meta.string,i((M=class extends C.meta.Model{constructor(...e){super(...e),I(this,"name",y,this),I(this,"boneIndex",w,this),I(this,"indexBuffer",_,this),I(this,"glowColorType",E,this),I(this,"logoType",T,this),I(this,"meshIndex",S,this),I(this,"parameters",j,this),I(this,"position",R,this),I(this,"rotation",P,this),I(this,"scaling",x,this),I(this,"textures",z,this),I(this,"usage",O,this),I(this,"visibilityGroup",A,this)}Assign(e={}){return e.textures=this.AssignTextures(e.textures),e.parameters=this.AssignParameters(e.parameters),e}AssignParameters(e={}){for(var t=0;t<this.parameters.length;t++)this.parameters[t].Assign(e);return e}AssignTextures(e={}){for(var t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}},y=L((g=M).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=L(g.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),_=L(g.prototype,"indexBuffer",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=L(g.prototype,"glowColorType",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=L(g.prototype,"logoType",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=L(g.prototype,"meshIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=L(g.prototype,"parameters",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=L(g.prototype,"position",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec3.create()}}),P=L(g.prototype,"rotation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.quat.create()}}),x=L(g.prototype,"scaling",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.vec3.fromValues(1,1,1)}}),z=L(g.prototype,"textures",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=L(g.prototype,"usage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=L(g.prototype,"visibilityGroup",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=g))||v)},"./sof/hull/EveSOFDataHullHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSet",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("EveSOFDataHullHazeSet"),n=b.meta.string,a=b.meta.list("EveSOFDataHullHazeSetItem"),o=b.meta.string,s=b.meta.boolean,i((m=class extends b.meta.Model{constructor(...e){super(...e),p(this,"name",c,this),p(this,"items",f,this),p(this,"visibilityGroup",d,this),p(this,"skinned",h,this)}},c=v((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v(u.prototype,"visibilityGroup",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=v(u.prototype,"skinned",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=u))||l)},"./sof/hull/EveSOFDataHullHazeSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSetItem",(function(){return A}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js"),x=r("./global/math/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=P.meta.type("EveSOFDataHullHazeSetItem"),n=P.meta.uint,a=P.meta.boolean,o=P.meta.uint,s=P.meta.float,l=P.meta.float,u=P.meta.vector3,c=P.meta.quaternion,f=P.meta.vector3,d=P.meta.float,h=P.meta.float,i((R=class extends P.meta.Model{constructor(...e){super(...e),z(this,"boneIndex",p,this),z(this,"boosterGainInfluence",v,this),z(this,"colorType",g,this),z(this,"hazeBrightness",y,this),z(this,"hazeFalloff",w,this),z(this,"position",_,this),z(this,"rotation",E,this),z(this,"scaling",T,this),z(this,"sourceBrightness",S,this),z(this,"sourceSize",j,this)}},p=O((b=R).prototype,"boneIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=O(b.prototype,"boosterGainInfluence",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=O(b.prototype,"colorType",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=O(b.prototype,"hazeBrightness",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=O(b.prototype,"hazeFalloff",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=O(b.prototype,"position",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),E=O(b.prototype,"rotation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.quat.create()}}),T=O(b.prototype,"scaling",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.fromValues(1,1,1)}}),S=O(b.prototype,"sourceBrightness",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=O(b.prototype,"sourceSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)},"./sof/hull/EveSOFDataHullLightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSet",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=y.meta.type("EveSOFDataHullLightSet"),n=y.meta.string,a=y.meta.uint,o=y.meta.list("EveSOFDataHullLightSetItem"),s=y.meta.float,l=y.meta.float,u=y.meta.string,i((g=class extends y.meta.Model{constructor(...e){super(...e),w(this,"name",d,this),w(this,"boneIndex",h,this),w(this,"items",m,this),w(this,"noiseAmplitude",b,this),w(this,"noiseOctaves",p,this),w(this,"visibilityGroup",v,this)}},d=_((f=g).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=_(f.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),m=_(f.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=_(f.prototype,"noiseAmplitude",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=_(f.prototype,"noiseOctaves",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=_(f.prototype,"visibilityGroup",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=f))||c)},"./sof/hull/EveSOFDataHullLightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetItem",(function(){return A}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js"),x=r("./global/math/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=P.meta.type("EveSOFDataHullLightSetItem"),n=P.meta.string,a=P.meta.uint,o=P.meta.float,s=P.meta.float,l=P.meta.color,u=P.meta.float,c=P.meta.float,f=P.meta.float,d=P.meta.vector3,h=P.meta.float,i((R=class extends P.meta.Model{constructor(...e){super(...e),z(this,"name",p,this),z(this,"boneIndex",v,this),z(this,"brightness",g,this),z(this,"innerRadius",y,this),z(this,"lightColor",w,this),z(this,"noiseAmplitude",_,this),z(this,"noiseFrequency",E,this),z(this,"noiseOctaves",T,this),z(this,"position",S,this),z(this,"radius",j,this)}},p=O((b=R).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=O(b.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=O(b.prototype,"brightness",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=O(b.prototype,"innerRadius",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=O(b.prototype,"lightColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec4.create()}}),_=O(b.prototype,"noiseAmplitude",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=O(b.prototype,"noiseFrequency",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=O(b.prototype,"noiseOctaves",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=O(b.prototype,"position",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),j=O(b.prototype,"radius",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m)},"./sof/hull/EveSOFDataHullLightSetSpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return I}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A=r("./global/utils/index.js"),M=r("./global/math/index.js");function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var I=(i=A.meta.type("EveSOFDataHullLightSetSpotLight"),n=A.meta.string,a=A.meta.uint,o=A.meta.float,s=A.meta.float,l=A.meta.float,u=A.meta.color,c=A.meta.float,f=A.meta.float,d=A.meta.float,h=A.meta.vector3,m=A.meta.uint,b=A.meta.quaternion,i((O=class extends A.meta.Model{constructor(...e){super(...e),C(this,"name",g,this),C(this,"boneIndex",y,this),C(this,"brightness",w,this),C(this,"innerAngle",_,this),C(this,"innerRadius",E,this),C(this,"lightColor",T,this),C(this,"noiseAmplitude",S,this),C(this,"noiseFrequency",j,this),C(this,"outerAngle",R,this),C(this,"position",P,this),C(this,"radius",x,this),C(this,"rotation",z,this)}},g=D((v=O).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(v.prototype,"boneIndex",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),w=D(v.prototype,"brightness",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=D(v.prototype,"innerAngle",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=D(v.prototype,"innerRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=D(v.prototype,"lightColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec4.create()}}),S=D(v.prototype,"noiseAmplitude",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=D(v.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=D(v.prototype,"outerAngle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=D(v.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.vec3.create()}}),x=D(v.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=D(v.prototype,"rotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.quat.create()}}),p=v))||p)},"./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_=r("./global/utils/index.js"),E=r("./global/math/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=_.meta.type("EveSOFDataHullLightSetTexturedPointLight"),n=_.meta.string,a=_.meta.float,o=_.meta.float,s=_.meta.vector3,l=_.meta.float,u=_.meta.float,c=_.meta.path,i((w=class extends _.meta.Model{constructor(...e){super(...e),T(this,"name",h,this),T(this,"brightness",m,this),T(this,"innerRadius",b,this),T(this,"position",p,this),T(this,"noiseOctaves",v,this),T(this,"radius",g,this),T(this,"texturePath",y,this)}},h=S((d=w).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=S(d.prototype,"brightness",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=S(d.prototype,"innerRadius",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=S(d.prototype,"position",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec3.create()}}),v=S(d.prototype,"noiseOctaves",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=S(d.prototype,"radius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=S(d.prototype,"texturePath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=d))||f)},"./sof/hull/EveSOFDataHullLocator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocator",(function(){return b}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js"),d=r("./global/math/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=f.meta.type("EveSOFDataHullLocator"),n=f.meta.string,a=f.meta.matrix4,i((c=class extends f.meta.Model{constructor(...e){super(...e),h(this,"name",l,this),h(this,"transform",u,this)}},l=m((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=m(s.prototype,"transform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.mat4.create()}}),o=s))||o)},"./sof/hull/EveSOFDataHullLocatorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocatorSet",(function(){return m}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=f.meta.type("EveSOFDataHullLocatorSet"),n=f.meta.string,a=f.meta.list("EveSOFDataTransform"),i((c=class extends f.meta.Model{constructor(...e){super(...e),d(this,"name",l,this),d(this,"locators",u,this)}},l=h((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=h(s.prototype,"locators",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./sof/hull/EveSOFDataHullPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSet",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=S.meta.type("EveSOFDataHullPlaneSet"),n=S.meta.string,a=S.meta.uint,o=S.meta.list("EveSOFDataHullPlaneSetItem"),s=S.meta.path,l=S.meta.path,u=S.meta.path,c=S.meta.boolean,f=S.meta.notImplemented,d=S.meta.uint,i((T=class extends S.meta.Model{constructor(...e){super(...e),j(this,"name",b,this),j(this,"atlasSize",p,this),j(this,"items",v,this),j(this,"layer1MapResPath",g,this),j(this,"layer2MapResPath",y,this),j(this,"maskMapResPath",w,this),j(this,"skinned",_,this),j(this,"usage",E,this)}},b=R((m=T).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=R(m.prototype,"atlasSize",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(m.prototype,"items",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=R(m.prototype,"layer1MapResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=R(m.prototype,"layer2MapResPath",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=R(m.prototype,"maskMapResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=R(m.prototype,"skinned",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=R(m.prototype,"usage",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h)},"./sof/hull/EveSOFDataHullPlaneSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return V}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B=r("./global/utils/index.js"),N=r("./global/math/index.js");function k(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function U(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var V=(i=B.meta.type("EveSOFDataHullPlaneSetItem"),n=B.meta.float,a=B.meta.float,o=B.meta.uint,s=B.meta.uint,l=B.meta.color,u=B.meta.float,c=B.meta.uint,f=B.meta.vector4,d=B.meta.vector4,h=B.meta.vector4,m=B.meta.vector4,b=B.meta.uint,p=B.meta.vector3,v=B.meta.float,g=B.meta.quaternion,y=B.meta.vector3,i((G=class extends B.meta.Model{constructor(...e){super(...e),k(this,"blinkRate",E,this),k(this,"blinkPhase",T,this),k(this,"blinkMode",S,this),k(this,"boneIndex",j,this),k(this,"color",R,this),k(this,"dutyCycle",P,this),k(this,"groupIndex",x,this),k(this,"layer1Scroll",z,this),k(this,"layer1Transform",O,this),k(this,"layer2Scroll",A,this),k(this,"layer2Transform",M,this),k(this,"maskMapAtlasIndex",C,this),k(this,"position",D,this),k(this,"rate",I,this),k(this,"rotation",L,this),k(this,"scaling",F,this)}},E=U((_=G).prototype,"blinkRate",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(_.prototype,"blinkPhase",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=U(_.prototype,"blinkMode",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=U(_.prototype,"boneIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=U(_.prototype,"color",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),P=U(_.prototype,"dutyCycle",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=U(_.prototype,"groupIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),z=U(_.prototype,"layer1Scroll",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),O=U(_.prototype,"layer1Transform",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),A=U(_.prototype,"layer2Scroll",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),M=U(_.prototype,"layer2Transform",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),C=U(_.prototype,"maskMapAtlasIndex",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=U(_.prototype,"position",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.create()}}),I=U(_.prototype,"rate",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=U(_.prototype,"rotation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.quat.create()}}),F=U(_.prototype,"scaling",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.fromValues(1,1,1)}}),w=_))||w)},"./sof/hull/EveSOFDataHullSoundEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSoundEmitter",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=b.meta.type("EveSOFDataHullSoundEmitter"),n=b.meta.string,a=b.meta.string,o=b.meta.vector3,s=b.meta.quaternion,i((m=class extends b.meta.Model{constructor(...e){super(...e),v(this,"name",c,this),v(this,"prefix",f,this),v(this,"position",d,this),v(this,"rotation",h,this)}},c=g((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=g(u.prototype,"prefix",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(u.prototype,"position",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.create()}}),h=g(u.prototype,"rotation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.quat.create()}}),l=u))||l)},"./sof/hull/EveSOFDataHullSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSet",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=y.meta.type("EveSOFDataHullSpotlightSet"),n=y.meta.string,a=y.meta.path,o=y.meta.path,s=y.meta.list("EveSOFDataHullSpotlightSetItem"),l=y.meta.boolean,u=y.meta.float,i((g=class extends y.meta.Model{constructor(...e){super(...e),w(this,"name",d,this),w(this,"coneTextureResPath",h,this),w(this,"glowTextureResPath",m,this),w(this,"items",b,this),w(this,"skinned",p,this),w(this,"zOffset",v,this)}},d=_((f=g).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=_(f.prototype,"coneTextureResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=_(f.prototype,"glowTextureResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=_(f.prototype,"items",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=_(f.prototype,"skinned",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=_(f.prototype,"zOffset",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c)},"./sof/hull/EveSOFDataHullSpotlightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T=r("./global/utils/index.js"),S=r("./global/math/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=T.meta.type("EveSOFDataHullSpotlightSetItem"),n=T.meta.uint,a=T.meta.boolean,o=T.meta.float,s=T.meta.float,l=T.meta.uint,u=T.meta.float,c=T.meta.vector3,f=T.meta.matrix4,i((E=class extends T.meta.Model{constructor(...e){super(...e),j(this,"boneIndex",m,this),j(this,"boosterGainInfluence",b,this),j(this,"coneIntensity",p,this),j(this,"flareIntensity",v,this),j(this,"groupIndex",g,this),j(this,"spriteIntensity",y,this),j(this,"spriteScale",w,this),j(this,"transform",_,this)}},m=R((h=E).prototype,"boneIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=R(h.prototype,"boosterGainInfluence",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=R(h.prototype,"coneIntensity",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(h.prototype,"flareIntensity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=R(h.prototype,"groupIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=R(h.prototype,"spriteIntensity",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=R(h.prototype,"spriteScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.vec3.fromValues(1,1,1)}}),_=R(h.prototype,"transform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.mat4.create()}}),d=h))||d)},"./sof/hull/EveSOFDataHullSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("EveSOFDataHullSpriteLineSet"),n=b.meta.string,a=b.meta.list("EveSOFDataHullSpriteLineSetItem"),o=b.meta.boolean,s=b.meta.string,i((m=class extends b.meta.Model{constructor(...e){super(...e),p(this,"name",c,this),p(this,"items",f,this),p(this,"skinned",d,this),p(this,"visibilityGroup",h,this)}},c=v((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v(u.prototype,"skinned",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=v(u.prototype,"visibilityGroup",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)},"./sof/hull/EveSOFDataHullSpriteLineSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return k}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F=r("./global/utils/index.js"),G=r("./global/math/index.js");function B(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function N(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=(i=F.meta.type("EveSOFDataHullSpriteLineSetItem"),n=F.meta.float,a=F.meta.float,o=F.meta.float,s=F.meta.uint,l=F.meta.uint,u=F.meta.float,c=F.meta.uint,f=F.meta.float,d=F.meta.boolean,h=F.meta.float,m=F.meta.float,b=F.meta.vector3,p=F.meta.quaternion,v=F.meta.vector3,g=F.meta.float,i((L=class extends F.meta.Model{constructor(...e){super(...e),B(this,"blinkPhase",_,this),B(this,"blinkPhaseShift",E,this),B(this,"blinkRate",T,this),B(this,"boneIndex",S,this),B(this,"colorType",j,this),B(this,"falloff",R,this),B(this,"groupIndex",P,this),B(this,"intensity",x,this),B(this,"isCircle",z,this),B(this,"maxScale",O,this),B(this,"minScale",A,this),B(this,"position",M,this),B(this,"rotation",C,this),B(this,"scaling",D,this),B(this,"spacing",I,this)}},_=N((w=L).prototype,"blinkPhase",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=N(w.prototype,"blinkPhaseShift",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=N(w.prototype,"blinkRate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=N(w.prototype,"boneIndex",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),j=N(w.prototype,"colorType",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=N(w.prototype,"falloff",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=N(w.prototype,"groupIndex",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),x=N(w.prototype,"intensity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=N(w.prototype,"isCircle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=N(w.prototype,"maxScale",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=N(w.prototype,"minScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=N(w.prototype,"position",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.vec3.create()}}),C=N(w.prototype,"rotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.quat.create()}}),D=N(w.prototype,"scaling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.vec3.fromValues(1,1,1)}}),I=N(w.prototype,"spacing",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=w))||y)},"./sof/hull/EveSOFDataHullSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSet",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("EveSOFDataHullSpriteSet"),n=b.meta.string,a=b.meta.list("EveSOFDataHullSpriteSetItem"),o=b.meta.boolean,s=b.meta.string,i((m=class extends b.meta.Model{constructor(...e){super(...e),p(this,"name",c,this),p(this,"items",f,this),p(this,"skinned",d,this),p(this,"visibilityGroup",h,this)}},c=v((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"items",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v(u.prototype,"skinned",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=v(u.prototype,"visibilityGroup",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)},"./sof/hull/EveSOFDataHullSpriteSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return A}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./global/utils/index.js"),x=r("./global/math/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=P.meta.type("EveSOFDataHullSpriteSetItem"),n=P.meta.float,a=P.meta.float,o=P.meta.uint,s=P.meta.uint,l=P.meta.float,u=P.meta.uint,c=P.meta.float,f=P.meta.float,d=P.meta.float,h=P.meta.vector3,i((R=class extends P.meta.Model{constructor(...e){super(...e),z(this,"blinkPhase",p,this),z(this,"blinkRate",v,this),z(this,"boneIndex",g,this),z(this,"colorType",y,this),z(this,"falloff",w,this),z(this,"groupIndex",_,this),z(this,"intensity",E,this),z(this,"maxScale",T,this),z(this,"minScale",S,this),z(this,"position",j,this)}},p=O((b=R).prototype,"blinkPhase",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=O(b.prototype,"blinkRate",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=O(b.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=O(b.prototype,"colorType",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=O(b.prototype,"falloff",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=O(b.prototype,"groupIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=O(b.prototype,"intensity",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=O(b.prototype,"maxScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=O(b.prototype,"minScale",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=O(b.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x.vec3.create()}}),m=b))||m)},"./sof/hull/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/hull/EveSOFDataHull.js");r.d(t,"EveSOFDataHull",(function(){return i.EveSOFDataHull}));var n=r("./sof/hull/EveSOFDataHullAnimation.js");r.d(t,"EveSOFDataHullAnimation",(function(){return n.EveSOFDataHullAnimation}));var a=r("./sof/hull/EveSOFDataHullArea.js");r.d(t,"EveSOFDataHullArea",(function(){return a.EveSOFDataHullArea}));var o=r("./sof/hull/EveSOFDataHullBanner.js");r.d(t,"EveSOFDataHullBanner",(function(){return o.EveSOFDataHullBanner}));var s=r("./sof/hull/EveSOFDataHullBannerLight.js");r.d(t,"EveSOFDataHullBannerLight",(function(){return s.EveSOFDataHullBannerLight}));var l=r("./sof/hull/EveSOFDataHullBooster.js");r.d(t,"EveSOFDataHullBooster",(function(){return l.EveSOFDataHullBooster}));var u=r("./sof/hull/EveSOFDataHullBoosterItem.js");r.d(t,"EveSOFDataHullBoosterItem",(function(){return u.EveSOFDataHullBoosterItem}));var c=r("./sof/hull/EveSOFDataHullChild.js");r.d(t,"EveSOFDataHullChild",(function(){return c.EveSOFDataHullChild}));var f=r("./sof/hull/EveSOFDataHullController.js");r.d(t,"EveSOFDataHullController",(function(){return f.EveSOFDataHullController}));var d=r("./sof/hull/EveSOFDataHullDecalSet.js");r.d(t,"EveSOFDataHullDecalSet",(function(){return d.EveSOFDataHullDecalSet}));var h=r("./sof/hull/EveSOFDataHullDecalSetItem.js");r.d(t,"EveSOFDataHullDecalSetItem",(function(){return h.EveSOFDataHullDecalSetItem}));var m=r("./sof/hull/EveSOFDataHullHazeSet.js");r.d(t,"EveSOFDataHullHazeSet",(function(){return m.EveSOFDataHullHazeSet}));var b=r("./sof/hull/EveSOFDataHullHazeSetItem.js");r.d(t,"EveSOFDataHullHazeSetItem",(function(){return b.EveSOFDataHullHazeSetItem}));var p=r("./sof/hull/EveSOFDataHullLightSet.js");r.d(t,"EveSOFDataHullLightSet",(function(){return p.EveSOFDataHullLightSet}));var v=r("./sof/hull/EveSOFDataHullLightSetItem.js");r.d(t,"EveSOFDataHullLightSetItem",(function(){return v.EveSOFDataHullLightSetItem}));var g=r("./sof/hull/EveSOFDataHullLightSetSpotLight.js");r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return g.EveSOFDataHullLightSetSpotLight}));var y=r("./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js");r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return y.EveSOFDataHullLightSetTexturedPointLight}));var w=r("./sof/hull/EveSOFDataHullLocator.js");r.d(t,"EveSOFDataHullLocator",(function(){return w.EveSOFDataHullLocator}));var _=r("./sof/hull/EveSOFDataHullLocatorSet.js");r.d(t,"EveSOFDataHullLocatorSet",(function(){return _.EveSOFDataHullLocatorSet}));var E=r("./sof/hull/EveSOFDataHullPlaneSet.js");r.d(t,"EveSOFDataHullPlaneSet",(function(){return E.EveSOFDataHullPlaneSet}));var T=r("./sof/hull/EveSOFDataHullPlaneSetItem.js");r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return T.EveSOFDataHullPlaneSetItem}));var S=r("./sof/hull/EveSOFDataHullSoundEmitter.js");r.d(t,"EveSOFDataHullSoundEmitter",(function(){return S.EveSOFDataHullSoundEmitter}));var j=r("./sof/hull/EveSOFDataHullSpotlightSet.js");r.d(t,"EveSOFDataHullSpotlightSet",(function(){return j.EveSOFDataHullSpotlightSet}));var R=r("./sof/hull/EveSOFDataHullSpotlightSetItem.js");r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return R.EveSOFDataHullSpotlightSetItem}));var P=r("./sof/hull/EveSOFDataHullSpriteLineSet.js");r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return P.EveSOFDataHullSpriteLineSet}));var x=r("./sof/hull/EveSOFDataHullSpriteLineSetItem.js");r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return x.EveSOFDataHullSpriteLineSetItem}));var z=r("./sof/hull/EveSOFDataHullSpriteSet.js");r.d(t,"EveSOFDataHullSpriteSet",(function(){return z.EveSOFDataHullSpriteSet}));var O=r("./sof/hull/EveSOFDataHullSpriteSetItem.js");r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return O.EveSOFDataHullSpriteSetItem}))},"./sof/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/faction/index.js");r.d(t,"EveSOFDataFaction",(function(){return i.EveSOFDataFaction})),r.d(t,"EveSOFDataFactionChild",(function(){return i.EveSOFDataFactionChild})),r.d(t,"EveSOFDataFactionColorSet",(function(){return i.EveSOFDataFactionColorSet})),r.d(t,"ErrSOFFactionColorSetTypeUnknown",(function(){return i.ErrSOFFactionColorSetTypeUnknown})),r.d(t,"ErrSOFFactionColorSetTypeNotFound",(function(){return i.ErrSOFFactionColorSetTypeNotFound})),r.d(t,"EveSOFDataFactionPlaneSet",(function(){return i.EveSOFDataFactionPlaneSet})),r.d(t,"EveSOFDataFactionSpotlightSet",(function(){return i.EveSOFDataFactionSpotlightSet})),r.d(t,"EveSOFDataFactionVisibilityGroupSet",(function(){return i.EveSOFDataFactionVisibilityGroupSet}));var n=r("./sof/generic/index.js");r.d(t,"EveSOFDataGeneric",(function(){return n.EveSOFDataGeneric})),r.d(t,"ErrSOFAreaShaderNotFound",(function(){return n.ErrSOFAreaShaderNotFound})),r.d(t,"ErrSOFDecalShaderNotFound",(function(){return n.ErrSOFDecalShaderNotFound})),r.d(t,"ErrSOFMaterialPrefixNotFound",(function(){return n.ErrSOFMaterialPrefixNotFound})),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",(function(){return n.ErrSOFPatternMaterialPrefixNotFound})),r.d(t,"EveSOFDataGenericDamage",(function(){return n.EveSOFDataGenericDamage})),r.d(t,"EveSOFDataGenericDecalShader",(function(){return n.EveSOFDataGenericDecalShader})),r.d(t,"EveSOFDataGenericHullDamage",(function(){return n.EveSOFDataGenericHullDamage})),r.d(t,"EveSOFDataGenericShader",(function(){return n.EveSOFDataGenericShader})),r.d(t,"EveSOFDataGenericString",(function(){return n.EveSOFDataGenericString})),r.d(t,"EveSOFDataGenericSwarm",(function(){return n.EveSOFDataGenericSwarm})),r.d(t,"EveSOFDataGenericVariant",(function(){return n.EveSOFDataGenericVariant})),r.d(t,"EveSOFDataVisibilityGroup",(function(){return n.EveSOFDataVisibilityGroup}));var a=r("./sof/hull/index.js");r.d(t,"EveSOFDataHull",(function(){return a.EveSOFDataHull})),r.d(t,"EveSOFDataHullAnimation",(function(){return a.EveSOFDataHullAnimation})),r.d(t,"EveSOFDataHullArea",(function(){return a.EveSOFDataHullArea})),r.d(t,"EveSOFDataHullBanner",(function(){return a.EveSOFDataHullBanner})),r.d(t,"EveSOFDataHullBannerLight",(function(){return a.EveSOFDataHullBannerLight})),r.d(t,"EveSOFDataHullBooster",(function(){return a.EveSOFDataHullBooster})),r.d(t,"EveSOFDataHullBoosterItem",(function(){return a.EveSOFDataHullBoosterItem})),r.d(t,"EveSOFDataHullChild",(function(){return a.EveSOFDataHullChild})),r.d(t,"EveSOFDataHullController",(function(){return a.EveSOFDataHullController})),r.d(t,"EveSOFDataHullDecalSet",(function(){return a.EveSOFDataHullDecalSet})),r.d(t,"EveSOFDataHullDecalSetItem",(function(){return a.EveSOFDataHullDecalSetItem})),r.d(t,"EveSOFDataHullHazeSet",(function(){return a.EveSOFDataHullHazeSet})),r.d(t,"EveSOFDataHullHazeSetItem",(function(){return a.EveSOFDataHullHazeSetItem})),r.d(t,"EveSOFDataHullLightSet",(function(){return a.EveSOFDataHullLightSet})),r.d(t,"EveSOFDataHullLightSetItem",(function(){return a.EveSOFDataHullLightSetItem})),r.d(t,"EveSOFDataHullLightSetSpotLight",(function(){return a.EveSOFDataHullLightSetSpotLight})),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",(function(){return a.EveSOFDataHullLightSetTexturedPointLight})),r.d(t,"EveSOFDataHullLocator",(function(){return a.EveSOFDataHullLocator})),r.d(t,"EveSOFDataHullLocatorSet",(function(){return a.EveSOFDataHullLocatorSet})),r.d(t,"EveSOFDataHullPlaneSet",(function(){return a.EveSOFDataHullPlaneSet})),r.d(t,"EveSOFDataHullPlaneSetItem",(function(){return a.EveSOFDataHullPlaneSetItem})),r.d(t,"EveSOFDataHullSoundEmitter",(function(){return a.EveSOFDataHullSoundEmitter})),r.d(t,"EveSOFDataHullSpotlightSet",(function(){return a.EveSOFDataHullSpotlightSet})),r.d(t,"EveSOFDataHullSpotlightSetItem",(function(){return a.EveSOFDataHullSpotlightSetItem})),r.d(t,"EveSOFDataHullSpriteLineSet",(function(){return a.EveSOFDataHullSpriteLineSet})),r.d(t,"EveSOFDataHullSpriteLineSetItem",(function(){return a.EveSOFDataHullSpriteLineSetItem})),r.d(t,"EveSOFDataHullSpriteSet",(function(){return a.EveSOFDataHullSpriteSet})),r.d(t,"EveSOFDataHullSpriteSetItem",(function(){return a.EveSOFDataHullSpriteSetItem}));var o=r("./sof/pattern/index.js");r.d(t,"EveSOFDataPattern",(function(){return o.EveSOFDataPattern})),r.d(t,"ErrSOFProjectionNotFound",(function(){return o.ErrSOFProjectionNotFound})),r.d(t,"EveSOFDataPatternLayer",(function(){return o.EveSOFDataPatternLayer})),r.d(t,"EveSOFDataPatternPerHull",(function(){return o.EveSOFDataPatternPerHull})),r.d(t,"EveSOFDataPatternTransform",(function(){return o.EveSOFDataPatternTransform}));var s=r("./sof/race/index.js");r.d(t,"EveSOFDataRace",(function(){return s.EveSOFDataRace})),r.d(t,"EveSOFDataRaceDamage",(function(){return s.EveSOFDataRaceDamage}));var l=r("./sof/shared/index.js");r.d(t,"EveSOFDataArea",(function(){return l.EveSOFDataArea})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return l.ErrSOFAreaTypeUnknown})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return l.ErrSOFAreaTypeNotFound})),r.d(t,"EveSOFDataAreaMaterial",(function(){return l.EveSOFDataAreaMaterial})),r.d(t,"EveSOFDataBooster",(function(){return l.EveSOFDataBooster})),r.d(t,"EveSOFDataBoosterShape",(function(){return l.EveSOFDataBoosterShape})),r.d(t,"EveSOFDataInstancedMesh",(function(){return l.EveSOFDataInstancedMesh})),r.d(t,"EveSOFDataLogo",(function(){return l.EveSOFDataLogo})),r.d(t,"EveSOFDataLogoSet",(function(){return l.EveSOFDataLogoSet})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return l.ErrSOFLogoSetTypeUnknown})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return l.ErrSOFLogoSetTypeNotFound})),r.d(t,"EveSOFDataMaterial",(function(){return l.EveSOFDataMaterial})),r.d(t,"EveSOFDataParameter",(function(){return l.EveSOFDataParameter})),r.d(t,"EveSOFDataTexture",(function(){return l.EveSOFDataTexture})),r.d(t,"EveSOFDataTransform",(function(){return l.EveSOFDataTransform}));var u=r("./sof/EveSOFData.js");r.d(t,"EveSOFData",(function(){return u.EveSOFData})),r.d(t,"ErrSOFDNAFormatInvalid",(function(){return u.ErrSOFDNAFormatInvalid})),r.d(t,"ErrSOFResPathInsertInvalid",(function(){return u.ErrSOFResPathInsertInvalid}));var c=r("./sof/EveSOF.js");r.d(t,"EveSOF",(function(){return c.EveSOF})),r.d(t,"ErrSOFHullNotFound",(function(){return c.ErrSOFHullNotFound})),r.d(t,"ErrSOFFactionNotFound",(function(){return c.ErrSOFFactionNotFound})),r.d(t,"ErrSOFRaceNotFound",(function(){return c.ErrSOFRaceNotFound})),r.d(t,"ErrSOFMaterialNotFound",(function(){return c.ErrSOFMaterialNotFound})),r.d(t,"ErrSOFPatternNotFound",(function(){return c.ErrSOFPatternNotFound}))},"./sof/pattern/EveSOFDataPattern.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPattern",(function(){return y})),r.d(t,"ErrSOFProjectionNotFound",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./core/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=b.meta.type("EveSOFDataPattern"),n=b.meta.string,a=b.meta.struct("EveSOFDataPatternLayer"),o=b.meta.struct("EveSOFDataPatternLayer"),s=b.meta.list("EveSOFDataPatternPerHull"),i((m=class extends b.meta.Model{constructor(...e){super(...e),v(this,"name",c,this),v(this,"layer1",f,this),v(this,"layer2",d,this),v(this,"projections",h,this)}Has(e){return-1!==this.IndexOfProjection(e)}Get(e){var t=this.IndexOfProjection(e);if(-1===t)throw new w({pattern:this.name,projection:e});return{name:this.name,layer1:this.layer1,layer2:this.layer2,transformLayer1:this.projections[t].transformLayer1,transformLayer2:this.projections[t].transformLayer2}}IndexOfProjection(e){for(var t=0;t<this.projections.length;t++)if(this.projections[t].name.toUpperCase()===e.toUpperCase())return t;return-1}},c=g((u=m).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=g(u.prototype,"layer1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g(u.prototype,"layer2",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g(u.prototype,"projections",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l);class w extends p.Tw2Error{constructor(e){super(e,"SOF pattern projection '%projection%' not found for pattern '%pattern%'")}}},"./sof/pattern/EveSOFDataPatternLayer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternLayer",(function(){return x}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=j.meta.type("EveSOFDataPatternLayer"),n=j.meta.boolean,a=j.meta.boolean,o=j.meta.boolean,s=j.meta.boolean,l=j.meta.uint,u=j.meta.uint,c=j.meta.uint,f=j.meta.string,d=j.meta.path,i((S=class extends j.meta.Model{constructor(...e){super(...e),R(this,"isTargetMtl1",b,this),R(this,"isTargetMtl2",p,this),R(this,"isTargetMtl3",v,this),R(this,"isTargetMtl4",g,this),R(this,"materialSource",y,this),R(this,"projectionTypeU",w,this),R(this,"projectionTypeV",_,this),R(this,"textureName",E,this),R(this,"textureResFilePath",T,this)}static ToAddressMode(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}static FromAddressMode(e){switch(e){case 4:return 2;case 3:return 1;default:return 0}}},b=P((m=S).prototype,"isTargetMtl1",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=P(m.prototype,"isTargetMtl2",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=P(m.prototype,"isTargetMtl3",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=P(m.prototype,"isTargetMtl4",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=P(m.prototype,"materialSource",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=P(m.prototype,"projectionTypeU",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=P(m.prototype,"projectionTypeV",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=P(m.prototype,"textureName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=P(m.prototype,"textureResFilePath",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=m))||h)},"./sof/pattern/EveSOFDataPatternPerHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternPerHull",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataPatternPerHull"),n=h.meta.string,a=h.meta.struct("EveSOFDataPatternTransform"),o=h.meta.struct("EveSOFDataPatternTransform"),i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"name",u,this),m(this,"transformLayer1",c,this),m(this,"transformLayer2",f,this)}},u=b((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"transformLayer1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b(l.prototype,"transformLayer2",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s)},"./sof/pattern/EveSOFDataPatternTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternTransform",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=b.meta.type("EveSOFDataPatternTransform"),n=b.meta.boolean,a=b.meta.vector3,o=b.meta.quaternion,s=b.meta.vector3,i((m=class extends b.meta.Model{constructor(...e){super(...e),v(this,"isMirrored",c,this),v(this,"position",f,this),v(this,"rotation",d,this),v(this,"scaling",h,this)}GetTransform(e){return p.mat4.fromRotationTranslationScale(e,this.rotation,this.position,this.scaling)}},c=g((u=m).prototype,"isMirrored",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=g(u.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.create()}}),d=g(u.prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.quat.create()}}),h=g(u.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.fromValues(1,1,1)}}),l=u))||l)},"./sof/pattern/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/pattern/EveSOFDataPattern.js");r.d(t,"EveSOFDataPattern",(function(){return i.EveSOFDataPattern})),r.d(t,"ErrSOFProjectionNotFound",(function(){return i.ErrSOFProjectionNotFound}));var n=r("./sof/pattern/EveSOFDataPatternLayer.js");r.d(t,"EveSOFDataPatternLayer",(function(){return n.EveSOFDataPatternLayer}));var a=r("./sof/pattern/EveSOFDataPatternPerHull.js");r.d(t,"EveSOFDataPatternPerHull",(function(){return a.EveSOFDataPatternPerHull}));var o=r("./sof/pattern/EveSOFDataPatternTransform.js");r.d(t,"EveSOFDataPatternTransform",(function(){return o.EveSOFDataPatternTransform}))},"./sof/race/EveSOFDataRace.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRace",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.type("EveSOFDataRace"),n=h.meta.string,a=h.meta.struct("EveSOFDataBooster"),o=h.meta.struct("EveSOFDataRaceDamage"),i((d=class extends h.meta.Model{constructor(...e){super(...e),m(this,"name",u,this),m(this,"booster",c,this),m(this,"damage",f,this)}},u=b((l=d).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"booster",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b(l.prototype,"damage",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s)},"./sof/race/EveSOFDataRaceDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRaceDamage",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.type("EveSOFDataRaceDamage"),n=b.meta.list("EveSOFDataParameter"),a=b.meta.list("EveSOFDataTexture"),o=b.meta.list("EveSOFDataParameter"),s=b.meta.list("EveSOFDataTexture"),i((m=class extends b.meta.Model{constructor(...e){super(...e),p(this,"armorImpactParameters",c,this),p(this,"armorImpactTextures",f,this),p(this,"shieldImpactParameters",d,this),p(this,"shieldImpactTextures",h,this)}AssignArmor(e={}){e.parameters=e.parameters||{},e.textures=e.textures||{};for(var t=0;t<this.armorImpactParameters.length;t++)this.armorImpactParameters[t].Assign(e.parameters);for(var r=0;r<this.armorImpactTextures.length;r++)this.armorImpactTextures[r].Assign(e.textures);return e}AssignShield(e={}){e.parameters=e.parameters||{},e.textures=e.textures||{};for(var t=0;t<this.shieldImpactParameters.length;t++)this.shieldImpactParameters[t].Assign(e.parameters);for(var r=0;r<this.shieldImpactTextures.length;r++)this.shieldImpactTextures[r].Assign(e.textures);return e}},c=v((u=m).prototype,"armorImpactParameters",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=v(u.prototype,"armorImpactTextures",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=v(u.prototype,"shieldImpactParameters",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=v(u.prototype,"shieldImpactTextures",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l)},"./sof/race/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/race/EveSOFDataRace.js");r.d(t,"EveSOFDataRace",(function(){return i.EveSOFDataRace}));var n=r("./sof/race/EveSOFDataRaceDamage.js");r.d(t,"EveSOFDataRaceDamage",(function(){return n.EveSOFDataRaceDamage}))},"./sof/shared/EveSOFDataArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataArea",(function(){return ie})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return ne})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return ae}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$=r("./global/utils/index.js"),ee=r("./core/index.js");function te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function re(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ie=(i=$.meta.type("EveSOFDataArea"),n=$.meta.struct("EveSOFDataAreaMaterial"),a=$.meta.struct("EveSOFDataAreaMaterial"),o=$.meta.struct("EveSOFDataAreaMaterial"),s=$.meta.struct("EveSOFDataAreaMaterial"),l=$.meta.struct("EveSOFDataAreaMaterial"),u=$.meta.struct("EveSOFDataAreaMaterial"),c=$.meta.struct("EveSOFDataAreaMaterial"),f=$.meta.struct("EveSOFDataAreaMaterial"),d=$.meta.struct("EveSOFDataAreaMaterial"),h=$.meta.struct("EveSOFDataAreaMaterial"),m=$.meta.struct("EveSOFDataAreaMaterial"),b=$.meta.struct("EveSOFDataAreaMaterial"),p=$.meta.struct("EveSOFDataAreaMaterial"),v=$.meta.struct("EveSOFDataAreaMaterial"),g=$.meta.struct("EveSOFDataAreaMaterial"),y=$.meta.struct("EveSOFDataAreaMaterial"),w=$.meta.struct("EveSOFDataAreaMaterial"),_=$.meta.struct("EveSOFDataAreaMaterial"),E=$.meta.struct("EveSOFDataAreaMaterial"),T=$.meta.struct("EveSOFDataAreaMaterial"),S=$.meta.struct("EveSOFDataAreaMaterial"),j=$.meta.struct("EveSOFDataAreaMaterial"),R=$.meta.struct("EveSOFDataAreaMaterial"),i((J=class extends $.meta.Model{constructor(...e){super(...e),te(this,"Black",z,this),te(this,"Blue",O,this),te(this,"Booster",A,this),te(this,"Cyan",M,this),te(this,"Darkhull",C,this),te(this,"Fire",D,this),te(this,"Glass",I,this),te(this,"Green",L,this),te(this,"Hull",F,this),te(this,"Killmark",G,this),te(this,"Monument",B,this),te(this,"Orange",N,this),te(this,"Ornament",k,this),te(this,"Primary",U,this),te(this,"Reactor",V,this),te(this,"Red",H,this),te(this,"Rock",q,this),te(this,"Sails",W,this),te(this,"SimplePrimary",Y,this),te(this,"Secondary",K,this),te(this,"Tertiary",X,this),te(this,"White",Q,this),te(this,"Yellow",Z,this),this._typesByIndex=[]}GetTypeByIndex(e){var t=this._typesByIndex[e];return this.hasOwnProperty(t)?this[t]:null}Has(e){return!!this.GetTypeByIndex(e)}Get(e){if(!this.Has(e))throw new ae({type:e});return this.GetTypeByIndex(e)}static onAfterBlackPropertyReader(e,t){t._typesByIndex.push(e)}},z=re((x=J).prototype,"Black",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=re(x.prototype,"Blue",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=re(x.prototype,"Booster",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=re(x.prototype,"Cyan",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=re(x.prototype,"Darkhull",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=re(x.prototype,"Fire",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=re(x.prototype,"Glass",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=re(x.prototype,"Green",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=re(x.prototype,"Hull",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=re(x.prototype,"Killmark",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=re(x.prototype,"Monument",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=re(x.prototype,"Orange",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=re(x.prototype,"Ornament",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=re(x.prototype,"Primary",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=re(x.prototype,"Reactor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=re(x.prototype,"Red",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=re(x.prototype,"Rock",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=re(x.prototype,"Sails",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=re(x.prototype,"SimplePrimary",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=re(x.prototype,"Secondary",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=re(x.prototype,"Tertiary",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=re(x.prototype,"White",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=re(x.prototype,"Yellow",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=x))||P);class ne extends ee.Tw2Error{constructor(e){super(e,"SOF area type unknown (%type%)"),this.unknownType=!0}}class ae extends ee.Tw2Error{constructor(e){super(e,"SOF area type not found (%type%)")}}},"./sof/shared/EveSOFDataAreaMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataAreaMaterial",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=y.meta.type("EveSOFDataAreaMaterial"),n=y.meta.string,a=y.meta.uint,o=y.meta.string,s=y.meta.string,l=y.meta.string,u=y.meta.string,i((g=class extends y.meta.Model{constructor(...e){super(...e),w(this,"name",d,this),w(this,"colorType",h,this),w(this,"material1",m,this),w(this,"material2",b,this),w(this,"material3",p,this),w(this,"material4",v,this)}Assign(e={}){return e.colorType=this.colorType,this.material1&&(e.material1=this.material1),this.material2&&(e.material2=this.material2),this.material3&&(e.material3=this.material3),this.material4&&(e.material4=this.material4),e}},d=_((f=g).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=_(f.prototype,"colorType",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=_(f.prototype,"material1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=_(f.prototype,"material2",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=_(f.prototype,"material3",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=_(f.prototype,"material4",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=f))||c)},"./sof/shared/EveSOFDataBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBooster",(function(){return ue}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae=r("./global/utils/index.js"),oe=r("./global/math/index.js");function se(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function le(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ue=(i=ae.meta.type("EveSOFDataBooster"),n=ae.meta.color,a=ae.meta.float,o=ae.meta.path,s=ae.meta.path,l=ae.meta.color,u=ae.meta.float,c=ae.meta.float,f=ae.meta.color,d=ae.meta.float,h=ae.meta.float,m=ae.meta.float,b=ae.meta.color,p=ae.meta.float,v=ae.meta.struct("EveSOFDataBoosterShape"),g=ae.meta.struct("EveSOFDataBoosterShape"),y=ae.meta.uint,w=ae.meta.uint,_=ae.meta.path,E=ae.meta.uint,T=ae.meta.float,S=ae.meta.color,j=ae.meta.vector4,R=ae.meta.color,P=ae.meta.color,x=ae.meta.struct("EveSOFDataBoosterShape"),z=ae.meta.struct("EveSOFDataBoosterShape"),i((ne=class extends ae.meta.Model{constructor(...e){super(...e),se(this,"glowColor",M,this),se(this,"glowScale",C,this),se(this,"gradient0ResPath",D,this),se(this,"gradient1ResPath",I,this),se(this,"haloColor",L,this),se(this,"haloScaleX",F,this),se(this,"haloScaleY",G,this),se(this,"lightColor",B,this),se(this,"lightFlickerAmplitude",N,this),se(this,"lightFlickerFrequency",k,this),se(this,"lightRadius",U,this),se(this,"lightWarpColor",V,this),se(this,"lightWarpRadius",H,this),se(this,"shape0",q,this),se(this,"shape1",W,this),se(this,"shapeAtlasCount",Y,this),se(this,"shapeAtlasHeight",K,this),se(this,"shapeAtlasResPath",X,this),se(this,"shapeAtlasWidth",Q,this),se(this,"symHaloScale",Z,this),se(this,"trailColor",J,this),se(this,"trailSize",$,this),se(this,"warpGlowColor",ee,this),se(this,"warpHalpColor",te,this),se(this,"warpShape0",re,this),se(this,"warpShape1",ie,this)}get warpHaloColor(){return this.warpHalpColor}set warpHaloColor(e){this.warpHalpColor=e}},M=le((A=ne).prototype,"glowColor",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),C=le(A.prototype,"glowScale",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=le(A.prototype,"gradient0ResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=le(A.prototype,"gradient1ResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=le(A.prototype,"haloColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),F=le(A.prototype,"haloScaleX",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=le(A.prototype,"haloScaleY",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=le(A.prototype,"lightColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),N=le(A.prototype,"lightFlickerAmplitude",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=le(A.prototype,"lightFlickerFrequency",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=le(A.prototype,"lightRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=le(A.prototype,"lightWarpColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),H=le(A.prototype,"lightWarpRadius",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=le(A.prototype,"shape0",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=le(A.prototype,"shape1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=le(A.prototype,"shapeAtlasCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=le(A.prototype,"shapeAtlasHeight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=le(A.prototype,"shapeAtlasResPath",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Q=le(A.prototype,"shapeAtlasWidth",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=le(A.prototype,"symHaloScale",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=le(A.prototype,"trailColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),$=le(A.prototype,"trailSize",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),ee=le(A.prototype,"warpGlowColor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),te=le(A.prototype,"warpHalpColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oe.vec4.create()}}),re=le(A.prototype,"warpShape0",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=le(A.prototype,"warpShape1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=A))||O)},"./sof/shared/EveSOFDataBoosterShape.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBoosterShape",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js"),w=r("./global/math/index.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T=(i=y.meta.type("EveSOFDataBoosterShape"),n=y.meta.color,a=y.meta.vector4,o=y.meta.vector4,s=y.meta.vector4,l=y.meta.float,u=y.meta.float,i((g=class extends y.meta.Model{constructor(...e){super(...e),_(this,"color",d,this),_(this,"noiseAmplitureEnd",h,this),_(this,"noiseAmplitureStart",m,this),_(this,"noiseFrequency",b,this),_(this,"noiseFunction",p,this),_(this,"noiseSpeed",v,this)}get noiseAmplitudeEnd(){return this.noiseAmplitureEnd}get noiseAmplitudeStart(){return this.noiseAmplitureStart}},d=E((f=g).prototype,"color",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),h=E(f.prototype,"noiseAmplitureEnd",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),m=E(f.prototype,"noiseAmplitureStart",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),b=E(f.prototype,"noiseFrequency",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.vec4.create()}}),p=E(f.prototype,"noiseFunction",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=E(f.prototype,"noiseSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c)},"./sof/shared/EveSOFDataInstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataInstancedMesh",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x=r("./global/utils/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=x.meta.type("EveSOFDataInstancedMeshInstanceReader"),n=x.meta.vector,i((l=class e extends x.meta.Model{constructor(...e){super(...e),z(this,"data",s,this)}static blackStruct(t){var r=new e;return r.data=t.ReadF32Array(11),r}},s=O((o=l).prototype,"data",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=o))||a),M=(u=x.meta.type("EveSOFDataInstancedMesh"),c=x.meta.string,f=x.meta.uint,d=x.meta.todo("Figure out constants"),h=x.meta.path,m=x.meta.list(A),b=x.meta.uint,p=x.meta.string,v=x.meta.list("EveSOFDataTexture"),u((P=class extends x.meta.Model{constructor(...e){super(...e),z(this,"name",w,this),z(this,"displayModifier",_,this),z(this,"geometryResPath",E,this),z(this,"instances",T,this),z(this,"lowestLodVisible",S,this),z(this,"shader",j,this),z(this,"textures",R,this)}AssignTextures(e={}){for(var t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}},w=O((y=P).prototype,"name",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=O(y.prototype,"displayModifier",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=O(y.prototype,"geometryResPath",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=O(y.prototype,"instances",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=O(y.prototype,"lowestLodVisible",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=O(y.prototype,"shader",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=O(y.prototype,"textures",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=y))||g)},"./sof/shared/EveSOFDataLogo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogo",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("EveSOFDataLogo"),n=u.meta.list("EveSOFDataTexture"),i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="textures",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}Assign(e={}){return e.textures=this.AssignTextures(e.textures),e}AssignTextures(e={}){for(var t=0;t<this.textures.length;t++)this.textures[t].Assign(e);return e}},c=(o=l).prototype,f="textures",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./sof/shared/EveSOFDataLogoSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogoSet",(function(){return E})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return T})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return S}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./core/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=g.meta.type("EveSOFDataLogoSet"),n=g.meta.struct("EveSOFDataLogo"),a=g.meta.struct("EveSOFDataLogo"),o=g.meta.struct("EveSOFDataLogo"),s=g.meta.struct("EveSOFDataLogo"),l=g.meta.struct("EveSOFDataLogo"),i((v=p=class e extends g.meta.Model{constructor(...e){super(...e),w(this,"Marking_01",f,this),w(this,"Marking_02",d,this),w(this,"Primary",h,this),w(this,"Secondary",m,this),w(this,"Tertiary",b,this)}Has(t){var r=e.LogoType[t];if(void 0===r)throw new T({type:t});return!!this[r]}Get(t){if(!this.Has(t))throw new S({type:t});return this[e.LogoType[t]]}},p.LogoType=["Primary","Secondary","Tertiary","Marking_01","Marking_02"],f=_((c=v).prototype,"Marking_01",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_(c.prototype,"Marking_02",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_(c.prototype,"Primary",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(c.prototype,"Secondary",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=_(c.prototype,"Tertiary",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=c))||u);class T extends y.Tw2Error{constructor(e){super(e,"SOF logo set type unknown (%type%)"),this.unknownType=!0}}class S extends y.Tw2Error{constructor(e){super(e,"SOF logo set type not found (%type%)")}}},"./sof/shared/EveSOFDataMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataMaterial",(function(){return m}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=f.meta.type("EveSOFDataMaterial"),n=f.meta.string,a=f.meta.list("EveSOFDataParameter"),i((c=class extends f.meta.Model{constructor(...e){super(...e),d(this,"name",l,this),d(this,"parameters",u,this)}AssignParameters(e={},t){for(var r=0;r<this.parameters.length;r++)this.parameters[r].Assign(e,t);return e}},l=h((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=h(s.prototype,"parameters",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./sof/shared/EveSOFDataParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataParameter",(function(){return b}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js"),d=r("./global/math/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=f.meta.type("EveSOFDataParameter"),n=f.meta.string,a=f.meta.vector4,i((c=class extends f.meta.Model{constructor(...e){super(...e),h(this,"name",l,this),h(this,"value",u,this)}Assign(e={},t){return e[t?t+this.name:this.name]=Array.from(this.value),e}},l=m((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=m(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.vec4.create()}}),o=s))||o)},"./sof/shared/EveSOFDataTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTexture",(function(){return m}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=f.meta.type("EveSOFDataTexture"),n=f.meta.string,a=f.meta.path,i((c=class extends f.meta.Model{constructor(...e){super(...e),d(this,"name",l,this),d(this,"resFilePath",u,this)}Assign(e={}){return e[this.name]=this.resFilePath,e}},l=h((s=c).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=h(s.prototype,"resFilePath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=s))||o)},"./sof/shared/EveSOFDataTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTransform",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/math/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=b.meta.type("EveSOFDataTransform"),n=b.meta.uint,a=b.meta.vector3,o=b.meta.quaternion,s=b.meta.vector3,i((m=class extends b.meta.Model{constructor(...e){super(...e),v(this,"boneIndex",c,this),v(this,"position",f,this),v(this,"rotation",d,this),v(this,"scaling",h,this)}GetTransform(e){return p.mat4.fromRotationTranslationScale(e,this.rotation,this.translation,this.scaling)}},c=g((u=m).prototype,"boneIndex",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),f=g(u.prototype,"position",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.create()}}),d=g(u.prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.quat.create()}}),h=g(u.prototype,"scaling",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.vec3.fromValues(1,1,1)}}),l=u))||l)},"./sof/shared/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./sof/shared/EveSOFDataArea.js");r.d(t,"EveSOFDataArea",(function(){return i.EveSOFDataArea})),r.d(t,"ErrSOFAreaTypeUnknown",(function(){return i.ErrSOFAreaTypeUnknown})),r.d(t,"ErrSOFAreaTypeNotFound",(function(){return i.ErrSOFAreaTypeNotFound}));var n=r("./sof/shared/EveSOFDataAreaMaterial.js");r.d(t,"EveSOFDataAreaMaterial",(function(){return n.EveSOFDataAreaMaterial}));var a=r("./sof/shared/EveSOFDataBooster.js");r.d(t,"EveSOFDataBooster",(function(){return a.EveSOFDataBooster}));var o=r("./sof/shared/EveSOFDataBoosterShape.js");r.d(t,"EveSOFDataBoosterShape",(function(){return o.EveSOFDataBoosterShape}));var s=r("./sof/shared/EveSOFDataInstancedMesh.js");r.d(t,"EveSOFDataInstancedMesh",(function(){return s.EveSOFDataInstancedMesh}));var l=r("./sof/shared/EveSOFDataLogo.js");r.d(t,"EveSOFDataLogo",(function(){return l.EveSOFDataLogo}));var u=r("./sof/shared/EveSOFDataLogoSet.js");r.d(t,"EveSOFDataLogoSet",(function(){return u.EveSOFDataLogoSet})),r.d(t,"ErrSOFLogoSetTypeUnknown",(function(){return u.ErrSOFLogoSetTypeUnknown})),r.d(t,"ErrSOFLogoSetTypeNotFound",(function(){return u.ErrSOFLogoSetTypeNotFound}));var c=r("./sof/shared/EveSOFDataMaterial.js");r.d(t,"EveSOFDataMaterial",(function(){return c.EveSOFDataMaterial}));var f=r("./sof/shared/EveSOFDataParameter.js");r.d(t,"EveSOFDataParameter",(function(){return f.EveSOFDataParameter}));var d=r("./sof/shared/EveSOFDataTexture.js");r.d(t,"EveSOFDataTexture",(function(){return d.EveSOFDataTexture}));var h=r("./sof/shared/EveSOFDataTransform.js");r.d(t,"EveSOFDataTransform",(function(){return h.EveSOFDataTransform}))},"./unsupported/AudEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEmitter",(function(){return p}));var i,n,a,o,s,l,u=r("./global/utils/index.js");var c,f,d,h,m,b,p=(i=u.meta.type("AudEmitter",!0),n=u.meta.string,i((l=class extends u.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="name",n=this,(i=s)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},c=(o=l).prototype,f="name",d=[n],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},b={},Object.keys(h).forEach((function(e){b[e]=h[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=d.slice().reverse().reduce((function(e,t){return t(c,f,e)||e}),b),m&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(m):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(c,f,b),b=null),s=b,a=o))||a)},"./unsupported/core/Tr2DistanceTracker.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2DistanceTracker",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./global/math/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.notImplemented,n=p.meta.type("Tr2DistanceTracker"),a=p.meta.string,o=p.meta.vector3,s=p.meta.vector3,l=p.meta.float,i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),g(this,"name",f,this),g(this,"direction",d,this),g(this,"targetPosition",h,this),g(this,"value",m,this)}},f=y((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y(c.prototype,"direction",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),h=y(c.prototype,"targetPosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.vec3.create()}}),m=y(c.prototype,"value",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/core/TriObserverLocal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriObserverLocal",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./global/math/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=m.meta.notImplemented,n=m.meta.type("TriObserverLocal"),a=m.meta.string,o=m.meta.vector3,s=m.meta.struct(),i(l=n((h=class extends m.meta.Model{constructor(...e){super(...e),p(this,"name",c,this),p(this,"front",f,this),p(this,"observer",d,this)}},c=v((u=h).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"front",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),d=v(u.prototype,"observer",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l)||l)},"./unsupported/core/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/lighting/index.js");r.d(t,"Tr2SpotLight",(function(){return i.Tr2SpotLight})),r.d(t,"EvePointLightBatch",(function(){return i.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return i.Tr2PointLight})),r.d(t,"Tr2ShLightingManager",(function(){return i.Tr2ShLightingManager}));var n=r("./unsupported/core/mesh/index.js");r.d(t,"Tr2MeshLod",(function(){return n.Tr2MeshLod}));var a=r("./unsupported/core/parameter/index.js");r.d(t,"Tr2ExternalParameter",(function(){return a.Tr2ExternalParameter})),r.d(t,"Tr2Texture2dLodParameter",(function(){return a.Tr2Texture2dLodParameter}));var o=r("./unsupported/core/post/index.js");r.d(t,"Tr2PostProcess",(function(){return o.Tr2PostProcess})),r.d(t,"Tr2PostProcess2",(function(){return o.Tr2PostProcess2})),r.d(t,"Tr2PPBloomEffect",(function(){return o.Tr2PPBloomEffect})),r.d(t,"Tr2PPDesaturateEffect",(function(){return o.Tr2PPDesaturateEffect})),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return o.Tr2PPDynamicExposureEffect})),r.d(t,"Tr2PPFadeEffect",(function(){return o.Tr2PPFadeEffect})),r.d(t,"Tr2PPFidelityFXEffect",(function(){return o.Tr2PPFidelityFXEffect})),r.d(t,"Tr2PPFilmGrainEffect",(function(){return o.Tr2PPFilmGrainEffect})),r.d(t,"Tr2PPFogEffect",(function(){return o.Tr2PPFogEffect})),r.d(t,"Tr2PPGodRaysEffect",(function(){return o.Tr2PPGodRaysEffect})),r.d(t,"Tr2PPLutEffect",(function(){return o.Tr2PPLutEffect})),r.d(t,"Tr2PPSignalLossEffect",(function(){return o.Tr2PPSignalLossEffect})),r.d(t,"Tr2PPVignetteEffect",(function(){return o.Tr2PPVignetteEffect}));var s=r("./unsupported/core/resource/index.js");r.d(t,"Tr2LodResource",(function(){return s.Tr2LodResource}));var l=r("./unsupported/core/value/index.js");r.d(t,"TriMatrix",(function(){return l.TriMatrix}));var u=r("./unsupported/core/Tr2DistanceTracker.js");r.d(t,"Tr2DistanceTracker",(function(){return u.Tr2DistanceTracker}));var c=r("./unsupported/core/TriObserverLocal.js");r.d(t,"TriObserverLocal",(function(){return c.TriObserverLocal}))},"./unsupported/core/lighting/Tr2PointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePointLightBatch",(function(){return I})),r.d(t,"Tr2PointLight",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z=r("./global/utils/index.js"),O=r("./global/math/index.js"),A=r("./global/index.js"),M=r("./core/batch/index.js");function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}class I extends M.Tw2RenderBatch{constructor(...e){super(...e),this.light=null}Commit(e){this.light.Render(e)}}var L=(i=z.meta.notImplemented,n=z.meta.type("Tr2PointLight"),a=z.meta.string,o=z.meta.uint,s=z.meta.float,l=z.meta.color,u=z.meta.float,c=z.meta.float,f=z.meta.float,d=z.meta.float,h=z.meta.vector3,m=z.meta.float,i(b=n((x=P=class extends z.meta.Model{constructor(...e){super(...e),C(this,"name",v,this),C(this,"boneIndex",g,this),C(this,"brightness",y,this),C(this,"color",w,this),C(this,"innerRadius",_,this),C(this,"noiseAmplitude",E,this),C(this,"noiseFrequency",T,this),C(this,"noiseOctaves",S,this),C(this,"position",j,this),C(this,"radius",R,this),this._effect=null,this._worldPosition=O.vec3.create(),this._indexBuffer=null}Unload(e){this._indexBuffer&&(A.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(){}Update(e,t){O.vec3.transformMat4(this._worldPosition,this.position,t),this._dirty&&this.Rebuild()}GetBatches(e,t,r){if(this.display&&e===A.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count){var i=new I;i.renderMode=A.device.RM_ADDITIVE,i.light=this,i.perObjectData=r,t.Commit(i)}}Render(e){if(!this._effect||!this._effect.IsGood()||!this.buffer)return!1;var t=A.device,r=t.gl;t.SetStandardStates(t.RM_ADDITIVE),r.bindBuffer(r.ARRAY_BUFFER,this.buffer);for(var i=0;i<this._effect.GetPassCount(e);++i)this.effect.ApplyPass(e,i),t.ApplyShadowState(),t.gl.drawElements(r.TRIANGLES,this.buffer.count,r.UNSIGNED_SHORT,0);return!1}},P.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"POSITION",usageIndex:1,elements:3},{usage:"POSITION",usageIndex:2,elements:3},{usage:"POSITION",usageIndex:3,elements:3},{usage:"POSITION",usageIndex:4,elements:3},{usage:"POSITION",usageIndex:5,elements:3},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:1},{usage:"TEXCOORD",usageIndex:8,elements:1}],v=D((p=x).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=D(p.prototype,"boneIndex",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=D(p.prototype,"brightness",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=D(p.prototype,"color",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec4.create()}}),_=D(p.prototype,"innerRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=D(p.prototype,"noiseAmplitude",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=D(p.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=D(p.prototype,"noiseOctaves",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=D(p.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.vec3.create()}}),R=D(p.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b)||b)},"./unsupported/core/lighting/Tr2ShLightingManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ShLightingManager",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.notImplemented,n=d.meta.type("Tr2ShLightingManager"),a=d.meta.float,o=d.meta.float,i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),h(this,"primaryIntensity",u,this),h(this,"secondaryIntensity",c,this)}},u=m((l=f).prototype,"primaryIntensity",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=m(l.prototype,"secondaryIntensity",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=l))||s)||s)},"./unsupported/core/lighting/Tr2SpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SpotLight",(function(){return D}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O=r("./global/utils/index.js"),A=r("./global/math/index.js");function M(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function C(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var D=(i=O.meta.notImplemented,n=O.meta.type("Tr2SpotLight"),a=O.meta.string,o=O.meta.float,s=O.meta.vector4,l=O.meta.float,u=O.meta.float,c=O.meta.float,f=O.meta.float,d=O.meta.float,h=O.meta.vector3,m=O.meta.float,b=O.meta.quaternion,i(p=n((z=class extends O.meta.Model{constructor(...e){super(...e),M(this,"name",g,this),M(this,"brightness",y,this),M(this,"color",w,this),M(this,"innerAngle",_,this),M(this,"innerRadius",E,this),M(this,"noiseAmplitude",T,this),M(this,"noiseFrequency",S,this),M(this,"outerAngle",j,this),M(this,"position",R,this),M(this,"radius",P,this),M(this,"rotation",x,this)}},g=C((v=z).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=C(v.prototype,"brightness",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=C(v.prototype,"color",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec4.fromValues(0,0,0,1)}}),_=C(v.prototype,"innerAngle",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=C(v.prototype,"innerRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=C(v.prototype,"noiseAmplitude",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=C(v.prototype,"noiseFrequency",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=C(v.prototype,"outerAngle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=C(v.prototype,"position",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.create()}}),P=C(v.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=C(v.prototype,"rotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.quat.create()}}),p=v))||p)||p)},"./unsupported/core/lighting/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/lighting/Tr2SpotLight.js");r.d(t,"Tr2SpotLight",(function(){return i.Tr2SpotLight}));var n=r("./unsupported/core/lighting/Tr2PointLight.js");r.d(t,"EvePointLightBatch",(function(){return n.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return n.Tr2PointLight}));var a=r("./unsupported/core/lighting/Tr2ShLightingManager.js");r.d(t,"Tr2ShLightingManager",(function(){return a.Tr2ShLightingManager}))},"./unsupported/core/mesh/Tr2MeshLod.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2MeshLod",(function(){return B}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I=r("./global/utils/index.js"),L=r("./global/constant/index.js");function F(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function G(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var B=(i=I.meta.notImplemented,n=I.meta.type("Tr2MeshLod"),a=I.meta.todo("Implement LOD"),o=I.meta.list("Tw2MeshArea"),s=I.meta.notImplemented,l=I.meta.list("Tw2GeometryRes"),u=I.meta.list("Tw2MeshArea"),c=I.meta.notImplemented,f=I.meta.list("Tw2MeshArea"),d=I.meta.notImplemented,h=I.meta.list("Tw2MeshArea"),m=I.meta.struct("Tr2LodResource"),b=I.meta.list("Tw2MeshArea"),p=I.meta.list("Tw2MeshArea"),v=I.meta.list("Tw2MeshArea"),g=I.meta.boolean,y=I.meta.plain,w=I.meta.notImplemented,i(_=n(_=a((D=class extends I.meta.Model{constructor(...e){super(...e),F(this,"additiveAreas",T,this),F(this,"associatedResources",S,this),F(this,"decalAreas",j,this),F(this,"depthAreas",R,this),F(this,"distortionAreas",P,this),F(this,"geometryRes",x,this),F(this,"opaqueAreas",z,this),F(this,"pickableAreas",O,this),F(this,"transparentAreas",A,this),F(this,"display",M,this),F(this,"visible",C,this),this._geometryResource=null}get geometryResource(){return this._geometryResource}set geometryResource(e){this._geometryResource=e}Initialize(){}OnResPrepared(e){this._geometryResource=e}IsGood(){return this._geometryResource&&this._geometryResource.IsGood()}GetResources(e=[]){for(var t=0;t<this.associatedResources;t++)e[t]&&!e.includes(this.associatedResources[t])&&e.push(this.associatedResources[t]);var r=I.perArrayChild;return r(this.additiveAreas,"GetResources",e),r(this.decalAreas,"GetResources",e),r(this.depthAreas,"GetResources",e),r(this.distortionAreas,"GetResources",e),r(this.opaqueAreas,"GetResources",e),r(this.pickableAreas,"GetResources",e),r(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;var i,n=this.constructor.GetAreaBatches;switch(e){case L.RM_ADDITIVE:this.visible.additiveAreas&&(i=this.additiveAreas);break;case L.RM_DECAL:this.visible.decalAreas&&(i=this.decalAreas);break;case L.RM_DEPTH:this.visible.depthAreas&&(i=this.depthAreas);break;case L.RM_DISTORTION:this.visible.distortionAreas&&(i=this.distortionAreas);break;case L.RM_OPAQUE:this.visible.opaqueAreas&&(i=this.opaqueAreas);break;case L.RM_PICKABLE:this.visible.pickableAreas&&(i=this.pickableAreas);break;case L.RM_TRANSPARENT:this.visible.transparentAreas&&(i=this.transparentAreas)}i&&n(this,i,e,t,r)}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static GetAreaBatches(e,t,r,i,n){for(var a=0;a<t.length;++a){var o=t[a];if(o.effect&&o.display){var s=new o.constructor.batchType;s.renderMode=r,s.perObjectData=n,s.geometryRes=e._geometryResource,s.meshIx=0,s.start=o.index,s.count=o.count,s.effect=o.effect,i.Commit(s)}}}},T=G((E=D).prototype,"additiveAreas",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=G(E.prototype,"associatedResources",[s,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=G(E.prototype,"decalAreas",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=G(E.prototype,"depthAreas",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=G(E.prototype,"distortionAreas",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=G(E.prototype,"geometryRes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=G(E.prototype,"opaqueAreas",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=G(E.prototype,"pickableAreas",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=G(E.prototype,"transparentAreas",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=G(E.prototype,"display",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=G(E.prototype,"visible",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opaqueAreas:!0,transparentAreas:!0,additiveAreas:!0,pickableAreas:!0,distortionAreas:!0,decalAreas:!0,depthAreas:!0}}}),G(E.prototype,"Initialize",[w],Object.getOwnPropertyDescriptor(E.prototype,"Initialize"),E.prototype),_=E))||_)||_)||_)},"./unsupported/core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/mesh/Tr2MeshLod.js");r.d(t,"Tr2MeshLod",(function(){return i.Tr2MeshLod}))},"./unsupported/core/parameter/Tr2ExternalParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ExternalParameter",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./core/parameter/Tw2Parameter.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=m.meta.notImplemented,n=m.meta.type("Tr2ExternalParameter"),a=m.meta.string,o=m.meta.string,s=m.meta.struct(),i(l=n((h=class extends b.Tw2Parameter{constructor(...e){super(...e),p(this,"name",c,this),p(this,"destinationAttribute",f,this),p(this,"destinationObject",d,this)}},c=v((u=h).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"destinationAttribute",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=v(u.prototype,"destinationObject",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l)||l)},"./unsupported/core/parameter/Tr2Texture2dLodParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Texture2dLodParameter",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./core/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.notImplemented,n=d.meta.type("Tr2Texture2dLodParameter"),a=d.meta.string,o=d.meta.struct("Tr2LodResource"),i(s=n((f=class extends h.Tw2Parameter{constructor(...e){super(...e),m(this,"name",u,this),m(this,"lodResource",c,this)}},u=b((l=f).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"lodResource",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s)||s)},"./unsupported/core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/parameter/Tr2ExternalParameter.js");r.d(t,"Tr2ExternalParameter",(function(){return i.Tr2ExternalParameter}));var n=r("./unsupported/core/parameter/Tr2Texture2dLodParameter.js");r.d(t,"Tr2Texture2dLodParameter",(function(){return n.Tr2Texture2dLodParameter}))},"./unsupported/core/post/Tr2PPBloomEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPBloomEffect",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2PPBloomEffect")(i=class{})||i)||i},"./unsupported/core/post/Tr2PPDesaturateEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPDesaturateEffect",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2PPDesaturateEffect"),a=c.meta.float,i(o=n((u=class{constructor(){var e,t,r,i;e=this,t="intensity",i=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},f=(s=u).prototype,d="intensity",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/core/post/Tr2PPDynamicExposureEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return p}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=h.meta.notImplemented,n=h.meta.type("Tr2PPDynamicExposureEffect"),a=h.meta.float,o=h.meta.float,s=h.meta.float,i(l=n((c=b((u=class{constructor(){m(this,"adjustment",c,this),m(this,"influence",f,this),m(this,"middleValue",d,this)}}).prototype,"adjustment",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=b(u.prototype,"influence",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=b(u.prototype,"middleValue",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=u))||l)||l)},"./unsupported/core/post/Tr2PPFadeEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFadeEffect",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2PPFadeEffect")(i=class{})||i)||i},"./unsupported/core/post/Tr2PPFidelityFXEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFidelityFXEffect",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2PPFidelityFXEffect")(i=class{})||i)||i},"./unsupported/core/post/Tr2PPFilmGrainEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFilmGrainEffect",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2PPFilmGrainEffect")(i=class{})||i)||i},"./unsupported/core/post/Tr2PPFogEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPFogEffect",(function(){return V}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B=r("./global/utils/index.js"),N=r("./global/math/index.js");function k(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function U(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var V=(i=B.meta.notImplemented,n=B.meta.type("Tr2PPFogEffect"),a=B.meta.vector3,o=B.meta.float,s=B.meta.float,l=B.meta.float,u=B.meta.float,c=B.meta.float,f=B.meta.float,d=B.meta.float,h=B.meta.float,m=B.meta.float,b=B.meta.float,p=B.meta.float,v=B.meta.float,g=B.meta.color,y=B.meta.float,w=B.meta.float,i(_=n((T=U((E=class{constructor(){k(this,"areaCenter",T,this),k(this,"blendAmount0",S,this),k(this,"blendAmount1",j,this),k(this,"blendAmount2",R,this),k(this,"blendBias0",P,this),k(this,"blendBias1",x,this),k(this,"blendBias2",z,this),k(this,"blendDistance0",O,this),k(this,"blendDistance1",A,this),k(this,"blendDistance2",M,this),k(this,"blendPower0",C,this),k(this,"blendPower1",D,this),k(this,"blendPower2",I,this),k(this,"color",L,this),k(this,"colorInfluence",F,this),k(this,"nebulaInfluence",G,this)}}).prototype,"areaCenter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec3.create()}}),S=U(E.prototype,"blendAmount0",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=U(E.prototype,"blendAmount1",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=U(E.prototype,"blendAmount2",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=U(E.prototype,"blendBias0",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=U(E.prototype,"blendBias1",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=U(E.prototype,"blendBias2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=U(E.prototype,"blendDistance0",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=U(E.prototype,"blendDistance1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=U(E.prototype,"blendDistance2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=U(E.prototype,"blendPower0",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=U(E.prototype,"blendPower1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=U(E.prototype,"blendPower2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=U(E.prototype,"color",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.vec4.create()}}),F=U(E.prototype,"colorInfluence",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=U(E.prototype,"nebulaInfluence",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=E))||_)||_)},"./unsupported/core/post/Tr2PPGodRaysEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPGodRaysEffect",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2PPGodRaysEffect"),a=c.meta.path,i(o=n((u=class{constructor(){var e,t,r,i;e=this,t="noiseTexturePath",i=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},f=(s=u).prototype,d="noiseTexturePath",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/core/post/Tr2PPLutEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPLutEffect",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2PPLutEffect"),a=c.meta.path,i(o=n((u=class{constructor(){var e,t,r,i;e=this,t="path",i=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},f=(s=u).prototype,d="path",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/core/post/Tr2PPSignalLossEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPSignalLossEffect",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2PPSignalLossEffect")(i=class{})||i)||i},"./unsupported/core/post/Tr2PPVignetteEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PPVignetteEffect",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2PPVignetteEffect"),a=c.meta.float,i(o=n((u=class{constructor(){var e,t,r,i;e=this,t="sineFrequency",i=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},f=(s=u).prototype,d="sineFrequency",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/core/post/Tr2PostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PostProcess",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2PostProcess"),a=c.meta.list("Tw2Effect"),i(o=n((u=class extends c.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="stages",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},f=(s=u).prototype,d="stages",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/core/post/Tr2PostProcess2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PostProcess2",(function(){return C}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O=r("./global/utils/index.js");function A(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function M(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var C=(i=O.meta.notImplemented,n=O.meta.type("Tr2PostProcess2"),a=O.meta.struct("Tr2PPBloomEffect"),o=O.meta.struct("Tr2DesaturateEffect"),s=O.meta.struct("Tr2PPDynamicExposureEffect"),l=O.meta.struct("Tr2PPFadeEffect"),u=O.meta.struct("Tr2PPFidelityFXEffect"),c=O.meta.struct("Tr2PPFilmGrainEffect"),f=O.meta.struct("Tr2PPFogEffect"),d=O.meta.struct("Tr2PPGodRaysEffect"),h=O.meta.struct("Tr2PPLutEffect"),m=O.meta.struct("Tr2PPSignalLossEffect"),b=O.meta.struct("Tr2PPVignetteEffect"),i(p=n((z=class extends O.meta.Model{constructor(...e){super(...e),A(this,"bloom",g,this),A(this,"desaturate",y,this),A(this,"dynamicExposure",w,this),A(this,"fade",_,this),A(this,"fidelityFX",E,this),A(this,"filmGrain",T,this),A(this,"fog",S,this),A(this,"godRays",j,this),A(this,"lut",R,this),A(this,"signalLoss",P,this),A(this,"vignette",x,this)}},g=M((v=z).prototype,"bloom",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=M(v.prototype,"desaturate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=M(v.prototype,"dynamicExposure",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M(v.prototype,"fade",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=M(v.prototype,"fidelityFX",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=M(v.prototype,"filmGrain",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=M(v.prototype,"fog",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=M(v.prototype,"godRays",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=M(v.prototype,"lut",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=M(v.prototype,"signalLoss",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=M(v.prototype,"vignette",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v))||p)||p)},"./unsupported/core/post/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/post/Tr2PostProcess.js");r.d(t,"Tr2PostProcess",(function(){return i.Tr2PostProcess}));var n=r("./unsupported/core/post/Tr2PostProcess2.js");r.d(t,"Tr2PostProcess2",(function(){return n.Tr2PostProcess2}));var a=r("./unsupported/core/post/Tr2PPBloomEffect.js");r.d(t,"Tr2PPBloomEffect",(function(){return a.Tr2PPBloomEffect}));var o=r("./unsupported/core/post/Tr2PPDesaturateEffect.js");r.d(t,"Tr2PPDesaturateEffect",(function(){return o.Tr2PPDesaturateEffect}));var s=r("./unsupported/core/post/Tr2PPDynamicExposureEffect.js");r.d(t,"Tr2PPDynamicExposureEffect",(function(){return s.Tr2PPDynamicExposureEffect}));var l=r("./unsupported/core/post/Tr2PPFadeEffect.js");r.d(t,"Tr2PPFadeEffect",(function(){return l.Tr2PPFadeEffect}));var u=r("./unsupported/core/post/Tr2PPFidelityFXEffect.js");r.d(t,"Tr2PPFidelityFXEffect",(function(){return u.Tr2PPFidelityFXEffect}));var c=r("./unsupported/core/post/Tr2PPFilmGrainEffect.js");r.d(t,"Tr2PPFilmGrainEffect",(function(){return c.Tr2PPFilmGrainEffect}));var f=r("./unsupported/core/post/Tr2PPFogEffect.js");r.d(t,"Tr2PPFogEffect",(function(){return f.Tr2PPFogEffect}));var d=r("./unsupported/core/post/Tr2PPGodRaysEffect.js");r.d(t,"Tr2PPGodRaysEffect",(function(){return d.Tr2PPGodRaysEffect}));var h=r("./unsupported/core/post/Tr2PPLutEffect.js");r.d(t,"Tr2PPLutEffect",(function(){return h.Tr2PPLutEffect}));var m=r("./unsupported/core/post/Tr2PPSignalLossEffect.js");r.d(t,"Tr2PPSignalLossEffect",(function(){return m.Tr2PPSignalLossEffect}));var b=r("./unsupported/core/post/Tr2PPVignetteEffect.js");r.d(t,"Tr2PPVignetteEffect",(function(){return b.Tr2PPVignetteEffect}))},"./unsupported/core/resource/Tw2LodResource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2LodResource",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js");function y(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function w(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var _=(i=g.meta.notImplemented,n=g.meta.type("Tr2LodResource"),a=g.meta.string,o=g.meta.path,s=g.meta.path,l=g.meta.path,u=g.meta.path,i(c=n((v=class extends g.meta.Model{constructor(...e){super(...e),y(this,"name",d,this),y(this,"highDetailResPath",h,this),y(this,"lowDetailResPath",m,this),y(this,"mediumDetailResPath",b,this),y(this,"ultraDetailResPath",p,this)}},d=w((f=v).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=w(f.prototype,"highDetailResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=w(f.prototype,"lowDetailResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=w(f.prototype,"mediumDetailResPath",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=w(f.prototype,"ultraDetailResPath",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=f))||c)||c)},"./unsupported/core/resource/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/resource/Tw2LodResource.js");r.d(t,"Tr2LodResource",(function(){return i.Tr2LodResource}))},"./unsupported/core/value/TriMatrix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriMatrix",(function(){return H}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k=r("./global/utils/index.js");function U(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function V(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var H=(i=k.meta.notImplemented,n=k.meta.type("TriMatrix"),a=k.meta.todo("Should this default to a identity matrix?"),o=k.meta.float,s=k.meta.float,l=k.meta.float,u=k.meta.float,c=k.meta.float,f=k.meta.float,d=k.meta.float,h=k.meta.float,m=k.meta.float,b=k.meta.float,p=k.meta.float,v=k.meta.float,g=k.meta.float,y=k.meta.float,w=k.meta.float,_=k.meta.float,i(E=n(E=a((N=class extends k.meta.Model{constructor(...e){super(...e),U(this,"_11",S,this),U(this,"_12",j,this),U(this,"_13",R,this),U(this,"_14",P,this),U(this,"_21",x,this),U(this,"_22",z,this),U(this,"_23",O,this),U(this,"_24",A,this),U(this,"_31",M,this),U(this,"_32",C,this),U(this,"_33",D,this),U(this,"_34",I,this),U(this,"_41",L,this),U(this,"_42",F,this),U(this,"_43",G,this),U(this,"_44",B,this)}},S=V((T=N).prototype,"_11",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=V(T.prototype,"_12",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=V(T.prototype,"_13",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=V(T.prototype,"_14",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=V(T.prototype,"_21",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=V(T.prototype,"_22",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=V(T.prototype,"_23",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=V(T.prototype,"_24",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=V(T.prototype,"_31",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=V(T.prototype,"_32",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=V(T.prototype,"_33",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=V(T.prototype,"_34",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=V(T.prototype,"_41",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=V(T.prototype,"_42",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=V(T.prototype,"_43",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=V(T.prototype,"_44",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=T))||E)||E)||E)},"./unsupported/core/value/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/value/TriMatrix.js");r.d(t,"TriMatrix",(function(){return i.TriMatrix}))},"./unsupported/curve/Tw2CurveSetRange.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSetRange",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=p.meta.notImplemented,n=p.meta.type("Tw2CurveSetRange"),a=p.meta.string,o=p.meta.float,s=p.meta.boolean,l=p.meta.float,i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),v(this,"name",f,this),v(this,"endTime",d,this),v(this,"looped",h,this),v(this,"startTime",m,this)}},f=g((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(c.prototype,"endTime",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=g(c.prototype,"looped",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=g(c.prototype,"startTime",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/curve/adapter/Tr2RotationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RotationAdapter",(function(){return u}));var i,n,a,o=r("./global/utils/index.js"),s=r("./global/math/index.js"),l=r("./unsupported/curve/adapter/Tw2CurveAdapter.js"),u=(0,o.meta.notImplemented)(i=o.meta.type("Tr2RotationAdapter")((a=n=class extends l.Tw2CurveAdapter{constructor(...e){super(...e),this.curve=null,this.value=s.vec4.create()}GetValueAt(e,t){return this.curve&&this.curve.GetValueAt(e,this.value),s.vec4.copy(t,this.value)}},n.outputDimension=4,i=a))||i)||i},"./unsupported/curve/adapter/Tr2TranslationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2TranslationAdapter",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h=r("./global/utils/index.js"),m=r("./global/math/index.js"),b=r("./unsupported/curve/adapter/Tw2CurveAdapter.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=h.meta.notImplemented,n=h.meta.type("Tr2TranslationAdapter"),a=h.meta.struct("Tw2Curve"),o=h.meta.vector3,i(s=n((d=f=class extends b.Tw2CurveAdapter{constructor(...e){super(...e),p(this,"curve",u,this),p(this,"value",c,this)}GetValueAt(e,t){return this.curve&&this.curve.GetValueAt(e,this.value),m.vec3.copy(t,this.value)}},f.outputDimension=3,u=v((l=d).prototype,"curve",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=v(l.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.vec3.create()}}),s=l))||s)||s)},"./unsupported/curve/adapter/Tw2CurveAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveAdapter",(function(){return l}));var i,n,a,o=r("./global/utils/index.js"),s=r("./curve/index.js"),l=o.meta.type("Tw2CurveAdapter")((a=n=class extends s.Tw2Curve{constructor(...e){super(...e),this.name="",this.curve=null,this.value=null}Sort(){this.curve&&this.curve.Sort()}UpdateValue(e){this.GetValueAt(e,this.value)}},n.valueProperty="value",n.curveType=s.Tw2Curve.Type.ADAPTER,i=a))||i},"./unsupported/curve/adapter/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/curve/adapter/Tr2RotationAdapter.js");r.d(t,"Tr2RotationAdapter",(function(){return i.Tr2RotationAdapter}));var n=r("./unsupported/curve/adapter/Tr2TranslationAdapter.js");r.d(t,"Tr2TranslationAdapter",(function(){return n.Tr2TranslationAdapter}))},"./unsupported/curve/curve/AudEventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEventKey",(function(){return x})),r.d(t,"AudEventCurve",(function(){return z}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js"),j=r("./curve/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=S.meta.type("AudEventKey"),n=S.meta.float,a=S.meta.ushort,i((c=class extends j.Tw2CurveKey{constructor(...e){super(...e),R(this,"time",l,this),R(this,"value",u,this)}},l=P((s=c).prototype,"time",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=P(s.prototype,"value",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=s))||o),z=(f=S.meta.notImplemented,d=S.meta.type("AudEventCurve"),h=S.meta.string,m=S.meta.uint,b=S.meta.list("AudEventKey"),p=S.meta.struct("TriObserverLocal"),f(v=d((T=class extends j.Tw2Curve{constructor(...e){super(...e),R(this,"name",y,this),R(this,"extrapolation",w,this),R(this,"keys",_,this),R(this,"sourceTriObserver",E,this)}},y=P((g=T).prototype,"name",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=P(g.prototype,"extrapolation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=P(g.prototype,"keys",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=P(g.prototype,"sourceTriObserver",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v)||v)},"./unsupported/curve/curve/EveBezierCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBezierCurve",(function(){return U}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F=r("./global/utils/index.js"),G=r("./curve/index.js"),B=r("./global/math/index.js");function N(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function k(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var U=(i=F.meta.notImplemented,n=F.meta.type("EveBezierCurve"),a=F.meta.boolean,o=F.meta.vector3,s=F.meta.struct(),l=F.meta.float,u=F.meta.float,c=F.meta.float,f=F.meta.vector3,d=F.meta.vector3,h=F.meta.vector3,m=F.meta.quaternion,b=F.meta.boolean,p=F.meta.boolean,v=F.meta.uint,g=F.meta.vector3,i(y=n((L=I=class extends G.Tw2Curve{constructor(...e){super(...e),N(this,"billboardObjects",_,this),N(this,"bezierPoint",E,this),N(this,"lineSet",T,this),N(this,"lineWidth",S,this),N(this,"movementScale",j,this),N(this,"movementSpeed",R,this),N(this,"objectScale",P,this),N(this,"point1",x,this),N(this,"point2",z,this),N(this,"rotation",O,this),N(this,"scaleEndpoints",A,this),N(this,"scaleSegmentsByCompleteness",M,this),N(this,"segments",C,this),N(this,"translation",D,this)}},I.inputDimension=0,I.outputDimension=0,I.valueProperty="value",I.curveType=G.Tw2Curve.Type.CURVE2,_=k((w=L).prototype,"billboardObjects",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=k(w.prototype,"bezierPoint",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),T=k(w.prototype,"lineSet",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=k(w.prototype,"lineWidth",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=k(w.prototype,"movementScale",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=k(w.prototype,"movementSpeed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=k(w.prototype,"objectScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.fromValues(1,1,1)}}),x=k(w.prototype,"point1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),z=k(w.prototype,"point2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),O=k(w.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.quat.create()}}),A=k(w.prototype,"scaleEndpoints",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=k(w.prototype,"scaleSegmentsByCompleteness",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=k(w.prototype,"segments",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=k(w.prototype,"translation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.vec3.create()}}),y=w))||y)||y)},"./unsupported/curve/curve/Tr2BoneMatrixCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2BoneMatrixCurve",(function(){return g}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./curve/index.js");var d,h,m,b,p,v,g=(i=c.meta.notImplemented,n=c.meta.type("Tr2BoneMatrixCurve"),a=c.meta.string,i(o=n((u=class extends f.Tw2Curve{constructor(...e){var t,r,i,n;super(...e),t=this,r="name",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},d=(s=u).prototype,h="name",m=[a],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),l=v,o=s))||o)||o)},"./unsupported/curve/curve/Tr2CurveConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveConstant",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./global/math/index.js"),p=r("./curve/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=m.meta.notImplemented,n=m.meta.type("Tw2CurveConstant"),a=m.meta.todo("Is this a curve or a key?"),o=m.meta.string,s=m.meta.vector4,i(l=n(l=a((h=d=class extends p.Tw2Curve{constructor(...e){super(...e),v(this,"name",c,this),v(this,"value",f,this)}Sort(){}GetLength(){return 0}UpdateValue(e,t){b.vec4.copy(t,this.value)}},d.inputDimension=4,d.outputDimension=4,d.valueProperty="value",d.curveType=p.Tw2Curve.Type.CURVE_NO_KEYS,c=g((u=h).prototype,"name",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=g(u.prototype,"value",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec4.create()}}),l=u))||l)||l)||l)},"./unsupported/curve/curve/Tr2CurveScalar.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveScalarKey",(function(){return H})),r.d(t,"Tr2CurveScalar",(function(){return q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./curve/index.js");function U(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function V(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var H=(i=N.meta.type("Tw2CurveScalarKey"),n=N.meta.float,a=N.meta.uint,o=N.meta.uint,s=N.meta.uint,l=N.meta.float,u=N.meta.float,i((g=class extends k.Tw2CurveKey{constructor(...e){super(...e),U(this,"endTangent",d,this),U(this,"extrapolation",h,this),U(this,"index",m,this),U(this,"interpolation",b,this),U(this,"startTangent",p,this),U(this,"value",v,this)}static blackStruct(e){var t=new this;return t.time=e.ReadF32(),t.value=e.ReadF32(),t.startTangent=e.ReadF32(),t.endTangent=e.ReadF32(),t.index=e.ReadU16(),t.interpolation=e.ReadU8(),t.extrapolation=e.ReadU8(),t}},d=V((f=g).prototype,"endTangent",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=V(f.prototype,"extrapolation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=V(f.prototype,"index",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=V(f.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=V(f.prototype,"startTangent",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=V(f.prototype,"value",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c),q=(y=N.meta.notImplemented,w=N.meta.type("Tr2CurveScalar"),_=N.meta.string,E=N.meta.uint,T=N.meta.uint,S=N.meta.list(H),j=N.meta.float,R=N.meta.float,P=N.meta.float,x=N.meta.isPrivate,y(z=w((B=G=class extends k.Tw2Curve{constructor(...e){super(...e),U(this,"name",A,this),U(this,"extrapolationAfter",M,this),U(this,"extrapolationBefore",C,this),U(this,"keys",D,this),U(this,"timeOffset",I,this),U(this,"timeScale",L,this),U(this,"currentValue",F,this),this._length=0}Sort(){this._length=k.Tw2Curve.Sort3(this.keys)}GetLength(){return this._length}},G.inputDimension=1,G.outputDimension=1,G.valueProperty="currentValue",G.curveType=k.Tw2Curve.Type.CURVE3,G.Key=H,G.Interpolation={},G.Extrapolation={},A=V((O=B).prototype,"name",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=V(O.prototype,"extrapolationAfter",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=V(O.prototype,"extrapolationBefore",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=V(O.prototype,"keys",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=V(O.prototype,"timeOffset",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=V(O.prototype,"timeScale",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=V(O.prototype,"currentValue",[P,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=O))||z)||z)},"./unsupported/curve/curve/Tr2ScalarExprCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprCurve",(function(){return C}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z=r("./curve/curve/index.js"),O=r("./global/utils/index.js");function A(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function M(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var C=(i=O.meta.type("Tr2ScalarExprCurve"),n=O.meta.notImplemented,a=O.meta.float,o=O.meta.float,s=O.meta.float,l=O.meta.float,u=O.meta.isPrivate,c=O.meta.float,f=O.meta.isPrivate,d=O.meta.uint,h=O.meta.uint,m=O.meta.isPrivate,b=O.meta.string,p=O.meta.expression,i(v=n((x=class extends z.Tw2Curve{constructor(...e){super(...e),A(this,"input1",y,this),A(this,"input2",w,this),A(this,"input3",_,this),A(this,"value",E,this),A(this,"currentValue",T,this),A(this,"cycle",S,this),A(this,"length",j,this),A(this,"name",R,this),A(this,"expr",P,this)}},y=M((g=x).prototype,"input1",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M(g.prototype,"input2",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=M(g.prototype,"input3",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=M(g.prototype,"value",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=M(g.prototype,"currentValue",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=M(g.prototype,"cycle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=M(g.prototype,"length",[h,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=M(g.prototype,"name",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=M(g.prototype,"expr",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=g))||v)||v)},"./unsupported/curve/curve/Tr2ScalarExprKeyCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprKey",(function(){return V})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return H}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B=r("./global/utils/index.js"),N=r("./curve/index.js");function k(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function U(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var V=(i=B.meta.type("Tr2ScalarExprKey"),n=B.meta.float,a=B.meta.float,o=B.meta.float,s=B.meta.uint,l=B.meta.float,u=B.meta.float,c=B.meta.float,f=B.meta.expression,d=B.meta.float,h=B.meta.isPrivate,i((j=class extends N.Tw2CurveKey{constructor(...e){super(...e),k(this,"input1",p,this),k(this,"input2",v,this),k(this,"input3",g,this),k(this,"interpolation",y,this),k(this,"left",w,this),k(this,"right",_,this),k(this,"time",E,this),k(this,"timeExpression",T,this),k(this,"value",S,this)}},p=U((b=j).prototype,"input1",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),v=U(b.prototype,"input2",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),g=U(b.prototype,"input3",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),y=U(b.prototype,"interpolation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=U(b.prototype,"left",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=U(b.prototype,"right",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=U(b.prototype,"time",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=U(b.prototype,"timeExpression",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=U(b.prototype,"value",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=b))||m),H=(R=B.meta.notImplemented,P=B.meta.type("Tr2ScalarExprKeyCurve"),x=B.meta.string,z=B.meta.uint,O=B.meta.list("Tr2ScalarExprKey"),A=B.meta.float,R(M=P((G=class extends N.Tw2Curve{constructor(...e){super(...e),k(this,"name",D,this),k(this,"interpolation",I,this),k(this,"keys",L,this),k(this,"currentValue",F,this)}},D=U((C=G).prototype,"name",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=U(C.prototype,"interpolation",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=U(C.prototype,"keys",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=U(C.prototype,"currentValue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=C))||M)||M)},"./unsupported/curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/curve/curve/AudEventCurve.js");r.d(t,"AudEventKey",(function(){return i.AudEventKey})),r.d(t,"AudEventCurve",(function(){return i.AudEventCurve}));var n=r("./unsupported/curve/curve/EveBezierCurve.js");r.d(t,"EveBezierCurve",(function(){return n.EveBezierCurve}));var a=r("./unsupported/curve/curve/Tr2BoneMatrixCurve.js");r.d(t,"Tr2BoneMatrixCurve",(function(){return a.Tr2BoneMatrixCurve}));var o=r("./unsupported/curve/curve/Tr2CurveConstant.js");r.d(t,"Tr2CurveConstant",(function(){return o.Tr2CurveConstant}));var s=r("./unsupported/curve/curve/Tr2CurveScalar.js");r.d(t,"Tw2CurveScalarKey",(function(){return s.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return s.Tr2CurveScalar}));var l=r("./unsupported/curve/curve/Tr2ScalarExprKeyCurve.js");r.d(t,"Tr2ScalarExprKey",(function(){return l.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return l.Tr2ScalarExprKeyCurve}));var u=r("./unsupported/curve/curve/Tr2ScalarExprCurve.js");r.d(t,"Tr2ScalarExprCurve",(function(){return u.Tr2ScalarExprCurve}))},"./unsupported/curve/expression/Tr2CurveEulerRotationExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveEulerRotationExpression",(function(){return z}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js"),j=r("./global/math/index.js"),R=r("./unsupported/curve/expression/Tw2CurveExpression.js");function P(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var z=(i=S.meta.notImplemented,n=S.meta.type("Tr2CurveEulerRotationExpression"),a=S.meta.string,o=S.meta.float,s=S.meta.list(),l=S.meta.expression,u=S.meta.expression,c=S.meta.expression,f=S.meta.quaternion,d=S.meta.isPrivate,i(h=n((T=E=class extends R.Tw2CurveExpression{constructor(...e){super(...e),P(this,"name",b,this),P(this,"input1",p,this),P(this,"inputs",v,this),P(this,"expressionPitch",g,this),P(this,"expressionRoll",y,this),P(this,"expressionYaw",w,this),P(this,"currentValue",_,this)}},E.inputDimension=1,E.outputDimension=4,E.valueProperty="currentValue",E.childProperties=["expressionPitch","expressionRoll","expressionYaw"],b=x((m=T).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=x(m.prototype,"input1",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=x(m.prototype,"inputs",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=x(m.prototype,"expressionPitch",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=x(m.prototype,"expressionRoll",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=x(m.prototype,"expressionYaw",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=x(m.prototype,"currentValue",[f,d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),h=m))||h)||h)},"./unsupported/curve/expression/Tr2CurveScalarExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveScalarExpression",(function(){return A}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P=r("./unsupported/curve/expression/Tw2CurveExpression.js"),x=r("./global/utils/index.js");function z(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function O(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=(i=x.meta.notImplemented,n=x.meta.type("Tr2CurveScalarExpression"),a=x.meta.string,o=x.meta.list(),s=x.meta.expression,l=x.meta.float,u=x.meta.todo("Figure out the default value"),c=x.meta.float,f=x.meta.todo("Figure out the default value"),d=x.meta.float,h=x.meta.todo("Figure out the default value"),m=x.meta.float,b=x.meta.isPrivate,i(p=n((R=j=class extends P.Tw2CurveExpression{constructor(...e){super(...e),z(this,"name",g,this),z(this,"inputs",y,this),z(this,"expression",w,this),z(this,"input1",_,this),z(this,"input2",E,this),z(this,"input3",T,this),z(this,"currentValue",S,this)}},j.inputDimension=1,j.outputDimension=1,j.valueProperty="currentValue",j.childProperties=["expression"],g=O((v=R).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=O(v.prototype,"inputs",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=O(v.prototype,"expression",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=O(v.prototype,"input1",[l,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),E=O(v.prototype,"input2",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=O(v.prototype,"input3",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),S=O(v.prototype,"currentValue",[m,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=v))||p)||p)},"./unsupported/curve/expression/Tr2CurveVector3Expression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveVector3Expression",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E=r("./global/utils/index.js"),T=r("./global/math/index.js"),S=r("./unsupported/curve/expression/Tw2CurveExpression.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=E.meta.notImplemented,n=E.meta.type("Tr2CurveVector3Expression"),a=E.meta.string,o=E.meta.list(),s=E.meta.expression,l=E.meta.expression,u=E.meta.expression,c=E.meta.vector3,f=E.meta.isPrivate,i(d=n((_=w=class extends S.Tw2CurveExpression{constructor(...e){super(...e),j(this,"name",m,this),j(this,"inputs",b,this),j(this,"expressionX",p,this),j(this,"expressionY",v,this),j(this,"expressionZ",g,this),j(this,"currentValue",y,this)}},w.inputDimension=1,w.outputDimension=3,w.valueProperty="currentValue",w.childProperties=["expressionX","expressionY","expressionZ"],m=R((h=_).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=R(h.prototype,"inputs",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=R(h.prototype,"expressionX",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=R(h.prototype,"expressionY",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=R(h.prototype,"expressionZ",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=R(h.prototype,"currentValue",[c,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.vec3.create()}}),d=h))||d)||d)},"./unsupported/curve/expression/Tw2CurveExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveExpression",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./curve/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.type("Tw2CurveExpression"),n=d.meta.string,a=d.meta.list(),i((f=c=class extends h.Tw2Curve{constructor(...e){super(...e),m(this,"name",l,this),m(this,"inputs",u,this)}GetValueAt(){}UpdateValue(e){this.GetValueAt(e,this.currentValue)}},c.curveType=h.Tw2Curve.Type.EXPRESSION,l=b((s=f).prototype,"name",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=b(s.prototype,"inputs",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=s))||o)},"./unsupported/curve/expression/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/curve/expression/Tr2CurveEulerRotationExpression.js");r.d(t,"Tr2CurveEulerRotationExpression",(function(){return i.Tr2CurveEulerRotationExpression}));var n=r("./unsupported/curve/expression/Tr2CurveScalarExpression.js");r.d(t,"Tr2CurveScalarExpression",(function(){return n.Tr2CurveScalarExpression}));var a=r("./unsupported/curve/expression/Tr2CurveVector3Expression.js");r.d(t,"Tr2CurveVector3Expression",(function(){return a.Tr2CurveVector3Expression}));var o=r("./unsupported/curve/expression/Tw2CurveExpression.js");r.d(t,"Tw2CurveExpression",(function(){return o.Tw2CurveExpression}))},"./unsupported/curve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/curve/adapter/index.js");r.d(t,"Tr2RotationAdapter",(function(){return i.Tr2RotationAdapter})),r.d(t,"Tr2TranslationAdapter",(function(){return i.Tr2TranslationAdapter}));var n=r("./unsupported/curve/curve/index.js");r.d(t,"AudEventKey",(function(){return n.AudEventKey})),r.d(t,"AudEventCurve",(function(){return n.AudEventCurve})),r.d(t,"EveBezierCurve",(function(){return n.EveBezierCurve})),r.d(t,"Tr2BoneMatrixCurve",(function(){return n.Tr2BoneMatrixCurve})),r.d(t,"Tr2CurveConstant",(function(){return n.Tr2CurveConstant})),r.d(t,"Tw2CurveScalarKey",(function(){return n.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return n.Tr2CurveScalar})),r.d(t,"Tr2ScalarExprKey",(function(){return n.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return n.Tr2ScalarExprKeyCurve})),r.d(t,"Tr2ScalarExprCurve",(function(){return n.Tr2ScalarExprCurve}));var a=r("./unsupported/curve/expression/index.js");r.d(t,"Tr2CurveEulerRotationExpression",(function(){return a.Tr2CurveEulerRotationExpression})),r.d(t,"Tr2CurveScalarExpression",(function(){return a.Tr2CurveScalarExpression})),r.d(t,"Tr2CurveVector3Expression",(function(){return a.Tr2CurveVector3Expression})),r.d(t,"Tw2CurveExpression",(function(){return a.Tw2CurveExpression}));var o=r("./unsupported/curve/Tw2CurveSetRange.js");r.d(t,"Tw2CurveSetRange",(function(){return o.Tw2CurveSetRange}))},"./unsupported/eve/animation/EveAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimation",(function(){return m}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=f.meta.notImplemented,n=f.meta.type("EveAnimation"),a=f.meta.string,o=f.meta.uint,i(s=n((u=h((l=class{constructor(){d(this,"name",u,this),d(this,"loops",c,this)}}).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=h(l.prototype,"loops",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=l))||s)||s)},"./unsupported/eve/animation/EveAnimationCommand.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCommand",(function(){return g}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");var d,h,m,b,p,v,g=(i=f.meta.notImplemented,n=f.meta.type("EveAnimationCommand"),a=f.meta.uint,o=f.meta.todo("Identify default value"),i(s=n((c=class{constructor(){var e,t,r,i;e=this,t="command",i=this,(r=u)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},d=(l=c).prototype,h="command",m=[a,o],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),u=v,s=l))||s)||s)},"./unsupported/eve/animation/EveAnimationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCurve",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("EveAnimationCurve"),a=c.meta.string,i(o=n((u=class{constructor(){var e,t,r,i;e=this,t="name",i=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}},f=(s=u).prototype,d="name",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/eve/animation/EveAnimationState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationState",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js"),w=r("./unsupported/eve/animation/EveAnimationStateTransition.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T=(i=y.meta.notImplemented,n=y.meta.type("EveAnimationState"),a=y.meta.string,o=y.meta.struct("EveAnimationCurve"),s=y.meta.list("EveAnimationCommand"),l=y.meta.list("EveAnimationCommand"),u=y.meta.list("EveAnimationCommand"),c=y.meta.list(w.EveAnimationStateTransition),i(f=n((h=E((d=class{constructor(){_(this,"name",h,this),_(this,"animation",m,this),_(this,"curves",b,this),_(this,"commands",p,this),_(this,"initCommands",v,this),_(this,"transitions",g,this)}}).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=E(d.prototype,"animation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E(d.prototype,"curves",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=E(d.prototype,"commands",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=E(d.prototype,"initCommands",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=E(d.prototype,"transitions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f)||f)},"./unsupported/eve/animation/EveAnimationStateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateMachine",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y=r("./global/utils/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=y.meta.notImplemented,n=y.meta.type("EveAnimationStateMachine"),a=y.meta.string,o=y.meta.boolean,s=y.meta.list("EveAnimationState"),l=y.meta.list("EveAnimationStateTransition"),u=y.meta.string,c=y.meta.string,i(f=n((h=_((d=class{constructor(){w(this,"name",h,this),w(this,"autoPlayDefault",m,this),w(this,"states",b,this),w(this,"transitions",p,this),w(this,"trackMask",v,this),w(this,"defaultAnimation",g,this)}}).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=_(d.prototype,"autoPlayDefault",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=_(d.prototype,"states",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=_(d.prototype,"transitions",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=_(d.prototype,"trackMask",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=_(d.prototype,"defaultAnimation",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=d))||f)||f)},"./unsupported/eve/animation/EveAnimationStateTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateTransition",(function(){return m}));var i,n,a,o,s,l,u,c,f=r("./global/utils/index.js");function d(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function h(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=(i=f.meta.notImplemented,n=f.meta.type("EveAnimationStateTransition"),a=f.meta.string,o=f.meta.string,i(s=n((u=h((l=class e{constructor(){d(this,"state",u,this),d(this,"transition",c,this)}static blackStruct(t){var r=new e;return r.state=t.ReadStringU16(),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),r.transition=t.ReadStringU16(),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),t.ExpectU8(0,"unknown content"),r}}).prototype,"state",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=h(l.prototype,"transition",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=l))||s)||s)},"./unsupported/eve/animation/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/animation/EveAnimation.js");r.d(t,"EveAnimation",(function(){return i.EveAnimation}));var n=r("./unsupported/eve/animation/EveAnimationCommand.js");r.d(t,"EveAnimationCommand",(function(){return n.EveAnimationCommand}));var a=r("./unsupported/eve/animation/EveAnimationCurve.js");r.d(t,"EveAnimationCurve",(function(){return a.EveAnimationCurve}));var o=r("./unsupported/eve/animation/EveAnimationState.js");r.d(t,"EveAnimationState",(function(){return o.EveAnimationState}));var s=r("./unsupported/eve/animation/EveAnimationStateMachine.js");r.d(t,"EveAnimationStateMachine",(function(){return s.EveAnimationStateMachine}))},"./unsupported/eve/child/EveChildBulletStorm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBulletStorm",(function(){return E}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./eve/child/index.js"),y=r("./global/utils/index.js");function w(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function _(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=(i=y.meta.notImplemented,n=y.meta.type("EveChildBulletStorm"),a=y.meta.struct("Tw2Effect"),o=y.meta.uint,s=y.meta.float,l=y.meta.string,u=y.meta.float,i(c=n((v=class extends g.EveChild{constructor(...e){super(...e),w(this,"effect",d,this),w(this,"multiplier",h,this),w(this,"range",m,this),w(this,"sourceLocatorSet",b,this),w(this,"speed",p,this)}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}},d=_((f=v).prototype,"effect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_(f.prototype,"multiplier",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=_(f.prototype,"range",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=_(f.prototype,"sourceLocatorSet",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=_(f.prototype,"speed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=f))||c)||c)},"./unsupported/eve/child/EveChildCloud.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildCloud",(function(){return z}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js"),j=r("./global/math/index.js"),R=r("./eve/child/index.js");function P(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var z=(i=S.meta.notImplemented,n=S.meta.type("EveChildCloud"),a=S.meta.string,o=S.meta.float,s=S.meta.struct("Tw2Effect"),l=S.meta.uint,u=S.meta.quaternion,c=S.meta.vector3,f=S.meta.float,d=S.meta.vector3,i(h=n((T=class extends R.EveChild{constructor(...e){super(...e),P(this,"name",b,this),P(this,"cellScreenSize",p,this),P(this,"effect",v,this),P(this,"preTesselationLevel",g,this),P(this,"rotation",y,this),P(this,"scaling",w,this),P(this,"sortingModifier",_,this),P(this,"translation",E,this)}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}},b=x((m=T).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=x(m.prototype,"cellScreenSize",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=x(m.prototype,"effect",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=x(m.prototype,"preTesselationLevel",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=x(m.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.quat.create()}}),w=x(m.prototype,"scaling",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.fromValues(1,1,1)}}),_=x(m.prototype,"sortingModifier",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=x(m.prototype,"translation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.vec3.create()}}),h=m))||h)||h)},"./unsupported/eve/child/EveChildEffectPropagator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildEffectPropagator",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./eve/child/index.js"),E=r("./unsupported/curve/index.js");r("./eve/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=w.meta.notImplemented,n=w.meta.type("EveChildEffectPropagator",!0),a=w.meta.string,o=w.meta.struct("Tw2Effect"),s=w.meta.list(E.Tw2CurveScalarKey),l=w.meta.float,u=w.meta.struct(),c=w.meta.float,i(f=n((y=class extends _.EveChild{constructor(...e){super(...e),T(this,"name",h,this),T(this,"effect",m,this),T(this,"keys",b,this),T(this,"maxLifeTime",p,this),T(this,"triggerSphereRadiusCurve",v,this),T(this,"turbulenceAmplitude",g,this)}},h=S((d=y).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=S(d.prototype,"effect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S(d.prototype,"keys",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(d.prototype,"maxLifeTime",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=S(d.prototype,"triggerSphereRadiusCurve",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S(d.prototype,"turbulenceAmplitude",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=d))||f)||f)},"./unsupported/eve/child/EveChildExplosion.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildExplosion",(function(){return k}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L=r("./global/utils/index.js"),F=r("./global/math/index.js"),G=r("./eve/child/index.js");function B(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function N(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=(i=L.meta.notImplemented,n=L.meta.type("EveChildExplosion"),a=L.meta.string,o=L.meta.float,s=L.meta.struct("EveChildExplosion"),l=L.meta.float,u=L.meta.vector3,c=L.meta.float,f=L.meta.struct("EveChildExplosion"),d=L.meta.float,h=L.meta.float,m=L.meta.struct("EveChildExplosion"),b=L.meta.list("EveChildExplosion"),p=L.meta.matrix4,v=L.meta.quaternion,g=L.meta.vector3,i(y=n((I=class extends G.EveChild{constructor(...e){super(...e),B(this,"name",_,this),B(this,"globalDuration",E,this),B(this,"globalExplosion",T,this),B(this,"globalExplosionDelay",S,this),B(this,"globalScaling",j,this),B(this,"localDuration",R,this),B(this,"localExplosion",P,this),B(this,"localExplosionInterval",x,this),B(this,"localExplosionIntervalFactor",z,this),B(this,"localExplosionShared",O,this),B(this,"localExplosions",A,this),B(this,"localTransform",M,this),B(this,"rotation",C,this),B(this,"scaling",D,this)}GetResources(e=[]){this.localExplosion&&this.localExplosion.GetResources(e),this.localExplosionShared&&this.localExplosionShared.GetResources(e);for(var t=0;t<this.localExplosions.length;t++)this.localExplosions[t].GetResources(e);return e}},_=N((w=I).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=N(w.prototype,"globalDuration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=N(w.prototype,"globalExplosion",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=N(w.prototype,"globalExplosionDelay",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=N(w.prototype,"globalScaling",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(1,1,1)}}),R=N(w.prototype,"localDuration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=N(w.prototype,"localExplosion",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=N(w.prototype,"localExplosionInterval",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=N(w.prototype,"localExplosionIntervalFactor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=N(w.prototype,"localExplosionShared",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=N(w.prototype,"localExplosions",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=N(w.prototype,"localTransform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.mat4.create()}}),C=N(w.prototype,"rotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.quat.create()}}),D=N(w.prototype,"scaling",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(1,1,1)}}),y=w))||y)||y)},"./unsupported/eve/child/EveChildInheritProperties.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInheritProperties",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("EveChildInheritProperties")(i=class extends n.meta.Model{})||i)||i},"./unsupported/eve/child/EveChildInstanceContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInstanceContainer",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./global/math/index.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.notImplemented,n=d.meta.type("EveChildInstanceContainer"),a=d.meta.struct(),o=d.meta.vector3,i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),m(this,"source",u,this),m(this,"scaling",c,this)}},u=b((l=f).prototype,"source",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=b(l.prototype,"scaling",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.vec3.fromValues(1,1,1)}}),s=l))||s)||s)},"./unsupported/eve/child/EveChildLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLineSet",(function(){return B}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D=r("./global/utils/index.js"),I=r("./eve/child/index.js"),L=r("./global/math/index.js");function F(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function G(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var B=(i=D.meta.notImplemented,n=D.meta.type("EveChildLineSet"),a=D.meta.string,o=D.meta.boolean,s=D.meta.vector4,l=D.meta.vector4,u=D.meta.float,c=D.meta.boolean,f=D.meta.list(),d=D.meta.struct(),h=D.meta.float,m=D.meta.quaternion,b=D.meta.vector3,p=D.meta.float,v=D.meta.vector3,i(g=n((C=class extends I.EveChild{constructor(...e){super(...e),F(this,"name",w,this),F(this,"additiveBatches",_,this),F(this,"animColor",E,this),F(this,"baseColor",T,this),F(this,"brightness",S,this),F(this,"display",j,this),F(this,"lines",R,this),F(this,"lineSet",P,this),F(this,"minScreenSize",x,this),F(this,"rotation",z,this),F(this,"scaling",O,this),F(this,"scrollSpeed",A,this),F(this,"translation",M,this)}},w=G((y=C).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=G(y.prototype,"additiveBatches",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=G(y.prototype,"animColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec4.fromValues(0,0,0,1)}}),T=G(y.prototype,"baseColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec4.fromValues(0,0,0,1)}}),S=G(y.prototype,"brightness",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j=G(y.prototype,"display",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=G(y.prototype,"lines",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=G(y.prototype,"lineSet",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=G(y.prototype,"minScreenSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=G(y.prototype,"rotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.quat.create()}}),O=G(y.prototype,"scaling",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.create()}}),A=G(y.prototype,"scrollSpeed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=G(y.prototype,"translation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.vec3.create()}}),g=y))||g)||g)},"./unsupported/eve/child/EveChildLink.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLink",(function(){return T}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g=r("./global/utils/index.js"),y=r("./global/math/index.js"),w=r("./eve/child/index.js");function _(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var T=(i=g.meta.notImplemented,n=g.meta.type("EveChildLink"),a=g.meta.string,o=g.meta.list("Tw2ValueBinding"),s=g.meta.list("Tw2Curve"),l=g.meta.struct("Tw2Mesh"),u=g.meta.quaternion,i(c=n((v=class extends w.EveChild{constructor(...e){super(...e),_(this,"name",d,this),_(this,"linkStrengthBindings",h,this),_(this,"linkStrengthCurves",m,this),_(this,"mesh",b,this),_(this,"rotation",p,this)}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),e}},d=E((f=v).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=E(f.prototype,"linkStrengthBindings",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=E(f.prototype,"linkStrengthCurves",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=E(f.prototype,"mesh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=E(f.prototype,"rotation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.quat.create()}}),c=f))||c)||c)},"./unsupported/eve/child/EveChildParticleSphere.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSphere",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./eve/child/index.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=M.meta.notImplemented,n=M.meta.type("EveChildParticleSphere"),a=M.meta.string,o=M.meta.list("Tw2ParticleAttributeGenerator"),s=M.meta.float,l=M.meta.struct("Tw2InstancedMesh"),u=M.meta.float,c=M.meta.struct("Tw2ParticleSystem"),f=M.meta.float,d=M.meta.float,h=M.meta.float,m=M.meta.float,b=M.meta.float,p=M.meta.boolean,i(v=n((A=class extends C.EveChild{constructor(...e){super(...e),D(this,"name",y,this),D(this,"generators",w,this),D(this,"maxSpeed",_,this),D(this,"mesh",E,this),D(this,"movementScale",T,this),D(this,"particleSystem",S,this),D(this,"positionShiftDecreaseSpeed",j,this),D(this,"positionShiftIncreaseSpeed",R,this),D(this,"positionShiftMax",P,this),D(this,"positionShiftMin",x,this),D(this,"radius",z,this),D(this,"useSpaceObjectData",O,this)}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),this.particleSystem&&this.particleSystem.GetResources&&this.particleSystem.GetResources(e),e}},y=I((g=A).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=I(g.prototype,"generators",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=I(g.prototype,"maxSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=I(g.prototype,"mesh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=I(g.prototype,"movementScale",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=I(g.prototype,"particleSystem",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=I(g.prototype,"positionShiftDecreaseSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=I(g.prototype,"positionShiftIncreaseSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=I(g.prototype,"positionShiftMax",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=I(g.prototype,"positionShiftMin",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=I(g.prototype,"radius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=I(g.prototype,"useSpaceObjectData",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=g))||v)||v)},"./unsupported/eve/child/EveChildQuad.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildQuad",(function(){return C}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x=r("./global/utils/index.js"),z=r("./global/math/index.js"),O=r("./eve/child/index.js");function A(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function M(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var C=(i=x.meta.notImplemented,n=x.meta.type("EveChildQuad"),a=x.meta.string,o=x.meta.float,s=x.meta.color,l=x.meta.struct(),u=x.meta.matrix4,c=x.meta.float,f=x.meta.quaternion,d=x.meta.vector3,h=x.meta.vector3,m=x.meta.float32Array,i(b=n((P=class extends O.EveChild{constructor(...e){super(...e),A(this,"name",v,this),A(this,"brightness",g,this),A(this,"color",y,this),A(this,"effect",w,this),A(this,"localTransform",_,this),A(this,"minScreenSize",E,this),A(this,"rotation",T,this),A(this,"scaling",S,this),A(this,"translation",j,this),A(this,"viewRotation",R,this)}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}},v=M((p=P).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=M(p.prototype,"brightness",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=M(p.prototype,"color",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec4.create()}}),w=M(p.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M(p.prototype,"localTransform",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.mat4.create()}}),E=M(p.prototype,"minScreenSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=M(p.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.quat.create()}}),S=M(p.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.fromValues(1,1,1)}}),j=M(p.prototype,"translation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.create()}}),R=M(p.prototype,"viewRotation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b)||b)},"./unsupported/eve/child/EveChildSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildSpherePin",(function(){return j}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w=r("./global/utils/index.js"),_=r("./eve/child/index.js"),E=r("./global/math/index.js");function T(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function S(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var j=(i=w.meta.notImplemented,n=w.meta.type("EveChildSpherePin"),a=w.meta.string,o=w.meta.vector3,s=w.meta.float,l=w.meta.float,u=w.meta.struct(),c=w.meta.uint,i(f=n((y=class extends _.EveChild{constructor(...e){super(...e),T(this,"name",h,this),T(this,"centerNormal",m,this),T(this,"pinRadius",b,this),T(this,"pinMaxRadius",p,this),T(this,"mesh",v,this),T(this,"minScreenSize",g,this)}},h=S((d=y).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=S(d.prototype,"centerNormal",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.vec4.fromValues(0,0,0)}}),b=S(d.prototype,"pinRadius",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=S(d.prototype,"pinMaxRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=S(d.prototype,"mesh",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S(d.prototype,"minScreenSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=d))||f)||f)},"./unsupported/eve/child/EveLineChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLineChildContainer",(function(){return v}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./eve/child/index.js"),m=r("./global/math/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=d.meta.notImplemented,n=d.meta.type("EveLineChildContainer",!0),a=d.meta.list(),o=d.meta.quaternion,i(s=n((f=class extends h.EveChild{constructor(...e){super(...e),b(this,"lines",u,this),b(this,"rotation",c,this)}},u=p((l=f).prototype,"lines",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=p(l.prototype,"rotation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.quat.create()}}),s=l))||s)||s)},"./unsupported/eve/child/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/child/modifier/index.js");r.d(t,"EveChildModifierAttachToBone",(function(){return i.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return i.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return i.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return i.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return i.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return i.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return i.EveChildModifierTranslateWithCamera}));var n=r("./unsupported/eve/child/EveChildBulletStorm.js");r.d(t,"EveChildBulletStorm",(function(){return n.EveChildBulletStorm}));var a=r("./unsupported/eve/child/EveChildCloud.js");r.d(t,"EveChildCloud",(function(){return a.EveChildCloud}));var o=r("./unsupported/eve/child/EveChildEffectPropagator.js");r.d(t,"EveChildEffectPropagator",(function(){return o.EveChildEffectPropagator}));var s=r("./unsupported/eve/child/EveChildExplosion.js");r.d(t,"EveChildExplosion",(function(){return s.EveChildExplosion}));var l=r("./unsupported/eve/child/EveChildInheritProperties.js");r.d(t,"EveChildInheritProperties",(function(){return l.EveChildInheritProperties}));var u=r("./unsupported/eve/child/EveChildInstanceContainer.js");r.d(t,"EveChildInstanceContainer",(function(){return u.EveChildInstanceContainer}));var c=r("./unsupported/eve/child/EveChildLink.js");r.d(t,"EveChildLink",(function(){return c.EveChildLink}));var f=r("./unsupported/eve/child/EveChildParticleSphere.js");r.d(t,"EveChildParticleSphere",(function(){return f.EveChildParticleSphere}));var d=r("./unsupported/eve/child/EveChildQuad.js");r.d(t,"EveChildQuad",(function(){return d.EveChildQuad}));var h=r("./unsupported/eve/child/EveChildSpherePin.js");r.d(t,"EveChildSpherePin",(function(){return h.EveChildSpherePin}));var m=r("./unsupported/eve/child/EveChildLineSet.js");r.d(t,"EveChildLineSet",(function(){return m.EveChildLineSet}));var b=r("./unsupported/eve/child/EveLineChildContainer.js");r.d(t,"EveLineChildContainer",(function(){return b.EveLineChildContainer}))},"./unsupported/eve/child/modifier/EveChildModifier.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifier",(function(){return l}));var i,n,a,o=r("./global/utils/index.js"),s=r("./global/math/index.js"),l=o.meta.type("EveChildModifier")((a=n=class extends o.meta.Model{},n.global={mat4_0:s.mat4.create()},i=a))||i},"./unsupported/eve/child/modifier/EveChildModifierAttachToBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierAttachToBone",(function(){return y}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./unsupported/eve/child/modifier/EveChildModifier.js"),d=r("./global/math/index.js");var h,m,b,p,v,g,y=(i=c.meta.notImplemented,n=c.meta.type("EveChildModifierAttachToBone"),a=c.meta.uint,i(o=n((u=class extends f.EveChildModifier{constructor(...e){var t,r,i,n;super(...e),t=this,r="boneIndex",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}Modify(e,t){if(this.boneIndex>=0){var r=t.vs.Get("JointMat"),i=d.mat4.fromJointMatIndex(f.EveChildModifier.global.mat4_0,r,this.boneIndex);return d.mat4.multiply(e.localTransform,i,e.localTransform),!0}return!1}},h=(s=u).prototype,m="boneIndex",b=[a],p={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}},g={},Object.keys(p).forEach((function(e){g[e]=p[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=b.slice().reverse().reduce((function(e,t){return t(h,m,e)||e}),g),v&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(v):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(h,m,g),g=null),l=g,o=s))||o)||o)},"./unsupported/eve/child/modifier/EveChildModifierBillboard2D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard2D",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./unsupported/eve/child/modifier/EveChildModifier.js"),o=(0,n.meta.notImplemented)(i=n.meta.type("EveChildModifierBillboard2D")(i=class extends a.EveChildModifier{})||i)||i},"./unsupported/eve/child/modifier/EveChildModifierBillboard3D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard3D",(function(){return g}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./unsupported/eve/child/modifier/EveChildModifier.js");var d,h,m,b,p,v,g=(i=c.meta.notImplemented,n=c.meta.type("EveChildModifierBillboard3D"),a=c.meta.boolean,i(o=n((u=class extends f.EveChildModifier{constructor(...e){var t,r,i,n;super(...e),t=this,r="fixed",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},d=(s=u).prototype,h="fixed",m=[a],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),l=v,o=s))||o)||o)},"./unsupported/eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./unsupported/eve/child/modifier/EveChildModifier.js"),o=(0,n.meta.notImplemented)(i=n.meta.type("EveChildModifierCameraOrientedRotationConstrained")(i=class extends a.EveChildModifier{})||i)||i},"./unsupported/eve/child/modifier/EveChildModifierHalo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierHalo",(function(){return o}));var i,n=r("./unsupported/eve/child/modifier/EveChildModifier.js"),a=r("./global/utils/index.js"),o=(0,a.meta.notImplemented)(i=a.meta.type("EveChildModifierHalo")(i=class extends n.EveChildModifier{})||i)||i},"./unsupported/eve/child/modifier/EveChildModifierSRT.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierSRT",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./global/math/index.js"),p=r("./unsupported/eve/child/modifier/EveChildModifier.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=m.meta.notImplemented,n=m.meta.type("EveChildModifierSRT"),a=m.meta.quaternion,o=m.meta.vector3,s=m.meta.vector3,i(l=n((h=class extends p.EveChildModifier{constructor(...e){super(...e),v(this,"rotation",c,this),v(this,"scaling",f,this),v(this,"translation",d,this)}},c=g((u=h).prototype,"rotation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.quat.create()}}),f=g(u.prototype,"scaling",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.fromValues(1,1,1)}}),d=g(u.prototype,"translation",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),l=u))||l)||l)},"./unsupported/eve/child/modifier/EveChildModifierTranslateWithCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./unsupported/eve/child/modifier/EveChildModifier.js"),o=(0,n.meta.notImplemented)(i=n.meta.type("EveChildModifierTranslateWithCamera")(i=class extends a.EveChildModifier{})||i)||i},"./unsupported/eve/child/modifier/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/child/modifier/EveChildModifierAttachToBone.js");r.d(t,"EveChildModifierAttachToBone",(function(){return i.EveChildModifierAttachToBone}));var n=r("./unsupported/eve/child/modifier/EveChildModifierBillboard2D.js");r.d(t,"EveChildModifierBillboard2D",(function(){return n.EveChildModifierBillboard2D}));var a=r("./unsupported/eve/child/modifier/EveChildModifierBillboard3D.js");r.d(t,"EveChildModifierBillboard3D",(function(){return a.EveChildModifierBillboard3D}));var o=r("./unsupported/eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js");r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return o.EveChildModifierCameraOrientedRotationConstrained}));var s=r("./unsupported/eve/child/modifier/EveChildModifierHalo.js");r.d(t,"EveChildModifierHalo",(function(){return s.EveChildModifierHalo}));var l=r("./unsupported/eve/child/modifier/EveChildModifierSRT.js");r.d(t,"EveChildModifierSRT",(function(){return l.EveChildModifierSRT}));var u=r("./unsupported/eve/child/modifier/EveChildModifierTranslateWithCamera.js");r.d(t,"EveChildModifierTranslateWithCamera",(function(){return u.EveChildModifierTranslateWithCamera}))},"./unsupported/eve/effect/EveStarfield.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStarfield",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=S.meta.notImplemented,n=S.meta.type("EveStarfield"),a=S.meta.struct("Tw2Effect"),o=S.meta.float,s=S.meta.float,l=S.meta.float,u=S.meta.float,c=S.meta.float,f=S.meta.uint,d=S.meta.uint,i(h=n((T=class extends S.meta.Model{constructor(...e){super(...e),j(this,"effect",b,this),j(this,"maxDist",p,this),j(this,"maxFlashRate",v,this),j(this,"minDist",g,this),j(this,"minFlashIntensity",y,this),j(this,"minFlashRate",w,this),j(this,"numStars",_,this),j(this,"seed",E,this)}},b=R((m=T).prototype,"effect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=R(m.prototype,"maxDist",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(m.prototype,"maxFlashRate",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=R(m.prototype,"minDist",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(m.prototype,"minFlashIntensity",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=R(m.prototype,"minFlashRate",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=R(m.prototype,"numStars",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=R(m.prototype,"seed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h)||h)},"./unsupported/eve/effect/EveStretch2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch2",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=S.meta.notImplemented,n=S.meta.type("EveStretch2"),a=S.meta.string,o=S.meta.struct(),s=S.meta.struct(),l=S.meta.struct("Tw2Effect"),u=S.meta.struct("Tw2CurveSet"),c=S.meta.struct(),f=S.meta.struct(),d=S.meta.uint,i(h=n((T=class extends S.meta.Model{constructor(...e){super(...e),j(this,"name",b,this),j(this,"destinationEmitter",p,this),j(this,"destinationLight",v,this),j(this,"effect",g,this),j(this,"loop",y,this),j(this,"sourceEmitter",w,this),j(this,"sourceLight",_,this),j(this,"quadCount",E,this)}},b=R((m=T).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=R(m.prototype,"destinationEmitter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=R(m.prototype,"destinationLight",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R(m.prototype,"effect",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R(m.prototype,"loop",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R(m.prototype,"sourceEmitter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=R(m.prototype,"sourceLight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=R(m.prototype,"quadCount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h)||h)},"./unsupported/eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/effect/EveStarfield.js");r.d(t,"EveStarfield",(function(){return i.EveStarfield}));var n=r("./unsupported/eve/effect/EveStretch2.js");r.d(t,"EveStretch2",(function(){return n.EveStretch2}))},"./unsupported/eve/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/animation/index.js");r.d(t,"EveAnimation",(function(){return i.EveAnimation})),r.d(t,"EveAnimationCommand",(function(){return i.EveAnimationCommand})),r.d(t,"EveAnimationCurve",(function(){return i.EveAnimationCurve})),r.d(t,"EveAnimationState",(function(){return i.EveAnimationState})),r.d(t,"EveAnimationStateMachine",(function(){return i.EveAnimationStateMachine}));var n=r("./unsupported/eve/child/index.js");r.d(t,"EveChildModifierAttachToBone",(function(){return n.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return n.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return n.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return n.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return n.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return n.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return n.EveChildModifierTranslateWithCamera})),r.d(t,"EveChildBulletStorm",(function(){return n.EveChildBulletStorm})),r.d(t,"EveChildCloud",(function(){return n.EveChildCloud})),r.d(t,"EveChildEffectPropagator",(function(){return n.EveChildEffectPropagator})),r.d(t,"EveChildExplosion",(function(){return n.EveChildExplosion})),r.d(t,"EveChildInheritProperties",(function(){return n.EveChildInheritProperties})),r.d(t,"EveChildInstanceContainer",(function(){return n.EveChildInstanceContainer})),r.d(t,"EveChildLink",(function(){return n.EveChildLink})),r.d(t,"EveChildParticleSphere",(function(){return n.EveChildParticleSphere})),r.d(t,"EveChildQuad",(function(){return n.EveChildQuad})),r.d(t,"EveChildSpherePin",(function(){return n.EveChildSpherePin})),r.d(t,"EveChildLineSet",(function(){return n.EveChildLineSet})),r.d(t,"EveLineChildContainer",(function(){return n.EveLineChildContainer}));var a=r("./unsupported/eve/effect/index.js");r.d(t,"EveStarfield",(function(){return a.EveStarfield})),r.d(t,"EveStretch2",(function(){return a.EveStretch2}));var o=r("./unsupported/eve/item/index.js");r.d(t,"EveBanner",(function(){return o.EveBanner})),r.d(t,"EveBoosterSet2Batch",(function(){return o.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return o.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return o.EveBoosterSet2})),r.d(t,"EveHazeSetBatch",(function(){return o.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return o.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return o.EveHazeSet})),r.d(t,"EveSpriteLineSetBatch",(function(){return o.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return o.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return o.EveSpriteLineSet})),r.d(t,"EveTrailSetRenderBatch",(function(){return o.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return o.EveTrailsSet}));var s=r("./unsupported/eve/object/index.js");r.d(t,"EveEffectRoot2",(function(){return s.EveEffectRoot2})),r.d(t,"EveMobile",(function(){return s.EveMobile})),r.d(t,"EveRootTransform",(function(){return s.EveRootTransform})),r.d(t,"EveStation2",(function(){return s.EveStation2}));var l=r("./unsupported/eve/particle/index.js");r.d(t,"EveParticleDirectForce",(function(){return l.EveParticleDirectForce})),r.d(t,"EveParticleDragForce",(function(){return l.EveParticleDragForce}));var u=r("./unsupported/eve/pi/index.js");r.d(t,"EveConnector",(function(){return u.EveConnector})),r.d(t,"EveLocalPositionCurve",(function(){return u.EveLocalPositionCurve})),r.d(t,"EveSpherePin",(function(){return u.EveSpherePin}));var c=r("./unsupported/eve/ui/index.js");r.d(t,"EveTacticalOverlay",(function(){return c.EveTacticalOverlay})),r.d(t,"EveUiObject",(function(){return c.EveUiObject}))},"./unsupported/eve/item/EveBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBanner",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x=r("./global/utils/index.js"),z=r("./global/math/index.js");function O(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var M=(i=x.meta.type("EveBanner"),n=x.meta.notImplemented,a=x.meta.string,o=x.meta.float,s=x.meta.float,l=x.meta.uint,u=x.meta.boolean,c=x.meta.vector3,f=x.meta.quaternion,d=x.meta.vector3,h=x.meta.uint,m=x.meta.matrix4,i(b=n((P=class extends x.meta.Model{constructor(...e){super(...e),O(this,"name",v,this),O(this,"angleX",g,this),O(this,"angleY",y,this),O(this,"boneIndex",w,this),O(this,"display",_,this),O(this,"position",E,this),O(this,"rotation",T,this),O(this,"scaling",S,this),O(this,"usage",j,this),O(this,"transform",R,this)}OnValueChanged(){z.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling)}},v=A((p=P).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=A(p.prototype,"angleX",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=A(p.prototype,"angleY",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=A(p.prototype,"boneIndex",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=A(p.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=A(p.prototype,"position",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.create()}}),T=A(p.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.quat.create()}}),S=A(p.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.fromValues(1,1,1)}}),j=A(p.prototype,"usage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=A(p.prototype,"transform",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.mat4.create()}}),b=p))||b)||b)},"./unsupported/eve/item/EveBoosterSet2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterSet2Batch",(function(){return ee})),r.d(t,"EveBoosterSet2Item",(function(){return te})),r.d(t,"EveBoosterSet2",(function(){return re}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K=r("./global/utils/index.js"),X=r("./global/math/index.js"),Q=r("./core/index.js"),Z=r("./eve/index.js");function J(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function $(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ee=(0,K.meta.notImplemented)(i=class extends Q.Tw2RenderBatch{constructor(...e){super(...e),this.boosterSet=null}Commit(e){this.boosterSet.Render(e)}})||i,te=(0,K.meta.notImplemented)(n=K.meta.type("EveBoosterSet2Item")(n=class extends Z.EveObjectSetItem{})||n)||n,re=(a=K.meta.notImplemented,o=K.meta.type("EveBoosterSet2"),s=K.meta.boolean,l=K.meta.float,u=K.meta.struct("Tw2Effect"),c=K.meta.color,f=K.meta.float,d=K.meta.struct("EveSpriteSet"),h=K.meta.color,m=K.meta.float,b=K.meta.float,p=K.meta.color,v=K.meta.float,g=K.meta.float,y=K.meta.float,w=K.meta.color,_=K.meta.float,E=K.meta.float,T=K.meta.struct("EveTrailsSet"),S=K.meta.color,j=K.meta.color,a(R=o((Y=class extends Z.EveObjectSet{constructor(...e){super(...e),J(this,"alwaysOn",x,this),J(this,"alwaysOnIntensity",z,this),J(this,"effect",O,this),J(this,"glowColor",A,this),J(this,"glowScale",M,this),J(this,"glows",C,this),J(this,"haloColor",D,this),J(this,"haloScaleX",I,this),J(this,"haloScaleY",L,this),J(this,"lightColor",F,this),J(this,"lightFlickerAmplitude",G,this),J(this,"lightFlickerFrequency",B,this),J(this,"lightRadius",N,this),J(this,"lightWarpColor",k,this),J(this,"lightWarpRadius",U,this),J(this,"symHaloScale",V,this),J(this,"trails",H,this),J(this,"warpGlowColor",q,this),J(this,"warpHaloColor",W,this)}},x=$((P=Y).prototype,"alwaysOn",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=$(P.prototype,"alwaysOnIntensity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=$(P.prototype,"effect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=$(P.prototype,"glowColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),M=$(P.prototype,"glowScale",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=$(P.prototype,"glows",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=$(P.prototype,"haloColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),I=$(P.prototype,"haloScaleX",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=$(P.prototype,"haloScaleY",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=$(P.prototype,"lightColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),G=$(P.prototype,"lightFlickerAmplitude",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=$(P.prototype,"lightFlickerFrequency",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=$(P.prototype,"lightRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=$(P.prototype,"lightWarpColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),U=$(P.prototype,"lightWarpRadius",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=$(P.prototype,"symHaloScale",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=$(P.prototype,"trails",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=$(P.prototype,"warpGlowColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),W=$(P.prototype,"warpHaloColor",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.vec4.create()}}),R=P))||R)||R)},"./unsupported/eve/item/EveHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveHazeSetBatch",(function(){return F})),r.d(t,"EveHazeSetItem",(function(){return G})),r.d(t,"EveHazeSet",(function(){return B}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O=r("./global/utils/index.js"),A=r("./global/math/index.js"),M=r("./core/index.js"),C=r("./eve/index.js"),D=r("./global/tw2.js");function I(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function L(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var F=(0,O.meta.notImplemented)(i=class extends M.Tw2RenderBatch{constructor(...e){super(...e),this.hazeSet=null}Commit(e){this.hazeSet.Render(e)}})||i,G=(n=O.meta.notImplemented,a=O.meta.type("EveHazeSetItem"),o=O.meta.boolean,s=O.meta.uint,l=O.meta.float,u=O.meta.float,c=O.meta.vector3,f=O.meta.quaternion,d=O.meta.vector3,h=O.meta.float,m=O.meta.float,n(b=a((R=class extends C.EveObjectSetItem{constructor(...e){super(...e),I(this,"boosterGainInfluence",v,this),I(this,"color",g,this),I(this,"hazeBrightness",y,this),I(this,"hazeFalloff",w,this),I(this,"position",_,this),I(this,"rotation",E,this),I(this,"scaling",T,this),I(this,"sourceBrightness",S,this),I(this,"sourceSize",j,this)}OnValueChanged(){A.mat4.fromRotationTranslationScale(this._transform,this.rotation,this.position,this.scaling),this._dirty=!0}},v=L((p=R).prototype,"boosterGainInfluence",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=L(p.prototype,"color",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec4.fromValues(0,0,0,1)}}),y=L(p.prototype,"hazeBrightness",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=L(p.prototype,"hazeFalloff",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=L(p.prototype,"position",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.create()}}),E=L(p.prototype,"rotation",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.quat.create()}}),T=L(p.prototype,"scaling",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.fromValues(1,1,1)}}),S=L(p.prototype,"sourceBrightness",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=L(p.prototype,"sourceSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b)||b),B=(0,O.meta.notImplemented)(P=O.meta.type("EveHazeSet")((z=x=class e extends C.EveObjectSet{constructor(...t){super(...t),this.effect=M.Tw2Effect.from({effectFilePath:"cdn:/graphics/effect.gles2/managed/space/spaceobject/fx/hazespherical.fx"}),this._decl=M.Tw2VertexDeclaration.from(e.vertexDeclarations),this._vertexBuffer=null,this._indexBuffer=null,this._indexOrder=[0,2,1,0,3,2]}get hazeItems(){return this.items}set hazeItems(e){this.items=e}GetResources(e=[]){return this.effect?this.effect.GetResources(e):e}Unload(e){this._vertexBuffer&&(D.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(D.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}SetIndexOrder(e,t,r,i,n,a){this._indexOrder[0]=e,this._indexOrder[1]=t,this._indexOrder[2]=r,this._indexOrder[3]=i,this._indexOrder[4]=n,this._indexOrder[5]=a,this._dirty=!0}Rebuild(){this.Unload(!0),this.RebuildItems(),this._dirty=!1;var e=this._visibleItems.length;if(e){for(var{mat4_0:t,vec3_0:r}=C.EveObjectSet.global,i=new Float32Array(35*e*4),n=0;n<e;n++){var a=this._visibleItems[n],o=4*n*35;A.mat4.fromRotationTranslationScale(t,a.rotation,a.position,a.scaling);for(var s=0;s<4;s++){var l=o+35*s;i[l+0]=t[0],i[l+1]=t[4],i[l+2]=t[8],i[l+3]=t[12],i[l+4]=t[1],i[l+5]=t[5],i[l+6]=t[9],i[l+7]=t[13],i[l+8]=t[2],i[l+9]=t[6],i[l+10]=t[10],i[l+11]=t[14],A.vec3.multiply(r,a.scaling,[a.sourceSize,a.sourceSize,a.sourceSize]),A.mat4.fromRotationTranslationScale(t,a.rotation,a.position,r),i[l+12]=t[0],i[l+13]=t[4],i[l+14]=t[8],i[l+15]=t[12],i[l+16]=t[1],i[l+17]=t[5],i[l+18]=t[9],i[l+19]=t[13],i[l+20]=t[2],i[l+21]=t[6],i[l+22]=t[10],i[l+23]=t[14],i[l+24]=a.hazeBrightness,i[l+25]=a.hazeFalloff,i[l+26]=a.sourceSize,i[l+27]=a.sourceBrightness,i[l+28]=a.color[0],i[l+29]=a.color[1],i[l+30]=a.color[2],i[l+31]=a.color[3],i[l+32]=1,i[l+33]=1,i[l+34]=1}}var{gl:u}=D.device;this._vertexBuffer=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,this._vertexBuffer),u.bufferData(u.ARRAY_BUFFER,i,u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,null);for(var c=this._indexOrder,f=new Uint16Array(6*e),d=0;d<e;++d){var h=6*d,m=4*d;f[h]=m+c[0],f[h+1]=m+c[1],f[h+2]=m+c[2],f[h+3]=m+c[3],f[h+4]=m+c[4],f[h+5]=m+c[5]}this._indexBuffer=u.createBuffer(),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this._indexBuffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,f,u.STATIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*e,super.Rebuild()}else super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===D.device.RM_ADDITIVE&&this._vertexBuffer&&this._indexBuffer){var i=new F;i.renderMode=D.device.RM_ADDITIVE,i.hazeSet=this,i.perObjectData=r,t.Commit(i)}}Render(e){if(!(this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;var{gl:t}=D.device;D.device.SetStandardStates(D.device.RM_ADDITIVE),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(var r=0;r<this.effect.GetPassCount(e);++r){if(this.effect.ApplyPass(e,r),!this._decl.SetDeclaration(D.device,this.effect.GetPassInput(e,r),140))return!1;D.device.ApplyShadowState(),t.drawElements(t.TRIANGLES,this._indexBuffer.count,t.UNSIGNED_SHORT,0)}return!0}},x.Item=G,x.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:0,elements:4,attr:"attr0"},{usage:"TEXCOORD",usageIndex:1,elements:4,attr:"attr1"},{usage:"TEXCOORD",usageIndex:2,elements:4,attr:"attr2"},{usage:"TEXCOORD",usageIndex:3,elements:4,attr:"attr3"},{usage:"TEXCOORD",usageIndex:4,elements:4,attr:"attr4"},{usage:"TEXCOORD",usageIndex:5,elements:4,attr:"attr5"},{usage:"TEXCOORD",usageIndex:6,elements:4,attr:"attr6"},{usage:"COLOR",usageIndex:0,elements:4,attr:"attr7"},{usage:"TEXCOORD",usageIndex:7,elements:3,attr:"attr8"}],P=z))||P)||P},"./unsupported/eve/item/EveSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteLineSetBatch",(function(){return Y})),r.d(t,"EveSpriteLineSetItem",(function(){return K})),r.d(t,"EveSpriteLineSet",(function(){return X}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U=r("./global/utils/index.js"),V=r("./global/math/index.js"),H=r("./eve/index.js");function q(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function W(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Y=(0,U.meta.notImplemented)(i=class{constructor(){this.spriteLineSet=null}Commit(e){this.spriteLineSet.Render(e)}})||i,K=(n=U.meta.notImplemented,a=U.meta.type("EveSpriteLineSetItem"),o=U.meta.float,s=U.meta.float,l=U.meta.float,u=U.meta.uint,c=U.meta.uint,f=U.meta.float,d=U.meta.float,h=U.meta.boolean,m=U.meta.float,b=U.meta.float,p=U.meta.vector3,v=U.meta.quaternion,g=U.meta.vector3,y=U.meta.float,w=U.meta.boolean,_=U.meta.matrix4,n(E=a((N=class extends H.EveObjectSetItem{constructor(...e){super(...e),q(this,"blinkPhase",S,this),q(this,"blinkPhaseShift",j,this),q(this,"blinkRate",R,this),q(this,"boneIndex",P,this),q(this,"colorType",x,this),q(this,"falloff",z,this),q(this,"intensity",O,this),q(this,"isCircle",A,this),q(this,"maxScale",M,this),q(this,"minScale",C,this),q(this,"position",D,this),q(this,"rotation",I,this),q(this,"scaling",L,this),q(this,"spacing",F,this),q(this,"display",G,this),q(this,"transform",B,this),this._dirty=!0}OnValueChanged(){V.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}},S=W((T=N).prototype,"blinkPhase",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=W(T.prototype,"blinkPhaseShift",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=W(T.prototype,"blinkRate",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=W(T.prototype,"boneIndex",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=W(T.prototype,"colorType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=W(T.prototype,"falloff",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=W(T.prototype,"intensity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=W(T.prototype,"isCircle",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=W(T.prototype,"maxScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=W(T.prototype,"minScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=W(T.prototype,"position",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.create()}}),I=W(T.prototype,"rotation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.quat.create()}}),L=W(T.prototype,"scaling",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.vec3.fromValues(1,1,1)}}),F=W(T.prototype,"spacing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=W(T.prototype,"display",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),B=W(T.prototype,"transform",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.mat4.create()}}),E=T))||E)||E),X=(0,U.meta.notImplemented)(k=U.meta.type("EveSpriteLineSet")(k=class extends H.EveObjectSet{})||k)||k},"./unsupported/eve/item/EveTrailsSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTrailSetRenderBatch",(function(){return w})),r.d(t,"EveTrailsSet",(function(){return _}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js"),p=r("./global/index.js"),v=r("./core/batch/index.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(0,b.meta.notImplemented)(i=class extends v.Tw2RenderBatch{constructor(...e){super(...e),this.trailsSet=null}Commit(e){this.boosters.Render(e)}})||i,_=(n=b.meta.notImplemented,a=b.meta.type("EveTrailSet"),o=b.meta.struct(),s=b.meta.path,l=b.meta.boolean,n(u=a((m=class extends b.meta.Model{constructor(...e){super(...e),g(this,"effect",f,this),g(this,"geometryResPath",d,this),g(this,"display",h,this),this._geometryRes=null}Initialize(){this.geometryResPath&&(this._geometryRes=p.tw2.GetResource(this.geometryResPath,e=>this.OnResPrepared(e)))}OnResPrepared(e){}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),this._geometryRes&&!e.includes(this._geometryRes)&&e.push(this._geometryRes),e}},f=y((c=m).prototype,"effect",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y(c.prototype,"geometryResPath",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=y(c.prototype,"display",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=c))||u)||u)},"./unsupported/eve/item/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/item/EveBanner.js");r.d(t,"EveBanner",(function(){return i.EveBanner}));var n=r("./unsupported/eve/item/EveBoosterSet2.js");r.d(t,"EveBoosterSet2Batch",(function(){return n.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return n.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return n.EveBoosterSet2}));var a=r("./unsupported/eve/item/EveHazeSet.js");r.d(t,"EveHazeSetBatch",(function(){return a.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return a.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return a.EveHazeSet}));var o=r("./unsupported/eve/item/EveSpriteLineSet.js");r.d(t,"EveSpriteLineSetBatch",(function(){return o.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return o.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return o.EveSpriteLineSet}));var s=r("./unsupported/eve/item/EveTrailsSet.js");r.d(t,"EveTrailSetRenderBatch",(function(){return s.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return s.EveTrailsSet}))},"./unsupported/eve/object/EveEffectRoot2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot2",(function(){return q}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N=r("./global/utils/index.js"),k=r("./global/math/index.js"),U=r("./eve/object/EveObject.js");function V(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function H(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var q=(i=N.meta.notImplemented,n=N.meta.type("EveEffectRoot2"),a=N.meta.string,o=N.meta.vector3,s=N.meta.float,l=N.meta.list(),u=N.meta.list("Tw2CurveSet"),c=N.meta.float,f=N.meta.boolean,d=N.meta.list("EveChild"),h=N.meta.list("Tr2PointLight"),m=N.meta.list("TriObserverLocal"),b=N.meta.quaternion,p=N.meta.struct(),v=N.meta.vector3,g=N.meta.color,y=N.meta.float,w=N.meta.vector3,i(_=n((B=class extends U.EveObject{constructor(...e){super(...e),V(this,"name",T,this),V(this,"boundingSphereCenter",S,this),V(this,"boundingSphereRadius",j,this),V(this,"controllers",R,this),V(this,"curveSets",P,this),V(this,"duration",x,this),V(this,"dynamicLOD",z,this),V(this,"effectChildren",O,this),V(this,"lights",A,this),V(this,"observers",M,this),V(this,"rotation",C,this),V(this,"rotationCurve",D,this),V(this,"scaling",I,this),V(this,"secondaryLightingEmissiveColor",L,this),V(this,"secondaryLightingSphereRadius",F,this),V(this,"translation",G,this)}},T=H((E=B).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=H(E.prototype,"boundingSphereCenter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),j=H(E.prototype,"boundingSphereRadius",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=H(E.prototype,"controllers",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=H(E.prototype,"curveSets",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=H(E.prototype,"duration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=H(E.prototype,"dynamicLOD",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=H(E.prototype,"effectChildren",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=H(E.prototype,"lights",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=H(E.prototype,"observers",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=H(E.prototype,"rotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.quat.create()}}),D=H(E.prototype,"rotationCurve",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=H(E.prototype,"scaling",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.fromValues(1,1,1)}}),L=H(E.prototype,"secondaryLightingEmissiveColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec4.create()}}),F=H(E.prototype,"secondaryLightingSphereRadius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=H(E.prototype,"translation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.vec3.create()}}),_=E))||_)||_)},"./unsupported/eve/object/EveMobile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMobile",(function(){return I}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O=r("./global/utils/index.js"),A=r("./global/math/index.js"),M=r("./eve/object/EveObject.js");function C(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function D(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var I=(i=O.meta.notImplemented,n=O.meta.type("EveMobile"),a=O.meta.string,o=O.meta.list("EveObjectSet"),s=O.meta.vector3,l=O.meta.float,u=O.meta.list("EveChild"),c=O.meta.list("EveStateController"),f=O.meta.list("Tw2CurveSet"),d=O.meta.list("EveLocatorSets"),h=O.meta.struct("Tr2MeshLod"),m=O.meta.list("TriObserverLocal"),b=O.meta.struct("Tw2Effect"),i(p=n((z=class extends M.EveObject{constructor(...e){super(...e),C(this,"name",g,this),C(this,"attachments",y,this),C(this,"boundingSphereCenter",w,this),C(this,"boundingSphereRadius",_,this),C(this,"children",E,this),C(this,"controllers",T,this),C(this,"curveSets",S,this),C(this,"locatorSets",j,this),C(this,"meshLod",R,this),C(this,"observers",P,this),C(this,"shadowEffect",x,this)}},g=D((v=z).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(v.prototype,"attachments",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=D(v.prototype,"boundingSphereCenter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.vec3.create()}}),_=D(v.prototype,"boundingSphereRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=D(v.prototype,"children",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=D(v.prototype,"controllers",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=D(v.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=D(v.prototype,"locatorSets",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=D(v.prototype,"meshLod",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D(v.prototype,"observers",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=D(v.prototype,"shadowEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v))||p)||p)},"./unsupported/eve/object/EveRootTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveRootTransform",(function(){return k}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L=r("./global/utils/index.js"),F=r("./global/math/index.js"),G=r("./eve/object/EveObject.js");function B(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function N(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=(i=L.meta.notImplemented,n=L.meta.type("EveRootTransform"),a=L.meta.string,o=L.meta.float,s=L.meta.list("EveObject"),l=L.meta.list("Tw2CurveSet"),u=L.meta.boolean,c=L.meta.struct("Tw2Mesh"),f=L.meta.uint,d=L.meta.list("TriObserverLocal"),h=L.meta.quaternion,m=L.meta.struct("Tw2Curve"),b=L.meta.vector3,p=L.meta.float,v=L.meta.vector3,g=L.meta.struct("Tw2Curve"),i(y=n((I=class extends G.EveObject{constructor(...e){super(...e),B(this,"name",_,this),B(this,"boundingSphereRadius",E,this),B(this,"children",T,this),B(this,"curveSets",S,this),B(this,"display",j,this),B(this,"mesh",R,this),B(this,"modifier",P,this),B(this,"observers",x,this),B(this,"rotation",z,this),B(this,"rotationCurve",O,this),B(this,"scaling",A,this),B(this,"sortValueMultiplier",M,this),B(this,"translation",C,this),B(this,"translationCurve",D,this)}},_=N((w=I).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),E=N(w.prototype,"boundingSphereRadius",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=N(w.prototype,"children",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=N(w.prototype,"curveSets",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=N(w.prototype,"display",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=N(w.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=N(w.prototype,"modifier",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=N(w.prototype,"observers",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=N(w.prototype,"rotation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.quat.create()}}),O=N(w.prototype,"rotationCurve",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=N(w.prototype,"scaling",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.fromValues(1,1,1)}}),M=N(w.prototype,"sortValueMultiplier",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=N(w.prototype,"translation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.vec3.create()}}),D=N(w.prototype,"translationCurve",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y)||y)},"./unsupported/eve/object/EveStation2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStation2",(function(){return te}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X=r("./global/utils/index.js"),Q=r("./global/math/index.js"),Z=r("./eve/object/EveShip2.js"),J=r("./core/model/index.js");function $(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function ee(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var te=(i=X.meta.notImplemented,n=X.meta.type("EveStation2"),a=X.meta.struct("Tw2AnimationController"),o=X.meta.isPrivate,s=X.meta.list("EveObjectSet"),l=X.meta.vector3,u=X.meta.float,c=X.meta.list("EveObject"),f=X.meta.list("EveCurveSet"),d=X.meta.list("EveSpaceObjectDecal"),h=X.meta.string,m=X.meta.list("EveChild"),b=X.meta.list("TriPointLight"),p=X.meta.list("EveLocatorSets"),v=X.meta.list("EveLocator2"),g=X.meta.struct("Tw2Mesh"),y=X.meta.struct("Tr2MeshLod"),w=X.meta.struct("Tr2RotationAdapter"),_=X.meta.float,E=X.meta.list("TriObserverLocal"),T=X.meta.struct("Tr2RotationAdapter"),S=X.meta.struct("Tw2Effect"),j=X.meta.struct("Tr2TranslationAdapter"),i(R=n((K=class extends Z.EveShip2{constructor(...e){super(...e),$(this,"animation",x,this),$(this,"attachments",z,this),$(this,"boundingSphereCenter",O,this),$(this,"boundingSphereRadius",A,this),$(this,"children",M,this),$(this,"curveSets",C,this),$(this,"decals",D,this),$(this,"dna",I,this),$(this,"effectChildren",L,this),$(this,"lights",F,this),$(this,"locatorSets",G,this),$(this,"locators",B,this),$(this,"mesh",N,this),$(this,"meshLod",k,this),$(this,"modelRotationCurve",U,this),$(this,"modelScale",V,this),$(this,"observers",H,this),$(this,"rotationCurve",q,this),$(this,"shadowEffect",W,this),$(this,"translationCurve",Y,this)}},x=ee((P=K).prototype,"animation",[a,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new J.Tw2AnimationController}}),z=ee(P.prototype,"attachments",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=ee(P.prototype,"boundingSphereCenter",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q.vec3.create()}}),A=ee(P.prototype,"boundingSphereRadius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=ee(P.prototype,"children",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=ee(P.prototype,"curveSets",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=ee(P.prototype,"decals",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=ee(P.prototype,"dna",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=ee(P.prototype,"effectChildren",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=ee(P.prototype,"lights",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=ee(P.prototype,"locatorSets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=ee(P.prototype,"locators",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=ee(P.prototype,"mesh",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=ee(P.prototype,"meshLod",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ee(P.prototype,"modelRotationCurve",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ee(P.prototype,"modelScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),H=ee(P.prototype,"observers",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=ee(P.prototype,"rotationCurve",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ee(P.prototype,"shadowEffect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=ee(P.prototype,"translationCurve",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=P))||R)||R)},"./unsupported/eve/object/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/object/EveEffectRoot2.js");r.d(t,"EveEffectRoot2",(function(){return i.EveEffectRoot2}));var n=r("./unsupported/eve/object/EveMobile.js");r.d(t,"EveMobile",(function(){return n.EveMobile}));var a=r("./unsupported/eve/object/EveRootTransform.js");r.d(t,"EveRootTransform",(function(){return a.EveRootTransform}));var o=r("./unsupported/eve/object/EveStation2.js");r.d(t,"EveStation2",(function(){return o.EveStation2}))},"./unsupported/eve/particle/EveParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDirectForce",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./particle/force/index.js"),o=n.meta.type("EveParticleDirectForce")(i=class extends a.Tw2ParticleDirectForce{})||i},"./unsupported/eve/particle/EveParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDragForce",(function(){return a}));var i,n=r("./particle/force/index.js"),a=r("./global/utils/index.js").meta.type("EveParticleDragForce")(i=class extends n.Tw2ParticleDragForce{})||i},"./unsupported/eve/particle/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/particle/EveParticleDirectForce.js");r.d(t,"EveParticleDirectForce",(function(){return i.EveParticleDirectForce}));var n=r("./unsupported/eve/particle/EveParticleDragForce.js");r.d(t,"EveParticleDragForce",(function(){return n.EveParticleDragForce}))},"./unsupported/eve/pi/EveConnector.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveConnector",(function(){return M}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x=r("./global/utils/index.js"),z=r("./global/math/index.js");function O(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function A(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var M=(i=x.meta.notImplemented,n=x.meta.type("EveConnector"),a=x.meta.color,o=x.meta.float,s=x.meta.float,l=x.meta.color,u=x.meta.struct(),c=x.meta.vector3,f=x.meta.boolean,d=x.meta.float,h=x.meta.struct(),m=x.meta.uint,i(b=n((P=class extends x.meta.Model{constructor(...e){super(...e),O(this,"animationColor",v,this),O(this,"animationScale",g,this),O(this,"animationSpeed",y,this),O(this,"color",w,this),O(this,"destObject",_,this),O(this,"destPosition",E,this),O(this,"isAnimated",T,this),O(this,"lineWidth",S,this),O(this,"sourceObject",j,this),O(this,"type",R,this)}},v=A((p=P).prototype,"animationColor",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec4.create()}}),g=A(p.prototype,"animationScale",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=A(p.prototype,"animationSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=A(p.prototype,"color",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec4.create()}}),_=A(p.prototype,"destObject",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=A(p.prototype,"destPosition",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.vec3.create()}}),T=A(p.prototype,"isAnimated",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=A(p.prototype,"lineWidth",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=A(p.prototype,"sourceObject",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=A(p.prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=p))||b)||b)},"./unsupported/eve/pi/EveLocalPositionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocalPositionCurve",(function(){return g}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./global/math/index.js");var d,h,m,b,p,v,g=(i=c.meta.notImplemented,n=c.meta.type("EveLocalPositionCurve"),a=c.meta.vector3,i(o=n((u=class extends c.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="value",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},d=(s=u).prototype,h="value",m=[a],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.vec3.create()}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),l=v,o=s))||o)||o)},"./unsupported/eve/pi/EveSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpherePin",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=M.meta.notImplemented,n=M.meta.type("EveSpherePin"),a=M.meta.string,o=M.meta.vector3,s=M.meta.color,l=M.meta.list(),u=M.meta.boolean,c=M.meta.path,f=M.meta.color,d=M.meta.struct(),h=M.meta.float,m=M.meta.float,b=M.meta.float,p=M.meta.float,i(v=n((A=class extends M.meta.Model{constructor(...e){super(...e),D(this,"name",y,this),D(this,"centerNormal",w,this),D(this,"color",_,this),D(this,"curveSets",E,this),D(this,"enablePicking",T,this),D(this,"geometryResPath",S,this),D(this,"pinColor",j,this),D(this,"pinEffect",R,this),D(this,"pinMaxRadius",P,this),D(this,"pinRadius",x,this),D(this,"pinRotation",z,this),D(this,"sortValueMultiplier",O,this)}},y=I((g=A).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=I(g.prototype,"centerNormal",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),_=I(g.prototype,"color",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),E=I(g.prototype,"curveSets",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=I(g.prototype,"enablePicking",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=I(g.prototype,"geometryResPath",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=I(g.prototype,"pinColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),R=I(g.prototype,"pinEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=I(g.prototype,"pinMaxRadius",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=I(g.prototype,"pinRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=I(g.prototype,"pinRotation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=I(g.prototype,"sortValueMultiplier",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=g))||v)||v)},"./unsupported/eve/pi/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/pi/EveConnector.js");r.d(t,"EveConnector",(function(){return i.EveConnector}));var n=r("./unsupported/eve/pi/EveLocalPositionCurve.js");r.d(t,"EveLocalPositionCurve",(function(){return n.EveLocalPositionCurve}));var a=r("./unsupported/eve/pi/EveSpherePin.js");r.d(t,"EveSpherePin",(function(){return a.EveSpherePin}))},"./unsupported/eve/ui/EveTacticalOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTacticalOverlay",(function(){return P}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S=r("./global/utils/index.js");function j(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function R(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=(i=S.meta.notImplemented,n=S.meta.type("EveTacticalOverlay"),a=S.meta.struct(),o=S.meta.float,s=S.meta.struct(),l=S.meta.float,u=S.meta.float,c=S.meta.float,f=S.meta.float,d=S.meta.struct(),i(h=n((T=class extends S.meta.Model{constructor(...e){super(...e),j(this,"anchorEffect",b,this),j(this,"arcSegmentMultiplier",p,this),j(this,"connectorEffect",v,this),j(this,"segmentsHigh",g,this),j(this,"segmentsLow",y,this),j(this,"segmentsMedium",w,this),j(this,"targetMaxSegments",_,this),j(this,"velocityEffect",E,this)}},b=R((m=T).prototype,"anchorEffect",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=R(m.prototype,"arcSegmentMultiplier",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(m.prototype,"connectorEffect",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R(m.prototype,"segmentsHigh",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=R(m.prototype,"segmentsLow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=R(m.prototype,"segmentsMedium",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=R(m.prototype,"targetMaxSegments",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=R(m.prototype,"velocityEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h)||h)},"./unsupported/eve/ui/EveUiObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveUiObject",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=p.meta.notImplemented,n=p.meta.type("EveUiObject"),a=p.meta.string,o=p.meta.float,s=p.meta.struct(),l=p.meta.float,i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),v(this,"name",f,this),v(this,"boundingSphereRadius",d,this),v(this,"mesh",h,this),v(this,"modelScale",m,this)}},f=g((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(c.prototype,"boundingSphereRadius",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=g(c.prototype,"mesh",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g(c.prototype,"modelScale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/eve/ui/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/eve/ui/EveTacticalOverlay.js");r.d(t,"EveTacticalOverlay",(function(){return i.EveTacticalOverlay}));var n=r("./unsupported/eve/ui/EveUiObject.js");r.d(t,"EveUiObject",(function(){return n.EveUiObject}))},"./unsupported/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/core/index.js");r.d(t,"Tr2SpotLight",(function(){return i.Tr2SpotLight})),r.d(t,"EvePointLightBatch",(function(){return i.EvePointLightBatch})),r.d(t,"Tr2PointLight",(function(){return i.Tr2PointLight})),r.d(t,"Tr2ShLightingManager",(function(){return i.Tr2ShLightingManager})),r.d(t,"Tr2MeshLod",(function(){return i.Tr2MeshLod})),r.d(t,"Tr2ExternalParameter",(function(){return i.Tr2ExternalParameter})),r.d(t,"Tr2Texture2dLodParameter",(function(){return i.Tr2Texture2dLodParameter})),r.d(t,"Tr2PostProcess",(function(){return i.Tr2PostProcess})),r.d(t,"Tr2PostProcess2",(function(){return i.Tr2PostProcess2})),r.d(t,"Tr2PPBloomEffect",(function(){return i.Tr2PPBloomEffect})),r.d(t,"Tr2PPDesaturateEffect",(function(){return i.Tr2PPDesaturateEffect})),r.d(t,"Tr2PPDynamicExposureEffect",(function(){return i.Tr2PPDynamicExposureEffect})),r.d(t,"Tr2PPFadeEffect",(function(){return i.Tr2PPFadeEffect})),r.d(t,"Tr2PPFidelityFXEffect",(function(){return i.Tr2PPFidelityFXEffect})),r.d(t,"Tr2PPFilmGrainEffect",(function(){return i.Tr2PPFilmGrainEffect})),r.d(t,"Tr2PPFogEffect",(function(){return i.Tr2PPFogEffect})),r.d(t,"Tr2PPGodRaysEffect",(function(){return i.Tr2PPGodRaysEffect})),r.d(t,"Tr2PPLutEffect",(function(){return i.Tr2PPLutEffect})),r.d(t,"Tr2PPSignalLossEffect",(function(){return i.Tr2PPSignalLossEffect})),r.d(t,"Tr2PPVignetteEffect",(function(){return i.Tr2PPVignetteEffect})),r.d(t,"Tr2LodResource",(function(){return i.Tr2LodResource})),r.d(t,"TriMatrix",(function(){return i.TriMatrix})),r.d(t,"Tr2DistanceTracker",(function(){return i.Tr2DistanceTracker})),r.d(t,"TriObserverLocal",(function(){return i.TriObserverLocal}));var n=r("./unsupported/curve/index.js");r.d(t,"Tr2RotationAdapter",(function(){return n.Tr2RotationAdapter})),r.d(t,"Tr2TranslationAdapter",(function(){return n.Tr2TranslationAdapter})),r.d(t,"AudEventKey",(function(){return n.AudEventKey})),r.d(t,"AudEventCurve",(function(){return n.AudEventCurve})),r.d(t,"EveBezierCurve",(function(){return n.EveBezierCurve})),r.d(t,"Tr2BoneMatrixCurve",(function(){return n.Tr2BoneMatrixCurve})),r.d(t,"Tr2CurveConstant",(function(){return n.Tr2CurveConstant})),r.d(t,"Tw2CurveScalarKey",(function(){return n.Tw2CurveScalarKey})),r.d(t,"Tr2CurveScalar",(function(){return n.Tr2CurveScalar})),r.d(t,"Tr2ScalarExprKey",(function(){return n.Tr2ScalarExprKey})),r.d(t,"Tr2ScalarExprKeyCurve",(function(){return n.Tr2ScalarExprKeyCurve})),r.d(t,"Tr2ScalarExprCurve",(function(){return n.Tr2ScalarExprCurve})),r.d(t,"Tr2CurveEulerRotationExpression",(function(){return n.Tr2CurveEulerRotationExpression})),r.d(t,"Tr2CurveScalarExpression",(function(){return n.Tr2CurveScalarExpression})),r.d(t,"Tr2CurveVector3Expression",(function(){return n.Tr2CurveVector3Expression})),r.d(t,"Tw2CurveExpression",(function(){return n.Tw2CurveExpression})),r.d(t,"Tw2CurveSetRange",(function(){return n.Tw2CurveSetRange}));var a=r("./unsupported/eve/index.js");r.d(t,"EveAnimation",(function(){return a.EveAnimation})),r.d(t,"EveAnimationCommand",(function(){return a.EveAnimationCommand})),r.d(t,"EveAnimationCurve",(function(){return a.EveAnimationCurve})),r.d(t,"EveAnimationState",(function(){return a.EveAnimationState})),r.d(t,"EveAnimationStateMachine",(function(){return a.EveAnimationStateMachine})),r.d(t,"EveChildModifierAttachToBone",(function(){return a.EveChildModifierAttachToBone})),r.d(t,"EveChildModifierBillboard2D",(function(){return a.EveChildModifierBillboard2D})),r.d(t,"EveChildModifierBillboard3D",(function(){return a.EveChildModifierBillboard3D})),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",(function(){return a.EveChildModifierCameraOrientedRotationConstrained})),r.d(t,"EveChildModifierHalo",(function(){return a.EveChildModifierHalo})),r.d(t,"EveChildModifierSRT",(function(){return a.EveChildModifierSRT})),r.d(t,"EveChildModifierTranslateWithCamera",(function(){return a.EveChildModifierTranslateWithCamera})),r.d(t,"EveChildBulletStorm",(function(){return a.EveChildBulletStorm})),r.d(t,"EveChildCloud",(function(){return a.EveChildCloud})),r.d(t,"EveChildEffectPropagator",(function(){return a.EveChildEffectPropagator})),r.d(t,"EveChildExplosion",(function(){return a.EveChildExplosion})),r.d(t,"EveChildInheritProperties",(function(){return a.EveChildInheritProperties})),r.d(t,"EveChildInstanceContainer",(function(){return a.EveChildInstanceContainer})),r.d(t,"EveChildLink",(function(){return a.EveChildLink})),r.d(t,"EveChildParticleSphere",(function(){return a.EveChildParticleSphere})),r.d(t,"EveChildQuad",(function(){return a.EveChildQuad})),r.d(t,"EveChildSpherePin",(function(){return a.EveChildSpherePin})),r.d(t,"EveChildLineSet",(function(){return a.EveChildLineSet})),r.d(t,"EveLineChildContainer",(function(){return a.EveLineChildContainer})),r.d(t,"EveStarfield",(function(){return a.EveStarfield})),r.d(t,"EveStretch2",(function(){return a.EveStretch2})),r.d(t,"EveBanner",(function(){return a.EveBanner})),r.d(t,"EveBoosterSet2Batch",(function(){return a.EveBoosterSet2Batch})),r.d(t,"EveBoosterSet2Item",(function(){return a.EveBoosterSet2Item})),r.d(t,"EveBoosterSet2",(function(){return a.EveBoosterSet2})),r.d(t,"EveHazeSetBatch",(function(){return a.EveHazeSetBatch})),r.d(t,"EveHazeSetItem",(function(){return a.EveHazeSetItem})),r.d(t,"EveHazeSet",(function(){return a.EveHazeSet})),r.d(t,"EveSpriteLineSetBatch",(function(){return a.EveSpriteLineSetBatch})),r.d(t,"EveSpriteLineSetItem",(function(){return a.EveSpriteLineSetItem})),r.d(t,"EveSpriteLineSet",(function(){return a.EveSpriteLineSet})),r.d(t,"EveTrailSetRenderBatch",(function(){return a.EveTrailSetRenderBatch})),r.d(t,"EveTrailsSet",(function(){return a.EveTrailsSet})),r.d(t,"EveEffectRoot2",(function(){return a.EveEffectRoot2})),r.d(t,"EveMobile",(function(){return a.EveMobile})),r.d(t,"EveRootTransform",(function(){return a.EveRootTransform})),r.d(t,"EveStation2",(function(){return a.EveStation2})),r.d(t,"EveParticleDirectForce",(function(){return a.EveParticleDirectForce})),r.d(t,"EveParticleDragForce",(function(){return a.EveParticleDragForce})),r.d(t,"EveConnector",(function(){return a.EveConnector})),r.d(t,"EveLocalPositionCurve",(function(){return a.EveLocalPositionCurve})),r.d(t,"EveSpherePin",(function(){return a.EveSpherePin})),r.d(t,"EveTacticalOverlay",(function(){return a.EveTacticalOverlay})),r.d(t,"EveUiObject",(function(){return a.EveUiObject}));var o=r("./unsupported/interior/index.js");r.d(t,"Tr2IntSkinnedObject",(function(){return o.Tr2IntSkinnedObject})),r.d(t,"Tr2SkinnedModel",(function(){return o.Tr2SkinnedModel})),r.d(t,"Tr2InteriorLightSource",(function(){return o.Tr2InteriorLightSource})),r.d(t,"Tr2KelvinColor",(function(){return o.Tr2KelvinColor})),r.d(t,"Tr2InteriorPlaceable",(function(){return o.Tr2InteriorPlaceable})),r.d(t,"Tr2InteriorScene",(function(){return o.Tr2InteriorScene})),r.d(t,"WodPlaceableRes",(function(){return o.WodPlaceableRes})),r.d(t,"Tr2Model",(function(){return o.Tr2Model}));var s=r("./unsupported/particle/index.js");r.d(t,"Tr2PlaneConstraint",(function(){return s.Tr2PlaneConstraint})),r.d(t,"Tr2GpuSharedEmitter",(function(){return s.Tr2GpuSharedEmitter})),r.d(t,"Tr2GpuUniqueEmitter",(function(){return s.Tr2GpuUniqueEmitter})),r.d(t,"Tr2ForceSphereVolume",(function(){return s.Tr2ForceSphereVolume})),r.d(t,"Tr2ParticleVortexForce",(function(){return s.Tr2ParticleVortexForce})),r.d(t,"Tr2GpuParticleSystem",(function(){return s.Tr2GpuParticleSystem}));var l=r("./unsupported/state/index.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return l.Tr2ActionAnimateCurveSet})),r.d(t,"Tr2ActionAnimateValue",(function(){return l.Tr2ActionAnimateValue})),r.d(t,"Tr2ActionChildEffect",(function(){return l.Tr2ActionChildEffect})),r.d(t,"Tr2ActionOverlay",(function(){return l.Tr2ActionOverlay})),r.d(t,"Tr2ActionPlayCurveSet",(function(){return l.Tr2ActionPlayCurveSet})),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return l.Tr2ActionPlayMeshAnimation})),r.d(t,"Tr2ActionPlaySound",(function(){return l.Tr2ActionPlaySound})),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return l.Tr2ActionResetClipSphereCenter})),r.d(t,"Tr2ActionSetValue",(function(){return l.Tr2ActionSetValue})),r.d(t,"Tr2ActionSpawnParticles",(function(){return l.Tr2ActionSpawnParticles})),r.d(t,"Tr2Controller",(function(){return l.Tr2Controller})),r.d(t,"Tr2ControllerReference",(function(){return l.Tr2ControllerReference})),r.d(t,"Tr2ControllerFloatVariable",(function(){return l.Tr2ControllerFloatVariable})),r.d(t,"Tr2StateMachine",(function(){return l.Tr2StateMachine})),r.d(t,"Tr2StateMachineState",(function(){return l.Tr2StateMachineState})),r.d(t,"Tr2StateMachineTransition",(function(){return l.Tr2StateMachineTransition})),r.d(t,"Tr2SyncToAnimation",(function(){return l.Tr2SyncToAnimation}));var u=r("./unsupported/AudEmitter.js");r.d(t,"AudEmitter",(function(){return u.AudEmitter}))},"./unsupported/interior/Tr2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Model",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2Model"),a=c.meta.list("Tw2Mesh"),i(o=n((u=class extends c.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="meshes",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},f=(s=u).prototype,d="meshes",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/interior/character/Tr2IntSkinnedObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2IntSkinnedObject",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.notImplemented,n=m.meta.type("Tr2IntSkinnedObject"),a=m.meta.raw(),o=m.meta.struct(),s=m.meta.list("Tw2CurveSet"),i(l=n((h=class extends m.meta.Model{constructor(...e){super(...e),b(this,"transform",c,this),b(this,"visualModel",f,this),b(this,"curveSets",d,this)}},c=p((u=h).prototype,"transform",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=p(u.prototype,"visualModel",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p(u.prototype,"curveSets",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l)||l)},"./unsupported/interior/character/Tr2SkinnedModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SkinnedModel",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=p.meta.notImplemented,n=p.meta.type("Tr2SkinnedModel"),a=p.meta.string,o=p.meta.path,s=p.meta.list(),l=p.meta.string,i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),v(this,"name",f,this),v(this,"geometryResPath",d,this),v(this,"meshes",h,this),v(this,"skeletonName",m,this)}},f=g((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(c.prototype,"geometryResPath",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=g(c.prototype,"meshes",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=g(c.prototype,"skeletonName",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/interior/character/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/interior/character/Tr2IntSkinnedObject.js");r.d(t,"Tr2IntSkinnedObject",(function(){return i.Tr2IntSkinnedObject}));var n=r("./unsupported/interior/character/Tr2SkinnedModel.js");r.d(t,"Tr2SkinnedModel",(function(){return n.Tr2SkinnedModel}))},"./unsupported/interior/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/interior/character/index.js");r.d(t,"Tr2IntSkinnedObject",(function(){return i.Tr2IntSkinnedObject})),r.d(t,"Tr2SkinnedModel",(function(){return i.Tr2SkinnedModel}));var n=r("./unsupported/interior/lighting/index.js");r.d(t,"Tr2InteriorLightSource",(function(){return n.Tr2InteriorLightSource})),r.d(t,"Tr2KelvinColor",(function(){return n.Tr2KelvinColor}));var a=r("./unsupported/interior/scene/index.js");r.d(t,"Tr2InteriorPlaceable",(function(){return a.Tr2InteriorPlaceable})),r.d(t,"Tr2InteriorScene",(function(){return a.Tr2InteriorScene})),r.d(t,"WodPlaceableRes",(function(){return a.WodPlaceableRes}));var o=r("./unsupported/interior/Tr2Model.js");r.d(t,"Tr2Model",(function(){return o.Tr2Model}))},"./unsupported/interior/lighting/Tr2InteriorLightSource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorLightSource",(function(){return L}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M=r("./global/utils/index.js"),C=r("./global/math/index.js");function D(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var L=(i=M.meta.notImplemented,n=M.meta.type("Tr2InteriorLightSource"),a=M.meta.string,o=M.meta.color,s=M.meta.float,l=M.meta.float,u=M.meta.vector3,c=M.meta.float,f=M.meta.float,d=M.meta.float,h=M.meta.struct("Tr2KelvinColor"),m=M.meta.vector3,b=M.meta.float,p=M.meta.boolean,i(v=n((A=class extends M.meta.Model{constructor(...e){super(...e),D(this,"name",y,this),D(this,"color",w,this),D(this,"coneAlphaInner",_,this),D(this,"coneAlphaOuter",E,this),D(this,"coneDirection",T,this),D(this,"falloff",S,this),D(this,"importanceBias",j,this),D(this,"importanceScale",R,this),D(this,"kelvinColor",P,this),D(this,"position",x,this),D(this,"radius",z,this),D(this,"useKelvinColor",O,this)}},y=I((g=A).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=I(g.prototype,"color",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec4.create()}}),_=I(g.prototype,"coneAlphaInner",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=I(g.prototype,"coneAlphaOuter",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=I(g.prototype,"coneDirection",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),S=I(g.prototype,"falloff",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=I(g.prototype,"importanceBias",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=I(g.prototype,"importanceScale",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=I(g.prototype,"kelvinColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=I(g.prototype,"position",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.vec3.create()}}),z=I(g.prototype,"radius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=I(g.prototype,"useKelvinColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=g))||v)||v)},"./unsupported/interior/lighting/Tr2KelvinColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2KelvinColor",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.notImplemented,n=d.meta.type("Tr2KelvinColor"),a=d.meta.float,o=d.meta.float,i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),h(this,"temperature",u,this),h(this,"tint",c,this)}},u=m((l=f).prototype,"temperature",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=m(l.prototype,"tint",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=l))||s)||s)},"./unsupported/interior/lighting/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/interior/lighting/Tr2InteriorLightSource.js");r.d(t,"Tr2InteriorLightSource",(function(){return i.Tr2InteriorLightSource}));var n=r("./unsupported/interior/lighting/Tr2KelvinColor.js");r.d(t,"Tr2KelvinColor",(function(){return n.Tr2KelvinColor}))},"./unsupported/interior/scene/Tr2InteriorPlaceable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorPlaceable",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.notImplemented,n=d.meta.type("Tr2InteriorPlaceable"),a=d.meta.path,o=d.meta.struct("TriMatrix"),i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),h(this,"placeableResPath",u,this),h(this,"transform",c,this)}},u=m((l=f).prototype,"placeableResPath",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m(l.prototype,"transform",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=l))||s)||s)},"./unsupported/interior/scene/Tr2InteriorScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorScene",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.notImplemented,n=d.meta.type("Tr2InteriorScene"),a=d.meta.list("Tr2IntSkinnedObject"),o=d.meta.list("Tr2InteriorLightSource"),i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),h(this,"dynamics",u,this),h(this,"lights",c,this)}},u=m((l=f).prototype,"dynamics",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=m(l.prototype,"lights",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=l))||s)||s)},"./unsupported/interior/scene/WodPlaceableRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WodPlaceableRes",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.notImplemented,n=m.meta.type("WodPlaceableRes"),a=m.meta.float,o=m.meta.float,s=m.meta.struct("Tr2Model"),i(l=n((h=class extends m.meta.Model{constructor(...e){super(...e),b(this,"farFadeDistance",c,this),b(this,"nearFadeDistance",f,this),b(this,"visualModel",d,this)}},c=p((u=h).prototype,"farFadeDistance",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=p(u.prototype,"nearFadeDistance",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=p(u.prototype,"visualModel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l)||l)},"./unsupported/interior/scene/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/interior/scene/Tr2InteriorPlaceable.js");r.d(t,"Tr2InteriorPlaceable",(function(){return i.Tr2InteriorPlaceable}));var n=r("./unsupported/interior/scene/Tr2InteriorScene.js");r.d(t,"Tr2InteriorScene",(function(){return n.Tr2InteriorScene}));var a=r("./unsupported/interior/scene/WodPlaceableRes.js");r.d(t,"WodPlaceableRes",(function(){return a.WodPlaceableRes}))},"./unsupported/particle/Tw2GpuParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuParticleSystem",(function(){return x}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j=r("./global/utils/index.js");function R(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function P(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=(i=j.meta.notImplemented,n=j.meta.type("Tr2GpuParticleSystem"),a=j.meta.struct("Tw2Effect"),o=j.meta.struct("Tw2Effect"),s=j.meta.struct("Tw2Effect"),l=j.meta.struct("Tw2Effect"),u=j.meta.struct("Tw2Effect"),c=j.meta.struct("Tw2Effect"),f=j.meta.struct("Tw2Effect"),d=j.meta.struct("Tw2Effect"),h=j.meta.struct("Tw2Effect"),i(m=n((p=P((b=class{constructor(){R(this,"clear",p,this),R(this,"emit",v,this),R(this,"render",g,this),R(this,"setDrawParameters",y,this),R(this,"setSortParameters",w,this),R(this,"sort",_,this),R(this,"sortInner",E,this),R(this,"sortStep",T,this),R(this,"update",S,this)}GetResources(e=[]){return this.clear&&this.clear.GetResources(e),this.EmitEvent&&this.EmitEvent.GetResources(e),this.render&&this.render.GetResources(e),this.setDrawParameters&&this.setDrawParameters.GetResources(e),this.setSortParameters&&this.setSortParameters.GetResources(e),this.sort&&this.sort.GetResources(e),this.sortInner&&this.sortInner.GetResources(e),this.sortStep&&this.sortStep.GetResources(e),this.update&&this.update.GetResources(e),e}}).prototype,"clear",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=P(b.prototype,"emit",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P(b.prototype,"render",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P(b.prototype,"setDrawParameters",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P(b.prototype,"setSortParameters",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P(b.prototype,"sort",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=P(b.prototype,"sortInner",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=P(b.prototype,"sortStep",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P(b.prototype,"update",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m)||m)},"./unsupported/particle/constraint/Tr2PlaneConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PlaneConstraint",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./unsupported/particle/constraint/Tw2ParticleConstraint.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.notImplemented,n=d.meta.type("Tr2PlaneConstraint"),a=d.meta.list("Tw2PartcileAttributeGenerator"),o=d.meta.float,i(s=n((f=class extends h.Tw2ParticleConstraint{constructor(...e){super(...e),m(this,"generators",u,this),m(this,"reflectionNoise",c,this)}},u=b((l=f).prototype,"generators",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=b(l.prototype,"reflectionNoise",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=l))||s)||s)},"./unsupported/particle/constraint/Tw2ParticleConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleConstraint",(function(){return d}));var i,n,a=r("./global/utils/index.js");var o,s,l,u,c,f,d=(i=a.meta.abstract,n=class extends a.meta.Model{ApplyConstraint(e,t,r,i){}},o=n.prototype,s="ApplyConstraint",l=[i],u=Object.getOwnPropertyDescriptor(n.prototype,"ApplyConstraint"),c=n.prototype,f={},Object.keys(u).forEach((function(e){f[e]=u[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce((function(e,t){return t(o,s,e)||e}),f),c&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(c):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(o,s,f),f=null),n)},"./unsupported/particle/constraint/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/particle/constraint/Tr2PlaneConstraint.js");r.d(t,"Tr2PlaneConstraint",(function(){return i.Tr2PlaneConstraint}))},"./unsupported/particle/emitter/Tr2GpuSharedEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuSharedEmitter",(function(){return je}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve,ge,ye,we=r("./global/utils/index.js"),_e=r("./global/math/index.js"),Ee=r("./particle/emitter/Tw2ParticleEmitter.js");function Te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Se(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var je=(i=we.meta.type("Tr2GpuSharedEmitter"),n=we.meta.notImplemented,a=we.meta.string,o=we.meta.float,s=we.meta.vector3,l=we.meta.float,u=we.meta.color,c=we.meta.color,f=we.meta.color,d=we.meta.color,h=we.meta.float,m=we.meta.boolean,b=we.meta.vector3,p=we.meta.float,v=we.meta.float,g=we.meta.float,y=we.meta.float,w=we.meta.float,_=we.meta.float,E=we.meta.float,T=we.meta.float,S=we.meta.float,j=we.meta.float,R=we.meta.float,P=we.meta.struct("Tr2GpuParticleSystem"),x=we.meta.vector3,z=we.meta.float,O=we.meta.float,A=we.meta.boolean,M=we.meta.float,C=we.meta.vector3,D=we.meta.uint,I=we.meta.float,L=we.meta.float,F=we.meta.float,i(G=n((ye=class extends Ee.Tw2ParticleEmitter{constructor(...e){super(...e),Te(this,"name",N,this),Te(this,"angle",k,this),Te(this,"attractorPosition",U,this),Te(this,"attractorStrength",V,this),Te(this,"color0",H,this),Te(this,"color1",q,this),Te(this,"color2",W,this),Te(this,"color3",Y,this),Te(this,"colorMidpoint",K,this),Te(this,"continuousEmitter",X,this),Te(this,"direction",Q,this),Te(this,"drag",Z,this),Te(this,"emissionDensity",J,this),Te(this,"gravity",$,this),Te(this,"inheritVelocity",ee,this),Te(this,"innerAngle",te,this),Te(this,"maxDisplacement",re,this),Te(this,"maxEmissionDensity",ie,this),Te(this,"maxLifeTime",ne,this),Te(this,"maxSpeed",ae,this),Te(this,"minLifeTime",oe,this),Te(this,"minSpeed",se,this),Te(this,"particleSystem",le,this),Te(this,"position",ue,this),Te(this,"radius",ce,this),Te(this,"rate",fe,this),Te(this,"scaledByParent",de,this),Te(this,"sizeVariance",he,this),Te(this,"sizes",me,this),Te(this,"textureIndex",be,this),Te(this,"turbulenceAmplitude",pe,this),Te(this,"turbulenceFrequency",ve,this),Te(this,"velocityStretchRotation",ge,this)}},N=Se((B=ye).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=Se(B.prototype,"angle",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Se(B.prototype,"attractorPosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),V=Se(B.prototype,"attractorStrength",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=Se(B.prototype,"color0",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),q=Se(B.prototype,"color1",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),W=Se(B.prototype,"color2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),Y=Se(B.prototype,"color3",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),K=Se(B.prototype,"colorMidpoint",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=Se(B.prototype,"continuousEmitter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Se(B.prototype,"direction",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),Z=Se(B.prototype,"drag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Se(B.prototype,"emissionDensity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=Se(B.prototype,"gravity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=Se(B.prototype,"inheritVelocity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=Se(B.prototype,"innerAngle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=Se(B.prototype,"maxDisplacement",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=Se(B.prototype,"maxEmissionDensity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=Se(B.prototype,"maxLifeTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ae=Se(B.prototype,"maxSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=Se(B.prototype,"minLifeTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=Se(B.prototype,"minSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),le=Se(B.prototype,"particleSystem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=Se(B.prototype,"position",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),ce=Se(B.prototype,"radius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=Se(B.prototype,"rate",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Se(B.prototype,"scaledByParent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Se(B.prototype,"sizeVariance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),me=Se(B.prototype,"sizes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),be=Se(B.prototype,"textureIndex",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=Se(B.prototype,"turbulenceAmplitude",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=Se(B.prototype,"turbulenceFrequency",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ge=Se(B.prototype,"velocityStretchRotation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=B))||G)||G)},"./unsupported/particle/emitter/Tr2GpuUniqueEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuUniqueEmitter",(function(){return je}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p,v,g,y,w,_,E,T,S,j,R,P,x,z,O,A,M,C,D,I,L,F,G,B,N,k,U,V,H,q,W,Y,K,X,Q,Z,J,$,ee,te,re,ie,ne,ae,oe,se,le,ue,ce,fe,de,he,me,be,pe,ve,ge,ye,we=r("./global/utils/index.js"),_e=r("./global/math/index.js"),Ee=r("./particle/emitter/Tw2ParticleEmitter.js");function Te(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function Se(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var je=(i=we.meta.type("Tr2GpuUniqueEmitter"),n=we.meta.notImplemented,a=we.meta.string,o=we.meta.float,s=we.meta.vector3,l=we.meta.float,u=we.meta.color,c=we.meta.color,f=we.meta.color,d=we.meta.color,h=we.meta.float,m=we.meta.boolean,b=we.meta.vector3,p=we.meta.float,v=we.meta.float,g=we.meta.float,y=we.meta.float,w=we.meta.float,_=we.meta.float,E=we.meta.float,T=we.meta.float,S=we.meta.float,j=we.meta.float,R=we.meta.float,P=we.meta.struct("Tr2GpuParticleSystem"),x=we.meta.vector3,z=we.meta.float,O=we.meta.float,A=we.meta.boolean,M=we.meta.float,C=we.meta.vector3,D=we.meta.uint,I=we.meta.float,L=we.meta.float,F=we.meta.float,i(G=n((ye=class extends Ee.Tw2ParticleEmitter{constructor(...e){super(...e),Te(this,"name",N,this),Te(this,"angle",k,this),Te(this,"attractorPosition",U,this),Te(this,"attractorStrength",V,this),Te(this,"color0",H,this),Te(this,"color1",q,this),Te(this,"color2",W,this),Te(this,"color3",Y,this),Te(this,"colorMidpoint",K,this),Te(this,"continuousEmitter",X,this),Te(this,"direction",Q,this),Te(this,"drag",Z,this),Te(this,"emissionDensity",J,this),Te(this,"gravity",$,this),Te(this,"inheritVelocity",ee,this),Te(this,"innerAngle",te,this),Te(this,"maxDisplacement",re,this),Te(this,"maxEmissionDensity",ie,this),Te(this,"maxLifeTime",ne,this),Te(this,"maxSpeed",ae,this),Te(this,"minLifeTime",oe,this),Te(this,"minSpeed",se,this),Te(this,"particleSystem",le,this),Te(this,"position",ue,this),Te(this,"radius",ce,this),Te(this,"rate",fe,this),Te(this,"scaledByParent",de,this),Te(this,"sizeVariance",he,this),Te(this,"sizes",me,this),Te(this,"textureIndex",be,this),Te(this,"turbulenceAmplitude",pe,this),Te(this,"turbulenceFrequency",ve,this),Te(this,"velocityStretchRotation",ge,this)}},N=Se((B=ye).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=Se(B.prototype,"angle",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Se(B.prototype,"attractorPosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),V=Se(B.prototype,"attractorStrength",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=Se(B.prototype,"color0",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),q=Se(B.prototype,"color1",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),W=Se(B.prototype,"color2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),Y=Se(B.prototype,"color3",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec4.create()}}),K=Se(B.prototype,"colorMidpoint",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=Se(B.prototype,"continuousEmitter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Se(B.prototype,"direction",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),Z=Se(B.prototype,"drag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=Se(B.prototype,"emissionDensity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=Se(B.prototype,"gravity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=Se(B.prototype,"inheritVelocity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=Se(B.prototype,"innerAngle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),re=Se(B.prototype,"maxDisplacement",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=Se(B.prototype,"maxEmissionDensity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=Se(B.prototype,"maxLifeTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ae=Se(B.prototype,"maxSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=Se(B.prototype,"minLifeTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=Se(B.prototype,"minSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),le=Se(B.prototype,"particleSystem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=Se(B.prototype,"position",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),ce=Se(B.prototype,"radius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=Se(B.prototype,"rate",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Se(B.prototype,"scaledByParent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Se(B.prototype,"sizeVariance",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),me=Se(B.prototype,"sizes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.vec3.create()}}),be=Se(B.prototype,"textureIndex",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=Se(B.prototype,"turbulenceAmplitude",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ve=Se(B.prototype,"turbulenceFrequency",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ge=Se(B.prototype,"velocityStretchRotation",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=B))||G)||G)},"./unsupported/particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/particle/emitter/Tr2GpuSharedEmitter.js");r.d(t,"Tr2GpuSharedEmitter",(function(){return i.Tr2GpuSharedEmitter}));var n=r("./unsupported/particle/emitter/Tr2GpuUniqueEmitter.js");r.d(t,"Tr2GpuUniqueEmitter",(function(){return n.Tr2GpuUniqueEmitter}))},"./unsupported/particle/force/Tr2ForceSphereVolume.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ForceSphereVolume",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./particle/force/Tw2ParticleForce.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.type("Tr2ForceSphereVolume"),n=d.meta.notImplemented,a=d.meta.list("Tw2ParticleForce"),o=d.meta.float,i(s=n((f=class extends h.Tw2ParticleForce{constructor(...e){super(...e),m(this,"forces",u,this),m(this,"radius",c,this)}Update(e){for(var t=0;t<this.forces.length;t++)this.forces[t].Update(e)}},u=b((l=f).prototype,"forces",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=b(l.prototype,"radius",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=l))||s)||s)},"./unsupported/particle/force/Tr2ParticleVortexForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ParticleVortexForce",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./global/math/index.js"),p=r("./particle/force/Tw2ParticleForce.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=m.meta.type("Tr2ParticleVortexForce"),n=m.meta.notImplemented,a=m.meta.vector3,o=m.meta.float,s=m.meta.vector3,i(l=n((h=class extends p.Tw2ParticleForce{constructor(...e){super(...e),v(this,"axis",c,this),v(this,"magnitude",f,this),v(this,"position",d,this)}},c=g((u=h).prototype,"axis",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),f=g(u.prototype,"magnitude",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=g(u.prototype,"position",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.vec3.create()}}),l=u))||l)||l)},"./unsupported/particle/force/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/particle/force/Tr2ForceSphereVolume.js");r.d(t,"Tr2ForceSphereVolume",(function(){return i.Tr2ForceSphereVolume}));var n=r("./unsupported/particle/force/Tr2ParticleVortexForce.js");r.d(t,"Tr2ParticleVortexForce",(function(){return n.Tr2ParticleVortexForce}))},"./unsupported/particle/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/particle/constraint/index.js");r.d(t,"Tr2PlaneConstraint",(function(){return i.Tr2PlaneConstraint}));var n=r("./unsupported/particle/emitter/index.js");r.d(t,"Tr2GpuSharedEmitter",(function(){return n.Tr2GpuSharedEmitter})),r.d(t,"Tr2GpuUniqueEmitter",(function(){return n.Tr2GpuUniqueEmitter}));var a=r("./unsupported/particle/force/index.js");r.d(t,"Tr2ForceSphereVolume",(function(){return a.Tr2ForceSphereVolume})),r.d(t,"Tr2ParticleVortexForce",(function(){return a.Tr2ParticleVortexForce}));var o=r("./unsupported/particle/Tw2GpuParticleSystem.js");r.d(t,"Tr2GpuParticleSystem",(function(){return o.Tr2GpuParticleSystem}))},"./unsupported/state/Tr2StateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachine",(function(){return v}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js");function b(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function p(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=(i=m.meta.notImplemented,n=m.meta.type("Tr2StateMachine"),a=m.meta.string,o=m.meta.uint,s=m.meta.list("Tr2StateMachineState"),i(l=n((h=class extends m.meta.Model{constructor(...e){super(...e),b(this,"name",c,this),b(this,"startState",f,this),b(this,"states",d,this)}},c=p((u=h).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=p(u.prototype,"startState",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=p(u.prototype,"states",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=u))||l)||l)},"./unsupported/state/Tr2StateMachineState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineState",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=p.meta.notImplemented,n=p.meta.type("Tr2StateMachineState"),a=p.meta.string,o=p.meta.list("Tw2Action"),s=p.meta.struct(),l=p.meta.list("Tr2StateMachineTransition"),i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),v(this,"name",f,this),v(this,"actions",d,this),v(this,"finalizer",h,this),v(this,"transitions",m,this)}},f=g((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(c.prototype,"actions",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=g(c.prototype,"finalizer",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g(c.prototype,"transitions",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)||u)},"./unsupported/state/Tr2StateMachineTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineTransition",(function(){return b}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js");function h(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function m(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=(i=d.meta.notImplemented,n=d.meta.type("Tr2StateMachineTransition"),a=d.meta.string,o=d.meta.string,i(s=n((f=class extends d.meta.Model{constructor(...e){super(...e),h(this,"name",u,this),h(this,"condition",c,this)}},u=m((l=f).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=m(l.prototype,"condition",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=l))||s)||s)},"./unsupported/state/Tr2SyncToAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SyncToAnimation",(function(){return a}));var i,n=r("./global/utils/index.js"),a=(0,n.meta.notImplemented)(i=n.meta.type("Tr2SyncToAnimation")(i=class extends n.meta.Model{})||i)||i},"./unsupported/state/action/Tr2ActionAnimateCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateCurveSet",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./unsupported/state/action/Tw2Action.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.notImplemented,n=d.meta.type("Tr2ActionAnimateCurveSet"),a=d.meta.struct("Tw2CurveSet"),o=d.meta.string,i(s=n((f=class extends h.Tw2Action{constructor(...e){super(...e),m(this,"curveSet",u,this),m(this,"value",c,this)}},u=b((l=f).prototype,"curveSet",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=b(l.prototype,"value",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=l))||s)||s)},"./unsupported/state/action/Tr2ActionAnimateValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateValue",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./unsupported/state/action/Tw2Action.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.notImplemented,n=p.meta.type("Tr2ActionAnimateValue"),a=p.meta.string,o=p.meta.struct("Tr2CurveScalarExpression"),s=p.meta.path,l=p.meta.string,i(u=n((b=class extends v.Tw2Action{constructor(...e){super(...e),g(this,"attribute",f,this),g(this,"curve",d,this),g(this,"path",h,this),g(this,"value",m,this)}},f=y((c=b).prototype,"attribute",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y(c.prototype,"curve",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y(c.prototype,"path",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=y(c.prototype,"value",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/state/action/Tr2ActionChildEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionChildEffect",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./unsupported/state/action/Tw2Action.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=m.meta.notImplemented,n=m.meta.type("Tr2ActionChildEffect"),a=m.meta.string,o=m.meta.path,s=m.meta.boolean,i(l=n((h=class extends b.Tw2Action{constructor(...e){super(...e),p(this,"childName",c,this),p(this,"path",f,this),p(this,"removeOnStop",d,this)}},c=v((u=h).prototype,"childName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"path",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=v(u.prototype,"removeOnStop",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=u))||l)||l)},"./unsupported/state/action/Tr2ActionOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionOverlay",(function(){return g}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js"),f=r("./unsupported/state/action/Tw2Action.js");var d,h,m,b,p,v,g=(i=c.meta.notImplemented,n=c.meta.type("Tr2ActionOverlay"),a=c.meta.path,i(o=n((u=class extends f.Tw2Action{constructor(...e){var t,r,i,n;super(...e),t=this,r="path",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},d=(s=u).prototype,h="path",m=[a],b={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},v={},Object.keys(b).forEach((function(e){v[e]=b[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=m.slice().reverse().reduce((function(e,t){return t(d,h,e)||e}),v),p&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(p):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,h,v),v=null),l=v,o=s))||o)||o)},"./unsupported/state/action/Tr2ActionPlayCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayCurveSet",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./unsupported/state/action/Tw2Action.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=m.meta.notImplemented,n=m.meta.type("Tr2ActionPlayCurveSet"),a=m.meta.string,o=m.meta.string,s=m.meta.boolean,i(l=n((h=class extends b.Tw2Action{constructor(...e){super(...e),p(this,"curveSetName",c,this),p(this,"rangeName",f,this),p(this,"syncToRange",d,this)}},c=v((u=h).prototype,"curveSetName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"rangeName",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=v(u.prototype,"syncToRange",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=u))||l)||l)},"./unsupported/state/action/Tr2ActionPlayMeshAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m=r("./global/utils/index.js"),b=r("./unsupported/state/action/Tw2Action.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=m.meta.notImplemented,n=m.meta.type("Tr2ActionPlayMeshAnimation"),a=m.meta.string,o=m.meta.uint,s=m.meta.string,i(l=n((h=class extends b.Tw2Action{constructor(...e){super(...e),p(this,"animation",c,this),p(this,"loops",f,this),p(this,"mask",d,this)}},c=v((u=h).prototype,"animation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v(u.prototype,"loops",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=v(u.prototype,"mask",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=u))||l)||l)},"./unsupported/state/action/Tr2ActionPlaySound.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlaySound",(function(){return p}));var i,n,a,o,s,l,u,c,f,d=r("./global/utils/index.js"),h=r("./unsupported/state/action/Tw2Action.js");function m(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function b(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(i=d.meta.notImplemented,n=d.meta.type("Tr2ActionPlaySound"),a=d.meta.string,o=d.meta.string,i(s=n((f=class extends h.Tw2Action{constructor(...e){super(...e),m(this,"emitter",u,this),m(this,"event",c,this)}},u=b((l=f).prototype,"emitter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b(l.prototype,"event",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=l))||s)||s)},"./unsupported/state/action/Tr2ActionResetClipSphereCenter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./unsupported/state/action/Tw2Action.js"),o=(0,n.meta.notImplemented)(i=n.meta.type("Tr2ActionResetClipSphereCenter")(i=class extends a.Tw2Action{})||i)||i},"./unsupported/state/action/Tr2ActionSetValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSetValue",(function(){return w}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js"),v=r("./unsupported/state/action/Tw2Action.js");function g(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function y(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=(i=p.meta.notImplemented,n=p.meta.type("Tr2ActionSetValue"),a=p.meta.string,o=p.meta.boolean,s=p.meta.path,l=p.meta.string,i(u=n((b=class extends v.Tw2Action{constructor(...e){super(...e),g(this,"attribute",f,this),g(this,"delayBinding",d,this),g(this,"path",h,this),g(this,"value",m,this)}},f=y((c=b).prototype,"attribute",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y(c.prototype,"delayBinding",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=y(c.prototype,"path",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=y(c.prototype,"value",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=c))||u)||u)},"./unsupported/state/action/Tr2ActionSpawnParticles.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSpawnParticles",(function(){return o}));var i,n=r("./global/utils/index.js"),a=r("./unsupported/state/action/Tw2Action.js"),o=(0,n.meta.notImplemented)(i=n.meta.type("Tr2ActionSpawnParticles")(i=class extends a.Tw2Action{})||i)||i},"./unsupported/state/action/Tw2Action.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Action",(function(){return a}));var i,n=r("./global/utils/index.js"),a=n.meta.type("Tw2Action")(i=class extends n.meta.Model{})||i},"./unsupported/state/action/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/state/action/Tr2ActionAnimateCurveSet.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return i.Tr2ActionAnimateCurveSet}));var n=r("./unsupported/state/action/Tr2ActionAnimateValue.js");r.d(t,"Tr2ActionAnimateValue",(function(){return n.Tr2ActionAnimateValue}));var a=r("./unsupported/state/action/Tr2ActionChildEffect.js");r.d(t,"Tr2ActionChildEffect",(function(){return a.Tr2ActionChildEffect}));var o=r("./unsupported/state/action/Tr2ActionOverlay.js");r.d(t,"Tr2ActionOverlay",(function(){return o.Tr2ActionOverlay}));var s=r("./unsupported/state/action/Tr2ActionPlayCurveSet.js");r.d(t,"Tr2ActionPlayCurveSet",(function(){return s.Tr2ActionPlayCurveSet}));var l=r("./unsupported/state/action/Tr2ActionPlayMeshAnimation.js");r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return l.Tr2ActionPlayMeshAnimation}));var u=r("./unsupported/state/action/Tr2ActionPlaySound.js");r.d(t,"Tr2ActionPlaySound",(function(){return u.Tr2ActionPlaySound}));var c=r("./unsupported/state/action/Tr2ActionResetClipSphereCenter.js");r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return c.Tr2ActionResetClipSphereCenter}));var f=r("./unsupported/state/action/Tr2ActionSetValue.js");r.d(t,"Tr2ActionSetValue",(function(){return f.Tr2ActionSetValue}));var d=r("./unsupported/state/action/Tr2ActionSpawnParticles.js");r.d(t,"Tr2ActionSpawnParticles",(function(){return d.Tr2ActionSpawnParticles}))},"./unsupported/state/controller/Tr2Controller.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Controller",(function(){return y}));var i,n,a,o,s,l,u,c,f,d,h,m,b,p=r("./global/utils/index.js");function v(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function g(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var y=(i=p.meta.notImplemented,n=p.meta.type("Tr2Controller"),a=p.meta.string,o=p.meta.boolean,s=p.meta.list("Tr2StateMachine"),l=p.meta.list("Tr2ControllerFloatVariable"),i(u=n((b=class extends p.meta.Model{constructor(...e){super(...e),v(this,"name",f,this),v(this,"isShared",d,this),v(this,"stateMachines",h,this),v(this,"variables",m,this)}},f=g((c=b).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=g(c.prototype,"isShared",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=g(c.prototype,"stateMachines",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=g(c.prototype,"variables",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=c))||u)||u)},"./unsupported/state/controller/Tr2ControllerReference.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerReference",(function(){return v}));var i,n,a,o,s,l,u,c=r("./global/utils/index.js");var f,d,h,m,b,p,v=(i=c.meta.notImplemented,n=c.meta.type("Tr2ControllerReference"),a=c.meta.path,i(o=n((u=class extends c.meta.Model{constructor(...e){var t,r,i,n;super(...e),t=this,r="path",n=this,(i=l)&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}},f=(s=u).prototype,d="path",h=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},p={},Object.keys(m).forEach((function(e){p[e]=m[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=h.slice().reverse().reduce((function(e,t){return t(f,d,e)||e}),p),b&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(b):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(f,d,p),p=null),l=p,o=s))||o)||o)},"./unsupported/state/controller/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/state/controller/Tr2Controller.js");r.d(t,"Tr2Controller",(function(){return i.Tr2Controller}));var n=r("./unsupported/state/controller/Tr2ControllerReference.js");r.d(t,"Tr2ControllerReference",(function(){return n.Tr2ControllerReference}))},"./unsupported/state/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/state/action/index.js");r.d(t,"Tr2ActionAnimateCurveSet",(function(){return i.Tr2ActionAnimateCurveSet})),r.d(t,"Tr2ActionAnimateValue",(function(){return i.Tr2ActionAnimateValue})),r.d(t,"Tr2ActionChildEffect",(function(){return i.Tr2ActionChildEffect})),r.d(t,"Tr2ActionOverlay",(function(){return i.Tr2ActionOverlay})),r.d(t,"Tr2ActionPlayCurveSet",(function(){return i.Tr2ActionPlayCurveSet})),r.d(t,"Tr2ActionPlayMeshAnimation",(function(){return i.Tr2ActionPlayMeshAnimation})),r.d(t,"Tr2ActionPlaySound",(function(){return i.Tr2ActionPlaySound})),r.d(t,"Tr2ActionResetClipSphereCenter",(function(){return i.Tr2ActionResetClipSphereCenter})),r.d(t,"Tr2ActionSetValue",(function(){return i.Tr2ActionSetValue})),r.d(t,"Tr2ActionSpawnParticles",(function(){return i.Tr2ActionSpawnParticles}));var n=r("./unsupported/state/controller/index.js");r.d(t,"Tr2Controller",(function(){return n.Tr2Controller})),r.d(t,"Tr2ControllerReference",(function(){return n.Tr2ControllerReference}));var a=r("./unsupported/state/variable/index.js");r.d(t,"Tr2ControllerFloatVariable",(function(){return a.Tr2ControllerFloatVariable}));var o=r("./unsupported/state/Tr2StateMachine.js");r.d(t,"Tr2StateMachine",(function(){return o.Tr2StateMachine}));var s=r("./unsupported/state/Tr2StateMachineState.js");r.d(t,"Tr2StateMachineState",(function(){return s.Tr2StateMachineState}));var l=r("./unsupported/state/Tr2StateMachineTransition.js");r.d(t,"Tr2StateMachineTransition",(function(){return l.Tr2StateMachineTransition}));var u=r("./unsupported/state/Tr2SyncToAnimation.js");r.d(t,"Tr2SyncToAnimation",(function(){return u.Tr2SyncToAnimation}))},"./unsupported/state/variable/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerFloatVariable",(function(){return g}));var i,n,a,o,s,l,u,c,f,d,h,m,b=r("./global/utils/index.js");function p(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function v(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=(i=b.meta.notImplemented,n=b.meta.type("Tr2ControllerFloatVariable"),a=b.meta.string,o=b.meta.float,s=b.meta.enums(),l=b.meta.uint,i(u=n((f=v((c=class{constructor(){p(this,"name",f,this),p(this,"defaultValue",d,this),p(this,"enumValues",h,this),p(this,"variableType",m,this)}GetEnumsAsString(){var e=[];for(var t in this.enumValues)this.enumValues.hasOwnProperty(t)&&e.push("".concat(t,"=").concat(this.enumValues[t]));return e.sort().join(",")}}).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=v(c.prototype,"defaultValue",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=v(c.prototype,"enumValues",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=v(c.prototype,"variableType",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=c))||u)||u)},"./unsupported/state/variable/index.js":function(e,t,r){"use strict";r.r(t);var i=r("./unsupported/state/variable/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",(function(){return i.Tr2ControllerFloatVariable}))}})}));