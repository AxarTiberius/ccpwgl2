!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./index.js")}({"../node_modules/core-js/internals/a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"../node_modules/core-js/internals/a-possible-prototype.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"../node_modules/core-js/internals/add-to-unscopables.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),s=r("../node_modules/core-js/internals/object-create.js"),i=r("../node_modules/core-js/internals/hide.js"),a=n("unscopables"),o=Array.prototype;null==o[a]&&i(o,a,s(null)),e.exports=function(e){o[a][e]=!0}},"../node_modules/core-js/internals/advance-string-index.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"../node_modules/core-js/internals/an-instance.js":function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},"../node_modules/core-js/internals/an-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"../node_modules/core-js/internals/array-buffer-view-core.js":function(e,t,r){"use strict";var n,s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/classof.js"),c=r("../node_modules/core-js/internals/hide.js"),l=r("../node_modules/core-js/internals/redefine.js"),h=r("../node_modules/core-js/internals/object-define-property.js").f,d=r("../node_modules/core-js/internals/object-get-prototype-of.js"),f=r("../node_modules/core-js/internals/object-set-prototype-of.js"),m=r("../node_modules/core-js/internals/well-known-symbol.js"),p=r("../node_modules/core-js/internals/uid.js"),v=i.DataView,_=v&&v.prototype,E=i.Int8Array,S=E&&E.prototype,T=i.Uint8ClampedArray,g=T&&T.prototype,R=E&&d(E),b=S&&d(S),A=Object.prototype,y=A.isPrototypeOf,j=m("toStringTag"),w=p("TYPED_ARRAY_TAG"),C=!(!i.ArrayBuffer||!v),D=C&&!!f,L=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x=function(e){return a(e)&&o(P,u(e))};for(n in P)i[n]||(D=!1);if((!D||"function"!=typeof R||R===Function.prototype)&&(R=function(){throw TypeError("Incorrect invocation")},D))for(n in P)i[n]&&f(i[n],R);if((!D||!b||b===A)&&(b=R.prototype,D))for(n in P)i[n]&&f(i[n].prototype,b);if(D&&d(g)!==b&&f(g,b),s&&!o(b,j))for(n in L=!0,h(b,j,{get:function(){return a(this)?this[w]:void 0}}),P)i[n]&&c(i[n],w,n);C&&f&&d(_)!==A&&f(_,A),e.exports={NATIVE_ARRAY_BUFFER:C,NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:L&&w,aTypedArray:function(e){if(x(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(y.call(R,e))return e}else for(var t in P)if(o(P,n)){var r=i[t];if(r&&(e===r||y.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportProto:function(e,t,r){if(s){if(r)for(var n in P){var a=i[n];a&&o(a.prototype,e)&&delete a.prototype[e]}b[e]&&!r||l(b,e,r?t:D&&S[e]||t)}},exportStatic:function(e,t,r){var n,a;if(s){if(f){if(r)for(n in P)(a=i[n])&&o(a,e)&&delete a[e];if(R[e]&&!r)return;try{return l(R,e,r?t:D&&E[e]||t)}catch(e){}}for(n in P)!(a=i[n])||a[e]&&!r||l(a,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||o(P,t)},isTypedArray:x,TypedArray:R,TypedArrayPrototype:b}},"../node_modules/core-js/internals/array-buffer.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER,a=r("../node_modules/core-js/internals/hide.js"),o=r("../node_modules/core-js/internals/redefine-all.js"),u=r("../node_modules/core-js/internals/fails.js"),c=r("../node_modules/core-js/internals/an-instance.js"),l=r("../node_modules/core-js/internals/to-integer.js"),h=r("../node_modules/core-js/internals/to-length.js"),d=r("../node_modules/core-js/internals/to-index.js"),f=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,m=r("../node_modules/core-js/internals/object-define-property.js").f,p=r("../node_modules/core-js/internals/array-fill.js"),v=r("../node_modules/core-js/internals/set-to-string-tag.js"),_=r("../node_modules/core-js/internals/internal-state.js"),E=_.get,S=_.set,T=n.ArrayBuffer,g=T,R=n.DataView,b=n.Math,A=n.RangeError,y=b.abs,j=b.pow,w=b.floor,C=b.log,D=b.LN2,L=function(e,t,r){var n,s,i,a=new Array(r),o=8*r-t-1,u=(1<<o)-1,c=u>>1,l=23===t?j(2,-24)-j(2,-77):0,h=e<0||0===e&&1/e<0?1:0,d=0;for((e=y(e))!=e||e===1/0?(s=e!=e?1:0,n=u):(n=w(C(e)/D),e*(i=j(2,-n))<1&&(n--,i*=2),(e+=n+c>=1?l/i:l*j(2,1-c))*i>=2&&(n++,i/=2),n+c>=u?(s=0,n=u):n+c>=1?(s=(e*i-1)*j(2,t),n+=c):(s=e*j(2,c-1)*j(2,t),n=0));t>=8;a[d++]=255&s,s/=256,t-=8);for(n=n<<t|s,o+=t;o>0;a[d++]=255&n,n/=256,o-=8);return a[--d]|=128*h,a},P=function(e,t){var r,n=e.length,s=8*n-t-1,i=(1<<s)-1,a=i>>1,o=s-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;o>0;l=256*l+e[u],u--,o-=8);for(r=l&(1<<-o)-1,l>>=-o,o+=t;o>0;r=256*r+e[u],u--,o-=8);if(0===l)l=1-a;else{if(l===i)return r?NaN:c?-1/0:1/0;r+=j(2,t),l-=a}return(c?-1:1)*r*j(2,l-t)},x=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},O=function(e){return[255&e]},I=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},F=function(e){return L(e,23,4)},G=function(e){return L(e,52,8)},N=function(e,t){m(e.prototype,t,{get:function(){return E(this)[t]}})},B=function(e,t,r,n){var s=d(+r),i=E(e);if(s+t>i.byteLength)throw A("Wrong index");var a=E(i.buffer).bytes,o=s+i.byteOffset,u=a.slice(o,o+t);return n?u:u.reverse()},U=function(e,t,r,n,s,i){var a=d(+r),o=E(e);if(a+t>o.byteLength)throw A("Wrong index");for(var u=E(o.buffer).bytes,c=a+o.byteOffset,l=n(+s),h=0;h<t;h++)u[c+h]=l[i?h:t-h-1]};if(i){if(!u(function(){T(1)})||!u(function(){new T(-1)})||u(function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name})){for(var V,k=(g=function(e){return c(this,g),new T(d(e))}).prototype=T.prototype,H=f(T),q=0;H.length>q;)(V=H[q++])in g||a(g,V,T[V]);k.constructor=g}var z=new R(new g(2)),W=R.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||o(R.prototype,{setInt8:function(e,t){W.call(this,e,t<<24>>24)},setUint8:function(e,t){W.call(this,e,t<<24>>24)}},{unsafe:!0})}else g=function(e){c(this,g,"ArrayBuffer");var t=d(e);S(this,{bytes:p.call(new Array(t),0),byteLength:t}),s||(this.byteLength=t)},R=function(e,t,r){c(this,R,"DataView"),c(e,g,"DataView");var n=E(e).byteLength,i=l(t);if(i<0||i>n)throw A("Wrong offset");if(i+(r=void 0===r?n-i:h(r))>n)throw A("Wrong length");S(this,{buffer:e,byteLength:r,byteOffset:i}),s||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},s&&(N(g,"byteLength"),N(R,"buffer"),N(R,"byteLength"),N(R,"byteOffset")),o(R.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return x(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return x(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return P(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return P(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){U(this,1,e,O,t)},setUint8:function(e,t){U(this,1,e,O,t)},setInt16:function(e,t){U(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){U(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){U(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){U(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){U(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){U(this,8,e,G,t,arguments.length>2?arguments[2]:void 0)}});v(g,"ArrayBuffer"),v(R,"DataView"),t.ArrayBuffer=g,t.DataView=R},"../node_modules/core-js/internals/array-fill.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/to-absolute-index.js"),i=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){for(var t=n(this),r=i(t.length),a=arguments.length,o=s(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:s(u,r);c>o;)t[o++]=e;return t}},"../node_modules/core-js/internals/array-for-each.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-iteration.js").forEach,s=r("../node_modules/core-js/internals/sloppy-array-method.js");e.exports=s("forEach")?function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},"../node_modules/core-js/internals/array-from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/bind-context.js"),s=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),o=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/create-property.js"),c=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t,r,l,h,d=s(e),f="function"==typeof this?this:Array,m=arguments.length,p=m>1?arguments[1]:void 0,v=void 0!==p,_=0,E=c(d);if(v&&(p=n(p,m>2?arguments[2]:void 0,2)),null==E||f==Array&&a(E))for(r=new f(t=o(d.length));t>_;_++)u(r,_,v?p(d[_],_):d[_]);else for(h=E.call(d),r=new f;!(l=h.next()).done;_++)u(r,_,v?i(h,p,[l.value,_],!0):l.value);return r.length=_,r}},"../node_modules/core-js/internals/array-includes.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-indexed-object.js"),s=r("../node_modules/core-js/internals/to-length.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),a=function(e){return function(t,r,a){var o,u=n(t),c=s(u.length),l=i(a,c);if(e&&r!=r){for(;c>l;)if((o=u[l++])!=o)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"../node_modules/core-js/internals/array-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/bind-context.js"),s=r("../node_modules/core-js/internals/indexed-object.js"),i=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/array-species-create.js"),u=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,l=4==e,h=6==e,d=5==e||h;return function(f,m,p,v){for(var _,E,S=i(f),T=s(S),g=n(m,p,3),R=a(T.length),b=0,A=v||o,y=t?A(f,R):r?A(f,0):void 0;R>b;b++)if((d||b in T)&&(E=g(_=T[b],b,S),e))if(t)y[b]=E;else if(E)switch(e){case 3:return!0;case 5:return _;case 6:return b;case 2:u.call(y,_)}else if(l)return!1;return h?-1:c||l?l:y}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},"../node_modules/core-js/internals/array-species-create.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),s=r("../node_modules/core-js/internals/is-array.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r;return s(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!s(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"../node_modules/core-js/internals/bind-context.js":function(e,t,r){var n=r("../node_modules/core-js/internals/a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,s){return e.call(t,r,n,s)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},"../node_modules/core-js/internals/check-correctness-of-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),s=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){s=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},"../node_modules/core-js/internals/classof-raw.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"../node_modules/core-js/internals/classof.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},"../node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/own-keys.js"),i=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),a=r("../node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var r=s(t),o=a.f,u=i.f,c=0;c<r.length;c++){var l=r[c];n(e,l)||o(e,l,u(t,l))}}},"../node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},"../node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/iterators-core.js").IteratorPrototype,s=r("../node_modules/core-js/internals/object-create.js"),i=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/set-to-string-tag.js"),o=r("../node_modules/core-js/internals/iterators.js"),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=s(n,{next:i(1,r)}),a(e,c,!1,!0),o[c]=u,e}},"../node_modules/core-js/internals/create-property-descriptor.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/internals/create-property.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-primitive.js"),s=r("../node_modules/core-js/internals/object-define-property.js"),i=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,r){var a=n(t);a in e?s.f(e,a,i(0,r)):e[a]=r}},"../node_modules/core-js/internals/define-iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/create-iterator-constructor.js"),i=r("../node_modules/core-js/internals/object-get-prototype-of.js"),a=r("../node_modules/core-js/internals/object-set-prototype-of.js"),o=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/hide.js"),c=r("../node_modules/core-js/internals/redefine.js"),l=r("../node_modules/core-js/internals/well-known-symbol.js"),h=r("../node_modules/core-js/internals/is-pure.js"),d=r("../node_modules/core-js/internals/iterators.js"),f=r("../node_modules/core-js/internals/iterators-core.js"),m=f.IteratorPrototype,p=f.BUGGY_SAFARI_ITERATORS,v=l("iterator"),_=function(){return this};e.exports=function(e,t,r,l,f,E,S){s(r,t,l);var T,g,R,b=function(e){if(e===f&&C)return C;if(!p&&e in j)return j[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},A=t+" Iterator",y=!1,j=e.prototype,w=j[v]||j["@@iterator"]||f&&j[f],C=!p&&w||b(f),D="Array"==t&&j.entries||w;if(D&&(T=i(D.call(new e)),m!==Object.prototype&&T.next&&(h||i(T)===m||(a?a(T,m):"function"!=typeof T[v]&&u(T,v,_)),o(T,A,!0,!0),h&&(d[A]=_))),"values"==f&&w&&"values"!==w.name&&(y=!0,C=function(){return w.call(this)}),h&&!S||j[v]===C||u(j,v,C),d[t]=C,f)if(g={values:b("values"),keys:E?C:b("keys"),entries:b("entries")},S)for(R in g)!p&&!y&&R in j||c(j,R,g[R]);else n({target:t,proto:!0,forced:p||y},g);return g}},"../node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),s=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/wrapped-well-known-symbol.js"),a=r("../node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});s(t,e)||a(t,e,{value:i.f(e)})}},"../node_modules/core-js/internals/descriptors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"../node_modules/core-js/internals/document-create-element.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/is-object.js"),i=n.document,a=s(i)&&s(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},"../node_modules/core-js/internals/dom-iterables.js":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"../node_modules/core-js/internals/enum-bug-keys.js":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"../node_modules/core-js/internals/export.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,i=r("../node_modules/core-js/internals/hide.js"),a=r("../node_modules/core-js/internals/redefine.js"),o=r("../node_modules/core-js/internals/set-global.js"),u=r("../node_modules/core-js/internals/copy-constructor-properties.js"),c=r("../node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var r,l,h,d,f,m=e.target,p=e.global,v=e.stat;if(r=p?n:v?n[m]||o(m,{}):(n[m]||{}).prototype)for(l in t){if(d=t[l],h=e.noTargetGet?(f=s(r,l))&&f.value:r[l],!c(p?l:m+(v?".":"#")+l,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;u(d,h)}(e.sham||h&&h.sham)&&i(d,"sham",!0),a(r,l,d,e)}}},"../node_modules/core-js/internals/fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/hide.js"),s=r("../node_modules/core-js/internals/redefine.js"),i=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/regexp-exec.js"),u=a("species"),c=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),l=!i(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]});e.exports=function(e,t,r,h){var d=a(e),f=!i(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),m=f&&!i(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[d](""),!t});if(!f||!m||"replace"===e&&!c||"split"===e&&!l){var p=/./[d],v=r(d,""[e],function(e,t,r,n,s){return t.exec===o?f&&!s?{done:!0,value:p.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),_=v[0],E=v[1];s(String.prototype,e,_),s(RegExp.prototype,d,2==t?function(e,t){return E.call(e,this,t)}:function(e){return E.call(e,this)}),h&&n(RegExp.prototype[d],"sham",!0)}}},"../node_modules/core-js/internals/flatten-into-array.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-array.js"),s=r("../node_modules/core-js/internals/to-length.js"),i=r("../node_modules/core-js/internals/bind-context.js"),a=function(e,t,r,o,u,c,l,h){for(var d,f=u,m=0,p=!!l&&i(l,h,3);m<o;){if(m in r){if(d=p?p(r[m],m,t):r[m],c>0&&n(d))f=a(e,t,d,s(d.length),f,c-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=d}f++}m++}return f};e.exports=a},"../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-pure.js"),s=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/fails.js");e.exports=n||!i(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete s[e]})},"../node_modules/core-js/internals/forced-string-trim-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/whitespaces.js");e.exports=function(e){return n(function(){return!!s[e]()||"​᠎"!="​᠎"[e]()||s[e].name!==e})}},"../node_modules/core-js/internals/function-to-string.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared.js");e.exports=n("native-function-to-string",Function.toString)},"../node_modules/core-js/internals/get-built-in.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),s=r("../node_modules/core-js/internals/global.js"),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(s[e]):n[e]&&n[e][t]||s[e]&&s[e][t]}},"../node_modules/core-js/internals/get-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof.js"),s=r("../node_modules/core-js/internals/iterators.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||s[n(e)]}},"../node_modules/core-js/internals/get-iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},"../node_modules/core-js/internals/global.js":function(e,t,r){(function(t){var r="object",n=function(e){return e&&e.Math==Math&&e};e.exports=n(typeof globalThis==r&&globalThis)||n(typeof window==r&&window)||n(typeof self==r&&self)||n(typeof t==r&&t)||Function("return this")()}).call(this,r("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-js/internals/has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"../node_modules/core-js/internals/hidden-keys.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/hide.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/object-define-property.js"),i=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=n?function(e,t,r){return s.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},"../node_modules/core-js/internals/host-report-errors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},"../node_modules/core-js/internals/html.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("document","documentElement")},"../node_modules/core-js/internals/ie8-dom-define.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/document-create-element.js");e.exports=!n&&!s(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},"../node_modules/core-js/internals/indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/classof-raw.js"),i="".split;e.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==s(e)?i.call(e,""):Object(e)}:Object},"../node_modules/core-js/internals/internal-state.js":function(e,t,r){var n,s,i,a=r("../node_modules/core-js/internals/native-weak-map.js"),o=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/is-object.js"),c=r("../node_modules/core-js/internals/hide.js"),l=r("../node_modules/core-js/internals/has.js"),h=r("../node_modules/core-js/internals/shared-key.js"),d=r("../node_modules/core-js/internals/hidden-keys.js"),f=o.WeakMap;if(a){var m=new f,p=m.get,v=m.has,_=m.set;n=function(e,t){return _.call(m,e,t),t},s=function(e){return p.call(m,e)||{}},i=function(e){return v.call(m,e)}}else{var E=h("state");d[E]=!0,n=function(e,t){return c(e,E,t),t},s=function(e){return l(e,E)?e[E]:{}},i=function(e){return l(e,E)}}e.exports={set:n,get:s,has:i,enforce:function(e){return i(e)?s(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},"../node_modules/core-js/internals/is-array-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),s=r("../node_modules/core-js/internals/iterators.js"),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||a[i]===e)}},"../node_modules/core-js/internals/is-array.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"../node_modules/core-js/internals/is-forced.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),s=/#|\.prototype\./,i=function(e,t){var r=o[a(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},"../node_modules/core-js/internals/is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/internals/is-pure.js":function(e,t){e.exports=!1},"../node_modules/core-js/internals/iterate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/is-array-iterator-method.js"),i=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/bind-context.js"),o=r("../node_modules/core-js/internals/get-iterator-method.js"),u=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,l,h){var d,f,m,p,v,_,E=a(t,r,l?2:1);if(h)d=e;else{if("function"!=typeof(f=o(e)))throw TypeError("Target is not iterable");if(s(f)){for(m=0,p=i(e.length);p>m;m++)if((v=l?E(n(_=e[m])[0],_[1]):E(e[m]))&&v instanceof c)return v;return new c(!1)}d=f.call(e)}for(;!(_=d.next()).done;)if((v=u(d,E,_.value,l))&&v instanceof c)return v;return new c(!1)}).stop=function(e){return new c(!0,e)}},"../node_modules/core-js/internals/iterators-core.js":function(e,t,r){"use strict";var n,s,i,a=r("../node_modules/core-js/internals/object-get-prototype-of.js"),o=r("../node_modules/core-js/internals/hide.js"),u=r("../node_modules/core-js/internals/has.js"),c=r("../node_modules/core-js/internals/well-known-symbol.js"),l=r("../node_modules/core-js/internals/is-pure.js"),h=c("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(s=a(a(i)))!==Object.prototype&&(n=s):d=!0),null==n&&(n={}),l||u(n,h)||o(n,h,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},"../node_modules/core-js/internals/iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/microtask.js":function(e,t,r){var n,s,i,a,o,u,c,l=r("../node_modules/core-js/internals/global.js"),h=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,d=r("../node_modules/core-js/internals/classof-raw.js"),f=r("../node_modules/core-js/internals/task.js").set,m=r("../node_modules/core-js/internals/user-agent.js"),p=l.MutationObserver||l.WebKitMutationObserver,v=l.process,_=l.Promise,E="process"==d(v),S=h(l,"queueMicrotask"),T=S&&S.value;T||(n=function(){var e,t;for(E&&(e=v.domain)&&e.exit();s;){t=s.fn,s=s.next;try{t()}catch(e){throw s?a():i=void 0,e}}i=void 0,e&&e.enter()},E?a=function(){v.nextTick(n)}:p&&!/(iphone|ipod|ipad).*applewebkit/i.test(m)?(o=!0,u=document.createTextNode(""),new p(n).observe(u,{characterData:!0}),a=function(){u.data=o=!o}):_&&_.resolve?(c=_.resolve(void 0),a=function(){c.then(n)}):a=function(){f.call(l,n)}),e.exports=T||function(e){var t={fn:e,next:void 0};i&&(i.next=t),s||(s=t,a()),i=t}},"../node_modules/core-js/internals/native-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},"../node_modules/core-js/internals/native-url.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js"),i=r("../node_modules/core-js/internals/is-pure.js"),a=s("iterator");e.exports=!n(function(){var e=new URL("b?e=1","http://a"),t=e.searchParams;return e.pathname="c%20d",i&&!e.toJSON||!t.sort||"http://a/c%20d?e=1"!==e.href||"1"!==t.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash})},"../node_modules/core-js/internals/native-weak-map.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/function-to-string.js"),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(s.call(i))},"../node_modules/core-js/internals/new-promise-capability.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/a-function.js"),s=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new s(e)}},"../node_modules/core-js/internals/object-assign.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/object-keys.js"),a=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),o=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),u=r("../node_modules/core-js/internals/to-object.js"),c=r("../node_modules/core-js/internals/indexed-object.js"),l=Object.assign;e.exports=!l||s(function(){var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")})?function(e,t){for(var r=u(e),s=arguments.length,l=1,h=a.f,d=o.f;s>l;)for(var f,m=c(arguments[l++]),p=h?i(m).concat(h(m)):i(m),v=p.length,_=0;v>_;)f=p[_++],n&&!d.call(m,f)||(r[f]=m[f]);return r}:l},"../node_modules/core-js/internals/object-create.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/object-define-properties.js"),i=r("../node_modules/core-js/internals/enum-bug-keys.js"),a=r("../node_modules/core-js/internals/hidden-keys.js"),o=r("../node_modules/core-js/internals/html.js"),u=r("../node_modules/core-js/internals/document-create-element.js"),c=r("../node_modules/core-js/internals/shared-key.js")("IE_PROTO"),l=function(){},h=function(){var e,t=u("iframe"),r=i.length;for(t.style.display="none",o.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),h=e.F;r--;)delete h.prototype[i[r]];return h()};e.exports=Object.create||function(e,t){var r;return null!==e?(l.prototype=n(e),r=new l,l.prototype=null,r[c]=e):r=h(),void 0===t?r:s(r,t)},a[c]=!0},"../node_modules/core-js/internals/object-define-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/object-define-property.js"),i=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/object-keys.js");e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),o=n.length,u=0;o>u;)s.f(e,r=n[u++],t[r]);return e}},"../node_modules/core-js/internals/object-define-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/ie8-dom-define.js"),i=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/to-primitive.js"),o=Object.defineProperty;t.f=n?o:function(e,t,r){if(i(e),t=a(t,!0),i(r),s)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"../node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),i=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/to-indexed-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/has.js"),c=r("../node_modules/core-js/internals/ie8-dom-define.js"),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=o(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return i(!s.f.call(e,t),e[t])}},"../node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),s=r("../node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},"../node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/shared-key.js"),a=r("../node_modules/core-js/internals/correct-prototype-getter.js"),o=i("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=s(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},"../node_modules/core-js/internals/object-keys-internal.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/array-includes.js").indexOf,a=r("../node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var r,o=s(e),u=0,c=[];for(r in o)!n(a,r)&&n(o,r)&&c.push(r);for(;t.length>u;)n(o,r=t[u++])&&(~i(c,r)||c.push(r));return c}},"../node_modules/core-js/internals/object-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),s=r("../node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,s)}},"../node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t,r){"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!n.call({1:2},1);t.f=i?function(e){var t=s(this,e);return!!t&&t.enumerable}:n},"../node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),s(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},"../node_modules/core-js/internals/own-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js"),s=r("../node_modules/core-js/internals/object-get-own-property-names.js"),i=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),a=r("../node_modules/core-js/internals/an-object.js");e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},"../node_modules/core-js/internals/parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/string-trim.js").trim,i=r("../node_modules/core-js/internals/whitespaces.js"),a=n.parseFloat,o=1/a(i+"-0")!=-1/0;e.exports=o?function(e){var t=s(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},"../node_modules/core-js/internals/path.js":function(e,t,r){e.exports=r("../node_modules/core-js/internals/global.js")},"../node_modules/core-js/internals/perform.js":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},"../node_modules/core-js/internals/promise-resolve.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/new-promise-capability.js");e.exports=function(e,t){if(n(e),s(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},"../node_modules/core-js/internals/punycode-to-ascii.js":function(e,t,r){"use strict";var n=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,o=String.fromCharCode,u=function(e){return e+22+75*(e<26)},c=function(e,t,r){var n=0;for(e=r?a(e/700):e>>1,e+=a(e/t);e>455;n+=36)e=a(e/35);return a(n+36*e/(e+38))},l=function(e){var t,r,n=[],s=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),r--)}else t.push(s)}return t}(e)).length,l=128,h=0,d=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(o(r));var f=n.length,m=f;for(f&&n.push("-");m<s;){var p=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=l&&r<p&&(p=r);var v=m+1;if(p-l>a((2147483647-h)/v))throw RangeError(i);for(h+=(p-l)*v,l=p,t=0;t<e.length;t++){if((r=e[t])<l&&++h>2147483647)throw RangeError(i);if(r==l){for(var _=h,E=36;;E+=36){var S=E<=d?1:E>=d+26?26:E-d;if(_<S)break;var T=_-S,g=36-S;n.push(o(u(S+T%g))),_=a(T/g)}n.push(o(u(_))),d=c(h,v,m==f),h=0,++m}}++h,++l}return n.join("")};e.exports=function(e){var t,r,i=[],a=e.toLowerCase().replace(s,".").split(".");for(t=0;t<a.length;t++)r=a[t],i.push(n.test(r)?"xn--"+l(r):r);return i.join(".")}},"../node_modules/core-js/internals/redefine-all.js":function(e,t,r){var n=r("../node_modules/core-js/internals/redefine.js");e.exports=function(e,t,r){for(var s in t)n(e,s,t[s],r);return e}},"../node_modules/core-js/internals/redefine.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/shared.js"),i=r("../node_modules/core-js/internals/hide.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/set-global.js"),u=r("../node_modules/core-js/internals/function-to-string.js"),c=r("../node_modules/core-js/internals/internal-state.js"),l=c.get,h=c.enforce,d=String(u).split("toString");s("inspectSource",function(e){return u.call(e)}),(e.exports=function(e,t,r,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||i(r,"name",t),h(r).source=d.join("string"==typeof t?t:"")),e!==n?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=r:i(e,t,r)):c?e[t]=r:o(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||u.call(this)})},"../node_modules/core-js/internals/regexp-exec-abstract.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js"),s=r("../node_modules/core-js/internals/regexp-exec.js");e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},"../node_modules/core-js/internals/regexp-exec.js":function(e,t,r){"use strict";var n,s,i=r("../node_modules/core-js/internals/regexp-flags.js"),a=RegExp.prototype.exec,o=String.prototype.replace,u=a,c=(n=/a/,s=/b*/g,a.call(n,"a"),a.call(s,"a"),0!==n.lastIndex||0!==s.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(e){var t,r,n,s,u=this;return l&&(r=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),c&&(t=u.lastIndex),n=a.call(u,e),c&&n&&(u.lastIndex=u.global?n.index+n[0].length:t),l&&n&&n.length>1&&o.call(n[0],r,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)}),n}),e.exports=u},"../node_modules/core-js/internals/regexp-flags.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"../node_modules/core-js/internals/require-object-coercible.js":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"../node_modules/core-js/internals/set-global.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/hide.js");e.exports=function(e,t){try{s(n,e,t)}catch(r){n[e]=t}return t}},"../node_modules/core-js/internals/set-species.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/get-built-in.js"),s=r("../node_modules/core-js/internals/object-define-property.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/descriptors.js"),o=i("species");e.exports=function(e){var t=n(e),r=s.f;a&&t&&!t[o]&&r(t,o,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/internals/set-to-string-tag.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-define-property.js").f,s=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,r){e&&!s(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},"../node_modules/core-js/internals/shared-key.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared.js"),s=r("../node_modules/core-js/internals/uid.js"),i=n("keys");e.exports=function(e){return i[e]||(i[e]=s(e))}},"../node_modules/core-js/internals/shared.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/set-global.js"),i=r("../node_modules/core-js/internals/is-pure.js"),a=n["__core-js_shared__"]||s("__core-js_shared__",{});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:i?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"../node_modules/core-js/internals/sloppy-array-method.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fails.js");e.exports=function(e,t){var r=[][e];return!r||!n(function(){r.call(null,t||function(){throw 1},1)})}},"../node_modules/core-js/internals/species-constructor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/a-function.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:s(r)}},"../node_modules/core-js/internals/string-multibyte.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),s=r("../node_modules/core-js/internals/require-object-coercible.js"),i=function(e){return function(t,r){var i,a,o=String(s(t)),u=n(r),c=o.length;return u<0||u>=c?e?"":void 0:(i=o.charCodeAt(u))<55296||i>56319||u+1===c||(a=o.charCodeAt(u+1))<56320||a>57343?e?o.charAt(u):i:e?o.slice(u,u+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},"../node_modules/core-js/internals/string-pad.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/string-repeat.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js"),a=Math.ceil,o=function(e){return function(t,r,o){var u,c,l=String(i(t)),h=l.length,d=void 0===o?" ":String(o),f=n(r);return f<=h||""==d?l:(u=f-h,(c=s.call(d,a(u/d.length))).length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:o(!1),end:o(!0)}},"../node_modules/core-js/internals/string-repeat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-integer.js"),s=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports="".repeat||function(e){var t=String(s(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},"../node_modules/core-js/internals/string-trim.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js"),s="["+r("../node_modules/core-js/internals/whitespaces.js")+"]",i=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),o=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:o(1),end:o(2),trim:o(3)}},"../node_modules/core-js/internals/task.js":function(e,t,r){var n,s,i,a=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/fails.js"),u=r("../node_modules/core-js/internals/classof-raw.js"),c=r("../node_modules/core-js/internals/bind-context.js"),l=r("../node_modules/core-js/internals/html.js"),h=r("../node_modules/core-js/internals/document-create-element.js"),d=a.location,f=a.setImmediate,m=a.clearImmediate,p=a.process,v=a.MessageChannel,_=a.Dispatch,E=0,S={},T=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},g=function(e){return function(){T(e)}},R=function(e){T(e.data)},b=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};f&&m||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return S[++E]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(E),E},m=function(e){delete S[e]},"process"==u(p)?n=function(e){p.nextTick(g(e))}:_&&_.now?n=function(e){_.now(g(e))}:v?(i=(s=new v).port2,s.port1.onmessage=R,n=c(i.postMessage,i,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||o(b)?n="onreadystatechange"in h("script")?function(e){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),T(e)}}:function(e){setTimeout(g(e),0)}:(n=b,a.addEventListener("message",R,!1))),e.exports={set:f,clear:m}},"../node_modules/core-js/internals/to-absolute-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),s=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?s(r+t,0):i(r,t)}},"../node_modules/core-js/internals/to-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),s=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=s(t);if(t!==r)throw RangeError("Wrong length or index");return r}},"../node_modules/core-js/internals/to-indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/indexed-object.js"),s=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return n(s(e))}},"../node_modules/core-js/internals/to-integer.js":function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"../node_modules/core-js/internals/to-length.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},"../node_modules/core-js/internals/to-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(n(e))}},"../node_modules/core-js/internals/to-offset.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js");e.exports=function(e,t){var r=n(e);if(r<0||r%t)throw RangeError("Wrong offset");return r}},"../node_modules/core-js/internals/to-primitive.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,s;if(t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;if("function"==typeof(r=e.valueOf)&&!n(s=r.call(e)))return s;if(!t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/internals/typed-array-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),o=r("../node_modules/core-js/internals/array-buffer-view-core.js"),u=r("../node_modules/core-js/internals/array-buffer.js"),c=r("../node_modules/core-js/internals/an-instance.js"),l=r("../node_modules/core-js/internals/create-property-descriptor.js"),h=r("../node_modules/core-js/internals/hide.js"),d=r("../node_modules/core-js/internals/to-length.js"),f=r("../node_modules/core-js/internals/to-index.js"),m=r("../node_modules/core-js/internals/to-offset.js"),p=r("../node_modules/core-js/internals/to-primitive.js"),v=r("../node_modules/core-js/internals/has.js"),_=r("../node_modules/core-js/internals/classof.js"),E=r("../node_modules/core-js/internals/is-object.js"),S=r("../node_modules/core-js/internals/object-create.js"),T=r("../node_modules/core-js/internals/object-set-prototype-of.js"),g=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,R=r("../node_modules/core-js/internals/typed-array-from.js"),b=r("../node_modules/core-js/internals/array-iteration.js").forEach,A=r("../node_modules/core-js/internals/set-species.js"),y=r("../node_modules/core-js/internals/object-define-property.js"),j=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),w=r("../node_modules/core-js/internals/internal-state.js"),C=w.get,D=w.set,L=y.f,P=j.f,x=Math.round,O=s.RangeError,I=u.ArrayBuffer,M=u.DataView,F=o.NATIVE_ARRAY_BUFFER_VIEWS,G=o.TYPED_ARRAY_TAG,N=o.TypedArray,B=o.TypedArrayPrototype,U=o.aTypedArrayConstructor,V=o.isTypedArray,k=function(e,t){for(var r=0,n=t.length,s=new(U(e))(n);n>r;)s[r]=t[r++];return s},H=function(e,t){L(e,t,{get:function(){return C(this)[t]}})},q=function(e){var t;return e instanceof I||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},z=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},W=function(e,t){return z(e,t=p(t,!0))?l(2,e[t]):P(e,t)},Y=function(e,t,r){return!(z(e,t=p(t,!0))&&E(r)&&v(r,"value"))||v(r,"get")||v(r,"set")||r.configurable||v(r,"writable")&&!r.writable||v(r,"enumerable")&&!r.enumerable?L(e,t,r):(e[t]=r.value,e)};i?(F||(j.f=W,y.f=Y,H(B,"buffer"),H(B,"byteOffset"),H(B,"byteLength"),H(B,"length")),n({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:W,defineProperty:Y}),e.exports=function(e,t,r,i){var o=e+(i?"Clamped":"")+"Array",u="get"+e,l="set"+e,p=s[o],v=p,_=v&&v.prototype,y={},j=function(e,r){L(e,r,{get:function(){return function(e,r){var n=C(e);return n.view[u](r*t+n.byteOffset,!0)}(this,r)},set:function(e){return function(e,r,n){var s=C(e);i&&(n=(n=x(n))<0?0:n>255?255:255&n),s.view[l](r*t+s.byteOffset,n,!0)}(this,r,e)},enumerable:!0})};F?a&&(v=r(function(e,r,n,s){return c(e,v,o),E(r)?q(r)?void 0!==s?new p(r,m(n,t),s):void 0!==n?new p(r,m(n,t)):new p(r):V(r)?k(v,r):R.call(v,r):new p(f(r))}),T&&T(v,N),b(g(p),function(e){e in v||h(v,e,p[e])}),v.prototype=_):(v=r(function(e,r,n,s){c(e,v,o);var i,a,u,l=0,h=0;if(E(r)){if(!q(r))return V(r)?k(v,r):R.call(v,r);i=r,h=m(n,t);var p=r.byteLength;if(void 0===s){if(p%t)throw O("Wrong length");if((a=p-h)<0)throw O("Wrong length")}else if((a=d(s)*t)+h>p)throw O("Wrong length");u=a/t}else u=f(r),i=new I(a=u*t);for(D(e,{buffer:i,byteOffset:h,byteLength:a,length:u,view:new M(i)});l<u;)j(e,l++)}),T&&T(v,N),_=v.prototype=S(B)),_.constructor!==v&&h(_,"constructor",v),G&&h(_,G,o),y[o]=v,n({global:!0,forced:v!=p,sham:!F},y),"BYTES_PER_ELEMENT"in v||h(v,"BYTES_PER_ELEMENT",t),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",t),A(o)}):e.exports=function(){}},"../node_modules/core-js/internals/typed-array-from.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/to-length.js"),i=r("../node_modules/core-js/internals/get-iterator-method.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),o=r("../node_modules/core-js/internals/bind-context.js"),u=r("../node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;e.exports=function(e){var t,r,c,l,h,d=n(e),f=arguments.length,m=f>1?arguments[1]:void 0,p=void 0!==m,v=i(d);if(null!=v&&!a(v))for(h=v.call(d),d=[];!(l=h.next()).done;)d.push(l.value);for(p&&f>2&&(m=o(m,arguments[2],2)),r=s(d.length),c=new(u(this))(r),t=0;r>t;t++)c[t]=p?m(d[t],t):d[t];return c}},"../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),a=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,u=n.Int8Array;e.exports=!a||!s(function(){u(1)})||!s(function(){new u(-1)})||!i(function(e){new u,new u(null),new u(1.5),new u(e)},!0)||s(function(){return 1!==new u(new o(2),1,void 0).length})},"../node_modules/core-js/internals/uid.js":function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},"../node_modules/core-js/internals/user-agent.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("navigator","userAgent")||""},"../node_modules/core-js/internals/webkit-string-pad-bug.js":function(e,t,r){var n=r("../node_modules/core-js/internals/user-agent.js");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"../node_modules/core-js/internals/well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/shared.js"),i=r("../node_modules/core-js/internals/uid.js"),a=r("../node_modules/core-js/internals/native-symbol.js"),o=n.Symbol,u=s("wks");e.exports=function(e){return u[e]||(u[e]=a&&o[e]||(a?o:i)("Symbol."+e))}},"../node_modules/core-js/internals/whitespaces.js":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"../node_modules/core-js/internals/wrapped-well-known-symbol.js":function(e,t,r){t.f=r("../node_modules/core-js/internals/well-known-symbol.js")},"../node_modules/core-js/modules/es.array-buffer.constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/set-species.js"),o=i.ArrayBuffer;n({global:!0,forced:s.ArrayBuffer!==o},{ArrayBuffer:o}),a("ArrayBuffer")},"../node_modules/core-js/modules/es.array-buffer.slice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/to-absolute-index.js"),u=r("../node_modules/core-js/internals/to-length.js"),c=r("../node_modules/core-js/internals/species-constructor.js"),l=i.ArrayBuffer,h=i.DataView,d=l.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(void 0!==d&&void 0===t)return d.call(a(this),e);for(var r=a(this).byteLength,n=o(e,r),s=o(void 0===t?r:t,r),i=new(c(this,l))(u(s-n)),f=new h(this),m=new h(i),p=0;n<s;)m.setUint8(p++,f.getUint8(n++));return i}})},"../node_modules/core-js/modules/es.array.flat-map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/flatten-into-array.js"),i=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flatMap:function(e){var t,r=i(this),n=a(r.length);return o(e),(t=u(r,0)).length=s(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"../node_modules/core-js/modules/es.array.flat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/flatten-into-array.js"),i=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-integer.js"),u=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),r=a(t.length),n=u(t,0);return n.length=s(n,t,t,r,0,void 0===e?1:o(e)),n}})},"../node_modules/core-js/modules/es.array.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-indexed-object.js"),s=r("../node_modules/core-js/internals/add-to-unscopables.js"),i=r("../node_modules/core-js/internals/iterators.js"),a=r("../node_modules/core-js/internals/internal-state.js"),o=r("../node_modules/core-js/internals/define-iterator.js"),u=a.set,c=a.getterFor("Array Iterator");e.exports=o(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=c(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),i.Arguments=i.Array,s("keys"),s("values"),s("entries")},"../node_modules/core-js/modules/es.array.reverse.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/is-array.js"),i=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),i.call(this)}})},"../node_modules/core-js/modules/es.array.sort.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/a-function.js"),i=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/sloppy-array-method.js"),u=[].sort,c=[1,2,3],l=a(function(){c.sort(void 0)}),h=a(function(){c.sort(null)}),d=o("sort");n({target:"Array",proto:!0,forced:l||!h||d},{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),s(e))}})},"../node_modules/core-js/modules/es.array.unscopables.flat-map.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flatMap")},"../node_modules/core-js/modules/es.array.unscopables.flat.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flat")},"../node_modules/core-js/modules/es.number.parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/parse-float.js");n({target:"Number",stat:!0,forced:Number.parseFloat!=s},{parseFloat:s})},"../node_modules/core-js/modules/es.object.define-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/object-define-property.js");s&&n({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){u.f(a(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.define-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/object-define-property.js");s&&n({target:"Object",proto:!0,forced:i},{__defineSetter__:function(e,t){u.f(a(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.from-entries.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/iterate.js"),i=r("../node_modules/core-js/internals/create-property.js");n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return s(e,function(e,r){i(t,e,r)},void 0,!0),t}})},"../node_modules/core-js/modules/es.object.lookup-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/object-get-prototype-of.js"),c=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;s&&n({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(e){var t,r=a(this),n=o(e,!0);do{if(t=c(r,n))return t.get}while(r=u(r))}})},"../node_modules/core-js/modules/es.object.lookup-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/object-get-prototype-of.js"),c=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;s&&n({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(e){var t,r=a(this),n=o(e,!0);do{if(t=c(r,n))return t.set}while(r=u(r))}})},"../node_modules/core-js/modules/es.promise.finally.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/get-built-in.js"),i=r("../node_modules/core-js/internals/species-constructor.js"),a=r("../node_modules/core-js/internals/promise-resolve.js");n({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=i(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then(function(){return r})}:e,r?function(r){return a(t,e()).then(function(){throw r})}:e)}})},"../node_modules/core-js/modules/es.promise.js":function(e,t,r){"use strict";var n,s,i,a=r("../node_modules/core-js/internals/export.js"),o=r("../node_modules/core-js/internals/is-pure.js"),u=r("../node_modules/core-js/internals/global.js"),c=r("../node_modules/core-js/internals/path.js"),l=r("../node_modules/core-js/internals/redefine-all.js"),h=r("../node_modules/core-js/internals/set-to-string-tag.js"),d=r("../node_modules/core-js/internals/set-species.js"),f=r("../node_modules/core-js/internals/is-object.js"),m=r("../node_modules/core-js/internals/a-function.js"),p=r("../node_modules/core-js/internals/an-instance.js"),v=r("../node_modules/core-js/internals/classof-raw.js"),_=r("../node_modules/core-js/internals/iterate.js"),E=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),S=r("../node_modules/core-js/internals/species-constructor.js"),T=r("../node_modules/core-js/internals/task.js").set,g=r("../node_modules/core-js/internals/microtask.js"),R=r("../node_modules/core-js/internals/promise-resolve.js"),b=r("../node_modules/core-js/internals/host-report-errors.js"),A=r("../node_modules/core-js/internals/new-promise-capability.js"),y=r("../node_modules/core-js/internals/perform.js"),j=r("../node_modules/core-js/internals/user-agent.js"),w=r("../node_modules/core-js/internals/internal-state.js"),C=r("../node_modules/core-js/internals/is-forced.js"),D=r("../node_modules/core-js/internals/well-known-symbol.js")("species"),L="Promise",P=w.get,x=w.set,O=w.getterFor(L),I=u.Promise,M=u.TypeError,F=u.document,G=u.process,N=u.fetch,B=G&&G.versions,U=B&&B.v8||"",V=A.f,k=V,H="process"==v(G),q=!!(F&&F.createEvent&&u.dispatchEvent),z=C(L,function(){var e=I.resolve(1),t=function(){},r=(e.constructor={})[D]=function(e){e(t,t)};return!((H||"function"==typeof PromiseRejectionEvent)&&(!o||e.finally)&&e.then(t)instanceof r&&0!==U.indexOf("6.6")&&-1===j.indexOf("Chrome/66"))}),W=z||!E(function(e){I.all(e).catch(function(){})}),Y=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t,r){if(!t.notified){t.notified=!0;var n=t.reactions;g(function(){for(var s=t.value,i=1==t.state,a=0;n.length>a;){var o,u,c,l=n[a++],h=i?l.ok:l.fail,d=l.resolve,f=l.reject,m=l.domain;try{h?(i||(2===t.rejection&&$(e,t),t.rejection=1),!0===h?o=s:(m&&m.enter(),o=h(s),m&&(m.exit(),c=!0)),o===l.promise?f(M("Promise-chain cycle")):(u=Y(o))?u.call(o,d,f):d(o)):f(s)}catch(e){m&&!c&&m.exit(),f(e)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&Q(e,t)})}},K=function(e,t,r){var n,s;q?((n=F.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},(s=u["on"+e])?s(n):"unhandledrejection"===e&&b("Unhandled promise rejection",r)},Q=function(e,t){T.call(u,function(){var r,n=t.value;if(Z(t)&&(r=y(function(){H?G.emit("unhandledRejection",n,e):K("unhandledrejection",e,n)}),t.rejection=H||Z(t)?2:1,r.error))throw r.value})},Z=function(e){return 1!==e.rejection&&!e.parent},$=function(e,t){T.call(u,function(){H?G.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)})},J=function(e,t,r,n){return function(s){e(t,r,s,n)}},ee=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=2,X(e,t,!0))},te=function(e,t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===r)throw M("Promise can't be resolved itself");var s=Y(r);s?g(function(){var n={done:!1};try{s.call(r,J(te,e,n,t),J(ee,e,n,t))}catch(r){ee(e,n,r,t)}}):(t.value=r,t.state=1,X(e,t,!1))}catch(r){ee(e,{done:!1},r,t)}}};z&&(I=function(e){p(this,I,L),m(e),n.call(this);var t=P(this);try{e(J(te,this,t),J(ee,this,t))}catch(e){ee(this,t,e)}},(n=function(e){x(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=l(I.prototype,{then:function(e,t){var r=O(this),n=V(S(this,I));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=H?G.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&X(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new n,t=P(e);this.promise=e,this.resolve=J(te,e,t),this.reject=J(ee,e,t)},A.f=V=function(e){return e===I||e===i?new s(e):k(e)},o||"function"!=typeof N||a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return R(I,N.apply(u,arguments))}})),a({global:!0,wrap:!0,forced:z},{Promise:I}),h(I,L,!1,!0),d(L),i=c.Promise,a({target:L,stat:!0,forced:z},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),a({target:L,stat:!0,forced:o||z},{resolve:function(e){return R(o&&this===i?I:this,e)}}),a({target:L,stat:!0,forced:W},{all:function(e){var t=this,r=V(t),n=r.resolve,s=r.reject,i=y(function(){var r=m(t.resolve),i=[],a=0,o=1;_(e,function(e){var u=a++,c=!1;i.push(void 0),o++,r.call(t,e).then(function(e){c||(c=!0,i[u]=e,--o||n(i))},s)}),--o||n(i)});return i.error&&s(i.value),r.promise},race:function(e){var t=this,r=V(t),n=r.reject,s=y(function(){var s=m(t.resolve);_(e,function(e){s.call(t,e).then(r.resolve,n)})});return s.error&&n(s.value),r.promise}})},"../node_modules/core-js/modules/es.string.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt,s=r("../node_modules/core-js/internals/internal-state.js"),i=r("../node_modules/core-js/internals/define-iterator.js"),a=s.set,o=s.getterFor("String Iterator");i(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=o(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(e=n(r,s),t.index+=e.length,{value:e,done:!1})})},"../node_modules/core-js/modules/es.string.pad-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/string-pad.js").end;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/webkit-string-pad-bug.js")},{padEnd:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.pad-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/string-pad.js").start;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/webkit-string-pad-bug.js")},{padStart:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.replace.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),s=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-integer.js"),u=r("../node_modules/core-js/internals/require-object-coercible.js"),c=r("../node_modules/core-js/internals/advance-string-index.js"),l=r("../node_modules/core-js/internals/regexp-exec-abstract.js"),h=Math.max,d=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g;n("replace",2,function(e,t,r){return[function(r,n){var s=u(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,s,n):t.call(String(s),r,n)},function(e,i){var u=r(t,e,this,i);if(u.done)return u.value;var f=s(e),m=String(this),p="function"==typeof i;p||(i=String(i));var v=f.global;if(v){var _=f.unicode;f.lastIndex=0}for(var E=[];;){var S=l(f,m);if(null===S)break;if(E.push(S),!v)break;""===String(S[0])&&(f.lastIndex=c(m,a(f.lastIndex),_))}for(var T,g="",R=0,b=0;b<E.length;b++){S=E[b];for(var A=String(S[0]),y=h(d(o(S.index),m.length),0),j=[],w=1;w<S.length;w++)j.push(void 0===(T=S[w])?T:String(T));var C=S.groups;if(p){var D=[A].concat(j,y,m);void 0!==C&&D.push(C);var L=String(i.apply(void 0,D))}else L=n(A,m,y,j,C,i);y>=R&&(g+=m.slice(R,y)+L,R=y+A.length)}return g+m.slice(R)}];function n(e,r,n,s,a,o){var u=n+e.length,c=s.length,l=p;return void 0!==a&&(a=i(a),l=m),t.call(o,l,function(t,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":o=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>c){var h=f(l/10);return 0===h?t:h<=c?void 0===s[h-1]?i.charAt(1):s[h-1]+i.charAt(1):t}o=s[l-1]}return void 0===o?"":o})}})},"../node_modules/core-js/modules/es.string.trim-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/string-trim.js").end,i=r("../node_modules/core-js/internals/forced-string-trim-method.js")("trimEnd"),a=i?function(){return s(this)}:"".trimEnd;n({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},"../node_modules/core-js/modules/es.string.trim-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/string-trim.js").start,i=r("../node_modules/core-js/internals/forced-string-trim-method.js")("trimStart"),a=i?function(){return s(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},"../node_modules/core-js/modules/es.string.trim.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/string-trim.js").trim;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/forced-string-trim-method.js")("trim")},{trim:function(){return s(this)}})},"../node_modules/core-js/modules/es.symbol.async-iterator.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("asyncIterator")},"../node_modules/core-js/modules/es.symbol.description.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/object-define-property.js").f,c=r("../node_modules/core-js/internals/copy-constructor-properties.js"),l=i.Symbol;if(s&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};c(d,l);var f=d.prototype=l.prototype;f.constructor=d;var m=f.toString,p="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=m.call(e);if(a(h,e))return"";var r=p?t.slice(7,-1):t.replace(v,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}},"../node_modules/core-js/modules/es.typed-array.float32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.float64-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),s=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/typed-array-from.js");s.exportStatic("from",i,n)},"../node_modules/core-js/modules/es.typed-array.int16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.int32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.int8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),s=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),i=n.aTypedArrayConstructor;n.exportStatic("of",function(){for(var e=0,t=arguments.length,r=new(i(this))(t);t>e;)r[e]=arguments[e++];return r},s)},"../node_modules/core-js/modules/es.typed-array.uint16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},"../node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/dom-iterables.js"),i=r("../node_modules/core-js/internals/array-for-each.js"),a=r("../node_modules/core-js/internals/hide.js");for(var o in s){var u=n[o],c=u&&u.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(e){c.forEach=i}}},"../node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/dom-iterables.js"),i=r("../node_modules/core-js/modules/es.array.iterator.js"),a=r("../node_modules/core-js/internals/hide.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js"),u=o("iterator"),c=o("toStringTag"),l=i.values;for(var h in s){var d=n[h],f=d&&d.prototype;if(f){if(f[u]!==l)try{a(f,u,l)}catch(e){f[u]=l}if(f[c]||a(f,c,h),s[h])for(var m in i)if(f[m]!==i[m])try{a(f,m,i[m])}catch(e){f[m]=i[m]}}}},"../node_modules/core-js/modules/web.immediate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/task.js"),i=!n.setImmediate||!n.clearImmediate;r("../node_modules/core-js/internals/export.js")({global:!0,bind:!0,enumerable:!0,forced:i},{setImmediate:s.set,clearImmediate:s.clear})},"../node_modules/core-js/modules/web.queue-microtask.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/microtask.js"),a=r("../node_modules/core-js/internals/classof-raw.js"),o=s.process,u="process"==a(o);n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=u&&o.domain;i(t?t.bind(e):e)}})},"../node_modules/core-js/modules/web.url-search-params.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.array.iterator.js");var n=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/native-url.js"),i=r("../node_modules/core-js/internals/redefine.js"),a=r("../node_modules/core-js/internals/redefine-all.js"),o=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/create-iterator-constructor.js"),c=r("../node_modules/core-js/internals/internal-state.js"),l=r("../node_modules/core-js/internals/an-instance.js"),h=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/bind-context.js"),f=r("../node_modules/core-js/internals/an-object.js"),m=r("../node_modules/core-js/internals/is-object.js"),p=r("../node_modules/core-js/internals/get-iterator.js"),v=r("../node_modules/core-js/internals/get-iterator-method.js"),_=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),E=c.set,S=c.getterFor("URLSearchParams"),T=c.getterFor("URLSearchParamsIterator"),g=/\+/g,R=Array(4),b=function(e){return R[e-1]||(R[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},A=function(e){try{return decodeURIComponent(e)}catch(t){return e}},y=function(e){var t=e.replace(g," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(b(r--),A);return t}},j=/[!'()~]|%20/g,w={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},C=function(e){return w[e]},D=function(e){return encodeURIComponent(e).replace(j,C)},L=function(e,t){if(t)for(var r,n,s=t.split("&"),i=0;i<s.length;)(r=s[i++]).length&&(n=r.split("="),e.push({key:y(n.shift()),value:y(n.join("="))}))},P=function(e){this.entries.length=0,L(this.entries,e)},x=function(e,t){if(e<t)throw TypeError("Not enough arguments")},O=u(function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:p(S(e).entries),kind:t})},"Iterator",function(){var e=T(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),I=function(){l(this,I,"URLSearchParams");var e,t,r,n,s,i,a,o=arguments.length>0?arguments[0]:void 0,u=[];if(E(this,{type:"URLSearchParams",entries:u,updateURL:function(){},updateSearchParams:P}),void 0!==o)if(m(o))if("function"==typeof(e=v(o)))for(t=e.call(o);!(r=t.next()).done;){if((s=(n=p(f(r.value))).next()).done||(i=n.next()).done||!n.next().done)throw TypeError("Expected sequence with length 2");u.push({key:s.value+"",value:i.value+""})}else for(a in o)h(o,a)&&u.push({key:a,value:o[a]+""});else L(u,"string"==typeof o?"?"===o.charAt(0)?o.slice(1):o:o+"")},M=I.prototype;a(M,{append:function(e,t){x(arguments.length,2);var r=S(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){x(arguments.length,1);for(var t=S(this),r=t.entries,n=e+"",s=0;s<r.length;)r[s].key===n?r.splice(s,1):s++;t.updateURL()},get:function(e){x(arguments.length,1);for(var t=S(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){x(arguments.length,1);for(var t=S(this).entries,r=e+"",n=[],s=0;s<t.length;s++)t[s].key===r&&n.push(t[s].value);return n},has:function(e){x(arguments.length,1);for(var t=S(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){x(arguments.length,1);for(var r,n=S(this),s=n.entries,i=!1,a=e+"",o=t+"",u=0;u<s.length;u++)(r=s[u]).key===a&&(i?s.splice(u--,1):(i=!0,r.value=o));i||s.push({key:a,value:o}),n.updateURL()},sort:function(){var e,t,r,n=S(this),s=n.entries,i=s.slice();for(s.length=0,r=0;r<i.length;r++){for(e=i[r],t=0;t<r;t++)if(s[t].key>e.key){s.splice(t,0,e);break}t===r&&s.push(e)}n.updateURL()},forEach:function(e){for(var t,r=S(this).entries,n=d(e,arguments.length>1?arguments[1]:void 0,3),s=0;s<r.length;)n((t=r[s++]).value,t.key,this)},keys:function(){return new O(this,"keys")},values:function(){return new O(this,"values")},entries:function(){return new O(this,"entries")}},{enumerable:!0}),i(M,_,M.entries),i(M,"toString",function(){for(var e,t=S(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(D(e.key)+"="+D(e.value));return r.join("&")},{enumerable:!0}),o(I,"URLSearchParams"),n({global:!0,forced:!s},{URLSearchParams:I}),e.exports={URLSearchParams:I,getState:S}},"../node_modules/core-js/modules/web.url.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.string.iterator.js");var n,s=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/native-url.js"),o=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/object-define-properties.js"),c=r("../node_modules/core-js/internals/redefine.js"),l=r("../node_modules/core-js/internals/an-instance.js"),h=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/object-assign.js"),f=r("../node_modules/core-js/internals/array-from.js"),m=r("../node_modules/core-js/internals/string-multibyte.js").codeAt,p=r("../node_modules/core-js/internals/punycode-to-ascii.js"),v=r("../node_modules/core-js/internals/set-to-string-tag.js"),_=r("../node_modules/core-js/modules/web.url-search-params.js"),E=r("../node_modules/core-js/internals/internal-state.js"),S=o.URL,T=_.URLSearchParams,g=_.getState,R=E.set,b=E.getterFor("URL"),A=Math.floor,y=Math.pow,j=/[A-Za-z]/,w=/[\d+\-.A-Za-z]/,C=/\d/,D=/^(0x|0X)/,L=/^[0-7]+$/,P=/^\d+$/,x=/^[\dA-Fa-f]+$/,O=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,I=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,M=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\u0009\u000A\u000D]/g,G=function(e,t){var r,n,s;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(r=B(t.slice(1,-1))))return"Invalid host";e.host=r}else if(Y(e)){if(t=p(t),O.test(t))return"Invalid host";if(null===(r=N(t)))return"Invalid host";e.host=r}else{if(I.test(t))return"Invalid host";for(r="",n=f(t),s=0;s<n.length;s++)r+=z(n[s],V);e.host=r}},N=function(e){var t,r,n,s,i,a,o,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(s=u[n]))return e;if(i=10,s.length>1&&"0"==s.charAt(0)&&(i=D.test(s)?16:8,s=s.slice(8==i?1:2)),""===s)a=0;else{if(!(10==i?P:8==i?L:x).test(s))return e;a=parseInt(s,i)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=y(256,5-t))return null}else if(a>255)return null;for(o=r.pop(),n=0;n<r.length;n++)o+=r[n]*y(256,3-n);return o},B=function(e){var t,r,n,s,i,a,o,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,d=function(){return e.charAt(h)};if(":"==d()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;d();){if(8==c)return;if(":"!=d()){for(t=r=0;r<4&&x.test(d());)t=16*t+parseInt(d(),16),h++,r++;if("."==d()){if(0==r)return;if(h-=r,c>6)return;for(n=0;d();){if(s=null,n>0){if(!("."==d()&&n<4))return;h++}if(!C.test(d()))return;for(;C.test(d());){if(i=parseInt(d(),10),null===s)s=i;else{if(0==s)return;s=10*s+i}if(s>255)return;h++}u[c]=256*u[c]+s,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)o=u[c],u[c--]=u[l+a-1],u[l+--a]=o;else if(8!=c)return;return u},U=function(e){var t,r,n,s;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=A(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,s=0,i=0;i<8;i++)0!==e[i]?(s>r&&(t=n,r=s),n=null,s=0):(null===n&&(n=i),++s);return s>r&&(t=n,r=s),t}(e),r=0;r<8;r++)s&&0===e[r]||(s&&(s=!1),n===r?(t+=r?":":"::",s=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},V={},k=d({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),H=d({},k,{"#":1,"?":1,"{":1,"}":1}),q=d({},H,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),z=function(e,t){var r=m(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},W={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Y=function(e){return h(W,e.scheme)},X=function(e){return""!=e.username||""!=e.password},K=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Q=function(e,t){var r;return 2==e.length&&j.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},Z=function(e){var t;return e.length>1&&Q(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},$=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&Q(t[0],!0)||t.pop()},J=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},re={},ne={},se={},ie={},ae={},oe={},ue={},ce={},le={},he={},de={},fe={},me={},pe={},ve={},_e={},Ee={},Se={},Te={},ge=function(e,t,r,s){var i,a,o,u,c,l=r||ee,d=0,m="",p=!1,v=!1,_=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(M,"")),t=t.replace(F,""),i=f(t);d<=i.length;){switch(a=i[d],l){case ee:if(!a||!j.test(a)){if(r)return"Invalid scheme";l=re;continue}m+=a.toLowerCase(),l=te;break;case te:if(a&&(w.test(a)||"+"==a||"-"==a||"."==a))m+=a.toLowerCase();else{if(":"!=a){if(r)return"Invalid scheme";m="",l=re,d=0;continue}if(r&&(Y(e)!=h(W,m)||"file"==m&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=m,r)return void(Y(e)&&W[e.scheme]==e.port&&(e.port=null));m="","file"==e.scheme?l=fe:Y(e)&&s&&s.scheme==e.scheme?l=ne:Y(e)?l=oe:"/"==i[d+1]?(l=se,d++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Ee)}break;case re:if(!s||s.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(s.cannotBeABaseURL&&"#"==a){e.scheme=s.scheme,e.path=s.path.slice(),e.query=s.query,e.fragment="",e.cannotBeABaseURL=!0,l=Te;break}l="file"==s.scheme?fe:ie;continue;case ne:if("/"!=a||"/"!=i[d+1]){l=ie;continue}l=ue,d++;break;case se:if("/"==a){l=ce;break}l=_e;continue;case ie:if(e.scheme=s.scheme,a==n)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query;else if("/"==a||"\\"==a&&Y(e))l=ae;else if("?"==a)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query="",l=Se;else{if("#"!=a){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.path.pop(),l=_e;continue}e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query,e.fragment="",l=Te}break;case ae:if(!Y(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,l=_e;continue}l=ce}else l=ue;break;case oe:if(l=ue,"/"!=a||"/"!=m.charAt(d+1))continue;d++;break;case ue:if("/"!=a&&"\\"!=a){l=ce;continue}break;case ce:if("@"==a){p&&(m="%40"+m),p=!0,o=f(m);for(var E=0;E<o.length;E++){var S=o[E];if(":"!=S||_){var T=z(S,q);_?e.password+=T:e.username+=T}else _=!0}m=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(p&&""==m)return"Invalid authority";d-=f(m).length+1,m="",l=le}else m+=a;break;case le:case he:if(r&&"file"==e.scheme){l=pe;continue}if(":"!=a||v){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(Y(e)&&""==m)return"Invalid host";if(r&&""==m&&(X(e)||null!==e.port))return;if(u=G(e,m))return u;if(m="",l=ve,r)return;continue}"["==a?v=!0:"]"==a&&(v=!1),m+=a}else{if(""==m)return"Invalid host";if(u=G(e,m))return u;if(m="",l=de,r==he)return}break;case de:if(!C.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)||r){if(""!=m){var g=parseInt(m,10);if(g>65535)return"Invalid port";e.port=Y(e)&&g===W[e.scheme]?null:g,m=""}if(r)return;l=ve;continue}return"Invalid port"}m+=a;break;case fe:if(e.scheme="file","/"==a||"\\"==a)l=me;else{if(!s||"file"!=s.scheme){l=_e;continue}if(a==n)e.host=s.host,e.path=s.path.slice(),e.query=s.query;else if("?"==a)e.host=s.host,e.path=s.path.slice(),e.query="",l=Se;else{if("#"!=a){Z(i.slice(d).join(""))||(e.host=s.host,e.path=s.path.slice(),$(e)),l=_e;continue}e.host=s.host,e.path=s.path.slice(),e.query=s.query,e.fragment="",l=Te}}break;case me:if("/"==a||"\\"==a){l=pe;break}s&&"file"==s.scheme&&!Z(i.slice(d).join(""))&&(Q(s.path[0],!0)?e.path.push(s.path[0]):e.host=s.host),l=_e;continue;case pe:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&Q(m))l=_e;else if(""==m){if(e.host="",r)return;l=ve}else{if(u=G(e,m))return u;if("localhost"==e.host&&(e.host=""),r)return;m="",l=ve}continue}m+=a;break;case ve:if(Y(e)){if(l=_e,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=n&&(l=_e,"/"!=a))continue}else e.fragment="",l=Te;else e.query="",l=Se;break;case _e:if(a==n||"/"==a||"\\"==a&&Y(e)||!r&&("?"==a||"#"==a)){if(".."===(c=(c=m).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?($(e),"/"==a||"\\"==a&&Y(e)||e.path.push("")):J(m)?"/"==a||"\\"==a&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Q(m)&&(e.host&&(e.host=""),m=m.charAt(0)+":"),e.path.push(m)),m="","file"==e.scheme&&(a==n||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=Se):"#"==a&&(e.fragment="",l=Te)}else m+=z(a,H);break;case Ee:"?"==a?(e.query="",l=Se):"#"==a?(e.fragment="",l=Te):a!=n&&(e.path[0]+=z(a,V));break;case Se:r||"#"!=a?a!=n&&("'"==a&&Y(e)?e.query+="%27":e.query+="#"==a?"%23":z(a,V)):(e.fragment="",l=Te);break;case Te:a!=n&&(e.fragment+=z(a,k))}d++}},Re=function(e){var t,r,n=l(this,Re,"URL"),s=arguments.length>1?arguments[1]:void 0,a=String(e),o=R(n,{type:"URL"});if(void 0!==s)if(s instanceof Re)t=b(s);else if(r=ge(t={},String(s)))throw TypeError(r);if(r=ge(o,a,null,t))throw TypeError(r);var u=o.searchParams=new T,c=g(u);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(u)||null},i||(n.href=Ae.call(n),n.origin=ye.call(n),n.protocol=je.call(n),n.username=we.call(n),n.password=Ce.call(n),n.host=De.call(n),n.hostname=Le.call(n),n.port=Pe.call(n),n.pathname=xe.call(n),n.search=Oe.call(n),n.searchParams=Ie.call(n),n.hash=Me.call(n))},be=Re.prototype,Ae=function(){var e=b(this),t=e.scheme,r=e.username,n=e.password,s=e.host,i=e.port,a=e.path,o=e.query,u=e.fragment,c=t+":";return null!==s?(c+="//",X(e)&&(c+=r+(n?":"+n:"")+"@"),c+=U(s),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==o&&(c+="?"+o),null!==u&&(c+="#"+u),c},ye=function(){var e=b(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Y(e)?t+"://"+U(e.host)+(null!==r?":"+r:""):"null"},je=function(){return b(this).scheme+":"},we=function(){return b(this).username},Ce=function(){return b(this).password},De=function(){var e=b(this),t=e.host,r=e.port;return null===t?"":null===r?U(t):U(t)+":"+r},Le=function(){var e=b(this).host;return null===e?"":U(e)},Pe=function(){var e=b(this).port;return null===e?"":String(e)},xe=function(){var e=b(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Oe=function(){var e=b(this).query;return e?"?"+e:""},Ie=function(){return b(this).searchParams},Me=function(){var e=b(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&u(be,{href:Fe(Ae,function(e){var t=b(this),r=String(e),n=ge(t,r);if(n)throw TypeError(n);g(t.searchParams).updateSearchParams(t.query)}),origin:Fe(ye),protocol:Fe(je,function(e){var t=b(this);ge(t,String(e)+":",ee)}),username:Fe(we,function(e){var t=b(this),r=f(String(e));if(!K(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=z(r[n],q)}}),password:Fe(Ce,function(e){var t=b(this),r=f(String(e));if(!K(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=z(r[n],q)}}),host:Fe(De,function(e){var t=b(this);t.cannotBeABaseURL||ge(t,String(e),le)}),hostname:Fe(Le,function(e){var t=b(this);t.cannotBeABaseURL||ge(t,String(e),he)}),port:Fe(Pe,function(e){var t=b(this);K(t)||(""==(e=String(e))?t.port=null:ge(t,e,de))}),pathname:Fe(xe,function(e){var t=b(this);t.cannotBeABaseURL||(t.path=[],ge(t,e+"",ve))}),search:Fe(Oe,function(e){var t=b(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ge(t,e,Se)),g(t.searchParams).updateSearchParams(t.query)}),searchParams:Fe(Ie),hash:Fe(Me,function(e){var t=b(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ge(t,e,Te)):t.fragment=null})}),c(be,"toJSON",function(){return Ae.call(this)},{enumerable:!0}),c(be,"toString",function(){return Ae.call(this)},{enumerable:!0}),S){var Ge=S.createObjectURL,Ne=S.revokeObjectURL;Ge&&c(Re,"createObjectURL",function(e){return Ge.apply(S,arguments)}),Ne&&c(Re,"revokeObjectURL",function(e){return Ne.apply(S,arguments)})}v(Re,"URL"),s({global:!0,forced:!a,sham:!i},{URL:Re})},"../node_modules/core-js/modules/web.url.to-json.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/export.js")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},"../node_modules/gl-matrix/lib/gl-matrix.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");r.d(t,"glMatrix",function(){return n});var s=r("../node_modules/gl-matrix/lib/gl-matrix/mat2.js");r.d(t,"mat2",function(){return s});var i=r("../node_modules/gl-matrix/lib/gl-matrix/mat2d.js");r.d(t,"mat2d",function(){return i});var a=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js");r.d(t,"mat3",function(){return a});var o=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");r.d(t,"mat4",function(){return o});var u=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js");r.d(t,"quat",function(){return u});var c=r("../node_modules/gl-matrix/lib/gl-matrix/quat2.js");r.d(t,"quat2",function(){return c});var l=r("../node_modules/gl-matrix/lib/gl-matrix/vec2.js");r.d(t,"vec2",function(){return l});var h=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js");r.d(t,"vec3",function(){return h});var d=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");r.d(t,"vec4",function(){return d})},"../node_modules/gl-matrix/lib/gl-matrix/common.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EPSILON",function(){return n}),r.d(t,"ARRAY_TYPE",function(){return s}),r.d(t,"RANDOM",function(){return i}),r.d(t,"setMatrixArrayType",function(){return a}),r.d(t,"toRadian",function(){return u}),r.d(t,"equals",function(){return c});var n=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random;function a(e){s=e}var o=Math.PI/180;function u(e){return e*o}function c(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}},"../node_modules/gl-matrix/lib/gl-matrix/mat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"copy",function(){return a}),r.d(t,"identity",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"transpose",function(){return l}),r.d(t,"invert",function(){return h}),r.d(t,"adjoint",function(){return d}),r.d(t,"determinant",function(){return f}),r.d(t,"multiply",function(){return m}),r.d(t,"rotate",function(){return p}),r.d(t,"scale",function(){return v}),r.d(t,"fromRotation",function(){return _}),r.d(t,"fromScaling",function(){return E}),r.d(t,"str",function(){return S}),r.d(t,"frob",function(){return T}),r.d(t,"LDU",function(){return g}),r.d(t,"add",function(){return R}),r.d(t,"subtract",function(){return b}),r.d(t,"exactEquals",function(){return A}),r.d(t,"equals",function(){return y}),r.d(t,"multiplyScalar",function(){return j}),r.d(t,"multiplyScalarAndAdd",function(){return w}),r.d(t,"mul",function(){return C}),r.d(t,"sub",function(){return D});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function i(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,r,s){var i=new n.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=s,i}function c(e,t,r,n,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e}function l(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function h(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=r*i-s*n;return a?(a=1/a,e[0]=i*a,e[1]=-n*a,e[2]=-s*a,e[3]=r*a,e):null}function d(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function f(e){return e[0]*e[3]-e[2]*e[1]}function m(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*o+i*u,e[1]=s*o+a*u,e[2]=n*c+i*l,e[3]=s*c+a*l,e}function p(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*o,e[1]=s*u+a*o,e[2]=n*-o+i*u,e[3]=s*-o+a*u,e}function v(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=r[0],u=r[1];return e[0]=n*o,e[1]=s*o,e[2]=i*u,e[3]=a*u,e}function _(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function E(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function S(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function T(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function g(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function R(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function b(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function A(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function y(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}function j(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function w(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var C=m,D=b},"../node_modules/gl-matrix/lib/gl-matrix/mat2d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"copy",function(){return a}),r.d(t,"identity",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"invert",function(){return l}),r.d(t,"determinant",function(){return h}),r.d(t,"multiply",function(){return d}),r.d(t,"rotate",function(){return f}),r.d(t,"scale",function(){return m}),r.d(t,"translate",function(){return p}),r.d(t,"fromRotation",function(){return v}),r.d(t,"fromScaling",function(){return _}),r.d(t,"fromTranslation",function(){return E}),r.d(t,"str",function(){return S}),r.d(t,"frob",function(){return T}),r.d(t,"add",function(){return g}),r.d(t,"subtract",function(){return R}),r.d(t,"multiplyScalar",function(){return b}),r.d(t,"multiplyScalarAndAdd",function(){return A}),r.d(t,"exactEquals",function(){return y}),r.d(t,"equals",function(){return j}),r.d(t,"mul",function(){return w}),r.d(t,"sub",function(){return C});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(6);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function i(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function u(e,t,r,s,i,a){var o=new n.ARRAY_TYPE(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=s,o[4]=i,o[5]=a,o}function c(e,t,r,n,s,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e}function l(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=r*i-n*s;return u?(u=1/u,e[0]=i*u,e[1]=-n*u,e[2]=-s*u,e[3]=r*u,e[4]=(s*o-i*a)*u,e[5]=(n*a-r*o)*u,e):null}function h(e){return e[0]*e[3]-e[1]*e[2]}function d(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1],h=r[2],d=r[3],f=r[4],m=r[5];return e[0]=n*c+i*l,e[1]=s*c+a*l,e[2]=n*h+i*d,e[3]=s*h+a*d,e[4]=n*f+i*m+o,e[5]=s*f+a*m+u,e}function f(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*c,e[1]=s*l+a*c,e[2]=n*-c+i*l,e[3]=s*-c+a*l,e[4]=o,e[5]=u,e}function m(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n*c,e[1]=s*c,e[2]=i*l,e[3]=a*l,e[4]=o,e[5]=u,e}function p(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=n*c+i*l+o,e[5]=s*c+a*l+u,e}function v(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function E(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function S(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function T(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function g(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function R(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function b(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function A(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function j(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=t[0],l=t[1],h=t[2],d=t[3],f=t[4],m=t[5];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-l)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))}var w=d,C=R},"../node_modules/gl-matrix/lib/gl-matrix/mat3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"fromMat4",function(){return i}),r.d(t,"clone",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"identity",function(){return l}),r.d(t,"transpose",function(){return h}),r.d(t,"invert",function(){return d}),r.d(t,"adjoint",function(){return f}),r.d(t,"determinant",function(){return m}),r.d(t,"multiply",function(){return p}),r.d(t,"translate",function(){return v}),r.d(t,"rotate",function(){return _}),r.d(t,"scale",function(){return E}),r.d(t,"fromTranslation",function(){return S}),r.d(t,"fromRotation",function(){return T}),r.d(t,"fromScaling",function(){return g}),r.d(t,"fromMat2d",function(){return R}),r.d(t,"fromQuat",function(){return b}),r.d(t,"normalFromMat4",function(){return A}),r.d(t,"projection",function(){return y}),r.d(t,"str",function(){return j}),r.d(t,"frob",function(){return w}),r.d(t,"add",function(){return C}),r.d(t,"subtract",function(){return D}),r.d(t,"multiplyScalar",function(){return L}),r.d(t,"multiplyScalarAndAdd",function(){return P}),r.d(t,"exactEquals",function(){return x}),r.d(t,"equals",function(){return O}),r.d(t,"mul",function(){return I}),r.d(t,"sub",function(){return M});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(9);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function u(e,t,r,s,i,a,o,u,c){var l=new n.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=r,l[3]=s,l[4]=i,l[5]=a,l[6]=o,l[7]=u,l[8]=c,l}function c(e,t,r,n,s,i,a,o,u,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=u,e[8]=c,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function h(e,t){if(e===t){var r=t[1],n=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function d(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],h=l*a-o*c,d=-l*i+o*u,f=c*i-a*u,m=r*h+n*d+s*f;return m?(m=1/m,e[0]=h*m,e[1]=(-l*n+s*c)*m,e[2]=(o*n-s*a)*m,e[3]=d*m,e[4]=(l*r-s*u)*m,e[5]=(-o*r+s*i)*m,e[6]=f*m,e[7]=(-c*r+n*u)*m,e[8]=(a*r-n*i)*m,e):null}function f(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-o*c,e[1]=s*c-n*l,e[2]=n*o-s*a,e[3]=o*u-i*l,e[4]=r*l-s*u,e[5]=s*i-r*o,e[6]=i*c-a*u,e[7]=n*u-r*c,e[8]=r*a-n*i,e}function m(e){var t=e[0],r=e[1],n=e[2],s=e[3],i=e[4],a=e[5],o=e[6],u=e[7],c=e[8];return t*(c*i-a*u)+r*(-c*s+a*o)+n*(u*s-i*o)}function p(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],d=r[0],f=r[1],m=r[2],p=r[3],v=r[4],_=r[5],E=r[6],S=r[7],T=r[8];return e[0]=d*n+f*a+m*c,e[1]=d*s+f*o+m*l,e[2]=d*i+f*u+m*h,e[3]=p*n+v*a+_*c,e[4]=p*s+v*o+_*l,e[5]=p*i+v*u+_*h,e[6]=E*n+S*a+T*c,e[7]=E*s+S*o+T*l,e[8]=E*i+S*u+T*h,e}function v(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],d=r[0],f=r[1];return e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=o,e[5]=u,e[6]=d*n+f*a+c,e[7]=d*s+f*o+l,e[8]=d*i+f*u+h,e}function _(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],d=Math.sin(r),f=Math.cos(r);return e[0]=f*n+d*a,e[1]=f*s+d*o,e[2]=f*i+d*u,e[3]=f*a-d*n,e[4]=f*o-d*s,e[5]=f*u-d*i,e[6]=c,e[7]=l,e[8]=h,e}function E(e,t,r){var n=r[0],s=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function S(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function T(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function R(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function b(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=r+r,o=n+n,u=s+s,c=r*a,l=n*a,h=n*o,d=s*a,f=s*o,m=s*u,p=i*a,v=i*o,_=i*u;return e[0]=1-h-m,e[3]=l-_,e[6]=d+v,e[1]=l+_,e[4]=1-c-m,e[7]=f-p,e[2]=d-v,e[5]=f+p,e[8]=1-c-h,e}function A(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],m=t[12],p=t[13],v=t[14],_=t[15],E=r*o-n*a,S=r*u-s*a,T=r*c-i*a,g=n*u-s*o,R=n*c-i*o,b=s*c-i*u,A=l*p-h*m,y=l*v-d*m,j=l*_-f*m,w=h*v-d*p,C=h*_-f*p,D=d*_-f*v,L=E*D-S*C+T*w+g*j-R*y+b*A;return L?(L=1/L,e[0]=(o*D-u*C+c*w)*L,e[1]=(u*j-a*D-c*y)*L,e[2]=(a*C-o*j+c*A)*L,e[3]=(s*C-n*D-i*w)*L,e[4]=(r*D-s*j+i*y)*L,e[5]=(n*j-r*C-i*A)*L,e[6]=(p*b-v*R+_*g)*L,e[7]=(v*T-m*b-_*S)*L,e[8]=(m*R-p*T+_*E)*L,e):null}function y(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function j(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function C(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function D(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function L(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function P(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function x(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function O(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=t[0],f=t[1],m=t[2],p=t[3],v=t[4],_=t[5],E=t[6],S=t[7],T=t[8];return Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-f)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(i-m)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-p)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-v)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-_)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-E)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-S)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-T)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))}var I=p,M=D},"../node_modules/gl-matrix/lib/gl-matrix/mat4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"copy",function(){return a}),r.d(t,"fromValues",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"identity",function(){return c}),r.d(t,"transpose",function(){return l}),r.d(t,"invert",function(){return h}),r.d(t,"adjoint",function(){return d}),r.d(t,"determinant",function(){return f}),r.d(t,"multiply",function(){return m}),r.d(t,"translate",function(){return p}),r.d(t,"scale",function(){return v}),r.d(t,"rotate",function(){return _}),r.d(t,"rotateX",function(){return E}),r.d(t,"rotateY",function(){return S}),r.d(t,"rotateZ",function(){return T}),r.d(t,"fromTranslation",function(){return g}),r.d(t,"fromScaling",function(){return R}),r.d(t,"fromRotation",function(){return b}),r.d(t,"fromXRotation",function(){return A}),r.d(t,"fromYRotation",function(){return y}),r.d(t,"fromZRotation",function(){return j}),r.d(t,"fromRotationTranslation",function(){return w}),r.d(t,"fromQuat2",function(){return C}),r.d(t,"getTranslation",function(){return D}),r.d(t,"getScaling",function(){return L}),r.d(t,"getRotation",function(){return P}),r.d(t,"fromRotationTranslationScale",function(){return x}),r.d(t,"fromRotationTranslationScaleOrigin",function(){return O}),r.d(t,"fromQuat",function(){return I}),r.d(t,"frustum",function(){return M}),r.d(t,"perspective",function(){return F}),r.d(t,"perspectiveFromFieldOfView",function(){return G}),r.d(t,"ortho",function(){return N}),r.d(t,"lookAt",function(){return B}),r.d(t,"targetTo",function(){return U}),r.d(t,"str",function(){return V}),r.d(t,"frob",function(){return k}),r.d(t,"add",function(){return H}),r.d(t,"subtract",function(){return q}),r.d(t,"multiplyScalar",function(){return z}),r.d(t,"multiplyScalarAndAdd",function(){return W}),r.d(t,"exactEquals",function(){return Y}),r.d(t,"equals",function(){return X}),r.d(t,"mul",function(){return K}),r.d(t,"sub",function(){return Q});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(16);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function i(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,r,s,i,a,o,u,c,l,h,d,f,m,p,v){var _=new n.ARRAY_TYPE(16);return _[0]=e,_[1]=t,_[2]=r,_[3]=s,_[4]=i,_[5]=a,_[6]=o,_[7]=u,_[8]=c,_[9]=l,_[10]=h,_[11]=d,_[12]=f,_[13]=m,_[14]=p,_[15]=v,_}function u(e,t,r,n,s,i,a,o,u,c,l,h,d,f,m,p,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=d,e[12]=f,e[13]=m,e[14]=p,e[15]=v,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){var r=t[1],n=t[2],s=t[3],i=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=s,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],m=t[12],p=t[13],v=t[14],_=t[15],E=r*o-n*a,S=r*u-s*a,T=r*c-i*a,g=n*u-s*o,R=n*c-i*o,b=s*c-i*u,A=l*p-h*m,y=l*v-d*m,j=l*_-f*m,w=h*v-d*p,C=h*_-f*p,D=d*_-f*v,L=E*D-S*C+T*w+g*j-R*y+b*A;return L?(L=1/L,e[0]=(o*D-u*C+c*w)*L,e[1]=(s*C-n*D-i*w)*L,e[2]=(p*b-v*R+_*g)*L,e[3]=(d*R-h*b-f*g)*L,e[4]=(u*j-a*D-c*y)*L,e[5]=(r*D-s*j+i*y)*L,e[6]=(v*T-m*b-_*S)*L,e[7]=(l*b-d*T+f*S)*L,e[8]=(a*C-o*j+c*A)*L,e[9]=(n*j-r*C-i*A)*L,e[10]=(m*R-p*T+_*E)*L,e[11]=(h*T-l*R-f*E)*L,e[12]=(o*y-a*w-u*A)*L,e[13]=(r*w-n*y+s*A)*L,e[14]=(p*S-m*g-v*E)*L,e[15]=(l*g-h*S+d*E)*L,e):null}function d(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],m=t[12],p=t[13],v=t[14],_=t[15];return e[0]=o*(d*_-f*v)-h*(u*_-c*v)+p*(u*f-c*d),e[1]=-(n*(d*_-f*v)-h*(s*_-i*v)+p*(s*f-i*d)),e[2]=n*(u*_-c*v)-o*(s*_-i*v)+p*(s*c-i*u),e[3]=-(n*(u*f-c*d)-o*(s*f-i*d)+h*(s*c-i*u)),e[4]=-(a*(d*_-f*v)-l*(u*_-c*v)+m*(u*f-c*d)),e[5]=r*(d*_-f*v)-l*(s*_-i*v)+m*(s*f-i*d),e[6]=-(r*(u*_-c*v)-a*(s*_-i*v)+m*(s*c-i*u)),e[7]=r*(u*f-c*d)-a*(s*f-i*d)+l*(s*c-i*u),e[8]=a*(h*_-f*p)-l*(o*_-c*p)+m*(o*f-c*h),e[9]=-(r*(h*_-f*p)-l*(n*_-i*p)+m*(n*f-i*h)),e[10]=r*(o*_-c*p)-a*(n*_-i*p)+m*(n*c-i*o),e[11]=-(r*(o*f-c*h)-a*(n*f-i*h)+l*(n*c-i*o)),e[12]=-(a*(h*v-d*p)-l*(o*v-u*p)+m*(o*d-u*h)),e[13]=r*(h*v-d*p)-l*(n*v-s*p)+m*(n*d-s*h),e[14]=-(r*(o*v-u*p)-a*(n*v-s*p)+m*(n*u-s*o)),e[15]=r*(o*d-u*h)-a*(n*d-s*h)+l*(n*u-s*o),e}function f(e){var t=e[0],r=e[1],n=e[2],s=e[3],i=e[4],a=e[5],o=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11],f=e[12],m=e[13],p=e[14],v=e[15];return(t*a-r*i)*(h*v-d*p)-(t*o-n*i)*(l*v-d*m)+(t*u-s*i)*(l*p-h*m)+(r*o-n*a)*(c*v-d*f)-(r*u-s*a)*(c*p-h*f)+(n*u-s*o)*(c*m-l*f)}function m(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],d=t[9],f=t[10],m=t[11],p=t[12],v=t[13],_=t[14],E=t[15],S=r[0],T=r[1],g=r[2],R=r[3];return e[0]=S*n+T*o+g*h+R*p,e[1]=S*s+T*u+g*d+R*v,e[2]=S*i+T*c+g*f+R*_,e[3]=S*a+T*l+g*m+R*E,S=r[4],T=r[5],g=r[6],R=r[7],e[4]=S*n+T*o+g*h+R*p,e[5]=S*s+T*u+g*d+R*v,e[6]=S*i+T*c+g*f+R*_,e[7]=S*a+T*l+g*m+R*E,S=r[8],T=r[9],g=r[10],R=r[11],e[8]=S*n+T*o+g*h+R*p,e[9]=S*s+T*u+g*d+R*v,e[10]=S*i+T*c+g*f+R*_,e[11]=S*a+T*l+g*m+R*E,S=r[12],T=r[13],g=r[14],R=r[15],e[12]=S*n+T*o+g*h+R*p,e[13]=S*s+T*u+g*d+R*v,e[14]=S*i+T*c+g*f+R*_,e[15]=S*a+T*l+g*m+R*E,e}function p(e,t,r){var n=r[0],s=r[1],i=r[2],a=void 0,o=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,m=void 0,p=void 0,v=void 0,_=void 0;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*i+t[12],e[13]=t[1]*n+t[5]*s+t[9]*i+t[13],e[14]=t[2]*n+t[6]*s+t[10]*i+t[14],e[15]=t[3]*n+t[7]*s+t[11]*i+t[15]):(a=t[0],o=t[1],u=t[2],c=t[3],l=t[4],h=t[5],d=t[6],f=t[7],m=t[8],p=t[9],v=t[10],_=t[11],e[0]=a,e[1]=o,e[2]=u,e[3]=c,e[4]=l,e[5]=h,e[6]=d,e[7]=f,e[8]=m,e[9]=p,e[10]=v,e[11]=_,e[12]=a*n+l*s+m*i+t[12],e[13]=o*n+h*s+p*i+t[13],e[14]=u*n+d*s+v*i+t[14],e[15]=c*n+f*s+_*i+t[15]),e}function v(e,t,r){var n=r[0],s=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _(e,t,r,s){var i,a,o,u,c,l,h,d,f,m,p,v,_,E,S,T,g,R,b,A,y,j,w,C,D=s[0],L=s[1],P=s[2],x=Math.sqrt(D*D+L*L+P*P);return x<n.EPSILON?null:(D*=x=1/x,L*=x,P*=x,i=Math.sin(r),o=1-(a=Math.cos(r)),u=t[0],c=t[1],l=t[2],h=t[3],d=t[4],f=t[5],m=t[6],p=t[7],v=t[8],_=t[9],E=t[10],S=t[11],T=D*D*o+a,g=L*D*o+P*i,R=P*D*o-L*i,b=D*L*o-P*i,A=L*L*o+a,y=P*L*o+D*i,j=D*P*o+L*i,w=L*P*o-D*i,C=P*P*o+a,e[0]=u*T+d*g+v*R,e[1]=c*T+f*g+_*R,e[2]=l*T+m*g+E*R,e[3]=h*T+p*g+S*R,e[4]=u*b+d*A+v*y,e[5]=c*b+f*A+_*y,e[6]=l*b+m*A+E*y,e[7]=h*b+p*A+S*y,e[8]=u*j+d*w+v*C,e[9]=c*j+f*w+_*C,e[10]=l*j+m*w+E*C,e[11]=h*j+p*w+S*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function E(e,t,r){var n=Math.sin(r),s=Math.cos(r),i=t[4],a=t[5],o=t[6],u=t[7],c=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*s+c*n,e[5]=a*s+l*n,e[6]=o*s+h*n,e[7]=u*s+d*n,e[8]=c*s-i*n,e[9]=l*s-a*n,e[10]=h*s-o*n,e[11]=d*s-u*n,e}function S(e,t,r){var n=Math.sin(r),s=Math.cos(r),i=t[0],a=t[1],o=t[2],u=t[3],c=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s-c*n,e[1]=a*s-l*n,e[2]=o*s-h*n,e[3]=u*s-d*n,e[8]=i*n+c*s,e[9]=a*n+l*s,e[10]=o*n+h*s,e[11]=u*n+d*s,e}function T(e,t,r){var n=Math.sin(r),s=Math.cos(r),i=t[0],a=t[1],o=t[2],u=t[3],c=t[4],l=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*s+c*n,e[1]=a*s+l*n,e[2]=o*s+h*n,e[3]=u*s+d*n,e[4]=c*s-i*n,e[5]=l*s-a*n,e[6]=h*s-o*n,e[7]=d*s-u*n,e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function R(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t,r){var s,i,a,o=r[0],u=r[1],c=r[2],l=Math.sqrt(o*o+u*u+c*c);return l<n.EPSILON?null:(o*=l=1/l,u*=l,c*=l,s=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=u*o*a+c*s,e[2]=c*o*a-u*s,e[3]=0,e[4]=o*u*a-c*s,e[5]=u*u*a+i,e[6]=c*u*a+o*s,e[7]=0,e[8]=o*c*a+u*s,e[9]=u*c*a-o*s,e[10]=c*c*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function A(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=n+n,u=s+s,c=i+i,l=n*o,h=n*u,d=n*c,f=s*u,m=s*c,p=i*c,v=a*o,_=a*u,E=a*c;return e[0]=1-(f+p),e[1]=h+E,e[2]=d-_,e[3]=0,e[4]=h-E,e[5]=1-(l+p),e[6]=m+v,e[7]=0,e[8]=d+_,e[9]=m-v,e[10]=1-(l+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function C(e,t){var r=new n.ARRAY_TYPE(3),s=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],h=t[7],d=s*s+i*i+a*a+o*o;return d>0?(r[0]=2*(u*o+h*s+c*a-l*i)/d,r[1]=2*(c*o+h*i+l*s-u*a)/d,r[2]=2*(l*o+h*a+u*i-c*s)/d):(r[0]=2*(u*o+h*s+c*a-l*i),r[1]=2*(c*o+h*i+l*s-u*a),r[2]=2*(l*o+h*a+u*i-c*s)),w(e,t,r),e}function D(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function L(e,t){var r=t[0],n=t[1],s=t[2],i=t[4],a=t[5],o=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(r*r+n*n+s*s),e[1]=Math.sqrt(i*i+a*a+o*o),e[2]=Math.sqrt(u*u+c*c+l*l),e}function P(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function x(e,t,r,n){var s=t[0],i=t[1],a=t[2],o=t[3],u=s+s,c=i+i,l=a+a,h=s*u,d=s*c,f=s*l,m=i*c,p=i*l,v=a*l,_=o*u,E=o*c,S=o*l,T=n[0],g=n[1],R=n[2];return e[0]=(1-(m+v))*T,e[1]=(d+S)*T,e[2]=(f-E)*T,e[3]=0,e[4]=(d-S)*g,e[5]=(1-(h+v))*g,e[6]=(p+_)*g,e[7]=0,e[8]=(f+E)*R,e[9]=(p-_)*R,e[10]=(1-(h+m))*R,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function O(e,t,r,n,s){var i=t[0],a=t[1],o=t[2],u=t[3],c=i+i,l=a+a,h=o+o,d=i*c,f=i*l,m=i*h,p=a*l,v=a*h,_=o*h,E=u*c,S=u*l,T=u*h,g=n[0],R=n[1],b=n[2],A=s[0],y=s[1],j=s[2],w=(1-(p+_))*g,C=(f+T)*g,D=(m-S)*g,L=(f-T)*R,P=(1-(d+_))*R,x=(v+E)*R,O=(m+S)*b,I=(v-E)*b,M=(1-(d+p))*b;return e[0]=w,e[1]=C,e[2]=D,e[3]=0,e[4]=L,e[5]=P,e[6]=x,e[7]=0,e[8]=O,e[9]=I,e[10]=M,e[11]=0,e[12]=r[0]+A-(w*A+L*y+O*j),e[13]=r[1]+y-(C*A+P*y+I*j),e[14]=r[2]+j-(D*A+x*y+M*j),e[15]=1,e}function I(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=r+r,o=n+n,u=s+s,c=r*a,l=n*a,h=n*o,d=s*a,f=s*o,m=s*u,p=i*a,v=i*o,_=i*u;return e[0]=1-h-m,e[1]=l+_,e[2]=d-v,e[3]=0,e[4]=l-_,e[5]=1-c-m,e[6]=f+p,e[7]=0,e[8]=d+v,e[9]=f-p,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,r,n,s,i,a){var o=1/(r-t),u=1/(s-n),c=1/(i-a);return e[0]=2*i*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*u,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(s+n)*u,e[10]=(a+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*c,e[15]=0,e}function F(e,t,r,n,s){var i=1/Math.tan(t/2),a=void 0;return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(a=1/(n-s),e[10]=(s+n)*a,e[14]=2*s*n*a):(e[10]=-1,e[14]=-2*n),e}function G(e,t,r,n){var s=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+o),c=2/(s+i);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-o)*u*.5,e[9]=(s-i)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function N(e,t,r,n,s,i,a){var o=1/(t-r),u=1/(n-s),c=1/(i-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(s+n)*u,e[14]=(a+i)*c,e[15]=1,e}function B(e,t,r,s){var i=void 0,a=void 0,o=void 0,u=void 0,l=void 0,h=void 0,d=void 0,f=void 0,m=void 0,p=void 0,v=t[0],_=t[1],E=t[2],S=s[0],T=s[1],g=s[2],R=r[0],b=r[1],A=r[2];return Math.abs(v-R)<n.EPSILON&&Math.abs(_-b)<n.EPSILON&&Math.abs(E-A)<n.EPSILON?c(e):(d=v-R,f=_-b,m=E-A,i=T*(m*=p=1/Math.sqrt(d*d+f*f+m*m))-g*(f*=p),a=g*(d*=p)-S*m,o=S*f-T*d,(p=Math.sqrt(i*i+a*a+o*o))?(i*=p=1/p,a*=p,o*=p):(i=0,a=0,o=0),u=f*o-m*a,l=m*i-d*o,h=d*a-f*i,(p=Math.sqrt(u*u+l*l+h*h))?(u*=p=1/p,l*=p,h*=p):(u=0,l=0,h=0),e[0]=i,e[1]=u,e[2]=d,e[3]=0,e[4]=a,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=h,e[10]=m,e[11]=0,e[12]=-(i*v+a*_+o*E),e[13]=-(u*v+l*_+h*E),e[14]=-(d*v+f*_+m*E),e[15]=1,e)}function U(e,t,r,n){var s=t[0],i=t[1],a=t[2],o=n[0],u=n[1],c=n[2],l=s-r[0],h=i-r[1],d=a-r[2],f=l*l+h*h+d*d;f>0&&(l*=f=1/Math.sqrt(f),h*=f,d*=f);var m=u*d-c*h,p=c*l-o*d,v=o*h-u*l;return(f=m*m+p*p+v*v)>0&&(m*=f=1/Math.sqrt(f),p*=f,v*=f),e[0]=m,e[1]=p,e[2]=v,e[3]=0,e[4]=h*v-d*p,e[5]=d*m-l*v,e[6]=l*p-h*m,e[7]=0,e[8]=l,e[9]=h,e[10]=d,e[11]=0,e[12]=s,e[13]=i,e[14]=a,e[15]=1,e}function V(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function k(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function H(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function q(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function z(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function W(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function Y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function X(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=e[9],f=e[10],m=e[11],p=e[12],v=e[13],_=e[14],E=e[15],S=t[0],T=t[1],g=t[2],R=t[3],b=t[4],A=t[5],y=t[6],j=t[7],w=t[8],C=t[9],D=t[10],L=t[11],P=t[12],x=t[13],O=t[14],I=t[15];return Math.abs(r-S)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(s-T)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(i-g)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(a-R)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(o-b)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(u-A)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-j)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(h-w)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(d-C)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-D)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(m-L)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(p-P)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-x)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(x))&&Math.abs(_-O)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(E-I)<=n.EPSILON*Math.max(1,Math.abs(E),Math.abs(I))}var K=m,Q=q},"../node_modules/gl-matrix/lib/gl-matrix/quat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return o}),r.d(t,"identity",function(){return u}),r.d(t,"setAxisAngle",function(){return c}),r.d(t,"getAxisAngle",function(){return l}),r.d(t,"multiply",function(){return h}),r.d(t,"rotateX",function(){return d}),r.d(t,"rotateY",function(){return f}),r.d(t,"rotateZ",function(){return m}),r.d(t,"calculateW",function(){return p}),r.d(t,"slerp",function(){return v}),r.d(t,"random",function(){return _}),r.d(t,"invert",function(){return E}),r.d(t,"conjugate",function(){return S}),r.d(t,"fromMat3",function(){return T}),r.d(t,"fromEuler",function(){return g}),r.d(t,"str",function(){return R}),r.d(t,"clone",function(){return D}),r.d(t,"fromValues",function(){return L}),r.d(t,"copy",function(){return P}),r.d(t,"set",function(){return x}),r.d(t,"add",function(){return O}),r.d(t,"mul",function(){return I}),r.d(t,"scale",function(){return M}),r.d(t,"dot",function(){return F}),r.d(t,"lerp",function(){return G}),r.d(t,"length",function(){return N}),r.d(t,"len",function(){return B}),r.d(t,"squaredLength",function(){return U}),r.d(t,"sqrLen",function(){return V}),r.d(t,"normalize",function(){return k}),r.d(t,"exactEquals",function(){return H}),r.d(t,"equals",function(){return q}),r.d(t,"rotationTo",function(){return z}),r.d(t,"sqlerp",function(){return W}),r.d(t,"setAxes",function(){return Y});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),s=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js"),a=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");function o(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function u(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function c(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function l(e,t){var r=2*Math.acos(t[3]),s=Math.sin(r/2);return s>n.EPSILON?(e[0]=t[0]/s,e[1]=t[1]/s,e[2]=t[2]/s):(e[0]=1,e[1]=0,e[2]=0),r}function h(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*o+s*c-i*u,e[1]=s*l+a*u+i*o-n*c,e[2]=i*l+a*c+n*u-s*o,e[3]=a*l-n*o-s*u-i*c,e}function d(e,t,r){r*=.5;var n=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*o,e[1]=s*u+i*o,e[2]=i*u-s*o,e[3]=a*u-n*o,e}function f(e,t,r){r*=.5;var n=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u-i*o,e[1]=s*u+a*o,e[2]=i*u+n*o,e[3]=a*u-s*o,e}function m(e,t,r){r*=.5;var n=t[0],s=t[1],i=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+s*o,e[1]=s*u-n*o,e[2]=i*u+a*o,e[3]=a*u-i*o,e}function p(e,t){var r=t[0],n=t[1],s=t[2];return e[0]=r,e[1]=n,e[2]=s,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-s*s)),e}function v(e,t,r,s){var i=t[0],a=t[1],o=t[2],u=t[3],c=r[0],l=r[1],h=r[2],d=r[3],f=void 0,m=void 0,p=void 0,v=void 0,_=void 0;return(m=i*c+a*l+o*h+u*d)<0&&(m=-m,c=-c,l=-l,h=-h,d=-d),1-m>n.EPSILON?(f=Math.acos(m),p=Math.sin(f),v=Math.sin((1-s)*f)/p,_=Math.sin(s*f)/p):(v=1-s,_=s),e[0]=v*i+_*c,e[1]=v*a+_*l,e[2]=v*o+_*h,e[3]=v*u+_*d,e}function _(e){var t=n.RANDOM(),r=n.RANDOM(),s=n.RANDOM(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*r),e[1]=i*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*s),e[3]=a*Math.cos(2*Math.PI*s),e}function E(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=r*r+n*n+s*s+i*i,o=a?1/a:0;return e[0]=-r*o,e[1]=-n*o,e[2]=-s*o,e[3]=i*o,e}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function T(e,t){var r=t[0]+t[4]+t[8],n=void 0;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var i=(s+1)%3,a=(s+2)%3;n=Math.sqrt(t[3*s+s]-t[3*i+i]-t[3*a+a]+1),e[s]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+s]+t[3*s+i])*n,e[a]=(t[3*a+s]+t[3*s+a])*n}return e}function g(e,t,r,n){var s=.5*Math.PI/180;t*=s,r*=s,n*=s;var i=Math.sin(t),a=Math.cos(t),o=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return e[0]=i*u*l-a*o*c,e[1]=a*o*l+i*u*c,e[2]=a*u*c-i*o*l,e[3]=a*u*l+i*o*c,e}function R(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var b,A,y,j,w,C,D=a.clone,L=a.fromValues,P=a.copy,x=a.set,O=a.add,I=h,M=a.scale,F=a.dot,G=a.lerp,N=a.length,B=N,U=a.squaredLength,V=U,k=a.normalize,H=a.exactEquals,q=a.equals,z=(b=i.create(),A=i.fromValues(1,0,0),y=i.fromValues(0,1,0),function(e,t,r){var n=i.dot(t,r);return n<-.999999?(i.cross(b,A,t),i.len(b)<1e-6&&i.cross(b,y,t),i.normalize(b,b),c(e,b,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i.cross(b,t,r),e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=1+n,k(e,e))}),W=(j=o(),w=o(),function(e,t,r,n,s,i){return v(j,t,s,i),v(w,r,n,i),v(e,j,w,2*i*(1-i)),e}),Y=(C=s.create(),function(e,t,r,n){return C[0]=r[0],C[3]=r[1],C[6]=r[2],C[1]=n[0],C[4]=n[1],C[7]=n[2],C[2]=-t[0],C[5]=-t[1],C[8]=-t[2],k(e,T(e,C))})},"../node_modules/gl-matrix/lib/gl-matrix/quat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return a}),r.d(t,"clone",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"fromRotationTranslationValues",function(){return c}),r.d(t,"fromRotationTranslation",function(){return l}),r.d(t,"fromTranslation",function(){return h}),r.d(t,"fromRotation",function(){return d}),r.d(t,"fromMat4",function(){return f}),r.d(t,"copy",function(){return m}),r.d(t,"identity",function(){return p}),r.d(t,"set",function(){return v}),r.d(t,"getReal",function(){return _}),r.d(t,"getDual",function(){return E}),r.d(t,"setReal",function(){return S}),r.d(t,"setDual",function(){return T}),r.d(t,"getTranslation",function(){return g}),r.d(t,"translate",function(){return R}),r.d(t,"rotateX",function(){return b}),r.d(t,"rotateY",function(){return A}),r.d(t,"rotateZ",function(){return y}),r.d(t,"rotateByQuatAppend",function(){return j}),r.d(t,"rotateByQuatPrepend",function(){return w}),r.d(t,"rotateAroundAxis",function(){return C}),r.d(t,"add",function(){return D}),r.d(t,"multiply",function(){return L}),r.d(t,"mul",function(){return P}),r.d(t,"scale",function(){return x}),r.d(t,"dot",function(){return O}),r.d(t,"lerp",function(){return I}),r.d(t,"invert",function(){return M}),r.d(t,"conjugate",function(){return F}),r.d(t,"length",function(){return G}),r.d(t,"len",function(){return N}),r.d(t,"squaredLength",function(){return B}),r.d(t,"sqrLen",function(){return U}),r.d(t,"normalize",function(){return V}),r.d(t,"str",function(){return k}),r.d(t,"exactEquals",function(){return H}),r.d(t,"equals",function(){return q});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),s=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");function a(){var e=new n.ARRAY_TYPE(8);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function o(e){var t=new n.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function u(e,t,r,s,i,a,o,u){var c=new n.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=r,c[3]=s,c[4]=i,c[5]=a,c[6]=o,c[7]=u,c}function c(e,t,r,s,i,a,o){var u=new n.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=r,u[3]=s;var c=.5*i,l=.5*a,h=.5*o;return u[4]=c*s+l*r-h*t,u[5]=l*s+h*e-c*r,u[6]=h*s+c*t-l*e,u[7]=-c*e-l*t-h*r,u}function l(e,t,r){var n=.5*r[0],s=.5*r[1],i=.5*r[2],a=t[0],o=t[1],u=t[2],c=t[3];return e[0]=a,e[1]=o,e[2]=u,e[3]=c,e[4]=n*c+s*u-i*o,e[5]=s*c+i*a-n*u,e[6]=i*c+n*o-s*a,e[7]=-n*a-s*o-i*u,e}function h(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function f(e,t){var r=s.create();i.getRotation(r,t);var a=new n.ARRAY_TYPE(3);return i.getTranslation(a,t),l(e,r,a),e}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function p(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function v(e,t,r,n,s,i,a,o,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e[6]=o,e[7]=u,e}var _=s.copy;function E(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var S=s.copy;function T(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function g(e,t){var r=t[4],n=t[5],s=t[6],i=t[7],a=-t[0],o=-t[1],u=-t[2],c=t[3];return e[0]=2*(r*c+i*a+n*u-s*o),e[1]=2*(n*c+i*o+s*a-r*u),e[2]=2*(s*c+i*u+r*o-n*a),e}function R(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=.5*r[0],u=.5*r[1],c=.5*r[2],l=t[4],h=t[5],d=t[6],f=t[7];return e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=a*o+s*c-i*u+l,e[5]=a*u+i*o-n*c+h,e[6]=a*c+n*u-s*o+d,e[7]=-n*o-s*u-i*c+f,e}function b(e,t,r){var n=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],h=t[7],d=u*o+h*n+c*a-l*i,f=c*o+h*i+l*n-u*a,m=l*o+h*a+u*i-c*n,p=h*o-u*n-c*i-l*a;return s.rotateX(e,t,r),n=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*n+f*a-m*i,e[5]=f*o+p*i+m*n-d*a,e[6]=m*o+p*a+d*i-f*n,e[7]=p*o-d*n-f*i-m*a,e}function A(e,t,r){var n=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],h=t[7],d=u*o+h*n+c*a-l*i,f=c*o+h*i+l*n-u*a,m=l*o+h*a+u*i-c*n,p=h*o-u*n-c*i-l*a;return s.rotateY(e,t,r),n=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*n+f*a-m*i,e[5]=f*o+p*i+m*n-d*a,e[6]=m*o+p*a+d*i-f*n,e[7]=p*o-d*n-f*i-m*a,e}function y(e,t,r){var n=-t[0],i=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],h=t[7],d=u*o+h*n+c*a-l*i,f=c*o+h*i+l*n-u*a,m=l*o+h*a+u*i-c*n,p=h*o-u*n-c*i-l*a;return s.rotateZ(e,t,r),n=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*n+f*a-m*i,e[5]=f*o+p*i+m*n-d*a,e[6]=m*o+p*a+d*i-f*n,e[7]=p*o-d*n-f*i-m*a,e}function j(e,t,r){var n=r[0],s=r[1],i=r[2],a=r[3],o=t[0],u=t[1],c=t[2],l=t[3];return e[0]=o*a+l*n+u*i-c*s,e[1]=u*a+l*s+c*n-o*i,e[2]=c*a+l*i+o*s-u*n,e[3]=l*a-o*n-u*s-c*i,o=t[4],u=t[5],c=t[6],l=t[7],e[4]=o*a+l*n+u*i-c*s,e[5]=u*a+l*s+c*n-o*i,e[6]=c*a+l*i+o*s-u*n,e[7]=l*a-o*n-u*s-c*i,e}function w(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*o+s*c-i*u,e[1]=s*l+a*u+i*o-n*c,e[2]=i*l+a*c+n*u-s*o,e[3]=a*l-n*o-s*u-i*c,o=r[4],u=r[5],c=r[6],l=r[7],e[4]=n*l+a*o+s*c-i*u,e[5]=s*l+a*u+i*o-n*c,e[6]=i*l+a*c+n*u-s*o,e[7]=a*l-n*o-s*u-i*c,e}function C(e,t,r,s){if(Math.abs(s)<n.EPSILON)return m(e,t);var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);s*=.5;var a=Math.sin(s),o=a*r[0]/i,u=a*r[1]/i,c=a*r[2]/i,l=Math.cos(s),h=t[0],d=t[1],f=t[2],p=t[3];e[0]=h*l+p*o+d*c-f*u,e[1]=d*l+p*u+f*o-h*c,e[2]=f*l+p*c+h*u-d*o,e[3]=p*l-h*o-d*u-f*c;var v=t[4],_=t[5],E=t[6],S=t[7];return e[4]=v*l+S*o+_*c-E*u,e[5]=_*l+S*u+E*o-v*c,e[6]=E*l+S*c+v*u-_*o,e[7]=S*l-v*o-_*u-E*c,e}function D(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function L(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3],o=r[4],u=r[5],c=r[6],l=r[7],h=t[4],d=t[5],f=t[6],m=t[7],p=r[0],v=r[1],_=r[2],E=r[3];return e[0]=n*E+a*p+s*_-i*v,e[1]=s*E+a*v+i*p-n*_,e[2]=i*E+a*_+n*v-s*p,e[3]=a*E-n*p-s*v-i*_,e[4]=n*l+a*o+s*c-i*u+h*E+m*p+d*_-f*v,e[5]=s*l+a*u+i*o-n*c+d*E+m*v+f*p-h*_,e[6]=i*l+a*c+n*u-s*o+f*E+m*_+h*v-d*p,e[7]=a*l-n*o-s*u-i*c+m*E-h*p-d*v-f*_,e}var P=L;function x(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var O=s.dot;function I(e,t,r,n){var s=1-n;return O(t,r)<0&&(n=-n),e[0]=t[0]*s+r[0]*n,e[1]=t[1]*s+r[1]*n,e[2]=t[2]*s+r[2]*n,e[3]=t[3]*s+r[3]*n,e[4]=t[4]*s+r[4]*n,e[5]=t[5]*s+r[5]*n,e[6]=t[6]*s+r[6]*n,e[7]=t[7]*s+r[7]*n,e}function M(e,t){var r=B(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function F(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var G=s.length,N=G,B=s.squaredLength,U=B;function V(e,t){var r=B(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,s=t[1]/r,i=t[2]/r,a=t[3]/r,o=t[4],u=t[5],c=t[6],l=t[7],h=n*o+s*u+i*c+a*l;e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=(o-n*h)/r,e[5]=(u-s*h)/r,e[6]=(c-i*h)/r,e[7]=(l-a*h)/r}return e}function k(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function q(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],h=t[0],d=t[1],f=t[2],m=t[3],p=t[4],v=t[5],_=t[6],E=t[7];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-m)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(u-v)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-_)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-E)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))}},"../node_modules/gl-matrix/lib/gl-matrix/vec2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"fromValues",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"add",function(){return c}),r.d(t,"subtract",function(){return l}),r.d(t,"multiply",function(){return h}),r.d(t,"divide",function(){return d}),r.d(t,"ceil",function(){return f}),r.d(t,"floor",function(){return m}),r.d(t,"min",function(){return p}),r.d(t,"max",function(){return v}),r.d(t,"round",function(){return _}),r.d(t,"scale",function(){return E}),r.d(t,"scaleAndAdd",function(){return S}),r.d(t,"distance",function(){return T}),r.d(t,"squaredDistance",function(){return g}),r.d(t,"length",function(){return R}),r.d(t,"squaredLength",function(){return b}),r.d(t,"negate",function(){return A}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return j}),r.d(t,"dot",function(){return w}),r.d(t,"cross",function(){return C}),r.d(t,"lerp",function(){return D}),r.d(t,"random",function(){return L}),r.d(t,"transformMat2",function(){return P}),r.d(t,"transformMat2d",function(){return x}),r.d(t,"transformMat3",function(){return O}),r.d(t,"transformMat4",function(){return I}),r.d(t,"rotate",function(){return M}),r.d(t,"angle",function(){return F}),r.d(t,"str",function(){return G}),r.d(t,"exactEquals",function(){return N}),r.d(t,"equals",function(){return B}),r.d(t,"len",function(){return V}),r.d(t,"sub",function(){return k}),r.d(t,"mul",function(){return H}),r.d(t,"div",function(){return q}),r.d(t,"dist",function(){return z}),r.d(t,"sqrDist",function(){return W}),r.d(t,"sqrLen",function(){return Y}),r.d(t,"forEach",function(){return X});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function a(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function o(e,t){return e[0]=t[0],e[1]=t[1],e}function u(e,t,r){return e[0]=t,e[1]=r,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function h(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function v(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function _(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function E(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function S(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function T(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function g(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function R(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function b(e){var t=e[0],r=e[1];return t*t+r*r}function A(e,t){return e[0]=-t[0],e[1]=-t[1],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function j(e,t){var r=t[0],n=t[1],s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]}function C(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function D(e,t,r,n){var s=t[0],i=t[1];return e[0]=s+n*(r[0]-s),e[1]=i+n*(r[1]-i),e}function L(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function P(e,t,r){var n=t[0],s=t[1];return e[0]=r[0]*n+r[2]*s,e[1]=r[1]*n+r[3]*s,e}function x(e,t,r){var n=t[0],s=t[1];return e[0]=r[0]*n+r[2]*s+r[4],e[1]=r[1]*n+r[3]*s+r[5],e}function O(e,t,r){var n=t[0],s=t[1];return e[0]=r[0]*n+r[3]*s+r[6],e[1]=r[1]*n+r[4]*s+r[7],e}function I(e,t,r){var n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e}function M(e,t,r,n){var s=t[0]-r[0],i=t[1]-r[1],a=Math.sin(n),o=Math.cos(n);return e[0]=s*o-i*a+r[0],e[1]=s*a+i*o+r[1],e}function F(e,t){var r=e[0],n=e[1],s=t[0],i=t[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var o=s*s+i*i;o>0&&(o=1/Math.sqrt(o));var u=(r*s+n*i)*a*o;return u>1?0:u<-1?Math.PI:Math.acos(u)}function G(e){return"vec2("+e[0]+", "+e[1]+")"}function N(e,t){return e[0]===t[0]&&e[1]===t[1]}function B(e,t){var r=e[0],s=e[1],i=t[0],a=t[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(s-a)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(a))}var U,V=R,k=l,H=h,q=d,z=T,W=g,Y=b,X=(U=s(),function(e,t,r,n,s,i){var a=void 0,o=void 0;for(t||(t=2),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)U[0]=e[a],U[1]=e[a+1],s(U,U,i),e[a]=U[0],e[a+1]=U[1];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"length",function(){return a}),r.d(t,"fromValues",function(){return o}),r.d(t,"copy",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"add",function(){return l}),r.d(t,"subtract",function(){return h}),r.d(t,"multiply",function(){return d}),r.d(t,"divide",function(){return f}),r.d(t,"ceil",function(){return m}),r.d(t,"floor",function(){return p}),r.d(t,"min",function(){return v}),r.d(t,"max",function(){return _}),r.d(t,"round",function(){return E}),r.d(t,"scale",function(){return S}),r.d(t,"scaleAndAdd",function(){return T}),r.d(t,"distance",function(){return g}),r.d(t,"squaredDistance",function(){return R}),r.d(t,"squaredLength",function(){return b}),r.d(t,"negate",function(){return A}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return j}),r.d(t,"dot",function(){return w}),r.d(t,"cross",function(){return C}),r.d(t,"lerp",function(){return D}),r.d(t,"hermite",function(){return L}),r.d(t,"bezier",function(){return P}),r.d(t,"random",function(){return x}),r.d(t,"transformMat4",function(){return O}),r.d(t,"transformMat3",function(){return I}),r.d(t,"transformQuat",function(){return M}),r.d(t,"rotateX",function(){return F}),r.d(t,"rotateY",function(){return G}),r.d(t,"rotateZ",function(){return N}),r.d(t,"angle",function(){return B}),r.d(t,"str",function(){return U}),r.d(t,"exactEquals",function(){return V}),r.d(t,"equals",function(){return k}),r.d(t,"sub",function(){return q}),r.d(t,"mul",function(){return z}),r.d(t,"div",function(){return W}),r.d(t,"dist",function(){return Y}),r.d(t,"sqrDist",function(){return X}),r.d(t,"len",function(){return K}),r.d(t,"sqrLen",function(){return Q}),r.d(t,"forEach",function(){return Z});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function i(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function o(e,t,r){var s=new n.ARRAY_TYPE(3);return s[0]=e,s[1]=t,s[2]=r,s}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function h(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function d(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function f(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function m(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function v(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function _(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function E(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function S(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function T(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function g(e,t){var r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+n*n+s*s)}function R(e,t){var r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s}function b(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function A(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function j(e,t){var r=t[0],n=t[1],s=t[2],i=r*r+n*n+s*s;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function C(e,t,r){var n=t[0],s=t[1],i=t[2],a=r[0],o=r[1],u=r[2];return e[0]=s*u-i*o,e[1]=i*a-n*u,e[2]=n*o-s*a,e}function D(e,t,r,n){var s=t[0],i=t[1],a=t[2];return e[0]=s+n*(r[0]-s),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e}function L(e,t,r,n,s,i){var a=i*i,o=a*(2*i-3)+1,u=a*(i-2)+i,c=a*(i-1),l=a*(3-2*i);return e[0]=t[0]*o+r[0]*u+n[0]*c+s[0]*l,e[1]=t[1]*o+r[1]*u+n[1]*c+s[1]*l,e[2]=t[2]*o+r[2]*u+n[2]*c+s[2]*l,e}function P(e,t,r,n,s,i){var a=1-i,o=a*a,u=i*i,c=o*a,l=3*i*o,h=3*u*a,d=u*i;return e[0]=t[0]*c+r[0]*l+n[0]*h+s[0]*d,e[1]=t[1]*c+r[1]*l+n[1]*h+s[1]*d,e[2]=t[2]*c+r[2]*l+n[2]*h+s[2]*d,e}function x(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,s=2*n.RANDOM()-1,i=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=s*t,e}function O(e,t,r){var n=t[0],s=t[1],i=t[2],a=r[3]*n+r[7]*s+r[11]*i+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*s+r[8]*i+r[12])/a,e[1]=(r[1]*n+r[5]*s+r[9]*i+r[13])/a,e[2]=(r[2]*n+r[6]*s+r[10]*i+r[14])/a,e}function I(e,t,r){var n=t[0],s=t[1],i=t[2];return e[0]=n*r[0]+s*r[3]+i*r[6],e[1]=n*r[1]+s*r[4]+i*r[7],e[2]=n*r[2]+s*r[5]+i*r[8],e}function M(e,t,r){var n=r[0],s=r[1],i=r[2],a=r[3],o=t[0],u=t[1],c=t[2],l=s*c-i*u,h=i*o-n*c,d=n*u-s*o,f=s*d-i*h,m=i*l-n*d,p=n*h-s*l,v=2*a;return l*=v,h*=v,d*=v,f*=2,m*=2,p*=2,e[0]=o+l+f,e[1]=u+h+m,e[2]=c+d+p,e}function F(e,t,r,n){var s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[0],i[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),i[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function G(e,t,r,n){var s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),i[1]=s[1],i[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function N(e,t,r,n){var s=[],i=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],i[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),i[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),i[2]=s[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function B(e,t){var r=o(e[0],e[1],e[2]),n=o(t[0],t[1],t[2]);j(r,r),j(n,n);var s=w(r,n);return s>1?0:s<-1?Math.PI:Math.acos(s)}function U(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function k(e,t){var r=e[0],s=e[1],i=e[2],a=t[0],o=t[1],u=t[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-o)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))}var H,q=h,z=d,W=f,Y=g,X=R,K=a,Q=b,Z=(H=s(),function(e,t,r,n,s,i){var a=void 0,o=void 0;for(t||(t=3),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)H[0]=e[a],H[1]=e[a+1],H[2]=e[a+2],s(H,H,i),e[a]=H[0],e[a+1]=H[1],e[a+2]=H[2];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return s}),r.d(t,"clone",function(){return i}),r.d(t,"fromValues",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"add",function(){return c}),r.d(t,"subtract",function(){return l}),r.d(t,"multiply",function(){return h}),r.d(t,"divide",function(){return d}),r.d(t,"ceil",function(){return f}),r.d(t,"floor",function(){return m}),r.d(t,"min",function(){return p}),r.d(t,"max",function(){return v}),r.d(t,"round",function(){return _}),r.d(t,"scale",function(){return E}),r.d(t,"scaleAndAdd",function(){return S}),r.d(t,"distance",function(){return T}),r.d(t,"squaredDistance",function(){return g}),r.d(t,"length",function(){return R}),r.d(t,"squaredLength",function(){return b}),r.d(t,"negate",function(){return A}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return j}),r.d(t,"dot",function(){return w}),r.d(t,"lerp",function(){return C}),r.d(t,"random",function(){return D}),r.d(t,"transformMat4",function(){return L}),r.d(t,"transformQuat",function(){return P}),r.d(t,"str",function(){return x}),r.d(t,"exactEquals",function(){return O}),r.d(t,"equals",function(){return I}),r.d(t,"sub",function(){return F}),r.d(t,"mul",function(){return G}),r.d(t,"div",function(){return N}),r.d(t,"dist",function(){return B}),r.d(t,"sqrDist",function(){return U}),r.d(t,"len",function(){return V}),r.d(t,"sqrLen",function(){return k}),r.d(t,"forEach",function(){return H});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function s(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function i(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,s){var i=new n.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=s,i}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e,t,r,n,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function h(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function v(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function _(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function E(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function S(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function T(e,t){var r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(r*r+n*n+s*s+i*i)}function g(e,t){var r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2],i=t[3]-e[3];return r*r+n*n+s*s+i*i}function R(e){var t=e[0],r=e[1],n=e[2],s=e[3];return Math.sqrt(t*t+r*r+n*n+s*s)}function b(e){var t=e[0],r=e[1],n=e[2],s=e[3];return t*t+r*r+n*n+s*s}function A(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function j(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],a=r*r+n*n+s*s+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=s*a,e[3]=i*a),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function C(e,t,r,n){var s=t[0],i=t[1],a=t[2],o=t[3];return e[0]=s+n*(r[0]-s),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e[3]=o+n*(r[3]-o),e}function D(e,t){var r,s,i,a,o,u;t=t||1;do{o=(r=2*n.RANDOM()-1)*r+(s=2*n.RANDOM()-1)*s}while(o>=1);do{u=(i=2*n.RANDOM()-1)*i+(a=2*n.RANDOM()-1)*a}while(u>=1);var c=Math.sqrt((1-o)/u);return e[0]=t*r,e[1]=t*s,e[2]=t*i*c,e[3]=t*a*c,e}function L(e,t,r){var n=t[0],s=t[1],i=t[2],a=t[3];return e[0]=r[0]*n+r[4]*s+r[8]*i+r[12]*a,e[1]=r[1]*n+r[5]*s+r[9]*i+r[13]*a,e[2]=r[2]*n+r[6]*s+r[10]*i+r[14]*a,e[3]=r[3]*n+r[7]*s+r[11]*i+r[15]*a,e}function P(e,t,r){var n=t[0],s=t[1],i=t[2],a=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*i-u*s,h=c*s+u*n-a*i,d=c*i+a*s-o*n,f=-a*n-o*s-u*i;return e[0]=l*c+f*-a+h*-u-d*-o,e[1]=h*c+f*-o+d*-a-l*-u,e[2]=d*c+f*-u+l*-o-h*-a,e[3]=t[3],e}function x(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function O(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function I(e,t){var r=e[0],s=e[1],i=e[2],a=e[3],o=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}var M,F=l,G=h,N=d,B=T,U=g,V=R,k=b,H=(M=s(),function(e,t,r,n,s,i){var a=void 0,o=void 0;for(t||(t=4),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)M[0]=e[a],M[1]=e[a+1],M[2]=e[a+2],M[3]=e[a+3],s(M,M,i),e[a]=M[0],e[a+1]=M[1],e[a+2]=M[2],e[a+3]=M[3];return e})},"../node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./config.js":function(e,t,r){"use strict";r.r(t),r.d(t,"config",function(){return d});var n=r("./core/index.js"),s=r("./curve/index.js"),i=r("./eve/index.js"),a=r("./interior/index.js"),o=r("./particle/index.js"),u=r("./sof/index.js"),c=r("./state/index.js"),l=r("./global/class/index.js"),h=r("./global/math/index.js");const d={debug:!1,device:{textureQuality:0,shaderQuality:"hi",antialiasing:!0,anisotropicFiltering:!0,webgl2:!0,webvr:!1,performanceClock:!0},resMan:{systemMirror:!1,autoPurgeResources:!0,purgeTime:60,maxPrepareTime:.05},logger:{name:"CCPWGL2",history:50,throttle:10,display:!0,visible:{error:!0,warning:!1,log:!1,info:!1,debug:!1}},store:{path:{res:"https://developers.eveonline.com/ccpwgl/assetpath/1097993/",cdn:"http://localhost:3000/"},extension:{sm_hi:n.Tw2EffectRes,sm_lo:n.Tw2EffectRes,wbg:n.Tw2GeometryRes,png:n.Tw2TextureRes,dds:n.Tw2TextureRes,cube:n.Tw2TextureRes,mp4:n.Tw2VideoRes,ogg:n.Tw2VideoRes,webm:n.Tw2VideoRes,black:n.Tw2LoadingObject,red:n.Tw2LoadingObject},class:[n,s,i,a,o,u,c,{Tw2EventEmitter:l.Tw2EventEmitter,Tw2Notifications:l.Tw2Notifications}],type:{float:n.Tw2FloatParameter,number:n.Tw2FloatParameter,texture:n.Tw2TextureParameter,vector2:n.Tw2Vector2Parameter,vector3:n.Tw2Vector3Parameter,vector4:n.Tw2Vector4Parameter,matrix4:n.Tw2Matrix4Parameter},variable:{WorldMat:h.mat4.create(),ViewMat:h.mat4.create(),ProjectionMat:h.mat4.create(),ViewProjectionMat:h.mat4.create(),ViewportSize:h.vec4.create(),Time:h.vec4.create(),u_DecalMatrix:h.mat4.create(),u_InvDecalMatrix:h.mat4.create(),EveSpaceSceneEnvMap:"",EnvMap1:"",EnvMap2:"",EnvMap3:"",ShadowLightness:0,OccluderValue:h.vec4.fromValues(1,1,0,0),LensflareFxOccScale:h.vec4.fromValues(1,1,0,0),LensflareFxDirectionScale:h.vec4.create()}}}},"./core/Tr2DistanceTracker.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2DistanceTracker",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.direction=n.vec3.create(),this.targetPosition=n.vec3.create()}static black(e){return[["name",e.string],["direction",e.vector3],["targetPosition",e.vector3]]}}s.__isStaging=4},"./core/Tr2RuntimeInstanceData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RuntimeInstanceData",function(){return a});var n=r("./global/index.js"),s=r("./core/vertex/index.js"),i=r("./particle/element/Tw2ParticleElementDeclaration.js");class a extends n.Tw2BaseClass{constructor(...e){super(...e),this._count=0,this._data=null,this._dirty=!0,this._declaration=null,this._vb=null,this._vertexStride=0}GetMaxInstanceCount(){return this._data?this._data.length:1}SetElementLayout(e){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null),this._vertexStride=0,this._declaration=new s.Tw2VertexDeclaration;for(let t=0;t<e.length;++t){const r=new i.Tw2ParticleElementDeclaration;r.elementType=e[t][0],r.dimension=e[t][2],r.usageIndex=e[t][1];const n=r.GetDeclaration();n.offset=4*this._vertexStride,this._declaration.elements.push(n),this._vertexStride+=r.dimension}this._declaration.RebuildHash()}SetData(e){this._declaration&&(this._data=e,this._count=this._data.length,this._dirty=!0,this.UpdateData())}SetItemElement(e,t,r){if(this._declaration.elements[t].elements>1)for(let n=0;n<this._declaration.elements[t].elements;++n)this._data[e][t][n]=r[n];else this._data[e][t]=r;this._dirty=!0}SetItemElementRef(e,t,r){this._data[e][t]=r,this._dirty=!0}GetItemElement(e,t){return this._data[e][t]}UpdateData(){if(!this._dirty||!this._declaration)return;const e=n.device.gl,t=new Float32Array(this._data.length*this._vertexStride);let r=0;for(let e=0;e<this._data.length;++e)for(let n=0;n<this._declaration.elements.length;++n)if(1===this._declaration.elements[n].elements)t[r++]=this._data[e][n];else for(let s=0;s<this._declaration.elements[n].elements;++s)t[r++]=this._data[e][n][s];this._vb||(this._vb=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._dirty=!1}Unload(){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null)}GetInstanceBuffer(){return this._vb}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return 4*this._vertexStride}GetInstanceCount(){return this._count}static black(e){return[]}}},"./core/TriObserverLocal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriObserverLocal",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.front=n.vec3.create()}static black(e){return[["front",e.vector3]]}}s.__isStaging=4},"./core/Tw2Error.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Error",function(){return i}),r.d(t,"ErrWebglContext",function(){return a}),r.d(t,"ErrWebxrNotSupported",function(){return o}),r.d(t,"ErrWebxrDeviceNotFound",function(){return u}),r.d(t,"ErrWebxrRequestFailed",function(){return c}),r.d(t,"ErrWebxrSessionNotSupported",function(){return l}),r.d(t,"ErrStoreKeyReserved",function(){return h}),r.d(t,"ErrStoreValueInvalid",function(){return d}),r.d(t,"ErrStoreValueMissing",function(){return f}),r.d(t,"ErrStoreInvalid",function(){return m}),r.d(t,"ErrHTTPRequest",function(){return p}),r.d(t,"ErrHTTPStatus",function(){return v}),r.d(t,"ErrBinaryFormat",function(){return _}),r.d(t,"ErrBinaryReaderReadError",function(){return E}),r.d(t,"ErrBinaryObjectTypeNotFound",function(){return S}),r.d(t,"ErrGeometryMeshMissingParticleElement",function(){return T}),r.d(t,"ErrGeometryMeshElementComponentsMissing",function(){return g}),r.d(t,"ErrGeometryMeshAreaMissing",function(){return R}),r.d(t,"ErrGeometryMeshBoneNameInvalid",function(){return b}),r.d(t,"ErrGeometryMeshEffectBinding",function(){return A}),r.d(t,"ErrGeometryFileType",function(){return y}),r.d(t,"ErrResourcePrefixUnregistered",function(){return j}),r.d(t,"ErrResourcePrefixUndefined",function(){return w}),r.d(t,"ErrResourceExtensionUnregistered",function(){return C}),r.d(t,"ErrResourceExtensionUndefined",function(){return D}),r.d(t,"ErrResourceFormat",function(){return L}),r.d(t,"ErrShaderVersion",function(){return P}),r.d(t,"ErrShaderHeaderSize",function(){return x}),r.d(t,"ErrShaderPermutationValue",function(){return O}),r.d(t,"ErrShaderCompile",function(){return I}),r.d(t,"ErrShaderLink",function(){return M}),r.d(t,"ErrDeclarationValueType",function(){return F}),r.d(t,"ErrSingletonInstantiation",function(){return G}),r.d(t,"ErrAbstractClassMethod",function(){return N}),r.d(t,"ErrFeatureNotImplemented",function(){return B}),r.d(t,"ErrIndexBounds",function(){return U}),r.d(t,"ErrBindingValueUndefined",function(){return V}),r.d(t,"ErrBindingType",function(){return k}),r.d(t,"ErrBindingReference",function(){return H}),r.d(t,"ErrSOFHullNotFound",function(){return q}),r.d(t,"ErrSOFFactionNotFound",function(){return z}),r.d(t,"ErrSOFRaceNotFound",function(){return W}),r.d(t,"ErrSOFMaterialNotFound",function(){return Y}),r.d(t,"ErrSOFPatternNotFound",function(){return X}),r.d(t,"ErrWrapped",function(){return K});var n=r("./global/util/index.js");const s=Object(n.isFunction)(Error.captureStackTrace);class i extends Error{constructor(e={},t="Undefined error"){let r=t;"string"==typeof e?(r=e,e={}):e.message&&(r=e.message,delete e.message),super(),this.message=Object(n.template)(r,e),this.name=this.constructor.name,this.data=e,s?Error.captureStackTrace(this,i):this.stack=new Error(this.message).stack}emitOn(e,t="error"){return e&&e.emit&&e.emit(t,this),this}}i.__category="error";class a extends i{constructor(e){super(e,"Unable to create webgl context (%version%)")}}class o extends i{constructor(e){super(e,"Webxr not supported")}}class u extends i{constructor(e){super(e,"Webxr device not found")}}class c extends i{constructor(e){super(e,"Webxr request failed (%err%)")}}class l extends i{constructor(e){super(e,"Webxr session not supported (%err%)")}}class h extends i{constructor(e){super(e,"Reserved key for '%store%' store (%key%)")}}class d extends i{constructor(e){super(e,"Invalid value for '%store%' store key (%key%)")}}class f extends i{constructor(e){super(e,"Missing '%store%' store key (%key%)")}}class m extends i{constructor(e){super(e,"Invalid store")}}class p extends i{constructor(e){super(e,"Communication error while requesting resource")}}class v extends i{constructor(e){super(e,"%statusText=Communication status error while loading resource% (%status%)")}}class _ extends i{constructor(e){super(e,"Invalid binary format (%formatError=undefined%)")}}class E extends i{constructor(e){super(e,"Error reading binary (%readError=undefined%)")}}class S extends i{constructor(e){super(e,"Binary object type not found (%type%)")}}class T extends i{constructor(e){super(e,"Input geometry mesh lacks element required by particle system")}}class g extends i{constructor(e){super(e,"Input geometry mesh elements do not have the required number of components")}}class R extends i{constructor(e){super(e,"Geometry mesh missing expected area at index %areaIndex%")}}class b extends i{constructor(e){super(e,"Geometry mesh has invalid bone name for model")}}class A extends i{constructor(e){super(e,"Error binding geometry mesh to effect")}}class y extends i{constructor(e){super(e,"Invalid geometry file type (%fileType%)")}}class j extends i{constructor(e){super(e,"Unregistered resource prefix (%prefix%)")}}class w extends i{constructor(e){super(e,"Undefined resource prefix")}}class C extends i{constructor(e){super(e,"Unregistered resource extension (%extension%)")}}class D extends i{constructor(e){super(e,"Undefined resource extension")}}class L extends i{constructor(e){super(e,"Invalid resource format")}}class P extends i{constructor(e){super(e,"Invalid version of effect file (%version%)")}}class x extends i{constructor(e){super(e,"Effect file contains no compiled effects")}}class O extends i{constructor(e){super(e,"Invalid shader permutation value")}}class I extends i{constructor(e){super(e,"Error compiling %shaderType% shader (%infoLog%)")}}class M extends i{constructor(e){super(e,"Error linking shaders")}}class F extends i{constructor(e){super(e,"Invalid declaration value type (%declaration%:%valueType%)")}}class G extends i{constructor(e){super(e,"Multiple class instantiations not yet supported: (%class%)")}}class N extends i{constructor(e){super(e,"Abstract class method not implemented directly on child class")}}class B extends i{constructor(e){super(e,"%feature=Feature% not implemented")}}class U extends i{constructor(e){super(e,"Array index out of bounds")}}class V extends i{constructor(e){super(e,"Error binding '%name=unknown%', %object% property is undefined (%property%)")}}class k extends i{constructor(e){super(e,"Error binding '%name=unknown%', cannot identify binding type")}}class H extends i{constructor(e){super(e,"Error binding '%name=unknown%', could not find %object% object reference")}}class q extends i{constructor(e){super(e,"SOF Hull not found: '%name%'")}}class z extends i{constructor(e){super(e,"SOF Faction not found: '%name%'")}}class W extends i{constructor(e){super(e,"SOF Race not found: '%name%'")}}class Y extends i{constructor(e){super(e,"SOF Material not found: '%name%'")}}class X extends i{constructor(e){super(e,"SOF Pattern not found: '%name%'")}}class K extends i{constructor(e){super(e,"Invalid wrapped object(s) (%reason%)")}}},"./core/Tw2Frustum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Frustum",function(){return s});var n=r("./global/index.js");class s{constructor(){this.planes=[n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create()],this.viewPos=n.vec3.create(),this.viewDir=n.vec3.create(),this.halfWidthProjection=1}Initialize(e,t,r,i,a){const o=s.global.mat4_0,u=i||n.mat4.invert(o,e);this.viewPos.set(u.subarray(12,14)),this.viewDir.set(u.subarray(8,10)),this.halfWidthProjection=t[0]*r*.5;const c=a||n.mat4.multiply(o,t,e);this.planes[0][0]=c[2],this.planes[0][1]=c[6],this.planes[0][2]=c[10],this.planes[0][3]=c[14],this.planes[1][0]=c[3]+c[0],this.planes[1][1]=c[7]+c[4],this.planes[1][2]=c[11]+c[8],this.planes[1][3]=c[15]+c[12],this.planes[2][0]=c[3]-c[1],this.planes[2][1]=c[7]-c[5],this.planes[2][2]=c[11]-c[9],this.planes[2][3]=c[15]-c[13],this.planes[3][0]=c[3]-c[0],this.planes[3][1]=c[7]-c[4],this.planes[3][2]=c[11]-c[8],this.planes[3][3]=c[15]-c[12],this.planes[4][0]=c[3]+c[1],this.planes[4][1]=c[7]+c[5],this.planes[4][2]=c[11]+c[9],this.planes[4][3]=c[15]+c[13],this.planes[5][0]=c[3]-c[2],this.planes[5][1]=c[7]-c[6],this.planes[5][2]=c[11]-c[10],this.planes[5][3]=c[15]-c[14];for(let e=0;e<6;++e){let t=n.vec3.length(this.planes[e]);this.planes[e][0]/=t,this.planes[e][1]/=t,this.planes[e][2]/=t,this.planes[e][3]/=t}}IsSphereVisible(e,t){for(let r=0;r<6;++r)if(this.planes[r][0]*e[0]+this.planes[r][1]*e[1]+this.planes[r][2]*e[2]+this.planes[r][3]<-t)return!1;return!0}GetPixelSizeAcross(e,t){const r=n.vec3.subtract(s.global.vec3_0,this.viewPos,e);let i=n.vec3.dot(this.viewDir,r);return i<1e-5&&(i=1e-5),t<1e-5?0:t/i*this.halfWidthProjection*2}}s.global={vec3_0:n.vec3.create(),mat4_0:n.mat4.create()}},"./core/Tw2RenderTarget.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderTarget",function(){return i});var n=r("./global/index.js"),s=r("./core/resource/Tw2TextureRes.js");class i{constructor(){this._id=n.util.generateID(),this.name="",this.texture=null,this.width=null,this.height=null,this.hasDepth=null,this._frameBuffer=null,this._renderBuffer=null}Destroy(){const e=n.device.gl;this.texture&&(e.deleteTexture(this.texture.texture),this.texture=null),this._renderBuffer&&(e.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null),this._frameBuffer&&(e.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null)}Create(e,t,r){const i=n.device.gl;this.Destroy(),this.texture=new s.Tw2TextureRes,this.texture.Attach(i.createTexture()),this._frameBuffer=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,this._frameBuffer),i.bindTexture(i.TEXTURE_2D,this.texture.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.bindTexture(i.TEXTURE_2D,null),this._renderBuffer=null,r&&(this._renderBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this._renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e,t)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture.texture,0),r&&i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,this._renderBuffer),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.texture.width=this.width=e,this.texture.height=this.height=t,this.hasDepth=r}Set(){n.device.gl.bindFramebuffer(n.device.gl.FRAMEBUFFER,this._frameBuffer),n.device.gl.viewport(0,0,this.width,this.height)}Unset(){n.device.gl.bindFramebuffer(n.device.gl.FRAMEBUFFER,null),n.device.gl.viewport(0,0,n.device.viewportWidth,n.device.viewportHeight)}}},"./core/batch/Tw2BatchAccumulator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BatchAccumulator",function(){return s});var n=r("./global/index.js");class s{constructor(e=null){this.batches=[],this._sortMethod=null,this._sortMethod=e}get length(){return this.batches.length}Commit(e){this.batches.push(e)}Clear(){this.batches=[]}Render(e="Main"){this._sortMethod&&this.batches.sort(this._sortMethod);for(let t=0;t<this.batches.length;++t)this.batches[t]instanceof s?this.batches[t].Render(e):(this.batches[t].renderMode!==n.device.RM_ANY&&n.device.SetStandardStates(this.batches[t].renderMode),n.device.perObjectData=this.batches[t].perObjectData,this.batches[t].Commit(e))}}},"./core/batch/Tw2ForwardingRenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ForwardingRenderBatch",function(){return s});var n=r("./core/batch/Tw2RenderBatch.js");class s extends n.Tw2RenderBatch{constructor(...e){super(...e),this.geometryProvider=null}Commit(e){this.geometryProvider&&this.geometryProvider.Render(this,e)}}},"./core/batch/Tw2GeometryBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBatch",function(){return s});var n=r("./core/batch/Tw2RenderBatch.js");class s extends n.Tw2RenderBatch{constructor(...e){super(...e),this.geometryRes=null,this.meshIx=0,this.start=0,this.count=1,this.effect=null}Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2GeometryLineBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryLineBatch",function(){return s});var n=r("./core/batch/Tw2GeometryBatch.js");class s extends n.Tw2GeometryBatch{Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderLines(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2InstancedMeshBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMeshBatch",function(){return s});var n=r("./core/batch/Tw2GeometryBatch.js");class s extends n.Tw2GeometryBatch{constructor(...e){super(...e),this.instanceMesh=null}Commit(e){this.instanceMesh&&this.effect&&this.instanceMesh.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2RenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderBatch",function(){return s});var n=r("./global/index.js");class s{constructor(){this.renderMode=n.RM_ANY,this.perObjectData=null}Commit(e){}}},"./core/batch/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/Tw2BatchAccumulator.js");r.d(t,"Tw2BatchAccumulator",function(){return n.Tw2BatchAccumulator});var s=r("./core/batch/Tw2ForwardingRenderBatch.js");r.d(t,"Tw2ForwardingRenderBatch",function(){return s.Tw2ForwardingRenderBatch});var i=r("./core/batch/Tw2GeometryBatch.js");r.d(t,"Tw2GeometryBatch",function(){return i.Tw2GeometryBatch});var a=r("./core/batch/Tw2GeometryLineBatch.js");r.d(t,"Tw2GeometryLineBatch",function(){return a.Tw2GeometryLineBatch});var o=r("./core/batch/Tw2RenderBatch.js");r.d(t,"Tw2RenderBatch",function(){return o.Tw2RenderBatch});var u=r("./core/batch/Tw2InstancedMeshBatch.js");r.d(t,"Tw2InstancedMeshBatch",function(){return u.Tw2InstancedMeshBatch})},"./core/data/Tw2PerObjectData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerObjectData",function(){return s});var n=r("./core/data/Tw2RawData.js");class s{constructor(){this.vs=null,this.ps=null,this.ffe=null}static from(e,t){const r=new s;return e&&(e.ps&&(r.ps=n.Tw2RawData.from(e.ps,t)),e.vs&&(r.vs=n.Tw2RawData.from(e.vs,t)),e.ffe&&(r.ffe=n.Tw2RawData.from(e.ffe,t))),r}}},"./core/data/Tw2RawData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RawData",function(){return s});var n=r("./core/Tw2Error.js");class s{constructor(){this.data=null,this.elements={},this._nextOffset=0}Has(e){return e in this.elements}Set(e,t){const r=this.elements[e];for(let e=0;e<r.size;e++)this.data[e+r.offset]=t[e]}SetIndex(e,t,r){const s=this.elements[e];if(t<0||t>=s.size)throw new n.ErrIndexBounds;this.data[t+s.offset]=r}Get(e){return this.elements[e].array}Declare(e,t){let r="number"!=typeof t,n=r?t.length:t,s=r?t:null;this.elements[e]={offset:this._nextOffset,array:null,size:n,value:s},this._nextOffset+=n}Create(){this.data=new Float32Array(this._nextOffset);for(let e in this.elements)if(this.elements.hasOwnProperty(e)){const t=this.elements[e];if(t.array=this.data.subarray(t.offset,t.offset+t.size),t.value){for(let e=0;e<t.size;e++)t.array[e]=t.value[e];Reflect.deleteProperty(t,"value")}}}static from(e,t){const r=new s;if(e){for(let t=0;t<e.length;t++)r.Declare(e[t][0],e[t][1]);t&&t.skipUpdate||r.Create()}return r}}},"./core/data/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/data/Tw2PerObjectData.js");r.d(t,"Tw2PerObjectData",function(){return n.Tw2PerObjectData});var s=r("./core/data/Tw2RawData.js");r.d(t,"Tw2RawData",function(){return s.Tw2RawData})},"./core/geometry/Tw2BlendShapeData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlendShapeData",function(){return s});var n=r("./core/vertex/index.js");class s{constructor(){this.name="",this.declaration=new n.Tw2VertexDeclaration,this.buffers=[],this.indexes=null,this.weightProxy=null}}},"./core/geometry/Tw2GeometryAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryAnimation",function(){return n});class n{constructor(){this.name="",this.duration=0,this.trackGroups=[]}}},"./core/geometry/Tw2GeometryBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBone",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.parentIndex=-1,this.position=n.vec3.create(),this.orientation=n.quat.create(),this.scaleShear=n.mat3.create(),this.localTransform=n.mat4.create(),this.worldTransform=n.mat4.create(),this.worldTransformInv=n.mat4.create()}UpdateTransform(){n.mat4.fromMat3(this.localTransform,this.scaleShear),n.quat.normalize(this.orientation,this.orientation);let e=n.mat4.fromQuat(s.global.mat4_0,this.orientation);return n.mat4.multiply(this.localTransform,this.localTransform,e),this.localTransform[12]=this.position[0],this.localTransform[13]=this.position[1],this.localTransform[14]=this.position[2],this.localTransform}}s.global={mat4_0:n.mat4.create()}},"./core/geometry/Tw2GeometryCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryCurve",function(){return n});class n{constructor(){this.dimension=0,this.degree=0,this.knots=null,this.controls=null}}},"./core/geometry/Tw2GeometryMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMesh",function(){return a});var n=r("./global/index.js"),s=r("./core/vertex/index.js"),i=r("./global/util/index.js");r("./core/geometry/Tw2GeometryMeshArea.js");class a{constructor(){this.name="",this.declaration=new s.Tw2VertexDeclaration,this.areas=[],this.buffer=null,this.bufferLength=0,this.bufferData=null,this.indexes=null,this.indexData=null,this.indexType=0,this.minBounds=n.vec3.fromValues(0,0,0),this.maxBounds=n.vec3.fromValues(0,0,0),this.boundsSpherePosition=n.vec3.create(),this.boundsSphereRadius=0,this.bones=[],this.boneBindings=[],this._faces=0,this._vertices=0,this._areas=0}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){const t=this.minBounds,r=this.maxBounds;n.box3.bounds.empty(t,r);for(let s=0;s<this.areas.length;s++){const i=this.areas[s];this.RebuildAreaBounds(i,this.bufferData,this.indexData,e),n.box3.bounds.union(t,r,t,r,i.minBounds,i.maxBounds)}this.boundsSphereRadius=n.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}RebuildAreaBounds(e,t,r,s){if(!s||!t||!r)return!1;const i=this.declaration.FindUsage(0,0);if(!i)return!1;const o=this.declaration.stride/4,u=i.offset,c=a.GetBoundsFromVertices(n.box3.create(),e.start,e.count,o,u,t,r);return n.box3.toObjectBounds(c,e),n.box3.toObjectPositionRadius(c,e),!0}static GetFaceVertexIndices(e,t,r){if(t>=r.length/3)throw new Error("Invalid index: "+t);for(let n=0;n<3;n++)e[n]=r[3*t+n];return e}static GetVertexPosition(e,t,r,s,a){if(!Object(i.isNumber)(t)||t>a.length/r)throw new Error("Invalid vertex index: "+t);const o=t*r;return n.vec3.set(e,a[o+s],a[o+s+1],a[o+s+2])}static GetBoundsFromVertices(e,t,r,s,i,a,o){r/=3,t=t/2/3;const u=[],c=n.vec3.create(),l=n.vec3.create();n.box3.empty(e);for(let h=0;h<r;h++){this.GetFaceVertexIndices(c,h+t,o);for(let t=0;t<3;t++)u.includes(c[t])||(u.push(c[t]),this.GetVertexPosition(l,c[t],s,i,a),n.box3.addPoint(e,e,l))}return e}}},"./core/geometry/Tw2GeometryMeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshArea",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.start=0,this.count=0,this.minBounds=n.vec3.fromValues(0,0,0),this.maxBounds=n.vec3.fromValues(0,0,0),this.boundsSpherePosition=n.vec3.create(),this.boundsSphereRadius=0}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}}},"./core/geometry/Tw2GeometryMeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshBinding",function(){return n});class n{constructor(){this.mesh=null,this.bones=[]}}},"./core/geometry/Tw2GeometryModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryModel",function(){return n});class n{constructor(){this.name="",this.meshBindings=[],this.skeleton=null}FindBoneByName(e){if(!this.skeleton)return null;for(let t=0;t<this.skeleton.bones.length;++t)if(this.skeleton.bones[t].name===e)return this.skeleton.bones[t];return null}}},"./core/geometry/Tw2GeometrySkeleton.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometrySkeleton",function(){return n});class n{constructor(){this.bones=[]}}},"./core/geometry/Tw2GeometryTrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTrackGroup",function(){return n});class n{constructor(){this.name="",this.model=null,this.transformTracks=[]}}},"./core/geometry/Tw2GeometryTransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryTransformTrack",function(){return n});class n{constructor(){this.name="",this.position=null,this.orientation=null,this.scaleShear=null}}},"./core/geometry/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/geometry/Tw2BlendShapeData.js");r.d(t,"Tw2BlendShapeData",function(){return n.Tw2BlendShapeData});var s=r("./core/geometry/Tw2GeometryAnimation.js");r.d(t,"Tw2GeometryAnimation",function(){return s.Tw2GeometryAnimation});var i=r("./core/geometry/Tw2GeometryBone.js");r.d(t,"Tw2GeometryBone",function(){return i.Tw2GeometryBone});var a=r("./core/geometry/Tw2GeometryCurve.js");r.d(t,"Tw2GeometryCurve",function(){return a.Tw2GeometryCurve});var o=r("./core/geometry/Tw2GeometryMesh.js");r.d(t,"Tw2GeometryMesh",function(){return o.Tw2GeometryMesh});var u=r("./core/geometry/Tw2GeometryMeshArea.js");r.d(t,"Tw2GeometryMeshArea",function(){return u.Tw2GeometryMeshArea});var c=r("./core/geometry/Tw2GeometryMeshBinding.js");r.d(t,"Tw2GeometryMeshBinding",function(){return c.Tw2GeometryMeshBinding});var l=r("./core/geometry/Tw2GeometryModel.js");r.d(t,"Tw2GeometryModel",function(){return l.Tw2GeometryModel});var h=r("./core/geometry/Tw2GeometrySkeleton.js");r.d(t,"Tw2GeometrySkeleton",function(){return h.Tw2GeometrySkeleton});var d=r("./core/geometry/Tw2GeometryTrackGroup.js");r.d(t,"Tw2GeometryTrackGroup",function(){return d.Tw2GeometryTrackGroup});var f=r("./core/geometry/Tw2GeometryTransformTrack.js");r.d(t,"Tw2GeometryTransformTrack",function(){return f.Tw2GeometryTransformTrack})},"./core/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/index.js");r.d(t,"Tw2BatchAccumulator",function(){return n.Tw2BatchAccumulator}),r.d(t,"Tw2ForwardingRenderBatch",function(){return n.Tw2ForwardingRenderBatch}),r.d(t,"Tw2GeometryBatch",function(){return n.Tw2GeometryBatch}),r.d(t,"Tw2GeometryLineBatch",function(){return n.Tw2GeometryLineBatch}),r.d(t,"Tw2RenderBatch",function(){return n.Tw2RenderBatch}),r.d(t,"Tw2InstancedMeshBatch",function(){return n.Tw2InstancedMeshBatch});var s=r("./core/data/index.js");r.d(t,"Tw2PerObjectData",function(){return s.Tw2PerObjectData}),r.d(t,"Tw2RawData",function(){return s.Tw2RawData});var i=r("./core/geometry/index.js");r.d(t,"Tw2BlendShapeData",function(){return i.Tw2BlendShapeData}),r.d(t,"Tw2GeometryAnimation",function(){return i.Tw2GeometryAnimation}),r.d(t,"Tw2GeometryBone",function(){return i.Tw2GeometryBone}),r.d(t,"Tw2GeometryCurve",function(){return i.Tw2GeometryCurve}),r.d(t,"Tw2GeometryMesh",function(){return i.Tw2GeometryMesh}),r.d(t,"Tw2GeometryMeshArea",function(){return i.Tw2GeometryMeshArea}),r.d(t,"Tw2GeometryMeshBinding",function(){return i.Tw2GeometryMeshBinding}),r.d(t,"Tw2GeometryModel",function(){return i.Tw2GeometryModel}),r.d(t,"Tw2GeometrySkeleton",function(){return i.Tw2GeometrySkeleton}),r.d(t,"Tw2GeometryTrackGroup",function(){return i.Tw2GeometryTrackGroup}),r.d(t,"Tw2GeometryTransformTrack",function(){return i.Tw2GeometryTransformTrack});var a=r("./core/lighting/index.js");r.d(t,"Tr2PointLight",function(){return a.Tr2PointLight}),r.d(t,"Tr2ShLightingManager",function(){return a.Tr2ShLightingManager});var o=r("./core/mesh/index.js");r.d(t,"Tr2MeshLod",function(){return o.Tr2MeshLod}),r.d(t,"Tw2Effect",function(){return o.Tw2Effect}),r.d(t,"Tw2InstancedMesh",function(){return o.Tw2InstancedMesh}),r.d(t,"Tw2Mesh",function(){return o.Tw2Mesh}),r.d(t,"Tw2MeshArea",function(){return o.Tw2MeshArea}),r.d(t,"Tw2MeshLineArea",function(){return o.Tw2MeshLineArea});var u=r("./core/model/index.js");r.d(t,"Tw2Animation",function(){return u.Tw2Animation}),r.d(t,"Tw2AnimationController",function(){return u.Tw2AnimationController}),r.d(t,"Tw2Bone",function(){return u.Tw2Bone}),r.d(t,"Tw2BoneBinding",function(){return u.Tw2BoneBinding}),r.d(t,"Tw2MeshBinding",function(){return u.Tw2MeshBinding}),r.d(t,"Tw2Model",function(){return u.Tw2Model}),r.d(t,"Tw2Track",function(){return u.Tw2Track}),r.d(t,"Tw2TrackGroup",function(){return u.Tw2TrackGroup});var c=r("./core/parameter/index.js");r.d(t,"Tw2Parameter",function(){return c.Tw2Parameter}),r.d(t,"Tw2FloatParameter",function(){return c.Tw2FloatParameter}),r.d(t,"Tw2Matrix4Parameter",function(){return c.Tw2Matrix4Parameter}),r.d(t,"Tw2MatrixParameter",function(){return c.Tw2MatrixParameter}),r.d(t,"Tw2TransformParameter",function(){return c.Tw2TransformParameter}),r.d(t,"Tw2VariableParameter",function(){return c.Tw2VariableParameter}),r.d(t,"Tw2Vector2Parameter",function(){return c.Tw2Vector2Parameter}),r.d(t,"Tw2Vector3Parameter",function(){return c.Tw2Vector3Parameter}),r.d(t,"Tw2Vector4Parameter",function(){return c.Tw2Vector4Parameter}),r.d(t,"Tw2TextureParameter",function(){return c.Tw2TextureParameter});var l=r("./core/post/index.js");r.d(t,"Tw2PostEffect",function(){return l.Tw2PostEffect}),r.d(t,"Tw2PostEffectManager",function(){return l.Tw2PostEffectManager}),r.d(t,"Tw2PostEffectStep",function(){return l.Tw2PostEffectStep}),r.d(t,"Tr2PostProcess",function(){return l.Tr2PostProcess});var h=r("./core/reader/index.js");r.d(t,"Tw2BinaryReader",function(){return h.Tw2BinaryReader}),r.d(t,"Tw2BlackReader",function(){return h.Tw2BlackReader}),r.d(t,"Tw2ObjectReader",function(){return h.Tw2ObjectReader});var d=r("./core/resource/index.js");r.d(t,"Tw2TextureRes",function(){return d.Tw2TextureRes}),r.d(t,"Tw2EffectRes",function(){return d.Tw2EffectRes}),r.d(t,"Tw2GeometryRes",function(){return d.Tw2GeometryRes}),r.d(t,"Tw2LoadingObject",function(){return d.Tw2LoadingObject}),r.d(t,"Tw2LodResource",function(){return d.Tw2LodResource}),r.d(t,"Tw2Resource",function(){return d.Tw2Resource}),r.d(t,"Tw2Shader",function(){return d.Tw2Shader}),r.d(t,"Tw2VideoRes",function(){return d.Tw2VideoRes});var f=r("./core/sampler/index.js");r.d(t,"Tw2SamplerState",function(){return f.Tw2SamplerState}),r.d(t,"Tw2SamplerOverride",function(){return f.Tw2SamplerOverride});var m=r("./core/value/index.js");r.d(t,"Tw2Float",function(){return m.Tw2Float}),r.d(t,"TriMatrix",function(){return m.TriMatrix});var p=r("./core/vertex/index.js");r.d(t,"Tw2VertexDeclaration",function(){return p.Tw2VertexDeclaration}),r.d(t,"Tw2VertexElement",function(){return p.Tw2VertexElement});var v=r("./core/Tr2DistanceTracker.js");r.d(t,"Tr2DistanceTracker",function(){return v.Tr2DistanceTracker});var _=r("./core/Tr2RuntimeInstanceData.js");r.d(t,"Tr2RuntimeInstanceData",function(){return _.Tr2RuntimeInstanceData});var E=r("./core/TriObserverLocal.js");r.d(t,"TriObserverLocal",function(){return E.TriObserverLocal});var S=r("./core/Tw2Error.js");r.d(t,"Tw2Error",function(){return S.Tw2Error}),r.d(t,"ErrWebglContext",function(){return S.ErrWebglContext}),r.d(t,"ErrWebxrNotSupported",function(){return S.ErrWebxrNotSupported}),r.d(t,"ErrWebxrDeviceNotFound",function(){return S.ErrWebxrDeviceNotFound}),r.d(t,"ErrWebxrRequestFailed",function(){return S.ErrWebxrRequestFailed}),r.d(t,"ErrWebxrSessionNotSupported",function(){return S.ErrWebxrSessionNotSupported}),r.d(t,"ErrStoreKeyReserved",function(){return S.ErrStoreKeyReserved}),r.d(t,"ErrStoreValueInvalid",function(){return S.ErrStoreValueInvalid}),r.d(t,"ErrStoreValueMissing",function(){return S.ErrStoreValueMissing}),r.d(t,"ErrStoreInvalid",function(){return S.ErrStoreInvalid}),r.d(t,"ErrHTTPRequest",function(){return S.ErrHTTPRequest}),r.d(t,"ErrHTTPStatus",function(){return S.ErrHTTPStatus}),r.d(t,"ErrBinaryFormat",function(){return S.ErrBinaryFormat}),r.d(t,"ErrBinaryReaderReadError",function(){return S.ErrBinaryReaderReadError}),r.d(t,"ErrBinaryObjectTypeNotFound",function(){return S.ErrBinaryObjectTypeNotFound}),r.d(t,"ErrGeometryMeshMissingParticleElement",function(){return S.ErrGeometryMeshMissingParticleElement}),r.d(t,"ErrGeometryMeshElementComponentsMissing",function(){return S.ErrGeometryMeshElementComponentsMissing}),r.d(t,"ErrGeometryMeshAreaMissing",function(){return S.ErrGeometryMeshAreaMissing}),r.d(t,"ErrGeometryMeshBoneNameInvalid",function(){return S.ErrGeometryMeshBoneNameInvalid}),r.d(t,"ErrGeometryMeshEffectBinding",function(){return S.ErrGeometryMeshEffectBinding}),r.d(t,"ErrGeometryFileType",function(){return S.ErrGeometryFileType}),r.d(t,"ErrResourcePrefixUnregistered",function(){return S.ErrResourcePrefixUnregistered}),r.d(t,"ErrResourcePrefixUndefined",function(){return S.ErrResourcePrefixUndefined}),r.d(t,"ErrResourceExtensionUnregistered",function(){return S.ErrResourceExtensionUnregistered}),r.d(t,"ErrResourceExtensionUndefined",function(){return S.ErrResourceExtensionUndefined}),r.d(t,"ErrResourceFormat",function(){return S.ErrResourceFormat}),r.d(t,"ErrShaderVersion",function(){return S.ErrShaderVersion}),r.d(t,"ErrShaderHeaderSize",function(){return S.ErrShaderHeaderSize}),r.d(t,"ErrShaderPermutationValue",function(){return S.ErrShaderPermutationValue}),r.d(t,"ErrShaderCompile",function(){return S.ErrShaderCompile}),r.d(t,"ErrShaderLink",function(){return S.ErrShaderLink}),r.d(t,"ErrDeclarationValueType",function(){return S.ErrDeclarationValueType}),r.d(t,"ErrSingletonInstantiation",function(){return S.ErrSingletonInstantiation}),r.d(t,"ErrAbstractClassMethod",function(){return S.ErrAbstractClassMethod}),r.d(t,"ErrFeatureNotImplemented",function(){return S.ErrFeatureNotImplemented}),r.d(t,"ErrIndexBounds",function(){return S.ErrIndexBounds}),r.d(t,"ErrBindingValueUndefined",function(){return S.ErrBindingValueUndefined}),r.d(t,"ErrBindingType",function(){return S.ErrBindingType}),r.d(t,"ErrBindingReference",function(){return S.ErrBindingReference}),r.d(t,"ErrSOFHullNotFound",function(){return S.ErrSOFHullNotFound}),r.d(t,"ErrSOFFactionNotFound",function(){return S.ErrSOFFactionNotFound}),r.d(t,"ErrSOFRaceNotFound",function(){return S.ErrSOFRaceNotFound}),r.d(t,"ErrSOFMaterialNotFound",function(){return S.ErrSOFMaterialNotFound}),r.d(t,"ErrSOFPatternNotFound",function(){return S.ErrSOFPatternNotFound}),r.d(t,"ErrWrapped",function(){return S.ErrWrapped});var T=r("./core/Tw2Frustum.js");r.d(t,"Tw2Frustum",function(){return T.Tw2Frustum});var g=r("./core/Tw2RenderTarget.js");r.d(t,"Tw2RenderTarget",function(){return g.Tw2RenderTarget})},"./core/lighting/Tr2PointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PointLight",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.brightness=0,this.color=n.vec4.create(),this.innerRadius=0,this.noiseAmplitude=0,this.noiseFrequency=0,this.noiseOctaves=0,this.position=n.vec3.create(),this.radius=0}static black(e){return[["name",e.string],["brightness",e.float],["color",e.vector4],["innerRadius",e.float],["noiseAmplitude",e.float],["noiseFrequency",e.float],["noiseOctaves",e.float],["position",e.vector3],["radius",e.float]]}}s.__isStaging=4},"./core/lighting/Tr2ShLightingManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ShLightingManager",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.primaryIntensity=0,this.secondaryIntensity=0}static black(e){return[["primaryIntensity",e.float],["secondaryIntensity",e.float]]}}s.__isStaging=4},"./core/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/lighting/Tr2PointLight.js");r.d(t,"Tr2PointLight",function(){return n.Tr2PointLight});var s=r("./core/lighting/Tr2ShLightingManager.js");r.d(t,"Tr2ShLightingManager",function(){return s.Tr2ShLightingManager})},"./core/mesh/Tr2MeshLod.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2MeshLod",function(){return i});var n=r("./global/index.js"),s=r("./global/engine/index.js");class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.additiveAreas=[],this.associatedResources=[],this.decalAreas=[],this.depthAreas=[],this.distortionAreas=[],this.geometryRes=null,this.opaqueAreas=[],this.pickableAreas=[],this.transparentAreas=[],this.display=!0,this.geometryResource=null,this.visible={opaqueAreas:!0,transparentAreas:!0,additiveAreas:!0,pickableAreas:!0,distortionAreas:!0,decalAreas:!0,depthAreas:!0}}Initialize(){}OnResPrepared(e){this.geometryResource=e}IsGood(){return this.geometryResource&&this.geometryResource.IsGood()}GetResources(e=[]){for(let t=0;t<this.associatedResources;t++)e[t]&&!e.includes(this.associatedResources[t])&&e.push(this.associatedResources[t]);return n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case s.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case s.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_DEPTH:case s.RM_DISTORTION:return;case s.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case s.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static GetAreaBatches(e,t,r,n,s){for(let i=0;i<t.length;++i){const a=t[i];if(a.effect&&a.display){const t=new a.constructor.batchType;t.renderMode=r,t.perObjectData=s,t.geometryRes=e.geometryResource,t.meshIx=0,t.start=a.index,t.count=a.count,t.effect=a.effect,n.Commit(t)}}}static black(e){return[["additiveAreas",e.array],["associatedResources",e.array],["decalAreas",e.array],["depthAreas",e.array],["distortionAreas",e.array],["geometryRes",e.object],["opaqueAreas",e.array],["pickableAreas",e.array],["transparentAreas",e.array]]}}i.__isStaging=3},"./core/mesh/Tw2Effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Effect",function(){return o});var n=r("./global/index.js"),s=r("./core/parameter/Tw2TextureParameter.js"),i=r("./core/Tw2Error.js"),a=r("./core/parameter/index.js");class o extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.effectFilePath="",this.effectRes=null,this.parameters={},this.techniques={},this.samplerOverrides={},this.options={},this.shader=null,this.autoParameter=!1}Initialize(){if(""!==this.effectFilePath){this.effectFilePath=this.effectFilePath.toLowerCase();const e=o.ToEffectResPath(this.effectFilePath);this.effectRes=n.resMan.GetResource(e,e=>this.OnResPrepared(e))}}OnValueChanged(e){this.BindParameters()}IsGood(){return this.KeepAlive(),null!==this.shader}KeepAlive(){const e=this.GetResources();for(let t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(e=[]){this.effectRes&&!e.includes(this.effectRes)&&e.push(this.effectRes);for(let t in this.parameters)this.parameters.hasOwnProperty(t)&&"GetResources"in this.parameters[t]&&this.parameters[t].GetResources(e);return e}OnResPrepared(e){return this.shader=e.GetShader(this.options),this.BindParameters(),!0}UnBindParameters(){for(let e in this.techniques)if(this.techniques.hasOwnProperty(e)){let t=this.techniques[e];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].stages.length;++r)for(let n=0;n<t[e].stages[r].reroutedParameters.length;++n)t[e].stages[r].reroutedParameters[n].Unbind()}this.techniques={}}BindParameters(){if(this.UnBindParameters(),!this.IsGood())return!1;for(let e in this.shader.techniques)if(this.shader.techniques.hasOwnProperty(e)){let t=this.shader.techniques[e],r=[];for(let e=0;e<t.passes.length;++e){const i=[];i.stages=[];for(let r=0;r<t.passes[e].stages.length;++r){const a=t.passes[e].stages[r],u={};u.constantBuffer=new Float32Array(a.constantSize),u.reroutedParameters=[],u.parameters=[],u.textures=[],u.constantBuffer.set(a.constantValues);for(let e=0;e<a.constants.length;++e){const t=a.constants[e],r=t.name,s=t.Type;if(!o.ConstantIgnore.includes(r))if(r in this.parameters){const e=this.parameters[r];e.Bind(u.constantBuffer,t.offset,t.size)?u.reroutedParameters.push(e):u.parameters.push({parameter:e,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size})}else if(n.tw2.HasVariable(r))u.parameters.push({parameter:n.tw2.GetVariable(r),constantBuffer:u.constantBuffer,offset:t.offset,size:t.size});else if(t.isAutoregister&&s){const e=n.tw2.CreateVariable(r,void 0,s);e&&u.parameters.push({parameter:e,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size})}else if(this.autoParameter&&1===t.elements){let e=u.constantBuffer.subarray(t.offset,t.offset+t.size);0===e.length?e=void 0:1===e.length&&(e=e[0]);const i=n.tw2.CreateVariable(r,e,s);i&&(this.parameters[r]=i,i.Bind(u.constantBuffer,t.offset,t.size)?u.reroutedParameters.push(i):u.parameter.push({parameter:i,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size}))}}for(let e=0;e<a.textures.length;++e){const t=a.textures[e].name;let i=null;if(t in this.parameters)i=this.parameters[t];else if(n.tw2.HasVariable(t))i=n.tw2.GetVariable(t);else if(a.textures[e].isAutoregister)i=n.tw2.CreateVariable(t,void 0,s.Tw2TextureParameter);else{if(!this.autoParameter)continue;i=this.parameters[t]=new s.Tw2TextureParameter(t)}const o={parameter:i,slot:a.textures[e].registerIndex,sampler:null};for(let e=0;e<a.samplers.length;++e)if(a.samplers[e].registerIndex===o.slot){a.samplers[e].name in this.samplerOverrides?o.sampler=this.samplerOverrides[a.samplers[e].name].GetSampler(n.device,a.samplers[e]):o.sampler=a.samplers[e];break}0===r&&(o.slot+=12),u.textures.push(o)}i.stages.push(u)}r.push(i)}this.techniques[e]=r}return n.device.effectObserver&&n.device.effectObserver.OnEffectChanged(this),this.autoParameter=!1,!0}ApplyPass(e,t){if(!this.IsGood()||!(e in this.techniques)||t>=this.techniques[e].length)return;this.shader.ApplyPass(e,t);const r=this.techniques[e][t],s=this.shader.techniques[e].passes[t],i=n.device,a=i.gl,o=i.IsAlphaTestEnabled()&&s.shadowShaderProgram?s.shadowShaderProgram:s.shaderProgram;for(let e=0;e<2;++e){const t=r.stages[e];for(let e=0;e<t.parameters.length;++e){let r=t.parameters[e];r.parameter.Apply(r.constantBuffer,r.offset,r.size)}for(let e=0;e<t.textures.length;++e){let r=t.textures[e];r.parameter.Apply(r.slot,r.sampler,o.volumeSlices[r.sampler.registerIndex])}}const u=o.constantBufferHandles;u[0]&&a.uniform4fv(u[0],r.stages[0].constantBuffer),u[7]&&a.uniform4fv(u[7],r.stages[1].constantBuffer),i.perFrameVSData&&u[1]&&a.uniform4fv(u[1],i.perFrameVSData.data),i.perFramePSData&&u[2]&&a.uniform4fv(u[2],i.perFramePSData.data);const c=i.perObjectData;c&&(c.vs&&u[3]&&a.uniform4fv(u[3],c.vs.data),c.ps&&u[4]&&a.uniform4fv(u[4],c.ps.data),c.ffe&&u[5]&&a.uniform4fv(u[5],c.ffe.data))}GetPassCount(e){return null!==this.shader&&e in this.techniques?this.techniques[e].length:0}GetPassInput(e,t){return null===this.shader||!(e in this.techniques)||t>=this.techniques[e].length?null:n.device.IsAlphaTestEnabled()&&this.shader.techniques[e].passes[t].shadowShaderProgram?this.shader.techniques[e].passes[t].shadowShaderProgram.input:this.shader.techniques[e].passes[t].shaderProgram.input}Render(e){const t=this.GetPassCount("Main");for(let r=0;r<t;++r)this.ApplyPass("Main",r),e(this,r)}GetTextures(e={}){for(let t in this.parameters)if(this.parameters.hasOwnProperty(t)&&this.parameters[t]instanceof s.Tw2TextureParameter){let r=this.parameters[t].GetValue();r&&(e[t]=r)}return e}SetTextures(e={},t){let r=!1;for(let t in e)if(e.hasOwnProperty(t)&&void 0!==e[t]){const n=e[t],i=this.parameters[t];s.Tw2TextureParameter.isValue(n)&&(i?i.EqualsValue(n)||(i.SetValue(n),r=!0):(this.parameters[t]=new s.Tw2TextureParameter(t,n),r=!0))}return r&&!t&&this.UpdateValues(),r}GetParameters(e={}){for(let t in this.parameters)!this.parameters.hasOwnProperty(t)||this.parameters[t]instanceof s.Tw2TextureParameter||(e[t]=this.parameters[t].GetValue());return e}SetParameters(e={},t){let r=!1;for(let t in e)if(e.hasOwnProperty(t)&&void 0!==e[t]){const s=e[t],i=this.parameters[t];if(i)i.constructor.isValue(s)&&!i.EqualsValue(s)&&this.parameters[t].SetValue(s)&&(r=!0);else{const e=n.tw2.CreateVariable(t,s);e&&(this.parameters[t]=e,r=!0)}}return r&&!t&&this.UpdateValues(),r}SetOverrides(e={},t){let r=!1;for(let t in e)if(e.hasOwnProperty(t)&&void 0!==e[t]){let n=this.parameters[t];if(n||(n=this.parameters[t]=new s.Tw2TextureParameter(t),r=!0),n instanceof s.Tw2TextureParameter){let i=!1;const a=e[t];for(let e in a)if(a.hasOwnProperty(e)&&s.Tw2TextureParameter.overrideProperties.includes(e)&&a[e]!==n[e]){i=!0;break}i&&(n.SetOverrides(e[t]),r=!0)}}return r&&!t&&this.UpdateValues(),r}GetOverrides(e={}){for(let t in this.parameters)if(this.parameters.hasOwnProperty(t)){const r=this.parameters[t];r&&r instanceof s.Tw2TextureParameter&&r.useAllOverrides&&(e[t]=this.parameters[t].GetOverrides())}return e}PopulateParameters(){return this.autoParameter=!0,this.BindParameters()}static ToEffectResPath(e){return(e=e?e.substr(0,e.lastIndexOf(".")).replace("/effect/",n.device.effectDir)+".sm_"+n.device.shaderModel:"").toLowerCase()}static FromEffectResPath(e,t="fx"){return(e=e.substr(0,e.lastIndexOf(".")).replace(n.device.effectDir,"/effect/")+"."+t).toLowerCase()}static set(e,t,r={}){if(!t)return!1;const{parameters:s,textures:i,overrides:a,options:o,effectFilePath:u=""}=t;let c=n.util.assignIfExists(e,t,["name","display","autoParameter"]);return s&&e.SetParameters(s,!0)&&(c=!0),a&&e.SetOverrides(a,!0)&&(c=!0),i&&e.SetTextures(i,!0)&&(c=!0),o&&(e.options=Object.assign(o),e.effectRes&&(e.shader=e.effectRes.GetShader(o)),c=!0),"create"===r.verb&&u&&(e.effectFilePath=u.toLowerCase()),c&&!r.skipUpdate&&e.UpdateValues(r),c}static get(e,t={}){return n.util.assignIfExists(t,e,["name","display","effectFilePath"]),t.parameters=e.GetParameters(),t.textures=e.GetTextures(),t.overrides=e.GetOverrides(),t.options=Object.assign(e.options),t}static black(e){return[["effectFilePath",e.path],["name",e.string],["parameters",e.plainFromArray("name")],["resources",e.intercept((t,r)=>{Object.assign(r.parameters,e.plainFromArray("name")(t))})],["constParameters",e.intercept((t,r)=>{const n=e.structList(u)(t);for(let e=0;e<n.length;e++)r.parameters[n[e].name]=n[e]})],["options",e=>{throw Object(i.ErrFeatureNotImplemented)({feature:"Tw2Effect options"})}],["samplerOverrides",e=>{throw Object(i.ErrFeatureNotImplemented)({feature:"Tw2Effect samplerOverrides"})}]]}}o.ConstantIgnore=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"],o.__isStaging=1;class u{static blackStruct(e){const t=new a.Tw2Vector4Parameter;return Object.defineProperty(t,"isConstant",{value:!0,writable:!1}),t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.SetValue(new Float32Array([e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32()])),t}}},"./core/mesh/Tw2InstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMesh",function(){return u});var n=r("./global/index.js"),s=r("./core/batch/index.js"),i=r("./global/engine/index.js"),a=r("./global/util/index.js"),o=(r("./core/mesh/Tw2MeshArea.js"),r("./core/mesh/Tw2Mesh.js"));class u extends n.Tw2BaseClass{constructor(...e){super(...e),this.additiveAreas=[],this.decalAreas=[],this.depthAreas=[],this.distortionAreas=[],this.geometryResPath="",this.instanceGeometryResPath="",this.instanceGeometryResource=null,this.instanceMeshIndex=0,this.maxBounds=n.vec3.create(),this.minBounds=n.vec3.create(),this.opaqueAreas=[],this.transparentAreas=[],this.name="",this.display=!0,this.geometryResource=null,this.pickableAreas=[],this.visible={additiveAreas:!0,decalAreas:!0,depthAreas:!0,distortionAreas:!0,opaqueAreas:!0,pickableAreas:!0,transparentAreas:!0}}Initialize(){""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath)),""!==this.instanceGeometryResPath&&(this.instanceGeometryResource=n.resMan.GetResource(this.instanceGeometryResPath))}IsGood(){const e=this.instanceGeometryResource,t=this.geometryResource&&this.geometryResource.IsGood(),r=!!e&&(!e.IsGood||e.IsGood());return t&&r}GetResources(e=[]){return this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),this.instanceGeometryResource&&"GetResources"in this.instanceGeometryResource&&this.instanceGeometryResource.GetResources(e),n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case i.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case i.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_DEPTH:case i.RM_DISTORTION:return;case i.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case i.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}RenderAreas(e,t,r,n,s){if(!this.IsGood())return;const i=this.instanceGeometryResource.GetInstanceBuffer(this.instanceMeshIndex);i&&this.geometryResource.RenderAreasInstanced(e,t,r,n,s,i,this.instanceGeometryResource.GetInstanceDeclaration(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceStride(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceCount(this.instanceMeshIndex))}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static from(e,t){const r=new u;if(r.meshIndex=Object(a.get)(t,"index",0),e){Object(a.assignIfExists)(r,e,["name","display","geometryResPath","instanceGeometryResPath","instanceMeshIndex"]);const t=["additiveAreas","decalAreas","depthAreas","distortionAreas","opaqueAreas","pickableAreas","transparentAreas"];Object(a.assignIfExists)(r.visible,e.visible,t),o.Tw2Mesh.createAreaIfExists(r,e,t)}return t&&t.skipUpdate||r.Initialize(),r}static GetAreaBatches(e,t,r,n,i){for(let a=0;a<t.length;++a){const o=t[a];if(o.effect&&o.display){const t=new s.Tw2InstancedMeshBatch;t.renderMode=r,t.perObjectData=i,t.instanceMesh=e,t.meshIx=o.meshIndex,t.start=o.index,t.count=o.count,t.effect=o.effect,n.Commit(t)}}}static black(e){return[["additiveAreas",e.array],["decalAreas",e.array],["depthAreas",e.array],["distortionAreas",e.array],["geometryResPath",e.path],["instanceGeometryResPath",e.path],["instanceGeometryResource",e.object],["instanceMeshIndex",e.uint],["minBounds",e.vector3],["maxBounds",e.vector3],["opaqueAreas",e.array],["transparentAreas",e.array]]}}u.__isStaging=1},"./core/mesh/Tw2Mesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Mesh",function(){return a});var n=r("./global/index.js"),s=r("./global/engine/index.js"),i=r("./global/util/index.js");class a extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.additiveAreas=[],this.decalAreas=[],this.deferGeometryLoad=!1,this.depthAreas=[],this.depthNormalAreas=[],this.distortionAreas=[],this.geometryResPath="",this.meshIndex=0,this.opaqueAreas=[],this.opaquePrepassAreas=[],this.pickableAreas=[],this.transparentAreas=[],this.display=!0,this.geometryResource=null,this.visible={additiveAreas:!0,decalAreas:!0,depthAreas:!0,depthNormalAreas:!0,distortionAreas:!0,opaqueAreas:!0,opaquePrepassAreas:!0,pickableAreas:!0,transparentAreas:!0}}Initialize(){""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath))}IsGood(){return this.geometryResource&&this.geometryResource.IsGood()}GetResources(e=[]){return this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case s.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case s.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_DEPTH:case s.RM_DISTORTION:return;case s.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case s.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}EmptyAreas(){this.additiveAreas.splice(0),this.decalAreas.splice(0),this.depthAreas.splice(0),this.depthNormalAreas.splice(0),this.distortionAreas.splice(0),this.opaqueAreas.splice(0),this.opaquePrepassAreas.splice(0),this.pickableAreas.splice(0),this.transparentAreas.splice(0)}static GetAreaBatches(e,t,r,n,s){for(let i=0;i<t.length;++i){const a=t[i];if(a.effect&&a.display){const t=new a.constructor.batchType;t.renderMode=r,t.perObjectData=s,t.geometryRes=e.geometryResource,t.meshIx=e.meshIndex,t.start=a.index,t.count=a.count,t.effect=a.effect,n.Commit(t)}}}static createAreaIfExists(e,t,r){r=Object(i.toArray)(r);for(let s=0;s<r.length;s++){const i=r[s];if(i in t&&i in e)for(let r=0;r<t[i].length;r++){const s=t[i][r].__type||"Tw2MeshArea",a=n.tw2.GetClass(s);e[i].push(a.from(t[i][r],{index:r}))}}}static from(e,t){const r=new a;if(r.index=Object(i.get)(t,"index",0),e){Object(i.assignIfExists)(r,e,["name","display","deferGeometryLoad","geometryResPath","meshIndex"]);const t=["additiveAreas","decalAreas","depthAreas","depthNormalAreas","distortionAreas","opaqueAreas","opaquePrepassAreas","pickableAreas","transparentAreas"];Object(i.assignIfExists)(r.visible,e.visible,t),this.createAreaIfExists(r,e,t)}return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["additiveAreas",e.array],["decalAreas",e.array],["deferGeometryLoad",e.boolean],["depthAreas",e.array],["depthNormalAreas",e.array],["distortionAreas",e.array],["geometryResPath",e.path],["meshIndex",e.uint],["name",e.string],["opaqueAreas",e.array],["opaquePrepassAreas",e.array],["pickableAreas",e.array],["transparentAreas",e.array]]}}a.__isStaging=1},"./core/mesh/Tw2MeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshArea",function(){return o});var n=r("./core/batch/index.js"),s=r("./global/index.js"),i=r("./global/util/index.js"),a=r("./core/mesh/Tw2Effect.js");class o extends s.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.count=1,this.effect=null,this.index=0,this.reversed=!1,this.useSHLighting=!1,this.display=!0}get meshIndex(){return this.index}set meshIndex(e){this.index=e}static from(e,t){const r=new this;return Object(i.assignIfExists)(r,t,"index"),e&&(Object(i.assignIfExists)(r,e,["name","display","count","index","reversed","useSHLighting"]),e.effect&&(r.effect=a.Tw2Effect.from(e.effect))),r}static black(e){return[["count",e.uint],["effect",e.object],["index",e.uint],["name",e.string],["reversed",e.boolean],["useSHLighting",e.boolean]]}}o.batchType=n.Tw2GeometryBatch,o.__isStaging=1},"./core/mesh/Tw2MeshLineArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshLineArea",function(){return i});var n=r("./core/batch/index.js"),s=r("./core/mesh/Tw2MeshArea.js");class i extends s.Tw2MeshArea{}i.batchType=n.Tw2GeometryLineBatch},"./core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/mesh/Tr2MeshLod.js");r.d(t,"Tr2MeshLod",function(){return n.Tr2MeshLod});var s=r("./core/mesh/Tw2Effect.js");r.d(t,"Tw2Effect",function(){return s.Tw2Effect});var i=r("./core/mesh/Tw2InstancedMesh.js");r.d(t,"Tw2InstancedMesh",function(){return i.Tw2InstancedMesh});var a=r("./core/mesh/Tw2Mesh.js");r.d(t,"Tw2Mesh",function(){return a.Tw2Mesh});var o=r("./core/mesh/Tw2MeshArea.js");r.d(t,"Tw2MeshArea",function(){return o.Tw2MeshArea});var u=r("./core/mesh/Tw2MeshLineArea.js");r.d(t,"Tw2MeshLineArea",function(){return u.Tw2MeshLineArea})},"./core/model/Tw2Animation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Animation",function(){return n});class n{constructor(){this.animationRes=null,this.time=0,this.timeScale=1,this.cycle=!1,this.isPlaying=!1,this.callback=null,this.trackGroups=[]}IsFinished(){return!this.cycle&&this.time>=this.animationRes.duration}}},"./core/model/Tw2AnimationController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2AnimationController",function(){return d});var n=r("./global/index.js"),s=r("./core/resource/index.js"),i=r("./core/model/Tw2Animation.js"),a=r("./core/model/Tw2Bone.js"),o=r("./core/model/Tw2BoneBinding.js"),u=r("./core/model/Tw2Model.js"),c=r("./core/model/Tw2Track.js"),l=r("./core/model/Tw2TrackGroup.js"),h=r("./core/model/Tw2MeshBinding.js");class d extends n.Tw2BaseClass{constructor(e){super(),this.geometryResources=[],this.models=[],this.animations=[],this.meshBindings=[],this.loaded=!1,this.update=!0,this.pendingCommands=[],this.onPendingCleared=null,this._isPlaying=!1,this._boundsDirty=!1,e&&this.SetGeometryResource(e)}IsGood(){let e=this.geometryResources.length>0;for(let t=0;t<this.geometryResources.length;t++)this.geometryResources[t]&&this.geometryResources[t].IsGood()||(e=!1);if(!e||!this.animations.length)return!1;for(let e=0;e<this.animations.length;e++)if(!this.animations[e].animationRes)return!1;return!0}IsPlaying(){return this._isPlaying}GetAnimationsByName(){if(!this.loaded)return null;const e={};for(let t=0;t<this.animations.length;t++)e[this.animations[t].animationRes.name]=this.animations[t];return e}GetAnimation(e){for(let t=0;t<this.animations.length;t++)if(this.animations[t].animationRes.name===e)return this.animations[t];return null}ResetAnimation(e){const t=this.GetAnimation(e);if(t)return t.time=0,t.isPlaying=!1,t.callback=null,!0}PlayAnimation(e,t,r){if(0===this.animations.length)return this.pendingCommands.push({func:this.PlayAnimation,args:[e,t,r]}),!0;const s=this.GetAnimation(e);return s?(s.time=0,s.isPlaying=!0,n.util.isUndefined(t)||(s.cycle=t),r&&(s.callback=r),!0):void 0}PlayAnimationFrom(e,t,r,s){if(0===this.animations.length)return this.pendingCommands.push({func:this.PlayAnimationFrom,args:[e,t,r,s]}),!0;const i=this.GetAnimation(e);return i?(i.time=Math.max(Math.min(t,i.animationRes.duration),0),i.isPlaying=!0,n.util.isUndefined(r)||(i.cycle=r),s&&(i.callback=s),!0):void 0}GetPlayingAnimations(){const e=[];for(let t=0;t<this.animations.length;t++)this.animations[t].isPlaying&&e.push(this.animations[t].animationRes.name);return e}StopAnimation(e){if(0===this.animations.length)return void this.pendingCommands.push({func:this.StopAnimation,args:e});e=n.util.toArray(e);const t={};for(let r=0;r<e.length;r++)t[e[r]]=!0;for(let e=0;e<this.animations.length;++e)this.animations[e].animationRes.name in t&&(this.animations[e].isPlaying=!1)}StopAllAnimations(){if(0!==this.animations.length)for(let e=0;e<this.animations.length;++e)this.animations[e].isPlaying=!1;else this.pendingCommands.push({func:this.StopAllAnimations,args:null})}StopAllAnimationsExcept(e){if(0===this.animations.length)return void this.pendingCommands.push({func:this.StopAllAnimationsExcept,args:e});n.util.toArray(e);const t={};for(let r=0;r<e.length;r++)t[e[r]]=!0;for(let e=0;e<this.animations.length;++e)this.animations[e].animationRes.name in t||(this.animations[e].isPlaying=!1)}SetGeometryResource(e){this.models.splice(0),this.animations.splice(0),this.meshBindings.splice(0);for(let e=0;e<this.geometryResources.length;++e)this.geometryResources[e].UnregisterNotification(this);this.loaded=!1,this.geometryResources.splice(0),e&&(this.geometryResources.push(e),e.RegisterNotification(this))}AddGeometryResource(e){this.geometryResources.includes(e)||(this.geometryResources.push(e),e.RegisterNotification(this))}AddAnimationsFromRes(e){for(let t=0;t<e.animations.length;++t){let r=null;for(let n=0;n<this.animations.length;++n)if(this.animations[n].animationRes===e.animations[t]){r=this.animations[t];break}r||((r=new i.Tw2Animation).animationRes=e.animations[t],this.animations.push(r));for(let e=0;e<r.animationRes.trackGroups.length;++e){let t=!1;for(let n=0;n<r.trackGroups.length;++n)if(r.trackGroups[n].trackGroupRes===r.animationRes.trackGroups[e]){t=!0;break}if(t)continue;let n=null;for(let t=0;t<this.models.length;++t)if(this.models[t].modelRes.name===r.animationRes.trackGroups[e].name){n=this.models[t];break}if(null!==n){const t=new l.Tw2TrackGroup;t.trackGroupRes=r.animationRes.trackGroups[e];for(let e=0;e<t.trackGroupRes.transformTracks.length;++e)for(let r=0;r<n.bones.length;++r)if(n.bones[r].boneRes.name===t.trackGroupRes.transformTracks[e].name){const s=new c.Tw2Track;s.trackRes=t.trackGroupRes.transformTracks[e],s.bone=n.bones[r],t.transformTracks.push(s);break}r.trackGroups.push(t)}}}}ResetBoneTransforms(){for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].bones.length;++t){const r=this.models[e].bones[t],s=r.boneRes;n.mat4.copy(r.localTransform,s.localTransform),-1!==s.parentIndex?n.mat4.multiply(r.worldTransform,r.localTransform,this.models[e].bones[r.boneRes.parentIndex].worldTransform):n.mat4.set(r.worldTransform,r.localTransform),n.mat4.identity(r.offsetTransform)}const e=n.mat4.identity(d.global.mat4_0);for(let t=0;t<this.meshBindings.length;++t)for(let r=0;r<this.meshBindings[t].meshIndex.length;++r)for(let n=0;16*n<this.meshBindings[t].meshIndex[r].length;++n)for(let s=0;s<16;++s)this.meshBindings[t].meshIndex[r][16*n+s]=e[s]}GetBoneMatrices(e,t){if(0===this.geometryResources.length)return new Float32Array;t||(t=this.geometryResources[0]);const r=d.FindMeshBindings(this,t);return r&&void 0!==r.meshIndex[e]?r.meshIndex[e]:new Float32Array}FindModelForMesh(e,t){if(0===this.geometryResources.length)return null;if(t||(t=this.geometryResources[0]),!t.IsGood())return null;const r=t.meshes[e];for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].modelRes.meshBindings.length;++e)if(this.models[e].modelRes.meshBindings[t].mesh===r)return this.models[e];return null}GetResources(e=[]){for(let t=0;t<this.geometryResources.length;t++)e.includes(this.geometryResources[t])||e.push(this.geometryResources[t]);return e}OnResPrepared(e){if(e.UnregisterNotification(this),this.geometryResources.includes(e)){for(let e=0;e<this.geometryResources.length;++e)if(!this.geometryResources[e].IsGood())return;for(let e=0;e<this.geometryResources.length;++e)d.DoRebuildCachedData(this,this.geometryResources[e])}}Update(e){let t=this._isPlaying;if(this._isPlaying=!1,!this.models||!this.update)return;for(let e=0;e<this.geometryResources.length;++e)this.geometryResources[e].KeepAlive();const r=d.global,s=r.mat4_0,i=r.quat_0,a=r.vec3_0,o=r.mat3_0;for(let t=0;t<this.animations.length;++t){const r=this.animations[t];if(r.isPlaying){this._isPlaying=!0;const t=r.animationRes;r.time+=e*r.timeScale,r.time>t.duration&&(r.callback&&r.callback(this,r,!1),r.cycle?r.time=r.time%t.duration:(r.isPlaying=!1,r.time=t.duration));for(let e=0;e<r.trackGroups.length;++e)for(let u=0;u<r.trackGroups[e].transformTracks.length;++u){const c=r.trackGroups[e].transformTracks[u];c.trackRes.position?n.curve.evaluate(c.trackRes.position,r.time,a,r.cycle,t.duration):a[0]=a[1]=a[2]=0,c.trackRes.orientation?(n.curve.evaluate(c.trackRes.orientation,r.time,i,r.cycle,t.duration),n.quat.normalize(i,i)):n.quat.identity(i),c.trackRes.scaleShear?n.curve.evaluate(c.trackRes.scaleShear,r.time,o,r.cycle,t.duration):n.mat3.identity(o),n.mat4.fromMat3(c.bone.localTransform,o),n.mat4.multiply(c.bone.localTransform,c.bone.localTransform,n.mat4.fromQuat(s,i)),c.bone.localTransform[12]=a[0],c.bone.localTransform[13]=a[1],c.bone.localTransform[14]=a[2]}}}for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].bones.length;++t){const r=this.models[e].bones[t];-1!==r.boneRes.parentIndex?n.mat4.multiply(r.worldTransform,this.models[e].bones[r.boneRes.parentIndex].worldTransform,r.localTransform):n.mat4.copy(r.worldTransform,r.localTransform),n.mat4.multiply(r.offsetTransform,r.worldTransform,r.boneRes.worldTransformInv);for(let e=0;e<r.bindingArrays.length;++e){const t=r.bindingArrays[e],n=r.offsetTransform;t.array[t.offset+0]=n[0],t.array[t.offset+1]=n[4],t.array[t.offset+2]=n[8],t.array[t.offset+3]=n[12],t.array[t.offset+4]=n[1],t.array[t.offset+5]=n[5],t.array[t.offset+6]=n[9],t.array[t.offset+7]=n[13],t.array[t.offset+8]=n[2],t.array[t.offset+9]=n[6],t.array[t.offset+10]=n[10],t.array[t.offset+11]=n[14]}}(this._isPlaying||this._isPlaying!==t)&&(this._boundsDirty=!0)}RenderDebugInfo(e){for(let t=0;t<this.models.length;++t)for(let r=0;r<this.models[t].bones.length;++r){const n=this.models[t].bones[r];if(n.boneRes.parentIndex>=0){const r=this.models[t].bones[n.boneRes.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[r.worldTransform[12],r.worldTransform[13],r.worldTransform[14]])}}}static AddModel(e,t){for(let r=0;r<e.models.length;++r)if(e.models[r].modelRes.name===t.name)return null;const r=new u.Tw2Model;r.modelRes=t;const n=t.skeleton;if(null!==n)for(let e=0;e<n.bones.length;++e){const t=new a.Tw2Bone;t.boneRes=n.bones[e],r.bones.push(t),r.bonesByName[t.boneRes.name]=t}return e.models.push(r),r}static FindMeshBindings(e,t){for(let r=0;r<e.meshBindings.length;++r)if(e.meshBindings[r].resource===t)return e.meshBindings[r];return null}static DoRebuildCachedData(e,t){const r=[];if(t.meshes.length)for(let n=0;n<t.models.length;++n){const s=d.AddModel(e,t.models[n]);s&&r.push(s)}for(let t=0;t<e.geometryResources.length;++t)e.AddAnimationsFromRes(e.geometryResources[t]);if(0===t.models.length){for(let r=0;r<t.meshes.length;++r)s.Tw2GeometryRes.BindMeshToModel(t.meshes[r],e.geometryResources[0].models[0],t);t.models.push(e.geometryResources[0].models[0])}for(let r=0;r<t.models.length;++r){let n=null;for(let s=0;s<e.models.length;++s)if(e.models[s].modelRes.name===t.models[r].name){n=e.models[s];break}if(null!==n)for(let s=0;s<t.models[r].meshBindings.length;++s){const i=t.meshes.indexOf(t.models[r].meshBindings[s].mesh);let a=d.FindMeshBindings(e,t);null===a&&((a=new h.Tw2MeshBinding).resource=t,e.meshBindings.push(a)),a.meshIndex[i]=new Float32Array(12*t.models[r].meshBindings[s].bones.length);for(let e=0;e<t.models[r].meshBindings[s].bones.length;++e)for(let u=0;u<n.bones.length;++u)if(n.bones[u].boneRes.name===t.models[r].meshBindings[s].bones[e].name){const t=new o.Tw2BoneBinding;t.array=a.meshIndex[i],t.offset=12*e,n.bones[u].bindingArrays.push(t);break}}}if(t.meshes.length&&t.models.length&&e.ResetBoneTransforms(),e.loaded=!0,e.animations.length){if(e.pendingCommands.length)for(let t=0;t<e.pendingCommands.length;++t)e.pendingCommands[t].args?e.pendingCommands[t].func.apply(e,e.pendingCommands[t].args):e.pendingCommands[t].func.apply(e);e.pendingCommands.splice(0),e.onPendingCleared&&e.onPendingCleared(e)}}}d.global={vec3_0:n.vec3.create(),quat_0:n.quat.create(),mat3_0:n.mat3.create(),mat4_0:n.mat4.create()},d.keys={primary:["update"]}},"./core/model/Tw2Bone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Bone",function(){return s});var n=r("./global/index.js");class s{constructor(){this.boneRes=null,this.bindingArrays=[],this.localTransform=n.mat4.create(),this.worldTransform=n.mat4.create(),this.offsetTransform=n.mat4.create()}}},"./core/model/Tw2BoneBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BoneBinding",function(){return n});class n{constructor(){this.array=null,this.offset=0}}},"./core/model/Tw2MeshBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshBinding",function(){return n});class n{constructor(){this.meshIndex=[],this.resource=null}}},"./core/model/Tw2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Model",function(){return n});class n{constructor(){this.modelRes=null,this.bones=[],this.bonesByName={}}}},"./core/model/Tw2Track.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Track",function(){return n});class n{constructor(){this.trackRes=null,this.bone=null}}},"./core/model/Tw2TrackGroup.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TrackGroup",function(){return n});class n{constructor(){this.trackGroupRes=null,this.model=null,this.transformTracks=[]}}},"./core/model/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/model/Tw2Animation.js");r.d(t,"Tw2Animation",function(){return n.Tw2Animation});var s=r("./core/model/Tw2AnimationController.js");r.d(t,"Tw2AnimationController",function(){return s.Tw2AnimationController});var i=r("./core/model/Tw2Bone.js");r.d(t,"Tw2Bone",function(){return i.Tw2Bone});var a=r("./core/model/Tw2BoneBinding.js");r.d(t,"Tw2BoneBinding",function(){return a.Tw2BoneBinding});var o=r("./core/model/Tw2MeshBinding.js");r.d(t,"Tw2MeshBinding",function(){return o.Tw2MeshBinding});var u=r("./core/model/Tw2Model.js");r.d(t,"Tw2Model",function(){return u.Tw2Model});var c=r("./core/model/Tw2Track.js");r.d(t,"Tw2Track",function(){return c.Tw2Track});var l=r("./core/model/Tw2TrackGroup.js");r.d(t,"Tw2TrackGroup",function(){return l.Tw2TrackGroup})},"./core/parameter/Tw2FloatParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2FloatParameter",function(){return i});var n=r("./core/parameter/Tw2Parameter.js"),s=r("./global/index.js");class i extends n.Tw2Parameter{constructor(e="",t=1){super(e),this.value=1,this.value=s.util.isArrayLike(t)?t[0]:t}SetValue(e,t){return!this.EqualsValue(e)&&(this.value=e,this.UpdateValues(t),!0)}GetValue(){return this.value}Apply(e,t){e[t]=this.value}Bind(e,t,r){return!this._constantBuffer&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t),!0)}Unbind(){this._constantBuffer=null}EqualsValue(e){return this.value===e}static isValue(e){return s.util.isNumber(e)}static black(e){return[["name",e.string],["value",e.float]]}}i.constantBufferSize=1},"./core/parameter/Tw2Matrix4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Matrix4Parameter",function(){return i}),r.d(t,"Tw2MatrixParameter",function(){return a});var n=r("./global/index.js"),s=r("./core/parameter/Tw2VectorParameter.js");class i extends s.Tw2VectorParameter{constructor(e="",t=n.mat4.create()){super(e,t)}Compose(e,t,r){"value"in e&&(e=e.value),"value"in t&&(t=t.value),"value"in r&&(r=r.value),n.mat4.fromRotationTranslationScale(this.value,e,t,r),this.UpdateValues()}Decompose(e,t,r){n.mat4.getRotation("value"in e?e.value:e,this.value),n.mat4.getTranslation("value"in t?t.value:t,this.value),n.mat4.getScaling("value"in r?r.value:r,this.value),"UpdateValues"in e&&e.UpdateValues(),"UpdateValues"in t&&t.UpdateValues(),"UpdateValues"in r&&r.UpdateValues()}get x(){return this.GetIndexValue(12)}set x(e){this.SetIndexValue(12,e)}get y(){return this.GetIndexValue(13)}set y(e){this.SetIndexValue(13,e)}get z(){return this.GetIndexValue(14)}set z(e){this.SetIndexValue(14,e)}static black(e){return[["name",e.string],["value",e.matrix]]}}function a(e,t){return console.warn("Tw2MatrixParameter is deprecated, use Tw2Matrix4Parameter instead"),new i(e,t)}i.constantBufferSize=16},"./core/parameter/Tw2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Parameter",function(){return i});var n=r("./global/index.js"),s=r("./core/Tw2Error.js");class i extends n.Tw2BaseClass{get size(){return this.constructor.constantBufferSize}constructor(e=""){super(),this.name=e}GetValue(){throw new s.ErrAbstractClassMethod}Bind(e,t,r){throw new s.ErrAbstractClassMethod}Unbind(){throw new s.ErrAbstractClassMethod}Apply(e,t,r){throw new s.ErrAbstractClassMethod}}i.constantBufferSize=0},"./core/parameter/Tw2TextureParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureParameter",function(){return o});var n=r("./global/index.js"),s=r("./core/sampler/index.js"),i=r("./core/parameter/Tw2Parameter.js"),a=r("./core/resource/Tw2TextureRes.js");class o extends i.Tw2Parameter{constructor(e,t){super(e),this.resourcePath="",this.addressUMode=1,this.addressVMode=1,this.addressWMode=1,this.filterMode=2,this.maxAnisotropy=4,this.mipFilterMode=2,this.textureRes=null,this.useAllOverrides=!1,this.forceAddressMode=!1,this._sampler=null,t&&(this.resourcePath=t,this.Initialize())}get isTextureAttached(){return this.textureRes&&this.textureRes._isAttached}Initialize(){this.UpdateValues()}SetValue(e){this.resourcePath=e,this.UpdateValues()}GetValue(){return this.isTextureAttached?null:this.resourcePath}SetTextureRes(e){return this.textureRes!==e&&(this.resourcePath="",this.textureRes=e,this.textureRes&&(this.textureRes._isAttached=!0),!0)}OnValueChanged(e,t){if(this.resourcePath=this.resourcePath.toLowerCase(),""!==this.resourcePath)if(0===this.resourcePath.indexOf("rgba:/")){if(!this.textureRes||this.textureRes.path!==this.resourcePath){const e=this.resourcePath.replace("rgba:/","").split(","),t=n.device.CreateSolidTexture([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),void 0!==e[3]?parseFloat(e[3]):255]);this.textureRes=new a.Tw2TextureRes,this.textureRes.path=this.resourcePath,this.textureRes.Attach(t)}}else this.textureRes=n.resMan.GetResource(this.resourcePath);else this.textureRes=null;this.UpdateOverrides()}Apply(e,t,r){this.textureRes&&(this.useAllOverrides&&this._sampler&&(this._sampler.samplerType=t.samplerType,this._sampler.isVolume=t.isVolume,this._sampler.registerIndex=t.registerIndex,t=this._sampler),n.device.gl.activeTexture(n.device.gl.TEXTURE0+e),this.textureRes.Bind(t,r))}SetOverrides(e={}){if(n.util.assignIfExists(this,e,o.overrideProperties))return this.UpdateValues(),!0}GetOverrides(e={}){return n.util.assignIfExists(e,this,o.overrideProperties),e}UpdateOverrides(){if(this.useAllOverrides){this._sampler=this._sampler||new s.Tw2SamplerState,this._sampler.forceAddressModes=this.forceAddressModes;const{wrapModes:e,gl:t}=n.device,r=this._sampler;if(1===this.filterMode){switch(this.mipFilterMode){case 0:r.minFilter=t.NEAREST;break;case 1:r.minFilter=t.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=t.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=t.NEAREST,r.magFilter=t.NEAREST}else{switch(this.mipFilterMode){case 0:r.minFilter=t.LINEAR;break;case 1:r.minFilter=t.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=t.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=t.LINEAR,r.magFilter=t.LINEAR}r.addressU=e[this.addressUMode],r.addressV=e[this.addressVMode],r.addressW=e[this.addressWMode],r.anisotropy=this.maxAnisotropy,r.ComputeHash()}else this._sampler&&(this._sampler=null)}EqualsValue(e){return e.toLowerCase()===this.GetValue()}GetResources(e=[]){return this.textureRes&&!e.includes(this.textureRes)&&e.push(this.textureRes),e}static isValue(e){return n.util.isString(e)}static black(e){return[["name",e.string],["resourcePath",e.path]]}}o.overrideProperties=["useAllOverrides","addressUMode","addressVMode","addressWMode","filterMode","mipFilterMode","maxAnisotropy","forceAddressModes"]},"./core/parameter/Tw2TransformParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformParameter",function(){return a});var n=r("./core/parameter/Tw2Parameter.js"),s=r("./global/math/index.js"),i=r("./global/util/index.js");class a extends n.Tw2Parameter{constructor(e,t){a.init(),super(),this.name="",this.rotation=s.quat.create(),this.translation=s.vec3.create(),this.scaling=s.vec3.fromValues(1,1,1),this._localTransform=s.mat4.create(),this._worldTransform=s.mat4.create(),this._rebuildLocal=!0,this._rebuildWorld=!0,e&&(this.name=e),t&&(4===t.length?this.SetRotation(t):this.SetTransform(t),this.RebuildTransforms())}Initialize(){this.UpdateValues()}OnValueChanged(e){e&&e.skipRebuild||this.RebuildTransforms({force:!0,skipUpdate:!0})}RebuildTransforms(e){let t=!!e&&e.force,r=!!e&&e.skipUpdate;return(t||this._rebuildLocal)&&(s.mat4.fromRotationTranslationScale(this._localTransform,this.rotation,this.translation,this.scaling),this._rebuildLocal=!1,t=!0),(t||this._rebuildWorld)&&(this._parentTransform?s.mat4.multiply(this._worldTransform,this._parentTransform,this._localTransform):s.mat4.copy(this._worldTransform,this._localTransform),this._worldInverse&&s.mat4.invert(this._worldInverse,this._worldTransform),this._worldTranspose&&s.mat4.transpose(this._worldTranspose,this._worldTransform),this._worldInverseTranspose&&(this._worldInverse?s.mat4.transpose(this._worldInverseTranspose,this._worldInverse):(s.mat4.invert(this._worldInverseTranspose,this._worldTransform),s.mat4.transpose(this._worldInverseTranspose,this._worldInverseTranspose))),this._constantBuffer&&this.Apply(this._constantBuffer,this._offset,this.size),this._rebuildWorld=!1,r||this.UpdateValues({skipRebuild:!0}),t=!0),t}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Apply(e,t,r){this._worldTranspose||(this.RebuildTransforms(),this._worldTranspose=s.mat4.create(),s.mat4.transpose(this._worldTranspose,this._worldTransform)),r>=this.constructor.constantBufferSize?e.set(this._worldTranspose,t):e.set(this._worldTranspose.subarray(0,r),t)}GetValue(e){return this.RebuildTransforms(),this._worldTranspose||(this._worldTranspose=s.mat4.create(),s.mat4.transpose(this._worldTranspose,this._worldTransform)),s.mat4.copy(e,this._worldTranspose)}SetParentTransform(e){return!e&&this._parentTransform?(this._parentTransform=null,this._rebuildWorld=!0):this._parentTransform?s.mat4.equals(e,this._parentTransform)||(s.mat4.copy(this._parentTransform,e),this._rebuildWorld=!0):(this._parentTransform=s.mat4.clone(e),this._rebuildWorld=!0),this}GetWorldTransform(e){return this.RebuildTransforms(),s.mat4.copy(e,this._worldTransform)}DecomposeWorld(e,t,r){return this.RebuildTransforms(),s.mat4.getRotation(e,this._worldTransform),s.mat4.getTranslation(t,this._worldTransform),s.mat4.getScaling(r,this._worldTransform),this}GetWorldRotation(e){return this.RebuildTransforms(),s.mat4.getRotation(e,this._worldTransform)}GetWorldDirection(e){return this.RebuildTransforms(),s.vec3.set(e,this._worldTransform[8],this._worldTransform[9],this._worldTransform[10]),s.vec3.normalize(e,e)}GetWorldEuler(e){const{quat_0:t}=a.global;return this.GetWorldRotation(t),s.vec3.euler.fromQuat(e,t)}GetWorldAxisAngle(e){const{quat_0:t}=a.global;return this.RebuildTransforms(),s.mat4.getRotation(t,this._worldTransform),s.quat.getAxisAngle(e,t)}GetWorldTranslation(e){return this.RebuildTransforms(),s.mat4.getTranslation(e,this._worldTransform)}GetWorldScaling(e){return this.RebuildTransforms(),s.mat4.getScaling(e,this._worldTransform)}GetWorldMaxScale(){const{vec3_0:e}=a.global;return this.GetWorldScaling(e),Math.max(e[0],e[1],e[2])}GetWorldToLocal(e,t){if(this.RebuildTransforms(),this._worldInverse)return s.vec3.transformMat4(e,t,this._worldInverse);const{mat4_0:r}=a.global;return s.mat4.invert(r,this._worldTransform),s.vec3.transformMat4(e,t,r)}GetTransform(e){return s.mat4.copy(e,this._localTransform)}SetTransform(e){return s.mat4.getRotation(this.rotation,e),s.mat4.getScaling(this.scaling,e),s.mat4.getTranslation(this.translation,e),s.mat4.copy(this._localTransform,e),this._rebuildWorld=!0,this}Compose(e,t,r){return s.quat.copy(this.rotation,e),s.vec3.copy(this.translation,t),s.vec3.copy(this.scaling,r),this._rebuildLocal=!0,this}Decompose(e,t,r){return this.RebuildTransforms(),s.quat.copy(e,this.rotation),s.vec3.copy(t,this.translation),s.vec3.copy(r,this.scaling),this}GetLocalToWorld(e,t){return this.RebuildTransforms(),s.vec3.transformMat4(e,t,this._worldTransform)}GetDirection(e){return this.RebuildTransforms(),s.vec3.set(e,this._localTransform[8],this._localTransform[9],this._localTransform[10]),s.vec3.normalize(e,e)}GetRotation(e){return this.RebuildTransforms(),s.quat.copy(e,this.rotation)}GetEuler(e){const{quat_0:t}=a.global;return this.GetRotation(t),s.vec3.euler.fromQuat(e,t)}GetRotationMatrix(e){return s.mat4.fromRotation(e,this.rotation)}SetRotation(e){return s.quat.copy(this.rotation,e),this._rebuildLocal=!0,this}SetRotationFromValues(e,t,r,n){const{quat_0:i}=a.global;return s.quat.set(i,e,t,r,n),this.SetRotation(i)}SetRotationFromAxes(e,t,r){const{quat_0:n}=a.global;return s.quat.setAxes(n,e,t,r),this.SetRotation(n)}SetRotationFromAxisAngle(e,t){return s.quat.setAxisAngle(this.rotation,e,t),this._rebuildLocal=!0,this}SetRotationFromEuler(e){return s.vec3.euler.getQuat(this.rotation,e),this._rebuildLocal=!0,this}SetRotationFromEulerValues(e,t,r){const{vec3_0:n}=a.global;return s.vec3.set(n,e,t,r),this.SetRotationFromEuler(n)}SetRotationFromMat4(e){const{quat_0:t}=a.global;return s.mat4.getRotation(t,e),this.SetRotation(t)}RotateX(e){return s.quat.rotateX(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateY(e){return s.quat.rotateY(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateZ(e){return s.quat.rotateZ(this.rotation,this.rotation,e),this._rebuildLocal=!0,this}RotateOnAxisAngle(e,t){const{quat_0:r}=a.global;return s.quat.setAxisAngle(r,e,t),s.quat.multiply(this.rotation,this.rotation,r),this._rebuildLocal=!0,this}GetAxisAngle(e){return s.quat.getAxisAngle(e,this.rotation)}LookAt(e,t){this.RebuildTransforms();const{mat4_0:r}=a.global;return s.mat4.copy(r,this._localTransform),t?s.mat4.lookAtGL(r,this.translation,e,s.vec3.Y_AXIS):s.mat4.lookAtGL(r,e,this.translation,s.vec3.Y_AXIS),s.mat4.getRotation(this.rotation,r),this._rebuildLocal=!0,this}LookAtWorld(e,t){const{vec3_0:r}=a.global;return this.GetWorldToLocal(r,e),this.LookAt(r,t)}GetTranslation(e){return this.RebuildTransforms(),s.vec3.copy(e,this.translation)}SetTranslation(e){return s.vec3.copy(this.translation,e),this._rebuildLocal=!0,this}SetTranslationFromValues(e,t,r){return s.vec3.set(this.translation,e,t,r),this._rebuildLocal=!0,this}SetTranslationFromMat4(e){return s.mat4.getTranslation(this.translation,e),this._rebuildLocal=!0,this}TranslateOnAxis(e,t){const{vec3_0:r}=a.global;return s.vec3.transformQuat(r,e,this.rotation),s.vec3.scaleAndAdd(this.translation,this.translation,r,t),this._rebuildLocal=!0,this}TranslateX(e){return this.TranslateOnAxis(s.vec3.X_AXIS,e)}TranslateY(e){return this.TranslateOnAxis(s.vec3.Y_AXIS,e)}TranslateZ(e){return this.TranslateOnAxis(s.vec3.Z_AXIS,e)}GetScale(e){return this.RebuildTransforms(),s.vec3.copy(e,this.scaling)}GetMaxScale(){return Math.max(this.scaling[0],this.scaling[1],this.scaling[2])}SetScale(e){return s.vec3.copy(this.scaling,e),this._rebuildLocal=!0,this}SetScaleFromValues(e,t,r){const{vec3_0:n}=a.global;return s.vec3.set(n,e,t,r),this.SetScale(n)}SetScaleX(e){return this.SetScaleFromValues(e,this.scaling[1],this.scaling[2])}SetScaleY(e){return this.SetScaleFromValues(this.scaling[0],e,this.scaling[2])}SetScaleZ(e){return this.SetScaleFromValues(this.scaling[0],this.scaling[1],e)}SetScaleUniform(e){return this.SetScaleFromValues(e,e,e)}SetScaleFromMat4(e){return s.mat4.getScaling(this.scaling,e),this._rebuildLocal=!0,this}Scale(e){return s.vec3.multiply(this.scaling,this.scaling,e),this._rebuildLocal=!0,this}ScaleValues(e,t,r){const{vec3_0:n}=a.global;return s.vec3.set(n,e,t,r),this.Scale(n)}ScaleMat4(e){const{vec3_0:t}=a.global;return s.mat4.getScaling(t,e),this.Scale(t)}ScaleUniform(e){return this.ScaleValues(e,e,e)}ScaleX(e){return this.ScaleValues(e,1,1)}ScaleY(e){return this.ScaleValues(1,e,1)}ScaleZ(e){return this.ScaleValues(1,1,e)}static set(e,t,r={}){if(!t)return!1;this.init();const{vec3_0:n,vec3_1:a,quat_0:o}=this.global;let u,c,l,h=!1;return t.transform?(u=s.mat4.getRotation(o,t.transform),c=s.mat4.getTranslation(n,t.transform),l=s.mat4.getScaling(a,t.transform)):(u=t.rotation||t.orientation,c=t.position||t.translation,l=t.scale||t.scaling||t.radius),(u||c||void 0!==l)&&(u&&(3===u.length&&(u=s.vec3.euler.getQuat(o,u)),s.quat.equals(e.rotation,u)||(s.quat.copy(e.rotation,u),h=!0)),c&&!s.vec3.equals(e.translation,c)&&(s.vec3.copy(e.translation,c),h=!0),void 0!==l&&(Object(i.isNumber)(l)&&(l=s.vec3.set(a,l,l,l)),s.vec3.equals(e.scaling,l)||(s.vec3.copy(e.scaling,l),h=!0)),h&&!r.skipUpdate&&e.RebuildTransforms({force:!0})),t.name&&e.name!==t.name&&(e.name=t.name,h=!0),h}static get(e,t={}){return t.rotation=e.GetRotation([]),t.translation=e.GetTranslation([]),t.scaling=e.GetScale([]),t}static init(){this.global||(this.global={vec3_0:s.vec3.create(),vec3_1:s.vec3.create(),quat_0:s.quat.create(),mat4_0:s.mat4.create()})}static black(e){return[["name",e.string],["rotation",e.vector4]]}}a.constantBufferSize=16,a.global=null},"./core/parameter/Tw2VariableParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableParameter",function(){return i});var n=r("./global/index.js"),s=r("./core/parameter/Tw2Parameter.js");class i extends s.Tw2Parameter{constructor(e="",t=""){super(e),this.variableName="",this.variableName=t}get variable(){return n.tw2.GetVariable(this.variableName)}get size(){return this.variable?this.variable.size:0}SetValue(e,t){return n.tw2.SetVariableValue(this.variableName,e,t)}GetValue(e=[]){return n.tw2.GetVariableValue(this.variableName,e)}Apply(e,t,r){this.variable&&this.variable.Apply(e,t,r)}static black(e){return[["name",e.string],["variableName",e.string]]}}},"./core/parameter/Tw2Vector2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Parameter",function(){return i});var n=r("./global/index.js"),s=r("./core/parameter/Tw2VectorParameter.js");class i extends s.Tw2VectorParameter{constructor(e="",t=n.vec2.fromValues(1,1)){super(e,t)}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}}i.constantBufferSize=2},"./core/parameter/Tw2Vector3Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Parameter",function(){return i});var n=r("./global/index.js"),s=r("./core/parameter/Tw2VectorParameter.js");class i extends s.Tw2VectorParameter{constructor(e="",t=n.vec3.fromValues(1,1,1)){super(e,t)}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}}i.constantBufferSize=3},"./core/parameter/Tw2Vector4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector4Parameter",function(){return i});var n=r("./global/index.js"),s=r("./core/parameter/Tw2VectorParameter.js");class i extends s.Tw2VectorParameter{constructor(e="",t=n.vec4.fromValues(1,1,1,1)){super(e,t)}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}get w(){return this.GetIndexValue(3)}set w(e){this.SetIndexValue(3,e)}static black(e){return[["name",e.string],["value",e.vector4]]}}i.constantBufferSize=4},"./core/parameter/Tw2VectorParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorParameter",function(){return i});var n=r("./core/Tw2Error.js"),s=r("./global/index.js");class i extends s.Tw2BaseClass{get size(){return this.constructor.constantBufferSize}constructor(e,t){super(),this.value=new Float32Array(this.size),this.name=e,t&&this.value.set(t)}SetValue(e,t){return!this.EqualsValue(e)&&(this.value.set(e),this.UpdateValues(t),!0)}SetIndexValue(e,t,r){if(void 0===this.value[e])throw new n.ErrIndexBounds;this.value[e]!==t&&(this.value[e]=t,this.UpdateValues(r))}GetValue(e=[]){const t=this._constantBuffer?this._constantBuffer.subarray(this._offset,this._offset+this.size):this.value;for(let r=0;r<t.length;r++)e[r]=t[r];return e}GetIndexValue(e){if(void 0!==this.value[e])return this.value[e];throw new n.ErrIndexBounds}OnValueChanged(e,t){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Unbind(){this._constantBuffer=null}Apply(e,t,r){e.set(this.value,t)}EqualsValue(e){for(let t=0;t<this.size;t++)if(this.value[t]!==e[t])return!1;return!0}static isValue(e){return s.util.isArrayLike(e)&&e.length===this.constantBufferSize}}i.constantBufferSize=0},"./core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/parameter/Tw2Parameter.js");r.d(t,"Tw2Parameter",function(){return n.Tw2Parameter});var s=r("./core/parameter/Tw2FloatParameter.js");r.d(t,"Tw2FloatParameter",function(){return s.Tw2FloatParameter});var i=r("./core/parameter/Tw2Matrix4Parameter.js");r.d(t,"Tw2Matrix4Parameter",function(){return i.Tw2Matrix4Parameter}),r.d(t,"Tw2MatrixParameter",function(){return i.Tw2MatrixParameter});var a=r("./core/parameter/Tw2TransformParameter.js");r.d(t,"Tw2TransformParameter",function(){return a.Tw2TransformParameter});var o=r("./core/parameter/Tw2VariableParameter.js");r.d(t,"Tw2VariableParameter",function(){return o.Tw2VariableParameter});var u=r("./core/parameter/Tw2Vector2Parameter.js");r.d(t,"Tw2Vector2Parameter",function(){return u.Tw2Vector2Parameter});var c=r("./core/parameter/Tw2Vector3Parameter.js");r.d(t,"Tw2Vector3Parameter",function(){return c.Tw2Vector3Parameter});var l=r("./core/parameter/Tw2Vector4Parameter.js");r.d(t,"Tw2Vector4Parameter",function(){return l.Tw2Vector4Parameter});var h=r("./core/parameter/Tw2TextureParameter.js");r.d(t,"Tw2TextureParameter",function(){return h.Tw2TextureParameter})},"./core/post/Tr2PostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PostProcess",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.stages=[]}static black(e){return[["stages",e.array]]}}s.__isStaging=4},"./core/post/Tw2PostEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffect",function(){return c});var n=r("./global/index.js"),s=r("./core/Tw2RenderTarget.js"),i=r("./core/resource/Tw2TextureRes.js"),a=r("./core/parameter/index.js"),o=r("./core/post/Tw2PostEffectStep.js"),u=r("./global/util/index.js");class c extends n.Tw2BaseClass{constructor(...e){super(...e),this.display=!0,this.index=-1,this.curveSet=null,this.steps=[],this._width=0,this._height=0,this._targets={},this._texture=null,this._visibleSteps=[],this._dirty=!0,this._onChildModified=e=>this.UpdateValues({controller:e})}OnValueChanged(){this._dirty=!0}IsGood(){let e=0;for(let t=0;t<this.steps.length;t++)this.steps[t].IsGood()&&e++;return e===this.steps.length}KeepAlive(){for(let e=0;e<this.steps.length;e++)this.steps[e].KeepAlive()}GetResources(e=[]){for(let t=0;t<this.steps.length;t++)this.steps[t].GetResources(e);return e}CreateItem(e={}){const t=o.Tw2PostEffectStep.from(e);return this.AddItem(t),t}AddItem(e){this.steps.includes(e)||(-1===e.index&&(e.index=this.steps.length),e._onModified=this._onChildModified,this.steps.push(e),this.UpdateValues())}RemoveItem(e){const t=this.steps.indexOf(e);-1!==t&&(e._onModified=null,this.steps.splice(t,1),this.UpdateValues())}ClearItems(){for(let e=0;e<this.steps.length;e++)this.steps[e]._onModified=null;this.steps=[],this.UpdateValues()}GetTarget(e){return e&&e in this._targets?this._targets[e]:null}HasTarget(e){return!(!e||!this._targets[e])}CreateTarget(e,t=n.device.viewportWidth,r=n.device.viewportHeight){return this._targets[e]||(this._targets[e]=new s.Tw2RenderTarget,this._targets[e].name=e),this._targets[e].Create(t,r,!1),this._targets[e]}Update(e){this.curveSet&&this.curveSet.Update(e)}Render(){const e=n.device,t=e.gl,r=e.viewportWidth,s=e.viewportHeight;if(!this.IsGood()||!this.display||r<=0||s<=0)return!1;if(r!==this._width||s!==this._height||this._dirty||!this._texture){this._texture||(this._texture=new i.Tw2TextureRes,this._texture.Attach(t.createTexture())),t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,s,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null),this._width=r,this._height=s,this._visibleSteps=[];for(let e=0;e<this.steps.length;++e){const t=this.steps[e],n=t.inputs,i=t.effect,o=i.shader,u=i.parameters;o.HasTexture("BlitCurrent")&&!u.BlitCurrent&&(u.BlitCurrent=new a.Tw2TextureParameter("BlitCurrent","rgba:/0,0,0,255")),o.HasTexture("BlitOriginal")&&!u.BlitOriginal&&(u.BlitOriginal=new a.Tw2TextureParameter("BlitOriginal","rgba:/0,0,0,255")),t.target?t._renderTarget=this.CreateTarget(t.target,r,s):t._renderTarget=null;for(let e in n)if(n.hasOwnProperty(e))if(o.HasTexture(e)){u[e]||(u[e]=new a.Tw2TextureParameter(e));const t=u[e],i=n[e];i?t.SetTextureRes(this.CreateTarget(i,r,s).texture):t.SetTextureRes(this._texture)}else console.warn("Invalid input parameter ".concat(e)),delete n[e];if("BlitCurrent"in n&&o.HasConstant("g_texelSize")){u.g_texelSize||(u.g_texelSize=new a.Tw2Vector4Parameter("g_texelSize",[1,1,1,1]));const e=u.g_texelSize,t=this.GetTarget(n.BlitCurrent);t?(e.value[0]=1/t.width,e.value[1]=1/t.width):(e.value[0]=1/r,e.value[1]=1/r),e.UpdateValues(this)}t.display&&this._visibleSteps.push(t),t._dirty=!1}this._visibleSteps.sort((e,t)=>e.index-t.index),this._dirty=!1}t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r,s,0),t.bindTexture(t.TEXTURE_2D,null),e.SetStandardStates(n.device.RM_OPAQUE);let o=0;for(let n=0;n<this._visibleSteps.length;++n){const i=this._visibleSteps[n];i.display&&(i._renderTarget?i._renderTarget.Set():(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,r,s)),e.RenderFullScreenQuad(i.effect),o++)}return!!o}static from(e={}){const t=new this;if(Object(u.assignIfExists)(t,e,["name","display","index"]),e.steps)for(let r=0;r<e.steps.length;r++)t.CreateItem(e.steps[r]);return t}}c.Item=o.Tw2PostEffectStep},"./core/post/Tw2PostEffectManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectManager",function(){return i});var n=r("./core/post/Tw2PostEffect.js"),s=r("./global/class/Tw2BaseClass.js");class i extends s.Tw2BaseClass{constructor(...e){super(...e),this.name="Post manager",this.display=!0,this.effects=[],this._dirty=!0,this._onChildValueChanged=e=>this.UpdateValues({controller:e}),this._visibleEffects=[]}OnValueChanged(){this._dirty=!0}IsGood(){let e=0;for(let t=0;t<this.effects.length;t++)this.effects[t].IsGood()&&e++;return e===this.effects.length}KeepAlive(){for(let e=0;e<this.effects.length;e++)this.effects[e].KeepAlive()}GetResources(e=[]){for(let t=0;t<this.effects.length;t++)this.effects[t].GetResources(e);return e}CreateItem(e={}){const t=n.Tw2PostEffect.from(e);return this.AddItem(t),t}AddItem(e){this.effects.includes(e)||(-1===e.index&&(e.index=this.effects.length),e._onModified=this._onChildValueChanged,this.effects.push(e),this.UpdateValues())}RemoveItem(e){const t=this.effects.indexOf(e);-1!==t&&(e._onModified=null,this.effects.splice(t,1),this.UpdateValues())}ClearItems(){for(let e=0;e<this.effects.length;e++)this.effects[e]._onModified=null,this.effects[e].ClearItems();this.effects=[],this.UpdateValues()}Update(e){if(this._dirty){this._visibleEffects=[];for(let e=0;e<this.effects.length;e++)this.effects[e].display&&this._visibleEffects.push(this.effects[e]);this._visibleEffects.sort((e,t)=>e.index-t.index),this._dirty=!1}for(let t=0;t<this.effects.length;t++)this.effects[t].Update(e)}Render(){if(!this.display)return this.KeepAlive(),!1;let e=0;for(let t=0;t<this._visibleEffects.length;t++)this._visibleEffects[t].Render()&&e++;return!!e}}i.Item=n.Tw2PostEffect},"./core/post/Tw2PostEffectStep.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectStep",function(){return a});var n=r("./global/util/index.js"),s=r("./core/mesh/Tw2Effect.js"),i=r("./global/class/Tw2BaseClass.js");class a extends i.Tw2BaseClass{constructor(...e){super(...e),this.index=-1,this.display=!0,this.effect=null,this.target=null,this.inputs={},this._renderTarget=null,this._dirty=!0}OnValueChanged(){this._dirty=!0}IsGood(){return!!this.effect&&this.effect.IsGood()}KeepAlive(){this.effect&&this.effect.KeepAlive()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}static from(e={}){const t=new this;return Object(n.assignIfExists)(t,e,["name","display","target","index"]),e.inputs&&Object.assign(t.inputs,e.inputs),t.effect=s.Tw2Effect.from({name:e.name,autoParameter:!0,effectFilePath:e.effectFilePath,parameters:e.parameters,textures:e.textures,overrides:e.overrides}),t}}},"./core/post/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/post/Tw2PostEffect.js");r.d(t,"Tw2PostEffect",function(){return n.Tw2PostEffect});var s=r("./core/post/Tw2PostEffectManager.js");r.d(t,"Tw2PostEffectManager",function(){return s.Tw2PostEffectManager});var i=r("./core/post/Tw2PostEffectStep.js");r.d(t,"Tw2PostEffectStep",function(){return i.Tw2PostEffectStep});var a=r("./core/post/Tr2PostProcess.js");r.d(t,"Tr2PostProcess",function(){return a.Tr2PostProcess})},"./core/reader/Tw2BinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BinaryReader",function(){return n});class n{constructor(e){this.data=null,this.cursor=0,this.data=e}ReadUInt8(){return this.data[this.cursor++]}ReadInt8(){let e=this.data[this.cursor++];return e>127&&(e=e-255-1),e}ReadUInt16(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)}ReadInt16(){let e=this.data[this.cursor++]+(this.data[this.cursor++]<<8);return e>32767&&(e=e-65535-1),e}ReadUInt32(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0)}ReadInt32(){let e=this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0);return e>2147483647&&(e=e-4294967295-1),e}ReadFloat16(){let e=this.data[this.cursor++],t=this.data[this.cursor++];const r=(t>>2&31)-15,n=(3&t)<<8|e;return 0===n&&-15===r?0:(1-2*(t>>7))*(1+n*Math.pow(2,-10))*Math.pow(2,r)}ReadFloat32(){let e=this.data[this.cursor++],t=this.data[this.cursor++],r=this.data[this.cursor++],n=this.data[this.cursor++];const s=(n<<1&255|r>>7)-127,i=(127&r)<<16|t<<8|e;return 0===i&&-127===s?0:(1-2*(n>>7))*(1+i*Math.pow(2,-23))*Math.pow(2,s)}ReadString(){const e=this.data[this.cursor++];let t="";for(let r=0;r<e;++r)t+=String.fromCharCode(this.data[this.cursor++]);return t}}},"./core/reader/Tw2BlackBinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackBinaryReader",function(){return s});var n=r("./core/Tw2Error.js");class s{constructor(e,t){this.data=null,this.context=null,this.cursor=0,this.data=e,this.context=t,this.cursor=0}get length(){return this.data.byteLength-this.cursor}get stringTable(){return this.context._stringTable}get references(){return this.context._ids}AtEnd(){return 0===this.length}ReadBinaryReader(e){return new s(this.ReadDataView(e),this.context)}ReadCString(){const e=this.data,t=this.cursor;for(;0!==this.ReadU8(););const r=e.byteOffset+t,n=this.cursor-t-1,i=new Uint8Array(e.buffer,r,n);return s.stringDecoder.decode(i)}ReadCWString(){const e=this.data,t=this.cursor;for(;0!==this.ReadU16(););const r=e.byteOffset+t,n=this.cursor-t-2,i=new Uint8Array(e.buffer,r,n);return s.wstringDecoder.decode(i)}ReadDataView(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:'Argument should be positive: got "'.concat(e,'"')});if(this.length<e)throw new n.ErrBinaryReaderReadError({readError:"Argument is too big: remaining ".concat(this.length,', got "').concat(e,'"')});const t=this.data,r=new DataView(t.buffer,t.byteOffset+this.cursor,e);return this.cursor+=e,r}ReadF32(){const e=this.data.getFloat32(this.cursor,!0);return this.cursor+=4,e}ReadF64(){const e=this.data.getFloat64(this.cursor,!0);return this.cursor+=8,e}ReadStringU16(){let e=this.ReadU16();if(e>this.stringTable.length)throw new n.ErrBinaryReaderReadError({readError:'Reading string "'.concat(e,'" but only ').concat(this.stringTable.length," exist")});return this.stringTable[e]}ReadU8(){let e=this.data.getUint8(this.cursor);return this.cursor+=1,e}ReadU16(){let e=this.data.getUint16(this.cursor,!0);return this.cursor+=2,e}ReadU16Array(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:'Argument should be positive but got "'.concat(e,'"')});let t=new Uint16Array(e);for(let r=0;r<e;r++)t[r]=this.ReadU16();return t}ReadU32(){let e=this.data.getUint32(this.cursor,!0);return this.cursor+=4,e}ReadU32Array(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:"Argument should be positive: got ".concat(e)});let t=new Uint32Array(e);for(let r=0;r<e;r++)t[r]=this.ReadU32();return t}ExpectEnd(e){if(0!==this.length)throw new n.ErrBinaryReaderReadError({readError:"".concat(e,": expected 0 bytes remaining, got ").concat(this.length)})}ExpectU8(e,t){s.expect(this.ReadU8(),e,t)}ExpectU16(e,t){s.expect(this.ReadU16(),e,t)}ExpectU32(e,t){s.expect(this.ReadU32(),e,t)}static expect(e,t,r){if(e!==t)throw new n.ErrBinaryReaderReadError({readError:"".concat(r,": expected ").concat(t,", got ").concat(e)})}}s.stringDecoder=new TextDecoder("utf-8"),s.wstringDecoder=new TextDecoder("utf-16le")},"./core/reader/Tw2BlackPropertyReaders.js":function(e,t,r){"use strict";r.r(t),r.d(t,"path",function(){return i}),r.d(t,"object",function(){return a}),r.d(t,"rawObject",function(){return o}),r.d(t,"array",function(){return u}),r.d(t,"boolean",function(){return c}),r.d(t,"string",function(){return l}),r.d(t,"enums",function(){return h}),r.d(t,"float",function(){return d}),r.d(t,"ushort",function(){return f}),r.d(t,"uint",function(){return m}),r.d(t,"byte",function(){return p}),r.d(t,"vector2",function(){return v}),r.d(t,"vector3",function(){return _}),r.d(t,"color",function(){return E}),r.d(t,"vector4",function(){return S}),r.d(t,"matrix",function(){return T}),r.d(t,"indexBuffer",function(){return g}),r.d(t,"struct",function(){return R}),r.d(t,"structList",function(){return b}),r.d(t,"plainFromArray",function(){return A}),r.d(t,"intercept",function(){return y});var n=r("./global/index.js"),s=r("./core/Tw2Error.js");function i(e){let t=e.ReadStringU16();0===t.indexOf("res:")&&(t="cdn:"+t.substring(4));let r="";const n=t.lastIndexOf(".");switch(-1!==n&&(r=t.substr(n+1).toLowerCase()),r){case"dds":case"png":t=(t=(t=t.replace("_lowdetail","")).replace("_mediumdetail","")).replace(r,"0.".concat(r));break;case"gr2":t=t.replace(r,"wbg").replace("cdn:","res:");break;case"red":t=t.replace(r,"black");break;case"sm_hi":case"sm_lo":t=t.replace(r,"fx");break;case"sm_depth":t=""}return t}function a(e,t){const r=e.context,i=void 0!==t,a=n.tw2.constructor.DEBUG_ENABLED;if(!i){if(0===(t=e.ReadU32()))return null;if(e.references.has(t))return e.references.get(t)}const o=e.ReadBinaryReader(e.ReadU32()),u=o.ReadStringU16(),c=r.ConstructType(u);if(i||e.references.set(t,c),!n.tw2.HasBlack(u))throw new s.ErrBinaryObjectTypeNotFound({type:u});let l=n.tw2.GetBlack(u);for(;!o.AtEnd();){let e=o.ReadStringU16();if(!l.has(e))throw a&&console.dir(c),new s.ErrBinaryReaderReadError({readError:'Unknown property "'.concat(e,'" for "').concat(u,'"')});try{const t=l.get(e);let r=!0;t.interceptor?void 0===t(o,c,e,c[e])&&(r=!1):c[e]=t(o),!r||e in c||!a||console.log("'".concat(u,"' missing property: '").concat(e,"'"))}catch(t){throw a&&console.dir(c),new s.ErrBinaryReaderReadError({readError:"".concat(e," > ")+t.message})}}return o.ExpectEnd("object did not read to end"),"Initialize"in c&&c.Initialize(),c}function o(e){return a(e,null)}function u(e){const t=[],r=e.ReadU32();for(let n=0;n<r;n++)t[n]=a(e);return t}function c(e){return 0!==e.ReadU8()}function l(e){return e.ReadStringU16()}function h(e){const t=e.ReadStringU16().split(","),r={};for(let e=0;e<t.length;e++){const n=t[e].split("=");r[n[0]]=Number(n[1])}return r}function d(e){return e.ReadF32()}function f(e){return e.ReadU16()}function m(e){return e.ReadU32()}function p(e){return e.ReadU8()}function v(e){return n.vec2.fromValues(e.ReadF32(),e.ReadF32())}function _(e){return n.vec3.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32())}function E(e){return n.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function S(e){return n.vec4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function T(e){return n.mat4.fromValues(e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function g(e){let t=e.ReadU32();if(4===e.ReadU16())return e.ReadU32Array(t);throw"unsupported for now"}function R(e){return function(t){return e.blackStruct(t)}}function b(e){return function(t){let r=t.ReadU32(),n=t.ReadU16(),s=[];for(let i=0;i<r;i++){const r=t.ReadBinaryReader(n);s[i]=e.blackStruct(r),r.ExpectEnd("struct read to end")}return s}}function A(e){return function(t){const r=u(t),n={};for(let t=0;t<r.length;t++){if(!(e in r[t]))throw new Error('Supplied key "'.concat(e,'" is missing from array element'));n[r[t][e]]=r[t]}return n}}function y(e){return e.interceptor=!0,e}},"./core/reader/Tw2BlackReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackReader",function(){return o});var n=r("./global/index.js"),s=r("./core/reader/Tw2BlackBinaryReader.js"),i=r("./core/Tw2Error.js"),a=r("./core/reader/Tw2BlackPropertyReaders.js");r("./global/util/index.js");class o{constructor(e){this.data=null,this._ids=null,this._comments=null,this._reader=null,this._start=0,this._stringTable=null,e&&(this.data=e instanceof ArrayBuffer?new DataView(e):e,this.Initialize())}Initialize(){if(!(this.data&&this.data instanceof DataView))throw new i.ErrBinaryFormat({formatError:"expected DataView"});const e=new s.Tw2BlackBinaryReader(this.data,this);if(2980901150!==e.ReadU32())throw new i.ErrBinaryFormat({formatError:"wrong FOURCC"});if(1!==e.ReadU32())throw new i.ErrBinaryFormat({formatError:"wrong version"});const t=e.ReadBinaryReader(e.ReadU32()),r=t.ReadU16();this._stringTable=[];for(let e=0;e<r;e++)this._stringTable[e]=t.ReadCString();t.ExpectEnd();const n=e.ReadBinaryReader(e.ReadU32()),a=n.ReadU16();this._comments=[];for(let e=0;e<a;e++)this._comments[e]=n.ReadCWString();n.ExpectEnd(),this._ids=new Map,this._reader=e,this._start=e.cursor}Construct(){return this._reader.cursor=this._start,Object(a.object)(this._reader)}ConstructType(e){if(n.tw2.HasClass(e)){return new(n.tw2.GetClass(e))}if(o.DEBUG_ENABLED)return{_type:e};throw new i.ErrBinaryObjectTypeNotFound({type:e})}}o.DEBUG_ENABLED=!0},"./core/reader/Tw2ObjectReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ObjectReader",function(){return a});var n=r("./global/index.js"),s=r("./core/reader/Tw2BinaryReader.js"),i=r("./core/Tw2Error.js");class a{constructor(e){this.xmlNode=null,this._inputStack=null,this._initializeObjects=null,this._ids={},this._reader=null,this._stringTable=null,this._start=null,e&&(this.xmlNode=e,e&&this.Initialize())}Initialize(){if(!a.IsValidXML(this.xmlNode))throw new i.ErrBinaryFormat({formatError:"Invalid binary, expected binred"});this._reader=new s.Tw2BinaryReader(new Uint8Array(this.xmlNode)),this._reader.cursor+=6,this._stringTable=[];const e=this._reader.ReadUInt32();for(let t=0;t<e;++t){const e=this._reader.ReadUInt16();this._stringTable.push(String.fromCharCode.apply(null,this._reader.data.subarray(this._reader.cursor,this._reader.cursor+e))),this._reader.cursor+=e}this._start=this._reader.cursor}Construct(){return this._reader.cursor=this._start,a.ReadElement(this)}static IsValidXML(e){return e&&"binred"===String.fromCharCode.apply(null,new Uint8Array(e).subarray(0,6))}static ConstructObject(e){if("json"===e.type)return e;let t;if(n.tw2.HasClass(e.type))t=n.tw2.GetClass(e.type);else{if(!a.DEBUG_ENABLED)throw new i.ErrBinaryObjectTypeNotFound({type:e.type});t=Object}const r=new t;for(let t in e)if(e.hasOwnProperty(t)&&"type"!==t)if(e[t].constructor===Object){if(this.DEBUG_ENABLED&&(r[t]=r[t]||{}),r[t])for(let n in e[t])e[t].hasOwnProperty(n)&&(r[t][n]=e[t][n])}else r[t]=e[t];return"Initialize"in r&&r.Initialize(),r}static ReadUint(e,t){switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return e._reader.ReadUInt16();default:return e._reader.ReadUInt32()}}static ReadElementData(e,t){let r,n,s,a,o;switch(15&t){case this.ElementRawType.NULL:return null;case this.ElementRawType.BOOL:switch(48&t){case this.ElementSize.SMALL:return 0!==e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return!1;default:return!0}case this.ElementRawType.INT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadInt8();case this.ElementSize.MEDIUM:return e._reader.ReadInt16();default:return e._reader.ReadInt32()}case this.ElementRawType.UINT:return this.ReadUint(e,t);case this.ElementRawType.FLOAT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadFloat16();case this.ElementSize.MEDIUM:return e._reader.ReadFloat32();default:throw new i.ErrFeatureNotImplemented({feature:"Element raw type Float64"})}case this.ElementRawType.STRING:return r=this.ReadUint(e,t),e._stringTable[r];case this.ElementRawType.ARRAY:for(a=this.ReadUint(e,t),s=[],n=0;n<a;++n)s.push(this.ReadElement(e));return s;case this.ElementRawType.MAPPING:for(a=this.ReadUint(e,t),s={},n=0;n<a;++n)s[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return s;case this.ElementRawType.OBJECT:for(a=this.ReadUint(e,t),s={},n=0;n<a;++n)s[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return this.ConstructObject(s);case this.ElementRawType.TYPED_ARRAY:for(a=this.ReadUint(e,t),o=e._reader.ReadUInt8(),s=[],n=0;n<a;++n)s.push(this.ReadElementData(e,o));return o in this.TypedArrays&&(s=new this.TypedArrays[o](s)),s;case this.ElementRawType.TYPED_MAPPING:for(a=this.ReadUint(e,t),o=e._reader.ReadUInt8(),s={},n=0;n<a;++n)s[e._stringTable[this.ReadUint(e,t)]]=this.ReadElementData(e,o);return s}}static ReadElement(e){const t=e._reader.ReadUInt8();if(t===this.REFERENCE_BIT)return e._ids[e._reader.ReadUInt16()];let r;0!=(t&this.ID_BIT)&&(r=e._reader.ReadUInt16());const n=this.ReadElementData(e,63&t);return 0!=(t&this.ID_BIT)&&(e._ids[r]=n),n}}a.DEBUG_ENABLED=!1,a.ID_BIT=64,a.REFERENCE_BIT=128,a.ElementRawType={NULL:0,BOOL:1,INT:2,UINT:3,FLOAT:4,STRING:5,ARRAY:6,MAPPING:7,OBJECT:8,TYPED_ARRAY:9,TYPED_MAPPING:10},a.ElementSize={SMALL:0,MEDIUM:16,LARGE:32},a.TypedArrays={2:Int8Array,3:Uint8Array,18:Int16Array,19:Uint16Array,34:Int32Array,35:Uint32Array,4:Float32Array,20:Float32Array,36:Float64Array};const o=a.ElementRawType,u=a.ElementSize;a.ElementTypes={NULL:o.NULL|u.SMALL,BOOL:o.BOOL|u.SMALL,FALSE:o.BOOL|u.MEDIUM,TRUE:o.BOOL|u.LARGE,INT8:o.INT|u.SMALL,UINT8:o.UINT|u.SMALL,INT16:o.INT|u.MEDIUM,UINT16:o.UINT|u.MEDIUM,INT32:o.INT|u.LARGE,UINT32:o.UINT|u.LARGE,FLOAT16:o.FLOAT|u.SMALL,FLOAT32:o.FLOAT|u.MEDIUM,FLOAT64:o.FLOAT|u.LARGE,SHORT_STRING:o.STRING|u.SMALL,MEDIUM_STRING:o.STRING|u.MEDIUM,LARGE_STRING:o.STRING|u.LARGE,SHORT_ARRAY:o.ARRAY|u.SMALL,MEDIUM_ARRAY:o.ARRAY|u.MEDIUM,LARGE_ARRAY:o.ARRAY|u.LARGE,SHORT_MAPPING:o.MAPPING|u.SMALL,MEDIUM_MAPPING:o.MAPPING|u.MEDIUM,LARGE_MAPPING:o.MAPPING|u.LARGE,SHORT_OBJECT:o.OBJECT|u.SMALL,MEDIUM_OBJECT:o.OBJECT|u.MEDIUM,LARGE_OBJECT:o.OBJECT|u.LARGE,SHORT_TYPED_ARRAY:o.TYPED_ARRAY|u.SMALL,MEDIUM_TYPED_ARRAY:o.TYPED_ARRAY|u.MEDIUM,LARGE_TYPED_ARRAY:o.TYPED_ARRAY|u.LARGE,SHORT_TYPED_MAPPING:o.TYPED_MAPPING|u.SMALL,MEDIUM_TYPED_MAPPING:o.TYPED_MAPPING|u.MEDIUM,LARGE_TYPED_MAPPING:o.TYPED_MAPPING|u.LARGE}},"./core/reader/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/Tw2BinaryReader.js");r.d(t,"Tw2BinaryReader",function(){return n.Tw2BinaryReader});var s=r("./core/reader/Tw2BlackReader.js");r.d(t,"Tw2BlackReader",function(){return s.Tw2BlackReader});var i=r("./core/reader/Tw2ObjectReader.js");r.d(t,"Tw2ObjectReader",function(){return i.Tw2ObjectReader})},"./core/resource/Tw2EffectRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EffectRes",function(){return o});var n=r("./core/reader/index.js"),s=r("./core/resource/Tw2Resource.js"),i=r("./core/resource/Tw2Shader.js"),a=r("./core/Tw2Error.js");class o extends s.Tw2Resource{constructor(...e){super(...e),this.passes=[],this.annotations={},this.permutations=[],this.offsets=[],this.reader=null,this.version=0,this.stringTable="",this.shaders={}}Prepare(e){this.permutations=[],this.offsets=[],this.passes=[],this.annotations={},this.reader=null,this.version=0,this.stringTable="",this.shaders={};const t=new n.Tw2BinaryReader(new Uint8Array(e));let r="";function s(){const e=t.ReadUInt32();let n=e;for(;r.charCodeAt(n);)++n;return r.substr(e,n-e)}const i=t.ReadUInt32();if(i<2||i>8)return void this.OnError(new a.ErrShaderVersion({path:this.path,version:i}));let o,u;if(i<5){if(0===(o=t.ReadUInt32()))return void this.OnError(new a.ErrShaderHeaderSize({path:this.path}));t.ReadUInt32();const e=t.ReadUInt32();t.cursor=8+3*o*4,u=t.ReadUInt32(),this.stringTableOffset=t.cursor,r=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+u)),t.cursor=e}else{u=t.ReadUInt32(),this.stringTableOffset=t.cursor,r=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+u)),t.cursor+=u;const e=t.ReadUInt8();for(let r=0;r<e;++r){let e={name:s(),defaultOption:t.ReadUInt8(),description:s(),type:t.ReadUInt8(),options:{},optionCount:t.ReadUInt8()};for(let t=0;t<e.optionCount;++t)e.options[s()]=t;this.permutations.push(e)}if(0===(o=t.ReadUInt32()))return void this.OnError(new a.ErrShaderHeaderSize({path:this.path}));for(let e=0;e<o;++e)this.offsets.push({index:t.ReadUInt32(),offset:t.ReadUInt32(),size:t.ReadUInt32()});t.ReadUInt32(),t.cursor=t.ReadUInt32()}this.reader=t,this.version=i,this.stringTable=r,this.OnPrepared()}GetShader(e){if(!this.IsGood())return null;let t=0,r=1;for(let n=0;n<this.permutations.length;++n){let s=this.permutations[n],i=s.defaultOption;if(e.hasOwnProperty(s.name)){let t=e[s.name];if(!s.options.hasOwnProperty(t))return this.OnError(new a.ErrShaderPermutationValue({path:this.path,permutation:s.name,valueName:t})),null;i=s.options[t]}t+=i*r,r*=s.optionCount}if(this.shaders.hasOwnProperty(t))return this.shaders[t];this.reader.cursor=this.offsets[t].offset;let n=null;try{n=new i.Tw2Shader(this.reader,this.version,this.stringTable,this.stringTableOffset,this.path)}catch(e){return this.OnError(e),null}return this.shaders[t]=n,n}}o.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2GeometryRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryRes",function(){return c});var n=r("./global/index.js"),s=r("./core/reader/index.js"),i=r("./core/vertex/index.js"),a=r("./core/resource/Tw2Resource.js"),o=r("./core/Tw2Error.js"),u=r("./core/geometry/index.js");class c extends a.Tw2Resource{constructor(...e){super(...e),this.meshes=[],this.minBounds=n.vec3.fromValues(0,0,0),this.maxBounds=n.vec3.fromValues(0,0,0),this.boundsSpherePosition=n.vec3.create(),this.boundsSphereRadius=0,this.models=[],this.animations=[],this.systemMirror=n.resMan.systemMirror}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){const t=this.minBounds,r=this.maxBounds;n.box3.bounds.empty(t,r);for(let s=0;s<this.meshes.length;s++){const i=this.meshes[s];i.RebuildBounds(e),n.box3.bounds.union(t,r,t,r,i.minBounds,i.maxBounds)}this.boundsSphereRadius=n.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}GetInstanceBuffer(e){return e<this.meshes.length?this.meshes[e].buffer:void 0}GetInstanceDeclaration(e){return this.meshes[e].declaration}GetInstanceStride(e){return this.meshes[e].declaration.stride}GetInstanceCount(e){return 4*this.meshes[e].bufferLength/this.meshes[e].declaration.stride}Prepare(e){const t=n.device.gl,r=new s.Tw2BinaryReader(new Uint8Array(e));r.ReadUInt8();const i=r.ReadUInt8();for(let e=0;e<i;++e){const s=new u.Tw2GeometryMesh;s.name=r.ReadString();const i=c.ReadVertexBuffer(r,s.declaration,this.path);i?(s.bufferLength=i.length,s.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s.buffer),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)):s.buffer=null;const a=c.ReadIndexBuffer(r);a?(s.indexes=t.createBuffer(),s.indexType=2===a.BYTES_PER_ELEMENT?t.UNSIGNED_SHORT:t.UNSIGNED_INT,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s.indexes),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW)):s.indexes=null;const o=r.ReadUInt8();for(let e=0;e<o;++e){const e=new u.Tw2GeometryMeshArea;s.areas.push(e),e.name=r.ReadString(),e.start=r.ReadUInt32()*a.BYTES_PER_ELEMENT,e.count=3*r.ReadUInt32(),n.vec3.set(e.minBounds,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()),n.vec3.set(e.maxBounds,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()),e.boundsSphereRadius=n.box3.bounds.toPositionRadius(e.minBounds,e.maxBounds,e.boundsSpherePosition),n.box3.bounds.isEmpty(e.minBounds,e.maxBounds)&&(s.RebuildAreaBounds(e,i,a,!0)||console.log("Could not generate bounds for area: "+e.name||!1))}const l=r.ReadUInt8();s.boneBindings=[];for(let e=0;e<l;++e)s.boneBindings[e]=r.ReadString();const h=r.ReadUInt16();if((h||this.systemMirror)&&(s.bufferData=i,s.indexData=a),h){s.blendShapes=[];for(let e=0;e<h;++e)s.blendShapes[e]=new u.Tw2BlendShapeData,s.blendShapes[e].name=r.ReadString(),s.blendShapes[e].buffer=c.ReadVertexBuffer(r,s.blendShapes[e].declaration,this.path),s.blendShapes[e].indexes=c.ReadIndexBuffer(r)}s._areas=o,s._faces=a.length/3,s._vertices=i.length/(s.declaration.stride/4),this.meshes[e]=s}this.RebuildBounds();const a=r.ReadUInt8();for(let e=0;e<a;++e){const e=new u.Tw2GeometryModel;e.name=r.ReadString(),e.skeleton=new u.Tw2GeometrySkeleton;const t=r.ReadUInt8();for(let s=0;s<t;++s){const t=new u.Tw2GeometryBone;t.name=r.ReadString();const i=r.ReadUInt8();if(t.parentIndex=r.ReadUInt8(),255===t.parentIndex&&(t.parentIndex=-1),0!=(1&i)?n.vec3.set(t.position,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()):n.vec3.set(t.position,0,0,0),0!=(2&i)?n.quat.set(t.orientation,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()):n.quat.identity(t.orientation),0!=(4&i))for(let e=0;e<9;++e)t.scaleShear[e]=r.ReadFloat32();else n.mat3.identity(t.scaleShear);e.skeleton.bones[s]=t}for(let t=0;t<e.skeleton.bones.length;++t)e.skeleton.bones[t].UpdateTransform(),-1!==e.skeleton.bones[t].parentIndex?n.mat4.multiply(e.skeleton.bones[t].worldTransform,e.skeleton.bones[e.skeleton.bones[t].parentIndex].worldTransform,e.skeleton.bones[t].localTransform):n.mat4.copy(e.skeleton.bones[t].worldTransform,e.skeleton.bones[t].localTransform),n.mat4.invert(e.skeleton.bones[t].worldTransformInv,e.skeleton.bones[t].worldTransform);const s=r.ReadUInt8();for(let t=0;t<s;++t){const t=r.ReadUInt8();t<this.meshes.length&&c.BindMeshToModel(this.meshes[t],e,this)}this.models[this.models.length]=e}const o=r.ReadUInt8();for(let e=0;e<o;++e){const e=new u.Tw2GeometryAnimation;e.name=r.ReadString(),e.duration=r.ReadFloat32();const t=r.ReadUInt8();for(let n=0;n<t;++n){const t=new u.Tw2GeometryTrackGroup;t.name=r.ReadString();for(let e=0;e<this.models.length;++e)if(this.models[e].name===t.name){t.model=this.models[e];break}const n=r.ReadUInt8();for(let e=0;e<n;++e){const e=new u.Tw2GeometryTransformTrack;if(e.name=r.ReadString(),e.orientation=c.ReadCurve(r),e.position=c.ReadCurve(r),e.scaleShear=c.ReadCurve(r),e.orientation){let t=0,r=0,n=0,s=0;for(let i=0;i<e.orientation.controls.length;i+=4){let a=e.orientation.controls[i],o=e.orientation.controls[i+1],u=e.orientation.controls[i+2],c=e.orientation.controls[i+3];t*a+r*o+n*u+s*c<0&&(e.orientation.controls[i]=-a,e.orientation.controls[i+1]=-o,e.orientation.controls[i+2]=-u,e.orientation.controls[i+3]=-c),t=a,r=o,n=u,s=c}}t.transformTracks[t.transformTracks.length]=e}e.trackGroups[e.trackGroups.length]=t}this.animations[this.animations.length]=e}this.OnPrepared()}static BindMeshToModel(e,t,r){const n=new u.Tw2GeometryMeshBinding;n.mesh=e;for(let e=0;e<n.mesh.boneBindings.length;++e){const s=n.mesh.boneBindings[e],i=t.FindBoneByName(s);if(!i)throw new o.ErrGeometryMeshBoneNameInvalid({path:r.path,mesh:n.mesh.name,bone:s,model:t.name});n.bones[n.bones.length]=i}t.meshBindings[t.meshBindings.length]=n}RenderAreasInstanced(e,t,r,s,i,a,u,c,l){if(this.KeepAlive(),!this.IsGood()||!s.IsGood()||e>=this.meshes.length)return!1;const h=n.device,d=h.gl,f=this.meshes[e],m=s.GetPassCount(i);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,f.indexes);for(let e=0;e<m;++e){s.ApplyPass(i,e);const n=s.GetPassInput(i,e);if(0===n.elements.length)continue;d.bindBuffer(d.ARRAY_BUFFER,f.buffer),f.declaration.SetPartialDeclaration(h,n,f.declaration.stride),d.bindBuffer(d.ARRAY_BUFFER,a);const m=u.SetPartialDeclaration(h,n,c,8,1);h.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<f.areas.length){let n=f.areas[e+t],s=n.start,i=n.count;for(;e+1<r;){if(!(n=f.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==s+2*i)break;i+=n.count,++e}d.drawElementsInstanced(d.TRIANGLES,i,f.indexType,s,l)}u.ResetInstanceDivisors(h,m)}return!0}RenderAreas(e,t,r,s,i){if(this.KeepAlive(),!this.IsGood()||!s.IsGood()||e>=this.meshes.length)return!1;const a=n.device,u=a.gl,c=this.meshes[e]||this.meshes[0],l=s.GetPassCount(i);u.bindBuffer(u.ARRAY_BUFFER,c.buffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,c.indexes);for(let e=0;e<l;++e){s.ApplyPass(i,e);const n=s.GetPassInput(i,e);if(!c.declaration.SetDeclaration(a,n,c.declaration.stride))return this.OnError(new o.ErrGeometryMeshEffectBinding({path:this.path,pass:e,passInput:n,meshStride:c.declaration.stride})),!1;a.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<c.areas.length){let n=c.areas[e+t],s=n.start,i=n.count;for(;e+1<r;){if(!(n=c.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==s+2*i)break;i+=n.count,++e}u.drawElements(u.TRIANGLES,i,c.indexType,s)}}return!0}RenderLines(e,t,r,s,i){if(this.KeepAlive(),!this.IsGood()||!s.IsGood()||e>=this.meshes.length)return!1;const a=n.device,u=a.gl,c=this.meshes[e],l=s.GetPassCount(i);u.bindBuffer(u.ARRAY_BUFFER,c.buffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,c.indexes);for(let e=0;e<l;++e){s.ApplyPass(i,e);const n=s.GetPassInput(i,e);if(!c.declaration.SetDeclaration(a,n,c.declaration.stride))return this.OnError(new o.ErrGeometryMeshEffectBinding({path:this.path,pass:e,passInput:n,meshStride:c.declaration.stride})),!1;a.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<c.areas.length){let n=c.areas[e+t],s=n.start,i=n.count;for(;e+1<r;){if(!(n=c.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==s+2*i)break;i+=n.count,++e}u.drawElements(u.LINES,i,c.indexType,s)}}return!0}RenderDebugInfo(e){if(!this.IsGood())return!1;for(let t=0;t<this.models.length;++t)if(this.models[t].skeleton)for(let r=0;r<this.models[t].skeleton.bones.length;++r){const n=this.models[t].skeleton.bones[r];if(n.parentIndex>=0){const r=this.models[t].skeleton.bones[n.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[r.worldTransform[12],r.worldTransform[13],r.worldTransform[14]],[0,.7,0,1],[0,.7,0,1])}}}Unload(e){for(let e=0;e<this.meshes.length;++e){const t=n.device.gl;this.meshes[e].buffer&&(t.deleteBuffer(this.meshes[e].buffer),this.meshes[e].buffer=null),this.meshes[e].indexes&&(t.deleteBuffer(this.meshes[e].indexes),this.meshes[e].indexes=null)}return this.OnUnloaded(e),!0}static ReadVertexBuffer(e,t,r){const s=e.ReadUInt8();let a=0;for(let r=0;r<s;++r){let s=new i.Tw2VertexElement;s.usage=e.ReadUInt8(),s.usageIndex=e.ReadUInt8(),s.fileType=e.ReadUInt8(),s.type=n.device.gl.FLOAT,s.elements=1+(s.fileType>>5),s.offset=4*a,t.elements[r]=s,a+=s.elements}t.RebuildHash(),t.stride=4*a;const u=e.ReadUInt32();if(0===u)return null;const c=new Float32Array(a*u);let l=0;for(let n=0;n<u;++n)for(let n=0;n<s;++n){let s=t.elements[n];switch(15&s.fileType){case 0:if(0!=(16&s.fileType))for(let t=0;t<s.elements;++t)c[l++]=e.ReadInt8()/127;else for(let t=0;t<s.elements;++t)c[l++]=e.ReadInt8();break;case 1:if(0!=(16&s.fileType))for(let t=0;t<s.elements;++t)c[l++]=e.ReadInt8()/32767;else for(let t=0;t<s.elements;++t)c[l++]=e.ReadInt16();break;case 2:for(let t=0;t<s.elements;++t)c[l++]=e.ReadInt32();break;case 3:for(let t=0;t<s.elements;++t)c[l++]=e.ReadFloat16();break;case 4:for(let t=0;t<s.elements;++t)c[l++]=e.ReadFloat32();break;case 8:if(0!=(16&s.fileType))for(let t=0;t<s.elements;++t)c[l++]=e.ReadUInt8()/255;else for(let t=0;t<s.elements;++t)c[l++]=e.ReadUInt8();break;case 9:if(0!=(16&s.fileType))for(let r=0;r<t.elements[n].elements;++r)c[l++]=e.ReadUInt8()/65535;else for(let t=0;t<s.elements;++t)c[l++]=e.ReadUInt16();break;case 10:for(let t=0;t<s.elements;++t)c[l++]=e.ReadUInt32();break;default:throw new o.ErrGeometryFileType({path:r,key:"fileType",value:15&s.fileType})}}return c}static ReadIndexBuffer(e){const t=e.ReadUInt8(),r=e.ReadUInt32();if(0===t){const t=new Uint16Array(r);for(let n=0;n<r;++n)t[n]=e.ReadUInt16();return t}{const t=new Uint32Array(r);for(let n=0;n<r;++n)t[n]=e.ReadUInt32();return t}}static ReadCurve(e){if(0===e.ReadUInt8())return null;const t=new u.Tw2GeometryCurve;t.dimension=e.ReadUInt8(),t.degree=e.ReadUInt8();const r=e.ReadUInt32();t.knots=new Float32Array(r);for(let n=0;n<r;++n)t.knots[n]=e.ReadFloat32();const n=e.ReadUInt32();t.controls=new Float32Array(n);for(let r=0;r<n;++r)t.controls[r]=e.ReadFloat32();return t}static black(e){return[]}}c.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2LoadingObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LoadingObject",function(){return u});var n=r("./global/index.js"),s=r("./core/resource/Tw2Resource.js"),i=r("./core/reader/Tw2ObjectReader.js"),a=r("./core/reader/Tw2BlackReader.js"),o=r("./core/Tw2Error.js");class u extends s.Tw2Resource{constructor(...e){super(...e),this.path="",this._view=null,this._inPrepare=null,this._objects=[],this._constructor=null}AddObject(e,t){const r=this.GetLastError();r?t&&t(r):this._objects.push({onResolved:e,onRejected:t})}Prepare(e){const t=this.path.lastIndexOf(".");if(-1===t)return null;const r=this.path.substr(t+1);let n;if(null===this._inPrepare){switch(this._view=e,r){case"red":this._constructor=new i.Tw2ObjectReader(e);break;case"black":this._constructor=new a.Tw2BlackReader(e);break;default:throw new o.ErrResourceExtensionUnregistered({extension:r})}this._inPrepare=0,n=this._constructor.Construct()}for(;this._inPrepare<this._objects.length;){const e=this._objects[this._inPrepare];try{n?(e.onResolved(n),n=null):e.onResolved(this._constructor.Construct())}catch(t){e.onRejected&&(e.onRejected(t),e.onRejected=null),this.OnWarning({err:t,message:"Error preparing child object"})}this._inPrepare++}this.OnPrepared()}OnError(e){super.OnError(e);for(let t=0;t<this._objects.length;t++)this._objects[t].onRejected&&this._objects[t].onRejected(e);return n.resMan.motherLode.Remove(this.path),this._objects.splice(0),e}OnPrepared(e){n.resMan.motherLode.Remove(this.path),this._objects.splice(0),super.OnPrepared(e)}}u.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2LodResource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LodResource",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{get highDetailRes(){return this.GetLODResource(3)}get mediumDetailRes(){return this.GetLODResource(2)}get lowDetailRes(){return this.GetLODResource(1)}constructor(e="",t){super(),this.name="",this.highDetailResPath="",this.lowDetailResPath="",this.mediumDetailResPath="",this.name=e,t&&this.SetPaths(...t)}SetPaths(e="",t="",r=""){let n=!1;return e!==this.highDetailResPath&&(this.highDetailResPath=e,n=!0),t!==this.mediumDetailResPath&&(this.mediumDetailResPath=t,n=!0),r!==this.lowDetailResPath&&(this.lowDetailResPath=r,n=!0),n}GetLODResource(e=3){const t=this.highDetailResPath,r=this.mediumDetailResPath,s=this.lowDetailResPath;let i;return e>2?t?i=t:r?i=r:s&&(i=s):2===e?r?i=r:t?i=t:s&&(i=s):s?i=s:r?i=r:t&&(i=t),i?n.resMan.GetResource(i):null}static from(e){const t=new s;return e&&(t.name=e.name||"",t.SetPaths(e.highDetailResPath,e.mediumDetailResPath,e.lowDetailResPath)),t}static black(e){return[["name",e.string],["highDetailResPath",e.path],["lowDetailResPath",e.path],["mediumDetailResPath",e.path]]}}s.__isStaging=2},"./core/resource/Tw2Resource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Resource",function(){return o});var n=r("./global/index.js"),s=r("./core/Tw2Error.js"),i=r("./global/util/index.js"),a=r("./global/class/Tw2Notifications.js");class o extends a.Tw2Notifications{constructor(...e){super(...e),this.path="",this.activeFrame=0,this.doNotPurge=0,this._state=o.State.NO_INIT,this._errors=[],this._requested=0}IsGood(){return this.KeepAlive(),this.IsPrepared()||this.IsLoaded()}IsRequested(){return this._state===o.State.REQUESTED}IsLoaded(){return this._state===o.State.LOADED}IsPrepared(){return this._state===o.State.PREPARED}IsUnloaded(){return this._state===o.State.UNLOADED}IsPurged(){return this._state===o.State.PURGED}HasErrors(){return this._state===o.State.ERROR}HasCompleted(){return this.HasErrors()||this.IsPurged()||this.IsPrepared()}Unload(e){return!1}Reload(e){(this.IsLoaded()||this.IsPrepared())&&this.Unload({hide:!0,detail:"reloading"}),(this.IsPurged()||this.IsUnloaded())&&n.resMan.LoadResource(this,e)}KeepAlive(){this.activeFrame=n.resMan.activeFrame,(this.IsPurged()||this.IsUnloaded())&&this.Reload({hide:!0,detail:"inuse"})}GetErrors(){return Array.from(this._errors)}GetLastError(){return this._errors[0]}OnWarning(e){n.resMan.OnPathEvent(this.path,"warning",e),this.UpdateNotifications(o.Callback.WARNING)}OnDebug(e){n.resMan.OnPathEvent(this.path,"debug",e),this.UpdateNotifications(o.Callback.DEBUG)}OnError(e=new s.Tw2Error){let t=this.IsLoaded()||this.IsPrepared();return this._errors.includes(e)||this._errors.unshift(e),this._SetState(o.State.ERROR),t&&this.Unload({hide:!0,detail:"errored"}),n.resMan.OnPathEvent(this.path,"error",e),this.UpdateNotifications(o.Callback.ERROR,e),e}OnRequested(e){const t=this._state===o.State.NO_INIT?"REQUESTED":"RELOADING";this._SetState(o.State.REQUESTED)&&(this._requested=Date.now(),n.resMan.OnPathEvent(this.path,t.toLowerCase(),e),this.UpdateNotifications(o.Callback[t]))}OnLoaded(e={}){this._SetState(o.State.LOADED)&&(e.time=.001*(Date.now()-this._requested),n.resMan.OnPathEvent(this.path,"loaded",e),this.UpdateNotifications(o.Callback.LOADED))}OnPrepared(e={}){this._SetState(o.State.PREPARED)&&(e.time=.001*(Date.now()-this._requested),n.resMan.OnPathEvent(this.path,"prepared",e),this.UpdateNotifications(o.Callback.PREPARED))}OnUnloaded(e){this._SetState(o.State.UNLOADED)&&(n.resMan.OnPathEvent(this.path,"unloaded",e),this.UpdateNotifications(o.Callback.UNLOADED))}OnPurged(e){this._SetState(o.State.PURGED),n.resMan.OnPathEvent(this.path,"purged",e),this.UpdateNotifications(o.Callback.PURGED,this.GetLastError())}_SetState(e){return this._state!==o.State.ERROR&&(this._state=e,!0)}RegisterCallbacks(e,t){if(this.KeepAlive(),!e&&!t)return;this.RegisterNotification(function(r,n){return!!r.HasCompleted()&&(n?t&&t(n):e&&e(r),!0)})}static onNotification(e,t){let r,n;switch(e._state){case o.State.ERROR:r=o.Callback.ERROR,n=e.GetLastError();break;case o.State.REQUESTED:r=o.Callback.REQUESTED;break;case o.State.LOADED:r=o.Callback.LOADED;break;case o.State.PREPARED:r=o.Callback.PREPARED;break;case o.State.UNLOADED:r=o.Callback.UNLOADED;break;case o.State.PURGED:r=o.Callback.PURGED,n=e.GetLastError()}return Object(i.isFunction)(t)?!!t(e,n,r):!!(r&&r in t)&&!!t[r](e,n)}}o.__isResource=!0,o.State={ERROR:-3,PURGED:-2,UNLOADED:-1,NO_INIT:0,REQUESTED:1,LOADED:2,PREPARED:3},o.Callback={ERROR:"OnResError",PURGED:"OnResPurged",UNLOADED:"OnResUnloaded",REQUESTED:"OnResRequested",LOADED:"OnResLoaded",PREPARED:"OnResPrepared",WARNING:"OnResWarning",DEBUG:"OnResDebug"},o.prototype.DoCustomLoad=null,o.prototype.requestResponseType=null},"./core/resource/Tw2Shader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Shader",function(){return u});var n=r("./global/index.js"),s=r("./core/vertex/index.js"),i=r("./core/sampler/index.js"),a=r("./core/Tw2Error.js"),o=r("./core/resource/shaderOverrides.json");class u{constructor(e,t,r,a,o){function c(){const t=e.ReadUInt32();let n=t;for(;r.charCodeAt(n);)++n;return r.substr(t,n-t)}this.techniques={},this.annotations={};const{wrapModes:l,gl:h}=n.device;let d=1;t>6&&(d=e.ReadUInt8());for(let f=0;f<d;++f){let d={name:"Main",passes:[]};t>6&&(d.name=c()),this.techniques[d.name]=d;const f=e.ReadUInt8();for(let m=0;m<f;++m){const f={stages:[{},{}]},p=e.ReadUInt8();let v=!0;for(let d=0;d<p;++d){const d={};d.inputDefinition=new s.Tw2VertexDeclaration,d.constants=[],d.textures=[],d.samplers=[];const m=e.ReadUInt8(),p=e.ReadUInt8();d.stageType=0===m?"vertex":"fragment";for(let t=0;t<p;++t){const r=e.ReadUInt8(),n=e.ReadUInt8(),i=e.ReadUInt8(),a=e.ReadUInt8();d.inputDefinition.elements[t]=s.Tw2VertexElement.from({usage:r,usageIndex:i,type:0,registerIndex:n,usedMask:a})}let _,E,S,T;if(d.inputDefinition.RebuildHash(),t<5)_=e.ReadUInt32(),E=e.data.subarray(e.cursor,e.cursor+_),e.cursor+=_,S=e.ReadUInt32(),T=e.data.subarray(e.cursor,e.cursor+S),e.cursor+=S;else{_=e.ReadUInt32();let t=e.ReadUInt32();E=u.InspectShaderCode(r.substr(t,_),o),S=e.ReadUInt32(),t=e.ReadUInt32(),T=u.InspectShaderCode(r.substr(t,S),o),u.DEBUG_ENABLED&&(d.shaderCode=E,d.shadowShaderCode=T)}try{d.shader=u.CompileShader(m,"",E,o)}catch(e){throw console.group(),console.error(e.message),console.dir(d),console.groupEnd(),e}v?(d.shadowShader=0===S?u.CompileShader(m,"\n#define PS\n",E,o,!0):u.CompileShader(m,"",T,o,!0),null===d.shadowShader&&(v=!1)):d.shadowShader=null,t>=3&&(e.ReadUInt32(),e.ReadUInt32(),e.ReadUInt32()),d.constantSize=0;const g=e.ReadUInt32();for(let t=0;t<g;++t){const r={};if(r.name=c(),r.offset=e.ReadUInt32()/4,r.size=e.ReadUInt32()/4,r.type=e.ReadUInt8(),r.dimension=e.ReadUInt8(),r.elements=e.ReadUInt32(),r.isSRGB=e.ReadUInt8(),r.isAutoregister=e.ReadUInt8(),d.constants[t]=r,u.ConstantIgnore.includes(r.name))continue;const n=r.offset+r.size;n>d.constantSize&&(d.constantSize=n)}const R=e.ReadUInt32()/4;if(d.constantValues=new Float32Array(R),t<5)for(let t=0;t<R;++t)d.constantValues[t]=e.ReadFloat32();else{const t=e.ReadUInt32(),r=e.cursor;e.cursor=a+t;for(let t=0;t<R;++t)d.constantValues[t]=e.ReadFloat32();e.cursor=r}d.constantSize=Math.max(d.constantSize,R);let b=e.ReadUInt8();for(let t=0;t<b;++t){const t={};t.registerIndex=e.ReadUInt8(),t.name=c(),t.type=e.ReadUInt8(),t.isSRGB=e.ReadUInt8(),t.isAutoregister=e.ReadUInt8(),d.textures.push(t)}const A=e.ReadUInt8();for(let r=0;r<A;++r){const r=new i.Tw2SamplerState;if(r.registerIndex=e.ReadUInt8(),r.name=t>=4?c():"",r._comparison=e.ReadUInt8(),r.minFilter=e.ReadUInt8(),r.magFilter=e.ReadUInt8(),r.mipFilter=e.ReadUInt8(),r.addressU=e.ReadUInt8(),r.addressV=e.ReadUInt8(),r.addressW=e.ReadUInt8(),r.mipLODBias=e.ReadFloat32(),r._maxAnisotropy=e.ReadUInt8(),r._comparisonFunc=e.ReadUInt8(),r._borderColor=n.quat.fromValues(e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32()),r._minLOD=e.ReadFloat32(),r._maxLOD=e.ReadFloat32(),t<4&&e.ReadUInt8(),1===r.minFilter){switch(r.mipFilter){case 0:r.minFilter=h.NEAREST;break;case 1:r.minFilter=h.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=h.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=h.NEAREST}else{switch(r.mipFilter){case 0:r.minFilter=h.LINEAR;break;case 1:r.minFilter=h.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=h.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=h.LINEAR}r.magFilter=1===r.magFilter?h.NEAREST:h.LINEAR,r.addressU=l[r.addressU],r.addressV=l[r.addressV],r.addressW=l[r.addressW],3!==r.minFilter&&3!==r.magFilter&&3!==r.mipFilter||(r.anisotropy=Math.max(r.maxAnisotropy,1));for(let e=0;e<d.textures.length;++e)if(d.textures[e].registerIndex===r.registerIndex){r.samplerType=4===d.textures[e].type?h.TEXTURE_CUBE_MAP:h.TEXTURE_2D,r.isVolume=3===d.textures[e].type;break}r.ComputeHash(),d.samplers.push(r)}t>=3&&e.ReadUInt8(),t>7&&e.ReadUInt8(),f.stages[m]=d}f.states=[];const _=e.ReadUInt8();for(let t=0;t<_;++t){const t=e.ReadUInt32(),r=e.ReadUInt32();f.states.push({state:t,value:r})}f.shaderProgram=u.CreateProgram(f.stages[0].shader,f.stages[1].shader,f,o),v?(f.shadowShaderProgram=u.CreateProgram(f.stages[0].shadowShader,f.stages[1].shadowShader,f,o,!0),null===f.shadowShaderProgram&&(f.shadowShaderProgram=f.shaderProgram)):f.shadowShaderProgram=f.shaderProgram,d.passes[m]=f}}const f=e.ReadUInt16();for(let t=0;t<f;++t){const t=c(),r=[],n=e.ReadUInt8();for(let t=0;t<n;++t)switch(r[t]={},r[t].name=c(),r[t].type=e.ReadUInt8(),r[t].type){case 0:r[t].value=0!==e.ReadUInt32();break;case 1:r[t].value=e.ReadInt32();break;case 2:r[t].value=e.ReadFloat32();break;default:r[t].value=c()}this.annotations[t]=r}}ApplyPass(e,t){const r=n.device,s=r.gl;t=this.techniques[e].passes[t];for(let e=0;e<t.states.length;++e)r.SetRenderState(t.states[e].state,t.states[e].value);r.IsAlphaTestEnabled()?(s.useProgram(t.shadowShaderProgram.program),r.shadowHandles=t.shadowShaderProgram):(s.useProgram(t.shaderProgram.program),r.shadowHandles=null)}HasConstant(e){return this.constructor.Has(this.techniques,"constants",e)}HasTexture(e){return this.constructor.Has(this.techniques,"textures",e)}HasSampler(e){return this.constructor.Has(this.techniques,"samplers",e)}static Has(e,t,r){for(const n in e)if(e.hasOwnProperty(n)){const s=e[n];for(let e=0;e<s.passes.length;e++){const n=s.passes[e];for(let e=0;e<n.stages.length;e++){const s=n.stages[e];for(let e=0;e<s[t].length;e++)if(s[t][e].name===r)return!0}}}return!1}static CompileShader(e,t,r,s,i){const o=n.device.gl,u=o.createShader(0===e?o.VERTEX_SHADER:o.FRAGMENT_SHADER),c=n.device.GetExtension("CCP_shader_binary");if(c)c.shaderBinary(u,r);else{let e=t+(n.util.isString(r)?r:String.fromCharCode.apply(null,r));e=e.substr(0,e.length-1),o.shaderSource(u,e),o.compileShader(u)}if(!o.getShaderParameter(u,o.COMPILE_STATUS)){if(!i)throw new a.ErrShaderCompile({path:s,shaderType:0===e?"vertex":"fragment",infoLog:o.getShaderInfoLog(u)});return null}return u}static CreateProgram(e,t,r,i,o){const u=n.device.gl,c={};if(c.program=u.createProgram(),u.attachShader(c.program,e),u.attachShader(c.program,t),u.linkProgram(c.program),!u.getProgramParameter(c.program,u.LINK_STATUS)){if(!o)throw new a.ErrShaderLink({path:i,infoLog:u.getProgramInfoLog(c.program)});return null}u.useProgram(c.program),c.constantBufferHandles=[];for(let e=0;e<16;++e)c.constantBufferHandles[e]=u.getUniformLocation(c.program,"cb"+e);c.samplerHandles=[];for(let e=0;e<16;++e)c.samplerHandles[e]=u.getUniformLocation(c.program,"s"+e),u.uniform1i(c.samplerHandles[e],e);for(let e=0;e<16;++e)c.samplerHandles[e+12]=u.getUniformLocation(c.program,"vs"+e),u.uniform1i(c.samplerHandles[e+12],e+12);c.input=new s.Tw2VertexDeclaration;for(let e=0;e<r.stages[0].inputDefinition.elements.length;++e){const t="attr"+e;let n=u.getAttribLocation(c.program,t);if(n>=0){const i=s.Tw2VertexElement.from({usage:r.stages[0].inputDefinition.elements[e].usage,usageIndex:r.stages[0].inputDefinition.elements[e].usageIndex,location:n,attr:t});c.input.elements.push(i)}}c.input.RebuildHash(),c.shadowStateInt=u.getUniformLocation(c.program,"ssi"),c.shadowStateFloat=u.getUniformLocation(c.program,"ssf"),c.shadowStateYFlip=u.getUniformLocation(c.program,"ssyf"),u.uniform3f(c.shadowStateYFlip,0,0,1),c.volumeSlices=[];for(let e=0;e<r.stages[1].samplers.length;++e)r.stages[1].samplers[e].isVolume&&(c.volumeSlices[r.stages[1].samplers[e].registerIndex]=u.getUniformLocation(c.program,"s"+r.stages[1].samplers[e].registerIndex+"sl"));return c}static InspectShaderCode(e,t){const r=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")).toLowerCase(),n=o[r];if(!n)return e;for(const t in n)n.hasOwnProperty(t)&&(e=e.replace(t,n[t]));return e}}u.ConstantIgnore=["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS"],u.DEBUG_ENABLED=!1},"./core/resource/Tw2TextureRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureRes",function(){return a});var n=r("./core/resource/Tw2Resource.js"),s=r("./core/Tw2Error.js"),i=r("./global/index.js");class a extends n.Tw2Resource{constructor(...e){super(...e),this.texture=null,this.isCube=!1,this.width=0,this.height=0,this.hasMipMaps=!1,this._currentSampler=0,this._isAttached=!1,this._extension=""}Prepare(e){const t=i.device.gl,r="ccpGLFormat"in e?e.ccpGLFormat:t.RGBA;switch(this._extension){case"cube":this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture);const n=document.createElement("canvas");n.width=n.height=e.height;const o=n.getContext("2d");for(let s=0;s<6;++s)o.drawImage(e,s*n.width,0,n.width,n.height,0,0,n.width,n.height),t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,r,r,t.UNSIGNED_BYTE,n);t.generateMipmap(t.TEXTURE_CUBE_MAP),t.bindTexture(t.TEXTURE_CUBE_MAP,null),this.width=n.width,this.height=n.height,this.hasMipMaps=!0;break;case"png":this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,r,r,t.UNSIGNED_BYTE,e),this.hasMipMaps=a.IsPowerOfTwo(e.width)&&a.IsPowerOfTwo(e.height),this.hasMipMaps&&t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),this.width=e.width,this.height=e.height;break;case"dds":const u=i.device.GetExtension("compressed_texture_s3tc"),c=new Int32Array(e,0,i.DDS_HEADER_LENGTH_INT),l=c[i.DDS_HEADER_OFFSET_PF_FOURCC],h=c[i.DDS_HEADER_OFFSET_MAGIC]===i.DDS_MAGIC,d=(c[i.DDS_HEADER_OFFSET_CAPS2]&i.DDSCAPS2_CUBEMAP)===i.DDSCAPS2_CUBEMAP,f=c[i.DDS_HEADER_OFFSET_PF_FOURCC],m=1;if(!u)throw new s.ErrResourceFormat("Compressed textures not supported by your device");if(!h)throw new s.ErrResourceFormat("Invalid DDS, missing magic number");if(!l)throw new s.ErrResourceFormat("Invalid DDS, missing FourCC code");let p,v,_=c[i.DDS_HEADER_OFFSET_WIDTH],E=c[i.DDS_HEADER_OFFSET_HEIGHT],S=c[i.DDS_HEADER_OFFSET_SIZE]+4;switch(f){case i.FOURCC_DXT1:p=8,v=u.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case i.FOURCC_DXT3:p=16,v=u.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case i.FOURCC_DXT5:p=16,v=u.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:const e=a.Int32ToFourCC(f);throw new s.ErrResourceFormat("Invalid DDS, ".concat(e," unsupported"))}if(this.hasMipMaps=m>1,this.isCube=d,this.width=_,this.height=E,this.isCube)throw new s.ErrFeatureNotImplemented({feature:"DDS cube maps"});this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture);for(let r=0;r<m;++r){const n=Math.max(4,_)/4*Math.max(4,E)/4*p,s=new Uint8Array(e,S,n);t.compressedTexImage2D(t.TEXTURE_2D,r,v,_,E,0,s),S+=n,_*=.5,E*=.5}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,m>1?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.bindTexture(t.TEXTURE_2D,null);break;default:throw new s.ErrResourceFormat("Invalid format, ".concat(this._extension," unsupported"))}this._isAttached=!1,this.OnPrepared()}DoCustomLoad(e,t){switch(t){case"cube":this._extension=t,this.isCube=!0,e=e.substr(0,e.length-5)+".png";break;case"png":this._extension=t,this.isCube=!1;break;case"dds":return this._extension=t,i.resMan.Fetch(a.AddMipLevelSkipCount(e),"arraybuffer").then(e=>{this.OnLoaded(),i.resMan.Queue(this,e)}).catch(e=>{this.OnError(e)}),!0;default:throw new s.ErrResourceExtensionUnregistered({path:e,extension:t})}i.resMan.AddPendingLoad(e);const r=new Image;return r.crossOrigin="anonymous",r.onerror=()=>{i.resMan.RemovePendingLoad(e),this.OnError(new s.ErrHTTPRequest({path:e}))},r.onload=()=>{i.resMan.RemovePendingLoad(e),i.resMan.Queue(this,r),this.OnLoaded()},r.src=a.AddMipLevelSkipCount(e),!0}Unload(e){return this.texture&&(i.device.gl.deleteTexture(this.texture),this.texture=null),this._extension=null,this._isAttached=!1,this.OnUnloaded(e),!0}Attach(e){this.path="",this.texture=e,this._extension=null,this._isAttached=!0,this.OnLoaded({hide:!0,path:"attachment"}),this.OnPrepared({hide:!0,path:"attachment"})}Reload(e){if(!this._isAttached)return super.Reload(e)}Bind(e,t){const r=i.device,n=r.gl;this.KeepAlive();let s=e.samplerType;if(s===(this.isCube?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D))if(this.texture)e.isVolume&&n.uniform1f(t,this.height/this.width),n.bindTexture(s,this.texture),e.hash!==this._currentSampler&&(e.Apply(r,this.hasMipMaps),this._currentSampler=e.hash);else{const e=s===n.TEXTURE_2D?r.GetFallbackTexture():r.GetFallbackCubeMap();n.bindTexture(s,e)}}static IsPowerOfTwo(e){return 0==(e&e-1)}static AddMipLevelSkipCount(e){const t=i.device;if(t.mipLevelSkipCount>0){const r=e.lastIndexOf(".");r>=0&&(e=e.substr(0,r-2)+"."+t.mipLevelSkipCount.toString()+e.substr(r))}return e}static Int32ToFourCC(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}static CreateImageFrom2DTexture(e,t=512,r=512,n=i.device.gl.RGBA){const s=i.device.gl,a=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,a),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0);const o=new Uint8Array(t*r*4);s.readPixels(0,0,t,r,s.RGBA,s.UNSIGNED_BYTE,o),s.deleteFramebuffer(a);const u=document.createElement("canvas");u.width=t,u.height=r;const c=u.getContext("2d"),l=c.createImageData(t,r);l.data.set(o),c.putImageData(l,0,0);const h=new Image;return h.src=u.toDataURL(),h}}},"./core/resource/Tw2VideoRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VideoRes",function(){return a});var n=r("./global/index.js"),s=r("./core/resource/Tw2Resource.js"),i=r("./core/Tw2Error.js");class a extends s.Tw2Resource{constructor(...e){super(...e),this.texture=null,this.video=null,this.width=0,this.height=0,this.cycle=!0,this.playOnLoad=!0,this._currentSampler=0,this._currentTime=-1,this._playable=!1,this._isPlaying=!1,this._onPlaying=null,this._onPause=null,this._onEnded=null}IsGood(){return this.KeepAlive(),super.IsGood()&&this.video&&this._playable}KeepAlive(){this.activeFrame=n.resMan.activeFrame}Play(e=!1,t=null){this.cycle=e,this._onEnded=t,this.video&&this._playable?(this.video.loop=this.cycle,this.video.play()):this.playOnLoad=!0}Pause(){this.video?this.video.pause():this.playOnLoad=!1}Prepare(e){const t=n.device.gl;switch(this._extension){case"mp4":case"webm":case"ogg":this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video),t.bindTexture(t.TEXTURE_2D,null),this.width=this.video.width,this.height=this.video.height,this.video.loop=this.cycle,this.playOnLoad&&this.video.play();break;default:throw new i.ErrResourceExtensionUnregistered({path:this.path,extension:this._extension})}this.OnPrepared()}DoCustomLoad(e,t){switch(t){case"mp4":case"webm":case"ogg":this._extension=t;break;default:throw new i.ErrResourceExtensionUnregistered({path:e,extension:t})}return n.resMan.AddPendingLoad(e),this.video=document.createElement("video"),this.video.crossOrigin="anonymous",this.video.muted=!0,this.video.onerror=()=>{n.resMan.RemovePendingLoad(e),this.video=null,this.OnError(new i.ErrHTTPRequest({path:e}))},this.video.oncanplay=()=>{this._playable=!0,this.video.oncanplay=null,n.resMan.RemovePendingLoad(e),n.resMan.Queue(this,void 0,t),this.OnLoaded()},this.video.onended=()=>{this._isPlaying=!1,this._onEnded&&this._onEnded(this)},this.video.onpause=()=>{this._isPlaying=!1,this._onPause&&this._onPause(this)},this.video.onplaying=()=>{this._isPlaying=!0,this._onPlaying&&this._onPlaying(this)},this.video.src=e,!0}Unload(e){return this.texture&&(n.device.gl.deleteTexture(this.texture),this.texture=null),this._extension=null,this._isPlaying=!1,this._playable=!1,this.playOnLoad=!0,this.video=null,this.OnUnloaded(e),!0}Bind(e){const t=n.device,r=t.gl;this.KeepAlive();const s=e.samplerType;s===r.TEXTURE_2D&&(this.texture?(this._currentTime=this.video.currentTime,r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.video),r.bindTexture(r.TEXTURE_2D,null),r.bindTexture(s,this.texture),e.hash!==this._currentSampler&&(e.Apply(t,!1),this._currentSampler=e.hash)):r.bindTexture(r.TEXTURE_2D,t.GetFallbackTexture()))}}},"./core/resource/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/resource/Tw2EffectRes.js");r.d(t,"Tw2EffectRes",function(){return n.Tw2EffectRes});var s=r("./core/resource/Tw2GeometryRes.js");r.d(t,"Tw2GeometryRes",function(){return s.Tw2GeometryRes});var i=r("./core/resource/Tw2LoadingObject.js");r.d(t,"Tw2LoadingObject",function(){return i.Tw2LoadingObject});var a=r("./core/resource/Tw2LodResource.js");r.d(t,"Tw2LodResource",function(){return a.Tw2LodResource});var o=r("./core/resource/Tw2Resource.js");r.d(t,"Tw2Resource",function(){return o.Tw2Resource});var u=r("./core/resource/Tw2Shader.js");r.d(t,"Tw2Shader",function(){return u.Tw2Shader});var c=r("./core/resource/Tw2TextureRes.js");r.d(t,"Tw2TextureRes",function(){return c.Tw2TextureRes});var l=r("./core/resource/Tw2VideoRes.js");r.d(t,"Tw2VideoRes",function(){return l.Tw2VideoRes})},"./core/resource/shaderOverrides.json":function(e){e.exports={blinkinglightspool:{"r0.xy=r0.xx*c[0+a0.x].xy;":"if(a0.x==0){r0.xy=r0.xx*c[0].xy;}else if(a0.x==1){r0.xy=r0.xx*c[1].xy;}else if(a0.x==2){r0.xy=r0.xx*c[2].xy;}else if(a0.x==3){r0.xy=r0.xx*c[3].xy;}else if(a0.x==4){r0.xy=r0.xx*c[4].xy;}","texcoord=r3.zzww*c[0+a0.x].zwzz;":"if(a0.x==0){texcoord=r3.zzww*c[0].zwzz;}else if(a0.x==1){texcoord=r3.zzww*c[1].zwzz;}else if(a0.x==2){texcoord=r3.zzww*c[2].zwzz;}else if(a0.x==3){texcoord=r3.zzww*c[3].zwzz;}else if(a0.x==4){texcoord=r3.zzww*c[4].zwzz;}"},boostervolumetric:{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<12;++i){"},fxarmorimpactv5:{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<255;++i){"},flarequad:{"r1.xyz=r0.zzw*c[0+a0.x].xyx;":"if(a0.x==0){r1.xyz=r0.zzw*c[0].xyx;}else if(a0.x==1){r1.xyz=r0.zzw*c[1].xyx;}else if(a0.x==2){r1.xyz=r0.zzw*c[2].xyx;}else if (a0.x==3){r1.xyz=r0.zzw*c[3].xyx;}else if(a0.x==4){r1.xyz=r0.zzw*c[4].xyx;}else if(a0.x==5){r1.xyz=r0.zzw*c[5].xyx;}","texcoord.xyw=r0.zzw*c[0+a0.x].zwz;":"if(a0.x==0){texcoord.xyw=r0.zzw*c[0].zwz;}else if(a0.x==1){texcoord.xyw=r0.zzw*c[1].zwz;}else if(a0.x==2){texcoord.xyw=r0.zzw*c[2].zwz;}else if(a0.x==3){texcoord.xyw=r0.zzw*c[3].zwz;}else if(a0.x==4){texcoord.xyw=r0.zzw*c[4].zwz;}else if(a0.x==5){texcoord.xyw=r0.zzw*c[5].zwz;}","r0.x=saturate(sqrt(abs(r0.x)));":"r0.x=clamp(sqrt(abs(r0.x)),0.0,1.0);"}}},"./core/sampler/Tw2SamplerOverride.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerOverride",function(){return s});var n=r("./core/sampler/Tw2SamplerState.js");class s{constructor(){this.name="",this.addressU=0,this.addressV=0,this.addressW=0,this.filter=0,this.mipFilter=0,this.lodBias=0,this.maxMipLevel=0,this.maxAnisotropy=0,this.forceAddressModes=!1,this._sampler=null}GetSampler(e,t){if(this._sampler)return this._sampler;this._sampler=new n.Tw2SamplerState;const r=this._sampler;r.registerIndex=t.registerIndex,r.name=t.name,r.forceAddressModes=this.forceAddressModes;const{wrapModes:s,gl:i}=e;if(1===this.filter){switch(this.mipFilter){case 0:r.minFilter=i.NEAREST;break;case 1:r.minFilter=i.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=i.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=i.NEAREST,r.magFilter=i.NEAREST}else{switch(this.mipFilter){case 0:r.minFilter=i.LINEAR;break;case 1:r.minFilter=i.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=i.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=i.LINEAR,r.magFilter=i.LINEAR}return 3!==this.filter&&3!==this.mipFilter||(r.anisotropy=Math.max(this.maxAnisotropy,1)),r.addressU=s[this.addressU],r.addressV=s[this.addressV],r.addressW=s[this.addressW],r.samplerType=t.samplerType,r.isVolume=t.isVolume,r.ComputeHash(),r}}},"./core/sampler/Tw2SamplerState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerState",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.registerIndex=0,this.minFilter=n.GL_LINEAR,this.maxFilter=n.GL_LINEAR,this.magFilter=n.GL_LINEAR,this.minFilterNoMips=n.GL_LINEAR,this.addressU=n.GL_REPEAT,this.addressV=n.GL_REPEAT,this.addressW=n.GL_REPEAT,this.anisotropy=1,this.samplerType=n.GL_TEXTURE_2D,this.isVolume=!1,this.hash=0,this.forceAddressModes=!1,this._borderColor=null,this._comparison=null,this._comparisonFunc=null,this._mipLODBias=null,this._minLOD=null,this._maxLOD=null}get filterMode(){return this.minFilterNoMips in n.FilterMode?n.FilterMode[this.minFilterNoMips]:2}get mipFilterMode(){return this.minFilter in n.MipFilterMode?n.MipFilterMode[this.minFilter]:2}ComputeHash(){this.hash=2166136261,this.hash*=16777619,this.hash^=this.minFilter,this.hash*=16777619,this.hash^=this.maxFilter,this.hash*=16777619,this.hash^=this.addressU,this.hash*=16777619,this.hash^=this.addressV,this.hash*=16777619,this.hash^=this.anisotropy,this.hash+=this.forceAddressModes?1:0}Apply(e,t){const r=this.samplerType,n=e.gl,s=e.GetExtension("EXT_texture_filter_anisotropic"),i=t||this.forceAddressModes;n.texParameteri(r,n.TEXTURE_WRAP_S,i?this.addressU:n.CLAMP_TO_EDGE),n.texParameteri(r,n.TEXTURE_WRAP_T,i?this.addressV:n.CLAMP_TO_EDGE),n.texParameteri(r,n.TEXTURE_MIN_FILTER,t?this.minFilter:this.minFilterNoMips),n.texParameteri(r,n.TEXTURE_MAG_FILTER,this.magFilter),s&&e.enableAnisotropicFiltering&&n.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.anisotropy,s.maxAnisotropy))}}},"./core/sampler/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/sampler/Tw2SamplerState.js");r.d(t,"Tw2SamplerState",function(){return n.Tw2SamplerState});var s=r("./core/sampler/Tw2SamplerOverride.js");r.d(t,"Tw2SamplerOverride",function(){return s.Tw2SamplerOverride})},"./core/value/TriMatrix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriMatrix",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this._11=0,this._12=0,this._13=0,this._14=0,this._21=0,this._22=0,this._23=0,this._24=0,this._31=0,this._32=0,this._33=0,this._34=0,this._41=0,this._42=0,this._43=0,this._44=0}static black(e){return[["_11",e.float],["_12",e.float],["_13",e.float],["_14",e.float],["_21",e.float],["_22",e.float],["_23",e.float],["_24",e.float],["_31",e.float],["_32",e.float],["_33",e.float],["_34",e.float],["_41",e.float],["_42",e.float],["_43",e.float],["_44",e.float]]}}},"./core/value/Tw2Float.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Float",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.value=0}static black(e){return[["value",e.float]]}}},"./core/value/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/value/Tw2Float.js");r.d(t,"Tw2Float",function(){return n.Tw2Float});var s=r("./core/value/TriMatrix.js");r.d(t,"TriMatrix",function(){return s.TriMatrix})},"./core/vertex/Tw2VertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexDeclaration",function(){return s});var n=r("./core/vertex/Tw2VertexElement.js");class s{constructor(){this.elements=[],this.elementsSorted=[],this.stride=null}Clear(){this.elements.splice(0,this.elements.length),this.RebuildHash()}SetStride(e){return this.stride=e,this}RebuildHash(){this.elementsSorted.splice(0,this.elementsSorted.length);for(let e=0;e<this.elements.length;++e)this.elementsSorted.push(this.elements[e]);this.elementsSorted.sort(s.CompareDeclarationElements)}FindUsage(e,t){for(let r=0;r<this.elementsSorted.length;++r){const n=this.elementsSorted[r];if(n.usage===e){if(n.usageIndex===t)return n;if(n.usageIndex>t)return null}if(n.usage>e)return null}return null}SetDeclaration(e,t,r){const n=e.gl;let i=0;for(let e=0;e<t.elementsSorted.length;++e){const a=t.elementsSorted[e];if(!(a.location<0))for(;;){if(i>=this.elementsSorted.length){n.disableVertexAttribArray(a.location),n.vertexAttrib4f(a.location,0,0,0,0);break}const e=this.elementsSorted[i],t=s.CompareDeclarationElements(e,a);if(t>0){n.disableVertexAttribArray(a.location),n.vertexAttrib4f(a.location,0,0,0,0);break}if(0===t){e.customSetter?e.customSetter(a):(n.enableVertexAttribArray(a.location),n.vertexAttribPointer(a.location,e.elements,e.type,!1,r,e.offset));break}i++}}return!0}SetPartialDeclaration(e,t,r,n,i){const a=e.gl,o=[];let u=0;for(let e=0;e<t.elementsSorted.length;++e){const c=t.elementsSorted[e];if(!(c.location<0))for(;;){const e=this.elementsSorted[u],t=s.CompareDeclarationElements(e,c,n);if(0===t){e.customSetter?e.customSetter(c):(a.enableVertexAttribArray(c.location),a.vertexAttribPointer(c.location,e.elements,e.type,!1,r,e.offset),a.vertexAttribDivisor(c.location,i),i&&o.push(c.location));break}if(t>0){i||(a.disableVertexAttribArray(c.location),a.vertexAttrib4f(c.location,0,0,0,0));break}if(++u>=this.elementsSorted.length)return i||(a.disableVertexAttribArray(c.location),a.vertexAttrib4f(c.location,0,0,0,0)),o}}return o}ResetInstanceDivisors(e,t){if(t)for(let r=0;r<t.length;++r)e.gl.vertexAttribDivisor(t[r],0)}static CompareDeclarationElements(e,t,r=0){return e.usage<t.usage?-1:e.usage>t.usage?1:e.usageIndex+r<t.usageIndex?-1:e.usageIndex+r>t.usageIndex?1:0}static from(e,t){const r=new s;if(e){let s=0;for(let t=0;t<e.length;t++)e[t].offset=s,r.elements.push(n.Tw2VertexElement.from(e[t])),s+=4*e[t].elements;t&&t.skipUpdate||r.RebuildHash()}return r}}},"./core/vertex/Tw2VertexElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexElement",function(){return s});var n=r("./global/index.js");class s{constructor(){this.customSetter=null,this.elements=null,this.location=null,this.offset=0,this.type=null,this.usage=-1,this.usageIndex=null,this._registerIndex=null,this._usedMask=null,this._attr=null}get string(){return s.TypeMap[this.usage]||"UNKNOWN"}static from(e){const t=new s;if(e){let{usage:r,usageIndex:s}=e;t.usage="string"==typeof r?this.Type[r.toUpperCase()]:r,t.usageIndex=s;const{elements:i=null,type:a=n.GL_FLOAT,offset:o=0,location:u=null,customSetter:c=null}=e;t.offset=o,t.elements=i,t.type=a,t.location=u,t.customSetter=c;const{registerIndex:l=null,usedMask:h=null,attr:d=null}=e;t._registerIndex=l,t._usedMask=h,t._attr=d}return t}}s.Type={POSITION:0,COLOR:1,NORMAL:2,TANGENT:3,BINORMAL:4,TEXCOORD:5,BLENDWEIGHT:6,BLENDINDICES:7},s.TypeMap=["POSITION","COLOR","NORMAL","TANGENT","BINORMAL","TEXCOORD","BLENDWEIGHT","BLENDINDICES"]},"./core/vertex/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/vertex/Tw2VertexDeclaration.js");r.d(t,"Tw2VertexDeclaration",function(){return n.Tw2VertexDeclaration});var s=r("./core/vertex/Tw2VertexElement.js");r.d(t,"Tw2VertexElement",function(){return s.Tw2VertexElement})},"./curve/Tw2CurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSet",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.bindings=[],this.curves=[],this.playOnLoad=!0,this.ranges=[],this.scale=1,this.useSimTimeRebase=!1,this.scaledTime=0,this._isPlaying=!1}Initialize(){this.playOnLoad&&this.Play()}Play(){this._isPlaying=!0,this.scaledTime=0}PlayFrom(e=0){this._isPlaying=!0,this.scaledTime=e*this.scale}Stop(){this._isPlaying=!1}Update(e){if(this._isPlaying){this.scaledTime+=e*this.scale;for(let e=0;e<this.curves.length;++e)this.curves[e].UpdateValue(this.scaledTime);for(let e=0;e<this.bindings.length;++e)this.bindings[e].CopyValue()}}GetRangeByName(e){for(let t=0;t<this.ranges.length;t++)if(this.ranges[t].name===e)return this.ranges[t];return null}GetMaxCurveDuration(){let e=0;for(let t=0;t<this.curves.length;++t)"GetLength"in this.curves[t]&&(e=Math.max(e,this.curves[t].GetLength()));return e}static black(e){return[["bindings",e.array],["curves",e.array],["name",e.string],["playOnLoad",e.boolean],["ranges",e.array],["scale",e.float],["useSimTimeRebase",e.boolean]]}}},"./curve/Tw2CurveSetRange.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSetRange",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.endTime=0,this.looped=!1,this.startTime=0}static black(e){return[["endTime",e.float],["looped",e.boolean],["name",e.string],["startTime",e.float]]}}s.__isStaging=4},"./curve/Tw2ValueBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ValueBinding",function(){return o});var n=r("./global/index.js"),s=r("./core/parameter/index.js"),i=r("./global/util/index.js"),a=r("./core/Tw2Error.js");class o extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.destinationAttribute="",this.destinationObject=null,this.offset=n.vec4.create(),this.scale=1,this.sourceAttribute="",this.sourceObject=null,this._copyFunc=null,this._destinationElement=null,this._destinationIsArray=null,this._destinationIsRGBA=null,this._sourceElement=null,this._sourceIsArray=null,this._sourceIsRGBA=null}Initialize(){this.UpdateValues()}OnValueChanged(){if(null!==this._copyFunc)return;if(!this.sourceObject||""===this.sourceAttribute)return;if(!this.destinationObject||""===this.destinationAttribute)return;let e=!1,t=!1,r=this.sourceAttribute.substr(-2);".x"===r||".r"===r?(e=!0,this._sourceElement=0,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".r"===r):".y"===r||".g"===r?(e=!0,this._sourceElement=1,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".g"===r):".z"===r||".b"===r?(e=!0,this._sourceElement=2,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".b"===r):".w"===r||".a"===r?(e=!0,this._sourceElement=3,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".a"===r):this.sourceObject instanceof s.Tw2Vector4Parameter&&("v1"===this.sourceAttribute?(e=!0,this._sourceElement=0,this.sourceAttribute="value"):"v2"===this.sourceAttribute?(e=!0,this._sourceElement=1,this.sourceAttribute="value"):"v3"===this.sourceAttribute?(e=!0,this._sourceElement=2,this.sourceAttribute="value"):"v4"===this.sourceAttribute&&(e=!0,this._sourceElement=3,this.sourceAttribute="value"));let n=this.destinationAttribute.substr(-2);".x"===n||".r"===n?(t=!0,this._destinationElement=0,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".r"===n):".y"===n||".g"===n?(t=!0,this._destinationElement=1,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".g"===n):".z"===n||".b"===n?(t=!0,this._destinationElement=2,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".b"===n):".w"===n||".a"===n?(t=!0,this._destinationElement=3,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".a"===n):this.destinationObject instanceof s.Tw2Vector4Parameter&&("v1"===this.destinationAttribute?(t=!0,this._destinationElement=0,this.destinationAttribute="value"):"v2"===this.destinationAttribute?(t=!0,this._destinationElement=1,this.destinationAttribute="value"):"v3"===this.destinationAttribute?(t=!0,this._destinationElement=2,this.destinationAttribute="value"):"v4"===this.destinationAttribute&&(t=!0,this._destinationElement=3,this.destinationAttribute="value"));const u=this.sourceObject[this.sourceAttribute],c=this.destinationObject[this.destinationAttribute];if(void 0===u)throw new a.ErrBindingValueUndefined({name:this.name,object:"source",property:this.sourceAttribute});if(void 0===c)throw new a.ErrBindingValueUndefined({name:this.name,object:"destination",property:this.destinationAttribute});const l=this._sourceIsArray=Object(i.isArrayLike)(u),h=this._destinationIsArray=Object(i.isArrayLike)(c),d=o;let f;if(l===h&&typeof u==typeof c?l?e?f=t?d.CopyElementToElement:d.ReplicateElement:u.length<=c.length?f=d.CopyArray:16===u.length&&(f=d.ExtractPos):f=d.CopyValueToValue:l&&e&&Object(i.isNumber)(c)?f=d.CopyElementToValue:h&&Object(i.isNumber)(u)?f=t?d.CopyValueToElement:d.ReplicateValue:Object(i.isNumber)(u)&&Object(i.isBoolean)(c)?f=d.CopyFloatToBoolean:Object(i.isBoolean)(u)&&Object(i.isNumber)(c)&&(f=d.CopyBooleanToFloat),!f)throw new a.ErrBindingType({name:this.name});this._copyFunc=f}CopyValue(e=this){this._copyFunc&&(this._copyFunc(this),"UpdateValues"in this.destinationObject?this.destinationObject.UpdateValues({controller:e}):"OnValueChanged"in this.destinationObject&&this.destinationObject.OnValueChanged({controller:e}))}GetDestinationTarget(){return this._copyFunc?this.constructor.GetAttribute(this.destinationObject,this.destinationAttribute,this._destinationElement,this._destinationIsRGBA):this.destinationAttribute}GetSourceTarget(){return this._copyFunc?this.constructor.GetAttribute(this.sourceObject,this.sourceAttribute,this._sourceElement,this._sourceIsRGBA):this.sourceAttribute}SetSource(e,t,r,n){const{object:s,attribute:i}=this.constructor.GetTargets(e,t,r,n);this.sourceObject=s,this.sourceAttribute=i,this._copyFunc=null}SetDestination(e,t,r,n){const{object:s,attribute:i}=this.constructor.GetTargets(e,t,r,n);this.destinationObject=s,this.destinationAttribute=i,this._copyFunc=null}static GetAttribute(e,t,r,n){if(e instanceof s.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:return"v0";case 1:return"v1";case 2:return"v2";case 3:return"v4";default:return t}switch(r){case 0:return t+n?".r":".x";case 1:return t+n?".g":".y";case 2:return t+n?".b":".z";case 3:return t+n?".a":".w";default:return t}}static GetTargets(e,t,r,n){if(void 0!==r&&void 0===n&&(n=t.toUpperCase().includes("COLOR")),e instanceof s.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:t="v0";break;case 1:t="v1";break;case 2:t="v2";break;case 3:t="v3"}else switch(r){case 0:t+=n?".r":".x";break;case 1:t+=n?".g":".y";break;case 2:t+=n?".b":".z";break;case 3:t+=n?".a":".w"}return{object:e,attribute:t}}static CopyValueToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyArray(e){let t=Math.min(e.destinationObject[e.destinationAttribute].length,e.sourceObject[e.sourceAttribute].length);for(let r=0;r<t;++r)e.destinationObject[e.destinationAttribute][r]=e.sourceObject[e.sourceAttribute][r]*e.scale+e.offset[r]}static CopyElementToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static ReplicateValue(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[t]}static ReplicateElement(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[t]}static ExtractPos(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][t+12]*e.scale+e.offset[t]}static CopyElementToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static CopyValueToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyFloatToBoolean(e){e.destinationObject[e.destinationAttribute]=0!==e.sourceObject[e.sourceAttribute]}static CopyBooleanToFloat(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]?1:0}static black(e){return[["destinationObject",e.object],["destinationAttribute",e.string],["name",e.string],["offset",e.vector4],["scale",e.float],["sourceObject",e.object],["sourceAttribute",e.string]]}}},"./curve/adapter/Tr2RotationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RotationAdapter",function(){return i});var n=r("./curve/adapter/Tw2CurveAdapter.js"),s=r("./global/index.js");class i extends n.Tw2CurveAdapter{constructor(...e){super(...e),this.value=s.vec4.create()}GetValueAt(e,t){return this.curve&&this.curve.GetValueAt(e,this.value),s.vec4.copy(t,this.value)}static black(e){return[["curve",e.object],["value",e.vector4]]}}i.outputDimension=4,i.__isStaging=4},"./curve/adapter/Tr2TranslationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2TranslationAdapter",function(){return i});var n=r("./global/index.js"),s=r("./curve/adapter/Tw2CurveAdapter.js");class i extends s.Tw2CurveAdapter{constructor(...e){super(...e),this.value=n.vec3.create()}GetValueAt(e,t){this.curve&&this.curve.GetValueAt(e,this.value),n.vec3.copy(t,this.value)}static black(e){return[["curve",e.object],["value",e.vector3]]}}i.outputDimension=3,i.__isStaging=4},"./curve/adapter/Tw2CurveAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveAdapter",function(){return s});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2Curve{constructor(...e){super(...e),this.name="",this.curve=null,this.value=null}Sort(){this.curve&&this.curve.Sort()}UpdateValue(e){this.GetValueAt(e,this.value)}}s.valueProperty="value",s.curveType=n.Tw2Curve.Type.ADAPTER},"./curve/adapter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/adapter/Tr2RotationAdapter.js");r.d(t,"Tr2RotationAdapter",function(){return n.Tr2RotationAdapter});var s=r("./curve/adapter/Tr2TranslationAdapter.js");r.d(t,"Tr2TranslationAdapter",function(){return s.Tr2TranslationAdapter});var i=r("./curve/adapter/Tw2CurveAdapter.js");r.d(t,"Tw2CurveAdapter",function(){return i.Tw2CurveAdapter})},"./curve/curve/AudEventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEventKey",function(){return s}),r.d(t,"AudEventCurve",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.time=0,this.value=0}static black(e){return[["time",e.float],["value",e.ushort]]}}class i extends n.Tw2Curve{constructor(...e){super(...e),this.keys=[],this.sourceTriObserver=null}static black(e){return[["name",e.string],["keys",e.array],["sourceTriObserver, r.object"]]}}i.__isStaging=4},"./curve/curve/Tr2BoneMatrixCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2BoneMatrixCurve",function(){return s});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2Curve{static black(e){return[["name",e.string]]}}s.__isStaging=4},"./curve/curve/Tr2CurveScalar.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveScalarKey",function(){return s}),r.d(t,"Tr2CurveScalar",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.endTangent=0,this.extrapolation=0,this.index=0,this.interpolation=1,this.startTangent=0,this.value=0}static blackStruct(e){const t=new this;return t.time=e.ReadF32(),t.value=e.ReadF32(),t.startTangent=e.ReadF32(),t.endTangent=e.ReadF32(),t.index=e.ReadU16(),t.interpolation=e.ReadU8(),t.extrapolation=e.ReadU8(),t}}class i extends n.Tw2Curve{constructor(...e){super(...e),this.extrapolationAfter=0,this.extrapolationBefore=0,this.keys=[],this.timeOffset=0,this.timeScale=0,this.currentValue=0,this._length=0}Sort(){this._length=n.Tw2Curve.Sort3(this.keys)}GetLength(){return this._length}static black(e){return[["name",e.string],["timeOffset",e.float],["timeScale",e.float],["extrapolationAfter",e.uint],["extrapolationBefore",e.uint],["keys",e.structList(s)]]}}i.inputDimension=1,i.outputDimension=1,i.valueProperty="currentValue",i.curveType=n.Tw2Curve.Type.CURVE3,i.Key=s,i.Interpolation={},i.Extrapolation={},i.__isStaging=4},"./curve/curve/Tr2ScalarExprKeyCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprKey",function(){return s}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.input1=-1,this.input2=-1,this.input3=-1,this.interpolation=0,this.left=0,this.right=0,this.time=0,this.timeExpression="",this.value=0}static black(e){return[["input1",e.float],["input2",e.float],["input3",e.float],["interpolation",e.uint],["left",e.float],["right",e.float],["time",e.float],["timeExpression",e.string],["value",e.float]]}}s.__isStaging=4;class i extends n.Tw2Curve{constructor(...e){super(...e),this.interpolation=0,this.keys=[]}static black(e){return[["interpolation",e.uint],["keys",e.array],["name",e.string]]}}i.__isStaging=4},"./curve/curve/Tw2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveKey",function(){return i}),r.d(t,"Tw2Curve",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.time=0}}class a extends n.Tw2BaseClass{constructor(...e){super(...e),this.name=""}Initialize(){this.Sort()}Sort(){throw new s.ErrAbstractClassMethod}GetLength(){throw new s.ErrAbstractClassMethod}UpdateValue(e){throw new s.ErrAbstractClassMethod}static Compare(e,t){return e.time<t.time?-1:e.time>t.time?1:0}static Sort(e,t=e.keys){t&&t.length&&(t.sort(a.Compare),e.length=t[t.length-1].time)}static Sort2(e){if(e.keys&&e.keys.length){e.keys.sort(a.Compare);const t=e.keys[e.keys.length-1];if(t.time>e.length){const r=e.length,n=e.endValue,s=e.endTangent;e.length=t.time,e.endValue=t.value,e.endTangent=t.leftTangent,r>0&&(t.time=r,t.value=n,t.leftTangent=s)}}}static Sort3(e){e.sort((e,t)=>e.index<t.index?-1:e.index>t.index?1:0);let t=0;for(let r=0;r<e.length;r++)e[r].index=r,r===e.length-1&&(t=e[r].time);return t}}a.inputDimension=null,a.outputDimension=null,a.valueProperty=null,a.curveType=null,a.Key=null,a.Interpolation=null,a.Extrapolation=null,a.Type={CURVE:1,CURVE2:2,CURVE3:3,CURVE_MAYA:4,CURVE_NO_KEYS:5,SEQUENCER:100,SEQUENCER2:101,EXPRESSION:200,ADAPTER:300},a.global={vec3_0:n.vec3.create(),vec4_0:n.vec4.create(),quat_0:n.quat.create(),quat_1:n.quat.create()}},"./curve/curve/Tw2CurveConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveConstant",function(){return i});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2Curve{constructor(...e){super(...e),this.value=n.vec4.create()}Sort(){}GetLength(){return 0}UpdateValue(e,t){n.vec4.copy(t,this.value)}static black(e){return[["name",e.string],["value",e.vector4]]}}i.inputDimension=4,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2Curve.Type.CURVE_NO_KEYS,i.__isStaging=4},"./curve/curve/Tw2EventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventKey",function(){return s}),r.d(t,"Tw2EventCurve",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.value=0}static black(e){return[["time",e.float],["value",e.ushort]]}}class i extends n.Tw2Curve{constructor(...e){super(...e),this.extrapolation=0,this.keys=[],this.value=0,this._time=0,this._currentKey=0,this._length=0}Sort(){this.keys.length&&(this.keys.sort(n.Tw2Curve.Compare),this._length=this.keys[this.keys.length-1].time)}GetLength(){return this._length}UpdateValue(e){if(this._length<=0)return this.value;let t=this._time;if(this._time=e,this._time<t&&(this._currentKey=0),this.extrapolation===i.Extrapolation.CYCLE){let e=this._time%this._length;e<t&&(this._currentKey=0),this._time=e}for(;this._currentKey<this.keys.length&&this._time>=this.keys[this._currentKey].time;)this.value=this.keys[this._currentKey].value,++this._currentKey}static black(e){return[["extrapolation",e.uint],["name",e.string],["keys",e.array],["value",e.ushort]]}}i.dimension=1,i.outputDimension=1,i.valueProperty="value",i.curveType=n.Tw2Curve.Type.CURVE,i.Key=s,i.Extrapolation={NONE:0,CYCLE:3}},"./curve/curve/Tw2PerlinCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerlinCurve",function(){return i});var n=r("./curve/curve/Tw2Curve.js"),s=r("./global/math/index.js");class i extends n.Tw2Curve{constructor(...e){super(...e),this.N=0,this.alpha=0,this.beta=0,this.offset=0,this.scale=0,this.speed=0,this.value=0}Sort(){}GetLength(){return 0}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return e-=this.offset,(s.noise.perlin1D(e*this.speed,this.alpha,this.beta,this.N)+1)/2*this.scale+this.offset}static black(e){return[["alpha",e.float],["beta",e.float],["N",e.uint],["name",e.string],["offset",e.float],["scale",e.float],["speed",e.float],["value",e.float]]}}i.outputDimension=1,i.valueProperty="value",i.curveType=n.Tw2Curve.Type.CURVE_NO_KEYS},"./curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/AudEventCurve.js");r.d(t,"AudEventKey",function(){return n.AudEventKey}),r.d(t,"AudEventCurve",function(){return n.AudEventCurve});var s=r("./curve/curve/Tr2BoneMatrixCurve.js");r.d(t,"Tr2BoneMatrixCurve",function(){return s.Tr2BoneMatrixCurve});var i=r("./curve/curve/Tw2CurveConstant.js");r.d(t,"Tw2CurveConstant",function(){return i.Tw2CurveConstant});var a=r("./curve/curve/Tr2CurveScalar.js");r.d(t,"Tw2CurveScalarKey",function(){return a.Tw2CurveScalarKey}),r.d(t,"Tr2CurveScalar",function(){return a.Tr2CurveScalar});var o=r("./curve/curve/Tr2ScalarExprKeyCurve.js");r.d(t,"Tr2ScalarExprKey",function(){return o.Tr2ScalarExprKey}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return o.Tr2ScalarExprKeyCurve});var u=r("./curve/curve/Tw2EventCurve.js");r.d(t,"Tw2EventKey",function(){return u.Tw2EventKey}),r.d(t,"Tw2EventCurve",function(){return u.Tw2EventCurve});var c=r("./curve/curve/Tw2PerlinCurve.js");r.d(t,"Tw2PerlinCurve",function(){return c.Tw2PerlinCurve});var l=r("./curve/curve/Tw2Curve.js");r.d(t,"Tw2CurveKey",function(){return l.Tw2CurveKey}),r.d(t,"Tw2Curve",function(){return l.Tw2Curve});var h=r("./curve/curve/legacy/index.js");r.d(t,"Tw2ColorKey",function(){return h.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return h.Tw2ColorCurve}),r.d(t,"Tw2ColorKey2",function(){return h.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return h.Tw2ColorCurve2}),r.d(t,"Tw2QuaternionKey2",function(){return h.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return h.Tw2QuaternionCurve}),r.d(t,"Tw2RandomConstantCurve",function(){return h.Tw2RandomConstantCurve}),r.d(t,"Tw2Torque",function(){return h.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return h.Tw2RigidOrientation}),r.d(t,"Tw2QuaternionKey",function(){return h.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return h.Tw2RotationCurve}),r.d(t,"Tw2ScalarKey",function(){return h.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return h.Tw2ScalarCurve}),r.d(t,"Tw2ScalarKey2",function(){return h.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return h.Tw2ScalarCurve2}),r.d(t,"Tw2SineCurve",function(){return h.Tw2SineCurve}),r.d(t,"Tw2Vector2Key",function(){return h.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return h.Tw2Vector2Curve}),r.d(t,"Tw2Vector3Key",function(){return h.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return h.Tw2Vector3Curve}),r.d(t,"Tw2VectorKey",function(){return h.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return h.Tw2VectorCurve})},"./curve/curve/legacy/Tw2ColorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey",function(){return i}),r.d(t,"Tw2ColorCurve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.vec4.create(),this.left=n.vec4.create(),this.right=n.vec4.create(),this.interpolation=0}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.start=0,this.value=n.vec4.create(),this.extrapolation=0,this.keys=[],this._currentKey=1,this.length=0}Sort(){s.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.vec4.copy(t,this.value);const r=this.keys[0],s=this.keys[this.keys.length-1];if(e>=s.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.vec4.copy(t,this.value);case a.Extrapolation.CONSTANT:return n.vec4.copy(t,s.value);case a.Extrapolation.GRADIENT:return n.vec4.scaleAndAdd(t,s.value,s.right,e-s.time);default:e%=s.time}else if(e<0||e<r.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.vec4.copy(t,this.value);case a.Extrapolation.GRADIENT:return n.vec4.scaleAndAdd(t,r.value,r.left,e*this.length-s.time);default:return n.vec4.copy(t,r.value)}let i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];for(;e>=i.time||e<o.time;)e<o.time&&(this._currentKey=0),this._currentKey++,i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];const u=(e-o.time)/(i.time-o.time);switch(o.interpolation){case a.Interpolation.CONSTANT:return n.vec4.copy(t,o.value);default:return t[0]=o.value[0]*(1-u)+i.value[0]*u,t[1]=o.value[1]*(1-u)+i.value[1]*u,t[2]=o.value[2]*(1-u)+i.value[2]*u,t[3]=o.value[3]*(1-u)+i.value[3]*u,t}}}a.inputDimension=4,a.outputDimension=4,a.valueProperty="value",a.curveType=s.Tw2Curve.Type.CURVE,a.Key=i,a.Extrapolation={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},a.Interpolation={NONE:0,CONSTANT:1,LINEAR:2}},"./curve/curve/legacy/Tw2ColorCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey2",function(){return i}),r.d(t,"Tw2ColorCurve2",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.vec4.create(),this.leftTangent=n.vec4.create(),this.rightTangent=n.vec4.create(),this.interpolation=1}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.cycle=!1,this.reversed=!1,this.timeOffset=0,this.timeScale=1,this.startValue=n.vec4.fromValues(0,0,0,1),this.currentValue=n.vec4.fromValues(0,0,0,1),this.endValue=n.vec4.fromValues(0,0,0,1),this.startTangent=n.vec4.create(),this.endTangent=n.vec4.create(),this.interpolation=1,this.keys=[],this.length=0}Sort(){s.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec4.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec4.copy(t,this.startValue):n.vec4.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],s=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=s.time)return this.Interpolate(e,s,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],s=this.keys[t+1],!(r.time<=e&&s.time>e));++t);return this.Interpolate(e,r,s,t)}Interpolate(e,t,r,s){n.vec4.copy(s,this.startValue);let i=this.startValue,o=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case a.Interpolation.LINEAR:return t&&r?(i=t.value,o=r.value,c=r.time-t.time):r?(o=r.value,c=r.time):t&&(i=t.value,c=this.length-t.time),s[0]=i[0]+(o[0]-i[0])*(e/c),s[1]=i[1]+(o[1]-i[1])*(e/c),s[2]=i[2]+(o[2]-i[2])*(e/c),s[3]=i[3]+(o[3]-i[3])*(e/c),s;default:return s}}}a.inputDimension=4,a.outputDimension=4,a.valueProperty="currentValue",a.curveType=s.Tw2Curve.Type.CURVE2,a.Key=i,a.Interpolation={CONSTANT:0,LINEAR:1}},"./curve/curve/legacy/Tw2QuaternionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey2",function(){return i}),r.d(t,"Tw2QuaternionCurve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.quat.create(),this.leftTangent=n.vec4.create(),this.rightTangent=n.vec4.create(),this.interpolation=1}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.cycle=!1,this.reversed=!1,this.timeOffset=0,this.timeScale=1,this.startValue=n.quat.create(),this.currentValue=n.quat.create(),this.endValue=n.quat.create(),this.startTangent=n.vec4.create(),this.endTangent=n.vec4.create(),this.interpolation=1,this.keys=[],this.length=0}Sort(){s.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t;if(e>this.length){if(!this.cycle)return this.reversed?(t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t):(t[0]=this.endValue[0],t[1]=this.endValue[1],t[2]=this.endValue[2],t);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],n=this.keys[t+1],!(r.time<=e&&n.time>e));++t);return this.Interpolate(e,r,n,t)}Interpolate(e,t,r,s){s[0]=this.startValue[0],s[1]=this.startValue[1],s[2]=this.startValue[2];let i=this.startValue,o=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case a.Interpolation.SPHERICAL_LINEAR:return t&&r?(i=t.value,o=r.value,c=r.time-t.time):r?(o=r.value,c=r.time):t&&(i=t.value,c=this.length-t.time),n.quat.slerp(s,i,o,e/c),s;default:return s}}}a.inputDimension=4,a.outputDimension=4,a.valueProperty="currentValue",a.curveType=s.Tw2Curve.Type.CURVE2,a.Key=i,a.Interpolation={CONSTANT:0,SPHERICAL_LINEAR:4}},"./curve/curve/legacy/Tw2RandomConstantCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomConstantCurve",function(){return s});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2Curve{constructor(...e){super(...e),this.value=0,this.min=0,this.max=1,this.hold=!0}Sort(){}GetLength(){return 0}UpdateValue(){this.value=this.GetValueAt()}GetValueAt(){return this.hold?this.value:this.min+(this.max-this.min)*Math.random()}}s.outputDimension=1,s.valueProperty="value",s.curveType=n.Tw2Curve.Type.CURVE_NO_KEYS},"./curve/curve/legacy/Tw2RigidOrientation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Torque",function(){return i}),r.d(t,"Tw2RigidOrientation",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.rot0=n.quat.create(),this.omega0=n.vec3.create(),this.torque=n.vec3.create()}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.name="",this.I=1,this.drag=1,this.value=n.quat.create(),this.start=0,this.states=[],this.length=0}Sort(){s.Tw2Curve.Sort(this,this.states)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.states.length||e<0||e<this.states[0].time)return n.quat.copy(t,this.value);let r=0;if(e>=this.states[this.states.length-1].time)r=this.states.length-1;else for(;r+1<this.states.length&&!(e>=this.states[r].time&&e<this.states[r+1].time);++r);const i=s.Tw2Curve.global.vec3_0,a=s.Tw2Curve.global.quat_0,o=this.states[r];return n.vec3.exponentialDecay(i,o.omega0,o.torque,this.I,this.drag,e-o.time),n.quat.exp(a,i),n.quat.multiply(t,this.states[r].rot0,a),t}}a.inputDimension=4,a.outputDimension=4,a.valueProperty="value",a.curveType=s.Tw2Curve.Type.CURVE,a.Key=i},"./curve/curve/legacy/Tw2RotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey",function(){return i}),r.d(t,"Tw2RotationCurve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.quat.create(),this.left=n.vec4.create(),this.right=n.vec4.create(),this.interpolation=5}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.start=0,this.value=n.quat.create(),this.extrapolation=0,this.keys=[],this.length=0,this._currentKey=1}Sort(){s.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.quat.copy(t,this.value);const r=s.Tw2Curve.global,i=this.keys[0],o=this.keys[this.keys.length-1];if(e>=o.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.quat.copy(t,this.value);case a.Extrapolation.CONSTANT:return n.quat.copy(t,o.value);default:e%=o.time}else if(e<0||e<i.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.quat.copy(t,this.value);default:return n.quat.copy(t,i.value)}let u=this.keys[this._currentKey],c=this.keys[this._currentKey-1];for(;e>=u.time||e<c.time;)e<c.time&&(this._currentKey=0),this._currentKey++,u=this.keys[this._currentKey],c=this.keys[this._currentKey-1];const l=(e-c.time)/(u.time-c.time);switch(c.interpolation){case a.Interpolation.CONSTANT:return n.quat.copy(t,c.value);case a.Interpolation.LINEAR:return t[0]=c.value[0]*(1-l)+u.value[0]*l,t[1]=c.value[1]*(1-l)+u.value[1]*l,t[2]=c.value[2]*(1-l)+u.value[2]*l,t[3]=c.value[3]*(1-l)+u.value[3]*l,t;case a.Interpolation.HERMITE:const e=n.quat.identity(r.quat_0),s=[c.value,c.right,u.left,u.value];for(let r=3;r>0;r--){const i=n.num.biCumulative(l,r);i>1&&n.quat.multiply(t,e,s[r]),t[0]=-s[r-1][0],t[1]=-s[r-1][1],t[2]=-s[r-1][2],t[3]=s[r-1][3],n.quat.multiply(t,t,s[r]),n.quat.pow(t,t,i),n.quat.multiply(e,e,t)}return n.quat.multiply(t,e,c.value);case a.Interpolation.SLERP:return n.quat.slerp(t,c.value,u.value,l);default:return n.quat.sqlerp(t,c.value,c.right,u.left,u.value,l)}}}a.outputDimention=4,a.inputDimension=4,a.valueProperty="value",a.curveType=s.Tw2Curve.Type.CURVE,a.Child=i,a.Extrapolation={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},a.Interpolation={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,SLERP:5,SQUAD:6}},"./curve/curve/legacy/Tw2ScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey",function(){return s}),r.d(t,"Tw2ScalarCurve",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.value=0,this.left=0,this.right=0,this.interpolation=0}}class i extends n.Tw2Curve{constructor(...e){super(...e),this.start=0,this.timeScale=1,this.timeOffset=0,this.value=0,this.extrapolation=0,this.keys=[],this._currentKey=1,this.length=0}Sort(){n.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale-this.timeOffset,0===this.length)return this.value;const t=this.keys[0],r=this.keys[this.keys.length-1];if(e>=r.time)switch(this.extrapolation){case i.Extrapolation.NONE:return this.value;case i.Extrapolation.CONSTANT:return r.value;case i.Extrapolation.GRADIENT:return r.value+(e-r.time)*r.right;default:e%=r.time}else if(e<0||e<t.time)switch(this.extrapolation){case i.Extrapolation.NONE:return this.value;case i.Extrapolation.GRADIENT:return t.value+(e*this.length-r.time)*t.left;default:return t.value}let n=this.keys[this._currentKey],s=this.keys[this._currentKey-1];for(;e>=n.time||e<s.time;)e<s.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],s=this.keys[this._currentKey-1];const a=(e-s.time)/(n.time-s.time);switch(s.interpolation){case i.Interpolation.CONSTANT:return s.value;case i.Interpolation.LINEAR:return s.value*(1-a)+n.value*a;case i.Interpolation.HERMITE:const t=-2*a*a*a+3*a*a,r=a*a*a-2*a*a+a,o=a*a*a-a*a;return(2*a*a*a-3*a*a+1)*s.value+t*n.value+r*s.right+o*n.left;default:const u=1+(Math.sqrt(s.value/n.value)-1)*Math.exp(-e/s.right);return u*u*n.value}}}i.inputDimension=1,i.outputDimension=1,i.valueProperty="value",i.curveType=n.Tw2Curve.Type.CURVE,i.Key=s,i.Extrapolation={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},i.Interpolation={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,CATMULROM:4}},"./curve/curve/legacy/Tw2ScalarCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey2",function(){return s}),r.d(t,"Tw2ScalarCurve2",function(){return i});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2CurveKey{constructor(...e){super(...e),this.value=0,this.leftTangent=0,this.rightTangent=0,this.interpolation=1}}class i extends n.Tw2Curve{constructor(...e){super(...e),this.cycle=!1,this.reversed=!1,this.timeOffset=0,this.timeScale=1,this.startValue=0,this.currentValue=0,this.endValue=0,this.startTangent=0,this.endTangent=0,this.interpolation=1,this.keys=[],this.length=0}Sort(){n.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.currentValue=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return this.startValue;if(e>this.length){if(!this.cycle)return this.reversed?this.startValue:this.endValue;e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null);let t=this.keys[0],r=this.keys[this.keys.length-1];if(e<=t.time)return this.Interpolate(e,null,t);if(e>=r.time)return this.Interpolate(e,r,null);for(let n=0;n+1<this.keys.length&&(t=this.keys[n],r=this.keys[n+1],!(t.time<=e&&r.time>e));++n);return this.Interpolate(e,t,r)}Interpolate(e,t,r){let n=this.startValue,s=this.endValue,a=this.interpolation,o=this.length;switch(null!==t&&(a=t.interpolation,e-=t.time),a){case i.Interpolation.LINEAR:return t&&r?(n=t.value,s=r.value,o=r.time-t.time):r?(s=r.value,o=r.time):t&&(n=t.value,o=this.length-t.time),n+e/o*(s-n);case i.Interpolation.HERMITE:let u=this.startTangent,c=this.endTangent;t&&r?(n=t.value,u=t.rightTangent,s=r.value,c=r.leftTangent,o=r.time-t.time):r?(s=r.value,c=r.leftTangent,o=r.time):t&&(n=t.value,u=t.rightTangent,o=this.length-t.time);const l=e/o,h=l*l,d=h*l,f=-2*d+3*h,m=d-h;return n*(1-f)+s*f+u*(l+m-h)+c*m;default:return this.startValue}}}i.inputDimension=1,i.outputDimension=1,i.valueProperty="currentValue",i.curveType=n.Tw2Curve.Type.CURVE2,i.Key=s,i.Interpolation={CONSTANT:0,LINEAR:1,HERMITE:2}},"./curve/curve/legacy/Tw2SineCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SineCurve",function(){return s});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2Curve{constructor(...e){super(...e),this.value=0,this.offset=0,this.scale=1,this.speed=1}Sort(){}GetLength(){return 0}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return Math.sin(e*Math.PI*2*this.speed)*this.scale+this.offset}}s.outputDimension=1,s.valueProperty="value",s.curveType=n.Tw2Curve.Type.CURVE_NO_KEYS},"./curve/curve/legacy/Tw2Vector2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Key",function(){return i}),r.d(t,"Tw2Vector2Curve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.vec2.create(),this.leftTangent=n.vec2.create(),this.rightTangent=n.vec2.create(),this.interpolation=1}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.cycle=!1,this.reversed=!1,this.timeOffset=0,this.timeScale=1,this.startValue=n.vec2.create(),this.currentValue=n.vec2.create(),this.endValue=n.vec2.create(),this.startTangent=n.vec2.create(),this.endTangent=n.vec2.create(),this.interpolation=1,this.keys=[],this.length=0}Sort(){s.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec2.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec2.copy(t,this.startValue):n.vec2.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],s=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=s.time)return this.Interpolate(e,s,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],s=this.keys[t+1],!(r.time<=e&&s.time>e));++t);return this.Interpolate(e,r,s,t)}Interpolate(e,t,r,s){n.vec2.copy(s,this.startValue);let i=this.startValue,o=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case a.Interpolation.LINEAR:return t&&r?(i=t.value,o=r.value,c=r.time-t.time):r?(o=r.value,c=r.time):t&&(i=t.value,c=this.length-t.time),s[0]=i[0]+(o[0]-i[0])*(e/c),s[1]=i[1]+(o[1]-i[1])*(e/c),s;case a.Interpolation.HERMITE:let n=this.startTangent,l=this.endTangent;t&&r?(i=t.value,n=t.rightTangent,o=r.value,l=r.leftTangent,c=r.time-t.time):r?(o=r.value,l=r.leftTangent,c=r.time):t&&(i=t.value,n=t.rightTangent,c=this.length-t.time);const h=e/c,d=h*h,f=d*h,m=-2*f+3*d,p=1-m,v=f-d,_=h+v-d;return s[0]=i[0]*p+o[0]*m+n[0]*_+l[0]*v,s[1]=i[1]*p+o[1]*m+n[1]*_+l[1]*v,s;default:return s}}}a.inputDimension=2,a.outputDimension=2,a.valueProperty="value",a.curveType=s.Tw2Curve.Type.CURVE2,a.Key=i,a.Interpolation={CONSTANT:0,LINEAR:1,HERMITE:2}},"./curve/curve/legacy/Tw2Vector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Key",function(){return i}),r.d(t,"Tw2Vector3Curve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.vec3.create(),this.leftTangent=n.vec3.create(),this.rightTangent=n.vec3.create(),this.interpolation=1}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.cycle=!1,this.reversed=!1,this.timeOffset=0,this.timeScale=1,this.startValue=n.vec3.create(),this.currentValue=n.vec3.create(),this.endValue=n.vec3.create(),this.startTangent=n.vec3.create(),this.endTangent=n.vec3.create(),this.interpolation=1,this.keys=[],this.length=0}Sort(){s.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec3.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec3.copy(t,this.startValue):n.vec3.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],s=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=s.time)return this.Interpolate(e,s,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],s=this.keys[t+1],!(r.time<=e&&s.time>e));++t);return this.Interpolate(e,r,s,t)}Interpolate(e,t,r,s){n.vec3.copy(s,this.startValue);let i=this.startValue,o=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case a.Interpolation.LINEAR:return t&&r?(i=t.value,o=r.value,c=r.time-t.time):r?(o=r.value,c=r.time):t&&(i=t.value,c=this.length-t.time),s[0]=i[0]+(o[0]-i[0])*(e/c),s[1]=i[1]+(o[1]-i[1])*(e/c),s[2]=i[2]+(o[2]-i[2])*(e/c),s;case a.Interpolation.HERMITE:let n=this.startTangent,l=this.endTangent;t&&r?(i=t.value,n=t.rightTangent,o=r.value,l=r.leftTangent,c=r.time-t.time):r?(o=r.value,l=r.leftTangent,c=r.time):t&&(i=t.value,n=t.rightTangent,c=this.length-t.time);const h=e/c,d=h*h,f=d*h,m=-2*f+3*d,p=1-m,v=f-d,_=h+v-d;return s[0]=i[0]*p+o[0]*m+n[0]*_+l[0]*v,s[1]=i[1]*p+o[1]*m+n[1]*_+l[1]*v,s[2]=i[2]*p+o[2]*m+n[2]*_+l[2]*v,s;default:return s}}}a.inputDimension=3,a.outputDimension=3,a.valueProperty="currentValue",a.curveType=s.Tw2Curve.Type.CURVE2,a.Key=i,a.Interpolation={CONSTANT:0,LINEAR:1,HERMITE:2}},"./curve/curve/legacy/Tw2VectorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorKey",function(){return i}),r.d(t,"Tw2VectorCurve",function(){return a});var n=r("./global/index.js"),s=r("./curve/curve/Tw2Curve.js");class i extends s.Tw2CurveKey{constructor(...e){super(...e),this.value=n.vec3.create(),this.left=n.vec3.create(),this.right=n.vec3.create(),this.interpolation=0}}class a extends s.Tw2Curve{constructor(...e){super(...e),this.start=0,this.value=n.vec3.create(),this.extrapolation=0,this.keys=[],this._currentKey=1,this.length=0}Sort(){s.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.vec3.copy(t,this.value);const r=this.keys[0],s=this.keys[this.keys.length-1];if(e>=s.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.vec3.copy(t,this.value);case a.Extrapolation.CONSTANT:return n.vec3.copy(t,s.value);case a.Extrapolation.GRADIENT:return n.vec3.scaleAndAdd(t,s.value,s.right,e-s.time);default:e%=s.time}else if(e<0||e<r.time)switch(this.extrapolation){case a.Extrapolation.NONE:return n.vec3.copy(t,this.value);case a.Extrapolation.GRADIENT:return n.vec3.scaleAndAdd(t,r.value,r.left,e*this.length-s.time);default:return n.vec3.copy(t,r.value)}let i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];for(;e>=i.time||e<o.time;)e<o.time&&(this._currentKey=0),this._currentKey++,i=this.keys[this._currentKey],o=this.keys[this._currentKey-1];const u=(e-o.time)/(i.time-o.time);switch(o.interpolation){case a.Interpolation.CONSTANT:return n.vec3.copy(t,o.value);case a.Interpolation.LINEAR:return t[0]=o.value[0]*(1-u)+i.value[0]*u,t[1]=o.value[1]*(1-u)+i.value[1]*u,t[2]=o.value[2]*(1-u)+i.value[2]*u,t;case a.Interpolation.HERMITE:const e=2*u*u*u-3*u*u+1,r=-2*u*u*u+3*u*u,s=u*u*u-2*u*u+u,c=u*u*u-u*u;return t[0]=e*o.value[0]+r*i.value[0]+s*o.right[0]+c*i.left[0],t[1]=e*o.value[1]+r*i.value[1]+s*o.right[1]+c*i.left[1],t[2]=e*o.value[2]+r*i.value[2]+s*o.right[2]+c*i.left[2],t;default:return t}}}a.inputDimension=3,a.outputDimension=3,a.valueProperty="value",a.curveType=s.Tw2Curve.Type.CURVE,a.Key=i,a.Extrapolation={NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3},a.Interpolation={NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3}},"./curve/curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/legacy/Tw2ColorCurve.js");r.d(t,"Tw2ColorKey",function(){return n.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return n.Tw2ColorCurve});var s=r("./curve/curve/legacy/Tw2ColorCurve2.js");r.d(t,"Tw2ColorKey2",function(){return s.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return s.Tw2ColorCurve2});var i=r("./curve/curve/legacy/Tw2QuaternionCurve.js");r.d(t,"Tw2QuaternionKey2",function(){return i.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return i.Tw2QuaternionCurve});var a=r("./curve/curve/legacy/Tw2RandomConstantCurve.js");r.d(t,"Tw2RandomConstantCurve",function(){return a.Tw2RandomConstantCurve});var o=r("./curve/curve/legacy/Tw2RigidOrientation.js");r.d(t,"Tw2Torque",function(){return o.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return o.Tw2RigidOrientation});var u=r("./curve/curve/legacy/Tw2RotationCurve.js");r.d(t,"Tw2QuaternionKey",function(){return u.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return u.Tw2RotationCurve});var c=r("./curve/curve/legacy/Tw2ScalarCurve.js");r.d(t,"Tw2ScalarKey",function(){return c.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return c.Tw2ScalarCurve});var l=r("./curve/curve/legacy/Tw2ScalarCurve2.js");r.d(t,"Tw2ScalarKey2",function(){return l.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return l.Tw2ScalarCurve2});var h=r("./curve/curve/legacy/Tw2SineCurve.js");r.d(t,"Tw2SineCurve",function(){return h.Tw2SineCurve});var d=r("./curve/curve/legacy/Tw2Vector2Curve.js");r.d(t,"Tw2Vector2Key",function(){return d.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return d.Tw2Vector2Curve});var f=r("./curve/curve/legacy/Tw2Vector3Curve.js");r.d(t,"Tw2Vector3Key",function(){return f.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return f.Tw2Vector3Curve});var m=r("./curve/curve/legacy/Tw2VectorCurve.js");r.d(t,"Tw2VectorKey",function(){return m.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return m.Tw2VectorCurve})},"./curve/expression/Tr2CurveEulerRotationExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveEulerRotationExpression",function(){return i});var n=r("./global/index.js"),s=r("./curve/expression/Tw2CurveExpression.js");class i extends s.Tw2CurveExpression{constructor(...e){super(...e),this.expressionPitch="",this.expressionRoll="",this.expressionYaw="",this.currentValue=n.quat.create()}static black(e){return[["inputs",e.array],["name",e.string],["expressionYaw",e.string],["expressionPitch",e.string],["expressionRoll",e.string]]}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="currentValue",i.childProperties=["expressionPitch","expressionRoll","expressionYaw"],i.__isStaging=4},"./curve/expression/Tr2CurveScalarExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveScalarExpression",function(){return s});var n=r("./curve/expression/Tw2CurveExpression.js");class s extends n.Tw2CurveExpression{constructor(...e){super(...e),this.expression="",this.input1=-1,this.input2=-1,this.input3=-1,this.currentValue=0}static black(e){return[["inputs",e.array],["name",e.string],["expression",e.string],["input1",e.float],["input2",e.float],["input3",e.float]]}}s.inputDimension=1,s.outputDimension=1,s.valueProperty="currentValue",s.childProperties=["expression"],s.__isStaging=4},"./curve/expression/Tr2CurveVector3Expression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveVector3Expression",function(){return i});var n=r("./global/index.js"),s=r("./curve/expression/Tw2CurveExpression.js");class i extends s.Tw2CurveExpression{constructor(...e){super(...e),this.expressionX="",this.expressionY="",this.expressionZ="",this.currentValue=n.vec3.create()}static black(e){return[["inputs",e.array],["name",e.string],["expressionX",e.string],["expressionY",e.string],["expressionZ",e.string]]}}i.inputDimension=1,i.outputDimension=3,i.valueProperty="currentValue",i.childProperties=["expressionX","expressionY","expressionZ"],i.__isStaging=4},"./curve/expression/Tw2CurveExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveExpression",function(){return s});var n=r("./curve/curve/index.js");class s extends n.Tw2Curve{constructor(...e){super(...e),this.name="",this.inputs=[]}UpdateValue(e){this.GetValueAt(e,this.currentValue)}}s.curveType=n.Tw2Curve.Type.EXPRESSION},"./curve/expression/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/expression/Tr2CurveEulerRotationExpression.js");r.d(t,"Tr2CurveEulerRotationExpression",function(){return n.Tr2CurveEulerRotationExpression});var s=r("./curve/expression/Tr2CurveScalarExpression.js");r.d(t,"Tr2CurveScalarExpression",function(){return s.Tr2CurveScalarExpression});var i=r("./curve/expression/Tr2CurveVector3Expression.js");r.d(t,"Tr2CurveVector3Expression",function(){return i.Tr2CurveVector3Expression});var a=r("./curve/expression/Tw2CurveExpression.js");r.d(t,"Tw2CurveExpression",function(){return a.Tw2CurveExpression})},"./curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/Tw2CurveSet.js");r.d(t,"Tw2CurveSet",function(){return n.Tw2CurveSet});var s=r("./curve/Tw2CurveSetRange.js");r.d(t,"Tw2CurveSetRange",function(){return s.Tw2CurveSetRange});var i=r("./curve/Tw2ValueBinding.js");r.d(t,"Tw2ValueBinding",function(){return i.Tw2ValueBinding});var a=r("./curve/adapter/index.js");r.d(t,"Tr2RotationAdapter",function(){return a.Tr2RotationAdapter}),r.d(t,"Tr2TranslationAdapter",function(){return a.Tr2TranslationAdapter}),r.d(t,"Tw2CurveAdapter",function(){return a.Tw2CurveAdapter});var o=r("./curve/curve/index.js");r.d(t,"AudEventKey",function(){return o.AudEventKey}),r.d(t,"AudEventCurve",function(){return o.AudEventCurve}),r.d(t,"Tr2BoneMatrixCurve",function(){return o.Tr2BoneMatrixCurve}),r.d(t,"Tw2CurveConstant",function(){return o.Tw2CurveConstant}),r.d(t,"Tw2CurveScalarKey",function(){return o.Tw2CurveScalarKey}),r.d(t,"Tr2CurveScalar",function(){return o.Tr2CurveScalar}),r.d(t,"Tr2ScalarExprKey",function(){return o.Tr2ScalarExprKey}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return o.Tr2ScalarExprKeyCurve}),r.d(t,"Tw2EventKey",function(){return o.Tw2EventKey}),r.d(t,"Tw2EventCurve",function(){return o.Tw2EventCurve}),r.d(t,"Tw2PerlinCurve",function(){return o.Tw2PerlinCurve}),r.d(t,"Tw2CurveKey",function(){return o.Tw2CurveKey}),r.d(t,"Tw2Curve",function(){return o.Tw2Curve}),r.d(t,"Tw2ColorKey",function(){return o.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return o.Tw2ColorCurve}),r.d(t,"Tw2ColorKey2",function(){return o.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return o.Tw2ColorCurve2}),r.d(t,"Tw2QuaternionKey2",function(){return o.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return o.Tw2QuaternionCurve}),r.d(t,"Tw2RandomConstantCurve",function(){return o.Tw2RandomConstantCurve}),r.d(t,"Tw2Torque",function(){return o.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return o.Tw2RigidOrientation}),r.d(t,"Tw2QuaternionKey",function(){return o.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return o.Tw2RotationCurve}),r.d(t,"Tw2ScalarKey",function(){return o.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return o.Tw2ScalarCurve}),r.d(t,"Tw2ScalarKey2",function(){return o.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return o.Tw2ScalarCurve2}),r.d(t,"Tw2SineCurve",function(){return o.Tw2SineCurve}),r.d(t,"Tw2Vector2Key",function(){return o.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return o.Tw2Vector2Curve}),r.d(t,"Tw2Vector3Key",function(){return o.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return o.Tw2Vector3Curve}),r.d(t,"Tw2VectorKey",function(){return o.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return o.Tw2VectorCurve});var u=r("./curve/expression/index.js");r.d(t,"Tr2CurveEulerRotationExpression",function(){return u.Tr2CurveEulerRotationExpression}),r.d(t,"Tr2CurveScalarExpression",function(){return u.Tr2CurveScalarExpression}),r.d(t,"Tr2CurveVector3Expression",function(){return u.Tr2CurveVector3Expression}),r.d(t,"Tw2CurveExpression",function(){return u.Tw2CurveExpression});var c=r("./curve/legacy/index.js");r.d(t,"Tw2WbgTrack",function(){return c.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return c.Tw2WbgTransformTrack}),r.d(t,"Tw2TransformTrack",function(){return c.Tw2TransformTrack}),r.d(t,"Tw2MayaEulerRotationCurve",function(){return c.Tw2MayaEulerRotationCurve}),r.d(t,"Tw2MayaScalarCurve",function(){return c.Tw2MayaScalarCurve}),r.d(t,"Tw2MayaVector3Curve",function(){return c.Tw2MayaVector3Curve}),r.d(t,"Tw2MayaAnimationEngine",function(){return c.Tw2MayaAnimationEngine});var l=r("./curve/sequencer/index.js");r.d(t,"TriColorSequencer",function(){return l.TriColorSequencer}),r.d(t,"Tw2CurveColor",function(){return l.Tw2CurveColor}),r.d(t,"Tw2CurveEulerRotation",function(){return l.Tw2CurveEulerRotation}),r.d(t,"Tw2CurveVector3",function(){return l.Tw2CurveVector3}),r.d(t,"Tw2CurveSequencer",function(){return l.Tw2CurveSequencer}),r.d(t,"Tw2ColorSequencer",function(){return l.Tw2ColorSequencer}),r.d(t,"Tw2EulerRotation",function(){return l.Tw2EulerRotation}),r.d(t,"Tw2QuaternionSequencer",function(){return l.Tw2QuaternionSequencer}),r.d(t,"Tw2RGBAScalarSequencer",function(){return l.Tw2RGBAScalarSequencer}),r.d(t,"Tw2ScalarSequencer",function(){return l.Tw2ScalarSequencer}),r.d(t,"Tw2VectorSequencer",function(){return l.Tw2VectorSequencer}),r.d(t,"Tw2XYZScalarSequencer",function(){return l.Tw2XYZScalarSequencer}),r.d(t,"Tw2YPRSequencer",function(){return l.Tw2YPRSequencer})},"./curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/index.js");r.d(t,"Tw2WbgTrack",function(){return n.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return n.Tw2WbgTransformTrack}),r.d(t,"Tw2TransformTrack",function(){return n.Tw2TransformTrack});var s=r("./curve/legacy/maya/index.js");r.d(t,"Tw2MayaEulerRotationCurve",function(){return s.Tw2MayaEulerRotationCurve}),r.d(t,"Tw2MayaScalarCurve",function(){return s.Tw2MayaScalarCurve}),r.d(t,"Tw2MayaVector3Curve",function(){return s.Tw2MayaVector3Curve}),r.d(t,"Tw2MayaAnimationEngine",function(){return s.Tw2MayaAnimationEngine})},"./curve/legacy/maya/Tw2MayaAnimationEngine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaAnimationEngine",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i{constructor(){this._id=n.util.generateID(),this.curves=[],this.hermiteSegments=[],this.bezierSegments=[],this._currentCurveIndex=0,this._evalCache=null}Evaluate(e,t){if(this.curves.length<=e)return 0;if(this._currentCurveIndex=e,!this._evalCache){this._evalCache=new Array(this.curves.length);for(let e=0;e<this._evalCache.length;++e)this._evalCache[e]=-1}let r=this.curves[e],n=r[i.AnimCurveFields.SEGMENT_OFFSET],s=null;return t<(s=r[i.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments:this.hermiteSegments)[n][i.AnimSegment.TIME]?r[i.AnimCurveFields.PRE_INFINITY]===i.INFINITY?s[n][i.AnimSegment.VALUE]:this._EvaluateInfinities(r,s,n,t,!0):t>r[i.AnimCurveFields.END_TIME]?r[i.AnimCurveFields.POST_INFINITY]===i.INFINITY?r[i.AnimCurveFields.END_VALUE]:this._EvaluateInfinities(r,s,n,t,!1):this._EvaluateImpl(r,s,n,t)}_EvaluateImpl(e,t,r,n){let s,a=!1,o=null,u=null;if(this._evalCache[this._currentCurveIndex]>=0)if(u=r+this._evalCache[this._currentCurveIndex],this._evalCache[this._currentCurveIndex]<e[i.AnimCurveFields.NUM_SEGMENTS-1]&&n>t[u][i.AnimSegment.TIME]){if(n===t[o=r+this._evalCache[this._currentCurveIndex]+1][i.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]++,t[o][i.AnimSegment.VALUE];n<t[o][i.AnimSegment.TIME]?(s=this._evalCache[this._currentCurveIndex]+1,a=!0):o=null}else if(this._evalCache[this._currentCurveIndex]>0&&n<t[u][i.AnimSegment.TIME]){let e=r+this._evalCache[this._currentCurveIndex]-1;if(n>t[e][i.AnimSegment.TIME])s=this._evalCache[this._currentCurveIndex],a=!0;else if(n===t[e][i.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]--,t[e][i.AnimSegment.VALUE]}if(!a){let a=this._Find(e,n,t,r);if(s=a[1],a[0]||0===s)return s===e[i.AnimCurveFields.NUM_SEGMENTS]?(s--,this._evalCache[this._currentCurveIndex]=s,e[i.AnimCurveFields.END_VALUE]):(this._evalCache[this._currentCurveIndex]=s,t[r+s][i.AnimSegment.VALUE]);if(s===e[i.AnimCurveFields.NUM_SEGMENTS]+1)return this._evalCache[this._currentCurveIndex]=0,e[i.AnimCurveFields.END_VALUE]}if(this._evalCache[this._currentCurveIndex]!==s-1&&(this._evalCache[this._currentCurveIndex]=s-1,u=r+this._evalCache[this._currentCurveIndex],null===o&&(o=r+s)),e[i.AnimCurveFields.IS_WEIGHTED]){let r=t[u];if(r[i.BezierSegment.IS_STEP])return r[i.BezierSegment.VALUE];if(r[i.BezierSegment.IS_STEP_NEXT])return null===o?e[i.AnimCurveFields.END_VALUE]:t[o][i.BezierSegment.VALUE];{let s=e[i.AnimCurveFields.END_TIME];return this._evalCache[this._currentCurveIndex]+1<e[i.AnimCurveFields.NUM_SEGMENTS]&&(s=t[o][i.BezierSegment.TIME]),this._EvaluateBezier(r,n,s)}}{let r=t[u];return r[i.HermiteSegment.IS_STEP]?r[i.HermiteSegment.VALUE]:r[i.HermiteSegment.IS_STEP_NEXT]?null===o?e[i.AnimCurveFields.END_VALUE]:t[o][i.HermiteSegment.VALUE]:this._EvaluateHermite(r,n)}}_EvaluateInfinities(e,t,r,n,i){throw new s.ErrFeatureNotImplemented({feature:"Maya animation engine evaluate infinities"})}_EvaluateHermite(e,t){let r=t-e[i.HermiteSegment.TIME],n=e[i.HermiteSegment.COEFF];return r*(r*(r*n[0]+n[1])+n[2])+n[3]}_EvaluateBezier(e,t,r){let s,a;if(a=(t-e[i.BezierSegment.TIME])/(r-e[i.BezierSegment.TIME]),e[i.BezierSegment.IS_LINEAR])s=a;else{let t=n.vec4.create();t[3]=e[i.BezierSegment.COEFF][3],t[2]=e[i.BezierSegment.COEFF][2],t[1]=e[i.BezierSegment.COEFF][1],t[0]=e[i.BezierSegment.COEFF][0]-a;let r=[];s=1===n.curve.polyZeroes(t,3,0,1,1,1,r)?r[0]:0}let o=e[i.BezierSegment.POLYY];return s*(s*(s*o[3]+o[2])+o[1])+o[0]}_Find(e,t,r,n){let s,a,o,u,c=0,l=null,h=0;if((s=e[i.AnimCurveFields.NUM_SEGMENTS]+1)>0){o=0,u=s-1;do{if(t<(h=(a=o+u>>1)<s-1?r[l=n+a][i.AnimSegment.TIME]:e[i.AnimCurveFields.END_TIME]))u=a-1;else{if(!(t>h))return[!0,c=a];o=a+1}}while(o<=u);c=o}return[!1,c]}GetNumberOfCurves(){return this.curves.length}GetLength(e){if(e<0||e>=this.curves.length)return 0;let t,r=this.curves[e];return t=r[i.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments[r[i.AnimCurveFields.SEGMENT_OFFSET]]:this.hermiteSegments[r[i.AnimCurveFields.SEGMENT_OFFSET]],r[i.AnimCurveFields.END_TIME]-t[i.AnimSegment.TIME]}}i.AnimCurveFields={NUM_SEGMENTS:0,SEGMENT_OFFSET:1,END_TIME:2,END_VALUE:3,IN_TANGENT:4,OUT_TANGENT:5,PRE_INFINITY:6,POST_INFINITY:7,IS_WEIGHTED:8},i.AnimSegment={TIME:0,VALUE:1},i.HermiteSegment={TIME:0,VALUE:1,COEFF:2,IS_STEP:3,IS_STEP_NEXT:4},i.BezierSegment={TIME:0,VALUE:1,COEFF:2,POLYY:3,IS_STEP:4,IS_STEP_NEXT:5,IS_LINEAR:6},i.INFINITY=0},"./curve/legacy/maya/Tw2MayaEulerRotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaEulerRotationCurve",function(){return i});var n=r("./global/index.js"),s=r("./curve/curve/index.js");class i extends s.Tw2Curve{constructor(...e){super(...e),this.xIndex=-1,this.yIndex=-1,this.zIndex=-1,this.animationEngine=null,this.eulerValue=n.vec3.create(),this.updateQuaternion=!1,this.quatValue=n.quat.create(),this.length=0}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){if(this.animationEngine&&(this.xIndex&&(this.eulerValue[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.eulerValue[1]=this.eulerValue[0]:this.eulerValue[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.eulerValue[2]=this.eulerValue[0]:this.eulerValue[2]=this.animationEngine.Evaluate(this.zIndex,e)),this.updateQuaternion)){const e=Math.sin(this.eulerValue[0]/2),t=Math.cos(this.eulerValue[0]/2),r=Math.sin(this.eulerValue[1]/2),n=Math.cos(this.eulerValue[1]/2),s=Math.sin(this.eulerValue[2]/2),i=Math.cos(this.eulerValue[2]/2);this.quatValue[0]=e*n*s+t*r*i,this.quatValue[1]=e*n*i-t*r*s,this.quatValue[2]=t*n*s-e*r*i,this.quatValue[3]=t*n*i+e*r*s}}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}i.outputDimension=3,i.valueProperty="eulerValue",i.curveType=s.Tw2Curve.Type.CURVE_MAYA},"./curve/legacy/maya/Tw2MayaScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaScalarCurve",function(){return s});var n=r("./curve/curve/index.js");class s extends n.Tw2Curve{constructor(...e){super(...e),this.index=-1,this.animationEngine=null,this.value=0,this.length=0}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.value=this.animationEngine.Evaluate(this.index,e))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&this.index>=0&&(this.length=this.animationEngine.GetLength(this.index))}}s.outputDimension=1,s.valueProperty="value",s.curveType=n.Tw2Curve.Type.CURVE_MAYA},"./curve/legacy/maya/Tw2MayaVector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaVector3Curve",function(){return i});var n=r("./global/index.js"),s=r("./curve/curve/index.js");class i extends s.Tw2Curve{constructor(...e){super(...e),this.xIndex=-1,this.yIndex=-1,this.zIndex=-1,this.animationEngine=null,this.value=n.vec3.create(),this.length=0}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.xIndex&&(this.value[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.value[1]=this.value[0]:this.value[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.value[2]=this.value[0]:this.value[2]=this.animationEngine.Evaluate(this.zIndex,e)))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}i.outputDimension=3,i.valueProperty="value",i.curveType=s.Tw2Curve.Type.CURVE_MAYA},"./curve/legacy/maya/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/maya/Tw2MayaEulerRotationCurve.js");r.d(t,"Tw2MayaEulerRotationCurve",function(){return n.Tw2MayaEulerRotationCurve});var s=r("./curve/legacy/maya/Tw2MayaScalarCurve.js");r.d(t,"Tw2MayaScalarCurve",function(){return s.Tw2MayaScalarCurve});var i=r("./curve/legacy/maya/Tw2MayaVector3Curve.js");r.d(t,"Tw2MayaVector3Curve",function(){return i.Tw2MayaVector3Curve});var a=r("./curve/legacy/maya/Tw2MayaAnimationEngine.js");r.d(t,"Tw2MayaAnimationEngine",function(){return a.Tw2MayaAnimationEngine})},"./curve/legacy/tracks/Tw2TransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformTrack",function(){return s});var n=r("./global/index.js");class s{constructor(){this._id=n.util.generateID(),this.name="",this.resPath="",this.res=null,this.group="",this.cycle=!1,this.duration=0,this.translation=n.vec3.create(),this.rotation=n.quat.create(),this.scale=n.vec3.fromValues(0,0,0),this.scaleShear=n.mat4.create(),this.positionCurve=null,this.orientationCurve=null,this.scaleCurve=null}Initialize(){""!==this.resPath&&(this.res=n.resMan.GetResource(this.resPath))}GetLength(){return this.duration}UpdateValue(e){this.res&&this.res.IsGood()&&(this.positionCurve||this.FindTracks(),this.positionCurve&&(this.cycle&&(e%=this.duration),e>this.duration||e<0||(n.curve.evaluate(this.positionCurve,e,this.translation,this.cycle,this.duration),n.curve.evaluate(this.orientationCurve,e,this.rotation,this.cycle,this.duration),n.quat.normalize(this.rotation,this.rotation),n.curve.evaluate(this.scaleCurve,e,this.scaleShear,this.cycle,this.duration),n.mat4.getScaling(this.scale,this.scaleCurve))))}FindTracks(){let e=null;for(let t=0;t<this.res.animations.length;++t)for(let r=0;r<this.res.animations[t].trackGroups.length;++r)if(this.res.animations[t].trackGroups[r].name===this.group){this.duration=this.res.animations[t].duration,e=this.res.animations[t].trackGroups[r];break}if(e)for(let t=0;t<e.transformTracks.length;++t)if(this.name===e.transformTracks[t].name){this.positionCurve=e.transformTracks[t].position,this.orientationCurve=e.transformTracks[t].orientation,this.scaleCurve=e.transformTracks[t].scaleShear;break}}}},"./curve/legacy/tracks/Tw2WbgTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2WbgTrack",function(){return s}),r.d(t,"Tw2WbgTransformTrack",function(){return i});var n=r("./global/index.js");function s(){this._id=n.util.generateID(),this.name="",this.geometryResPath="",this.geometryRes=null,this.group="",this.duration=0,this.cycle=!1,this.Initialize=function(){this.geometryResPath&&(this.geometryRes=n.resMan.GetResource(this.geometryResPath,e=>(function(e){if(e.name&&e.group&&e.geometryRes)for(let t=0;t<e.geometryRes.animations.length;++t){let r=e.geometryRes.animations[t];for(let t=0;t<r.trackGroups.length;++t)r.trackGroups[t].name===e.group&&e._ApplyTracks(r.trackGroups[t],r.duration)}})(this)))},this.UpdateValue=function(e){this._TracksReady()&&(this.cycle&&(e%=this.duration),e<=this.duration&&e>=0&&this._UpdateValue(e))}}function i(){this._id=n.util.generateID(),this.translation=n.vec3.create(),this.rotation=n.quat.create(),this.rotation[3]=1,this.scale=n.vec3.create();let e=null,t=null,r=null,s=n.mat4.create();this._TracksReady=function(){return e||t||r},this._ApplyTracks=function(n,s){for(let i=0;i<n.transformTracks.length;++i){let a=n.transformTracks[i];a.name===this.name&&(this.duration=s,e=a.position,t=a.orientation,r=a.scaleShear)}this.UpdateValue(0)},this._UpdateValue=function(i){e&&n.curve.evaluate(e,i,this.translation,this.cycle,this.duration),t&&(n.curve.evaluate(t,i,this.rotation,this.cycle,this.duration),n.quat.normalize(this.rotation,this.rotation)),r&&n.curve.evaluate(r,i,s,this.cycle,this.duration),this.scale[0]=s[0],this.scale[1]=s[5],this.scale[2]=s[10]}}i.prototype=new s},"./curve/legacy/tracks/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/Tw2WbgTrack.js");r.d(t,"Tw2WbgTrack",function(){return n.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return n.Tw2WbgTransformTrack});var s=r("./curve/legacy/tracks/Tw2TransformTrack.js");r.d(t,"Tw2TransformTrack",function(){return s.Tw2TransformTrack})},"./curve/sequencer/TriColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriColorSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.functions=[],this.value=n.vec4.create()}Sort(){s.Tw2CurveSequencer.Sort(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=s.Tw2CurveSequencer.global.vec4_0;n.vec4.set(r,0,0,0,0);for(let s=0;s<this.functions.length;s++)this.functions[s].GetValueAt(e,t),n.vec4.add(t,t,r);return t}static black(e){return[["functions",e.array],["name",e.string],["value",e.vector4]]}}i.inputDimension=4,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER,i.childArray="functions",i.__isStaging=2},"./curve/sequencer/Tw2CurveColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveColor",function(){return i});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),s=r("./global/index.js");class i extends n.Tw2CurveSequencer{constructor(...e){super(...e),this.r=null,this.g=null,this.b=null,this.a=null,this.currentValue=s.vec4.fromValues(0,0,0,0)}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){return t[0]=this.r?this.r.GetValueAt(e):0,t[1]=this.g?this.g.GetValueAt(e):0,t[2]=this.b?this.b.GetValueAt(e):0,t[3]=this.a?this.a.GetValueAt(e):0,t}static black(e){return[["name",e.string],["r",e.rawObject],["g",e.rawObject],["b",e.rawObject],["a",e.rawObject]]}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="currentValue",i.curveType=n.Tw2CurveSequencer.Type.SEQUENCER,i.childProperties=["r","g","b","a"],i.__isStaging=2},"./curve/sequencer/Tw2CurveEulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveEulerRotation",function(){return i});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),s=r("./global/index.js");class i extends n.Tw2CurveSequencer{constructor(...e){super(...e),this.pitch=null,this.roll=null,this.yaw=null,this.currentValue=s.quat.create()}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){const r=this.yaw?this.yaw.GetValueAt(e):0,n=this.pitch?this.pitch.GetValueAt(e):0,s=this.roll?this.roll.GetValueAt(e):0,i=Math.sin(r/2),a=Math.cos(r/2),o=Math.sin(n/2),u=Math.cos(n/2),c=Math.sin(s/2),l=Math.cos(s/2);return t[0]=i*u*c+a*o*l,t[1]=i*u*l-a*o*c,t[2]=a*u*c-i*o*l,t[3]=a*u*l+i*o*c,t}static black(e){return[["name",e.string],["pitch",e.rawObject],["roll",e.rawObject],["yaw",e.rawObject]]}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="currentValue",i.curveType=n.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["yaw","pitch","roll"],i.__isStaging=2},"./curve/sequencer/Tw2CurveSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSequencer",function(){return s});var n=r("./curve/curve/Tw2Curve.js");class s extends n.Tw2Curve{static Sort(e,t=e.constructor.childArray){let r=e[t];if(r&&r.length)for(let e=0;e<r.length;e++)r[e]&&"Sort"in r[e]&&r[e].Sort()}static Sort2(e,t=e.constructor.childProperties){if(t)for(let r=0;r<t.length;r++){let n=e[t[r]];n&&"Sort"in n&&n.Sort()}}static GetLengthFromKeys(e,t=e.constructor.childArray){const r=e[t];let n=0;for(let e=0;e<r.length;++e)"GetLength"in r[e]&&(n=Math.max(n,r[e].GetLength()));return n}static GetLengthFromProperties(e,t=e.constructor.childProperties){let r=0;for(let n=0;n<t.length;n++){const s=e[t[n]];s&&"GetLength"in s&&(r=Math.max(r,s.GetLength()))}return r}}s.inputDimension=null,s.outputDimension=null,s.childProperties=null,s.childArray=null,s.Operator=null},"./curve/sequencer/Tw2CurveVector3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveVector3",function(){return i});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),s=r("./global/index.js");class i extends n.Tw2CurveSequencer{constructor(...e){super(...e),this.x=null,this.y=null,this.z=null,this.currentValue=s.vec3.create()}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){return t[0]=this.x?this.x.GetValueAt(e):0,t[1]=this.y?this.y.GetValueAt(e):0,t[2]=this.z?this.z.GetValueAt(e):0,t}static black(e){return[["name",e.string],["x",e.rawObject],["y",e.rawObject],["z",e.rawObject]]}}i.inputDimension=1,i.outputDimension=3,i.valueProperty="currentValue",i.curveType=n.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["x","y","z"],i.__isStaging=2},"./curve/sequencer/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/TriColorSequencer.js");r.d(t,"TriColorSequencer",function(){return n.TriColorSequencer});var s=r("./curve/sequencer/Tw2CurveColor.js");r.d(t,"Tw2CurveColor",function(){return s.Tw2CurveColor});var i=r("./curve/sequencer/Tw2CurveEulerRotation.js");r.d(t,"Tw2CurveEulerRotation",function(){return i.Tw2CurveEulerRotation});var a=r("./curve/sequencer/Tw2CurveVector3.js");r.d(t,"Tw2CurveVector3",function(){return a.Tw2CurveVector3});var o=r("./curve/sequencer/Tw2CurveSequencer.js");r.d(t,"Tw2CurveSequencer",function(){return o.Tw2CurveSequencer});var u=r("./curve/sequencer/legacy/index.js");r.d(t,"Tw2ColorSequencer",function(){return u.Tw2ColorSequencer}),r.d(t,"Tw2EulerRotation",function(){return u.Tw2EulerRotation}),r.d(t,"Tw2QuaternionSequencer",function(){return u.Tw2QuaternionSequencer}),r.d(t,"Tw2RGBAScalarSequencer",function(){return u.Tw2RGBAScalarSequencer}),r.d(t,"Tw2ScalarSequencer",function(){return u.Tw2ScalarSequencer}),r.d(t,"Tw2VectorSequencer",function(){return u.Tw2VectorSequencer}),r.d(t,"Tw2XYZScalarSequencer",function(){return u.Tw2XYZScalarSequencer}),r.d(t,"Tw2YPRSequencer",function(){return u.Tw2YPRSequencer})},"./curve/sequencer/legacy/Tw2ColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.start=0,this.value=n.vec4.create(),this.operator=0,this.functions=[]}Sort(){s.Tw2CurveSequencer.Sort(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=s.Tw2CurveSequencer.global.vec4_0;switch(this.operator){case i.Operator.MULTIPLY:n.vec4.set(t,1,1,1,1);for(let s=0;s<this.functions.length;++s)this.functions[s].GetValueAt(e,r),n.vec4.multiply(t,t,r);break;default:n.vec4.set(t,0,0,0,0);for(let s=0;s<this.functions.length;++s)this.functions[s].GetValueAt(e,r),n.vec4.add(t,t,r)}return t}}i.inputDimension=4,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER,i.childArray="functions",i.Operator={MULTIPLY:0,ADD:1}},"./curve/sequencer/legacy/Tw2EulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EulerRotation",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.yawCurve=null,this.pitchCurve=null,this.rollCurve=null,this.currentValue=n.quat.create()}Sort(){s.Tw2CurveSequencer.Sort2(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){const r=this.yawCurve?this.yawCurve.GetValueAt(e):0,n=this.pitchCurve?this.pitchCurve.GetValueAt(e):0,s=this.rollCurve?this.rollCurve.GetValueAt(e):0,i=Math.sin(r/2),a=Math.cos(r/2),o=Math.sin(n/2),u=Math.cos(n/2),c=Math.sin(s/2),l=Math.cos(s/2);return t[0]=i*u*c+a*o*l,t[1]=i*u*l-a*o*c,t[2]=a*u*c-i*o*l,t[3]=a*u*l+i*o*c,t}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="currentValue",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["yawCurve","pitchCurve","rollCurve"]},"./curve/sequencer/legacy/Tw2QuaternionSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.start=0,this.value=n.quat.create(),this.functions=[]}Sort(){s.Tw2CurveSequencer.Sort(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){n.quat.identity(t);const r=s.Tw2CurveSequencer.global.quat_0;for(let s=0;s<this.functions.length;++s)this.functions[s].GetValueAt(e,r),n.quat.multiply(t,t,r);return t}}i.inputDimension=4,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER,i.childArray="functions"},"./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RGBAScalarSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.value=n.vec4.create(),this.RedCurve=null,this.GreenCurve=null,this.BlueCurve=null,this.AlphaCurve=null}Sort(){s.Tw2CurveSequencer.Sort2(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.RedCurve?this.RedCurve.GetValueAt(e):0,t[1]=this.GreenCurve?this.GreenCurve.GetValueAt(e):0,t[2]=this.BlueCurve?this.BlueCurve.GetValueAt(e):0,t[3]=this.AlphaCurve?this.AlphaCurve.GetValueAt(e):0,t}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["RedCurve","GreenCurve","BlueCurve","AlphaCurve"]},"./curve/sequencer/legacy/Tw2ScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarSequencer",function(){return s});var n=r("./curve/sequencer/Tw2CurveSequencer.js");class s extends n.Tw2CurveSequencer{constructor(...e){super(...e),this.value=0,this.operator=0,this.functions=[],this.inMinClamp=0,this.inMaxClamp=1,this.outMinClamp=0,this.outMaxClamp=1,this.clamping=!1}Sort(){n.Tw2CurveSequencer.Sort(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){let t;switch(this.operator){case s.Operator.MULTIPLY:t=1;for(let r=0;r<this.functions.length;++r){let n=this.functions[r].GetValueAt(e);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),t*=n}break;default:t=0;for(let r=0;r<this.functions.length;++r){let n=this.functions[r].GetValueAt(e);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),t+=n}}return this.clamping&&(t=Math.min(Math.max(t,this.outMinClamp),this.outMaxClamp)),t}}s.inputDimension=1,s.outputDimension=1,s.valueProperty="value",s.curveType=n.Tw2CurveSequencer.Type.SEQUENCER,s.childArray="functions",s.Operator={MULTIPLY:0,ADD:1}},"./curve/sequencer/legacy/Tw2VectorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.start=0,this.value=n.vec3.create(),this.operator=0,this.functions=[]}Sort(){s.Tw2CurveSequencer.Sort(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=s.Tw2CurveSequencer.global.vec3_0;switch(this.operator){case i.Operator.MULTIPLY:n.vec3.set(t,1,1,1);for(let s=0;s<this.functions.length;++s)this.functions[s].GetValueAt(e,r),n.vec3.multiply(t,t,r);return t;default:n.vec3.set(t,0,0,0);for(let s=0;s<this.functions.length;++s)this.functions[s].GetValueAt(e,r),n.vec3.add(t,t,r);return t}}}i.inputDimension=3,i.outputDimension=3,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER,i.childArray="functions",i.Operator={MULTIPLY:0,ADD:1}},"./curve/sequencer/legacy/Tw2XYZScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2XYZScalarSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.value=n.vec3.create(),this.XCurve=null,this.YCurve=null,this.ZCurve=null}Sort(){s.Tw2CurveSequencer.Sort2(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.XCurve?this.XCurve.GetValueAt(e):0,t[1]=this.YCurve?this.YCurve.GetValueAt(e):0,t[2]=this.ZCurve?this.ZCurve.GetValueAt(e):0,t}}i.inputDimension=1,i.outputDimension=3,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["XCurve","YCurve","ZCurve"]},"./curve/sequencer/legacy/Tw2YPRSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2YPRSequencer",function(){return i});var n=r("./global/index.js"),s=r("./curve/sequencer/Tw2CurveSequencer.js");class i extends s.Tw2CurveSequencer{constructor(...e){super(...e),this.value=n.quat.create(),this.YawPitchRoll=n.vec3.create(),this.YawCurve=null,this.PitchCurve=null,this.RollCurve=null}Sort(){s.Tw2CurveSequencer.Sort2(this)}GetLength(){return s.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){this.YawCurve&&(this.YawPitchRoll[0]=this.YawCurve.GetValueAt(e)),this.PitchCurve&&(this.YawPitchRoll[1]=this.PitchCurve.GetValueAt(e)),this.RollCurve&&(this.YawPitchRoll[2]=this.RollCurve.GetValueAt(e));const r=Math.sin(this.YawPitchRoll[0]/180*Math.PI/2),n=Math.cos(this.YawPitchRoll[0]/180*Math.PI/2),s=Math.sin(this.YawPitchRoll[1]/180*Math.PI/2),i=Math.cos(this.YawPitchRoll[1]/180*Math.PI/2),a=Math.sin(this.YawPitchRoll[2]/180*Math.PI/2),o=Math.cos(this.YawPitchRoll[2]/180*Math.PI/2);return t[0]=r*i*a+n*s*o,t[1]=r*i*o-n*s*a,t[2]=n*i*a-r*s*o,t[3]=n*i*o+r*s*a,t}}i.inputDimension=1,i.outputDimension=4,i.valueProperty="value",i.curveType=s.Tw2CurveSequencer.Type.SEQUENCER2,i.childProperties=["YawCurve","PitchCurve","RollCurve"]},"./curve/sequencer/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/legacy/Tw2ColorSequencer.js");r.d(t,"Tw2ColorSequencer",function(){return n.Tw2ColorSequencer});var s=r("./curve/sequencer/legacy/Tw2EulerRotation.js");r.d(t,"Tw2EulerRotation",function(){return s.Tw2EulerRotation});var i=r("./curve/sequencer/legacy/Tw2QuaternionSequencer.js");r.d(t,"Tw2QuaternionSequencer",function(){return i.Tw2QuaternionSequencer});var a=r("./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js");r.d(t,"Tw2RGBAScalarSequencer",function(){return a.Tw2RGBAScalarSequencer});var o=r("./curve/sequencer/legacy/Tw2ScalarSequencer.js");r.d(t,"Tw2ScalarSequencer",function(){return o.Tw2ScalarSequencer});var u=r("./curve/sequencer/legacy/Tw2VectorSequencer.js");r.d(t,"Tw2VectorSequencer",function(){return u.Tw2VectorSequencer});var c=r("./curve/sequencer/legacy/Tw2XYZScalarSequencer.js");r.d(t,"Tw2XYZScalarSequencer",function(){return c.Tw2XYZScalarSequencer});var l=r("./curve/sequencer/legacy/Tw2YPRSequencer.js");r.d(t,"Tw2YPRSequencer",function(){return l.Tw2YPRSequencer})},"./eve/EveCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCamera",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.fieldOfView=0,this.friction=0,this.frontClip=0,this.idleMove=!1,this.idleScale=0,this.idleSpeed=0,this.intr=n.vec3.create(),this.maxSpeed=0,this.noiseScale=0,this.noiseScaleCurve=null,this.pitch=0,this.pos=n.vec3.create(),this.rotationAroundParent=n.quat.create(),this.translationFromParent=0,this.yaw=0,this.zoomCurve=null}static black(e){return[["fieldOfView",e.float],["friction",e.float],["frontClip",e.float],["idleMove",e.boolean],["idleScale",e.float],["idleSpeed",e.float],["intr",e.vector3],["pitch",e.float],["pos",e.vector3],["maxSpeed",e.float],["noiseScale",e.float],["noiseScaleCurve",e.object],["rotationAroundParent",e.vector4],["translationFromParent",e.float],["yaw",e.float],["zoomCurve",e.object]]}}s.__isStaging=4},"./eve/EveLineContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLineContainer",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.lineSet=null}static black(e){return[["lineSet",e.object]]}}s.__isStaging=4},"./eve/EveSpaceScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceScene",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(){super(),this.ambientColor=n.vec4.fromValues(.25,.25,.25,1),this.backgroundEffect=null,this.backgroundObjects=[],this.backgroundRenderingEnabled=!0,this.curveSets=[],this.enableShadows=!1,this.envMap1ResPath="",this.envMap2ResPath="",this.envMapResPath="",this.envMapRotation=n.quat.create(),this.externalParameters=[],this.fogColor=n.vec4.fromValues(.25,.25,.25,1),this.fogEnd=0,this.fogMax=0,this.fogStart=0,this.nebulaIntensity=1,this.objects=[],this.postProcessPath="",this.selfShadowOnly=!1,this.shLightingManager=null,this.shadowFadeThreshold=0,this.shadowThreshold=0,this.starfield=null,this.sunDiffuseColor=n.vec4.fromValues(1,1,1,1),this.sunDiffuseColorWithDynamicLights=n.vec4.fromValues(1,1,1,1),this.sunDirection=n.vec3.fromValues(1,-1,1),this.useSunDiffuseColorWithDynamicLights=!1,this.clearColor=n.vec4.fromValues(0,0,0,1),this.display=!0,this.envMapScaling=n.vec3.fromValues(1,1,1),this.fogBlur=0,this.fogType=0,this.lensflares=[],this.planets=[],this.lineSets=[],this.postProcess=null,this.visible={backgroundObjects:!0,clearColor:!0,debug:!1,environmentReflection:!0,environmentDiffuse:!0,environmentBlur:!0,fog:!0,lensflares:!0,lineSets:!0,objects:!0,planets:!0,post:!0,starField:!0},this._debugHelper=null,this._batches=new s.Tw2BatchAccumulator,this._emptyTexture=null,this._frustum=new s.Tw2Frustum,this._lodEnabled=!1,this._perFrameVS=s.Tw2RawData.from(i.perFrameData.vs),this._perFramePS=s.Tw2RawData.from(i.perFrameData.ps),this._envMapRes=null,this._envMap1Res=null,this._envMap2Res=null,Object.defineProperty(this.visible,"environment",{get:()=>this.backgroundRenderingEnabled,set:e=>this.backgroundRenderingEnabled=e?1:0}),Object.defineProperty(this.visible,"shadow",{get:()=>this.enableShadows,set:e=>this.enableShadows=e?1:0}),i.init()}Initialize(){if(this.SetEnvMapReflection(this.envMapPath),this.SetEnvMapDiffuse(this.envMap1ResPath),this.SetEnvMapBlur(this.envMap2ResPath),this.SetPostProcess(this.postProcessPath),this.objects.length){for(let e=0;e<this.objects.length;e++)this.backgroundObjects.push(this.objects[e]);this.objects.splice(0)}}SetPostProcess(e=""){e?(this.postProcessPath=e.toLowerCase(),n.resMan.GetObject(e,e=>this.postProcess=e)):(this.postProcessPath="",this.postProcess=null)}SetEnvMapReflection(e=""){e?(this.envMapResPath=e,this._envMapRes=n.resMan.GetResource(e)):(this.envMapPath="",this._envMapRes=null)}SetEnvMapDiffuse(e=""){e?(this.envMap1ResPath=e.toLowerCase(),this._envMap1Res=n.resMan.GetResource(e)):(this.envMap1ResPath="",this._envMap1Res=null)}SetEnvMapBlur(e=""){if(!e)return this.envMap2ResPath="",void(this._envMap1Res=null);this.envMap2ResPath=e.toLowerCase(),this._envMap2Res=n.resMan.GetResource(e)}EnableLod(e){this._lodEnabled=e,e||this.PerChildObject("ResetLod")}KeepAlive(){const e=this.GetResources();this.GetChildResources(e);for(let t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(e=[]){for(let t=0;t<this.lensflares.length;t++)this.lensflares[t].GetResources(e);return this.backgroundEffect&&this.backgroundEffect.GetResources(e),this.postProcess&&this.postProcess.GetResources(e),this.starfield&&this.starfield.GetResources(e),this._envMapRes&&!e.includes(this._envMapRes)&&e.push(this._envMapRes),this._envMap1Res&&!e.includes(this._envMap1Res)&&e.push(this._envMapRes),this._envMap2Res&&!e.includes(this._envMap2Res)&&e.push(this._envMapRes),e}GetChildResources(e=[]){return this.PerChildObject("GetResources",e),e}PerChildObject(e,...t){for(let r=0;r<this.planets.length;r++)e in this.planets[r]&&this.planets[r][e](...t);for(let r=0;r<this.objects.length;r++)e in this.objects[r]&&this.objects[r][e](...t);for(let r=0;r<this.backgroundObjects.length;r++)e in this.backgroundObjects[r]&&this.backgroundObjects[r][e](...t);for(let r=0;r<this.lineSets.length;r++)e in this.lineSets[r]&&this.lineSets[r][e](...t)}GetEmptyTexture(){return this._emptyTexture||(this._emptyTexture=n.resMan.GetResource("res:/texture/global/black.dds.0.png")),this._emptyTexture}Update(e){for(let t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);this.PerChildObject("Update",e)}RenderBatches(e,t,r=this._batches){for(let n=0;n<t.length;++n)"GetBatches"in t[n]&&t[n].GetBatches(e,r)}Render(e){this.ApplyPerFrameData();const t=n.device,r=i.global,s=void 0,a=this.visible;if(a.environment&&this.backgroundEffect&&(t.SetStandardStates(t.RM_FULLSCREEN),t.RenderCameraSpaceQuad(this.backgroundEffect)),a.planets&&this.planets.length){const i=n.mat4.copy(r.mat4_0,t.projection),a=n.mat4.copy(r.mat4_1,t.projection),o=1e4,u=1e11;a[10]=u/(o-u),a[14]=u*o/(o-u),t.SetProjection(a,!0),this.ApplyPerFrameData();for(let t=0;t<this.planets.length;++t)this.planets[t].UpdateViewDependentData&&this.planets[t].UpdateViewDependentData(s,e);this._batches.Clear(),t.gl.depthRange(.9,1),this.RenderBatches(t.RM_OPAQUE,this.planets),this.RenderBatches(t.RM_DECAL,this.planets),this.RenderBatches(t.RM_TRANSPARENT,this.planets),this.RenderBatches(t.RM_ADDITIVE,this.planets),this._batches.Render(),t.SetProjection(i,!0),this.ApplyPerFrameData(),t.gl.depthRange(0,.9)}if(this._lodEnabled&&(this._frustum.Initialize(t.view,t.projection,t.viewportWidth,t.viewInverse,t.viewProjection),this.PerChildObject("UpdateLod",this._frustum)),a.objects)for(let t=0;t<this.objects.length;++t)this.objects[t].UpdateViewDependentData&&this.objects[t].UpdateViewDependentData(s,e);if(a.backgroundObjects)for(let t=0;t<this.backgroundObjects.length;t++)this.backgroundObjects[t].UpdateViewDependentData&&this.backgroundObjects[t].UpdateViewDependentData(s,e);if(a.lineSets)for(let t=0;t<this.lineSets.length;t++)this.lineSets[t].UpdateViewDependentData(s,e);if(a.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].PrepareRender();if(this._batches.Clear(),a.planets)for(let e=0;e<this.planets.length;++e)this.planets[e].GetZOnlyBatches(t.RM_OPAQUE,this._batches);if(a.objects&&(this.RenderBatches(t.RM_OPAQUE,this.objects),this.RenderBatches(t.RM_DECAL,this.objects),this.RenderBatches(t.RM_TRANSPARENT,this.objects),this.RenderBatches(t.RM_ADDITIVE,this.objects)),a.backgroundObjects&&(this.RenderBatches(t.RM_OPAQUE,this.backgroundObjects),this.RenderBatches(t.RM_DECAL,this.backgroundObjects),this.RenderBatches(t.RM_TRANSPARENT,this.backgroundObjects),this.RenderBatches(t.RM_ADDITIVE,this.backgroundObjects)),a.lineSets&&(this.RenderBatches(t.RM_TRANSPARENT,this.lineSets),this.RenderBatches(t.RM_ADDITIVE,this.lineSets)),a.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].GetBatches(t.RM_ADDITIVE,this._batches);if(this.starfield,this.postProcess,this._batches.Render(),a.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].UpdateOccluders();a.debug&&i.DebugRenderer&&(this._debugHelper||(this._debugHelper=new i.DebugRenderer),this.PerChildObject("RenderDebugInfo",this._debugHelper),this._debugHelper.Render())}ApplyPerFrameData(){const e=n.device,t=i.global,r=t.mat4_2,s=t.vec3_0,a=this.visible;n.mat4.fromQuat(r,this.envMapRotation),n.mat4.scale(r,r,this.envMapScaling),n.mat4.transpose(r,r),n.vec3.negate(s,this.sunDirection),n.vec3.normalize(s,s);let o=this.fogEnd-this.fogStart;Math.abs(o)<1e-5&&(o=1e-5);const u=1/o,c=this._perFrameVS;c.Set("FogFactors",[this.fogEnd*u,u,this.visible.fog?this.fogMax:0,1]),c.Set("ViewportAdjustment",[1,1,1,1]),c.Set("MiscSettings",[e.currentTime,0,e.viewportWidth,e.viewportHeight]),c.Set("SunData.DirWorld",s),c.Set("SunData.DiffuseColor",this.sunDiffuseColor),c.Set("TargetResolution",e.targetResolution),c.Set("ViewInverseTransposeMat",e.viewInverse),c.Set("ViewProjectionMat",e.viewProjectionTranspose),c.Set("ViewMat",e.viewTranspose),c.Set("ProjectionMat",e.projectionTranspose),c.Set("EnvMapRotationMat",r),e.perFrameVSData=c;const l=this._perFramePS;l.Set("ViewInverseTransposeMat",e.viewInverse),l.Set("ViewMat",e.viewTranspose),l.Set("EnvMapRotationMat",r),l.Set("SunData.DirWorld",s),l.Set("SunData.DiffuseColor",this.sunDiffuseColor),l.Set("SceneData.AmbientColor",this.ambientColor),l.Set("MiscSettings",[e.currentTime,this.fogType,this.fogBlur,1]),l.Set("SceneData.FogColor",this.fogColor),l.Set("FovXY",[e.targetResolution[3],e.targetResolution[2]]),l.Set("ShadowMapSettings",[1,1,0,0]),l.Set("TargetResolution",e.targetResolution),l.SetIndex("SceneData.NebulaIntensity",0,this.nebulaIntensity),l.SetIndex("ViewportSize",0,e.viewportWidth),l.SetIndex("ViewportSize",1,e.viewportHeight),l.SetIndex("ShadowCameraRange",0,1),l.SetIndex("ProjectionToView",0,-e.projection[14]),l.SetIndex("ProjectionToView",1,-e.projection[10]-1),e.perFramePSData=l;const h=this._envMapRes&&a.environmentReflection?this._envMapRes:this.GetEmptyTexture(),d=this._envMap1Res&&a.environmentDiffuse?this._envMap1Res:this.GetEmptyTexture(),f=this._envMap2Res&&a.environmentBlur?this._envMap2Res:this.GetEmptyTexture();n.tw2.GetVariable("EveSpaceSceneEnvMap").SetTextureRes(h),n.tw2.GetVariable("EnvMap1").SetTextureRes(d),n.tw2.GetVariable("EnvMap2").SetTextureRes(f)}static init(){i.global||(i.global={vec3_0:n.vec3.create(),vec4_0:n.vec4.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create(),mat4_2:n.mat4.create()})}static black(e){return[["ambientColor",e.color],["backgroundEffect",e.object],["backgroundObjects",e.array],["backgroundRenderingEnabled",e.boolean],["curveSets",e.array],["enableShadows",e.boolean],["envMapResPath",e.path],["envMap1ResPath",e.path],["envMap2ResPath",e.path],["envMapRotation",e.vector4],["externalParameters",e.array],["fogColor",e.color],["fogStart",e.float],["fogEnd",e.float],["fogMax",e.float],["nebulaIntensity",e.float],["objects",e.array],["postProcessPath",e.path],["selfShadowOnly",e.boolean],["starfield",e.object],["shadowFadeThreshold",e.float],["shadowThreshold",e.float],["shLightingManager",e.object],["sunDiffuseColor",e.color],["sunDiffuseColorWithDynamicLights",e.vector4],["sunDirection",e.vector3],["useSunDiffuseColorWithDynamicLights",e.boolean]]}}i.perFrameData={ps:[["ViewInverseTransposeMat",16],["ViewMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["SceneData.AmbientColor",3],["SceneData.NebulaIntensity",1],["SceneData.FogColor",4],["ViewportOffset",2],["ViewportSize",2],["TargetResolution",4],["ShadowMapSettings",4],["ShadowCameraRange",4],["ProjectionToView",2],["FovXY",2],["MiscSettings",4]],vs:[["ViewInverseTransposeMat",16],["ViewProjectionMat",16],["ViewMat",16],["ProjectionMat",16],["ShadowViewMat",16],["ShadowViewProjectionMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["FogFactors",4],["TargetResolution",4],["ViewportAdjustment",4],["MiscSettings",4]]},i.global=null,i.DebugRenderer=window.Tw2DebugRenderer||null,i.__isStaging=2,i.__isScene=!0},"./eve/animation/EveAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimation",function(){return n});class n{constructor(){this.name="",this.loops=0}static black(e){return[["name",e.string],["loops",e.uint]]}}},"./eve/animation/EveAnimationCommand.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCommand",function(){return n});class n{constructor(){this.command=-1}static black(e){return[["command",e.uint]]}}},"./eve/animation/EveAnimationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCurve",function(){return n});class n{constructor(){this.name=""}static black(e){return[["name",e.string]]}}},"./eve/animation/EveAnimationState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationState",function(){return s});var n=r("./eve/animation/EveAnimationStateTransition.js");class s{constructor(){this.name="",this.animation=null,this.curves=[],this.commands=[],this.initCommands=[],this.transitions=[]}static black(e){return[["name",e.string],["animation",e.object],["curves",e.array],["commands",e.array],["initCommands",e.array],["transitions",e.structList(n.EveAnimationStateTransition)]]}}},"./eve/animation/EveAnimationStateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateMachine",function(){return n});class n{constructor(){this.name="",this.autoPlayDefault=!0,this.states=[],this.transitions=[],this.trackMask="",this.defaultAnimation=""}static black(e){return[["name",e.string],["autoPlayDefault",e.boolean],["states",e.array],["transitions",e.array],["trackMask",e.string],["defaultAnimation",e.string]]}}},"./eve/animation/EveAnimationStateTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationStateTransition",function(){return n});class n{constructor(){this.state="",this.transition=""}static blackStruct(e){const t=new n;return t.state=e.ReadStringU16(),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),t.transition=e.ReadStringU16(),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),t}}},"./eve/animation/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/animation/EveAnimation.js");r.d(t,"EveAnimation",function(){return n.EveAnimation});var s=r("./eve/animation/EveAnimationCommand.js");r.d(t,"EveAnimationCommand",function(){return s.EveAnimationCommand});var i=r("./eve/animation/EveAnimationCurve.js");r.d(t,"EveAnimationCurve",function(){return i.EveAnimationCurve});var a=r("./eve/animation/EveAnimationState.js");r.d(t,"EveAnimationState",function(){return a.EveAnimationState});var o=r("./eve/animation/EveAnimationStateMachine.js");r.d(t,"EveAnimationStateMachine",function(){return o.EveAnimationStateMachine})},"./eve/child/EveChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChild",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{Update(e,t){throw new s.ErrAbstractClassMethod}GetResources(e=[]){throw new s.ErrAbstractClassMethod}GetBatches(e,t,r){throw new s.ErrAbstractClassMethod}}i.global={mat4_0:n.mat4.create(),vec3_0:n.vec3.create()},i.perObjectData={ffe:[["world",16],["worldInverseTranspose",16]]},i.__isEffectChild=!0},"./eve/child/EveChildBulletStorm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBulletStorm",function(){return s});var n=r("./eve/child/EveChild.js");class s extends n.EveChild{constructor(...e){super(...e),this.effect=null,this.multiplier=0,this.range=0,this.sourceLocatorSet="",this.speed=0}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}static black(e){return[["effect",e.object],["multiplier",e.uint],["range",e.float],["speed",e.float],["sourceLocatorSet",e.string]]}}s.__isStaging=4},"./eve/child/EveChildCloud.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildCloud",function(){return i});var n=r("./global/index.js"),s=r("./eve/child/EveChild.js");class i extends s.EveChild{constructor(...e){super(...e),this.name="",this.cellScreenSize=0,this.effect=null,this.preTesselationLevel=0,this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.sortingModifier=0,this.translation=n.vec3.create()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}static black(e){return[["cellScreenSize",e.float],["sortingModifier",e.float],["effect",e.object],["name",e.string],["preTesselationLevel",e.uint],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}i.__isStaging=4},"./eve/child/EveChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildContainer",function(){return i});var n=r("./eve/child/EveChild.js"),s=r("./global/index.js");class i extends n.EveChild{constructor(...e){super(...e),this.name="",this.controllers=[],this.curveSets=[],this.display=!0,this.hideOnLowQuality=!1,this.inheritProperties=null,this.lights=[],this.localTransform=s.mat4.create(),this.objects=[],this.observers=[],this.rotation=s.quat.create(),this.scaling=s.vec3.fromValues(1,1,1),this.staticTransform=!1,this.transformModifiers=[],this.translation=s.vec3.create(),this.useSRT=!0,this._worldTransform=s.mat4.create(),this._worldTransformLast=s.mat4.create()}GetResources(e=[]){for(let t=0;t<this.objects.length;t++)this.objects[t].GetResources(e);return e}Update(e,t){this.useSRT&&s.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),s.mat4.copy(this._worldTransformLast,this._worldTransform),s.mat4.multiply(this._worldTransform,t,this.localTransform);for(let t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);for(let t=0;t<this.objects.length;t++)this.objects[t].Update(e,this._worldTransform)}GetBatches(e,t,r){if(this.display)for(let n=0;n<this.objects.length;n++)this.objects[n].GetBatches(e,t,r)}static black(e){return[["boneIndex",e.uint],["controllers",e.array],["display",e.boolean],["localTransform",e.matrix],["name",e.string],["curveSets",e.array],["hideOnLowQuality",e.boolean],["inheritProperties",e.object],["lights",e.array],["observers",e.array],["objects",e.array],["rotation",e.vector4],["scaling",e.vector3],["staticTransform",e.boolean],["transformModifiers",e.array],["translation",e.vector3]]}}i.__isStaging=2},"./eve/child/EveChildExplosion.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildExplosion",function(){return i});var n=r("./global/index.js"),s=r("./eve/child/EveChild.js");class i extends s.EveChild{constructor(...e){super(...e),this.name="",this.globalDuration=0,this.globalExplosion=null,this.globalExplosionDelay=0,this.globalScaling=n.vec3.fromValues(1,1,1),this.localDuration=0,this.localExplosion=null,this.localExplosionInterval=0,this.localExplosionIntervalFactor=0,this.localExplosionShared=null,this.localExplosions=[],this.localTransform=n.mat4.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1)}GetResources(e=[]){this.localExplosion&&this.localExplosion.GetResources(e),this.localExplosionShared&&this.localExplosionShared.GetResources(e);for(let t=0;t<this.localExplosions.length;t++)this.localExplosions[t].GetResources(e);return e}static black(e){return[["globalDuration",e.float],["globalExplosion",e.object],["globalExplosionDelay",e.float],["globalExplosions",e.array],["globalScaling",e.vector3],["localDuration",e.float],["localExplosion",e.object],["localExplosions",e.array],["localExplosionInterval",e.float],["localExplosionIntervalFactor",e.float],["localExplosionShared",e.object],["localTransform",e.matrix],["name",e.string],["rotation",e.vector4],["scaling",e.vector3]]}}i.__isStaging=4},"./eve/child/EveChildInheritProperties.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInheritProperties",function(){return n});class n{static black(e){return[]}}n.__isStaging=4},"./eve/child/EveChildLink.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLink",function(){return i});var n=r("./global/index.js"),s=r("./eve/child/EveChild.js");class i extends s.EveChild{constructor(...e){super(...e),this.name="",this.linkStrengthBindings=[],this.linkStrengthCurves=[],this.mesh=null,this.rotation=n.quat.create()}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),e}static black(e){return[["linkStrengthBindings",e.array],["linkStrengthCurves",e.array],["mesh",e.object],["name",e.string],["rotation",e.vector4]]}}i.__isStaging=4},"./eve/child/EveChildMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildMesh",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/child/EveChild.js");class a extends i.EveChild{constructor(...e){super(...e),this.name="",this.display=!0,this.localTransform=n.mat4.create(),this.lowestLodVisible=2,this.mesh=null,this.minScreenSize=0,this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.sortValueOffset=0,this.staticTransform=!1,this.transformModifiers=[],this.translation=n.vec3.create(),this.useSRT=!0,this.useSpaceObjectData=!0,this._worldTransform=n.mat4.create(),this._worldTransformLast=n.mat4.create(),this._perObjectData=null}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform)}GetBatches(e,t,r){this.display&&this.mesh&&(this.useSpaceObjectData?(this._perObjectData||(this._perObjectData=new s.Tw2PerObjectData,this._perObjectData.vs=new s.Tw2RawData,this._perObjectData.vs.data=new Float32Array(r.vs.data.length),this._perObjectData.vs.data[33]=1,this._perObjectData.vs.data[35]=1,this._perObjectData.ps=new s.Tw2RawData,this._perObjectData.ps.data=new Float32Array(r.ps.data.length),this._perObjectData.ps.data[1]=1,this._perObjectData.ps.data[3]=1),this._perObjectData.vs.data.set(r.vs.data),this._perObjectData.ps.data.set(r.ps.data),n.mat4.transpose(this._perObjectData.vs.data,this._worldTransform),n.mat4.transpose(this._perObjectData.vs.data.subarray(16),this._worldTransformLast)):(this._perObjectData||(this._perObjectData=s.Tw2PerObjectData.from(i.EveChild.perObjectData)),n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform)),this.mesh.GetBatches(e,t,this._perObjectData))}static black(e){return[["display",e.boolean],["localTransform",e.matrix],["lowestLodVisible",e.uint],["mesh",e.object],["minScreenSize",e.float],["name",e.string],["rotation",e.vector4],["scaling",e.vector3],["sortValueOffset",e.float],["staticTransform",e.boolean],["transformModifiers",e.array],["translation",e.vector3],["useSpaceObjectData",e.boolean],["useSRT",e.boolean]]}}a.__isStaging=1},"./eve/child/EveChildParticleSphere.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSphere",function(){return s});var n=r("./eve/child/EveChild.js");class s extends n.EveChild{constructor(...e){super(...e),this.name="",this.generators=[],this.maxSpeed=0,this.mesh=null,this.movementScale=0,this.particleSystem=null,this.positionShiftDecreaseSpeed=0,this.positionShiftIncreaseSpeed=0,this.positionShiftMax=0,this.positionShiftMin=0,this.radius=0,this.useSpaceObjectData=!1}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),this.particleSystem&&this.particleSystem.GetResources&&this.particleSystem.GetResources(e),e}static black(e){return[["generators",e.array],["maxSpeed",e.float],["mesh",e.object],["movementScale",e.float],["name",e.string],["particleSystem",e.object],["positionShiftDecreaseSpeed",e.float],["positionShiftIncreaseSpeed",e.float],["positionShiftMax",e.float],["positionShiftMin",e.float],["radius",e.float],["useSpaceObjectData",e.boolean]]}}s.__isStaging=4},"./eve/child/EveChildParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSystem",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/child/EveChild.js");class a extends i.EveChild{constructor(...e){super(...e),this.name="",this.display=!0,this.localTransform=n.mat4.create(),this.lodSphereRadius=0,this.mesh=null,this.minScreenSize=0,this.particleEmitters=[],this.particleSystems=[],this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.translation=n.vec3.create(),this.useDynamicLod=!1,this.useSRT=!0,this._worldTransform=n.mat4.create(),this._worldTransformLast=n.mat4.create(),this._perObjectData=s.Tw2PerObjectData.from(i.EveChild.perObjectData)}GetResources(e=[]){this.mesh&&this.mesh.GetResources(e);for(let t=0;t<this.particleEmitters.length;t++)this.particleEmitters[t].GetResources(e);for(let t=0;t<this.particleSystems.length;t++)this.particleSystems[t].GetResources(e);return e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform);for(let t=0;t<this.particleEmitters.length;++t)this.particleEmitters[t].Update(e);for(let t=0;t<this.particleSystems.length;++t)this.particleSystems[t].Update(e)}GetBatches(e,t){this.display&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}static black(e){return[["display",e.boolean],["localTransform",e.matrix],["lodSphereRadius",e.float],["mesh",e.object],["minScreenSize",e.float],["name",e.string],["particleEmitters",e.array],["particleSystems",e.array],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3],["useDynamicLod",e.boolean]]}}a.__isStaging=1},"./eve/child/EveChildQuad.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildQuad",function(){return i});var n=r("./global/index.js"),s=r("./eve/child/EveChild.js");class i extends s.EveChild{constructor(...e){super(...e),this.name="",this.brightness=0,this.color=n.vec4.create(),this.effect=null,this.localTransform=n.mat4.create(),this.minScreenSize=0,this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.translation=n.vec3.create()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}static black(e){return[["brightness",e.float],["color",e.color],["effect",e.object],["localTransform",e.matrix],["minScreenSize",e.float],["name",e.string],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}i.__isStaging=4},"./eve/child/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/EveChildBulletStorm.js");r.d(t,"EveChildBulletStorm",function(){return n.EveChildBulletStorm});var s=r("./eve/child/EveChildCloud.js");r.d(t,"EveChildCloud",function(){return s.EveChildCloud});var i=r("./eve/child/EveChildContainer.js");r.d(t,"EveChildContainer",function(){return i.EveChildContainer});var a=r("./eve/child/EveChildExplosion.js");r.d(t,"EveChildExplosion",function(){return a.EveChildExplosion});var o=r("./eve/child/EveChildInheritProperties.js");r.d(t,"EveChildInheritProperties",function(){return o.EveChildInheritProperties});var u=r("./eve/child/EveChildLink.js");r.d(t,"EveChildLink",function(){return u.EveChildLink});var c=r("./eve/child/EveChildMesh.js");r.d(t,"EveChildMesh",function(){return c.EveChildMesh});var l=r("./eve/child/EveChildParticleSphere.js");r.d(t,"EveChildParticleSphere",function(){return l.EveChildParticleSphere});var h=r("./eve/child/EveChildParticleSystem.js");r.d(t,"EveChildParticleSystem",function(){return h.EveChildParticleSystem});var d=r("./eve/child/EveChildQuad.js");r.d(t,"EveChildQuad",function(){return d.EveChildQuad});var f=r("./eve/child/legacy/index.js");r.d(t,"EveChildBillboard",function(){return f.EveChildBillboard});var m=r("./eve/child/modifier/index.js");r.d(t,"EveChildModifierAttachToBone",function(){return m.EveChildModifierAttachToBone}),r.d(t,"EveChildModifierBillboard2D",function(){return m.EveChildModifierBillboard2D}),r.d(t,"EveChildModifierBillboard3D",function(){return m.EveChildModifierBillboard3D}),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return m.EveChildModifierCameraOrientedRotationConstrained}),r.d(t,"EveChildModifierSRT",function(){return m.EveChildModifierSRT}),r.d(t,"EveChildModifierTranslateWithCamera",function(){return m.EveChildModifierTranslateWithCamera})},"./eve/child/legacy/EveChildBillboard.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBillboard",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/child/EveChild.js");const{device:a}=n.tw2;class o extends i.EveChild{constructor(...e){super(...e),this.display=!0,this.localTransform=n.mat4.create(),this.lowestLodVisible=2,this.mesh=null,this.rotation=n.quat.create(),this.translation=n.vec3.create(),this.scaling=n.vec3.fromValues(1,1,1),this.staticTransform=!1,this.useSRT=!0,this._perObjectData=s.Tw2PerObjectData.from(i.EveChild.perObjectData),this._worldTransform=n.mat4.create(),this._worldTransformLast=n.mat4.create()}GetResources(e){return this.mesh&&this.mesh.GetResources(e),e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform);const r=i.EveChild.global.mat4_0,s=i.EveChild.global.vec3_0;n.mat4.lookAt(r,a.eyePosition,this._worldTransform.subarray(12),[0,1,0]),n.mat4.transpose(r,r),n.mat4.getScaling(s,t),n.vec3.multiply(s,s,this.scaling),this._worldTransform[0]=r[0]*s[0],this._worldTransform[1]=r[1]*s[0],this._worldTransform[2]=r[2]*s[0],this._worldTransform[4]=r[4]*s[1],this._worldTransform[5]=r[5]*s[1],this._worldTransform[6]=r[6]*s[1],this._worldTransform[8]=r[8]*s[2],this._worldTransform[9]=r[9]*s[2],this._worldTransform[10]=r[10]*s[2]}GetBatches(e,t){this.display&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}}},"./eve/child/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/legacy/EveChildBillboard.js");r.d(t,"EveChildBillboard",function(){return n.EveChildBillboard})},"./eve/child/modifier/EveChildModifierAttachToBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierAttachToBone",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.boneIndex=-1}static black(e){return[["boneIndex",e.uint]]}}s.__isStaging=4},"./eve/child/modifier/EveChildModifierBillboard2D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard2D",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{}s.black=function(e){return[]},s.__isStaging=4},"./eve/child/modifier/EveChildModifierBillboard3D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard3D",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{}s.black=function(e){return[]},s.__isStaging=4},"./eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{}s.black=function(e){return[]},s.__isStaging=4},"./eve/child/modifier/EveChildModifierSRT.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierSRT",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.translation=n.vec3.create()}static black(e){return[["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}s.__isStaging=2},"./eve/child/modifier/EveChildModifierTranslateWithCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierTranslateWithCamera",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{}s.black=function(e){return[]},s.__isStaging=4},"./eve/child/modifier/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/modifier/EveChildModifierAttachToBone.js");r.d(t,"EveChildModifierAttachToBone",function(){return n.EveChildModifierAttachToBone});var s=r("./eve/child/modifier/EveChildModifierBillboard2D.js");r.d(t,"EveChildModifierBillboard2D",function(){return s.EveChildModifierBillboard2D});var i=r("./eve/child/modifier/EveChildModifierBillboard3D.js");r.d(t,"EveChildModifierBillboard3D",function(){return i.EveChildModifierBillboard3D});var a=r("./eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js");r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return a.EveChildModifierCameraOrientedRotationConstrained});var o=r("./eve/child/modifier/EveChildModifierSRT.js");r.d(t,"EveChildModifierSRT",function(){return o.EveChildModifierSRT});var u=r("./eve/child/modifier/EveChildModifierTranslateWithCamera.js");r.d(t,"EveChildModifierTranslateWithCamera",function(){return u.EveChildModifierTranslateWithCamera})},"./eve/effect/EveLensflare.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLensflare",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/effect/EveOccluder.js");class a extends n.Tw2BaseClass{constructor(){super(),this.name="",this.backgroundOccluders=[],this.bindings=[],this.distanceToCenterCurves=[],this.distanceToEdgeCurves=[],this.mesh=null,this.occluders=[],this.position=n.vec3.create(),this.radialAngleCurves=[],this.xDistanceToCenter=[],this.yDistanceToCenter=[],this.zDistanceToCenter=[],this.display=!0,this.update=!0,this.doOcclusionQueries=!0,this.cameraFactor=20,this.flares=[],this.occlusionIntensity=1,this.backgroundOcclusionIntensity=1,this.curveSets=[],this._direction=n.vec3.create(),this._transform=n.mat4.create(),this._backBuffer=null,a.init()}UpdateOccluders(){if(!this.doOcclusionQueries)return;const e=n.device,t=e.gl,r=a.global;if(!r.occluderLevels[0].texture||r.occluderLevels[0].width<2*this.occluders.length)for(let e=0;e<r.occluderLevels.length;++e)r.occluderLevels[e].Create(2*this.occluders.length,1,!1);for(let e=0;e<this.flares.length;++e)"_backBuffer"in this.flares[e]&&(this.flares[e]._backBuffer.textureRes=r.occluderLevels.texture);this.occlusionIntensity=1,this.backgroundOcclusionIntensity=1,r.occluderLevels[r.occludedLevelIndex].Set(),e.SetStandardStates(e.RM_OPAQUE),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),r.occluderLevels[r.occludedLevelIndex].Unset();let s=1;e.antialiasing&&(s=e.msaaSamples,t.sampleCoverage(1/s,!1));for(let a=0;a<this.occluders.length;++a)e.SetRenderState(n.RS_COLORWRITEENABLE,8),t.colorMask(!1,!1,!1,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.antialiasing&&(t.enable(t.SAMPLE_COVERAGE),t.sampleCoverage(.25,!1)),this.occluders[a].UpdateValue(this._transform,a),e.antialiasing&&t.disable(t.SAMPLE_COVERAGE),r.backBuffer.texture||r.backBuffer.Attach(t.createTexture()),t.bindTexture(t.TEXTURE_2D,r.backBuffer.texture),r.backBuffer.width===e.viewportWidth&&r.backBuffer.height===e.viewportHeight||(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.viewportWidth,e.viewportHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),r.backBuffer.width=e.viewportWidth,r.backBuffer.height=e.viewportHeight),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r.backBuffer.width,r.backBuffer.height,0),t.bindTexture(t.TEXTURE_2D,null),r.occluderLevels[r.occludedLevelIndex].Set(),i.EveOccluder.CollectSamples(r.backBuffer,a,r.occluderLevels[0].width/2,s),r.occluderLevels[r.occludedLevelIndex].Unset();e.antialiasing&&t.sampleCoverage(1,!1),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Set();const o=new Uint8Array(4*r.occluderLevels[0].width);t.readPixels(0,0,2,1,t.RGBA,t.UNSIGNED_BYTE,o),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Unset(),this.occlusionIntensity=1;for(let e=0;e<2*r.occluderLevels[0].width;e+=4)this.occlusionIntensity*=o[e+1]?o[e]/o[e+1]:1;this.backgroundOcclusionIntensity=this.occlusionIntensity,n.tw2.SetVariableValue("LensflareFxOccScale",[this.occlusionIntensity,this.occlusionIntensity,0,0]),r.occludedLevelIndex=(r.occludedLevelIndex+1)%r.occluderLevels.length}GetBatches(e,t,r){if(this.display){const s=n.vec4.set(a.global.vec4_0,0,0,1,0);if(n.vec4.transformMat4(s,s,n.device.viewInverse),n.vec3.dot(s,this._direction)<0)return;for(let n=0;n<this.flares.length;++n)this.flares[n].GetBatches(e,t,r);this.mesh&&this.mesh.GetBatches(e,t,r)}}PrepareRender(){if(!this.display)return;const e=a.global,t=e.vec4_0,r=e.vec3_0,s=n.mat4.identity(e.mat4_0),i=e.vec3_2,o=e.vec3_3,u=e.vec3_1,c=e.vec4_1;n.vec3.transformMat4(r,[0,0,0],n.device.viewInverse),0===n.vec3.length(this.position)?n.vec3.negate(u,r):(n.vec3.negate(u,this.position),n.vec3.normalize(this._direction,u)),n.vec4.transformMat4(t,[0,0,1,0],n.device.viewInverse),n.vec3.scaleAndAdd(i,r,t,-this.cameraFactor),n.vec3.negate(o,this._direction),n.mat4.arcFromForward(this._transform,o),n.mat4.setTranslation(this._transform,i),n.mat4.scale(s,s,[this.occlusionIntensity,this.occlusionIntensity,1]);const l=this._direction;n.tw2.SetVariableValue("LensflareFxDirectionScale",[l[0],l[1],l[2],1]),n.vec4.set(c,l[0],l[1],l[2],0),n.vec4.transformMat4(c,c,n.device.view),n.vec4.transformMat4(c,c,n.device.projection),c[0]/=c[3],c[1]/=c[3];const h=1-Math.min(1-Math.abs(c[0]),1-Math.abs(c[1])),d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=Math.atan2(c[1],c[0])+Math.PI;for(let e=0;e<this.distanceToEdgeCurves.length;++e)this.distanceToEdgeCurves[e].UpdateValue(h);for(let e=0;e<this.distanceToCenterCurves.length;++e)this.distanceToCenterCurves[e].UpdateValue(d);for(let e=0;e<this.radialAngleCurves.length;++e)this.radialAngleCurves[e].UpdateValue(f);for(let e=0;e<this.xDistanceToCenter.length;++e)this.xDistanceToCenter[e].UpdateValue(c[0]+10);for(let e=0;e<this.yDistanceToCenter.length;++e)this.yDistanceToCenter[e].UpdateValue(c[1]+10);for(let e=0;e<this.bindings.length;++e)this.bindings[e].CopyValue();for(let e=0;e<this.flares.length;++e)this.flares[e].UpdateViewDependentData(this._transform)}static init(){if(!a.global){const e=a.global={};e.vec3_0=n.vec3.create(),e.vec3_1=n.vec3.create(),e.vec3_2=n.vec3.create(),e.vec3_3=n.vec3.create(),e.vec4_0=n.vec4.create(),e.vec4_1=n.vec4.create(),e.mat4_0=n.mat4.create(),e.backBuffer=new s.Tw2TextureRes,e.backBuffer.width=0,e.backBuffer.height=0,e.backBuffer.hasMipMaps=!1,e.occludedLevelIndex=0,e.occluderLevels=[new s.Tw2RenderTarget,new s.Tw2RenderTarget,new s.Tw2RenderTarget,new s.Tw2RenderTarget]}}static black(e){return[["backgroundOccluders",e.array],["bindings",e.array],["distanceToCenterCurves",e.array],["distanceToEdgeCurves",e.array],["mesh",e.object],["name",e.string],["occluders",e.array],["position",e.vector3],["radialAngleCurves",e.array],["xDistanceToCenter",e.array],["yDistanceToCenter",e.array],["zDistanceToCenter",e.array]]}}a.global=null,a.__isStaging=1,a.__isLensflare=!0},"./eve/effect/EveMeshOverlayEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMeshOverlayEffect",function(){return o});var n=r("./core/index.js"),s=r("./curve/index.js"),i=r("./global/index.js"),a=r("./global/util/index.js");class o extends i.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.additiveEffects=[],this.curveSet=null,this.distortionEffects=[],this.opaqueEffects=[],this.transparentEffects=[],this.decalEffects=[],this.display=!0,this.update=!0,this.visible={opaqueEffects:!0,decalEffects:!0,transparentEffects:!0,additiveEffects:!0,distortionEffects:!0}}static createAreaEffects(e,t,r){r=Object(a.toArray)(r);for(let s=0;s<r.length;s++){const i=r[s];if(i in t&&i in e)for(let r=0;r<t[i].length;r++)e[i].push(n.Tw2Effect.from(t[i][r]))}}static from(e,t){const r=new o;if(e){Object(a.assignIfExists)(r,e,["name","display","update"]),e.curveSet&&(r.curveSet=s.Tw2CurveSet.from(e.curveSet));const t=["additiveEffects","distortionEffects","opaqueEffects","transparentEffects","decalEffects"];e.visible&&Object(a.assignIfExists)(r.visible,e.visible,t),this.createAreaEffects(r,e,t)}return!t||t.skipUpdate,r}Update(e){this.update&&this.curveSet&&this.curveSet.Update(e)}GetBatches(e,t,r,s){if(!this.display||!s||!s.IsGood())return;const i=this.GetEffects(e);for(let a=0;a<i.length;a++){const o=new n.Tw2GeometryBatch;o.renderMode=e,o.perObjectData=r,o.geometryRes=s.geometryResource,o.meshIx=s.meshIndex,o.start=0,o.count=s.geometryResource.meshes[s.meshIndex].areas.length,o.effect=i[a],t.Commit(o)}}GetEffects(e){if(this.display)switch(e){case i.RM_OPAQUE:if(this.visible.opaqueEffects)return this.opaqueEffects;break;case i.RM_TRANSPARENT:if(this.visible.transparentEffects)return this.transparentEffects;break;case i.RM_ADDITIVE:if(this.visible.additiveEffects)return this.additiveEffects;break;case i.RM_DECAL:if(this.visible.decalEffects)return this.decalEffects;break;case i.RM_DISTORTION:if(this.visible.distortionEffects)return this.distortionEffects}return[]}static black(e){return[["additiveEffects",e.array],["curveSet",e.object],["distortionEffects",e.array],["name",e.string],["opaqueEffects",e.array],["transparentEffects",e.array]]}}o.__isStaging=1},"./eve/effect/EveOccluder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveOccluder",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(){super(),this.name="",this.sprites=[],i.init()}UpdateValue(e,t){if(!n.device.alphaBlendBackBuffer)return;const r=n.device,s=i.global,a=s.mat4_0,o=s.vec4_0;s.accumulator.Clear();for(let t=0;t<this.sprites.length;++t)this.sprites[t].UpdateViewDependentData(e),this.sprites[t].GetBatches(r.RM_DECAL,s.accumulator);n.tw2.SetVariableValue("OccluderValue",[(1<<2*t)/255,(2<<2*t)/255,0,0]),s.accumulator.Render(),n.mat4.multiply(a,r.viewProjection,this.sprites[0].worldTransform),n.vec4.transformMat4(o,[0,0,0,1],a);const u=.5*(o[0]/o[3]+1),c=.5*(o[1]/o[3]+1);n.vec4.set(o,.5,.5,0,1),n.vec4.transformMat4(o,o,a);const l=.5*(o[0]/o[3]+1),h=.5*(o[1]/o[3]+1);o[0]=u,o[1]=c,o[2]=l-u,o[3]=h-c,s.effect.parameters.OccluderPosition.SetValue(o)}static CollectSamples(e,t,r,s){const i=n.device,a=this.global,o=a.effect,u=a.vertexBuffer,c=a.decl;if(!o.effectRes||!o.effectRes.IsGood())return!1;o.parameters.BackBuffer.SetTextureRes(e),o.parameters.OccluderIndex.SetValue([t,r,s]),i.SetStandardStates(i.RM_ADDITIVE),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,u);for(let e=0;e<o.GetPassCount("Main");++e){if(o.ApplyPass("Main",e),c.SetDeclaration(i,o.GetPassInput("Main",e),16))return!1;i.ApplyShadowState(),i.gl.drawArrays(i.gl.TRIANGLES,0,1530)}return!0}static init(){if(i.global)return;const e=n.device,t=i.global={};t.mat4_0=n.mat4.create(),t.vec4_0=n.vec4.create(),t.accumulator=new s.Tw2BatchAccumulator,t.effect=s.Tw2Effect.from({name:"Occluder sampler",effectFilePath:"res:/graphics/effect/managed/space/specialfx/lensflares/collectsamples.fx",parameters:{OccluderPosition:[1,1,1,1],OccluderIndex:[1,1,1],BackBuffer:""}}),t.vertexBuffer=null,t.decl=s.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:0,elements:2}]),t.decl.RebuildHash();const r=new Float32Array(6120);let a=0;for(let e=0;e<16;++e)for(let t=0;t<16;++t){const n=(e+Math.random())/16*2-1,s=(t+Math.random())/16*2-1;r[a++]=1,r[a++]=1,r[a++]=n,r[a++]=s,r[a++]=-1,r[a++]=1,r[a++]=n,r[a++]=s,r[a++]=1,r[a++]=-1,r[a++]=n,r[a++]=s,r[a++]=-1,r[a++]=1,r[a++]=n,r[a++]=s,r[a++]=1,r[a++]=-1,r[a++]=n,r[a++]=s,r[a++]=-1,r[a++]=-1,r[a++]=n,r[a++]=s}t.vertexBuffer=e.gl.createBuffer(),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,t.vertexBuffer),e.gl.bufferData(e.gl.ARRAY_BUFFER,r,e.gl.STATIC_DRAW),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,null)}static black(e){return[["name",e.string],["sprites",e.array]]}}i.global=null},"./eve/effect/EveStarfield.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStarfield",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.effect=null,this.maxDist=0,this.maxFlashRate=0,this.minDist=0,this.minFlashIntensity=0,this.minFlashRate=0,this.numStars=0,this.seed=0}static black(e){return[["effect",e.object],["maxDist",e.float],["maxFlashRate",e.float],["minDist",e.float],["minFlashIntensity",e.float],["minFlashRate",e.float],["numStars",e.uint],["seed",e.uint]]}}s.__isStaging=4},"./eve/effect/EveStretch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(){super(),this.name="",this.curveSets=[],this.dest=null,this.destObject=null,this.length=new s.Tw2Float,this.moveCompletion=null,this.moveObject=null,this.progressCurve=null,this.source=null,this.sourceLights=[],this.sourceObject=null,this.stretchObject=null,this.useCurveLod=!1,this.display=!0,this.update=!0,this._destinationPosition=n.vec3.create(),this._displayDestObject=!0,this._displaySourceObject=!0,this._isNegZForward=!1,this._useTransformsForStretch=!1,this._sourcePosition=n.vec3.create(),this._sourceTransform=null,this._time=0,this._useParentMatrix=!1,i.init()}GetResources(e=[]){return this.source&&this.source.GetResources&&this.source.GetResources(e),this.dest&&this.dest.GetResources&&this.dest.GetResources(e),this.sourceObject&&this.sourceObject.GetResources&&this.sourceObject.GetResources(e),this.destObject&&this.destObject.GetResources&&this.destObject.GetResources(e),this.stretchObject&&this.stretchObject.GetResources&&this.stretchObject.GetResources(e),e}SetSourcePosition(e){this._useTransformsForStretch=!1,n.vec3.copy(this._sourcePosition,e)}SetSourcePositionFromTransform(e){this._useTransformsForStretch=!1,this._sourcePosition[0]=e[12],this._sourcePosition[1]=e[13],this._sourcePosition[2]=e[14]}SetDestinationPosition(e){n.vec3.copy(this._destinationPosition,e)}SetSourceTransform(e){this._useTransformsForStretch=!0,this._sourceTransform=e}SetIsNegZForward(e){this._isNegZForward=e}UpdateViewDependentData(e){if(!this.display)return;const t=i.global,r=n.vec3.subtract(t.vec3_0,this._destinationPosition,this._sourcePosition),s=n.mat4.identity(t.mat4_0),a=n.vec3.set(t.vec3_1,0,0,0),o=n.vec3.set(t.vec3_2,0,0,0),u=n.mat4.identity(t.mat4_1);let c=n.vec3.length(r);n.vec3.normalize(r,r),this._useTransformsForStretch?(n.mat4.rotateX(s,s,-Math.PI/2),n.mat4.multiply(s,this._sourceTransform,s)):(Math.abs(r[1])>.9?o[2]=1:o[1]=1,n.vec3.cross(a,o,r),n.vec3.normalize(a,a),n.vec3.cross(o,r,a),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[4]=-r[0],s[5]=-r[1],s[6]=-r[2],s[8]=o[0],s[9]=o[1],s[10]=o[2],n.mat4.multiply(s,e,s)),this.destObject&&this._displayDestObject&&(n.mat4.setTranslation(s,this._destinationPosition),this.destObject.UpdateViewDependentData(s)),this.sourceObject&&this._displaySourceObject&&(this._useTransformsForStretch?(n.mat4.identity(s),n.mat4.rotateX(s,s,-Math.PI/2),n.mat4.multiply(s,this._sourceTransform,s)):n.mat4.setTranslation(s,this._sourcePosition),this.sourceObject.UpdateViewDependentData(s)),this.stretchObject&&(this._useTransformsForStretch?(n.mat4.identity(s),n.mat4.scale(s,s,[1,1,c]),n.mat4.multiply(s,this._sourceTransform,s)):(s[0]=a[0],s[1]=a[1],s[2]=a[2],s[4]=o[0],s[5]=o[1],s[6]=o[2],s[8]=-r[0],s[9]=-r[1],s[10]=-r[2],this._isNegZForward&&(c=-c),n.mat4.scale(u,u,[1,1,c]),n.mat4.multiply(s,s,u)),this.stretchObject.UpdateViewDependentData(s))}Update(e){for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);this._time+=e,this.source?this.source.GetValueAt(this._time,this._sourcePosition):this._useTransformsForStretch&&(this._sourcePosition[0]=this._sourceTransform[12],this._sourcePosition[1]=this._sourceTransform[13],this._sourcePosition[2]=this._sourceTransform[14]),this.dest&&this.source.GetValueAt(this._time,this._destinationPosition);const t=n.vec3.subtract(i.global.vec3_0,this._destinationPosition,this._sourcePosition);this.length.value=n.vec3.length(t),n.vec3.normalize(t,t),this.sourceObject&&this._displaySourceObject&&this.sourceObject.Update(e),this.destObject&&this._displayDestObject&&this.destObject.Update(e),this.stretchObject&&this.stretchObject.Update(e)}GetBatches(e,t,r){this.display&&(this.sourceObject&&this._displaySourceObject&&this.sourceObject.GetBatches(e,t,r),this.destObject&&this._displayDestObject&&this.destObject.GetBatches(e,t,r),this.stretchObject&&this.stretchObject.GetBatches(e,t,r))}static init(){i.global||(i.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create()})}static black(e){return[["curveSets",e.array],["dest",e.object],["destObject",e.object],["length",e.object],["moveCompletion",e.object],["moveObject",e.object],["name",e.string],["progressCurve",e.object],["source",e.object],["sourceLights",e.array],["sourceObject",e.object],["stretchObject",e.object],["useCurveLod",e.boolean]]}}i.global=null,i.__isStaging=1},"./eve/effect/EveStretch2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch2",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.destinationEmitter=null,this.destinationLight=null,this.effect=null,this.loop=null,this.sourceEmitter=null,this.sourceLight=null,this.quadCount=0}static black(e){return[["destinationEmitter",e.object],["destinationLight",e.object],["effect",e.object],["loop",e.object],["name",e.string],["sourceEmitter",e.object],["sourceLight",e.object],["quadCount",e.uint]]}}s.__isStaging=4},"./eve/effect/EveTurretFiringFX.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePerMuzzleData",function(){return s}),r.d(t,"EveTurretFiringFX",function(){return i});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.constantDelay=0,this.currentStartDelay=0,this.elapsedTime=0,this.muzzlePositionBone=null,this.muzzleTransform=n.mat4.create(),this.readyToStart=!1,this.started=!1}}class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.boneName="",this.destinationObserver=null,this.firingDelay1=0,this.firingDelay2=0,this.firingDelay3=0,this.firingDelay4=0,this.firingDurationOverride=0,this.firingPeakTime=0,this.isLoopFiring=!1,this.maxRadius=0,this.maxScale=0,this.minRadius=0,this.minScale=0,this.scaleEffectTarget=!1,this.sourceObserver=null,this.startCurveSet=null,this.stopCurveSet=null,this.stretch=[],this.useMuzzleTransform=!1,this.display=!0,this.firingDelay5=0,this.firingDelay6=0,this.firingDelay7=0,this.firingDelay8=0,this._endPosition=n.vec3.create(),this._firingDuration=0,this._isFiring=!1,this._perMuzzleData=[]}Initialize(){this._firingDuration=this.GetCurveDuration();for(let e=0;e<this.stretch.length;++e)this._perMuzzleData[e]=new s;const e=this._perMuzzleData;e.length>0&&(e[0].constantDelay=this.firingDelay1),e.length>1&&(e[1].constantDelay=this.firingDelay2),e.length>2&&(e[2].constantDelay=this.firingDelay3),e.length>3&&(e[3].constantDelay=this.firingDelay4),e.length>4&&(e[4].constantDelay=this.firingDelay5),e.length>5&&(e[5].constantDelay=this.firingDelay6),e.length>6&&(e[6].constantDelay=this.firingDelay7),e.length>7&&(e[7].constantDelay=this.firingDelay8)}GetCurveDuration(){let e=0;for(let t=0;t<this.stretch.length;++t){const r=this.stretch[t];for(let t=0;t<r.curveSets.length;++t)e=Math.max(e,r.curveSets[t].GetMaxCurveDuration())}return e}GetPerMuzzleEffectCount(){return this.stretch.length}SetEndPosition(e){this._endPosition[0]=e[0],this._endPosition[1]=e[1],this._endPosition[2]=e[2]}SetMuzzleBoneID(e,t){this._perMuzzleData[e].muzzlePositionBone=t}GetMuzzleTransform(e){return this._perMuzzleData[e].muzzleTransform}PrepareFiring(e,t=-1){for(let r=0;r<this.stretch.length;++r)t<0||t===r?(this._perMuzzleData[r].currentStartDelay=e+this._perMuzzleData[r].constantDelay,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0):(this._perMuzzleData[r].currentStartDelay=Number.MAX_VALUE,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0);this._isFiring=!0}StartMuzzleEffect(e){const t=this.stretch[e];for(let r=0;r<t.curveSets.length;++r){const n=t.curveSets[r];switch(n.name){case"play_start":case"play_loop":n.PlayFrom(-this._perMuzzleData[e].currentStartDelay);break;case"play_stop":n.Stop()}}this._perMuzzleData[e].started=!0,this._perMuzzleData[e].readyToStart=!1}StopFiring(){for(let e=0;e<this.stretch.length;++e){const t=this.stretch[e];for(let e=0;e<t.curveSets.length;++e){const r=t.curveSets[e];switch(r.name){case"play_start":case"play_loop":r.Stop();break;case"play_stop":r.Play()}}this._perMuzzleData[e].started=!1,this._perMuzzleData[e].readyToStart=!1,this._perMuzzleData[e].currentStartDelay=0,this._perMuzzleData[e].elapsedTime=0}this._isFiring=!1}UpdateViewDependentData(e){for(let t=0;t<this.stretch.length;++t)this.stretch[t].UpdateViewDependentData(e)}Update(e){for(let t=0;t<this.stretch.length;++t)this._perMuzzleData[t].started&&(this._perMuzzleData[t].elapsedTime+=e),(this._perMuzzleData[t].elapsedTime<this._firingDuration||this.isLoopFiring)&&this._isFiring&&(this._perMuzzleData[t].started?(this.useMuzzleTransform?this.stretch[t].SetSourceTransform(this._perMuzzleData[t].muzzleTransform):this.stretch[t].SetSourcePositionFromTransform(this._perMuzzleData[t].muzzleTransform),this.stretch[t].SetDestinationPosition(this._endPosition),this.stretch[t].SetIsNegZForward(!0)):(this._perMuzzleData[t].readyToStart?(this.StartMuzzleEffect(t),this._perMuzzleData[t].currentStartDelay=0,this._perMuzzleData[t].elapsedTime=0):this._perMuzzleData[t].currentStartDelay-=e,this._perMuzzleData[t].currentStartDelay<=0&&(this._perMuzzleData[t].readyToStart=!0))),this.stretch[t].Update(e)}GetBatches(e,t,r){if(this.display&&this._isFiring)for(let n=0;n<this.stretch.length;++n)this._perMuzzleData[n].started&&(this._firingDuration>=this._perMuzzleData[n].elapsedTime||this.isLoopFiring)&&this.stretch[n].GetBatches(e,t,r)}static black(e){return[["boneName",e.string],["destinationObserver",e.object],["firingDelay1",e.float],["firingDelay2",e.float],["firingDelay3",e.float],["firingDelay4",e.float],["firingDurationOverride",e.float],["firingPeakTime",e.float],["isLoopFiring",e.boolean],["maxRadius",e.float],["maxScale",e.float],["minRadius",e.float],["minScale",e.float],["name",e.string],["scaleEffectTarget",e.boolean],["sourceObserver",e.object],["startCurveSet",e.object],["stopCurveSet",e.object],["stretch",e.array],["useMuzzleTransform",e.boolean]]}}i.__isStaging=1},"./eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/effect/EveLensflare.js");r.d(t,"EveLensflare",function(){return n.EveLensflare});var s=r("./eve/effect/EveMeshOverlayEffect.js");r.d(t,"EveMeshOverlayEffect",function(){return s.EveMeshOverlayEffect});var i=r("./eve/effect/EveOccluder.js");r.d(t,"EveOccluder",function(){return i.EveOccluder});var a=r("./eve/effect/EveStarfield.js");r.d(t,"EveStarfield",function(){return a.EveStarfield});var o=r("./eve/effect/EveStretch.js");r.d(t,"EveStretch",function(){return o.EveStretch});var u=r("./eve/effect/EveStretch2.js");r.d(t,"EveStretch2",function(){return u.EveStretch2});var c=r("./eve/effect/EveTurretFiringFX.js");r.d(t,"EvePerMuzzleData",function(){return c.EvePerMuzzleData}),r.d(t,"EveTurretFiringFX",function(){return c.EveTurretFiringFX})},"./eve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/animation/index.js");r.d(t,"EveAnimation",function(){return n.EveAnimation}),r.d(t,"EveAnimationCommand",function(){return n.EveAnimationCommand}),r.d(t,"EveAnimationCurve",function(){return n.EveAnimationCurve}),r.d(t,"EveAnimationState",function(){return n.EveAnimationState}),r.d(t,"EveAnimationStateMachine",function(){return n.EveAnimationStateMachine});var s=r("./eve/child/index.js");r.d(t,"EveChildBulletStorm",function(){return s.EveChildBulletStorm}),r.d(t,"EveChildCloud",function(){return s.EveChildCloud}),r.d(t,"EveChildContainer",function(){return s.EveChildContainer}),r.d(t,"EveChildExplosion",function(){return s.EveChildExplosion}),r.d(t,"EveChildInheritProperties",function(){return s.EveChildInheritProperties}),r.d(t,"EveChildLink",function(){return s.EveChildLink}),r.d(t,"EveChildMesh",function(){return s.EveChildMesh}),r.d(t,"EveChildParticleSphere",function(){return s.EveChildParticleSphere}),r.d(t,"EveChildParticleSystem",function(){return s.EveChildParticleSystem}),r.d(t,"EveChildQuad",function(){return s.EveChildQuad}),r.d(t,"EveChildBillboard",function(){return s.EveChildBillboard}),r.d(t,"EveChildModifierAttachToBone",function(){return s.EveChildModifierAttachToBone}),r.d(t,"EveChildModifierBillboard2D",function(){return s.EveChildModifierBillboard2D}),r.d(t,"EveChildModifierBillboard3D",function(){return s.EveChildModifierBillboard3D}),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return s.EveChildModifierCameraOrientedRotationConstrained}),r.d(t,"EveChildModifierSRT",function(){return s.EveChildModifierSRT}),r.d(t,"EveChildModifierTranslateWithCamera",function(){return s.EveChildModifierTranslateWithCamera});var i=r("./eve/effect/index.js");r.d(t,"EveLensflare",function(){return i.EveLensflare}),r.d(t,"EveMeshOverlayEffect",function(){return i.EveMeshOverlayEffect}),r.d(t,"EveOccluder",function(){return i.EveOccluder}),r.d(t,"EveStarfield",function(){return i.EveStarfield}),r.d(t,"EveStretch",function(){return i.EveStretch}),r.d(t,"EveStretch2",function(){return i.EveStretch2}),r.d(t,"EvePerMuzzleData",function(){return i.EvePerMuzzleData}),r.d(t,"EveTurretFiringFX",function(){return i.EveTurretFiringFX});var a=r("./eve/item/index.js");r.d(t,"EveBanner",function(){return a.EveBanner}),r.d(t,"EveBoosterSet2Batch",function(){return a.EveBoosterSet2Batch}),r.d(t,"EveBoosterSet2Item",function(){return a.EveBoosterSet2Item}),r.d(t,"EveBoosterSet2",function(){return a.EveBoosterSet2}),r.d(t,"EveCurveLineSetItem",function(){return a.EveCurveLineSetItem}),r.d(t,"EveCurveLineSet",function(){return a.EveCurveLineSet}),r.d(t,"EveCustomMask",function(){return a.EveCustomMask}),r.d(t,"EveHazeSetBatch",function(){return a.EveHazeSetBatch}),r.d(t,"EveHazeSetItem",function(){return a.EveHazeSetItem}),r.d(t,"EveHazeSet",function(){return a.EveHazeSet}),r.d(t,"EveLocator2",function(){return a.EveLocator2}),r.d(t,"EveLocator",function(){return a.EveLocator}),r.d(t,"EveObjectSetItem",function(){return a.EveObjectSetItem}),r.d(t,"EveObjectSet",function(){return a.EveObjectSet}),r.d(t,"EvePlaneSetBatch",function(){return a.EvePlaneSetBatch}),r.d(t,"EvePlaneSetItem",function(){return a.EvePlaneSetItem}),r.d(t,"EvePlaneSet",function(){return a.EvePlaneSet}),r.d(t,"EveSpaceObjectDecal",function(){return a.EveSpaceObjectDecal}),r.d(t,"EveSpotlightSetBatch",function(){return a.EveSpotlightSetBatch}),r.d(t,"EveSpotlightSetItem",function(){return a.EveSpotlightSetItem}),r.d(t,"EveSpotlightSet",function(){return a.EveSpotlightSet}),r.d(t,"EveSpriteLineSetBatch",function(){return a.EveSpriteLineSetBatch}),r.d(t,"EveSpriteLineSetItem",function(){return a.EveSpriteLineSetItem}),r.d(t,"EveSpriteLineSet",function(){return a.EveSpriteLineSet}),r.d(t,"EveSpriteSetBatch",function(){return a.EveSpriteSetBatch}),r.d(t,"EveSpriteSetItem",function(){return a.EveSpriteSetItem}),r.d(t,"EveSpriteSet",function(){return a.EveSpriteSet}),r.d(t,"EveTrailSetRenderBatch",function(){return a.EveTrailSetRenderBatch}),r.d(t,"EveTrailsSet",function(){return a.EveTrailsSet}),r.d(t,"EveTurretSetItem",function(){return a.EveTurretSetItem}),r.d(t,"EveTurretSet",function(){return a.EveTurretSet}),r.d(t,"EveBoosterBatch",function(){return a.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return a.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return a.EveBoosterSet});var o=r("./eve/object/index.js");r.d(t,"EveEffectRoot2",function(){return o.EveEffectRoot2}),r.d(t,"EveMissileWarhead",function(){return o.EveMissileWarhead}),r.d(t,"EveMissile",function(){return o.EveMissile}),r.d(t,"EveMobile",function(){return o.EveMobile}),r.d(t,"EveRootTransform",function(){return o.EveRootTransform}),r.d(t,"EveShip2",function(){return o.EveShip2}),r.d(t,"EveStation2",function(){return o.EveStation2}),r.d(t,"EveTransform",function(){return o.EveTransform}),r.d(t,"EveEffectRoot",function(){return o.EveEffectRoot}),r.d(t,"EvePlanet",function(){return o.EvePlanet}),r.d(t,"EveShip",function(){return o.EveShip}),r.d(t,"EveSpaceObject",function(){return o.EveSpaceObject}),r.d(t,"EveStation",function(){return o.EveStation});var u=r("./eve/particle/index.js");r.d(t,"EveParticleDirectForce",function(){return u.EveParticleDirectForce}),r.d(t,"EveParticleDragForce",function(){return u.EveParticleDragForce});var c=r("./eve/pi/index.js");r.d(t,"EveConnector",function(){return c.EveConnector}),r.d(t,"EveLocalPositionCurve",function(){return c.EveLocalPositionCurve}),r.d(t,"EveSpherePin",function(){return c.EveSpherePin});var l=r("./eve/ui/index.js");r.d(t,"EveTacticalOverlay",function(){return l.EveTacticalOverlay}),r.d(t,"EveUiObject",function(){return l.EveUiObject});var h=r("./eve/EveCamera.js");r.d(t,"EveCamera",function(){return h.EveCamera});var d=r("./eve/EveLineContainer.js");r.d(t,"EveLineContainer",function(){return d.EveLineContainer});var f=r("./eve/EveSpaceScene.js");r.d(t,"EveSpaceScene",function(){return f.EveSpaceScene})},"./eve/item/EveBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBanner",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.angleX=0,this.angleY=0,this.boneIndex=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.usage=0,this.display=!0,this.transform=n.mat4.create()}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling)}}},"./eve/item/EveBoosterSet2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterSet2Batch",function(){return a}),r.d(t,"EveBoosterSet2Item",function(){return o}),r.d(t,"EveBoosterSet2",function(){return u});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js");class a extends s.Tw2RenderBatch{constructor(...e){super(...e),this.boosterSet=null}Commit(e){this.boosterSet.Render(e)}}class o extends i.EveObjectSetItem{}o.__isStaging=4;class u extends i.EveObjectSet{constructor(...e){super(...e),this.alwaysOn=!1,this.alwaysOnIntensity=0,this.effect=null,this.glowColor=n.vec4.create(),this.glowScale=0,this.glows=null,this.haloColor=n.vec4.create(),this.haloScaleX=0,this.haloScaleY=0,this.lightColor=n.vec4.create(),this.lightFlickerAmplitude=0,this.lightFlickerFrequency=0,this.lightRadius=0,this.lightWarpColor=n.vec4.create(),this.lightWarpRadius=0,this.symHaloScale=0,this.trails=null,this.warpGlowColor=n.vec4.create(),this.warpHaloColor=n.vec4.create()}static black(e){return[["alwaysOn",e.boolean],["alwaysOnIntensity",e.float],["effect",e.object],["glows",e.object],["glowColor",e.color],["glowScale",e.float],["haloColor",e.color],["haloScaleX",e.float],["haloScaleY",e.float],["lightFlickerAmplitude",e.float],["lightFlickerColor",e.color],["lightFlickerFrequency",e.float],["lightFlickerRadius",e.float],["lightColor",e.color],["lightRadius",e.float],["lightWarpColor",e.color],["lightWarpRadius",e.float],["symHaloScale",e.float],["trails",e.object],["warpGlowColor",e.color],["warpHaloColor",e.color]]}}u.__isStaging=4},"./eve/item/EveCurveLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCurveLineSetItem",function(){return a}),r.d(t,"EveCurveLineSet",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js");class a extends i.EveObjectSetItem{constructor(...e){super(...e),this.animationSpeed=0,this.animationScale=1,this.color1=n.vec4.fromValues(1,1,1,1),this.color2=n.vec4.fromValues(1,1,1,1),this.intermediatePosition=n.vec3.create(),this.multiColor=n.vec4.fromValues(0,0,0,1),this.multiColorBorder=-1,this.numOfSegments=1,this.overlayColor=n.vec4.fromValues(0,0,0,1),this.position1=n.vec3.create(),this.position2=n.vec3.create(),this.type=a.Type.INVALID,this.width=1}ChangePositionFromRay(e,t,r=a.DEFAULT_RAY_LENGTH){n.vec3.copy(this.position1,e),n.vec3.scaleAndAdd(this.position2,e,t,r),this.UpdateValues()}ChangeColor(e,t){n.vec3.copy(this.color1,e),n.vec3.copy(this.color2,t),this.UpdateValues()}ChangeWidth(e){this.width=e,this.UpdateValues()}ChangeCartesian(e,t,r){n.vec3.copy(this.position1,e),n.vec3.copy(this.position2,t),n.vec3.copy(this.intermediatePosition,r),this.UpdateValues()}ChangePositionCartesian(e,t){n.vec3.copy(this.position1,e),n.vec3.copy(this.position2,t),this.UpdateValues()}ChangeIntermediateCartesian(e){n.vec3.copy(this.intermediatePosition,e),this.UpdateValues()}ChangeSpherical(e,t,r,s){n.vec3.fromSpherical(this.position1,e,s),n.vec3.fromSpherical(this.position2,t,s),n.vec3.fromSpherical(this.intermediatePosition,r,s),this.UpdateValues()}ChangePositionSpherical(e,t,r){n.vec3.fromSpherical(this.position1,e,r),n.vec3.fromSpherical(this.position2,t,r),this.UpdateValues()}ChangeIntermediateSpherical(e,t){n.vec3.fromSpherical(this.intermediatePosition,e,t),this.UpdateValues()}ChangeMultiColor(e,t){n.vec4.copy(this.multiColor,e),this.multiColorBorder=t,this.UpdateValues()}ChangeAnimation(e,t,r){n.vec4.copy(this.overlayColor,e),this.animationSpeed=t,this.animationScale=r,this.UpdateValues()}ChangeSegmentation(e){this.type!==a.Type.STRAIGHT&&(this.numOfSegments=e,this.UpdateValues())}static from(e={}){const t=new this;return n.util.assignIfExists(t,e,["name","display","type","position1","color1","position2","color2","intermediatePosition","width","multiColor","multiColorBorder","overlayColor","animationSpeed","animationScale","numOfSegments"]),t}}a.Type={INVALID:0,STRAIGHT:1,SPHERED:2,CURVED:3},a.DEFAULT_RAY_LENGTH=1e3,a.DEFAULT_CURVED_SEGMENTS=20,a.DEFAULT_SPHERED_SEGMENTS=20;class o extends i.EveObjectSet{constructor(){super(),this.lineEffect=s.Tw2Effect.from({effectFilePath:"res:/Graphics/Effect/Managed/Space/SpecialFX/Lines3D.fx",textures:{TexMap:"res:/texture/global/white.dds.0.png",OverlayTexMap:"res:/texture/global/white.dds.0.png"}}),this.pickEffect=null,this.lineWidthFactor=1,this.additive=!1,this.depthOffset=0,this.pickable=!0,this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.translation=n.vec3.create(),this.transform=n.mat4.create(),this._parentTransform=n.mat4.create(),this._vertexSize=26,this._vbSize=0,this._vb=null,this._perObjectData=s.Tw2PerObjectData.from(o.perObjectData),this._decl=s.Tw2VertexDeclaration.from(o.vertexDeclarations).SetStride(104),o.init()}get lines(){return this.items}set lines(e){this.items=e}get lineCount(){let e=0;for(let t=0;t<this.items.length;t++)this.items[t].type!==a.Type.INVALID&&(e+=this.items[t].numOfSegments);return e}Initialize(){this.UpdateValues(),this.Rebuild()}GetResources(e=[]){return this.lineEffect&&this.lineEffect.GetResources(e),e}AddStraightLineFromRay(e,t,r,n,s,i){const a=this.AddStraightLine([0,0,0],[0,0,0],n,s,i);return a.ChangePositionFromRay(e,t,r),a}AddStraightLine(e,t,r,n,s){return this.CreateItem({type:a.Type.STRAIGHT,position1:e,position2:t,color1:n,color2:s,width:r})}AddCurvedLineCrt(e,t,r,n,s,i){return this.CreateItem({type:a.Type.CURVED,position1:e,position2:t,intermediatePosition:r,color1:s,color2:i,width:n,numOfSegments:a.DEFAULT_CURVED_SEGMENTS})}AddCurvedLineSph(e,t,r,s,i,u,c){const l=o.global;return this.CreateItem({type:a.Type.CURVED,position1:n.vec3.fromSpherical(l.vec3_0,e,r),position2:n.vec3.fromSpherical(l.vec3_1,t,r),intermediatePosition:n.vec3.fromSpherical(l.vec3_2,s,r),color1:u,color2:c,width:i,numOfSegments:a.DEFAULT_CURVED_SEGMENTS})}AddSpheredLineCrt(e,t,r,n,s,i){return this.CreateItem({type:a.Type.SPHERED,position1:e,position2:t,intermediatePosition:r,color1:s,color2:i,width:n,numOfSegments:a.DEFAULT_SPHERED_SEGMENTS})}AddSpheredLineSph(e,t,r,s,i,u,c){const l=o.global;return this.CreateItem({type:a.Type.SPHERED,position1:n.vec3.fromSpherical(l.vec3_0,e,r),position2:n.vec3.fromSpherical(l.vec3_1,t,r),intermediatePosition:n.vec3.fromSpherical(l.vec3_2,s,r),color1:u,color2:c,width:i,numOfSegments:a.DEFAULT_SPHERED_SEGMENTS})}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}UpdateViewDependentData(e){n.mat4.copy(this._parentTransform,e)}Unload(e){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null),super.Unload(e)}Rebuild(){this.RebuildItems(),this._vbSize=this.lineCount,this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=o.global,r=new Float32Array(6*this._vbSize*this._vertexSize),s=t.vec3_0,i=t.vec3_1,u=t.vec3_2,c=t.vec3_3,l=t.vec3_4,h=t.vec3_5,d=t.vec3_6,f=t.mat4_0;let m,p=t.vec3_7,v=t.vec3_8,_=t.vec3_9,E=t.vec3_10,S=t.vec4_0,T=t.vec4_1,g=0;for(let t=0;t<e;++t){const e=this._visibleItems[t];switch(e.type){case a.Type.INVALID:break;case a.Type.STRAIGHT:o.WriteLineVerticesToBuffer(this,e.position1,e.color1,0,e.position2,e.color2,1,t,r,g),g+=6*this._vertexSize;break;case a.Type.SPHERED:n.vec3.subtract(s,e.position1,e.intermediatePosition),n.vec3.subtract(i,e.position2,e.intermediatePosition),n.vec3.normalize(u,s),n.vec3.normalize(c,i),n.vec3.cross(l,s,i);const R=Math.acos(n.vec3.dot(u,c))/e.numOfSegments;n.mat4.identity(f),n.mat4.rotate(f,f,R,l),n.vec3.copy(p,s),n.vec4.copy(S,e.color1);for(let s=0;s<this.lines[t].numOfSegments;++s){const i=(s+1)/e.numOfSegments;n.vec3.transformMat4(v,p,f),T[0]=e.color1[0]*(1-i)+e.color2[0]*i,T[1]=e.color1[1]*(1-i)+e.color2[1]*i,T[2]=e.color1[2]*(1-i)+e.color2[2]*i,T[3]=e.color1[3]*(1-i)+e.color2[3]*i,n.vec3.add(_,p,e.intermediatePosition),n.vec3.add(E,v,e.intermediatePosition),o.WriteLineVerticesToBuffer(this,_,S,s/e.numOfSegments,E,T,i,t,r,g),g+=6*this._vertexSize,m=p,p=v,v=m,m=S,S=T,T=m}break;case a.Type.CURVED:n.vec3.subtract(h,e.intermediatePosition,e.position1),n.vec3.subtract(d,e.position2,e.intermediatePosition),n.vec3.copy(_,e.position1),n.vec3.copy(S,e.color1);for(let s=0;s<e.numOfSegments;++s){const i=(s+1)/e.numOfSegments;n.vec3.hermite(E,e.position1,h,e.position2,d,i),T[0]=e.color1[0]*(1-i)+e.color2[0]*i,T[1]=e.color1[1]*(1-i)+e.color2[1]*i,T[2]=e.color1[2]*(1-i)+e.color2[2]*i,T[3]=e.color1[3]*(1-i)+e.color2[3]*i,o.WriteLineVerticesToBuffer(this,_,S,s/e.numOfSegments,E,T,i,t,r,g),g+=6*this._vertexSize,m=_,_=E,E=m,m=S,S=T,T=m}}}this._vb=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,this._vb),n.device.gl.bufferData(n.device.gl.ARRAY_BUFFER,r,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,null),super.Rebuild()}GetBatches(e,t){if(!this.display||!this._vb)return;let r;switch(e){case n.device.RM_TRANSPARENT:if(this.additive||!this.lineEffect)return;r=this.lineEffect;break;case n.device.RM_ADDITIVE:if(!this.additive||!this.lineEffect)return;r=this.lineEffect;break;case n.device.RM_PICKABLE:if(!this.pickable||!this.pickEffect)return;r=this.pickEffect}const i=new s.Tw2ForwardingRenderBatch,a=o.global.mat4_0;n.mat4.multiply(a,this.transform,this._parentTransform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),a),n.mat4.transpose(this._perObjectData.ps.Get("WorldMat"),a),i.perObjectData=this._perObjectData,i.geometryProvider=this,i.renderMode=e,i.effect=r,t.Commit(i)}Render(e,t){if(!e.effect||!e.effect.IsGood()||!this._vb)return!1;const r=n.device,s=r.gl;s.bindBuffer(s.ARRAY_BUFFER,this._vb);let i=e.effect.GetPassCount(t);for(let n=0;n<i;++n){e.effect.ApplyPass(t,n);let i=e.effect.GetPassInput(t,n);if(!this._decl.SetDeclaration(r,i,this._decl.stride))return!1;r.ApplyShadowState(),s.drawArrays(s.TRIANGLES,0,6*this._vbSize)}return!0}static FillColorVertices(e,t,r){return t[r++]=e.multiColor[0],t[r++]=e.multiColor[1],t[r++]=e.multiColor[2],t[r++]=e.multiColor[3],t[r++]=e.overlayColor[0],t[r++]=e.overlayColor[1],t[r++]=e.overlayColor[2],t[r++]=e.overlayColor[3],r}static WriteLineVerticesToBuffer(e,t,r,n,s,i,a,u,c,l){const h=e.items[u];c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=s[0]-t[0],c[l++]=s[1]-t[1],c[l++]=s[2]-t[2],c[l++]=-e.lineWidthFactor*h.width,c[l++]=0,c[l++]=n,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=o.FillColorVertices(h,c,l),c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=s[0]-t[0],c[l++]=s[1]-t[1],c[l++]=s[2]-t[2],c[l++]=e.lineWidthFactor*h.width,c[l++]=0,c[l++]=n,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=o.FillColorVertices(h,c,l),c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=t[0]-s[0],c[l++]=t[1]-s[1],c[l++]=t[2]-s[2],c[l++]=-e.lineWidthFactor*h.width,c[l++]=1,c[l++]=a,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=i[3],l=o.FillColorVertices(h,c,l),c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=s[0]-t[0],c[l++]=s[1]-t[1],c[l++]=s[2]-t[2],c[l++]=e.lineWidthFactor*h.width,c[l++]=0,c[l++]=n,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=o.FillColorVertices(h,c,l),c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=t[0]-s[0],c[l++]=t[1]-s[1],c[l++]=t[2]-s[2],c[l++]=e.lineWidthFactor*h.width,c[l++]=1,c[l++]=a,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=i[3],l=o.FillColorVertices(h,c,l),c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=t[0]-s[0],c[l++]=t[1]-s[1],c[l++]=t[2]-s[2],c[l++]=-e.lineWidthFactor*h.width,c[l++]=1,c[l++]=a,c[l++]=h.multiColorBorder,c[l++]=a-n,c[l++]=h.animationSpeed,c[l++]=h.animationScale,c[l++]=u,c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=i[3],o.FillColorVertices(h,c,l)}static init(){o.global||(o.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec3_3:n.vec3.create(),vec3_4:n.vec3.create(),vec3_5:n.vec3.create(),vec3_6:n.vec3.create(),vec3_7:n.vec3.create(),vec3_8:n.vec3.create(),vec3_9:n.vec3.create(),vec3_10:n.vec3.create(),vec4_0:n.vec4.create(),vec4_1:n.vec4.create(),mat4_0:n.mat4.create()})}static black(e){return[["lineEffect",e.object],["pickEffect",e.object]]}}o.Item=a,o.global=null,o.perObjectData={vs:[["WorldMat",16]],ps:[["WorldMat",16]]},o.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:3},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4},{usage:"COLOR",usageIndex:2,elements:4}],o.__isStaging=1},"./eve/item/EveCustomMask.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCustomMask",function(){return a});var n=r("./global/index.js"),s=r("./core/parameter/index.js");function i(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}class a extends s.Tw2TransformParameter{constructor(...e){super(...e),this.materialIndex=0,this.targetMaterials=n.vec4.create(),this.display=!0,this.isMirrored=!1,this.parameters={PatternMaskMap:new s.Tw2TextureParameter("PatternMaskMap"),DiffuseColor:new s.Tw2Vector4Parameter("DiffuseColor"),FresnelColor:new s.Tw2Vector4Parameter("FresnelColor"),Gloss:new s.Tw2Vector4Parameter("Gloss")},this._worldInverseTranspose=n.mat4.create()}SetMaterial(e){var t,r=this;return(t=function*(){const t=yield n.tw2.eveSof.FetchMaterial(e),{DiffuseColor:s,FresnelColor:i,Gloss:a}=t.parameters;r.parameters.DiffuseColor.SetValue(s),r.parameters.FresnelColor.SetValue(i),r.parameters.Gloss.SetValue(a)},function(){var e=this,r=arguments;return new Promise(function(n,s){var a=t.apply(e,r);function o(e){i(a,n,s,o,u,"next",e)}function u(e){i(a,n,s,o,u,"throw",e)}o(void 0)})})()}UpdatePerObjectData(e,t,r,s){this.SetParentTransform(e);const i=this.display&&s?this.targetMaterials:n.vec4.ZERO;t.ps.Set("CustomMaskTarget"+r,i),t.ps.SetIndex("CustomMaskMaterialID"+r,0,this.materialIndex),t.vs.SetIndex("CustomMaskData"+r,1,this.isMirrored?1:0),t.vs.Set("CustomMaskMatrix"+r,this._worldInverseTranspose)}static black(e){return[["materialIndex",e.byte],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["targetMaterials",e.vector4]]}}a.__isStaging=1},"./eve/item/EveHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveHazeSetBatch",function(){return a}),r.d(t,"EveHazeSetItem",function(){return o}),r.d(t,"EveHazeSet",function(){return u});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js");class a extends s.Tw2RenderBatch{constructor(...e){super(...e),this.hazeSet=null}Commit(e){this.hazeSet.Render(e)}}class o extends i.EveObjectSetItem{constructor(...e){super(...e),this.boosterGainInfluence=!1,this.colorType=0,this.hazeBrightness=0,this.hazeFalloff=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.sourceBrightness=0,this.sourceSize=0,this.transform=n.mat4.create()}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}}class u extends i.EveObjectSet{Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}}},"./eve/item/EveLocator2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocator2",function(){return i}),r.d(t,"EveLocator",function(){return i});var n=r("./global/index.js"),s=r("./global/util/index.js");class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.transform=n.mat4.create(),this.atlasIndex0=null,this.atlasIndex1=null,this.bone=null}FindBone(e){this.bone=null;const t=e.FindModelForMesh(0);if(t)for(let e=0;e<t.bones.length;++e)if(t.bones[e].boneRes.name===this.name){this.bone=t.bones[e];break}return this.bone}static from(e,t){const r=new i;return e&&Object(s.assignIfExists)(r,e,["transform","name","atlasIndex0","atlasIndex1"]),r}static black(e){return[["name",e.string],["transform",e.matrix]]}}i.Prefix={AUDIO:"locator_audio",ATTACH:"locator_attach",BOOSTER:"locator_booster",TURRET:"locator_turret",XL_TURRET:"locator_xl"},i.__isStaging=1},"./eve/item/EveObjectSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObjectSetItem",function(){return i}),r.d(t,"EveObjectSet",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.display=!0,this._dirty=!0}OnValueChanged(){this._dirty=!0}OnDestroyed(){}}class a extends n.Tw2BaseClass{constructor(...e){super(...e),this.autoRebuild=!0,this.display=!0,this.items=[],this._dirty=!0,this._visibleItems=[]}Initialize(){this.Rebuild()}OnValueChanged(){this._dirty=!0}OnItemModified(e,t){this.items.includes(e)?(this._dirty=!0,this.emit("item_modified",e,t)):(this.emit("item_removed",e,t),e.off("modified",this.OnItemModified))}CreateItem(e={},t,r){const n=this.constructor.Item.from(e);return this.AddItem(n,!0,!0),r||this.emit("item_created",n),t||this.UpdateValues(),n}AddItem(e,t,r){return!this.items.includes(e)&&(this.items.push(e),this._dirty=!0,e.on("modified",this.OnItemModified,this),r||this.emit("item_added",e),t||this.UpdateValues(e),!0)}RemoveItem(e,t,r){const n=this.items.indexOf(e);return-1!==n&&(this.items.splice(n,1),this._dirty=!0,e.off("modified",this.OnItemModified),r||this.emit("item_removed",e),t||this.UpdateValues(e),!0)}ClearItems(e,t){let r;t||(r=Array.from(this.items));for(let e=0;e<this.items.length;e++)this.RemoveItem(this.items[e],!0,!0),e--;t||this.emit("items_cleared",r),e||this.UpdateValues()}RebuildItems(){this._visibleItems.splice(0);for(let e=0;e<this.items.length;e++){const t=this.items[e];t.has("modified",this.OnItemModified)||(this.emit("item_added",t),t.on("modified",this.OnItemModified,this)),t.display&&this._visibleItems.push(t),t._dirty&&this.emit("item_rebuilt",t),t._dirty=!1}this._dirty=!0}AreItemsDirty(){for(let e=0;e<this.items.length;e++)if(this.items[e]._dirty)return!0;return!1}Update(e){!this._dirty&&this.autoRebuild&&this.AreItemsDirty()&&(this._dirty=!0),this._dirty&&this.Rebuild()}Unload(e){e||this.emit("unloaded")}Rebuild(){this.emit("rebuilt")}GetBatches(e,t,r){throw new s.ErrAbstractClassMethod}Render(){throw new s.ErrAbstractClassMethod}}a.Item=null,a.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec4_0:n.vec4.create(),vec4_1:n.vec4.create(),mat4_0:n.mat4.create()}},"./eve/item/EvePlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlaneSetBatch",function(){return u}),r.d(t,"EvePlaneSetItem",function(){return c}),r.d(t,"EvePlaneSet",function(){return l});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");class u extends s.Tw2RenderBatch{constructor(...e){super(...e),this.planeSet=null}Commit(e){this.planeSet.Render(e)}}class c extends i.EveObjectSetItem{constructor(...e){super(...e),this.name="",this.color=n.vec4.create(),this.layer1Scroll=n.vec4.create(),this.layer1Transform=n.vec4.create(),this.layer2Scroll=n.vec4.create(),this.layer2Transform=n.vec4.create(),this.maskAtlasID=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.boneIndex=0,this.groupIndex=-1,this.transform=n.mat4.create()}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}static from(e){const t=new c;return e&&(n.util.assignIfExists(t,e,["name","display","boneIndex","groupIndex","position","scaling","rotation","transform","color","layer1Transform","layer2Transform","layer1Scroll","layer2Scroll","maskAtlasID"]),void 0!==e.maskMapAtlasIndex&&(t.maskAtlasID=e.maskMapAtlasIndex)),t}static black(e){return[["color",e.color],["layer1Scroll",e.vector4],["layer1Transform",e.vector4],["layer2Scroll",e.vector4],["layer2Transform",e.vector4],["maskAtlasID",e.uint],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}class l extends i.EveObjectSet{constructor(...e){super(...e),this.name="",this.effect=null,this.hideOnLowQuality=!1,this.pickBufferID=0,this._time=0,this._vertexBuffer=null,this._indexBuffer=null,this._decl=s.Tw2VertexDeclaration.from(l.vertexDeclarations)}get planes(){return this.items}set planes(e){this.items=e}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}Update(e,t){this._time+=e,super.Update(e)}Unload(e){this._vertexBuffer&&(n.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(){this.Unload(!0),this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();l.global.mat4_0;const t=new Float32Array(4*e*35);for(let r=0;r<e;++r){const e=this._visibleItems[r],s=4*r*35;t[s+35-3]=0,t[s+35+35-3]=1,t[s+70+35-3]=2,t[s+105+35-3]=3;const i=n.mat4.fromRotationTranslationScale(e.transform,e.rotation,e.position,e.scaling);for(let r=0;r<4;++r){const n=s+35*r;t[n]=i[0],t[n+1]=i[4],t[n+2]=i[8],t[n+3]=i[12],t[n+4]=i[1],t[n+5]=i[5],t[n+6]=i[9],t[n+7]=i[13],t[n+8]=i[2],t[n+9]=i[6],t[n+10]=i[10],t[n+11]=i[14],t[n+12]=e.color[0],t[n+13]=e.color[1],t[n+14]=e.color[2],t[n+15]=e.color[3],t[n+16]=e.layer1Transform[0],t[n+17]=e.layer1Transform[1],t[n+18]=e.layer1Transform[2],t[n+19]=e.layer1Transform[3],t[n+20]=e.layer2Transform[0],t[n+21]=e.layer2Transform[1],t[n+22]=e.layer2Transform[2],t[n+23]=e.layer2Transform[3],t[n+24]=e.layer1Scroll[0],t[n+25]=e.layer1Scroll[1],t[n+26]=e.layer1Scroll[2],t[n+27]=e.layer1Scroll[3],t[n+28]=e.layer2Scroll[0],t[n+29]=e.layer2Scroll[1],t[n+30]=e.layer2Scroll[2],t[n+31]=e.layer2Scroll[3],t[n+33]=e.boneIndex,t[n+34]=e.maskAtlasID}}this._vertexBuffer=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,this._vertexBuffer),n.device.gl.bufferData(n.device.gl.ARRAY_BUFFER,t,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,null);const r=new Uint16Array(6*e);for(let t=0;t<e;++t){const e=6*t,n=4*t;r[e]=n,r[e+1]=n+2,r[e+2]=n+1,r[e+3]=n,r[e+4]=n+3,r[e+5]=n+2}this._indexBuffer=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.device.gl.bufferData(n.device.gl.ELEMENT_ARRAY_BUFFER,r,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*e,super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._indexBuffer&&this._vertexBuffer&&this._visibleItems.length){const e=new u;e.renderMode=n.device.RM_ADDITIVE,e.planeSet=this,e.perObjectData=r,t.Commit(e)}}Render(e){if(!(this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;const t=n.device,r=t.gl;t.SetStandardStates(t.RM_ADDITIVE),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(let n=0;n<this.effect.GetPassCount(e);++n){if(this.effect.ApplyPass(e,n),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,n),140))return!1;t.ApplyShadowState(),r.drawElements(r.TRIANGLES,this._indexBuffer.count,r.UNSIGNED_SHORT,0)}return!0}static from(e,t){const r=new l;if(e&&(Object(a.assignIfExists)(r,e,["name","display","hideOnLowQuality"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["effect",e.object],["hideOnLowQuality",e.boolean],["name",e.string],["pickBufferID",e.byte],["planes",e.array]]}}l.Item=c,l.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:4},{usage:"TEXCOORD",usageIndex:7,elements:3}]},"./eve/item/EveSpaceObjectDecal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObjectDecal",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./global/util/index.js"),a=r("./core/mesh/index.js");class o extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.decalEffect=null,this.indexBuffer=[],this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.display=!0,this.groupIndex=-1,this.parentBoneIndex=-1,this.pickable=!0,this.pickEffect=null,this._indexBuffer=null,this._parentGeometry=null,this._perObjectData=s.Tw2PerObjectData.from(o.perObjectData),this._transform=n.mat4.create(),this._transformInv=n.mat4.create(),this._dirty=!0}Initialize(){this.Rebuild(),this.UpdateValues()}GetResources(e=[]){return this.decalEffect&&this.decalEffect.GetResources(e),this.pickEffect&&this.pickEffect.GetResources(e),e}OnValueChanged(){n.mat4.fromRotationTranslationScale(this._transform,this.rotation,this.position,this.scaling),n.mat4.invert(this._transformInv,this._transform)}SetParentGeometry(e){this._parentGeometry=e}Unload(e){this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),e||this.emit("unloaded")}Rebuild(){if(this.Unload(!0),this.indexBuffer){const e=n.device.gl,t=new Uint16Array(this.indexBuffer);this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}this._dirty=!1,this.emit("rebuilt")}GetBatches(e,t,r,i){let a;switch(e){case n.device.RM_DECAL:a=this.decalEffect;break;case n.device.RM_PICKABLE:a=this.pickable?this.pickEffect:null}if(this._dirty&&this.Rebuild(),this.display&&a&&this._parentGeometry&&this._parentGeometry.meshes[0]&&this._indexBuffer&&a.IsGood()&&this._parentGeometry.IsGood()){const o=new s.Tw2ForwardingRenderBatch;if(this._perObjectData.vs.Set("worldMatrix",r.vs.Get("WorldMat")),this.parentBoneIndex>=0){const e=r.vs.Get("JointMat"),t=12*this.parentBoneIndex;if(e[t]||e[t+4]||e[t+8]){const r=this._perObjectData.vs.Get("parentBoneMatrix");r[0]=e[t],r[1]=e[t+4],r[2]=e[t+8],r[3]=0,r[4]=e[t+1],r[5]=e[t+5],r[6]=e[t+9],r[7]=0,r[8]=e[t+2],r[9]=e[t+6],r[10]=e[t+10],r[11]=0,r[12]=e[t+3],r[13]=e[t+7],r[14]=e[t+11],r[15]=1,n.mat4.transpose(r,r)}}n.mat4.invert(this._perObjectData.vs.Get("invWorldMatrix"),this._perObjectData.vs.Get("worldMatrix")),n.mat4.transpose(this._perObjectData.vs.Get("decalMatrix"),this._transform),n.mat4.transpose(this._perObjectData.vs.Get("invDecalMatrix"),this._transformInv),this._perObjectData.ps.Get("displayData")[0]=i||0,this._perObjectData.ps.Set("shipData",r.ps.data),o.perObjectData=this._perObjectData,o.geometryProvider=this,o.renderMode=e,o.effect=a,t.Commit(o)}}Render(e,t){const r=this._parentGeometry.meshes[0],s=r.indexes,i=r.areas[0].start,a=r.areas[0].count,o=r.indexType;n.tw2.SetVariableValue("u_DecalMatrix",this._transform),n.tw2.SetVariableValue("u_InvDecalMatrix",this._transformInv),r.indexes=this._indexBuffer,r.areas[0].start=0,r.areas[0].count=this.indexBuffer.length,r.indexType=n.device.gl.UNSIGNED_SHORT,this._parentGeometry.RenderAreas(0,0,1,e.effect,t),r.indexes=s,r.areas[0].start=i,r.areas[0].count=a,r.indexType=o}static from(e,t){const r=new o;if(e){Object(i.assignIfExists)(r,e,["name","display","pickable","position","rotation","scaling","groupIndex","parentBoneIndex"]),e.indexBuffer&&(r.indexBuffer=new Uint16Array(e.indexBuffer)),e.pickEffect&&(r.pickEffect=a.Tw2Effect.from(e.pickEffect));const t=e.decalEffect||e.effect;t&&(r.decalEffect=a.Tw2Effect.from(t))}return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["decalEffect",e.object],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["indexBuffer",e.indexBuffer]]}}o.perObjectData={vs:[["worldMatrix",16],["invWorldMatrix",16],["decalMatrix",16],["invDecalMatrix",16],["parentBoneMatrix",n.mat4.identity([])]],ps:[["displayData",4],["shipData",12]]}},"./eve/item/EveSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpotlightSetBatch",function(){return u}),r.d(t,"EveSpotlightSetItem",function(){return c}),r.d(t,"EveSpotlightSet",function(){return l});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");class u extends s.Tw2RenderBatch{constructor(...e){super(...e),this.spotlightSet=null}Commit(e){this.spotlightSet.RenderCones(e),this.spotlightSet.RenderGlow(e)}}class c extends i.EveObjectSetItem{constructor(...e){super(...e),this.name="",this.coneColor=n.vec4.create(),this.flareColor=n.vec4.create(),this.spriteColor=n.vec4.create(),this.spriteScale=n.vec3.fromValues(1,1,1),this.transform=n.mat4.create(),this.boosterGainInfluence=0,this.boneIndex=0,this.display=!0,this.groupIndex=-1,this.coneIntensity=0,this.spriteIntensity=0,this.flareIntensity=0}static from(e={}){const t=new this;return n.util.assignIfExists(t,e,["name","display","boosterGainInfluence","boneIndex","groupIndex","coneIntensity","spriteIntensity","flareIntensity","transform","coneColor","spriteColor","flareColor","spriteScale"]),t}static black(e){return[["coneColor",e.color],["flareColor",e.color],["name",e.string],["spriteColor",e.color],["spriteScale",e.vector3],["transform",e.matrix]]}}class l extends i.EveObjectSet{constructor(...e){super(...e),this.name="",this.coneEffect=null,this.glowEffect=null,this.intensity=1,this._coneVertexBuffer=null,this._spriteVertexBuffer=null,this._indexBuffer=null,this._decl=s.Tw2VertexDeclaration.from(l.vertexDeclarations)}get spotlightItems(){return this.items}set spotlightItems(e){this.items=e}GetResources(e=[]){return this.coneEffect&&this.coneEffect.GetResources(e),this.glowEffect&&this.glowEffect.GetResources(e),e}Unload(e){this._coneVertexBuffer&&(n.device.gl.deleteBuffer(this._coneVertexBuffer),this._coneVertexBuffer=null),this._spriteVertexBuffer&&(n.device.gl.deleteBuffer(this._spriteVertexBuffer),this._spriteVertexBuffer=null),this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(){this.Unload(!0),this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=n.device,r=[1,0,2,3],s=new Float32Array(22*(4*e*4));for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let n=0;n<4;++n)for(let i=0;i<4;++i){const a=22*(4*t*4+4*n+i);s[a]=e.coneColor[0]*e.coneIntensity*this.intensity,s[a+1]=e.coneColor[1]*e.coneIntensity*this.intensity,s[a+2]=e.coneColor[2]*e.coneIntensity*this.intensity,s[a+3]=e.coneColor[3],s[a+4]=e.transform[0],s[a+5]=e.transform[4],s[a+6]=e.transform[8],s[a+7]=e.transform[12],s[a+8]=e.transform[1],s[a+9]=e.transform[5],s[a+10]=e.transform[9],s[a+11]=e.transform[13],s[a+12]=e.transform[2],s[a+13]=e.transform[6],s[a+14]=e.transform[10],s[a+15]=e.transform[14],s[a+16]=1,s[a+17]=1,s[a+18]=1,s[a+19]=4*n+r[i],s[a+20]=e.boneIndex,s[a+21]=e.boosterGainInfluence?255:0}}this._coneVertexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._coneVertexBuffer),t.gl.bufferData(t.gl.ARRAY_BUFFER,s,t.gl.STATIC_DRAW),this._coneVertexBuffer.count=4*e*6;const i=new Float32Array(22*(2*e*4)),a=[1,0,2,3];for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let r=0;r<2;++r)for(let n=0;n<4;++n){const s=22*(2*t*4+4*r+n);r%2==0?(i[s]=e.spriteColor[0]*e.spriteIntensity*this.intensity,i[s+1]=e.spriteColor[1]*e.spriteIntensity*this.intensity,i[s+2]=e.spriteColor[2]*e.spriteIntensity*this.intensity,i[s+3]=e.spriteColor[3],i[s+16]=e.spriteScale[0],i[s+17]=1,i[s+18]=1):(i[s]=e.flareColor[0]*e.flareIntensity*this.intensity,i[s+1]=e.flareColor[1]*e.flareIntensity*this.intensity,i[s+2]=e.flareColor[2]*e.flareIntensity*this.intensity,i[s+3]=e.flareColor[3],i[s+16]=1,i[s+17]=e.spriteScale[1],i[s+18]=e.spriteScale[2]),i[s+4]=e.transform[0],i[s+5]=e.transform[4],i[s+6]=e.transform[8],i[s+7]=e.transform[12],i[s+8]=e.transform[1],i[s+9]=e.transform[5],i[s+10]=e.transform[9],i[s+11]=e.transform[13],i[s+12]=e.transform[2],i[s+13]=e.transform[6],i[s+14]=e.transform[10],i[s+15]=e.transform[14],i[s+19]=4*r+a[n],i[s+20]=e.boneIndex,i[s+21]=e.boosterGainInfluence?255:0}}this._spriteVertexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._spriteVertexBuffer),t.gl.bufferData(t.gl.ARRAY_BUFFER,i,t.gl.STATIC_DRAW),this._spriteVertexBuffer.count=2*e*6;const o=new Uint16Array(4*e*6);for(let t=0;t<4*e;++t){const e=6*t,r=4*t;o[e]=r,o[e+1]=r+1,o[e+2]=r+2,o[e+3]=r+2,o[e+4]=r+3,o[e+5]=r}this._indexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.gl.bufferData(t.gl.ELEMENT_ARRAY_BUFFER,o,t.gl.STATIC_DRAW),t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=e,super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count){const e=new u;e.renderMode=n.device.RM_ADDITIVE,e.spotlightSet=this,e.perObjectData=r,t.Commit(e)}}RenderCones(e){return l.Render(this,this.coneEffect,e,this._coneVertexBuffer)}RenderGlow(e){return l.Render(this,this.glowEffect,e,this._spriteVertexBuffer)}static Render(e,t,r,s){if(!(t&&t.IsGood()&&s&&e._indexBuffer))return!1;const i=n.device,a=i.gl;i.SetStandardStates(i.RM_ADDITIVE),a.bindBuffer(a.ARRAY_BUFFER,s),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e._indexBuffer);for(let n=0;n<t.GetPassCount(r);++n){if(t.ApplyPass(r,n),!e._decl.SetDeclaration(i,t.GetPassInput(r,n),88))return!1;i.ApplyShadowState(),i.gl.drawElements(a.TRIANGLES,s.count,a.UNSIGNED_SHORT,0)}return!0}static from(e,t){const r=new l;if(e&&(Object(a.assignIfExists)(r,e,["name","display","intensity"]),e.coneEffect&&(Object(a.isFunction)(e.coneEffect)?r.coneEffect=e.coneEffect:r.coneEffect=o.Tw2Effect.from(e.coneEffect)),e.glowEffect&&(Object(a.isFunction)(e.glowEffect)?r.glowEffect=e.glowEffect:r.glowEffect=o.Tw2Effect.from(e.glowEffect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["coneEffect",e.object],["glowEffect",e.object],["intensity",e.float],["name",e.string],["spotlightItems",e.array]]}}l.Item=c,l.vertexDeclarations=[{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:3},{usage:"TEXCOORD",usageIndex:4,elements:3}]},"./eve/item/EveSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteLineSetBatch",function(){return i}),r.d(t,"EveSpriteLineSetItem",function(){return a}),r.d(t,"EveSpriteLineSet",function(){return o});var n=r("./global/index.js"),s=r("./eve/item/EveObjectSet.js");class i{constructor(){this.spriteLineSet=null}Commit(e){this.spriteLineSet.Render(e)}}class a extends s.EveObjectSetItem{constructor(...e){super(...e),this.blinkPhase=0,this.blinkPhaseShift=0,this.blinkRate=0,this.boneIndex=0,this.colorType=0,this.falloff=0,this.intensity=0,this.isCircle=!1,this.maxScale=0,this.minScale=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.spacing=0,this.display=!0,this.transform=n.mat4.create(),this._dirty=!0}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}}class o extends s.EveObjectSet{Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}}},"./eve/item/EveSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteSetBatch",function(){return u}),r.d(t,"EveSpriteSetItem",function(){return c}),r.d(t,"EveSpriteSet",function(){return l});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");class u extends s.Tw2RenderBatch{constructor(...e){super(...e),this.boosterGlow=!1,this.spriteSet=null,this.world=null,this.boosterGain=0,this.warpIntensity=0}Commit(e){this.boosterGlow?this.spriteSet.RenderBoosterGlow(e,this.world,this.boosterGain,this.warpIntensity):this.spriteSet.Render(e,this.world,this.perObjectData)}}class c extends i.EveObjectSetItem{constructor(...e){super(...e),this.name="",this.blinkPhase=0,this.blinkRate=0,this.boneIndex=0,this.color=n.vec4.create(),this.falloff=0,this.maxScale=0,this.minScale=0,this.position=n.vec3.create(),this.warpColor=n.vec4.create(),this.groupIndex=-1,this.groupName=""}static from(e){const t=new this;return e&&n.util.assignIfExists(t,e,["name","display","blinkRate","blinkPhase","minScale","maxScale","falloff","boneIndex","groupIndex","position","color","warpColor","groupName"]),t}static black(e){return[["blinkPhase",e.float],["blinkRate",e.float],["boneIndex",e.uint],["color",e.color],["falloff",e.float],["maxScale",e.float],["minScale",e.float],["name",e.string],["position",e.vector3],["warpColor",e.color]]}}class l extends i.EveObjectSet{constructor(...e){super(...e),this.name="",this.effect=null,this.intensity=0,this.skinned=!1,this.useQuads=null,this._time=0,this._vertexBuffer=null,this._indexBuffer=null,this._instanceBuffer=null,this._decl=null,this._vdecl=s.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageType:5,elements:1}]),this._worldSpriteScale=1}get sprites(){return this.items}set sprites(e){this.items=e}Initialize(){this.UseQuads(!!this.useQuads),this.Rebuild()}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}UseQuads(e){this.useQuads=e,this._decl=s.Tw2VertexDeclaration.from(e?l.quadVertexDeclarations:l.vertexDeclarations),this._dirty=!0}Update(e,t){this._time+=e,void 0!==this._worldSpriteScale&&this._worldSpriteScale!==t&&(this._worldSpriteScale=t,this._dirty=!0),super.Update(e)}Unload(e){const t=n.device.gl;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._instanceBuffer&&(t.deleteBuffer(this._instanceBuffer),this._instanceBuffer=null),super.Unload(e)}Rebuild(){this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=n.device.gl;if(this.useQuads)return this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,2,2,3,0]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),void(this._instanceBuffer=t.createBuffer());const r=new Float32Array(4*e*13);for(let t=0;t<e;++t){const e=this._visibleItems[t],n=4*t*13;r[n]=0,r[n+13]=1,r[n+26]=2,r[n+39]=3;for(let t=0;t<4;++t){const s=n+13*t;r[s+1]=e.boneIndex,r[s+2]=e.position[0],r[s+3]=e.position[1],r[s+4]=e.position[2],r[s+5]=e.color[0],r[s+6]=e.color[1],r[s+7]=e.color[2],r[s+8]=e.blinkPhase,r[s+9]=e.blinkRate,r[s+10]=e.minScale*this._worldSpriteScale,r[s+11]=e.maxScale*this._worldSpriteScale,r[s+12]=e.falloff}}this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null);const s=new Uint16Array(6*e);for(let t=0;t<e;++t){const e=6*t,r=4*t;s[e]=r,s[e+1]=r+2,s[e+2]=r+1,s[e+3]=r,s[e+4]=r+3,s[e+5]=r+2}this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*e,super.Rebuild()}GetBatches(e,t,r,s){if(this.display&&e===n.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){const e=new u;e.world=s,e.renderMode=n.device.RM_ADDITIVE,e.spriteSet=this,e.perObjectData=r,t.Commit(e)}}GetBoosterGlowBatches(e,t,r,s,i,a){if(this.display&&e===n.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){const e=new u;e.boosterGlow=!0,e.world=s,e.boosterGain=i,e.warpIntensity=a,e.renderMode=n.device.RM_ADDITIVE,e.spriteSet=this,e.perObjectData=r,t.Commit(e)}}Render(e,t,r){if(this.useQuads)return this.RenderQuads(e,t,r);if(!(this.effect&&this.effect.IsGood()&&this._indexBuffer&&this._vertexBuffer))return!1;const s=n.device,i=s.gl;s.SetStandardStates(s.RM_ADDITIVE),i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(let t=0;t<this.effect.GetPassCount(e);++t){if(this.effect.ApplyPass(e,t),!this._decl.SetDeclaration(s,this.effect.GetPassInput(e,t),52))return!1;s.ApplyShadowState(),i.drawElements(i.TRIANGLES,this._indexBuffer.count,i.UNSIGNED_SHORT,0)}return!0}RenderBoosterGlow(e,t,r,s){if(!(this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;const a=n.device,o=a.gl,u=i.EveObjectSet.global.vec3_0,c=this._visibleItems.length,l=new Float32Array(17*c);a.SetStandardStates(a.RM_ADDITIVE);let h=0;for(let e=0;e<c;++e){const i=this._visibleItems[e];n.vec3.transformMat4(u,i.position,t),l[h++]=u[0],l[h++]=u[1],l[h++]=u[2],l[h++]=t[8],l[h++]=i.blinkPhase,l[h++]=t[9],l[h++]=i.minScale*this._worldSpriteScale,l[h++]=i.maxScale*this._worldSpriteScale,l[h++]=t[10],l[h++]=i.color[0],l[h++]=i.color[1],l[h++]=i.color[2],l[h++]=r,l[h++]=i.warpColor[0],l[h++]=i.warpColor[1],l[h++]=i.warpColor[2],l[h++]=s}o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer),o.bufferData(o.ARRAY_BUFFER,l,o.DYNAMIC_DRAW);for(let t=0;t<this.effect.GetPassCount(e);++t){this.effect.ApplyPass(e,t);const r=this.effect.GetPassInput(e,t);o.bindBuffer(o.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(a,r,4),o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer);const n=this._decl.SetPartialDeclaration(a,r,68,0,1);a.ApplyShadowState(),o.drawArraysInstanced(o.TRIANGLES,0,6,c),this._decl.ResetInstanceDivisors(a,n)}return!0}RenderQuads(e,t,r){if(!(this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;const s=n.device,a=s.gl,o=this._visibleItems.length,u=new Float32Array(17*o),c=i.EveObjectSet.global.vec3_0,l=r.vs.Get("JointMat");s.SetStandardStates(s.RM_ADDITIVE);let h=0;for(let e=0;e<o;++e){const r=this._visibleItems[e];if(this.skinned){const e=12*r.boneIndex;c[0]=l[e]*r.position[0]+l[e+1]*r.position[1]+l[e+2]*r.position[2]+l[e+3],c[1]=l[e+4]*r.position[0]+l[e+5]*r.position[1]+l[e+6]*r.position[2]+l[e+7],c[2]=l[e+8]*r.position[0]+l[e+9]*r.position[1]+l[e+10]*r.position[2]+l[e+11],n.vec3.transformMat4(c,c,t)}else n.vec3.transformMat4(c,r.position,t);u[h++]=c[0],u[h++]=c[1],u[h++]=c[2],u[h++]=1,u[h++]=r.blinkPhase,u[h++]=r.blinkRate,u[h++]=r.minScale*this._worldSpriteScale,u[h++]=r.maxScale*this._worldSpriteScale,u[h++]=r.falloff,u[h++]=r.color[0],u[h++]=r.color[1],u[h++]=r.color[2],u[h++]=1,u[h++]=r.warpColor[0],u[h++]=r.warpColor[1],u[h++]=r.warpColor[2],u[h++]=1}a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer),a.bufferData(a.ARRAY_BUFFER,u,a.DYNAMIC_DRAW);for(let t=0;t<this.effect.GetPassCount(e);++t){this.effect.ApplyPass(e,t);const r=this.effect.GetPassInput(e,t);a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(s,r,4),a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer);const n=this._decl.SetPartialDeclaration(s,r,68,0,1);s.ApplyShadowState(),a.drawArraysInstanced(a.TRIANGLES,0,6,o),this._decl.ResetInstanceDivisors(s,n)}return!0}static from(e,t){const r=new l;if(e&&(Object(a.assignIfExists)(r,e,["name","intensity","skinned","useQuads"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["effect",e.object],["name",e.string],["intensity",e.float],["skinned",e.boolean],["sprites",e.array]]}}l.Item=c,l.vertexDeclarations=[{usage:"TEXCOORD",usageIndex:5,elements:2},{usage:"POSITION",usageIndex:0,elements:3},{usage:"COLOR",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:1},{usage:"TEXCOORD",usageIndex:1,elements:1},{usage:"TEXCOORD",usageIndex:2,elements:1},{usage:"TEXCOORD",usageIndex:3,elements:1},{usage:"TEXCOORD",usageIndex:4,elements:1}],l.quadVertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4}]},"./eve/item/EveTrailsSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTrailSetRenderBatch",function(){return i}),r.d(t,"EveTrailsSet",function(){return a});var n=r("./global/index.js"),s=r("./core/batch/index.js");class i extends s.Tw2RenderBatch{constructor(...e){super(...e),this.trailsSet=null}Commit(e){this.boosters.Render(e)}}class a extends n.Tw2BaseClass{constructor(...e){super(...e),this.effect=null,this.geometryResPath="",this.display=!0,this.geometryRes=null}Initialize(){this.geometryResPath&&(this.geometryRes=n.resMan.GetResource(this.geometryResPath,e=>this.OnResPrepared(e)))}OnResPrepared(e){}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),this.geometryRes&&!e.includes(this.geometryRes)&&e.push(this.geometryRes),e}Update(e){}Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}static black(e){return[["effect",e.object],["geometryResPath",e.path]]}}a.__isStaging=4},"./eve/item/EveTurretSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretSetItem",function(){return a}),r.d(t,"EveTurretSet",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js");class a extends i.EveObjectSetItem{constructor(...e){super(...e),this.locatorName=null,this.updateFromLocator=!1,this.canFireWhenHidden=!1,this.position=n.vec3.create(),this.rotation=n.quat.create(),this._bone=null,this._localTransform=n.mat4.create(),this._localRotation=n.quat.create()}OnValueChanged(){this._dirty=!0,this.UpdateTransforms()}UpdateTransforms(){n.mat4.fromRotationTranslation(this._localTransform,this.rotation,this.position),this._bone?(n.mat4.multiply(this._localTransform,this._bone.offsetTransform,this._localTransform),n.mat4.getRotation(this._localRotation,this._localTransform)):n.quat.copy(this._localRotation,this.rotation)}static from(e={}){const t=new this;return n.util.assignIfExists(t,e,["name","display","locatorName","updateFromLocator","position","rotation","canFireWhenHidden"]),t.UpdateValues(),t}}class o extends i.EveObjectSet{constructor(...e){super(...e),this.bottomClipHeight=0,this.boundingSphere=n.vec4.create(),this.chooseRandomLocator=!1,this.cyclingFireGroupCount=0,this.firingEffectResPath="",this.geometryResPath="",this.impactSize=0,this.laserMissBehaviour=!1,this.locatorName="",this.maxCyclingFirePos=0,this.projectileMissBehaviour=!1,this.sysBoneHeight=0,this.sysBonePitch01Factor=0,this.sysBonePitch02Factor=0,this.sysBonePitchFactor=0,this.sysBonePitchMax=0,this.sysBonePitchMin=0,this.sysBonePitchOffset=0,this.turretEffect=null,this.updatePitchPose=!1,this.useDynamicBounds=!1,this.useRandomFiringDelay=!1,this.firingEffect=null,this.geometryResource=null,this.visible={turrets:!0,firingEffects:!0},this._activeAnimation=new s.Tw2AnimationController,this._activeTurret=-1,this._currentCyclingFiresPos=0,this._fireCallback=null,this._fireCallbackPending=!1,this._hasCyclingFiringPos=!1,this._inactiveAnimation=new s.Tw2AnimationController,this._locatorDirty=!0,this._parentTransform=n.mat4.create(),this._perObjectDataActive=s.Tw2PerObjectData.from(o.perObjectData),this._perObjectDataInactive=s.Tw2PerObjectData.from(o.perObjectData),this._state=o.State.IDLE,this._targetPosition=n.vec3.create(),this._recheckTimeLeft=0}get turrets(){return this.items}set turrets(e){this.items=e}Initialize(){this.turretEffect&&""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath,e=>this.OnResPrepared(e)),this._activeAnimation.SetGeometryResource(this.geometryResource),this._inactiveAnimation.SetGeometryResource(this.geometryResource)),""!==this.firingEffectResPath&&n.resMan.GetObject(this.firingEffectResPath,e=>this.firingEffect=e),this.Rebuild()}InitializeFiringEffect(){if(this.firingEffect&&this.geometryResource&&this.geometryResource.models.length){const e=this.geometryResource.models[0];for(let t=0;t<this.firingEffect.GetPerMuzzleEffectCount();++t)this.firingEffect.SetMuzzleBoneID(t,e.FindBoneByName(o.positionBoneSkeletonNames[t]))}}GetResources(e=[]){return this.turretEffect&&this.turretEffect.GetResources(e),this.firingEffect&&this.firingEffect.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnTurretFired(e){this._fireCallback=e}SetTargetPosition(e){n.vec3.copy(this._targetPosition,e)}GetClosestTurret(){let e=-1,t=-2;const r=o.global,s=r.vec3_0,i=r.vec4_0,a=r.vec4_1;for(let r=0;r<this.items.length;++r){const o=this.items[r];if(!o.display&&!o.canFireWhenHidden)continue;a[0]=o._localTransform[12],a[1]=o._localTransform[13],a[2]=o._localTransform[14],a[3]=1,n.vec4.transformMat4(a,a,this._parentTransform),n.vec3.subtract(s,this._targetPosition,a),n.vec3.normalize(s,s),n.vec4.set(i,0,1,0,0),n.vec4.transformMat4(i,i,o._localTransform),n.vec4.transformMat4(i,i,this._parentTransform);const u=n.vec3.dot(i,s);u>t&&(e=this.items.indexOf(o),t=u)}return e}EnterStateDeactive(){this._state!==o.State.INACTIVE&&this._state!==o.State.PACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._activeAnimation.PlayAnimation("Pack",!1,()=>{this._state=o.State.INACTIVE,this._activeAnimation.PlayAnimation("Inactive",!0)}),this._inactiveAnimation.PlayAnimation("Pack",!1,()=>{this._state=o.State.INACTIVE,this._inactiveAnimation.PlayAnimation("Inactive",!0)}),this._state=o.State.PACKING):this._state=o.State.INACTIVE,this._activeTurret=-1,this.DoStopFiring())}EnterStateIdle(){this._state!==o.State.IDLE&&this._state!==o.State.UNPACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===o.State.FIRING?(this._activeAnimation.PlayAnimation("Active",!0),this._inactiveAnimation.PlayAnimation("Active",!0)):(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this._state=o.State.IDLE,this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._state=o.State.IDLE,this._inactiveAnimation.PlayAnimation("Active",!0)})),this._state=o.State.UNPACKING):this._state=o.State.IDLE,this._activeTurret=-1,this.DoStopFiring())}EnterStateFiring(){if(!this.turretEffect||this._state===o.State.FIRING)return this.DoStartFiring(),void(this.turretEffect&&this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}));this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===o.State.INACTIVE?(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)})}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._inactiveAnimation.PlayAnimation("Active",!0)}),this._state=o.State.UNPACKING):(this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Active",!0))}OnResPrepared(e){this.geometryResource=e;const t=s.Tw2VertexElement.from({usage:"TEXCOORD",usageIndex:1,elements:2}),r=this.geometryResource.meshes,n=this._activeAnimation,i=this._inactiveAnimation;for(let e=0;e<r.length;++e)r[e].declaration.elements.push(t),r[e].declaration.RebuildHash();switch(this._state){case o.State.INACTIVE:n.PlayAnimation("Inactive",!0),i.PlayAnimation("Inactive",!0);break;case o.State.IDLE:n.PlayAnimation("Active",!0),i.PlayAnimation("Active",!0);break;case o.State.FIRING:n.PlayAnimation("Fire",!1,()=>n.PlayAnimation("Active",!0)),i.PlayAnimation("Active",!0);break;case o.State.PACKING:this.EnterStateIdle();break;case o.State.UNPACKING:this.EnterStateDeactive()}}FindItemByLocatorName(e){for(let t=0;t<this.items.length;t++)if(this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(e){const t=o.global,r=Array.from(this.items),s=t.mat4_0;for(let t=0;t<e.length;t++){const{name:i,transform:a,bone:o=null}=e[t];let u=this.FindItemByLocatorName(i);u?r.splice(r.indexOf(u),1):u=this.CreateItem({name:i,locatorName:i,updateFromLocator:!0}),u.updateFromLocator&&(u._bone=o,n.mat4.copy(s,a),n.vec3.normalize(s.subarray(0,3),s.subarray(0,3)),n.vec3.normalize(s.subarray(4,7),s.subarray(4,7)),n.vec3.normalize(s.subarray(8,11),s.subarray(8,11)),n.mat4.getRotation(u.rotation,s),n.mat4.getTranslation(u.position,s),u.UpdateValues())}for(let e=0;e<r.length;e++)r[e].locatorName&&(this.RemoveItem(r[e]),e--);this.RebuildItemsFromLocators(),this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}UpdateViewDependentData(e){n.mat4.copy(this._parentTransform,e),this.firingEffect&&this.firingEffect.UpdateViewDependentData(e)}Rebuild(){this.RebuildItems(),this._dirty=!1,super.Rebuild()}Update(e){if(super.Update(e),this.turretEffect&&(this._activeAnimation.Update(e),this._inactiveAnimation.Update(e)),this.firingEffect&&this._visibleItems.length){if(-1!==this._activeTurret){this.firingEffect.isLoopFiring&&this._state===o.State.FIRING&&(this._recheckTimeLeft-=e,this._recheckTimeLeft<=0&&this.DoStartFiring());const t=this.items[this._activeTurret];if(this._activeAnimation.models.length){const e=this._activeAnimation.models[0].bonesByName;for(let r=0;r<this.firingEffect.GetPerMuzzleEffectCount();++r){const s=e[o.positionBoneSkeletonNames[r]].worldTransform,i=this.firingEffect.GetMuzzleTransform(r);n.mat4.multiply(i,t._localTransform,s),n.mat4.multiply(i,this._parentTransform,i)}}else for(let e=0;e<this.firingEffect.GetPerMuzzleEffectCount();++e)n.mat4.multiply(this.firingEffect.GetMuzzleTransform(e),this._parentTransform,t._localTransform);if(this._fireCallbackPending){if(this._fireCallback){const e=[];for(let t=0;t<this.firingEffect.GetPerMuzzleEffectCount();++t)e.push(this.firingEffect.GetMuzzleTransform(t));this._fireCallback(this,e,t)}this._fireCallbackPending=!1}}this.firingEffect.SetEndPosition(this._targetPosition),this.firingEffect.Update(e)}}GetBatches(e,t,r,i){if(this.turretEffect&&this.geometryResource&&this.display&&this._visibleItems.length){if(e===n.device.RM_OPAQUE&&this.visible.turrets){const n=this._inactiveAnimation.GetBoneMatrices(0);if(0!==n.length){this.UpdatePerObjectData(this._perObjectDataInactive.vs,n),this._perObjectDataInactive.ps=r.ps;const i=new s.Tw2ForwardingRenderBatch;if(i.renderMode=e,i.renderActive=!1,i.perObjectData=this._perObjectDataInactive,i.geometryProvider=this,t.Commit(i),this._state===o.State.FIRING){const e=this._activeAnimation.GetBoneMatrices(0);if(0!==e.length){this.UpdatePerObjectData(this._perObjectDataActive.vs,e,!0),this._perObjectDataActive.ps=r.ps;const n=new s.Tw2ForwardingRenderBatch;n.renderActive=!0,n.perObjectData=this._perObjectDataActive,n.geometryProvider=this,t.Commit(n)}}}}this.GetFiringEffectBatches(e,t,r,i)}}GetFiringEffectBatches(e,t,r,n){this.firingEffect&&this.display&&this._visibleItems.length&&this.visible.firingEffects&&!n&&this.firingEffect.GetBatches(e,t,r)}Render(e,t){if(!this.turretEffect||!this.turretEffect.IsGood()||!this._visibleItems.length)return!1;let r=0;const i=function(e){n.device.gl.disableVertexAttribArray(e.location),n.device.gl.vertexAttrib2f(e.location,r,r)};for(let e=0;e<this.geometryResource.meshes.length;++e){this.geometryResource.meshes[e].declaration.FindUsage(s.Tw2VertexElement.Type.TEXCOORD,1).customSetter=i}let a=0;for(;r<this.items.length;++r)if(this.items[r].display){const n=this._state===o.State.FIRING&&r===this._activeTurret;e.renderActive===n&&(this.geometryResource.RenderAreas(0,0,1,this.turretEffect,t),a++)}return!!a}UpdatePerObjectData(e,t,r){n.mat4.transpose(e.Get("shipMatrix"),this._parentTransform);const s=t.length/12;e.Get("turretSetData")[0]=s,e.Get("baseCutoffData")[0]=this.bottomClipHeight;const i=e.Get("turretTranslation"),a=e.Get("turretRotation"),u=e.Get("turretPoseTransAndRot");for(let e=0;e<this._visibleItems.length;++e){const n=this._visibleItems[e];for(let r=0;r<s;++r)u[2*(e*s+r)*4]=t[12*r+3],u[2*(e*s+r)*4+1]=t[12*r+7],u[2*(e*s+r)*4+2]=t[12*r+11],u[2*(e*s+r)*4+3]=1,o.mat3x4toquat(t,r,u,2*(e*s+r)+1);n._bone&&!r&&n.UpdateTransforms(),i[4*e]=n._localTransform[12],i[4*e+1]=n._localTransform[13],i[4*e+2]=n._localTransform[14],i[4*e+3]=1,a[4*e]=n.rotation[0],a[4*e+1]=n.rotation[1],a[4*e+2]=n.rotation[2],a[4*e+3]=n.rotation[3]}}DoStartFiring(){this._hasCyclingFiringPos&&(this._currentCyclingFiresPos=1-this._currentCyclingFiresPos),this.firingEffect&&this.firingEffect.PrepareFiring(0,this._hasCyclingFiringPos?this._currentCyclingFiresPos:-1),this._activeTurret=this.GetClosestTurret(),this._state=o.State.FIRING,this._recheckTimeLeft=2,this._fireCallback&&(this._fireCallbackPending=!0)}DoStopFiring(){this.firingEffect&&this.firingEffect.StopFiring()}static black(e){return[["name",e.string],["bottomClipHeight",e.float],["boundingSphere",e.vector4],["chooseRandomLocator",e.boolean],["cyclingFireGroupCount",e.uint],["firingEffectResPath",e.path],["geometryResPath",e.path],["impactSize",e.float],["laserMissBehaviour",e.boolean],["locatorName",e.string],["maxCyclingFirePos",e.uint],["projectileMissBehaviour",e.boolean],["sysBoneHeight",e.float],["sysBonePitchMax",e.float],["sysBonePitchMin",e.float],["sysBonePitchFactor",e.float],["sysBonePitch01Factor",e.float],["sysBonePitch02Factor",e.float],["sysBonePitchOffset",e.float],["turretEffect",e.object],["updatePitchPose",e.boolean],["useDynamicBounds",e.boolean],["useRandomFiringDelay",e.boolean]]}}o.Item=a,o.State={INACTIVE:0,IDLE:1,FIRING:2,PACKING:2,UNPACKING:4},o.worldNames=["turretWorld0","turretWorld1","turretWorld2"],o.positionBoneSkeletonNames=["Pos_Fire01","Pos_Fire02","Pos_Fire03","Pos_Fire04","Pos_Fire05","Pos_Fire06","Pos_Fire07","Pos_Fire08"],o.perObjectData={vs:[["baseCutoffData",4],["turretSetData",4],["shipMatrix",16],["turretTranslation",96],["turretRotation",96],["turretPoseTransAndRot",576]]},o.mat3x4toquat=function(){let e,t;return function(r,s,i,a){e||(e=n.mat4.create(),t=n.quat.create()),s*=12,a*=4,e[0]=r[s],e[1]=r[s+4],e[2]=r[s+8],e[3]=0,e[4]=r[s+1],e[5]=r[s+5],e[6]=r[s+9],e[7]=0,e[8]=r[s+2],e[9]=r[s+6],e[10]=r[s+10],e[11]=0,e[12]=r[s+3],e[13]=r[s+7],e[14]=r[s+11],e[15]=1,n.mat4.getRotation(t,e),i[a]=t[0],i[a+1]=t[1],i[a+2]=t[2],i[a+3]=t[3]}}(),o.__isStaging=1},"./eve/item/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/item/legacy/index.js");r.d(t,"EveBoosterBatch",function(){return n.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return n.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return n.EveBoosterSet});var s=r("./eve/item/EveBanner.js");r.d(t,"EveBanner",function(){return s.EveBanner});var i=r("./eve/item/EveBoosterSet2.js");r.d(t,"EveBoosterSet2Batch",function(){return i.EveBoosterSet2Batch}),r.d(t,"EveBoosterSet2Item",function(){return i.EveBoosterSet2Item}),r.d(t,"EveBoosterSet2",function(){return i.EveBoosterSet2});var a=r("./eve/item/EveCurveLineSet.js");r.d(t,"EveCurveLineSetItem",function(){return a.EveCurveLineSetItem}),r.d(t,"EveCurveLineSet",function(){return a.EveCurveLineSet});var o=r("./eve/item/EveCustomMask.js");r.d(t,"EveCustomMask",function(){return o.EveCustomMask});var u=r("./eve/item/EveHazeSet.js");r.d(t,"EveHazeSetBatch",function(){return u.EveHazeSetBatch}),r.d(t,"EveHazeSetItem",function(){return u.EveHazeSetItem}),r.d(t,"EveHazeSet",function(){return u.EveHazeSet});var c=r("./eve/item/EveLocator2.js");r.d(t,"EveLocator2",function(){return c.EveLocator2}),r.d(t,"EveLocator",function(){return c.EveLocator});var l=r("./eve/item/EveObjectSet.js");r.d(t,"EveObjectSetItem",function(){return l.EveObjectSetItem}),r.d(t,"EveObjectSet",function(){return l.EveObjectSet});var h=r("./eve/item/EvePlaneSet.js");r.d(t,"EvePlaneSetBatch",function(){return h.EvePlaneSetBatch}),r.d(t,"EvePlaneSetItem",function(){return h.EvePlaneSetItem}),r.d(t,"EvePlaneSet",function(){return h.EvePlaneSet});var d=r("./eve/item/EveSpaceObjectDecal.js");r.d(t,"EveSpaceObjectDecal",function(){return d.EveSpaceObjectDecal});var f=r("./eve/item/EveSpotlightSet.js");r.d(t,"EveSpotlightSetBatch",function(){return f.EveSpotlightSetBatch}),r.d(t,"EveSpotlightSetItem",function(){return f.EveSpotlightSetItem}),r.d(t,"EveSpotlightSet",function(){return f.EveSpotlightSet});var m=r("./eve/item/EveSpriteLineSet.js");r.d(t,"EveSpriteLineSetBatch",function(){return m.EveSpriteLineSetBatch}),r.d(t,"EveSpriteLineSetItem",function(){return m.EveSpriteLineSetItem}),r.d(t,"EveSpriteLineSet",function(){return m.EveSpriteLineSet});var p=r("./eve/item/EveSpriteSet.js");r.d(t,"EveSpriteSetBatch",function(){return p.EveSpriteSetBatch}),r.d(t,"EveSpriteSetItem",function(){return p.EveSpriteSetItem}),r.d(t,"EveSpriteSet",function(){return p.EveSpriteSet});var v=r("./eve/item/EveTrailsSet.js");r.d(t,"EveTrailSetRenderBatch",function(){return v.EveTrailSetRenderBatch}),r.d(t,"EveTrailsSet",function(){return v.EveTrailsSet});var _=r("./eve/item/EveTurretSet.js");r.d(t,"EveTurretSetItem",function(){return _.EveTurretSetItem}),r.d(t,"EveTurretSet",function(){return _.EveTurretSet})},"./eve/item/legacy/EveBoosterSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterBatch",function(){return c}),r.d(t,"EveBoosterSetItem",function(){return l}),r.d(t,"EveBoosterSet",function(){return h});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js"),u=r("./eve/item/EveSpriteSet.js");class c extends s.Tw2RenderBatch{constructor(...e){super(...e),this.boosters=null}Commit(e){this.boosters.Render(e)}}class l extends i.EveObjectSetItem{constructor(...e){super(...e),this.atlas0=0,this.atlas1=0,this.customValues=null,this.locatorName=null,this.seed=7*Math.random(),this.transform=n.mat4.create(),this.updateFromLocator=!1,this.visible={glow:!0,symHalo:!0,halo:!0,trail:!0,customValues:!0},this.wavePhase=Math.random()}GetPosition(e){return n.mat4.getTranslation(e,this.transform)}GetDirection(e){n.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),n.vec3.normalize(e,e);const t=this.GetScale();return t<3&&n.vec3.scale(e,e,t/3),e}GetScale(){const e=this.transform;return Math.max(n.vec3.length([e[0],e[1],e[2]]),n.vec3.length([e[4],e[5],e[6]]))}static from(e){const t=new this;return e&&(n.util.assignIfExists(t.visible,e.visible,["glow","symHalo","halo","trail"]),n.util.assignIfExists(t,e,["name","display","seed","wavePhase","transform","locatorName","updateFromLocator","atlas0","atlas1"])),t}}class h extends i.EveObjectSet{constructor(...e){super(...e),this.alwaysOn=!0,this.effect=null,this.glowColor=n.vec4.create(),this.glows=null,this.glowScale=1,this.haloColor=n.vec4.create(),this.haloScaleX=1,this.haloScaleY=1,this.maxVel=250,this.symHaloScale=1,this.trailColor=n.vec4.create(),this.trailSize=n.vec4.create(),this.warpGlowColor=n.vec4.create(),this.warpHaloColor=n.vec4.create(),this.glowDistance=2.5,this.haloDistance=3.01,this.symHaloDistance=3,this.visible={glows:!0,symHalos:!0,halos:!0,trails:!0},this._parentTransform=n.mat4.create(),this._positions=null,this._decl=s.Tw2VertexDeclaration.from(h.vertexDeclarations),this._perObjectData=s.Tw2PerObjectData.from(h.perObjectData),this._locatorDirty=!0}GetResources(e=[]){return this.effect&&this.effect.GetResources(e),e}RebuildItems(e){const t=this.glows,r=h.global,s=r.vec3_0;t&&t.ClearItems(),this._visibleItems=[];for(let e=0;e<this.items.length;e++){const i=this.items[e];if(i.display){if(this._visibleItems.push(i),t){const e=i.customValues&&i.customValues.display?i.customValues:this,a=i.GetPosition(r.vec3_1),o=i.GetDirection(r.vec3_2),u=i.GetScale();this.visible.glows&&i.visible.glow&&t.CreateItem({name:i.name+"_glow",position:n.vec3.subtract(s,a,n.vec3.scale(s,o,e.glowDistance)),blinkRate:i.seed,blinkPhase:i.seed,minScale:e.glowScale*u,maxScale:e.glowScale*u,color:e.glowColor,warpColor:e.warpGlowColor}),this.visible.symHalos&&i.visible.symHalo&&t.CreateItem({name:i.name+"_symHalo",position:n.vec3.subtract(s,a,n.vec3.scale(s,o,e.symHaloDistance)),blinkRate:i.seed,blinkPhase:i.seed+1,minScale:e.symHaloScale*u,maxScale:e.symHaloScale*u,color:e.haloColor,warpColor:e.warpHaloColor}),this.visible.halos&&i.visible.halo&&t.CreateItem({name:i.name+"_halo",position:n.vec3.subtract(s,a,n.vec3.scale(s,o,e.haloDistance)),blinkRate:i.seed,blinkPhase:i.seed+1,minScale:e.haloScaleX*u,maxScale:e.haloScaleY*u,color:e.haloColor,warpColor:e.warpHaloColor})}i._dirty=!1}}this._dirty=!0}FindItemByLocatorName(e){for(let t=0;t<this.items.length;t++)if(this.items[t].locatorName&&this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(e){const t=Array.from(this.items);for(let r=0;r<e.length;r++){const{name:s,transform:i,atlasIndex0:a,atlasIndex1:o}=e[r];let u=this.FindItemByLocatorName(s);u?(t.splice(t.indexOf(u),1),u.updateFromLocator&&(n.mat4.copy(u.transform,i),u.atlas0=a,u.atlas1=o,u.UpdateValues())):this.CreateItem({name:s,locatorName:s,updateFromLocator:!0,atlas0:a,atlas1:o,transform:i})}for(let e=0;e<t.length;e++)null!==t[e].locatorName&&(this.RemoveItem(t[e]),e--);this._locatorDirty=!1,this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}Update(e,t,r){n.mat4.copy(this._parentTransform,t),super.Update(e),this.glows&&this.glows.Update(e,r)}Unload(e){this._positions&&(n.device.gl.deleteBuffer(this._positions),this._positions=null),this.glows&&this.glows.Unload(e),super.Unload(e)}Rebuild(){this.RebuildItems();const e=this._visibleItems.length;if(this._dirty=!1,!e)return void super.Rebuild();const t=n.device,r=h._box,s=new Float32Array(e*r.length*6*28),i=[0,3,1,3,2,1];let a=0;for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let t=0;t<r.length;++t)for(let n=0;n<i.length;++n)s[a++]=r[t][i[n]][0],s[a++]=r[t][i[n]][1],s[a++]=r[t][i[n]][2],s[a++]=0,s[a++]=0,s.set(e.transform,a),a+=16,s[a++]=0,s[a++]=1,s[a++]=1,s[a++]=1,s[a++]=e.wavePhase,s[a++]=e.atlas0,s[a++]=e.atlas1}this._positions=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._positions),t.gl.bufferData(t.gl.ARRAY_BUFFER,s,t.gl.STATIC_DRAW),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,null),this._positions.count=12*e*3,this.glows&&this.glows.Rebuild(),super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._positions&&this._visibleItems.length){if(this.effect){const e=new c;n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._parentTransform),this._perObjectData.vs.Set("Shipdata",r.vs.Get("Shipdata")),this._perObjectData.ps=r.ps,e.perObjectData=this._perObjectData,e.boosters=this,e.renderMode=n.device.RM_ADDITIVE,t.Commit(e)}this.glows&&this.glows.GetBoosterGlowBatches(e,t,r,this._parentTransform,r.vs.Get("Shipdata")[0],0)}}Render(e){if(!this.effect||!this.effect.IsGood()||!this._positions)return!1;const t=n.device,r=t.gl;r.bindBuffer(r.ARRAY_BUFFER,this._positions);for(let n=0;n<this.effect.GetPassCount(e);++n){if(this.effect.ApplyPass(e,n),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,n),112))return!1;t.ApplyShadowState(),r.drawArrays(r.TRIANGLES,0,this._positions.count)}return!0}static from(e,t){const r=new h;if(e&&(Object(a.assignIfExists)(r,e,["alwaysOn","glowColor","glowScale","haloColor","haloScaleX","haloScaleY","maxVel","symHaloScale","trailColor","trailSize","warpGlowColor","name","display","glowDistance","haloDistance","symHaloDistance","warpHaloColor"]),void 0!==e.warpHalpColor&&(r.warpHaloColor=e.warpHalpColor),e.visible&&Object(a.assignIfExists)(r.visible,e.visible,["glows","symHalos","halos","trails"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.glows&&(r.glows=u.EveSpriteSet.from(e.glows)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}}h.Item=l,h.perObjectData={vs:[["WorldMat",16],["Shipdata",4]]},h.vertexDeclarations=[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:2}],h._box=[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],[[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,-1,-1]],[[-1,-1,0],[-1,1,0],[-1,1,-1],[-1,-1,-1]],[[1,-1,0],[1,-1,-1],[1,1,-1],[1,1,0]],[[-1,-1,0],[-1,-1,-1],[1,-1,-1],[1,-1,0]],[[-1,1,0],[1,1,0],[1,1,-1],[-1,1,-1]]]},"./eve/item/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/item/legacy/EveBoosterSet.js");r.d(t,"EveBoosterBatch",function(){return n.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return n.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return n.EveBoosterSet})},"./eve/object/EveEffectRoot2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot2",function(){return i});var n=r("./global/index.js"),s=r("./eve/object/legacy/EveObject.js");class i extends s.EveObject{constructor(...e){super(...e),this.name="",this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.curveSets=[],this.duration=0,this.dynamicLOD=!1,this.effectChildren=[],this.lights=[],this.observers=[],this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.secondaryLightingEmissiveColor=n.vec4.create(),this.secondaryLightingSphereRadius=0,this.translation=n.vec3.create()}static black(e){return[["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["curveSets",e.array],["duration",e.float],["dynamicLOD",e.boolean],["effectChildren",e.array],["lights",e.array],["name",e.string],["observers",e.array],["rotation",e.vector4],["scaling",e.vector3],["secondaryLightingEmissiveColor",e.color],["secondaryLightingSphereRadius",e.float],["translation",e.vector3]]}}i.__isStaging=4},"./eve/object/EveMissile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMissileWarhead",function(){return a}),r.d(t,"EveMissile",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/object/legacy/EveObject.js");class a extends i.EveObject{constructor(...e){super(...e),this.acceleration=1,this.durationEjectPhase=0,this.impactDuration=.6,this.impactSize=0,this.maxExplosionDistance=40,this.mesh=null,this.particleEmitters=[],this.pathOffsetNoiseScale=0,this.pathOffsetNoiseSpeed=0,this.spriteSet=null,this.startEjectVelocity=0,this.warheadLength=0,this.warheadRadius=0,this._perObjectData=s.Tw2PerObjectData.from(a.perObjectData),this._state=a.State.READY,this._time=0,this._transform=n.mat4.create(),this._velocity=n.vec3.create()}Initialize(){this.spriteSet&&this.spriteSet.UseQuads(!0)}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),this.spriteSet&&this.spriteSet.GetResources(e),e}Launch(e){n.mat4.copy(this._transform,e),this._velocity[0]=e[8]*this.startEjectVelocity,this._velocity[1]=e[9]*this.startEjectVelocity,this._velocity[2]=e[10]*this.startEjectVelocity,this._time=0,this._state=a.State.IN_FLIGHT}UpdateViewDependentData(){this.display&&this._state!==a.State.DEAD&&(n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._transform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._transform))}Update(e,t,r){if(this._state===a.State.IN_FLIGHT){const s=i.EveObject.global,o=n.mat4.getTranslation(s.vec3_0,this._transform),u=s.vec3_1,c=s.vec3_2,l=s.vec3_3;this._time+=e,this._time>this.durationEjectPhase?(n.vec3.subtract(o,this._velocity,t),n.vec3.lerp(o,o,t,1-Math.exp(.9999*-e)),n.mat4.setTranslation(this._transform,o),n.vec3.subtract(u,r,o),n.vec3.length(u)<this.maxExplosionDistance&&(console.log(o,u),this._state=a.State.DEAD)):(n.vec3.scale(u,this._velocity,e),this._transform[12]+=u[0],this._transform[13]+=u[1],this._transform[14]+=u[2]);const h=n.vec3.normalize(u,this._velocity);Math.abs(h[0])<.99?n.vec3.cross(c,h,[1,0,0]):n.vec3.cross(c,h,[0,1,0]),n.vec3.normalize(c,c),n.vec3.cross(l,c,h),this._transform[0]=c[0],this._transform[1]=c[1],this._transform[2]=c[2],this._transform[4]=l[0],this._transform[5]=l[1],this._transform[6]=l[2],this._transform[8]=h[0],this._transform[9]=h[1],this._transform[10]=h[2]}this.spriteSet&&this.spriteSet.Update(e)}GetBatches(e,t){this.display&&this.mesh&&this._state!==a.State.DEAD&&(this.mesh&&this.mesh.GetBatches(e,t,this._perObjectData),this.spriteSet&&this.spriteSet.GetBatches(e,t,this._perObjectData,this._transform))}static black(e){return[["acceleration",e.float],["durationEjectPhase",e.float],["impactDuration",e.float],["impactSize",e.float],["maxExplosionDistance",e.float],["mesh",e.object],["particleEmitters",e.array],["pathOffsetNoiseScale",e.float],["pathOffsetNoiseSpeed",e.float],["spriteSet",e.object],["startEjectVelocity",e.float],["warheadLength",e.float],["warheadRadius",e.float]]}}a.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4]]},a.State={READY:0,IN_FLIGHT:1,DEAD:2},a.__isStaging=2;class o extends i.EveObject{constructor(...e){super(...e),this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.modelTranslationCurve=null,this.warheads=[],this.curveSets=[],this.speed=1,this._position=n.vec3.create(),this._target=n.vec3.create(),this._warheadExplosionCallback=null,this._missileFinishedCallback=null}OnWarheadExplosion(e){this._warheadExplosionCallback=e}OnMissileFinished(e){this._missileFinishedCallback=e}Launch(e,t,r){if(n.vec3.copy(this._position,e),n.vec3.copy(this._target,r),this.warheads.length>t.length)this.warheads.splice(t.length);else for(;this.warheads.length<t.length;)this.warheads.push(this.constructor.CloneWarhead(this.warheads[0]));for(let e=0;e<this.warheads.length;++e)this.warheads[0].Launch(t[e])}GetResources(e=[]){for(let t=0;t<this.warheads.length;++t)this.warheads[t].GetResources(e);return e}UpdateViewDependentData(){for(let e=0;e<this.warheads.length;++e)this.warheads[e].UpdateViewDependentData()}Update(e){const t=n.vec3.subtract(i.EveObject.global.vec3_0,this._target,this._position),r=n.vec3.length(t);r>.1&&(n.vec3.normalize(t,t),n.vec3.scale(t,t,Math.min(e*this.speed,r)),n.vec3.add(this._position,this._position,t));for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);let s=!1;for(let t=0;t<this.warheads.length;++t){const r=this.warheads[t]._state;this.warheads[t].Update(e,this._position,this._target),r!==a.State.DEAD&&this.warheads[t]._state===a.State.DEAD&&(this._warheadExplosionCallback&&this._warheadExplosionCallback(this.warheads[t]),s=!0)}if(s&&this._missileFinishedCallback){for(let e=0;e<this.warheads.length;++e)if(this.warheads[e]._state!==a.State.DEAD)return;this._missileFinishedCallback(this)}}GetBatches(e,t){if(this.display)for(let r=0;r<this.warheads.length;++r)this.warheads[r].GetBatches(e,t)}static CloneWarhead(e){const t=new a;return t.mesh=e.mesh,t.spriteSet=e.spriteSet,t}static black(e){return[["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["modelTranslationCurve",e.object],["name",e.string],["warheads",e.array]]}}o.__isStaging=2},"./eve/object/EveMobile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMobile",function(){return i});var n=r("./global/index.js"),s=r("./eve/object/legacy/EveObject.js");class i extends s.EveObject{constructor(...e){super(...e),this.name="",this.attachments=[],this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.children=[],this.controllers=[],this.curveSets=[],this.locatorSets=[],this.meshLod=null,this.observers=[],this.shadowEffect=null}static black(e){return[["attachments",e.array],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["controllers",e.array],["curveSets",e.array],["locatorSets",e.array],["name",e.string],["meshLod",e.object],["observers",e.array],["shadowEffect",e.object]]}}i.__isStaging=4},"./eve/object/EveRootTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveRootTransform",function(){return i});var n=r("./global/index.js"),s=r("./eve/object/legacy/EveObject.js");class i extends s.EveObject{constructor(...e){super(...e),this.name="",this.boundingSphereRadius=0,this.children=[],this.curveSets=[],this.display=!1,this.mesh=null,this.modifier=0,this.observers=[],this.rotation=n.quat.create(),this.rotationCurve=null,this.scaling=n.vec3.fromValues(1,1,1),this.sortValueMultiplier=0,this.translation=n.vec3.create(),this.translationCurve=null}static black(e){return[["boundingSphereRadius",e.float],["children",e.array],["curveSets",e.array],["display",e.boolean],["mesh",e.object],["modifier",e.uint],["name",e.string],["observers",e.array],["position",e.vector3],["rotation",e.vector4],["rotationCurve",e.object],["scaling",e.vector3],["sortValueMultiplier",e.float],["translation",e.vector3],["translationCurve",e.object],["useDistanceBasedScale",e.boolean]]}}i.__isStaging=4},"./eve/object/EveShip2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip2",function(){return i});var n=r("./global/index.js"),s=r("./eve/object/legacy/EveObject.js");class i extends s.EveObject{constructor(...e){super(...e),this.attachments=[],this.boosters=null,this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.children=[],this.customMasks=[],this.decals=[],this.dna="",this.locatorSets=[],this.locators=[],this.mesh=null,this.rotationCurve=null,this.shadowEffect=null,this.shapeEllipsoidCenter=n.vec3.create(),this.shapeEllipsoidRadius=n.vec3.create(),this.translationCurve=null}static black(e){return[["attachments",e.array],["boosters",e.object],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["customMasks",e.array],["decals",e.array],["dna",e.string],["locatorSets",e.array],["locators",e.array],["mesh",e.object],["name",e.string],["meshLod",e.object],["rotationCurve",e.object],["shadowEffect",e.object],["shapeEllipsoidCenter",e.vector3],["shapeEllipsoidRadius",e.vector3],["translationCurve",e.object]]}}i.__isStaging=4,i.__isShip=!0},"./eve/object/EveStation2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStation2",function(){return i});var n=r("./global/index.js"),s=r("./eve/object/legacy/EveObject.js");class i extends s.EveObject{constructor(...e){super(...e),this.attachments=[],this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.children=[],this.curveSets=[],this.decals=[],this.effectChildren=[],this.lights=[],this.locatorSets=[],this.locators=[],this.mesh=null,this.meshLod=null,this.modelRotationCurve=null,this.modelScale=0,this.observers=[],this.rotationCurve=null,this.shadowEffect=null,this.translationCurve=null}static black(e){return[["attachments",e.array],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["curveSets",e.array],["decals",e.array],["effectChildren",e.array],["lights",e.array],["locatorSets",e.array],["locators",e.array],["name",e.string],["mesh",e.object],["meshLod",e.object],["modelScale",e.float],["observers",e.array],["rotationCurve",e.object],["modelRotationCurve",e.object],["shadowEffect",e.object],["translationCurve",e.object]]}}i.__isStaging=4},"./eve/object/EveTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTransform",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/object/legacy/EveObject.js");class a extends i.EveObject{constructor(...e){super(...e),this.name="",this.children=[],this.curveSets=[],this.display=!0,this.distanceBasedScaleArg1=.2,this.distanceBasedScaleArg2=.63,this.hideOnLowQuality=!1,this.mesh=null,this.modifier=a.Modifier.NONE,this.observers=[],this.overrideBoundsMax=n.vec3.create(),this.overrideBoundsMin=n.vec3.create(),this.particleEmitters=[],this.particleSystems=[],this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.sortValueMultiplier=1,this.translation=n.vec3.create(),this.update=!1,this.useDistanceBasedScale=!1,this.useLodLevel=!1,this.visibilityThreshold=0,this.visible={mesh:!0,children:!0},this.localTransform=n.mat4.create(),this.worldTransform=n.mat4.create(),this._perObjectData=s.Tw2PerObjectData.from(a.perObjectData)}Initialize(){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)}SetTransform(e){n.mat4.getRotation(this.rotation,e),n.mat4.getScaling(this.scaling,e),n.mat4.getTranslation(this.translation,e)}GetResources(e=[]){this.mesh&&this.mesh.GetResources(e);for(let t=0;t<this.children.length;t++)this.children[t].GetResources(e);return e}UpdateViewDependentData(e){const t=n.device,r=i.EveObject.global,s=r.vec3_0,o=r.vec3_1,u=r.vec3_2,c=t.viewInverse;switch(e||(e=r.mat4_ID),n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),n.mat4.getScaling(o,e),this.modifier){case a.Modifier.BILLBOARD:case a.Modifier.SIMPLE_HALO:const i=r.vec3_3;if(n.mat4.multiply(this.worldTransform,e,this.localTransform),n.vec3.multiply(s,this.scaling,o),this.modifier===a.Modifier.SIMPLE_HALO){n.vec3.subtract(u,t.GetEyePosition(u),this.worldTransform.subarray(12)),n.vec3.normalize(i,this.worldTransform.subarray(8)),n.vec3.normalize(u,u);let e=n.vec3.dot(u,i);e<0&&(e=0),n.vec3.scale(s,s,e*e)}this.worldTransform[0]=c[0]*s[0],this.worldTransform[1]=c[1]*s[0],this.worldTransform[2]=c[2]*s[0],this.worldTransform[4]=c[4]*s[1],this.worldTransform[5]=c[5]*s[1],this.worldTransform[6]=c[6]*s[1],this.worldTransform[8]=c[8]*s[2],this.worldTransform[9]=c[9]*s[2],this.worldTransform[10]=c[10]*s[2];break;case a.Modifier.EVE_CAMERA_ROTATION:const l=r.vec3_3;n.vec3.transformMat4(l,this.translation,e),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,l,this.scaling),n.mat4.multiply(this.worldTransform,c,this.localTransform),this.worldTransform[12]=this.localTransform[12],this.worldTransform[13]=this.localTransform[13],this.worldTransform[14]=this.localTransform[14];break;case a.Modifier.EVE_CAMERA_ROTATION_ALIGNED:case a.Modifier.EVE_SIMPLE_HALO:const h=r.vec3_3,d=r.vec3_4,f=r.vec3_5,m=r.vec3_6,p=r.vec3_7,v=r.mat4_0,_=r.mat4_1,E=r.mat4_2;if(n.mat4.translate(this.worldTransform,e,this.translation),n.mat4.transpose(v,e),t.GetEyePosition(u),u[0]-=this.worldTransform[12],u[1]-=this.worldTransform[13],u[2]-=this.worldTransform[14],n.vec3.copy(h,u),n.vec3.transformMat4(h,h,v),n.vec3.divide(h,h,o),n.vec3.normalize(h,h),n.vec3.set(d,t.view[0],t.view[4],t.view[8]),n.vec3.transformMat4(d,d,v),n.vec3.normalize(d,d),n.vec3.cross(f,h,d),n.vec3.normalize(f,f),n.vec3.cross(d,f,h),_[0]=d[0],_[1]=d[1],_[2]=d[2],_[4]=f[0],_[5]=f[1],_[6]=f[2],_[8]=h[0],_[9]=h[1],_[10]=h[2],_[15]=1,n.mat4.fromQuat(E,this.rotation),n.mat4.multiply(_,_,E),this.modifier===a.Modifier.EVE_SIMPLE_HALO){n.vec3.normalize(m,this.worldTransform.subarray(8)),n.vec3.normalize(p,u);let e=-n.vec3.dot(p,m);e<0&&(e=0),n.mat4.multiply(this.worldTransform,this.worldTransform,_),n.mat4.scale(this.worldTransform,this.worldTransform,[this.scaling[0]*e,this.scaling[1]*e,this.scaling[2]*e])}else n.mat4.scale(this.worldTransform,this.worldTransform,this.scaling),n.mat4.multiply(this.worldTransform,this.worldTransform,_);break;case a.Modifier.LOOK_AT_CAMERA:const S=r.mat4_0;n.mat4.multiply(this.worldTransform,e,this.localTransform),n.mat4.lookAt(S,c.subarray(12),this.worldTransform.subarray(12),[0,1,0]),n.mat4.transpose(S,S),n.vec3.multiply(s,this.scaling,o),this.worldTransform[0]=S[0]*s[0],this.worldTransform[1]=S[1]*s[0],this.worldTransform[2]=S[2]*s[0],this.worldTransform[4]=S[4]*s[1],this.worldTransform[5]=S[5]*s[1],this.worldTransform[6]=S[6]*s[1],this.worldTransform[8]=S[8]*s[2],this.worldTransform[9]=S[9]*s[2],this.worldTransform[10]=S[10]*s[2];break;default:n.mat4.multiply(this.worldTransform,e,this.localTransform)}for(let e=0;e<this.children.length;++e)this.children[e].UpdateViewDependentData(this.worldTransform)}Update(e){for(let t=0;t<this.children.length;++t)this.children[t].Update(e);for(let t=0;t<this.particleEmitters.length;++t)this.particleEmitters[t].Update(e);for(let t=0;t<this.particleSystems.length;++t)this.particleSystems[t].Update(e);for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e)}GetBatches(e,t,r){if(this.display&&(this.visible.mesh&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("World"),this.worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("WorldInverseTranspose"),this.worldTransform),r&&(this._perObjectData.vs=r.vs,this._perObjectData.ps=r.ps),this.mesh.GetBatches(e,t,this._perObjectData)),this.visible.children))for(let n=0;n<this.children.length;++n)this.children[n].GetBatches(e,t,r)}static Multiply3x3(e,t,r){r||(r=t);let n=t[0],s=t[1];return t=t[2],r[0]=e[0]*n+e[4]*s+e[8]*t,r[1]=e[1]*n+e[5]*s+e[9]*t,r[2]=e[2]*n+e[6]*s+e[10]*t,r}static black(e){return[["children",e.array],["curveSets",e.array],["display",e.boolean],["distanceBasedScaleArg1",e.float],["distanceBasedScaleArg2",e.float],["hideOnLowQuality",e.boolean],["name",e.string],["mesh",e.object],["meshLod",e.object],["modifier",e.uint],["observers",e.array],["overrideBoundsMax",e.vector3],["overrideBoundsMin",e.vector3],["particleEmitters",e.array],["particleSystems",e.array],["rotation",e.vector4],["scaling",e.vector3],["sortValueMultiplier",e.float],["translation",e.vector3],["update",e.boolean],["useDistanceBasedScale",e.boolean],["useLodLevel",e.boolean],["visibilityThreshold",e.float]]}}a.perObjectData={ffe:[["World",16],["WorldInverseTranspose",16]]},a.Modifier={NONE:0,BILLBOARD:1,TRANSLATE_WITH_CAMERA:2,LOOK_AT_CAMERA:3,SIMPLE_HALO:4,EVE_CAMERA_ROTATION_ALIGNED:100,EVE_BOOSTER:101,EVE_SIMPLE_HALO:102,EVE_CAMERA_ROTATION:103},a.__isStaging=1},"./eve/object/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/legacy/index.js");r.d(t,"EveEffectRoot",function(){return n.EveEffectRoot}),r.d(t,"EvePlanet",function(){return n.EvePlanet}),r.d(t,"EveShip",function(){return n.EveShip}),r.d(t,"EveSpaceObject",function(){return n.EveSpaceObject}),r.d(t,"EveStation",function(){return n.EveStation});var s=r("./eve/object/EveEffectRoot2.js");r.d(t,"EveEffectRoot2",function(){return s.EveEffectRoot2});var i=r("./eve/object/EveMissile.js");r.d(t,"EveMissileWarhead",function(){return i.EveMissileWarhead}),r.d(t,"EveMissile",function(){return i.EveMissile});var a=r("./eve/object/EveMobile.js");r.d(t,"EveMobile",function(){return a.EveMobile});var o=r("./eve/object/EveRootTransform.js");r.d(t,"EveRootTransform",function(){return o.EveRootTransform});var u=r("./eve/object/EveShip2.js");r.d(t,"EveShip2",function(){return u.EveShip2});var c=r("./eve/object/EveStation2.js");r.d(t,"EveStation2",function(){return c.EveStation2});var l=r("./eve/object/EveTransform.js");r.d(t,"EveTransform",function(){return l.EveTransform})},"./eve/object/legacy/EveEffectRoot.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/object/legacy/EveObject.js"),a=r("./eve/object/legacy/EveSpaceObject.js");class o extends i.EveObject{constructor(...e){super(...e),this.curveSets=[],this.effectChildren=[],this.duration=0,this.scaling=n.vec3.fromValues(1,1,1),this.rotation=n.quat.create(),this.translation=n.vec3.create(),this.localTransform=n.mat4.create(),this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this._worldTransform=n.mat4.create(),this._perObjectData=s.Tw2PerObjectData.from(a.EveSpaceObject.perObjectData)}SetTransform(e){n.mat4.getRotation(this.rotation,e),n.mat4.getScaling(this.scaling,e),n.mat4.getTranslation(this.translation,e)}GetResources(e=[]){for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].GetResources(e);return e}Start(){for(let e=0;e<this.curveSets.length;++e)this.curveSets[e].Play()}Stop(){for(let e=0;e<this.curveSets.length;++e)this.curveSets[e].Stop()}UpdateViewDependentData(e){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),e?n.mat4.multiply(this._worldTransform,e,this.localTransform):n.mat4.copy(this._worldTransform,this.localTransform)}Update(e){for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].Update(e,this._worldTransform)}GetBatches(e,t){if(this.display)for(let r=0;r<this.effectChildren.length;++r)this.effectChildren[r].GetBatches(e,t,this._perObjectData)}}},"./eve/object/legacy/EveObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObject",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.display=!0}GetResources(e=[]){throw new s.ErrAbstractClassMethod}Update(e){throw new s.ErrAbstractClassMethod}GetBatches(e,t){throw new s.ErrAbstractClassMethod}}i.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec3_3:n.vec3.create(),vec3_4:n.vec3.create(),vec3_5:n.vec3.create(),vec3_6:n.vec3.create(),vec3_7:n.vec3.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create(),mat4_2:n.mat4.create(),mat4_ID:n.mat4.create()}},"./eve/object/legacy/EvePlanet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlanet",function(){return o});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/object/EveTransform.js"),a=r("./eve/object/legacy/EveObject.js");class o extends a.EveObject{constructor(...e){super(...e),this.highDetail=new i.EveTransform,this.effectHeight=new s.Tw2Effect,this.heightMap=new s.Tw2RenderTarget,this.zOnlyModel=null,this.itemID=0,this.heightMapResPath1="",this.heightMapResPath2="",this.heightDirty=!1,this.lockedResources=[],this.watchedResources=[],this._lod=3,this._useLOD=!0,this._atmosphere=null,this._planet=null}Create(e={},t){const{name:r="",itemID:s=0,resPath:i,atmospherePath:a,heightMap1:u,heightMap2:c}=e;this.name=r,this.itemID=s,this.heightMapResPath1=u,this.heightMapResPath2=c,this.highDetail.children=[],this.heightDirty=!0;let l=1;function h(){--l<1&&t&&t()}i&&l++,a&&l++,i&&n.resMan.GetObject(i,e=>{this._planet=e,o.MeshLoaded(this,e),h()}),a&&n.resMan.GetObject(a,e=>{this._atmosphere=e,this.highDetail.children.push(e),h()}),n.resMan.GetObject("res:/dx9/model/worldobject/planet/planetzonly.red",e=>{this.zOnlyModel=e,h()})}ResetLod(){this._lod=3}UpdateLod(e){const{scaling:t,translation:r}=this.highDetail;this._lod=this._useLOD&&e.IsSphereVisible(r,t[0])?3:0}UseLOD(e){this._useLOD=e}SetTransform(e){this.highDetail.SetTransform(e)}GetResources(e=[]){return this.highDetail&&this.highDetail.GetResources(e),this.effectHeight&&this.effectHeight.GetResources(e),e}GetPlanetResources(e,t,r){if(!t.includes(e))if(t.push(e),e&&e.constructor.__isResource)r.push(e);else for(let s in e)e.hasOwnProperty(s)&&n.util.isObjectLike(e[s])&&this.GetPlanetResources(e[s],t,r)}UpdateViewDependentData(e){this.highDetail.UpdateViewDependentData(e),this.zOnlyModel&&(this.zOnlyModel.translation=this.highDetail.translation,this.zOnlyModel.scaling=this.highDetail.scaling,this.zOnlyModel.UpdateViewDependentData(e))}Update(e){this.display&&this._useLOD&&this.highDetail.Update(e)}CreateHeightMap(){this.heightMap.Set(),n.device.SetStandardStates(n.device.RM_FULLSCREEN),n.device.gl.clearColor(0,0,0,0),n.device.gl.clear(n.device.gl.COLOR_BUFFER_BIT),n.device.RenderFullScreenQuad(this.effectHeight),this.heightMap.Unset()}GetBatches(e,t){if(this.display&&this.heightDirty&&this.watchedResources.length&&""!==this.heightMapResPath1){for(let e=0;e<this.watchedResources.length;++e)if(this.watchedResources[e]&&!this.watchedResources[e].IsGood())return;this.watchedResources=[],this.CreateHeightMap(),this.heightDirty=!1;for(let e=0;e<this.lockedResources.length;++e)this.lockedResources[e]&&this.lockedResources[e].doNotPurge--;const e=this.highDetail.children[0].mesh;let t=null;e.transparentAreas.length?t=e.transparentAreas[0].effect:e.opaqueAreas.length&&(t=e.opaqueAreas[0].effect),t&&(t.parameters.HeightMap.textureRes=this.heightMap.texture)}this.display&&this._lod&&this.highDetail.GetBatches(e,t)}GetZOnlyBatches(e,t){this.display&&this._lod&&this.zOnlyModel&&this.zOnlyModel.GetBatches(e,t)}static MeshLoaded(e,t){e.highDetail.children.unshift(t),e.lockedResources.splice(0),e.GetPlanetResources(e.highDetail,[],e.lockedResources);let r,n=e.highDetail.children[0].mesh,i=null;r=(r=n.transparentAreas.length?(i=n.transparentAreas[0].effect).effectFilePath:n.opaqueAreas.length?(i=n.opaqueAreas[0].effect).effectFilePath:"res:/Graphics/Effect/Managed/Space/Planet/EarthlikePlanet.fx").replace(".fx","BlitHeight.fx"),e.watchedResources.splice(0);for(let t in i.parameters)i.parameters.hasOwnProperty(t)&&(e.effectHeight.parameters[t]=i.parameters[t],"textureRes"in i.parameters[t]&&e.watchedResources.push(i.parameters[t].textureRes));for(let t=0;t<e.highDetail.children[0].children.length;++t)if(n=e.highDetail.children[0].children[t].mesh){if(i=null,n.transparentAreas.length)i=n.transparentAreas[0].effect;else{if(!n.opaqueAreas.length)continue;i=n.opaqueAreas[0].effect}for(let t in i.parameters)i.parameters.hasOwnProperty(t)&&(e.effectHeight.parameters[t]=i.parameters[t],"textureRes"in i.parameters[t]&&e.watchedResources.push(i.parameters[t].textureRes))}const a=new s.Tw2TextureParameter("NormalHeight1",e.heightMapResPath1);a.Initialize(),e.watchedResources.push(a.textureRes),e.lockedResources.push(a.textureRes),e.effectHeight.parameters.NormalHeight1=a;const o=new s.Tw2TextureParameter("NormalHeight2",e.heightMapResPath2);o.Initialize(),e.watchedResources.push(o.textureRes),e.lockedResources.push(o.textureRes),e.effectHeight.parameters.NormalHeight2=o,e.effectHeight.parameters.Random=new s.Tw2FloatParameter("Random",e.itemID%100),e.effectHeight.parameters.TargetTextureHeight=new s.Tw2FloatParameter("TargetTextureHeight",1024),e.effectHeight.effectFilePath=r,e.effectHeight.Initialize(),e.heightDirty=!0,e.heightMap.Create(2048,1024,!1),e.watchedResources.push(e.effectHeight.effectRes);for(let t=0;t<e.lockedResources.length;++t)e.lockedResources[t]&&(e.lockedResources[t].doNotPurge++,e.lockedResources[t].IsPurged()&&e.lockedResources[t].Reload())}}o.__isPlanet=!0},"./eve/object/legacy/EveShip.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip",function(){return i});var n=r("./eve/object/legacy/EveSpaceObject.js"),s=r("./global/util/index.js");class i extends n.EveSpaceObject{constructor(...e){super(...e),this.boosters=null,this.turretSets=[],this.boosterGain=1}Initialize(){super.Initialize(),this.boosters&&this.RebuildBoosterSet()}GetResources(e=[]){super.GetResources(e);for(let t=0;t<this.turretSets.length;t++)this.turretSets[t].GetResources(e);return this.boosters&&this.boosters.GetResources(e),e}RebuildBoosterSet(){this.boosters&&this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster"))}RebuildTurretPositions(){for(let e=0;e<this.turretSets.length;e++)this.RebuildTurretSet(e)}RebuildTurretSet(e){if(Object(s.isNumber)(e)||(e=this.turretSets.indexOf(e)),void 0===this.turretSets[e])return;const t=this.turretSets[e],r=t.locatorName,n=this.GetLocatorCount(r),i=[];for(let e=0;e<n;++e){const t=r+String.fromCharCode("a".charCodeAt(0)+e),n=this.FindLocatorByName(t);n&&(n.FindBone(this.animation),i.push(n))}t.UpdateItemsFromLocators(i)}UpdateViewDependentData(e,t){super.UpdateViewDependentData(e,t);for(let e=0;e<this.turretSets.length;++e)this.turretSets[e].UpdateViewDependentData(this._worldTransform)}Update(e){super.Update(e),this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.Update(e,this._worldTransform,this._worldSpriteScale));for(let t=0;t<this.turretSets.length;++t)this.turretSets[t]._locatorDirty&&this.RebuildTurretSet(t),this.turretSets[t].Update(e)}GetBatches(e,t){if(this.display&&(super.GetBatches(e,t),this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this._perObjectData.ps.Get("Shipdata")[0]=this.boosterGain,this.boosters&&this.visible.boosters&&this.boosters.GetBatches(e,t,this._perObjectData),this.visible.turretSets))if(this.lod>1)for(let r=0;r<this.turretSets.length;++r)this.turretSets[r].GetBatches(e,t,this._perObjectData,this.visible.firingEffects);else if(this.visible.firingEffects)for(let r=0;r<this.turretSets.length;++r)this.turretSets[r].firingEffect&&this.turretSets[r].firingEffect.GetBatches(e,t,this._perObjectData)}}i.__isShip=!0},"./eve/object/legacy/EveSpaceObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObject",function(){return a}),r.d(t,"EveStation",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./eve/object/legacy/EveObject.js");r("./eve/item/index.js");class a extends i.EveObject{constructor(...e){super(...e),this.visible={mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0},this.mesh=null,this.animation=new s.Tw2AnimationController,this.locators=[],this.spriteSets=[],this.turretSets=[],this.decals=[],this.spotlightSets=[],this.planeSets=[],this.curveSets=[],this.lineSets=[],this.overlayEffects=[],this.children=[],this.effectChildren=[],this.customMasks=[],this.lod=3,this.killCount=0,this.transform=n.mat4.create(),this.boundingSphereCenter=n.vec3.create(),this.boundingSphereRadius=0,this.shapeEllipsoidRadius=n.vec3.create(),this.shapeEllipsoidCenter=n.vec3.create(),this._worldSpriteScale=1,this._worldTransform=n.mat4.create(),this._perObjectData=s.Tw2PerObjectData.from(a.perObjectData)}Initialize(){if(this.mesh){this.animation.SetGeometryResource(this.mesh.geometryResource);for(let e=0;e<this.decals.length;++e)this.decals[e].SetParentGeometry(this.mesh.geometryResource)}}SetTransform(e,t){t?n.mat4.multiply(this.transform,e,t):n.mat4.copy(this.transform,e)}GetResources(e=[]){return this.mesh&&this.mesh.GetResources(e),this.animation&&this.animation.GetResources(e),n.util.perArrayChild(this.spriteSets,"GetResources",e),n.util.perArrayChild(this.turretSets,"GetResources",e),n.util.perArrayChild(this.decals,"GetResources",e),n.util.perArrayChild(this.spotlightSets,"GetResources",e),n.util.perArrayChild(this.planeSets,"GetResources",e),n.util.perArrayChild(this.lineSets,"GetResources",e),n.util.perArrayChild(this.overlayEffects,"GetResources",e),n.util.perArrayChild(this.effectChildren,"GetResources",e),n.util.perArrayChild(this.children,"GetResources",e),e}ResetLod(){this.lod=3}UpdateLod(e){if(this._useLOD){const t=n.vec3.transformMat4(a.global.vec3_0,this.boundingSphereCenter,this._worldTransform);if(e.IsSphereVisible(t,this.boundingSphereRadius)){const r=e.GetPixelSizeAcross(t,this.boundingSphereRadius);r<=a.LOD_THRESHOLD_NONE?this.lod=0:r<=a.LOD_THRESHOLD_LOW?this.lod=1:r<=a.LOD_THRESHOLD_MEDIUM?this.lod=2:this.lod=3}else this.lod=0}else this.lod=3;this.mesh&&"SetQuality"in this.mesh&&this.mesh.SetQuality(3-this.lod)}UseLOD(e){this._useLOD=e}FindTurretPrefixes(e=[]){function t(t){if(!t)return;const r=t[0].substring(0,t[0].length-1);e.includes(r)||e.push(r)}for(let e=0;e<this.locators.length;e++){const r=this.locators[e].name;t(/^locator_turret_([0-9]+)[a-z]$/i.exec(r)),t(/^locator_xl_([0-9]+)[a-z]$/i.exec(r))}return e.sort(),e}GetLocatorCount(e){return this.FindLocatorsByPrefix(e).length}FindLocatorJointByName(e){const t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}FindLocatorTransformByName(e){const t=this.FindLocatorByName(e);return t?t.transform:null}HasLocatorPrefix(e){for(let t=0;t<this.locators.length;t++)if(this.locators[t].name.substring(0,e.length)===e)return!0;return!1}FindLocatorBoneByName(e){const t=this.animation.FindModelForMesh(0);if(t)for(let r=0;r<t.bones.length;++r)if(t.bones[r].boneRes.name===e)return t.bones[r];return null}FindLocatorByName(e){for(let t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}FindLocatorsByPrefix(e){const t=[];for(let r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}UpdateViewDependentData(e,t){e?n.mat4.multiply(this._worldTransform,e,this.transform):n.mat4.copy(this._worldTransform,this.transform),this._worldSpriteScale=n.mat4.maxScaleOnAxis(this._worldTransform);for(let e=0;e<this.children.length;++e)this.children[e].UpdateViewDependentData(this._worldTransform);n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform);const r=this._perObjectData.vs.Get("EllipsoidCenter"),s=this._perObjectData.vs.Get("EllipsoidRadii");if(this.shapeEllipsoidRadius[0]>0)r[0]=this.shapeEllipsoidCenter[0],r[1]=this.shapeEllipsoidCenter[1],r[2]=this.shapeEllipsoidCenter[2],s[0]=this.shapeEllipsoidRadius[0],s[1]=this.shapeEllipsoidRadius[1],s[2]=this.shapeEllipsoidRadius[2];else if(this.mesh&&this.mesh.IsGood()){const{maxBounds:e,minBounds:t}=this.mesh.geometryResource;n.vec3.subtract(r,e,t),n.vec3.scale(r,r,.8660254035),n.vec3.add(s,e,t),n.vec3.scale(s,s,.5)}for(let e=0;e<this.customMasks.length;++e)this.customMasks[e].UpdatePerObjectData(this._worldTransform,this._perObjectData,e,this.visible.customMasks);this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(0));for(let e=0;e<this.lineSets.length;++e)this.lineSets[e].UpdateViewDependentData(this._worldTransform)}Update(e){if(this.lod>0){for(let t=0;t<this.spriteSets.length;++t)this.spriteSets[t].Update(e,this._worldSpriteScale);for(let t=0;t<this.planeSets.length;t++)this.planeSets[t].Update(e);for(let t=0;t<this.spotlightSets.length;t++)this.spotlightSets[t].Update(e);for(let t=0;t<this.children.length;++t)this.children[t].Update(e);for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].Update(e,this._worldTransform,this.lod);for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(let t=0;t<this.overlayEffects.length;++t)this.overlayEffects[t].Update(e);for(let t=0;t<this.lineSets.length;t++)this.lineSets[t].Update(e);this.animation.Update(e)}}GetBatches(e,t){if(this.display){const r=this.visible;if(r.mesh&&this.mesh&&this.lod>0&&this.mesh.GetBatches(e,t,this._perObjectData),this.lod>1){if(r.spriteSets)for(let r=0;r<this.spriteSets.length;r++)this.spriteSets[r].GetBatches(e,t,this._perObjectData,this._worldTransform);if(r.spotlightSets)for(let r=0;r<this.spotlightSets.length;r++)this.spotlightSets[r].GetBatches(e,t,this._perObjectData);if(r.planeSets)for(let r=0;r<this.planeSets.length;r++)this.planeSets[r].GetBatches(e,t,this._perObjectData);if(r.decals)for(let n=0;n<this.decals.length;n++)this.decals[n].GetBatches(e,t,this._perObjectData,r.killmarks?this.killCount:0);if(r.lineSets)for(let r=0;r<this.lineSets.length;r++)this.lineSets[r].GetBatches(e,t);if(r.overlayEffects&&this.mesh&&this.mesh.IsGood())for(let r=0;r<this.overlayEffects.length;r++)this.overlayEffects[r].GetBatches(e,t,this._perObjectData,this.mesh)}if(r.children)for(let r=0;r<this.children.length;r++)this.children[r].GetBatches(e,t,this._perObjectData);if(r.effectChildren)for(let r=0;r<this.effectChildren.length;r++)this.effectChildren[r]._parentLod=this.lod,this.effectChildren[r].GetBatches(e,t,this._perObjectData)}}RenderDebugInfo(e){this.animation.RenderDebugInfo(e)}}a.LOD_THRESHOLD_NONE=100,a.LOD_THRESHOLD_LOW=200,a.LOD_THRESHOLD_MEDIUM=500,a.perObjectData={vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",n.mat4.identity([])],["CustomMaskMatrix1",n.mat4.identity([])],["CustomMaskData0",[1,0,0,0]],["CustomMaskData1",[1,0,0,0]],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4]]}},"./eve/object/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/legacy/EveEffectRoot.js");r.d(t,"EveEffectRoot",function(){return n.EveEffectRoot});var s=r("./eve/object/legacy/EvePlanet.js");r.d(t,"EvePlanet",function(){return s.EvePlanet});var i=r("./eve/object/legacy/EveShip.js");r.d(t,"EveShip",function(){return i.EveShip});var a=r("./eve/object/legacy/EveSpaceObject.js");r.d(t,"EveSpaceObject",function(){return a.EveSpaceObject}),r.d(t,"EveStation",function(){return a.EveStation})},"./eve/particle/EveParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDirectForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.force=n.vec3.create()}static black(e){return[["force",e.vector3]]}}i.__isStaging=4},"./eve/particle/EveParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDragForce",function(){return s});var n=r("./particle/force/Tw2ParticleForce.js");class s extends n.Tw2ParticleForce{constructor(...e){super(...e),this.drag=0}static black(e){return[["drag",e.float]]}}s.__isStaging=4},"./eve/particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/particle/EveParticleDirectForce.js");r.d(t,"EveParticleDirectForce",function(){return n.EveParticleDirectForce});var s=r("./eve/particle/EveParticleDragForce.js");r.d(t,"EveParticleDragForce",function(){return s.EveParticleDragForce})},"./eve/pi/EveConnector.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveConnector",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.animationColor=n.vec4.create(),this.animationScale=0,this.animationSpeed=0,this.color=n.vec4.create(),this.destObject=null,this.destPosition=n.vec3.create(),this.isAnimated=!1,this.lineWidth=0,this.sourceObject=null,this.type=0}static black(e){return[["animationColor",e.color],["animationScale",e.float],["animationSpeed",e.float],["color",e.color],["destObject",e.object],["destPosition",e.vector3],["isAnimated",e.boolean],["lineWidth",e.float],["sourceObject",e.object],["sourcePosition",e.vector3],["type",e.uint]]}}s.__isStaging=4},"./eve/pi/EveLocalPositionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocalPositionCurve",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.value=n.vec3.create()}static black(e){return[["value",e.vector3]]}}s.__isStaging=3},"./eve/pi/EveSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpherePin",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.centerNormal=n.vec3.create(),this.color=n.vec4.create(),this.curveSets=[],this.enablePicking=!1,this.geometryResPath="",this.pinColor=n.vec4.create(),this.pinEffect=null,this.pinMaxRadius=0,this.pinRadius=0,this.pinRotation=0,this.sortValueMultiplier=0}static black(e){return[["centerNormal",e.vector3],["color",e.color],["curveSets",e.array],["enablePicking",e.boolean],["geometryResPath",e.path],["name",e.string],["pinColor",e.color],["pinEffect",e.object],["pinMaxRadius",e.float],["pinRadius",e.float],["pinRotation",e.float],["sortValueMultiplier",e.float]]}}s.__isStaging=4},"./eve/pi/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/pi/EveConnector.js");r.d(t,"EveConnector",function(){return n.EveConnector});var s=r("./eve/pi/EveLocalPositionCurve.js");r.d(t,"EveLocalPositionCurve",function(){return s.EveLocalPositionCurve});var i=r("./eve/pi/EveSpherePin.js");r.d(t,"EveSpherePin",function(){return i.EveSpherePin})},"./eve/ui/EveTacticalOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTacticalOverlay",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.anchorEffect=null,this.arcSegmentMultiplier=0,this.connectorEffect=null,this.segmentsHigh=0,this.segmentsLow=0,this.segmentsMedium=0,this.targetMaxSegments=0,this.velocityEffect=null}static black(e){return[["anchorEffect",e.object],["arcSegmentMultiplier",e.float],["connectorEffect",e.object],["segmentsLow",e.float],["segmentsMedium",e.float],["segmentsHigh",e.float],["targetMaxSegments",e.float],["velocityEffect",e.object]]}}s.__isStaging=4},"./eve/ui/EveUiObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveUiObject",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.boundingSphereRadius=0,this.mesh=null,this.modelScale=0}static black(e){return[["boundingSphereRadius",e.float],["name",e.string],["mesh",e.object],["modelScale",e.float]]}}s.__isStaging=4},"./eve/ui/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/ui/EveTacticalOverlay.js");r.d(t,"EveTacticalOverlay",function(){return n.EveTacticalOverlay});var s=r("./eve/ui/EveUiObject.js");r.d(t,"EveUiObject",function(){return s.EveUiObject})},"./global/Tw2Library.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tw2",function(){return S});var n=r("./global/class/index.js"),s=r("./global/engine/index.js"),i=r("./global/util/index.js"),a=r("./core/reader/Tw2BlackPropertyReaders.js"),o=r("./global/math/index.js"),u=r("./global/engine/Tw2Constant.js"),c=r("./core/Tw2Error.js");function l(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function h(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var i=e.apply(t,r);function a(e){l(i,n,s,a,o,"next",e)}function o(e){l(i,n,s,a,o,"throw",e)}a(void 0)})}}let d=0;class f extends n.Tw2EventEmitter{get gl(){return this.device.gl}get now(){return this.device.now}get frame(){return this.device.frameCounter}get canvas(){return this.device.canvas}get dt(){return this.device.dt}get width(){return this.device.viewportWidth}get height(){return this.device.viewportHeight}get aspect(){return this.device.viewportAspect}constructor(){if(super(),this.math=o,this.util=i,this.consts=u,this.logger=new s.Tw2Logger(this),this.resMan=new s.Tw2ResMan(this),this.device=new s.Tw2Device(this),this._store={black:new Map,variable:new Map,extension:new Map,class:new Map,path:new Map,dynamicPath:new Map,type:new Map},this._debug=!1,++d>1)throw new c.ErrSingletonInstantiation({class:"Tw2Library"});let e;Object.defineProperty(this,"eveSof",{get:()=>{if(!e){const t=this.GetClass("EveSOF");e=new t(this)}return e}}),n.Tw2EventEmitter.defaultLogger=this}SetDebug(e){this._debug!==e&&(this._debug=e,this._store.class.forEach(t=>{"DEBUG_ENABLED"in t&&(t.DEBUG_ENABLED=e)}),this.logger.Debug(e),this.emit("debug_mode",e),this.Log("warn","Debugging ".concat(e?"enabled":"disabled")))}SetLibrary(e){"tw2"in e&&Reflect.defineProperty(e,"tw2",{value:this,writable:!1,configurable:!1})}Initialize(e={}){if(this.Register(e),this.device.CreateDevice(e.canvas,e.glParams),e.render){this.on("tick",e.render);const t=()=>{this.RequestAnimationFrame(t),this.StartFrame(),this.EndFrame()};this.RequestAnimationFrame(t)}}StartFrame(){this.device.StartFrame(),this.resMan.Tick(this.device)}EndFrame(){this.emit("tick",this.device.dt),this.device.EndFrame()}RequestAnimationFrame(e){return this.device.RequestAnimationFrame(e)}CancelAnimationFrame(e){return this.device.CancelAnimationFrame(e)}Log(e,t,r="Library"){return this.logger.Log(e,t,r)}Register(e={}){e.uuid&&Object(i.enableUUID)(e.uuid),e.logger&&this.logger.Register(e.logger),e.debug&&this.SetDebug(!0),e.resMan&&this.resMan.Register(e.resMan),e.device&&this.device.Register(e.device);const{store:t}=e;if(t){t.type&&E(this,"type",t.type);for(const e in t)t.hasOwnProperty(e)&&"type"!==e&&E(this,e,t[e])}}GetFullURL(e){return this.resMan.BuildUrl(e)}SetStandardStates(e){return this.device.SetStandardStates(e),this}GLColorMask(e){return this.device.gl.colorMask(e[0],e[1],e[2],e[3]),this}GLClearColor(e){return this.device.gl.clearColor(e[0],e[1],e[2],e[3]),this}GLClearDepth(e){return this.device.gl.clearDepth(e),this}GLViewport(e){return this.device.gl.viewport(e[0],e[1],e[2],e[3]),this}GLClear(e){return this.device.gl.clear(e),this}SetProjectionMatrix(e){return this.device.SetProjection(e),this}SetViewMatrix(e){return this.device.SetView(e),this}GetDeviceExtension(e){return this.device.GetExtension(e)}FetchResource(e){var t=this;return h(function*(){return t.resMan.FetchResource(e)})()}FetchObject(e,t){var r=this;return h(function*(){let n;if(n=Object(i.isDNA)(e)?yield r.eveSof.FetchObject(e):yield r.resMan.FetchObject(e),!r.IsClass(n,t))throw new Error("Unexpected constructor");return n})()}FetchBuildClass(e){var t=this;return h(function*(){return Object(i.isDNA)(e)?yield t.eveSof.FetchHullBuildClass(e):2})()}IsClass(e,t){if(!t)return!0;let r;t=Object(i.toArray)(t);for(let n=0;n<t.length;n++){let s=t[n],a=!1;if(Object(i.isString)(s)&&("!"===s.charAt(0)&&(a=!0,s=s.substring(1)),s="Array"===s?Array:"Object"===s?Object:this.GetClass(s)),e instanceof s){r=!a;break}}return r}CreateVariable(e,t,r){if(Object(i.isPlain)(t)&&(r=t.Type||t.type,t=t.value),Object(i.isFunction)(r))return new r(e,t);if(Object(i.isString)(r)&&(r=this.GetType(r)),r||(r=this.GetTypeByValue(t)),Object(i.isFunction)(r))return new r(e,t);throw new Error("Could not identify variable type")}HasVariable(e){return p(this,"variable",e)}GetVariable(e){return v(this,"variable",e)}GetVariableValue(e,t){const r=this.GetVariable(e);if(r.GetValue)return r.GetValue(t);throw new Error("Variable missing 'GetValue' method")}SetVariable(e,t){return Object(i.isObjectObject)(t)||(t=this.CreateVariable(e,t)),_(this,"variable",e,t)}SetVariableValue(e,t,r){const n=this.GetVariable(e);if(n.SetValue)return n.SetValue(t,r);throw new Error("Variable missing 'SetValue' method")}HasExtension(e){return p(this,"extension",e)}GetExtension(e){return v(this,"extension",e)}SetExtension(e,t){return _(this,"extension",e,t,{isValue:i.isFunction})}HasBlack(e){return p(this,"black",e,{isClassName:!0})}GetBlack(e){return v(this,"black",e,{isClassName:!0})}SetBlack(e,t){return Object(i.isFunction)(t)&&(t=t(a)),_(this,"black",e,t,{isValue:i.isArray,onBeforeSet:e=>new Map(e)})}HasClass(e){return p(this,"class",e,{isClassName:!0})}GetClass(e){return v(this,"class",e,{isClassName:!0})}SetClass(e,t){const r=_(this,"class",e,t,{isValue:i.isFunction});return f.prototype[e]=r,"DEBUG_ENABLED"in r&&(r.DEBUG_ENABLED=this._debug),r.black&&this.SetBlack(e,r.black),r}HasPath(e){return p(this,"path",e)}GetPath(e){return v(this,"path",e)}SetPath(e,t){return Object(i.isString)(t)&&"/"!==t.charAt(t.length-1)&&(t+="/"),_(this,"path",e,t,{isValue:i.isString,onBeforeSet:e=>e.toLowerCase()})}HasDynamicPath(e){return p(this,"dynamicPath",e)}GetDynamicPath(e){return v(this,"dynamicPath",e)}SetDynamicPath(e,t){return _(this,"dynamicPath",e,t,{isValue(e){if(!Object(i.isArray)(e))return!1;for(let t=0;t<e.length;t++)if(!Object(i.isString)(e[t]))return!1;return!0},onBeforeSet(e){e.forEach(e=>e.toLowerCase())}})}HasType(e){return p(this,"type",e)}GetType(e){return v(this,"type",e)}GetTypeByValue(e){const t=this._store.type;for(let[r,n]of t)if("isValue"in n&&n.isValue(e))return n;throw new Error("Could not identify a type from the given value")}SetType(e,t){return _(this,"type",e,t,i.isFunction)}}function m(e,t){if(!e._store[t])throw new c.ErrStoreInvalid({store:t})}function p(e,t,r,n){m(e,t);const s=e._store[t];return s.has(r)||n&&n.isClassName&&Object(i.isTr2OrTri)(r)&&s.has(Object(i.toTw2)(r))}function v(e,t,r,n){m(e,t);const s=e._store[t];if(s.has(r))return e._store[t].get(r);if(n&&n.isClassName&&Object(i.isTr2OrTri)(r)){const n=Object(i.toTw2)(r);if(s.has(n)){const i=s.get(n);return e.emit("store.substituted",t,n,i,r),i}}throw e.emit("store.missing",t,r),new c.ErrStoreValueMissing({store:t,key:r})}function _(e,t,r,n,s){if(m(e,t),!n)throw new c.ErrStoreValueInvalid({store:t,key:r});if(s){if(s.reserved&&s.reserved.includes(r))throw new c.ErrStoreKeyReserved({store:t,key:r});if(s.isValue&&!s.isValue(n))throw new c.ErrStoreValueInvalid({store:t,key:r});s.onBeforeSet&&(n=s.onBeforeSet(n))}return e._store[t].set(r,n),e.emit("store.set",t,r,n).msg("debug",{name:"Store",message:"".concat(t," registered: ").concat(r)}),n}function E(e,t,r){const n="Set"+t.charAt(0).toUpperCase()+t.substring(1);if(!e[n])throw new Error("Invalid store value setter '".concat(n,"'"));r=Object(i.toArray)(r);for(let t=0;t<r.length;t++)for(const s in r[t])r[t].hasOwnProperty(s)&&e[n](s,r[t][s])}const S=new f},"./global/class/Tw2BaseClass.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BaseClass",function(){return a});var n=r("./core/Tw2Error.js"),s=r("./global/util/index.js"),i=r("./global/class/Tw2EventEmitter.js");class a extends i.Tw2EventEmitter{constructor(){super(),a.defineID(this)}Copy(e,t){return this.constructor.copy(this,e,t)}Clone(e){return this.constructor.clone(this,e)}Set(e,t){return this.constructor.set(this,e,t)}Get(e,t){return this.constructor.get(this,e,t)}OnValueChanged(e){}UpdateValues(e){this.OnValueChanged(e),e&&e.skipEvents||this.emit("modified",this,e)}OnModified(e,t,r){this.on("modified",e,t,r)}OffModified(e){this.off("modified",e)}OnDestroy(e){}Destroy(e){this.OnDestroy(e),e&&e.skipEvents||this.emit("destroy",this,e),this.del("*")}Traverse(e,t,r="",n=new Set){if(n.has(this))return;n.add(this);const i=e(this,t,r);if(i)return i;return function(e,t,r=""){const{list:n,type:i}=function(e){if(e.constructor.hasOwnProperty("__keys")&&null!==e.constructor.__keys)return e.constructor.__keys;const t=e.constructor.__keys={};function r(e,r){t[e]||(t[e]=[]),t[e].includes(r)||t[e].push(r)}for(const t in e)if(e.hasOwnProperty(t)){if("_"===t.charAt(0))continue;const n=e[t];Object(s.isPrimary)(n)?r("primary",t):Object(s.isArray)(n)?n.length&&Object(s.isPrimary)(n[0])?r("array",t):r("list",t):Object(s.isTyped)(n)?r("typed",t):Object(s.isPlain)(n)?r("plain",t):(null===n||Object(s.isObjectObject)(n))&&r("type",t)}return e.constructor.__keys}(e);if(n)for(let i=0;i<n.length;i++){const a=n[i],o=e[a];for(let n=0;n<o.length;n++){const i=o[n];if(Object(s.isObjectObject)(i)){let s="".concat(r,"/").concat(a,"/").concat(n);const o=t(i,e,s);if(o)return o}}}if(i)for(let n=0;n<i.length;n++){const a=i[n],o=e[a];if(Object(s.isObjectObject)(o)){let n="".concat(r,"/").concat(a);const s=t(o,e,n);if(s)return s}}}(this,function(t,r,i){let a;if(Object(s.isFunction)(t.Traverse)?a=t.Traverse(e,r,i,n):n.has(t)||(n.add(t),a=e(t,r,i)),a)return a},r)}static copy(e,t,r={}){r.verb="copy";const n=this.get(t,{},{skipIDs:!0});return this.set(e,n,r)}static clone(e,t={}){const r=this.get(e,{},{skipIDs:!0});return this.from(r,t)}static from(e,t={}){if(e&&e instanceof this)return e;const r=new this;let n="Initialize"in r;return e&&Object.keys(e)&&this.set(r,e,{skipUpdate:n,verb:"create"}),n&&!t.skipUpdate&&r.Initialize(),r}static set(e,t,r={}){throw new n.ErrAbstractClassMethod}static get(e,t={},r={}){throw new n.ErrAbstractClassMethod}static defineID(e){Reflect.defineProperty(e,"_id",{value:Object(s.generateID)(),writable:!1,configurable:!0})}}a.black=null,a.__category=null,a.__keys=null},"./global/class/Tw2EventEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventEmitter",function(){return i});var n=r("./global/util/index.js");const s=new WeakMap;class i{emit(e,...t){const r=s.get(this);return r?((e=e.toLowerCase())in r&&(r[e].forEach((n,s)=>{s.call(n.context,...t),n.once&&r[e].delete(s)}),0===r[e].size&&Reflect.deleteProperty(r,e)),this):this}add(e){if(!e)return this;for(let t in e)if(e.hasOwnProperty(t)){let r,s,i=e[t],a=t;if(-1!==t.indexOf(".once")&&t.lastIndexOf(".once")===t.length-5&&(a=t.substring(0,t.length-5),s=!0),Object(n.isArray)(i)&&((i=i[0])[1]&&(r=i[1]),Object(n.isBoolean)(i[2])&&!Object(n.isBoolean)(s)&&(s=i[2])),!Object(n.isFunction)(i))throw new Error("Invalid listener");this.on(a,i,r,s)}return this}on(e,t,r,n=!1){let i=s.get(this);return i||(i={},s.set(this,i)),i[e=e.toLowerCase()]||(i[e]=new Map),!i[e].has(t)&&this.constructor.onListener&&this.constructor.onListener(e,t,r)&&n?this:(i[e].set(t,{context:r,once:n}),this)}once(e,t,r){return this.on(e,t,r,!0)}off(e,t){const r=s.get(this);if(!r)return this;if("*"===e){for(const e in r)r.hasOwnProperty(e)&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e));return this}return(e=e.toLowerCase())in r&&(r[e].delete(t),0===r[e].size&&Reflect.deleteProperty(r,e)),this}bind(e,t,r){function n(...n){r&&r.call(e,...n),e.emit(t,...n)}return n._target=e,this.on(t,n)}unbind(e,t){if(!e)return this;const r=s.get(this);if(!r){if("*"===t){for(const t in r)r.hasOwnProperty(t)&&r[t].forEach((r,n)=>{n._target===e&&this.off(t,n)});return this}return(t=t.toLowerCase())in r&&r[t].forEach((r,n)=>{n._target===e&&this.off(t,n)}),this}}has(e,t){const r=s.get(this);if(!r)return!1;if("*"===e){for(const e in r)if(r.hasOwnProperty(e)&&r[e].has(t))return!0;return!1}return!!(t&&e in r)&&("*"===t?!!r[e].size:r[e].has(t))}del(e){const t=s.get(this);if(!t)return this;if("*"===e){this.emit("kill");for(const e in t)t.hasOwnProperty(e)&&(t[e].clear(),Reflect.deleteProperty(t,e));return s.delete(this),this}return(e=e.toLowerCase())in t&&(t[e].clear(),Reflect.deleteProperty(t,e)),this}msg(e,t){return this.constructor.defaultLogger?this.constructor.defaultLogger.Log(e,t,this.constructor.__category):t}}i.onListener=null,i.defaultLogger=null,i.__category=null},"./global/class/Tw2Notifications.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Notifications",function(){return s});var n=r("./global/util/index.js");class s{RegisterNotification(e){this.HasNotification(e)||this.constructor.onNotification&&this.constructor.onNotification(this,e)||(this._notifications=this._notifications||new Set,this._notifications.add(e))}UpdateNotifications(e,t){this._notifications&&(this._notifications.forEach(r=>{let s=!1;Object(n.isFunction)(r)?s=r(this,t,e):e&&e in r&&(s=r[e](this,t)),s&&this.UnregisterNotification(r)}),0===this._notifications.size&&this.ClearNotifications())}HasNotification(e){return!!this._notifications&&this._notifications.has(e)}UnregisterNotification(e){this._notifications&&this._notifications.delete(e)}ClearNotifications(){this._notifications&&(this._notifications.clear(),Reflect.deleteProperty(this,"_notifications"))}}s.onNotification=null},"./global/class/Tw2Schema.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Schema",function(){return n});class n{}},"./global/class/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/class/Tw2BaseClass.js");r.d(t,"Tw2BaseClass",function(){return n.Tw2BaseClass});var s=r("./global/class/Tw2EventEmitter.js");r.d(t,"Tw2EventEmitter",function(){return s.Tw2EventEmitter});var i=r("./global/class/Tw2Notifications.js");r.d(t,"Tw2Notifications",function(){return i.Tw2Notifications});var a=r("./global/class/Tw2Schema.js");r.d(t,"Tw2Schema",function(){return a.Tw2Schema})},"./global/engine/Tw2Constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GL_COLOR_BUFFER_BIT",function(){return n}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return s}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return i}),r.d(t,"GL_TEXTURE_2D",function(){return a}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return o}),r.d(t,"GL_TEXTURE_3D",function(){return u}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return c}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return l}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return h}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return d}),r.d(t,"GL_BYTE",function(){return f}),r.d(t,"GL_UNSIGNED_BYTE",function(){return m}),r.d(t,"GL_SHORT",function(){return p}),r.d(t,"GL_UNSIGNED_SHORT",function(){return v}),r.d(t,"GL_INT",function(){return _}),r.d(t,"GL_UNSIGNED_INT",function(){return E}),r.d(t,"GL_FLOAT",function(){return S}),r.d(t,"GL_HALF_FLOAT_OES",function(){return T}),r.d(t,"GL_HALF_FLOAT",function(){return g}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return R}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return b}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return A}),r.d(t,"GL_FLOAT_VEC2",function(){return y}),r.d(t,"GL_FLOAT_VEC3",function(){return j}),r.d(t,"GL_FLOAT_VEC4",function(){return w}),r.d(t,"GL_INT_VEC2",function(){return C}),r.d(t,"GL_INT_VEC3",function(){return D}),r.d(t,"GL_INT_VEC4",function(){return L}),r.d(t,"GL_BOOL",function(){return P}),r.d(t,"GL_BOOL_VEC2",function(){return x}),r.d(t,"GL_BOOL_VEC3",function(){return O}),r.d(t,"GL_BOOL_VEC4",function(){return I}),r.d(t,"GL_FLOAT_MAT2",function(){return M}),r.d(t,"GL_FLOAT_MAT3",function(){return F}),r.d(t,"GL_FLOAT_MAT4",function(){return G}),r.d(t,"GL_TYPE_LENGTH",function(){return N}),r.d(t,"GL_SAMPLER_2D",function(){return B}),r.d(t,"GL_SAMPLER_3D",function(){return U}),r.d(t,"GL_SAMPLER_CUBE",function(){return V}),r.d(t,"GL_DEPTH_COMPONENT",function(){return k}),r.d(t,"GL_ALPHA",function(){return H}),r.d(t,"GL_RGB",function(){return q}),r.d(t,"GL_RGBA",function(){return z}),r.d(t,"GL_LUMINANCE",function(){return W}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return Y}),r.d(t,"GL_DEPTH_STENCIL",function(){return X}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return K}),r.d(t,"GL_R8",function(){return Q}),r.d(t,"GL_R16F",function(){return Z}),r.d(t,"GL_R32F",function(){return $}),r.d(t,"GL_R8UI",function(){return J}),r.d(t,"GL_RG8",function(){return ee}),r.d(t,"GL_RG16F",function(){return te}),r.d(t,"GL_RG32F",function(){return re}),r.d(t,"GL_RGB8",function(){return ne}),r.d(t,"GL_SRGB8",function(){return se}),r.d(t,"GL_RGB565",function(){return ie}),r.d(t,"GL_R11F_G11F_B10F",function(){return ae}),r.d(t,"GL_RGB9_E5",function(){return oe}),r.d(t,"GL_RGB16F",function(){return ue}),r.d(t,"GL_RGB32F",function(){return ce}),r.d(t,"GL_RGB8UI",function(){return le}),r.d(t,"GL_RGBA8",function(){return he}),r.d(t,"GL_RGB5_A1",function(){return de}),r.d(t,"GL_RGBA16F",function(){return fe}),r.d(t,"GL_RGBA32F",function(){return me}),r.d(t,"GL_RGBA8UI",function(){return pe}),r.d(t,"GL_RGBA16I",function(){return ve}),r.d(t,"GL_RGBA16UI",function(){return _e}),r.d(t,"GL_RGBA32I",function(){return Ee}),r.d(t,"GL_RGBA32UI",function(){return Se}),r.d(t,"GL_NEAREST",function(){return Te}),r.d(t,"GL_LINEAR",function(){return ge}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return Re}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return be}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return Ae}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return ye}),r.d(t,"GL_REPEAT",function(){return je}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return we}),r.d(t,"GL_MIRRORED_REPEAT",function(){return Ce}),r.d(t,"GL_ZERO",function(){return De}),r.d(t,"GL_ONE",function(){return Le}),r.d(t,"GL_SRC_COLOR",function(){return Pe}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return xe}),r.d(t,"GL_SRC_ALPHA",function(){return Oe}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return Ie}),r.d(t,"GL_DST_ALPHA",function(){return Me}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return Fe}),r.d(t,"GL_DST_COLOR",function(){return Ge}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return Ne}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return Be}),r.d(t,"GL_CONSTANT_COLOR",function(){return Ue}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return Ve}),r.d(t,"GL_CONSTANT_ALPHA",function(){return ke}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return He}),r.d(t,"GL_VERTEX_SHADER",function(){return qe}),r.d(t,"GL_FRAGMENT_SHADER",function(){return ze}),r.d(t,"GL_FRONT",function(){return We}),r.d(t,"GL_BACK",function(){return Ye}),r.d(t,"GL_FRONT_AND_BACK",function(){return Xe}),r.d(t,"GL_NEVER",function(){return Ke}),r.d(t,"GL_LESS",function(){return Qe}),r.d(t,"GL_EQUAL",function(){return Ze}),r.d(t,"GL_LEQUAL",function(){return $e}),r.d(t,"GL_GREATER",function(){return Je}),r.d(t,"GL_NOTEQUAL",function(){return et}),r.d(t,"GL_GEQUAL",function(){return tt}),r.d(t,"GL_ALWAYS",function(){return rt}),r.d(t,"GL_KEEP",function(){return nt}),r.d(t,"GL_REPLACE",function(){return st}),r.d(t,"GL_INCR",function(){return it}),r.d(t,"GL_DECR",function(){return at}),r.d(t,"GL_INCR_WRAP",function(){return ot}),r.d(t,"GL_DECR_WRAP",function(){return ut}),r.d(t,"GL_INVERT",function(){return ct}),r.d(t,"GL_STREAM_DRAW",function(){return lt}),r.d(t,"GL_STATIC_DRAW",function(){return ht}),r.d(t,"GL_DYNAMIC_DRAW",function(){return dt}),r.d(t,"GL_ARRAY_BUFFER",function(){return ft}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return mt}),r.d(t,"GL_POINTS",function(){return pt}),r.d(t,"GL_LINES",function(){return vt}),r.d(t,"GL_LINE_LOOP",function(){return _t}),r.d(t,"GL_LINE_STRIP",function(){return Et}),r.d(t,"GL_TRIANGLES",function(){return St}),r.d(t,"GL_TRIANGLE_STRIP",function(){return Tt}),r.d(t,"GL_TRIANGLE_FAN",function(){return gt}),r.d(t,"GL_CW",function(){return Rt}),r.d(t,"GL_CCW",function(){return bt}),r.d(t,"GL_CULL_FACE",function(){return At}),r.d(t,"GL_DEPTH_TEST",function(){return yt}),r.d(t,"GL_BLEND",function(){return jt}),r.d(t,"RM_ANY",function(){return wt}),r.d(t,"RM_OPAQUE",function(){return Ct}),r.d(t,"RM_DECAL",function(){return Dt}),r.d(t,"RM_TRANSPARENT",function(){return Lt}),r.d(t,"RM_ADDITIVE",function(){return Pt}),r.d(t,"RM_DEPTH",function(){return xt}),r.d(t,"RM_FULLSCREEN",function(){return Ot}),r.d(t,"RM_PICKABLE",function(){return It}),r.d(t,"RM_DISTORTION",function(){return Mt}),r.d(t,"RS_ZENABLE",function(){return Ft}),r.d(t,"RS_FILLMODE",function(){return Gt}),r.d(t,"RS_SHADEMODE",function(){return Nt}),r.d(t,"RS_ZWRITEENABLE",function(){return Bt}),r.d(t,"RS_ALPHATESTENABLE",function(){return Ut}),r.d(t,"RS_LASTPIXEL",function(){return Vt}),r.d(t,"RS_SRCBLEND",function(){return kt}),r.d(t,"RS_DESTBLEND",function(){return Ht}),r.d(t,"RS_CULLMODE",function(){return qt}),r.d(t,"RS_ZFUNC",function(){return zt}),r.d(t,"RS_ALPHAREF",function(){return Wt}),r.d(t,"RS_ALPHAFUNC",function(){return Yt}),r.d(t,"RS_DITHERENABLE",function(){return Xt}),r.d(t,"RS_ALPHABLENDENABLE",function(){return Kt}),r.d(t,"RS_FOGENABLE",function(){return Qt}),r.d(t,"RS_SPECULARENABLE",function(){return Zt}),r.d(t,"RS_FOGCOLOR",function(){return $t}),r.d(t,"RS_FOGTABLEMODE",function(){return Jt}),r.d(t,"RS_FOGSTART",function(){return er}),r.d(t,"RS_FOGEND",function(){return tr}),r.d(t,"RS_FOGDENSITY",function(){return rr}),r.d(t,"RS_RANGEFOGENABLE",function(){return nr}),r.d(t,"RS_STENCILENABLE",function(){return sr}),r.d(t,"RS_STENCILFAIL",function(){return ir}),r.d(t,"RS_STENCILZFAIL",function(){return ar}),r.d(t,"RS_STENCILPASS",function(){return or}),r.d(t,"RS_STENCILFUNC",function(){return ur}),r.d(t,"RS_STENCILREF",function(){return cr}),r.d(t,"RS_STENCILMASK",function(){return lr}),r.d(t,"RS_STENCILWRITEMASK",function(){return hr}),r.d(t,"RS_TEXTUREFACTOR",function(){return dr}),r.d(t,"RS_WRAP0",function(){return fr}),r.d(t,"RS_WRAP1",function(){return mr}),r.d(t,"RS_WRAP2",function(){return pr}),r.d(t,"RS_WRAP3",function(){return vr}),r.d(t,"RS_WRAP4",function(){return _r}),r.d(t,"RS_WRAP5",function(){return Er}),r.d(t,"RS_WRAP6",function(){return Sr}),r.d(t,"RS_WRAP7",function(){return Tr}),r.d(t,"RS_CLIPPING",function(){return gr}),r.d(t,"RS_LIGHTING",function(){return Rr}),r.d(t,"RS_AMBIENT",function(){return br}),r.d(t,"RS_FOGVERTEXMODE",function(){return Ar}),r.d(t,"RS_COLORVERTEX",function(){return yr}),r.d(t,"RS_LOCALVIEWER",function(){return jr}),r.d(t,"RS_NORMALIZENORMALS",function(){return wr}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return Cr}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return Dr}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return Lr}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return Pr}),r.d(t,"RS_VERTEXBLEND",function(){return xr}),r.d(t,"RS_CLIPPLANEENABLE",function(){return Or}),r.d(t,"RS_POINTSIZE",function(){return Ir}),r.d(t,"RS_POINTSIZE_MIN",function(){return Mr}),r.d(t,"RS_POINTSPRITEENABLE",function(){return Fr}),r.d(t,"RS_POINTSCALEENABLE",function(){return Gr}),r.d(t,"RS_POINTSCALE_A",function(){return Nr}),r.d(t,"RS_POINTSCALE_B",function(){return Br}),r.d(t,"RS_POINTSCALE_C",function(){return Ur}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return Vr}),r.d(t,"RS_MULTISAMPLEMASK",function(){return kr}),r.d(t,"RS_PATCHEDGESTYLE",function(){return Hr}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return qr}),r.d(t,"RS_POINTSIZE_MAX",function(){return zr}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return Wr}),r.d(t,"RS_COLORWRITEENABLE",function(){return Yr}),r.d(t,"RS_TWEENFACTOR",function(){return Xr}),r.d(t,"RS_BLENDOP",function(){return Kr}),r.d(t,"RS_POSITIONDEGREE",function(){return Qr}),r.d(t,"RS_NORMALDEGREE",function(){return Zr}),r.d(t,"RS_SCISSORTESTENABLE",function(){return $r}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return Jr}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return en}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return tn}),r.d(t,"RS_CCW_STENCILFAIL",function(){return rn}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return nn}),r.d(t,"RS_CCW_STENCILPASS",function(){return sn}),r.d(t,"RS_CCW_STENCILFUNC",function(){return an}),r.d(t,"RS_COLORWRITEENABLE1",function(){return on}),r.d(t,"RS_COLORWRITEENABLE2",function(){return un}),r.d(t,"RS_COLORWRITEENABLE3",function(){return cn}),r.d(t,"RS_BLENDFACTOR",function(){return ln}),r.d(t,"RS_SRGBWRITEENABLE",function(){return hn}),r.d(t,"RS_DEPTHBIAS",function(){return dn}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return fn}),r.d(t,"RS_SRCBLENDALPHA",function(){return mn}),r.d(t,"RS_DESTBLENDALPHA",function(){return pn}),r.d(t,"RS_BLENDOPALPHA",function(){return vn}),r.d(t,"CULL_NONE",function(){return _n}),r.d(t,"CULL_CW",function(){return En}),r.d(t,"CULL_CCW",function(){return Sn}),r.d(t,"CMP_NEVER",function(){return Tn}),r.d(t,"CMP_LESS",function(){return gn}),r.d(t,"CMP_EQUAL",function(){return Rn}),r.d(t,"CMP_LEQUAL",function(){return bn}),r.d(t,"CMP_GREATER",function(){return An}),r.d(t,"CMP_NOTEQUAL",function(){return yn}),r.d(t,"CMP_GREATEREQUAL",function(){return jn}),r.d(t,"CMP_ALWAYS",function(){return wn}),r.d(t,"BLEND_ZERO",function(){return Cn}),r.d(t,"BLEND_ONE",function(){return Dn}),r.d(t,"BLEND_SRCCOLOR",function(){return Ln}),r.d(t,"BLEND_INVSRCCOLOR",function(){return Pn}),r.d(t,"BLEND_SRCALPHA",function(){return xn}),r.d(t,"BLEND_INVSRCALPHA",function(){return On}),r.d(t,"BLEND_DESTALPHA",function(){return In}),r.d(t,"BLEND_INVDESTALPHA",function(){return Mn}),r.d(t,"BLEND_DESTCOLOR",function(){return Fn}),r.d(t,"BLEND_INVDESTCOLOR",function(){return Gn}),r.d(t,"BLEND_SRCALPHASAT",function(){return Nn}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return Bn}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return Un}),r.d(t,"BLEND_BLENDFACTOR",function(){return Vn}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return kn}),r.d(t,"BLENDOP_ADD",function(){return Hn}),r.d(t,"BLENDOP_SUBTRACT",function(){return qn}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return zn}),r.d(t,"BLENDOP_MIN",function(){return Wn}),r.d(t,"BLENDOP_MAX",function(){return Yn}),r.d(t,"TF_ALPHA",function(){return Xn}),r.d(t,"TF_LUMINANCE",function(){return Kn}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return Qn}),r.d(t,"TF_RGB",function(){return Zn}),r.d(t,"TF_RGBA",function(){return $n}),r.d(t,"TF_RED",function(){return Jn}),r.d(t,"TF_R",function(){return es}),r.d(t,"TF_RG",function(){return ts}),r.d(t,"TF_RED_INTEGER",function(){return rs}),r.d(t,"TF_R_INTEGER",function(){return ns}),r.d(t,"TF_RG_INTEGER",function(){return ss}),r.d(t,"TF_RGB_INTEGER",function(){return is}),r.d(t,"TF_RGBA_INTEGER",function(){return as}),r.d(t,"TT_UNSIGNED_BYTE",function(){return os}),r.d(t,"TT_UNSIGNED_INT",function(){return us}),r.d(t,"TT_FLOAT",function(){return cs}),r.d(t,"TT_HALF_FLOAT",function(){return ls}),r.d(t,"TT_BYTE",function(){return hs}),r.d(t,"TT_SHORT",function(){return ds}),r.d(t,"TT_UNSIGNED_SHORT",function(){return fs}),r.d(t,"TT_INT",function(){return ms}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return ps}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return vs}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return _s}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return Es}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return Ss}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return Ts}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return gs}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return Rs}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return bs}),r.d(t,"WrapModes",function(){return As}),r.d(t,"BlendTable",function(){return ys}),r.d(t,"FilterMode",function(){return js}),r.d(t,"MipFilterMode",function(){return ws}),r.d(t,"DDS_MAGIC",function(){return Cs}),r.d(t,"DDSD_CAPS",function(){return Ds}),r.d(t,"DDSD_HEIGHT",function(){return Ls}),r.d(t,"DDSD_WIDTH",function(){return Ps}),r.d(t,"DDSD_PITCH",function(){return xs}),r.d(t,"DDSD_PIXELFORMAT",function(){return Os}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return Is}),r.d(t,"DDSD_LINEARSIZE",function(){return Ms}),r.d(t,"DDSD_DEPTH",function(){return Fs}),r.d(t,"DDSCAPS_COMPLEX",function(){return Gs}),r.d(t,"DDSCAPS_MIPMAP",function(){return Ns}),r.d(t,"DDSCAPS_TEXTURE",function(){return Bs}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return Us}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return Vs}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return ks}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return Hs}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return qs}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return zs}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return Ws}),r.d(t,"DDSCAPS2_VOLUME",function(){return Ys}),r.d(t,"DDPF_ALPHAPIXELS",function(){return Xs}),r.d(t,"DDPF_ALPHA",function(){return Ks}),r.d(t,"DDPF_FOURCC",function(){return Qs}),r.d(t,"DDPF_RGB",function(){return Zs}),r.d(t,"DDPF_YUV",function(){return $s}),r.d(t,"DDPF_LUMINANCE",function(){return Js}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return ei}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return ti}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return ri}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return ni}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return si}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return ii}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return ai}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return oi}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return ui}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return ci}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return li}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return hi}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return di}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return fi}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return mi}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return pi}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return vi}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return _i}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return Ei}),r.d(t,"FOURCC_DXT1",function(){return Si}),r.d(t,"FOURCC_DXT5",function(){return Ti}),r.d(t,"FOURCC_DXT3",function(){return gi}),r.d(t,"FOURCC_DXT10",function(){return Ri}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return bi}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return Ai}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return yi}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return ji}),r.d(t,"VendorRequestAnimationFrame",function(){return wi}),r.d(t,"VendorCancelAnimationFrame",function(){return Ci}),r.d(t,"VendorRequestFullScreen",function(){return Di}),r.d(t,"VendorExitFullScreen",function(){return Li}),r.d(t,"VendorGetFullScreenElement",function(){return Pi}),r.d(t,"VendorWebglPrefixes",function(){return xi});const n=16384,s=256,i=1024,a=3553,o=34067,u=32879,c=10240,l=10241,h=10242,d=10243,f=5120,m=5121,p=5122,v=5123,_=5124,E=5125,S=5126,T=36193,g=5131,R=33189,b=33190,A=36012,y=35664,j=35665,w=35666,C=35667,D=35668,L=35669,P=35670,x=35671,O=35672,I=35673,M=35674,F=35675,G=35676,N={[S]:1,[_]:1,[f]:1,[P]:1,[y]:2,[C]:2,[x]:2,[j]:3,[D]:3,[O]:3,[w]:4,[L]:4,[I]:4,[F]:9,[G]:16},B=35678,U=35679,V=35680,k=6402,H=6406,q=6407,z=6408,W=6409,Y=6410,X=34041,K=34042,Q=33321,Z=33325,$=33326,J=33330,ee=33323,te=33327,re=33328,ne=32849,se=35905,ie=36194,ae=35898,oe=35901,ue=34843,ce=34837,le=36221,he=32856,de=32855,fe=34842,me=34836,pe=36220,ve=36232,_e=36214,Ee=36226,Se=36208,Te=9728,ge=9729,Re=9984,be=9985,Ae=9986,ye=9987,je=10497,we=33071,Ce=33648,De=0,Le=1,Pe=768,xe=769,Oe=770,Ie=771,Me=772,Fe=773,Ge=774,Ne=775,Be=776,Ue=32769,Ve=32770,ke=32771,He=32772,qe=35633,ze=35632,We=1028,Ye=1029,Xe=1032,Ke=512,Qe=513,Ze=514,$e=515,Je=516,et=517,tt=518,rt=519,nt=7680,st=7681,it=7682,at=7683,ot=34055,ut=34056,ct=5386,lt=35040,ht=35044,dt=35048,ft=34962,mt=34963,pt=0,vt=1,_t=2,Et=3,St=4,Tt=5,gt=6,Rt=2304,bt=2305,At=2884,yt=2929,jt=3042,wt=-1,Ct=0,Dt=1,Lt=2,Pt=3,xt=4,Ot=5,It=6,Mt=7,Ft=7,Gt=8,Nt=9,Bt=14,Ut=15,Vt=16,kt=19,Ht=20,qt=22,zt=23,Wt=24,Yt=25,Xt=26,Kt=27,Qt=28,Zt=29,$t=34,Jt=35,er=36,tr=37,rr=38,nr=48,sr=52,ir=53,ar=54,or=55,ur=56,cr=57,lr=58,hr=59,dr=60,fr=128,mr=129,pr=130,vr=131,_r=132,Er=133,Sr=134,Tr=135,gr=136,Rr=137,br=139,Ar=140,yr=141,jr=142,wr=143,Cr=145,Dr=146,Lr=147,Pr=148,xr=151,Or=152,Ir=154,Mr=155,Fr=156,Gr=157,Nr=158,Br=159,Ur=160,Vr=161,kr=162,Hr=163,qr=165,zr=166,Wr=167,Yr=168,Xr=170,Kr=171,Qr=172,Zr=173,$r=174,Jr=175,en=176,tn=185,rn=186,nn=187,sn=188,an=189,on=190,un=191,cn=192,ln=193,hn=194,dn=195,fn=206,mn=207,pn=208,vn=209,_n=1,En=2,Sn=3,Tn=1,gn=2,Rn=3,bn=4,An=5,yn=6,jn=7,wn=8,Cn=1,Dn=2,Ln=3,Pn=4,xn=5,On=6,In=7,Mn=8,Fn=9,Gn=10,Nn=11,Bn=12,Un=13,Vn=14,kn=15,Hn=1,qn=2,zn=3,Wn=4,Yn=5,Xn=0,Kn=1,Qn=2,Zn=4,$n=5,Jn=6,es=6,ts=7,rs=8,ns=8,ss=9,is=10,as=11,os=0,us=0,cs=1,ls=2,hs=3,ds=4,fs=5,ms=6,ps=7,vs=8,_s=9,Es=10,Ss=11,Ts=12,gs=13,Rs=14,bs=15,As=[0,je,Ce,we,we,we],ys=[-1,De,Le,Pe,xe,Oe,Ie,Me,Fe,Ge,Ne,Be,-1,-1,Ue,Ve],js={[Te]:1,[ge]:2},ws={[Te]:0,[ge]:0,[Re]:1,[be]:1,[Ae]:2,[ye]:2},Cs=542327876,Ds=1,Ls=2,Ps=4,xs=8,Os=4096,Is=131072,Ms=524288,Fs=8388608,Gs=8,Ns=4194304,Bs=4096,Us=512,Vs=1024,ks=2048,Hs=4096,qs=8192,zs=16384,Ws=32768,Ys=2097152,Xs=1,Ks=2,Qs=4,Zs=64,$s=512,Js=131072,ei=31,ti=0,ri=1,ni=2,si=3,ii=4,ai=7,oi=20,ui=21,ci=22,li=23,hi=24,di=25,fi=26,mi=27,pi=28,vi=29,_i=30,Ei=32,Si=827611204,Ti=894720068,gi=861165636,Ri=827611204,bi=113,Ai=116,yi=10,ji=88,wi=["requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],Ci=["cancelAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],Di=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Li=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Pi=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],xi=["","MOZ_","WEBKIT_","WEBGL_"]},"./global/engine/Tw2Device.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Device",function(){return h});var n=r("./global/math/index.js"),s=r("./global/util/index.js"),i=r("./core/mesh/Tw2Effect.js"),a=r("./core/vertex/Tw2VertexDeclaration.js"),o=r("./global/class/Tw2EventEmitter.js"),u=r("./global/engine/Tw2Constant.js"),c=r("./core/index.js");function l(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}class h extends o.Tw2EventEmitter{get glVersion(){return this.gl?this.gl instanceof WebGLRenderingContext?1:2:0}get canvas(){return this.gl?this.gl.canvas:null}constructor(e){super(),this.name="Device",this.gl=null,this.xr=null,this.tw2=null,this.dt=0,this.frameCounter=0,this.startTime=null,this.currentTime=null,this.previousTime=null,this.eyePosition=n.vec3.create(),this.targetResolution=n.vec4.create(),this.world=n.mat4.create(),this.view=n.mat4.create(),this.viewInverse=n.mat4.create(),this.viewTranspose=n.mat4.create(),this.projection=n.mat4.create(),this.projectionInverse=n.mat4.create(),this.projectionTranspose=n.mat4.create(),this.viewProjection=n.mat4.create(),this.viewProjectionTranspose=n.mat4.create(),this.viewportWidth=0,this.viewportHeight=0,this.viewportAspect=0,this.viewportPixelRatio="devicePixelRatio"in window?window.devicePixelRatio:1,this.effectDir="/effect.gles2/",this.mipLevelSkipCount=0,this.shaderModel="hi",this.enableAnisotropicFiltering=!0,this.enableAntialiasing=!0,this.enableWebgl2=!0,this.enableWebxr=!0,this.alphaBlendBackBuffer=!0,this.antialiasing=!0,this.msaaSamples=0,this.wrapModes=[],this.shadowHandles=null,this.perObjectData=null,this.onResize=null,this._extensions={},this._alphaBlendState=null,this._alphaTestState=null,this._depthOffsetState=null,this._shadowStateBuffer=null,this._quadBuffer=null,this._quadDecl=null,this._cameraQuadBuffer=null,this._currentRenderMode=u.RM_ANY,this._fallbackCube=null,this._fallbackTexture=null,this._blitEffect=null,this._Date=Date,e.SetLibrary(this),this.startTime=this.now,this.currentTime=this.startTime}Register(e){if(e){if(this.gl)throw new Error("Setting device options after gl creation is not yet supported");"performanceClock"in e&&(e.performance&&"performance"in window?this._Date=performance:this._Date=Date),"textureQuality"in e&&(this.mipLevelSkipCount=e.textureQuality),"shaderQuality"in e&&(this.shaderModel=e.shaderQuality),"anisotropicFilter"in e&&(this.enableAnisotropicFiltering=e.anisotropicFilter),"antialiasing"in e&&(this.enableAntialiasing=e.antialiasing),"webgl2"in e&&(this.enableWebgl2=e.webgl2),"webxr"in e&&(this.enableWebxr=e.webxr)}}CreateDevice(e,t={}){this.gl=null,this.effectDir="/effect.gles2/",t.alpha=Object(s.get)(t,"alpha",!0),t.webgl2=this.enableWebgl2,t.xrCompatible=this.enableWebxr,t.antialiasing=!!this.enableAntialiasing&&Object(s.get)(t,"antialiasing",!0);const r=this.gl=h.CreateContext(t,e);this.msg("debug","Webgl".concat(this.glVersion," context created"));const n=()=>!1,i=()=>!0;if(1===this.glVersion){this.GetExtension("OES_standard_derivatives"),this.GetExtension("OES_element_index_uint"),this.GetExtension("OES_texture_float"),this.GetExtension("EXT_shader_texture_lod");const e=this.GetExtension("ANGLE_instanced_arrays");r.drawElementsInstanced=e?e.drawElementsInstancedANGLE.bind(e):n,r.drawArraysInstanced=e?e.drawArraysInstancedANGLE.bind(e):n,r.vertexAttribDivisor=e?e.vertexAttribDivisorANGLE.bind(e):n,r.hasInstancedArrays=e?i:n}else r.hasInstancedArrays=i;const o=this.GetExtension("EXT_texture_filter_anisotropic");if(o&&(o.maxAnisotropy=r.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.GetExtension("CCP_shader_binary")){const e=r.getParameter(this.gl.RENDERER).match(/Mali-(\w+).*/);e&&(this.effectDir="/effect.gles2.mali"+e[1]+"/")}this.alphaBlendBackBuffer=t.alpha,this.msaaSamples=this.gl.getParameter(this.gl.SAMPLES),this.antialiasing=this.msaaSamples>1,this.Resize();this._quadBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this._quadBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),r.STATIC_DRAW),this._cameraQuadBuffer=r.createBuffer(),this._quadDecl=a.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2}]),this.wrapModes=Array.from(u.WrapModes),this._alphaBlendState={dirty:!1,states:{[u.RS_SRCBLEND]:u.BLEND_SRCALPHA,[u.RS_DESTBLEND]:u.BLEND_INVSRCALPHA,[u.RS_BLENDOP]:u.BLENDOP_ADD,[u.RS_SEPARATEALPHABLENDENABLE]:0,[u.RS_BLENDOPALPHA]:u.BLENDOP_ADD,[u.RS_SRCBLENDALPHA]:u.BLEND_SRCALPHA,[u.RS_DESTBLENDALPHA]:u.BLEND_INVSRCALPHA}},this._alphaTestState={dirty:!1,states:{[u.RS_ALPHATESTENABLE]:0,[u.RS_ALPHAREF]:-1,[u.RS_ALPHAFUNC]:u.CMP_GREATER,[u.RS_CLIPPING]:0,[u.RS_CLIPPLANEENABLE]:0}},this._depthOffsetState={dirty:!1,states:{[u.RS_SLOPESCALEDEPTHBIAS]:0,[u.RS_DEPTHBIAS]:0}},this._shadowStateBuffer=new Float32Array(24)}Resize(){this.onResize?this.onResize(this.canvas):(this.canvas.width=this.canvas.offsetWidth*this.viewportPixelRatio,this.canvas.height=this.canvas.offsetHeight*this.viewportPixelRatio),this.viewportWidth=this.canvas.clientWidth,this.viewportHeight=this.canvas.clientHeight,this.viewportAspect=this.viewportWidth/this.viewportHeight,this.tw2.SetVariableValue("ViewportSize",[this.viewportWidth,this.viewportHeight,this.viewportWidth,this.viewportHeight]),this.emit("resized",{width:this.viewportWidth,height:this.viewportHeight,aspect:this.viewportAspect,canvas:this.canvas})}get now(){return this._Date.now()}StartFrame(){this.canvas.clientWidth===this.viewportWidth&&this.canvas.clientHeight===this.viewportHeight||this.Resize();const e=null===this.previousTime?0:this.previousTime,t=this.now;this.currentTime=.001*(t-this.startTime),this.dt=null===this.previousTime?0:.001*(t-this.previousTime),this.previousTime=t,this.tw2.SetVariableValue("Time",[this.currentTime,this.currentTime-Math.floor(this.currentTime),this.frameCounter,e]),this.frameCounter++}EndFrame(){}SetWorld(e){n.mat4.copy(this.world,e)}SetView(e){n.mat4.copy(this.view,e),n.mat4.invert(this.viewInverse,this.view),n.mat4.transpose(this.viewTranspose,this.view),n.mat4.getTranslation(this.eyePosition,this.viewInverse),this.UpdateViewProjection()}SetProjection(e,t){n.mat4.copy(this.projection,e),n.mat4.transpose(this.projectionTranspose,this.projection),n.mat4.invert(this.projectionInverse,this.projection),this.GetTargetResolution(this.targetResolution),t&&this.UpdateViewProjection()}UpdateViewProjection(){n.mat4.multiply(this.viewProjection,this.projection,this.view),n.mat4.transpose(this.viewProjectionTranspose,this.viewProjection),this.tw2.SetVariableValue("ViewProjectionMat",this.viewProjection)}GetTargetResolution(e=n.vec4.create()){const t=this.projection[0]?this.projection[5]/this.projection[0]:0;let r=1;t>1.6&&(r=t/1.6);const s=2*Math.atan(r/this.projection[5]);return e[0]=this.viewportWidth,e[1]=this.viewportHeight,e[2]=s,e[3]=s*t,e}GetEyePosition(e=n.vec3.create()){return n.vec3.copy(e,this.eyePosition)}IsAlphaTestEnabled(){return this._alphaTestState.states[u.RS_ALPHATESTENABLE]}IsFrameBufferComplete(e){return this.gl.checkFramebufferStatus(e)===this.gl.FRAMEBUFFER_COMPLETE}GetExtension(e){if(!(e in this._extensions)){let t;for(let r=0;r<u.VendorWebglPrefixes.length&&!(t=this.gl.getExtension(u.VendorWebglPrefixes[r]+e));r++)t=null;this._extensions[e]=t}return this._extensions[e]}GetFallbackTexture(){return this._fallbackTexture||(this._fallbackTexture=this.CreateSolidTexture()),this._fallbackTexture}GetFallbackCubeMap(){return this._fallbackCube||(this._fallbackCube=this.CreateSolidCube()),this._fallbackCube}CreateSolidTexture(e=[0,0,0,0]){const t=this.gl,r=this.gl.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),r}CreateSolidCube(e=[0,0,0,0]){const t=this.gl,r=this.gl.createTexture();t.bindTexture(t.TEXTURE_CUBE_MAP,r);for(let r=0;r<6;++r)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e));return t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_CUBE_MAP,null),r}RenderFullScreenQuad(e,t="Main"){if(!e||!e.IsGood())return!1;const r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this._quadBuffer);for(let n=0;n<e.GetPassCount(t);++n){if(e.ApplyPass(t,n),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,n),24))return!1;this.ApplyShadowState(),r.drawArrays(r.TRIANGLE_STRIP,0,4)}return!0}RenderTexture(e){return null===this._blitEffect&&(this._blitEffect=i.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/system/blit.fx",textures:{BlitSource:""}})),this._blitEffect.parameters.BlitSource.SetTextureRes(e),this.RenderFullScreenQuad(this._blitEffect)}RenderCameraSpaceQuad(e,t="Main"){if(!e||!e.IsGood())return!1;const r=new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),s=this.projectionInverse;for(let e=0;e<4;++e){const t=r.subarray(6*e,6*e+4);n.vec4.transformMat4(t,t,s),n.vec3.scale(t,t,1/t[3]),t[3]=1}const i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this._cameraQuadBuffer),i.bufferData(i.ARRAY_BUFFER,r,i.STATIC_DRAW);for(let r=0;r<e.GetPassCount(t);++r){if(e.ApplyPass(t,r),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,r),24))return!1;this.ApplyShadowState(),i.drawArrays(i.TRIANGLE_STRIP,0,4)}return!0}SetRenderState(e,t){const r=this.gl;switch(this._currentRenderMode=u.RM_ANY,e){case u.RS_ZENABLE:return void(t?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST));case u.RS_ZWRITEENABLE:return void r.depthMask(!!t);case u.RS_ALPHATESTENABLE:case u.RS_ALPHAREF:case u.RS_ALPHAFUNC:case u.RS_CLIPPING:case u.RS_CLIPPLANEENABLE:return void(this._alphaTestState[e]!==t&&(this._alphaTestState.states[e]=t,this._alphaTestState.dirty=!0));case u.RS_SRCBLEND:case u.RS_DESTBLEND:case u.RS_BLENDOP:case u.RS_SEPARATEALPHABLENDENABLE:case u.RS_BLENDOPALPHA:case u.RS_SRCBLENDALPHA:case u.RS_DESTBLENDALPHA:return void(this._alphaBlendState[e]!==t&&(this._alphaBlendState.states[e]=t,this._alphaBlendState.dirty=!0));case u.RS_CULLMODE:switch(t){case u.CULL_NONE:return void r.disable(r.CULL_FACE);case u.CULL_CW:return r.enable(r.CULL_FACE),void r.cullFace(r.FRONT);case u.CULL_CCW:return r.enable(r.CULL_FACE),void r.cullFace(r.BACK)}return;case u.RS_ZFUNC:return void r.depthFunc(512+t-1);case u.RS_ALPHABLENDENABLE:return void(t?r.enable(r.BLEND):r.disable(r.BLEND));case u.RS_COLORWRITEENABLE:return void r.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t));case u.RS_SCISSORTESTENABLE:return void(t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST));case u.RS_SLOPESCALEDEPTHBIAS:case u.RS_DEPTHBIAS:return t=n.num.dwordToFloat(t),void(this._depthOffsetState[e]!==t&&(this._depthOffsetState.states[e]=t,this._depthOffsetState.dirty=!0))}}ApplyShadowState(){const e=this.gl;if(this._alphaBlendState.dirty){let t=e.FUNC_ADD;this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_SUBTRACT?t=e.FUNC_SUBTRACT:this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_REVSUBTRACT&&(t=e.FUNC_REVERSE_SUBTRACT);const r=u.BlendTable[this._alphaBlendState.states[u.RS_SRCBLEND]],n=u.BlendTable[this._alphaBlendState.states[u.RS_DESTBLEND]];if(this._alphaBlendState.states[u.RS_SEPARATEALPHABLENDENABLE]){let s=e.FUNC_ADD;this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_SUBTRACT?s=e.FUNC_SUBTRACT:this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_REVSUBTRACT&&(s=e.FUNC_REVERSE_SUBTRACT);const i=u.BlendTable[this._alphaBlendState.states[u.RS_SRCBLENDALPHA]],a=u.BlendTable[this._alphaBlendState.states[u.RS_DESTBLENDALPHA]];e.blendEquationSeparate(t,s),e.blendFuncSeparate(r,n,i,a)}else e.blendEquation(t),e.blendFunc(r,n);this._alphaBlendState.dirty=!1}let t,r,n;if(this._depthOffsetState.dirty&&(e.polygonOffset(this._depthOffsetState.states[u.RS_SLOPESCALEDEPTHBIAS],this._depthOffsetState.states[u.RS_DEPTHBIAS]),this._depthOffsetState.dirty=!1),this.shadowHandles&&this._alphaTestState.states[u.RS_ALPHATESTENABLE]){switch(this._alphaTestState.states[u.RS_ALPHAFUNC]){case u.CMP_NEVER:t=0,r=1,n=-256;break;case u.CMP_LESS:t=0,r=-1,n=this._alphaTestState.states[u.RS_ALPHAREF]-1;break;case u.CMP_EQUAL:t=1,r=0,n=this._alphaTestState.states[u.RS_ALPHAREF];break;case u.CMP_LEQUAL:t=0,r=-1,n=this._alphaTestState.states[u.RS_ALPHAREF];break;case u.CMP_GREATER:t=0,r=1,n=-this._alphaTestState.states[u.RS_ALPHAREF]-1;break;case u.CMP_GREATEREQUAL:t=0,r=1,n=-this._alphaTestState.states[u.RS_ALPHAREF];break;default:t=0,r=0,n=1}const s=0;e.uniform4f(this.shadowHandles.shadowStateInt,r,n,t,s)}}SetStandardStates(e){if(this._currentRenderMode!==e){switch(this.gl.frontFace(this.gl.CW),e){case u.RM_OPAQUE:case u.RM_PICKABLE:this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!0),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_DECAL:this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!0),this.SetRenderState(u.RS_ALPHAFUNC,u.CMP_GREATER),this.SetRenderState(u.RS_ALPHAREF,127),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!0),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_TRANSPARENT:this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_ALPHABLENDENABLE,!0),this.SetRenderState(u.RS_SRCBLEND,u.BLEND_SRCALPHA),this.SetRenderState(u.RS_DESTBLEND,u.BLEND_INVSRCALPHA),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_ADDITIVE:this.SetRenderState(u.RS_CULLMODE,u.CULL_NONE),this.SetRenderState(u.RS_ALPHABLENDENABLE,!0),this.SetRenderState(u.RS_SRCBLEND,u.BLEND_ONE),this.SetRenderState(u.RS_DESTBLEND,u.BLEND_ONE),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_FULLSCREEN:this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_CULLMODE,u.CULL_NONE),this.SetRenderState(u.RS_ZENABLE,!1),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_ALWAYS),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_DISTORTION:case u.RM_DEPTH:default:return}this._currentRenderMode=e}}RequestAnimationFrame(e){return this.xr?this.xr.RequestAnimationFrame(e):this.constructor.RequestAnimationFrame(e)}CancelAnimationFrame(e){return this.xr?this.xr.CancelAnimationFrame(e):this.constructor.CancelAnimationFrame(e)}static CreateContext(e={},t){Object(s.isString)(t)&&(t=document.getElementById(t)),t||(t=document.createElement("canvas"));const r=e.webgl2?["webgl2"]:["webgl","experimental-webgl"];let n=null;for(let s of r)if(n=t.getContext(s,e))break;if(!n)throw new c.ErrWebglContext({version:e.webgl2?2:1});return n}static FindXRDevice(e){return(t=function*(){if(!navigator.xr)throw new c.ErrWebxrNotSupported;let t;try{t=yield navigator.xr.requestDevice()}catch(e){if("NotFoundError"===e.name||"NotFoundError"===e.message)throw new c.ErrWebxrDeviceNotFound({err:e.message});throw new c.ErrWebxrRequestFailed({err:e.message})}if(e)try{yield t.supportsSession(e)}catch(e){throw new c.ErrWebxrSessionNotSupported({err:e.message})}return t},function(){var e=this,r=arguments;return new Promise(function(n,s){var i=t.apply(e,r);function a(e){l(i,n,s,a,o,"next",e)}function o(e){l(i,n,s,a,o,"throw",e)}a(void 0)})})();var t}}h.RequestAnimationFrame=function(){const e=Object(s.get)(window,u.VendorRequestAnimationFrame);return t=>e(t)}(),h.CancelAnimationFrame=function(){const e=Object(s.get)(window,u.VendorCancelAnimationFrame);return t=>e(t)}(),h.__category="Device",h.prototype.RM_ANY=u.RM_ANY,h.prototype.RM_OPAQUE=u.RM_OPAQUE,h.prototype.RM_DECAL=u.RM_DECAL,h.prototype.RM_TRANSPARENT=u.RM_TRANSPARENT,h.prototype.RM_ADDITIVE=u.RM_ADDITIVE,h.prototype.RM_DEPTH=u.RM_DEPTH,h.prototype.RM_DISTORTION=u.RM_DISTORTION,h.prototype.RM_FULLSCREEN=u.RM_FULLSCREEN,h.prototype.RM_PICKABLE=u.RM_PICKABLE},"./global/engine/Tw2Logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Logger",function(){return i});var n=r("./global/class/Tw2EventEmitter.js"),s=r("./global/util/index.js");class i extends n.Tw2EventEmitter{constructor(e){super(),this.name="",this.display=!0,this.visible={log:!1,info:!1,debug:!1,warn:!1,error:!0},this.history=100,this.throttle=20,this._logs=[],this._throttled=null,this._debugMode=!1,e.SetLibrary(this)}Debug(e){this._debugMode=e}Register(e){e&&(Object(s.assignIfExists)(this,e,["name","display","history","throttle"]),Object(s.assignIfExists)(this.visible,e.visible,["log","info","debug","warn","error"]))}Log(e="log",t,r){if(t?Object(s.isString)(t)?t={message:t}:Object(s.isError)(t)&&(t={message:t.message,err:t}):t={message:""},t._logged)return t;if(t.type=e.toLowerCase(),t.name=t.name||r||i.constructor.category,t.message=t.message?t.message.charAt(0).toUpperCase()+t.message.substring(1):"",i.LogType[t.type.toUpperCase()]||(t.type="log"),this.display&&this.visible[t.type]||(t.hide=!0),!this.throttle||this._debugMode)this._throttled=null;else if(!t.hide){this._throttled||(this._throttled={}),this._throttled[t.type]||(this._throttled[t.type]=[]);const e=this._throttled[t.type];e.includes(t.message)?t.hide=!0:(e.unshift(t.message),e.splice(this.throttle))}if(!t.hide||this._debugMode){let e="";t.path&&!t.message.includes(t.path)&&(e+="'".concat(t.path,"' ")),t.time&&(e+="in ".concat(t.time.toFixed(3)," secs ")),t.detail&&(e+="(".concat(t.detail,") "));let r="".concat(this.name," ").concat(t.name,":");t.err||t.data?(console.group(r,t.message,e),t.err&&console.error(t.err.stack||t.err.toString()),t.data&&console.debug(JSON.stringify(t.data,null,4)),console.groupEnd()):console[t.type](r,t.message,e)}const n=this._debugMode?1e3:this.history;return n?(this._logs.unshift(t),this._logs.splice(n)):this._logs=[],t._logged=!0,this.emit(t.type,t),t}}i.LogType={ERROR:"error",WARNING:"warn",WARN:"warn",INFO:"info",LOG:"log",DEBUG:"debug"},i.__category="Logger"},"./global/engine/Tw2MotherLode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MotherLode",function(){return n});class n{constructor(){this._loadedObjects={},this._errors={}}AddError(e,t){return this._errors[e]=this._errors[e]||[],t.message.includes(e)||(t.message="".concat(t.message,' "').concat(e,'"')),this._errors[e].includes(t)||(t.path=e,this._errors[e].unshift(t)),t}GetErrors(e){return e&&e in this._errors?Array.from(this._errors[e]):[]}GetLastError(e){return e&&e in this._errors?this._errors[e][0]:void 0}HasErrors(e){return e&&e in this._errors}Find(e){return e in this._loadedObjects?this._loadedObjects[e]:null}Add(e,t){this._loadedObjects[e]=t}Has(e){return!!this._loadedObjects[e]}Remove(e){this._loadedObjects[e]&&Reflect.deleteProperty(this._loadedObjects,e)}Clear(e){for(const t in this._loadedObjects)this._loadedObjects.hasOwnProperty(t)&&(e&&e(this._loadedObjects[t]),this.Remove(t))}UnloadAndClear(e,t){this.Clear(r=>{r.Unload(t),e&&e(r)})}PurgeInactive(e,t,r){for(const n in this._loadedObjects)if(this._loadedObjects.hasOwnProperty(n)){const s=this._loadedObjects[n];if(s.doNotPurge)continue;if(s.IsPurged()){this.Remove(n);continue}let i;s.HasErrors()?i="errored":s.IsUnloaded()?i="unloaded":(s.IsLoaded()||s.IsPrepared())&&(e-s.activeFrame)%t>=r&&s.Unload({hide:!0,detail:"inactivity"})&&(i="inactivity"),i&&(s.OnPurged({detail:i}),this.Remove(n))}}}},"./global/engine/Tw2ResMan.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResMan",function(){return l});var n=r("./global/engine/Tw2MotherLode.js"),s=r("./core/resource/Tw2LoadingObject.js"),i=r("./global/class/Tw2EventEmitter.js"),a=r("./core/index.js"),o=r("./global/util/index.js");function u(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var i=e.apply(t,r);function a(e){u(i,n,s,a,o,"next",e)}function o(e){u(i,n,s,a,o,"throw",e)}a(void 0)})}}class l extends i.Tw2EventEmitter{get pendingLoads(){return this._pendingLoads.length}constructor(e){super(),this.motherLode=new n.Tw2MotherLode,this.systemMirror=!1,this.maxPrepareTime=.05,this.autoPurgeResources=!0,this.activeFrame=0,this.purgeTime=30,this._prepareBudget=0,this._prepareQueue=[],this._purgeTime=0,this._purgeFrame=0,this._purgeFrameLimit=1e3,this._pendingLoads=[],this._noLoadFrames=0,this.tw2=null,e.SetLibrary(this)}Register(e){e&&Object(o.assignIfExists)(this,e,["systemMirror","maxPrepareTime","autoPurgeResources","purgeTime"])}OnPathError(e,t=new a.Tw2Error({path:e})){e=l.NormalizePath(e);const r=this.motherLode.Find(e);return r?r.OnError(t):(this.OnPathEvent(e,"error",t),t)}OnPathEvent(e,t,r={}){const n=this.motherLode.Find(e),s=Object(o.isError)(r)?r:void 0;s&&(this.motherLode.AddError(e,s),r={err:s,message:s.message}),r.path=e,r.message=r.message||t,this.emit(t,e,n,s).msg(l.LogType[t.toUpperCase()],r)}IsLoading(){return this._noLoadFrames<2}Clear(e){this.motherLode.Clear(e)}UnloadAndClear(e,t){this.motherLode.UnloadAndClear(e,t)}Tick(e){0===this._prepareQueue.length&&0===this._pendingLoads.length?this._noLoadFrames<2&&this._noLoadFrames++:this._noLoadFrames=0,this._prepareBudget=this.maxPrepareTime;const t=e.now;for(;this._prepareQueue.length;){const r=this._prepareQueue[0][0],n=this._prepareQueue[0][1],s=this._prepareQueue[0][2];this._prepareQueue.shift();try{if(r.Prepare(n,s),this._prepareBudget-=.001*(e.now-t),this._prepareBudget<0)break}catch(e){this._prepareBudget=0,r.OnError(e)}}return this._purgeTime+=e.dt,this._purgeTime>1&&(this.activeFrame+=1,this._purgeTime-=Math.floor(this._purgeTime),this._purgeFrame+=1,this._purgeFrame>=5&&this.autoPurgeResources&&this.motherLode.PurgeInactive(this._purgeFrame,this._purgeFrameLimit,this.purgeTime)),!0}Queue(e,t,r){this._prepareQueue.push([e,t,r])}GetResource(e,t,r){let n;if(e=l.NormalizePath(e),n=this.motherLode.Find(e))return n.RegisterCallbacks(t,r),n;try{n=new(this.GetResourceConstructor(e))}catch(t){return this.OnPathError(e,t),r&&r(t),null}return n.path=e,n.RegisterCallbacks(t,r),this.LoadResource(n)}FetchResource(e){var t=this;return c(function*(){return new Promise((r,n)=>{t.GetResource(e,r,n)})})()}GetObject(e,t,r){e=l.NormalizePath(e);let n=this.motherLode.Find(e);n?n.AddObject(t,r):((n=new s.Tw2LoadingObject).path=e,n.AddObject(t,r),this.LoadResource(n))}FetchObject(e){var t=this;return c(function*(){return new Promise((r,n)=>{t.GetObject(e,r,n)})})()}LoadResource(e,t){if(this.motherLode.Add(e.path,e),e.HasErrors())return e;try{const r=this.BuildUrl(e.path);if(e.OnRequested(t),e.DoCustomLoad&&e.DoCustomLoad(r,Object(o.getPathExtension)(r)))return e;e.HasErrors()||this.Fetch(r,e.requestResponseType).then(t=>{e.OnLoaded(),this.Queue(e,t)}).catch(t=>{e.OnError(t)})}catch(t){e.OnError(t)}return e}AddPendingLoad(e){this._pendingLoads.push(e)}RemovePendingLoad(e){const t=this._pendingLoads.indexOf(e);-1!==t&&this._pendingLoads.splice(t,1)}Fetch(e,t){var r=this;return c(function*(){return r.AddPendingLoad(e),fetch(e).then(e=>{if(!e.ok)throw e;if(Object(o.isFunction)(t))return t(e);switch(t){case"arraybuffer":return e.arrayBuffer();case"text":return e.text();case"json":return e.json();case"blob":return e.blob();default:throw new Error("Invalid fetch type: "+t)}}).then(t=>(r.RemovePendingLoad(e),t)).catch(t=>{if(r.RemovePendingLoad(e),t.text)return t.text().then(e=>{let r,{status:n,statusText:s}=t;try{s=(r=JSON.parse(e)).message||r.msg||r.error||r.err,Object(o.isBoolean)(s)&&(s=void 0)}catch(e){s="Failed to fetch resource"}throw new a.ErrHTTPStatus({status:n,statusText:s,json:r})});throw t})})()}GetResourceConstructor(e){if(0===(e=l.NormalizePath(e)).indexOf("dynamic:/"))throw new a.ErrFeatureNotImplemented({feature:"Dynamic resources"});const t=Object(o.getPathExtension)(e);if(null===t)throw new a.ErrResourceExtensionUndefined({path:e});const r=this.tw2.GetExtension(t);if(!r)throw new a.ErrResourceExtensionUnregistered({path:e,extension:t});return r}BuildUrl(e){const t=e.indexOf(":/");if(-1===t)throw new a.ErrResourcePrefixUndefined({path:e});const r=e.substr(0,t);if("http"===r||"https"===r)return e;const n=this.tw2.GetPath(r);if(!n)throw new a.ErrResourcePrefixUnregistered({path:e,prefix:r});return n+e.substr(t+2)}static NormalizePath(e){return e=(e=e.toLowerCase()).replace("\\","/")}}l.LogType={ERROR:"error",PURGED:"info",UNLOADED:"info",REQUESTED:"info",RELOADING:"info",LOADED:"info",PREPARED:"log",WARNING:"warn",DEBUG:"debug"},l.__category="Resource Manager"},"./global/engine/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/engine/Tw2Device.js");r.d(t,"Tw2Device",function(){return n.Tw2Device});var s=r("./global/engine/Tw2ResMan.js");r.d(t,"Tw2ResMan",function(){return s.Tw2ResMan});var i=r("./global/engine/Tw2Logger.js");r.d(t,"Tw2Logger",function(){return i.Tw2Logger});var a=r("./global/engine/Tw2Constant.js");r.d(t,"GL_COLOR_BUFFER_BIT",function(){return a.GL_COLOR_BUFFER_BIT}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return a.GL_DEPTH_BUFFER_BIT}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return a.GL_STENCIL_BUFFER_BIT}),r.d(t,"GL_TEXTURE_2D",function(){return a.GL_TEXTURE_2D}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return a.GL_TEXTURE_CUBE_MAP}),r.d(t,"GL_TEXTURE_3D",function(){return a.GL_TEXTURE_3D}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return a.GL_TEXTURE_MAG_FILTER}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return a.GL_TEXTURE_MIN_FILTER}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return a.GL_TEXTURE_WRAP_S}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return a.GL_TEXTURE_WRAP_T}),r.d(t,"GL_BYTE",function(){return a.GL_BYTE}),r.d(t,"GL_UNSIGNED_BYTE",function(){return a.GL_UNSIGNED_BYTE}),r.d(t,"GL_SHORT",function(){return a.GL_SHORT}),r.d(t,"GL_UNSIGNED_SHORT",function(){return a.GL_UNSIGNED_SHORT}),r.d(t,"GL_INT",function(){return a.GL_INT}),r.d(t,"GL_UNSIGNED_INT",function(){return a.GL_UNSIGNED_INT}),r.d(t,"GL_FLOAT",function(){return a.GL_FLOAT}),r.d(t,"GL_HALF_FLOAT_OES",function(){return a.GL_HALF_FLOAT_OES}),r.d(t,"GL_HALF_FLOAT",function(){return a.GL_HALF_FLOAT}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return a.GL_DEPTH_COMPONENT16}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return a.GL_DEPTH_COMPONENT24}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return a.GL_DEPTH_COMPONENT32F}),r.d(t,"GL_FLOAT_VEC2",function(){return a.GL_FLOAT_VEC2}),r.d(t,"GL_FLOAT_VEC3",function(){return a.GL_FLOAT_VEC3}),r.d(t,"GL_FLOAT_VEC4",function(){return a.GL_FLOAT_VEC4}),r.d(t,"GL_INT_VEC2",function(){return a.GL_INT_VEC2}),r.d(t,"GL_INT_VEC3",function(){return a.GL_INT_VEC3}),r.d(t,"GL_INT_VEC4",function(){return a.GL_INT_VEC4}),r.d(t,"GL_BOOL",function(){return a.GL_BOOL}),r.d(t,"GL_BOOL_VEC2",function(){return a.GL_BOOL_VEC2}),r.d(t,"GL_BOOL_VEC3",function(){return a.GL_BOOL_VEC3}),r.d(t,"GL_BOOL_VEC4",function(){return a.GL_BOOL_VEC4}),r.d(t,"GL_FLOAT_MAT2",function(){return a.GL_FLOAT_MAT2}),r.d(t,"GL_FLOAT_MAT3",function(){return a.GL_FLOAT_MAT3}),r.d(t,"GL_FLOAT_MAT4",function(){return a.GL_FLOAT_MAT4}),r.d(t,"GL_TYPE_LENGTH",function(){return a.GL_TYPE_LENGTH}),r.d(t,"GL_SAMPLER_2D",function(){return a.GL_SAMPLER_2D}),r.d(t,"GL_SAMPLER_3D",function(){return a.GL_SAMPLER_3D}),r.d(t,"GL_SAMPLER_CUBE",function(){return a.GL_SAMPLER_CUBE}),r.d(t,"GL_DEPTH_COMPONENT",function(){return a.GL_DEPTH_COMPONENT}),r.d(t,"GL_ALPHA",function(){return a.GL_ALPHA}),r.d(t,"GL_RGB",function(){return a.GL_RGB}),r.d(t,"GL_RGBA",function(){return a.GL_RGBA}),r.d(t,"GL_LUMINANCE",function(){return a.GL_LUMINANCE}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return a.GL_LUMINANCE_ALPHA}),r.d(t,"GL_DEPTH_STENCIL",function(){return a.GL_DEPTH_STENCIL}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return a.GL_UNSIGNED_INT_24_8_WEBGL}),r.d(t,"GL_R8",function(){return a.GL_R8}),r.d(t,"GL_R16F",function(){return a.GL_R16F}),r.d(t,"GL_R32F",function(){return a.GL_R32F}),r.d(t,"GL_R8UI",function(){return a.GL_R8UI}),r.d(t,"GL_RG8",function(){return a.GL_RG8}),r.d(t,"GL_RG16F",function(){return a.GL_RG16F}),r.d(t,"GL_RG32F",function(){return a.GL_RG32F}),r.d(t,"GL_RGB8",function(){return a.GL_RGB8}),r.d(t,"GL_SRGB8",function(){return a.GL_SRGB8}),r.d(t,"GL_RGB565",function(){return a.GL_RGB565}),r.d(t,"GL_R11F_G11F_B10F",function(){return a.GL_R11F_G11F_B10F}),r.d(t,"GL_RGB9_E5",function(){return a.GL_RGB9_E5}),r.d(t,"GL_RGB16F",function(){return a.GL_RGB16F}),r.d(t,"GL_RGB32F",function(){return a.GL_RGB32F}),r.d(t,"GL_RGB8UI",function(){return a.GL_RGB8UI}),r.d(t,"GL_RGBA8",function(){return a.GL_RGBA8}),r.d(t,"GL_RGB5_A1",function(){return a.GL_RGB5_A1}),r.d(t,"GL_RGBA16F",function(){return a.GL_RGBA16F}),r.d(t,"GL_RGBA32F",function(){return a.GL_RGBA32F}),r.d(t,"GL_RGBA8UI",function(){return a.GL_RGBA8UI}),r.d(t,"GL_RGBA16I",function(){return a.GL_RGBA16I}),r.d(t,"GL_RGBA16UI",function(){return a.GL_RGBA16UI}),r.d(t,"GL_RGBA32I",function(){return a.GL_RGBA32I}),r.d(t,"GL_RGBA32UI",function(){return a.GL_RGBA32UI}),r.d(t,"GL_NEAREST",function(){return a.GL_NEAREST}),r.d(t,"GL_LINEAR",function(){return a.GL_LINEAR}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return a.GL_NEAREST_MIPMAP_NEAREST}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return a.GL_LINEAR_MIPMAP_NEAREST}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return a.GL_NEAREST_MIPMAP_LINEAR}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return a.GL_LINEAR_MIPMAP_LINEAR}),r.d(t,"GL_REPEAT",function(){return a.GL_REPEAT}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return a.GL_CLAMP_TO_EDGE}),r.d(t,"GL_MIRRORED_REPEAT",function(){return a.GL_MIRRORED_REPEAT}),r.d(t,"GL_ZERO",function(){return a.GL_ZERO}),r.d(t,"GL_ONE",function(){return a.GL_ONE}),r.d(t,"GL_SRC_COLOR",function(){return a.GL_SRC_COLOR}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return a.GL_ONE_MINUS_SRC_COLOR}),r.d(t,"GL_SRC_ALPHA",function(){return a.GL_SRC_ALPHA}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return a.GL_ONE_MINUS_SRC_ALPHA}),r.d(t,"GL_DST_ALPHA",function(){return a.GL_DST_ALPHA}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return a.GL_ONE_MINUS_DST_ALPHA}),r.d(t,"GL_DST_COLOR",function(){return a.GL_DST_COLOR}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return a.GL_ONE_MINUS_DST_COLOR}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return a.GL_SRC_ALPHA_SATURATE}),r.d(t,"GL_CONSTANT_COLOR",function(){return a.GL_CONSTANT_COLOR}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return a.GL_ONE_MINUS_CONSTANT_COLOR}),r.d(t,"GL_CONSTANT_ALPHA",function(){return a.GL_CONSTANT_ALPHA}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return a.GL_ONE_MINUS_CONSTANT_ALPHA}),r.d(t,"GL_VERTEX_SHADER",function(){return a.GL_VERTEX_SHADER}),r.d(t,"GL_FRAGMENT_SHADER",function(){return a.GL_FRAGMENT_SHADER}),r.d(t,"GL_FRONT",function(){return a.GL_FRONT}),r.d(t,"GL_BACK",function(){return a.GL_BACK}),r.d(t,"GL_FRONT_AND_BACK",function(){return a.GL_FRONT_AND_BACK}),r.d(t,"GL_NEVER",function(){return a.GL_NEVER}),r.d(t,"GL_LESS",function(){return a.GL_LESS}),r.d(t,"GL_EQUAL",function(){return a.GL_EQUAL}),r.d(t,"GL_LEQUAL",function(){return a.GL_LEQUAL}),r.d(t,"GL_GREATER",function(){return a.GL_GREATER}),r.d(t,"GL_NOTEQUAL",function(){return a.GL_NOTEQUAL}),r.d(t,"GL_GEQUAL",function(){return a.GL_GEQUAL}),r.d(t,"GL_ALWAYS",function(){return a.GL_ALWAYS}),r.d(t,"GL_KEEP",function(){return a.GL_KEEP}),r.d(t,"GL_REPLACE",function(){return a.GL_REPLACE}),r.d(t,"GL_INCR",function(){return a.GL_INCR}),r.d(t,"GL_DECR",function(){return a.GL_DECR}),r.d(t,"GL_INCR_WRAP",function(){return a.GL_INCR_WRAP}),r.d(t,"GL_DECR_WRAP",function(){return a.GL_DECR_WRAP}),r.d(t,"GL_INVERT",function(){return a.GL_INVERT}),r.d(t,"GL_STREAM_DRAW",function(){return a.GL_STREAM_DRAW}),r.d(t,"GL_STATIC_DRAW",function(){return a.GL_STATIC_DRAW}),r.d(t,"GL_DYNAMIC_DRAW",function(){return a.GL_DYNAMIC_DRAW}),r.d(t,"GL_ARRAY_BUFFER",function(){return a.GL_ARRAY_BUFFER}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return a.GL_ELEMENT_ARRAY_BUFFER}),r.d(t,"GL_POINTS",function(){return a.GL_POINTS}),r.d(t,"GL_LINES",function(){return a.GL_LINES}),r.d(t,"GL_LINE_LOOP",function(){return a.GL_LINE_LOOP}),r.d(t,"GL_LINE_STRIP",function(){return a.GL_LINE_STRIP}),r.d(t,"GL_TRIANGLES",function(){return a.GL_TRIANGLES}),r.d(t,"GL_TRIANGLE_STRIP",function(){return a.GL_TRIANGLE_STRIP}),r.d(t,"GL_TRIANGLE_FAN",function(){return a.GL_TRIANGLE_FAN}),r.d(t,"GL_CW",function(){return a.GL_CW}),r.d(t,"GL_CCW",function(){return a.GL_CCW}),r.d(t,"GL_CULL_FACE",function(){return a.GL_CULL_FACE}),r.d(t,"GL_DEPTH_TEST",function(){return a.GL_DEPTH_TEST}),r.d(t,"GL_BLEND",function(){return a.GL_BLEND}),r.d(t,"RM_ANY",function(){return a.RM_ANY}),r.d(t,"RM_OPAQUE",function(){return a.RM_OPAQUE}),r.d(t,"RM_DECAL",function(){return a.RM_DECAL}),r.d(t,"RM_TRANSPARENT",function(){return a.RM_TRANSPARENT}),r.d(t,"RM_ADDITIVE",function(){return a.RM_ADDITIVE}),r.d(t,"RM_DEPTH",function(){return a.RM_DEPTH}),r.d(t,"RM_FULLSCREEN",function(){return a.RM_FULLSCREEN}),r.d(t,"RM_PICKABLE",function(){return a.RM_PICKABLE}),r.d(t,"RM_DISTORTION",function(){return a.RM_DISTORTION}),r.d(t,"RS_ZENABLE",function(){return a.RS_ZENABLE}),r.d(t,"RS_FILLMODE",function(){return a.RS_FILLMODE}),r.d(t,"RS_SHADEMODE",function(){return a.RS_SHADEMODE}),r.d(t,"RS_ZWRITEENABLE",function(){return a.RS_ZWRITEENABLE}),r.d(t,"RS_ALPHATESTENABLE",function(){return a.RS_ALPHATESTENABLE}),r.d(t,"RS_LASTPIXEL",function(){return a.RS_LASTPIXEL}),r.d(t,"RS_SRCBLEND",function(){return a.RS_SRCBLEND}),r.d(t,"RS_DESTBLEND",function(){return a.RS_DESTBLEND}),r.d(t,"RS_CULLMODE",function(){return a.RS_CULLMODE}),r.d(t,"RS_ZFUNC",function(){return a.RS_ZFUNC}),r.d(t,"RS_ALPHAREF",function(){return a.RS_ALPHAREF}),r.d(t,"RS_ALPHAFUNC",function(){return a.RS_ALPHAFUNC}),r.d(t,"RS_DITHERENABLE",function(){return a.RS_DITHERENABLE}),r.d(t,"RS_ALPHABLENDENABLE",function(){return a.RS_ALPHABLENDENABLE}),r.d(t,"RS_FOGENABLE",function(){return a.RS_FOGENABLE}),r.d(t,"RS_SPECULARENABLE",function(){return a.RS_SPECULARENABLE}),r.d(t,"RS_FOGCOLOR",function(){return a.RS_FOGCOLOR}),r.d(t,"RS_FOGTABLEMODE",function(){return a.RS_FOGTABLEMODE}),r.d(t,"RS_FOGSTART",function(){return a.RS_FOGSTART}),r.d(t,"RS_FOGEND",function(){return a.RS_FOGEND}),r.d(t,"RS_FOGDENSITY",function(){return a.RS_FOGDENSITY}),r.d(t,"RS_RANGEFOGENABLE",function(){return a.RS_RANGEFOGENABLE}),r.d(t,"RS_STENCILENABLE",function(){return a.RS_STENCILENABLE}),r.d(t,"RS_STENCILFAIL",function(){return a.RS_STENCILFAIL}),r.d(t,"RS_STENCILZFAIL",function(){return a.RS_STENCILZFAIL}),r.d(t,"RS_STENCILPASS",function(){return a.RS_STENCILPASS}),r.d(t,"RS_STENCILFUNC",function(){return a.RS_STENCILFUNC}),r.d(t,"RS_STENCILREF",function(){return a.RS_STENCILREF}),r.d(t,"RS_STENCILMASK",function(){return a.RS_STENCILMASK}),r.d(t,"RS_STENCILWRITEMASK",function(){return a.RS_STENCILWRITEMASK}),r.d(t,"RS_TEXTUREFACTOR",function(){return a.RS_TEXTUREFACTOR}),r.d(t,"RS_WRAP0",function(){return a.RS_WRAP0}),r.d(t,"RS_WRAP1",function(){return a.RS_WRAP1}),r.d(t,"RS_WRAP2",function(){return a.RS_WRAP2}),r.d(t,"RS_WRAP3",function(){return a.RS_WRAP3}),r.d(t,"RS_WRAP4",function(){return a.RS_WRAP4}),r.d(t,"RS_WRAP5",function(){return a.RS_WRAP5}),r.d(t,"RS_WRAP6",function(){return a.RS_WRAP6}),r.d(t,"RS_WRAP7",function(){return a.RS_WRAP7}),r.d(t,"RS_CLIPPING",function(){return a.RS_CLIPPING}),r.d(t,"RS_LIGHTING",function(){return a.RS_LIGHTING}),r.d(t,"RS_AMBIENT",function(){return a.RS_AMBIENT}),r.d(t,"RS_FOGVERTEXMODE",function(){return a.RS_FOGVERTEXMODE}),r.d(t,"RS_COLORVERTEX",function(){return a.RS_COLORVERTEX}),r.d(t,"RS_LOCALVIEWER",function(){return a.RS_LOCALVIEWER}),r.d(t,"RS_NORMALIZENORMALS",function(){return a.RS_NORMALIZENORMALS}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return a.RS_DIFFUSEMATERIALSOURCE}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return a.RS_SPECULARMATERIALSOURCE}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return a.RS_AMBIENTMATERIALSOURCE}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return a.RS_EMISSIVEMATERIALSOURCE}),r.d(t,"RS_VERTEXBLEND",function(){return a.RS_VERTEXBLEND}),r.d(t,"RS_CLIPPLANEENABLE",function(){return a.RS_CLIPPLANEENABLE}),r.d(t,"RS_POINTSIZE",function(){return a.RS_POINTSIZE}),r.d(t,"RS_POINTSIZE_MIN",function(){return a.RS_POINTSIZE_MIN}),r.d(t,"RS_POINTSPRITEENABLE",function(){return a.RS_POINTSPRITEENABLE}),r.d(t,"RS_POINTSCALEENABLE",function(){return a.RS_POINTSCALEENABLE}),r.d(t,"RS_POINTSCALE_A",function(){return a.RS_POINTSCALE_A}),r.d(t,"RS_POINTSCALE_B",function(){return a.RS_POINTSCALE_B}),r.d(t,"RS_POINTSCALE_C",function(){return a.RS_POINTSCALE_C}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return a.RS_MULTISAMPLEANTIALIAS}),r.d(t,"RS_MULTISAMPLEMASK",function(){return a.RS_MULTISAMPLEMASK}),r.d(t,"RS_PATCHEDGESTYLE",function(){return a.RS_PATCHEDGESTYLE}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return a.RS_DEBUGMONITORTOKEN}),r.d(t,"RS_POINTSIZE_MAX",function(){return a.RS_POINTSIZE_MAX}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return a.RS_INDEXEDVERTEXBLENDENABLE}),r.d(t,"RS_COLORWRITEENABLE",function(){return a.RS_COLORWRITEENABLE}),r.d(t,"RS_TWEENFACTOR",function(){return a.RS_TWEENFACTOR}),r.d(t,"RS_BLENDOP",function(){return a.RS_BLENDOP}),r.d(t,"RS_POSITIONDEGREE",function(){return a.RS_POSITIONDEGREE}),r.d(t,"RS_NORMALDEGREE",function(){return a.RS_NORMALDEGREE}),r.d(t,"RS_SCISSORTESTENABLE",function(){return a.RS_SCISSORTESTENABLE}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return a.RS_SLOPESCALEDEPTHBIAS}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return a.RS_ANTIALIASEDLINEENABLE}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return a.RS_TWOSIDEDSTENCILMODE}),r.d(t,"RS_CCW_STENCILFAIL",function(){return a.RS_CCW_STENCILFAIL}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return a.RS_CCW_STENCILZFAIL}),r.d(t,"RS_CCW_STENCILPASS",function(){return a.RS_CCW_STENCILPASS}),r.d(t,"RS_CCW_STENCILFUNC",function(){return a.RS_CCW_STENCILFUNC}),r.d(t,"RS_COLORWRITEENABLE1",function(){return a.RS_COLORWRITEENABLE1}),r.d(t,"RS_COLORWRITEENABLE2",function(){return a.RS_COLORWRITEENABLE2}),r.d(t,"RS_COLORWRITEENABLE3",function(){return a.RS_COLORWRITEENABLE3}),r.d(t,"RS_BLENDFACTOR",function(){return a.RS_BLENDFACTOR}),r.d(t,"RS_SRGBWRITEENABLE",function(){return a.RS_SRGBWRITEENABLE}),r.d(t,"RS_DEPTHBIAS",function(){return a.RS_DEPTHBIAS}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return a.RS_SEPARATEALPHABLENDENABLE}),r.d(t,"RS_SRCBLENDALPHA",function(){return a.RS_SRCBLENDALPHA}),r.d(t,"RS_DESTBLENDALPHA",function(){return a.RS_DESTBLENDALPHA}),r.d(t,"RS_BLENDOPALPHA",function(){return a.RS_BLENDOPALPHA}),r.d(t,"CULL_NONE",function(){return a.CULL_NONE}),r.d(t,"CULL_CW",function(){return a.CULL_CW}),r.d(t,"CULL_CCW",function(){return a.CULL_CCW}),r.d(t,"CMP_NEVER",function(){return a.CMP_NEVER}),r.d(t,"CMP_LESS",function(){return a.CMP_LESS}),r.d(t,"CMP_EQUAL",function(){return a.CMP_EQUAL}),r.d(t,"CMP_LEQUAL",function(){return a.CMP_LEQUAL}),r.d(t,"CMP_GREATER",function(){return a.CMP_GREATER}),r.d(t,"CMP_NOTEQUAL",function(){return a.CMP_NOTEQUAL}),r.d(t,"CMP_GREATEREQUAL",function(){return a.CMP_GREATEREQUAL}),r.d(t,"CMP_ALWAYS",function(){return a.CMP_ALWAYS}),r.d(t,"BLEND_ZERO",function(){return a.BLEND_ZERO}),r.d(t,"BLEND_ONE",function(){return a.BLEND_ONE}),r.d(t,"BLEND_SRCCOLOR",function(){return a.BLEND_SRCCOLOR}),r.d(t,"BLEND_INVSRCCOLOR",function(){return a.BLEND_INVSRCCOLOR}),r.d(t,"BLEND_SRCALPHA",function(){return a.BLEND_SRCALPHA}),r.d(t,"BLEND_INVSRCALPHA",function(){return a.BLEND_INVSRCALPHA}),r.d(t,"BLEND_DESTALPHA",function(){return a.BLEND_DESTALPHA}),r.d(t,"BLEND_INVDESTALPHA",function(){return a.BLEND_INVDESTALPHA}),r.d(t,"BLEND_DESTCOLOR",function(){return a.BLEND_DESTCOLOR}),r.d(t,"BLEND_INVDESTCOLOR",function(){return a.BLEND_INVDESTCOLOR}),r.d(t,"BLEND_SRCALPHASAT",function(){return a.BLEND_SRCALPHASAT}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return a.BLEND_BOTHSRCALPHA}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return a.BLEND_BOTHINVSRCALPHA}),r.d(t,"BLEND_BLENDFACTOR",function(){return a.BLEND_BLENDFACTOR}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return a.BLEND_INVBLENDFACTOR}),r.d(t,"BLENDOP_ADD",function(){return a.BLENDOP_ADD}),r.d(t,"BLENDOP_SUBTRACT",function(){return a.BLENDOP_SUBTRACT}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return a.BLENDOP_REVSUBTRACT}),r.d(t,"BLENDOP_MIN",function(){return a.BLENDOP_MIN}),r.d(t,"BLENDOP_MAX",function(){return a.BLENDOP_MAX}),r.d(t,"TF_ALPHA",function(){return a.TF_ALPHA}),r.d(t,"TF_LUMINANCE",function(){return a.TF_LUMINANCE}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return a.TF_LUMINANCE_ALPHA}),r.d(t,"TF_RGB",function(){return a.TF_RGB}),r.d(t,"TF_RGBA",function(){return a.TF_RGBA}),r.d(t,"TF_RED",function(){return a.TF_RED}),r.d(t,"TF_R",function(){return a.TF_R}),r.d(t,"TF_RG",function(){return a.TF_RG}),r.d(t,"TF_RED_INTEGER",function(){return a.TF_RED_INTEGER}),r.d(t,"TF_R_INTEGER",function(){return a.TF_R_INTEGER}),r.d(t,"TF_RG_INTEGER",function(){return a.TF_RG_INTEGER}),r.d(t,"TF_RGB_INTEGER",function(){return a.TF_RGB_INTEGER}),r.d(t,"TF_RGBA_INTEGER",function(){return a.TF_RGBA_INTEGER}),r.d(t,"TT_UNSIGNED_BYTE",function(){return a.TT_UNSIGNED_BYTE}),r.d(t,"TT_UNSIGNED_INT",function(){return a.TT_UNSIGNED_INT}),r.d(t,"TT_FLOAT",function(){return a.TT_FLOAT}),r.d(t,"TT_HALF_FLOAT",function(){return a.TT_HALF_FLOAT}),r.d(t,"TT_BYTE",function(){return a.TT_BYTE}),r.d(t,"TT_SHORT",function(){return a.TT_SHORT}),r.d(t,"TT_UNSIGNED_SHORT",function(){return a.TT_UNSIGNED_SHORT}),r.d(t,"TT_INT",function(){return a.TT_INT}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return a.TT_UNSIGNED_INTEGER}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return a.TT_UNSIGNED_SHORT_4_4_4_4}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return a.TT_UNSIGNED_SHORT_5_5_5_1}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return a.TT_UNSIGNED_SHORT_5_6_5}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return a.TT_UNSIGNED_INT_2_10_10_10_REV}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return a.TT_UNSIGNED_INT_24_8}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return a.TT_UNSIGNED_INT_10F_11F_11F_REV}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return a.TT_UNSIGNED_INT_5_9_9_9_REV}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return a.TT_FLOAT_32_UNSIGNED_INT_24_8_REV}),r.d(t,"WrapModes",function(){return a.WrapModes}),r.d(t,"BlendTable",function(){return a.BlendTable}),r.d(t,"FilterMode",function(){return a.FilterMode}),r.d(t,"MipFilterMode",function(){return a.MipFilterMode}),r.d(t,"DDS_MAGIC",function(){return a.DDS_MAGIC}),r.d(t,"DDSD_CAPS",function(){return a.DDSD_CAPS}),r.d(t,"DDSD_HEIGHT",function(){return a.DDSD_HEIGHT}),r.d(t,"DDSD_WIDTH",function(){return a.DDSD_WIDTH}),r.d(t,"DDSD_PITCH",function(){return a.DDSD_PITCH}),r.d(t,"DDSD_PIXELFORMAT",function(){return a.DDSD_PIXELFORMAT}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return a.DDSD_MIPMAPCOUNT}),r.d(t,"DDSD_LINEARSIZE",function(){return a.DDSD_LINEARSIZE}),r.d(t,"DDSD_DEPTH",function(){return a.DDSD_DEPTH}),r.d(t,"DDSCAPS_COMPLEX",function(){return a.DDSCAPS_COMPLEX}),r.d(t,"DDSCAPS_MIPMAP",function(){return a.DDSCAPS_MIPMAP}),r.d(t,"DDSCAPS_TEXTURE",function(){return a.DDSCAPS_TEXTURE}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return a.DDSCAPS2_CUBEMAP}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return a.DDSCAPS2_CUBEMAP_POSITIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return a.DDSCAPS2_CUBEMAP_NEGATIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return a.DDSCAPS2_CUBEMAP_POSITIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return a.DDSCAPS2_CUBEMAP_NEGATIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return a.DDSCAPS2_CUBEMAP_POSITIVEZ}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return a.DDSCAPS2_CUBEMAP_NEGATIVEZ}),r.d(t,"DDSCAPS2_VOLUME",function(){return a.DDSCAPS2_VOLUME}),r.d(t,"DDPF_ALPHAPIXELS",function(){return a.DDPF_ALPHAPIXELS}),r.d(t,"DDPF_ALPHA",function(){return a.DDPF_ALPHA}),r.d(t,"DDPF_FOURCC",function(){return a.DDPF_FOURCC}),r.d(t,"DDPF_RGB",function(){return a.DDPF_RGB}),r.d(t,"DDPF_YUV",function(){return a.DDPF_YUV}),r.d(t,"DDPF_LUMINANCE",function(){return a.DDPF_LUMINANCE}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return a.DDS_HEADER_LENGTH_INT}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return a.DDS_HEADER_OFFSET_MAGIC}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return a.DDS_HEADER_OFFSET_SIZE}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return a.DDS_HEADER_OFFSET_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return a.DDS_HEADER_OFFSET_HEIGHT}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return a.DDS_HEADER_OFFSET_WIDTH}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return a.DDS_HEADER_OFFSET_MIPMAP_COUNT}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return a.DDS_HEADER_OFFSET_PF_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return a.DDS_HEADER_OFFSET_PF_FOURCC}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return a.DDS_HEADER_OFFSET_RGB_BPP}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return a.DDS_HEADER_OFFSET_R_MASK}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return a.DDS_HEADER_OFFSET_G_MASK}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return a.DDS_HEADER_OFFSET_B_MASK}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return a.DDS_HEADER_OFFSET_A_MASK}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return a.DDS_HEADER_OFFSET_CAPS1}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return a.DDS_HEADER_OFFSET_CAPS2}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return a.DDS_HEADER_OFFSET_CAPS3}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return a.DDS_HEADER_OFFSET_CAPS4}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return a.DDS_HEADER_OFFSET_DXGI_FORMAT}),r.d(t,"FOURCC_DXT1",function(){return a.FOURCC_DXT1}),r.d(t,"FOURCC_DXT5",function(){return a.FOURCC_DXT5}),r.d(t,"FOURCC_DXT3",function(){return a.FOURCC_DXT3}),r.d(t,"FOURCC_DXT10",function(){return a.FOURCC_DXT10}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return a.FOURCC_D3DFMT_R16G16B16A16F}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return a.FOURCC_D3DFMT_R32G32B32A32F}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return a.DXGI_FORMAT_R16G16B16A16_FLOAT}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return a.DXGI_FORMAT_B8G8R8X8_UNORM}),r.d(t,"VendorRequestAnimationFrame",function(){return a.VendorRequestAnimationFrame}),r.d(t,"VendorCancelAnimationFrame",function(){return a.VendorCancelAnimationFrame}),r.d(t,"VendorRequestFullScreen",function(){return a.VendorRequestFullScreen}),r.d(t,"VendorExitFullScreen",function(){return a.VendorExitFullScreen}),r.d(t,"VendorGetFullScreenElement",function(){return a.VendorGetFullScreenElement}),r.d(t,"VendorWebglPrefixes",function(){return a.VendorWebglPrefixes})},"./global/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"resMan",function(){return o}),r.d(t,"device",function(){return u}),r.d(t,"util",function(){return c});var n=r("./global/class/index.js");r.d(t,"Tw2BaseClass",function(){return n.Tw2BaseClass}),r.d(t,"Tw2EventEmitter",function(){return n.Tw2EventEmitter}),r.d(t,"Tw2Notifications",function(){return n.Tw2Notifications}),r.d(t,"Tw2Schema",function(){return n.Tw2Schema});var s=r("./global/engine/Tw2Constant.js");r.d(t,"GL_COLOR_BUFFER_BIT",function(){return s.GL_COLOR_BUFFER_BIT}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return s.GL_DEPTH_BUFFER_BIT}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return s.GL_STENCIL_BUFFER_BIT}),r.d(t,"GL_TEXTURE_2D",function(){return s.GL_TEXTURE_2D}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return s.GL_TEXTURE_CUBE_MAP}),r.d(t,"GL_TEXTURE_3D",function(){return s.GL_TEXTURE_3D}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return s.GL_TEXTURE_MAG_FILTER}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return s.GL_TEXTURE_MIN_FILTER}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return s.GL_TEXTURE_WRAP_S}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return s.GL_TEXTURE_WRAP_T}),r.d(t,"GL_BYTE",function(){return s.GL_BYTE}),r.d(t,"GL_UNSIGNED_BYTE",function(){return s.GL_UNSIGNED_BYTE}),r.d(t,"GL_SHORT",function(){return s.GL_SHORT}),r.d(t,"GL_UNSIGNED_SHORT",function(){return s.GL_UNSIGNED_SHORT}),r.d(t,"GL_INT",function(){return s.GL_INT}),r.d(t,"GL_UNSIGNED_INT",function(){return s.GL_UNSIGNED_INT}),r.d(t,"GL_FLOAT",function(){return s.GL_FLOAT}),r.d(t,"GL_HALF_FLOAT_OES",function(){return s.GL_HALF_FLOAT_OES}),r.d(t,"GL_HALF_FLOAT",function(){return s.GL_HALF_FLOAT}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return s.GL_DEPTH_COMPONENT16}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return s.GL_DEPTH_COMPONENT24}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return s.GL_DEPTH_COMPONENT32F}),r.d(t,"GL_FLOAT_VEC2",function(){return s.GL_FLOAT_VEC2}),r.d(t,"GL_FLOAT_VEC3",function(){return s.GL_FLOAT_VEC3}),r.d(t,"GL_FLOAT_VEC4",function(){return s.GL_FLOAT_VEC4}),r.d(t,"GL_INT_VEC2",function(){return s.GL_INT_VEC2}),r.d(t,"GL_INT_VEC3",function(){return s.GL_INT_VEC3}),r.d(t,"GL_INT_VEC4",function(){return s.GL_INT_VEC4}),r.d(t,"GL_BOOL",function(){return s.GL_BOOL}),r.d(t,"GL_BOOL_VEC2",function(){return s.GL_BOOL_VEC2}),r.d(t,"GL_BOOL_VEC3",function(){return s.GL_BOOL_VEC3}),r.d(t,"GL_BOOL_VEC4",function(){return s.GL_BOOL_VEC4}),r.d(t,"GL_FLOAT_MAT2",function(){return s.GL_FLOAT_MAT2}),r.d(t,"GL_FLOAT_MAT3",function(){return s.GL_FLOAT_MAT3}),r.d(t,"GL_FLOAT_MAT4",function(){return s.GL_FLOAT_MAT4}),r.d(t,"GL_TYPE_LENGTH",function(){return s.GL_TYPE_LENGTH}),r.d(t,"GL_SAMPLER_2D",function(){return s.GL_SAMPLER_2D}),r.d(t,"GL_SAMPLER_3D",function(){return s.GL_SAMPLER_3D}),r.d(t,"GL_SAMPLER_CUBE",function(){return s.GL_SAMPLER_CUBE}),r.d(t,"GL_DEPTH_COMPONENT",function(){return s.GL_DEPTH_COMPONENT}),r.d(t,"GL_ALPHA",function(){return s.GL_ALPHA}),r.d(t,"GL_RGB",function(){return s.GL_RGB}),r.d(t,"GL_RGBA",function(){return s.GL_RGBA}),r.d(t,"GL_LUMINANCE",function(){return s.GL_LUMINANCE}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return s.GL_LUMINANCE_ALPHA}),r.d(t,"GL_DEPTH_STENCIL",function(){return s.GL_DEPTH_STENCIL}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return s.GL_UNSIGNED_INT_24_8_WEBGL}),r.d(t,"GL_R8",function(){return s.GL_R8}),r.d(t,"GL_R16F",function(){return s.GL_R16F}),r.d(t,"GL_R32F",function(){return s.GL_R32F}),r.d(t,"GL_R8UI",function(){return s.GL_R8UI}),r.d(t,"GL_RG8",function(){return s.GL_RG8}),r.d(t,"GL_RG16F",function(){return s.GL_RG16F}),r.d(t,"GL_RG32F",function(){return s.GL_RG32F}),r.d(t,"GL_RGB8",function(){return s.GL_RGB8}),r.d(t,"GL_SRGB8",function(){return s.GL_SRGB8}),r.d(t,"GL_RGB565",function(){return s.GL_RGB565}),r.d(t,"GL_R11F_G11F_B10F",function(){return s.GL_R11F_G11F_B10F}),r.d(t,"GL_RGB9_E5",function(){return s.GL_RGB9_E5}),r.d(t,"GL_RGB16F",function(){return s.GL_RGB16F}),r.d(t,"GL_RGB32F",function(){return s.GL_RGB32F}),r.d(t,"GL_RGB8UI",function(){return s.GL_RGB8UI}),r.d(t,"GL_RGBA8",function(){return s.GL_RGBA8}),r.d(t,"GL_RGB5_A1",function(){return s.GL_RGB5_A1}),r.d(t,"GL_RGBA16F",function(){return s.GL_RGBA16F}),r.d(t,"GL_RGBA32F",function(){return s.GL_RGBA32F}),r.d(t,"GL_RGBA8UI",function(){return s.GL_RGBA8UI}),r.d(t,"GL_RGBA16I",function(){return s.GL_RGBA16I}),r.d(t,"GL_RGBA16UI",function(){return s.GL_RGBA16UI}),r.d(t,"GL_RGBA32I",function(){return s.GL_RGBA32I}),r.d(t,"GL_RGBA32UI",function(){return s.GL_RGBA32UI}),r.d(t,"GL_NEAREST",function(){return s.GL_NEAREST}),r.d(t,"GL_LINEAR",function(){return s.GL_LINEAR}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return s.GL_NEAREST_MIPMAP_NEAREST}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return s.GL_LINEAR_MIPMAP_NEAREST}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return s.GL_NEAREST_MIPMAP_LINEAR}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return s.GL_LINEAR_MIPMAP_LINEAR}),r.d(t,"GL_REPEAT",function(){return s.GL_REPEAT}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return s.GL_CLAMP_TO_EDGE}),r.d(t,"GL_MIRRORED_REPEAT",function(){return s.GL_MIRRORED_REPEAT}),r.d(t,"GL_ZERO",function(){return s.GL_ZERO}),r.d(t,"GL_ONE",function(){return s.GL_ONE}),r.d(t,"GL_SRC_COLOR",function(){return s.GL_SRC_COLOR}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return s.GL_ONE_MINUS_SRC_COLOR}),r.d(t,"GL_SRC_ALPHA",function(){return s.GL_SRC_ALPHA}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return s.GL_ONE_MINUS_SRC_ALPHA}),r.d(t,"GL_DST_ALPHA",function(){return s.GL_DST_ALPHA}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return s.GL_ONE_MINUS_DST_ALPHA}),r.d(t,"GL_DST_COLOR",function(){return s.GL_DST_COLOR}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return s.GL_ONE_MINUS_DST_COLOR}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return s.GL_SRC_ALPHA_SATURATE}),r.d(t,"GL_CONSTANT_COLOR",function(){return s.GL_CONSTANT_COLOR}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return s.GL_ONE_MINUS_CONSTANT_COLOR}),r.d(t,"GL_CONSTANT_ALPHA",function(){return s.GL_CONSTANT_ALPHA}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return s.GL_ONE_MINUS_CONSTANT_ALPHA}),r.d(t,"GL_VERTEX_SHADER",function(){return s.GL_VERTEX_SHADER}),r.d(t,"GL_FRAGMENT_SHADER",function(){return s.GL_FRAGMENT_SHADER}),r.d(t,"GL_FRONT",function(){return s.GL_FRONT}),r.d(t,"GL_BACK",function(){return s.GL_BACK}),r.d(t,"GL_FRONT_AND_BACK",function(){return s.GL_FRONT_AND_BACK}),r.d(t,"GL_NEVER",function(){return s.GL_NEVER}),r.d(t,"GL_LESS",function(){return s.GL_LESS}),r.d(t,"GL_EQUAL",function(){return s.GL_EQUAL}),r.d(t,"GL_LEQUAL",function(){return s.GL_LEQUAL}),r.d(t,"GL_GREATER",function(){return s.GL_GREATER}),r.d(t,"GL_NOTEQUAL",function(){return s.GL_NOTEQUAL}),r.d(t,"GL_GEQUAL",function(){return s.GL_GEQUAL}),r.d(t,"GL_ALWAYS",function(){return s.GL_ALWAYS}),r.d(t,"GL_KEEP",function(){return s.GL_KEEP}),r.d(t,"GL_REPLACE",function(){return s.GL_REPLACE}),r.d(t,"GL_INCR",function(){return s.GL_INCR}),r.d(t,"GL_DECR",function(){return s.GL_DECR}),r.d(t,"GL_INCR_WRAP",function(){return s.GL_INCR_WRAP}),r.d(t,"GL_DECR_WRAP",function(){return s.GL_DECR_WRAP}),r.d(t,"GL_INVERT",function(){return s.GL_INVERT}),r.d(t,"GL_STREAM_DRAW",function(){return s.GL_STREAM_DRAW}),r.d(t,"GL_STATIC_DRAW",function(){return s.GL_STATIC_DRAW}),r.d(t,"GL_DYNAMIC_DRAW",function(){return s.GL_DYNAMIC_DRAW}),r.d(t,"GL_ARRAY_BUFFER",function(){return s.GL_ARRAY_BUFFER}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return s.GL_ELEMENT_ARRAY_BUFFER}),r.d(t,"GL_POINTS",function(){return s.GL_POINTS}),r.d(t,"GL_LINES",function(){return s.GL_LINES}),r.d(t,"GL_LINE_LOOP",function(){return s.GL_LINE_LOOP}),r.d(t,"GL_LINE_STRIP",function(){return s.GL_LINE_STRIP}),r.d(t,"GL_TRIANGLES",function(){return s.GL_TRIANGLES}),r.d(t,"GL_TRIANGLE_STRIP",function(){return s.GL_TRIANGLE_STRIP}),r.d(t,"GL_TRIANGLE_FAN",function(){return s.GL_TRIANGLE_FAN}),r.d(t,"GL_CW",function(){return s.GL_CW}),r.d(t,"GL_CCW",function(){return s.GL_CCW}),r.d(t,"GL_CULL_FACE",function(){return s.GL_CULL_FACE}),r.d(t,"GL_DEPTH_TEST",function(){return s.GL_DEPTH_TEST}),r.d(t,"GL_BLEND",function(){return s.GL_BLEND}),r.d(t,"RM_ANY",function(){return s.RM_ANY}),r.d(t,"RM_OPAQUE",function(){return s.RM_OPAQUE}),r.d(t,"RM_DECAL",function(){return s.RM_DECAL}),r.d(t,"RM_TRANSPARENT",function(){return s.RM_TRANSPARENT}),r.d(t,"RM_ADDITIVE",function(){return s.RM_ADDITIVE}),r.d(t,"RM_DEPTH",function(){return s.RM_DEPTH}),r.d(t,"RM_FULLSCREEN",function(){return s.RM_FULLSCREEN}),r.d(t,"RM_PICKABLE",function(){return s.RM_PICKABLE}),r.d(t,"RM_DISTORTION",function(){return s.RM_DISTORTION}),r.d(t,"RS_ZENABLE",function(){return s.RS_ZENABLE}),r.d(t,"RS_FILLMODE",function(){return s.RS_FILLMODE}),r.d(t,"RS_SHADEMODE",function(){return s.RS_SHADEMODE}),r.d(t,"RS_ZWRITEENABLE",function(){return s.RS_ZWRITEENABLE}),r.d(t,"RS_ALPHATESTENABLE",function(){return s.RS_ALPHATESTENABLE}),r.d(t,"RS_LASTPIXEL",function(){return s.RS_LASTPIXEL}),r.d(t,"RS_SRCBLEND",function(){return s.RS_SRCBLEND}),r.d(t,"RS_DESTBLEND",function(){return s.RS_DESTBLEND}),r.d(t,"RS_CULLMODE",function(){return s.RS_CULLMODE}),r.d(t,"RS_ZFUNC",function(){return s.RS_ZFUNC}),r.d(t,"RS_ALPHAREF",function(){return s.RS_ALPHAREF}),r.d(t,"RS_ALPHAFUNC",function(){return s.RS_ALPHAFUNC}),r.d(t,"RS_DITHERENABLE",function(){return s.RS_DITHERENABLE}),r.d(t,"RS_ALPHABLENDENABLE",function(){return s.RS_ALPHABLENDENABLE}),r.d(t,"RS_FOGENABLE",function(){return s.RS_FOGENABLE}),r.d(t,"RS_SPECULARENABLE",function(){return s.RS_SPECULARENABLE}),r.d(t,"RS_FOGCOLOR",function(){return s.RS_FOGCOLOR}),r.d(t,"RS_FOGTABLEMODE",function(){return s.RS_FOGTABLEMODE}),r.d(t,"RS_FOGSTART",function(){return s.RS_FOGSTART}),r.d(t,"RS_FOGEND",function(){return s.RS_FOGEND}),r.d(t,"RS_FOGDENSITY",function(){return s.RS_FOGDENSITY}),r.d(t,"RS_RANGEFOGENABLE",function(){return s.RS_RANGEFOGENABLE}),r.d(t,"RS_STENCILENABLE",function(){return s.RS_STENCILENABLE}),r.d(t,"RS_STENCILFAIL",function(){return s.RS_STENCILFAIL}),r.d(t,"RS_STENCILZFAIL",function(){return s.RS_STENCILZFAIL}),r.d(t,"RS_STENCILPASS",function(){return s.RS_STENCILPASS}),r.d(t,"RS_STENCILFUNC",function(){return s.RS_STENCILFUNC}),r.d(t,"RS_STENCILREF",function(){return s.RS_STENCILREF}),r.d(t,"RS_STENCILMASK",function(){return s.RS_STENCILMASK}),r.d(t,"RS_STENCILWRITEMASK",function(){return s.RS_STENCILWRITEMASK}),r.d(t,"RS_TEXTUREFACTOR",function(){return s.RS_TEXTUREFACTOR}),r.d(t,"RS_WRAP0",function(){return s.RS_WRAP0}),r.d(t,"RS_WRAP1",function(){return s.RS_WRAP1}),r.d(t,"RS_WRAP2",function(){return s.RS_WRAP2}),r.d(t,"RS_WRAP3",function(){return s.RS_WRAP3}),r.d(t,"RS_WRAP4",function(){return s.RS_WRAP4}),r.d(t,"RS_WRAP5",function(){return s.RS_WRAP5}),r.d(t,"RS_WRAP6",function(){return s.RS_WRAP6}),r.d(t,"RS_WRAP7",function(){return s.RS_WRAP7}),r.d(t,"RS_CLIPPING",function(){return s.RS_CLIPPING}),r.d(t,"RS_LIGHTING",function(){return s.RS_LIGHTING}),r.d(t,"RS_AMBIENT",function(){return s.RS_AMBIENT}),r.d(t,"RS_FOGVERTEXMODE",function(){return s.RS_FOGVERTEXMODE}),r.d(t,"RS_COLORVERTEX",function(){return s.RS_COLORVERTEX}),r.d(t,"RS_LOCALVIEWER",function(){return s.RS_LOCALVIEWER}),r.d(t,"RS_NORMALIZENORMALS",function(){return s.RS_NORMALIZENORMALS}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return s.RS_DIFFUSEMATERIALSOURCE}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return s.RS_SPECULARMATERIALSOURCE}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return s.RS_AMBIENTMATERIALSOURCE}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return s.RS_EMISSIVEMATERIALSOURCE}),r.d(t,"RS_VERTEXBLEND",function(){return s.RS_VERTEXBLEND}),r.d(t,"RS_CLIPPLANEENABLE",function(){return s.RS_CLIPPLANEENABLE}),r.d(t,"RS_POINTSIZE",function(){return s.RS_POINTSIZE}),r.d(t,"RS_POINTSIZE_MIN",function(){return s.RS_POINTSIZE_MIN}),r.d(t,"RS_POINTSPRITEENABLE",function(){return s.RS_POINTSPRITEENABLE}),r.d(t,"RS_POINTSCALEENABLE",function(){return s.RS_POINTSCALEENABLE}),r.d(t,"RS_POINTSCALE_A",function(){return s.RS_POINTSCALE_A}),r.d(t,"RS_POINTSCALE_B",function(){return s.RS_POINTSCALE_B}),r.d(t,"RS_POINTSCALE_C",function(){return s.RS_POINTSCALE_C}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return s.RS_MULTISAMPLEANTIALIAS}),r.d(t,"RS_MULTISAMPLEMASK",function(){return s.RS_MULTISAMPLEMASK}),r.d(t,"RS_PATCHEDGESTYLE",function(){return s.RS_PATCHEDGESTYLE}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return s.RS_DEBUGMONITORTOKEN}),r.d(t,"RS_POINTSIZE_MAX",function(){return s.RS_POINTSIZE_MAX}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return s.RS_INDEXEDVERTEXBLENDENABLE}),r.d(t,"RS_COLORWRITEENABLE",function(){return s.RS_COLORWRITEENABLE}),r.d(t,"RS_TWEENFACTOR",function(){return s.RS_TWEENFACTOR}),r.d(t,"RS_BLENDOP",function(){return s.RS_BLENDOP}),r.d(t,"RS_POSITIONDEGREE",function(){return s.RS_POSITIONDEGREE}),r.d(t,"RS_NORMALDEGREE",function(){return s.RS_NORMALDEGREE}),r.d(t,"RS_SCISSORTESTENABLE",function(){return s.RS_SCISSORTESTENABLE}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return s.RS_SLOPESCALEDEPTHBIAS}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return s.RS_ANTIALIASEDLINEENABLE}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return s.RS_TWOSIDEDSTENCILMODE}),r.d(t,"RS_CCW_STENCILFAIL",function(){return s.RS_CCW_STENCILFAIL}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return s.RS_CCW_STENCILZFAIL}),r.d(t,"RS_CCW_STENCILPASS",function(){return s.RS_CCW_STENCILPASS}),r.d(t,"RS_CCW_STENCILFUNC",function(){return s.RS_CCW_STENCILFUNC}),r.d(t,"RS_COLORWRITEENABLE1",function(){return s.RS_COLORWRITEENABLE1}),r.d(t,"RS_COLORWRITEENABLE2",function(){return s.RS_COLORWRITEENABLE2}),r.d(t,"RS_COLORWRITEENABLE3",function(){return s.RS_COLORWRITEENABLE3}),r.d(t,"RS_BLENDFACTOR",function(){return s.RS_BLENDFACTOR}),r.d(t,"RS_SRGBWRITEENABLE",function(){return s.RS_SRGBWRITEENABLE}),r.d(t,"RS_DEPTHBIAS",function(){return s.RS_DEPTHBIAS}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return s.RS_SEPARATEALPHABLENDENABLE}),r.d(t,"RS_SRCBLENDALPHA",function(){return s.RS_SRCBLENDALPHA}),r.d(t,"RS_DESTBLENDALPHA",function(){return s.RS_DESTBLENDALPHA}),r.d(t,"RS_BLENDOPALPHA",function(){return s.RS_BLENDOPALPHA}),r.d(t,"CULL_NONE",function(){return s.CULL_NONE}),r.d(t,"CULL_CW",function(){return s.CULL_CW}),r.d(t,"CULL_CCW",function(){return s.CULL_CCW}),r.d(t,"CMP_NEVER",function(){return s.CMP_NEVER}),r.d(t,"CMP_LESS",function(){return s.CMP_LESS}),r.d(t,"CMP_EQUAL",function(){return s.CMP_EQUAL}),r.d(t,"CMP_LEQUAL",function(){return s.CMP_LEQUAL}),r.d(t,"CMP_GREATER",function(){return s.CMP_GREATER}),r.d(t,"CMP_NOTEQUAL",function(){return s.CMP_NOTEQUAL}),r.d(t,"CMP_GREATEREQUAL",function(){return s.CMP_GREATEREQUAL}),r.d(t,"CMP_ALWAYS",function(){return s.CMP_ALWAYS}),r.d(t,"BLEND_ZERO",function(){return s.BLEND_ZERO}),r.d(t,"BLEND_ONE",function(){return s.BLEND_ONE}),r.d(t,"BLEND_SRCCOLOR",function(){return s.BLEND_SRCCOLOR}),r.d(t,"BLEND_INVSRCCOLOR",function(){return s.BLEND_INVSRCCOLOR}),r.d(t,"BLEND_SRCALPHA",function(){return s.BLEND_SRCALPHA}),r.d(t,"BLEND_INVSRCALPHA",function(){return s.BLEND_INVSRCALPHA}),r.d(t,"BLEND_DESTALPHA",function(){return s.BLEND_DESTALPHA}),r.d(t,"BLEND_INVDESTALPHA",function(){return s.BLEND_INVDESTALPHA}),r.d(t,"BLEND_DESTCOLOR",function(){return s.BLEND_DESTCOLOR}),r.d(t,"BLEND_INVDESTCOLOR",function(){return s.BLEND_INVDESTCOLOR}),r.d(t,"BLEND_SRCALPHASAT",function(){return s.BLEND_SRCALPHASAT}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return s.BLEND_BOTHSRCALPHA}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return s.BLEND_BOTHINVSRCALPHA}),r.d(t,"BLEND_BLENDFACTOR",function(){return s.BLEND_BLENDFACTOR}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return s.BLEND_INVBLENDFACTOR}),r.d(t,"BLENDOP_ADD",function(){return s.BLENDOP_ADD}),r.d(t,"BLENDOP_SUBTRACT",function(){return s.BLENDOP_SUBTRACT}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return s.BLENDOP_REVSUBTRACT}),r.d(t,"BLENDOP_MIN",function(){return s.BLENDOP_MIN}),r.d(t,"BLENDOP_MAX",function(){return s.BLENDOP_MAX}),r.d(t,"TF_ALPHA",function(){return s.TF_ALPHA}),r.d(t,"TF_LUMINANCE",function(){return s.TF_LUMINANCE}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return s.TF_LUMINANCE_ALPHA}),r.d(t,"TF_RGB",function(){return s.TF_RGB}),r.d(t,"TF_RGBA",function(){return s.TF_RGBA}),r.d(t,"TF_RED",function(){return s.TF_RED}),r.d(t,"TF_R",function(){return s.TF_R}),r.d(t,"TF_RG",function(){return s.TF_RG}),r.d(t,"TF_RED_INTEGER",function(){return s.TF_RED_INTEGER}),r.d(t,"TF_R_INTEGER",function(){return s.TF_R_INTEGER}),r.d(t,"TF_RG_INTEGER",function(){return s.TF_RG_INTEGER}),r.d(t,"TF_RGB_INTEGER",function(){return s.TF_RGB_INTEGER}),r.d(t,"TF_RGBA_INTEGER",function(){return s.TF_RGBA_INTEGER}),r.d(t,"TT_UNSIGNED_BYTE",function(){return s.TT_UNSIGNED_BYTE}),r.d(t,"TT_UNSIGNED_INT",function(){return s.TT_UNSIGNED_INT}),r.d(t,"TT_FLOAT",function(){return s.TT_FLOAT}),r.d(t,"TT_HALF_FLOAT",function(){return s.TT_HALF_FLOAT}),r.d(t,"TT_BYTE",function(){return s.TT_BYTE}),r.d(t,"TT_SHORT",function(){return s.TT_SHORT}),r.d(t,"TT_UNSIGNED_SHORT",function(){return s.TT_UNSIGNED_SHORT}),r.d(t,"TT_INT",function(){return s.TT_INT}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return s.TT_UNSIGNED_INTEGER}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return s.TT_UNSIGNED_SHORT_4_4_4_4}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return s.TT_UNSIGNED_SHORT_5_5_5_1}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return s.TT_UNSIGNED_SHORT_5_6_5}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return s.TT_UNSIGNED_INT_2_10_10_10_REV}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return s.TT_UNSIGNED_INT_24_8}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return s.TT_UNSIGNED_INT_10F_11F_11F_REV}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return s.TT_UNSIGNED_INT_5_9_9_9_REV}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return s.TT_FLOAT_32_UNSIGNED_INT_24_8_REV}),r.d(t,"WrapModes",function(){return s.WrapModes}),r.d(t,"BlendTable",function(){return s.BlendTable}),r.d(t,"FilterMode",function(){return s.FilterMode}),r.d(t,"MipFilterMode",function(){return s.MipFilterMode}),r.d(t,"DDS_MAGIC",function(){return s.DDS_MAGIC}),r.d(t,"DDSD_CAPS",function(){return s.DDSD_CAPS}),r.d(t,"DDSD_HEIGHT",function(){return s.DDSD_HEIGHT}),r.d(t,"DDSD_WIDTH",function(){return s.DDSD_WIDTH}),r.d(t,"DDSD_PITCH",function(){return s.DDSD_PITCH}),r.d(t,"DDSD_PIXELFORMAT",function(){return s.DDSD_PIXELFORMAT}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return s.DDSD_MIPMAPCOUNT}),r.d(t,"DDSD_LINEARSIZE",function(){return s.DDSD_LINEARSIZE}),r.d(t,"DDSD_DEPTH",function(){return s.DDSD_DEPTH}),r.d(t,"DDSCAPS_COMPLEX",function(){return s.DDSCAPS_COMPLEX}),r.d(t,"DDSCAPS_MIPMAP",function(){return s.DDSCAPS_MIPMAP}),r.d(t,"DDSCAPS_TEXTURE",function(){return s.DDSCAPS_TEXTURE}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return s.DDSCAPS2_CUBEMAP}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEZ}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEZ}),r.d(t,"DDSCAPS2_VOLUME",function(){return s.DDSCAPS2_VOLUME}),r.d(t,"DDPF_ALPHAPIXELS",function(){return s.DDPF_ALPHAPIXELS}),r.d(t,"DDPF_ALPHA",function(){return s.DDPF_ALPHA}),r.d(t,"DDPF_FOURCC",function(){return s.DDPF_FOURCC}),r.d(t,"DDPF_RGB",function(){return s.DDPF_RGB}),r.d(t,"DDPF_YUV",function(){return s.DDPF_YUV}),r.d(t,"DDPF_LUMINANCE",function(){return s.DDPF_LUMINANCE}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return s.DDS_HEADER_LENGTH_INT}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return s.DDS_HEADER_OFFSET_MAGIC}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return s.DDS_HEADER_OFFSET_SIZE}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return s.DDS_HEADER_OFFSET_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return s.DDS_HEADER_OFFSET_HEIGHT}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return s.DDS_HEADER_OFFSET_WIDTH}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return s.DDS_HEADER_OFFSET_MIPMAP_COUNT}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return s.DDS_HEADER_OFFSET_PF_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return s.DDS_HEADER_OFFSET_PF_FOURCC}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return s.DDS_HEADER_OFFSET_RGB_BPP}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return s.DDS_HEADER_OFFSET_R_MASK}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return s.DDS_HEADER_OFFSET_G_MASK}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return s.DDS_HEADER_OFFSET_B_MASK}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return s.DDS_HEADER_OFFSET_A_MASK}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return s.DDS_HEADER_OFFSET_CAPS1}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return s.DDS_HEADER_OFFSET_CAPS2}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return s.DDS_HEADER_OFFSET_CAPS3}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return s.DDS_HEADER_OFFSET_CAPS4}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return s.DDS_HEADER_OFFSET_DXGI_FORMAT}),r.d(t,"FOURCC_DXT1",function(){return s.FOURCC_DXT1}),r.d(t,"FOURCC_DXT5",function(){return s.FOURCC_DXT5}),r.d(t,"FOURCC_DXT3",function(){return s.FOURCC_DXT3}),r.d(t,"FOURCC_DXT10",function(){return s.FOURCC_DXT10}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return s.FOURCC_D3DFMT_R16G16B16A16F}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return s.FOURCC_D3DFMT_R32G32B32A32F}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return s.DXGI_FORMAT_R16G16B16A16_FLOAT}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return s.DXGI_FORMAT_B8G8R8X8_UNORM}),r.d(t,"VendorRequestAnimationFrame",function(){return s.VendorRequestAnimationFrame}),r.d(t,"VendorCancelAnimationFrame",function(){return s.VendorCancelAnimationFrame}),r.d(t,"VendorRequestFullScreen",function(){return s.VendorRequestFullScreen}),r.d(t,"VendorExitFullScreen",function(){return s.VendorExitFullScreen}),r.d(t,"VendorGetFullScreenElement",function(){return s.VendorGetFullScreenElement}),r.d(t,"VendorWebglPrefixes",function(){return s.VendorWebglPrefixes});var i=r("./global/Tw2Library.js");r.d(t,"tw2",function(){return i.tw2});var a=r("./global/math/index.js");r.d(t,"num",function(){return a.num}),r.d(t,"vec2",function(){return a.vec2}),r.d(t,"vec3",function(){return a.vec3}),r.d(t,"vec4",function(){return a.vec4}),r.d(t,"quat",function(){return a.quat}),r.d(t,"mat3",function(){return a.mat3}),r.d(t,"mat4",function(){return a.mat4}),r.d(t,"noise",function(){return a.noise}),r.d(t,"curve",function(){return a.curve}),r.d(t,"box3",function(){return a.box3}),r.d(t,"tri3",function(){return a.tri3}),r.d(t,"lne3",function(){return a.lne3}),r.d(t,"pln",function(){return a.pln}),r.d(t,"ray3",function(){return a.ray3}),r.d(t,"sph3",function(){return a.sph3});const o=i.tw2.resMan,u=i.tw2.device,c=i.tw2.util},"./global/math/box3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"box3",function(){return i});var n=r("./global/math/num.js"),s=r("./global/math/vec3.js");r("./global/math/sph3.js"),r("./global/math/mat4.js");const i={bounds:{}};let a=null,o=null;i.$min=function(e){return e.subarray(0,3)},i.$max=function(e){return e.subarray(3,6)},i.addPoint=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[0]),e[4]=Math.max(t[4],r[1]),e[5]=Math.max(t[5],r[2]),e},i.addPoints=function(e,t,r){let n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5];for(let e=0;e<r.length;e++)n=Math.min(n,r[e][0]),s=Math.min(s,r[e][1]),i=Math.min(i,r[e][2]),a=Math.max(a,r[e][0]),o=Math.max(o,r[e][1]),u=Math.max(u,r[e][2]);return e[0]=n,e[1]=s,e[2]=i,e[3]=a,e[4]=o,e[5]=u,e},i.clone=function(e){let t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t},i.contains=function(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&t[4]<=e[4]&&e[2]<=t[2]&&t[5]<=e[5]},i.containsBounds=function(e,t,r){return e[0]<=t[0]&&r[0]<=e[3]&&e[1]<=t[1]&&r[1]<=e[4]&&e[2]<=t[2]&&r[2]<=e[5]},i.containsPoint=function(e,t){return!(t[0]<e[0]||t[0]>e[3]||t[1]<e[1]||t[1]>e[4]||t[2]<e[2]||t[2]>e[5])},i.containsValue=function(e,t,r,n){return!(t<e[0]||t>e[3]||r<e[1]||r>e[4]||n<e[2]||n>e[5])},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e},i.copyMin=s.vec3.copy,i.copyMax=function(e,t){return e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.create=function(){return i.empty(new Float32Array(6))},i.distanceToPoint=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],s=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return Math.sqrt(r*r+n*n+s*s)},i.distanceToValues=function(e,t,r,n){let s=Math.max(e[0],Math.min(e[3],t))-t,i=Math.max(e[1],Math.min(e[4],r))-r,a=Math.max(e[2],Math.min(e[5],n))-n;return Math.sqrt(s*s+i*i+a*a)},i.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e},i.bounds.empty=function(e,t){e[0]=0,e[1]=0,e[2]=0,t[0]=0,t[1]=0,t[2]=0},i.equals=function(e,t){let r=e[0],s=e[1],i=e[2],a=e[3],o=e[4],u=e[5],c=t[0],l=t[1],h=t[2],d=t[3],f=t[4],m=t[5];return Math.abs(r-c)<=n.num.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-l)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-h)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))},i.equalsBounds=function(e,t,r){let s=e[0],i=e[1],a=e[2],o=e[3],u=e[4],c=e[5],l=t[0],h=t[1],d=t[2],f=r[0],m=r[1],p=r[2];return Math.abs(s-l)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-h)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-d)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-p)<=n.num.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},i.exactEqualsBounds=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r[0]&&e[4]===r[1]&&e[5]===r[2]},i.expandScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]+r,e[4]=t[4]+r,e[5]=t[5]+r,e},i.expandValues=function(e,t,r,n,s){return e[0]=t[0]-r,e[1]=t[1]-n,e[2]=t[2]-s,e[3]=t[3]+r,e[4]=t[4]+n,e[5]=t[5]+s,e},i.expandVec3=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},i.fromArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e},i.fromBounds=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e},i.fromObjectBounds=function(e,t,r){if(t.minBounds)i.fromBounds(e,t.minBounds,t.maxBounds);else{if(!t._boundingBox)throw new Error("Invalid object bounds");i.copy(e,t._boundingBox)}return r&&i.transformMat4(e,e,r),e},i.fromObjectPositionRadius=function(e,t,r){if(t.boundsSpherePosition)i.fromPositionRadius(e,t.boundsSpherePosition,t.boundsSphereRadius);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");i.fromPositionRadius(e,t.boundingSphereCenter,t.boundingSphereRadius)}return r&&i.transformMat4(e,e,r),e},i.fromPositionSize=function(e,t,r){return e[0]=t[0]-.5*r[0],e[1]=t[1]-.5*r[1],e[2]=t[2]-.5*r[2],e[3]=t[0]+.5*r[0],e[4]=t[1]+.5*r[1],e[5]=t[2]+.5*r[2],e},i.fromPoints=function(e,t){i.empty(e);for(let r=0;r<t.length;r++)e[0]=Math.min(e[0],t[r][0]),e[1]=Math.min(e[1],t[r][1]),e[2]=Math.min(e[2],t[r][2]),e[3]=Math.max(e[3],t[r][0]),e[4]=Math.max(e[4],t[r][1]),e[5]=Math.max(e[5],t[r][2]);return e},i.fromPositionRadius=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[0]+r,e[4]=t[1]+r,e[5]=t[2]+r,e},i.fromSph3=function(e,t){return e[0]=t[0]-t[3],e[1]=t[1]-t[3],e[2]=t[2]-t[3],e[3]=t[0]+t[3],e[4]=t[1]+t[3],e[5]=t[2]+t[3],e},i.fromValues=function(e,t,r,n,s,a){const o=i.create();return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=s,o[5]=a,o},i.getClampedPoint=function(e,t,r){return e[0]=Math.max(t[0],Math.min(t[3],r[0])),e[1]=Math.max(t[1],Math.min(t[4],r[1])),e[2]=Math.max(t[2],Math.min(t[5],r[2])),e},i.getMax=function(e,t){return e[0]=t[3],e[1]=t[4],e[2]=t[5],e},i.getMin=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.getSize=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},i.getPosition=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},i.radius=function(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return.5*Math.sqrt(t*t+r*r+n*n)},i.intersect=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e[4]=Math.min(t[4],r[4]),e[5]=Math.min(t[5],r[5]),e},i.intersectBounds=function(e,t,r,n){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],n[0]),e[4]=Math.min(t[4],n[1]),e[5]=Math.min(t[5],n[2]),e},i.intersects=function(e,t){return!(t[3]<e[0]||t[0]>e[3]||t[4]<e[1]||t[1]>e[4]||t[5]<e[2]||t[2]>e[5])},i.intersectsBounds=function(e,t,r){return!(r[0]<e[0]||t[0]>e[3]||r[1]<e[1]||t[1]>e[4]||r[2]<e[2]||t[2]>e[5])},i.intersectsNormalConstant=function(e,t,r){let n,s;return t[0]>0?(n=t[0]*e[0],s=t[0]*e[3]):(n=t[0]*e[3],s=t[0]*e[0]),t[1]>0?(n=t[1]*e[1],s=t[1]*e[4]):(n=t[1]*e[4],s=t[1]*e[1]),t[2]>0?(n+=t[2]*e[2],s+=t[2]*e[5]):(n+=t[2]*e[5],s+=t[2]*e[2]),n<=r&&s>=r},i.intersectsPln=function(e,t){return i.intersectsNormalConstant(e,t,t[3])},i.intersectsPoint=function(e,t){return t[0]>=e[0]&&t[0]<=e[3]&&t[1]>=e[1]&&t[1]<=e[4]&&t[2]>=e[2]&&t[2]<=e[5]},i.intersectsValues=function(e,t,r,n){return t>=e[0]&&t<=e[3]&&r>=e[1]&&r<=e[4]&&n>=e[2]&&n<=e[5]},i.intersectsPositionRadius=function(e,t,r){let n=Math.max(e[0],Math.min(e[3],t[0]))-t[0],s=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return n*n+s*s+i*i<=r*r},i.intersectsSph3=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],s=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+s*s<=t[3]*t[3]},i.isEmpty=function(e){return e[0]+e[1]+e[2]+e[0]+e[1]+e[2]===0||(e[3]<e[0]||e[4]<e[1]||e[5]<e[2])},i.bounds.isEmpty=function(e,t){return e[0]+e[1]+e[2]+t[0]+t[1]+t[2]===0||(t[0]<e[0]||t[1]<e[1]||t[2]<e[2])},i.set=function(e,t,r,n,s,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=s,e[4]=i,e[5]=a,e},i.squaredDistanceToPoint=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],s=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+s*s},i.surfaceArea=function(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*(r+n)+r*n)},i.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],e},i.toBounds=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},i.toObjectBounds=function(e,t,r){if(!(t.minBounds||t._boundingBox))throw console.dir(t),new Error("Invalid object bounds");r&&(a||(a=i.create()),e=i.transformMat4(a,e,r)),t.minBounds?i.toBounds(e,t.minBounds,t.maxBounds):i.copy(t._boundingBox,e)},i.toObjectPositionRadius=function(e,t,r){if(r&&(a||(a=i.create()),e=i.transformMat4(a,e,r)),t.boundsSpherePosition)t.boundsSphereRadius=i.toPositionRadius(e,t.boundsSpherePosition);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");t.boundingSphereRadius=i.toPositionRadius(e,t.boundingSphereCenter)}},i.toPoints=function(e,t=[]){const r=e[0],n=e[1],s=e[2],i=e[3],a=e[4],o=e[5],u=i+Math.abs(r),c=a+Math.abs(n),l=o+Math.abs(s);return t.push([i+0,a+0,o+0]),t.push([i-u,a+0,o+0]),t.push([i+0,a+0,o-l]),t.push([i-u,a+0,o-l]),t.push([i+0,a-c,o+0]),t.push([i-u,a-c,o+0]),t.push([i+0,a-c,o-l]),t.push([i-u,a-c,o-l]),t},i.toPositionRadius=function(e,t){let r=e[3]-e[0],n=e[4]-e[1],s=e[5]-e[2];return t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]),.5*Math.sqrt(r*r+n*n+s*s)},i.bounds.toPositionRadius=function(e,t,r){let n=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2];return r[0]=.5*(e[0]+t[0]),r[1]=.5*(e[1]+t[1]),r[2]=.5*(e[2]+t[2]),.5*Math.sqrt(n*n+s*s+i*i)},i.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},i.transformMat4=function(e,t,r){return o||(o=[s.vec3.create(),s.vec3.create(),s.vec3.create(),s.vec3.create(),s.vec3.create(),s.vec3.create(),s.vec3.create(),s.vec3.create()]),i.isEmpty(t)?i.empty(e):(s.vec3.transformMat4(o[0],[t[0],t[1],t[2]],r),s.vec3.transformMat4(o[1],[t[0],t[1],t[5]],r),s.vec3.transformMat4(o[2],[t[0],t[4],t[2]],r),s.vec3.transformMat4(o[3],[t[0],t[4],t[5]],r),s.vec3.transformMat4(o[4],[t[3],t[1],t[2]],r),s.vec3.transformMat4(o[5],[t[3],t[1],t[5]],r),s.vec3.transformMat4(o[6],[t[3],t[4],t[2]],r),s.vec3.transformMat4(o[7],[t[3],t[4],t[5]],r),i.fromPoints(e,o))},i.union=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},i.unionBounds=function(e,t,r,n){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],n[0]),e[4]=Math.max(t[4],n[1]),e[5]=Math.max(t[5],n[2]),e},i.bounds.union=function(e,t,r,n,s,i){e[0]=Math.min(r[0],s[0]),e[1]=Math.min(r[1],s[1]),e[2]=Math.min(r[2],s[2]),t[0]=Math.max(n[0],i[0]),t[1]=Math.max(n[1],i[1]),t[2]=Math.max(n[2],i[2])}},"./global/math/curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"curve",function(){return n});const n={evaluate:function(e,t,r,n,s){let i=e.knots.length,a=i-1,o=0;for(let r=0;r<e.knots.length;++r)if(e.knots[r]>t){a=r;break}if(0===e.degree)for(let t=0;t<e.dimension;++t)r[t]=e.controls[a*e.dimension+t];else if(1===e.degree){let u=n?(a+i-1)%i:0===a?0:a-1,c=e.knots[a]-e.knots[u];c<0&&(c+=s),c>0&&(o=(t-e.knots[e.knots.length-1])/c);for(let t=0;t<e.dimension;++t)r[t]=e.controls[u*e.dimension+t]*(1-o)+e.controls[a*e.dimension+t]*o}else{let o=n?(a+i-2)%i:0===a?0:a-2,u=n?(a+i-1)%i:0===a?0:a-1,c=o*e.dimension,l=u*e.dimension,h=a*e.dimension,d=e.knots[o],f=e.knots[u],m=e.knots[a],p=e.knots[(a+1)%i];d>m&&(m+=s,p+=s,t+=s),f>m&&(m+=s,p+=s,t+=s),p<m&&(p+=s);let v=t-f,_=v/(m-f),E=(t-d)/(m-d),S=E+_-_*E,T=_*(v/(p-f)),g=S-T;S=1-S;for(let t=0;t<e.dimension;++t)r[t]=S*e.controls[c+t]+g*e.controls[l+t]+T*e.controls[h+t]}},ag_horner1:function(e,t,r){let n=e[t];for(;--t>=0;)n=r*n+e[t];return n},ag_zeroin2:function(e,t,r,s,i,a){let o,u,c,l,h,d,f,m,p,v,_,E;m=1.192092896e-7;let S=!0;for(;S&&(u=e,h=r,l=c=t-e),Math.abs(h)<Math.abs(s)&&(e=t,t=u,u=e,r=s,s=h,h=r),S=!1,d=2.384185792e-7*Math.abs(t)+.5*i,f=.5*(u-t),o=Math.abs(f)>d&&0!==s;)Math.abs(l)<d||Math.abs(r)<=Math.abs(s)?l=c=f:(E=s/r,e===u?(p=2*f*E,v=1-E):(p=E*(2*f*(v=r/h)*(v-(_=s/h))-(t-e)*(_-1)),v=(v-1)*(_-1)*(E-1)),p>0?v=-v:p=-p,E=l,l=c,2*p<3*f*v-Math.abs(d*v)&&p<Math.abs(.5*E*v)?c=p/v:l=c=f),e=t,r=s,Math.abs(c)>d?t+=c:f>0?t+=d:t-=d,(s=n.ag_horner1(a.p,a.deg,t))*(h/Math.abs(h))>0&&(S=!0);return t},ag_zeroin:function(e,t,r,s){let i,a;return i=n.ag_horner1(s.p,s.deg,e),Math.abs(i)<1.192092896e-7?e:(a=n.ag_horner1(s.p,s.deg,t),Math.abs(a)<1.192092896e-7?t:n.ag_zeroin2(e,t,i,a,r,s))},polyZeroes:function(e,t,r,s,i,a,o){let u,c,l,h,d,f,m,p,v,_,E,S,T,g,R,b=new Array(22),A=new Array(22),y=new Array(22),j={p:[],deg:0};for(m=_=0,p=0,u=0;u<t+1;++u)p+=Math.abs(e[u]);if(p<=(S=(Math.abs(r)+Math.abs(i))*(t+1)*1.192092896e-7))return-1;for(T=b,g=A,R=y,u=0;u<t+1;++u)T[u]=1/p*e[u];for(;Math.abs(T[t])<S;)t--;if(h=0,0===t)return h;if(1===t)return o[0]=-T[0]/T[1],c=s?r<o[0]+S:r<o[0]-S,l=a?i>o[0]-S:i>o[0]+S,(h=c&&l?1:0)&&(s&&o[0]<r?o[0]=r:a&&o[0]>i&&(o[0]=i)),h;for(j.p=T,j.deg=t,u=1;u<=t;u++)g[u-1]=u*T[u];if(0===(d=n.polyZeroes(g,t-1,r,0,i,0,R)).length)return 0;for(u=f=0;u<=d;u++){if(h>t)return h;0===u?(v=r,E=n.ag_horner1(T,t,v),Math.abs(E)<=S&&s&&(o[h++]=r)):(v=m,E=_),u===d?(m=i,f=0):m=R[u],_=n.ag_horner1(T,t,m),f?f=0:Math.abs(_)<S?(u!==d||a)&&(o[h++]=m,f=1):(E<0&&_>0||E>0&&_<0)&&(o[h++]=n.ag_zeroin(v,m,0,j),h>1&&o[h-2]>=o[h-1]-S&&(o[h-2]=.5*(o[h-2]+o[h-1]),h--))}return h}}},"./global/math/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/math/num.js");r.d(t,"num",function(){return n.num});var s=r("./global/math/vec2.js");r.d(t,"vec2",function(){return s.vec2});var i=r("./global/math/vec3.js");r.d(t,"vec3",function(){return i.vec3});var a=r("./global/math/vec4.js");r.d(t,"vec4",function(){return a.vec4});var o=r("./global/math/quat.js");r.d(t,"quat",function(){return o.quat});var u=r("./global/math/mat3.js");r.d(t,"mat3",function(){return u.mat3});var c=r("./global/math/mat4.js");r.d(t,"mat4",function(){return c.mat4});var l=r("./global/math/noise.js");r.d(t,"noise",function(){return l.noise});var h=r("./global/math/curve.js");r.d(t,"curve",function(){return h.curve});var d=r("./global/math/box3.js");r.d(t,"box3",function(){return d.box3});var f=r("./global/math/tri3.js");r.d(t,"tri3",function(){return f.tri3});var m=r("./global/math/lne3.js");r.d(t,"lne3",function(){return m.lne3});var p=r("./global/math/pln.js");r.d(t,"pln",function(){return p.pln});var v=r("./global/math/ray3.js");r.d(t,"ray3",function(){return v.ray3});var _=r("./global/math/sph3.js");r.d(t,"sph3",function(){return _.sph3})},"./global/math/lne3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lne3",function(){return i});var n=r("./global/math/vec3.js"),s=r("./global/math/box3.js");const i={};i.$end=s.box3.$max,i.$start=s.box3.$min,i.clone=s.box3.clone,i.closestPointToPointParameter=function(){let e,t;return function(r,s,i){e||(e=n.vec3.create(),t=n.vec3.create());let a=e,o=t;a[0]=s[0]-r[0],a[1]=s[1]-r[1],a[2]=s[2]-r[2],o[0]=r[3]-r[0],o[1]=r[4]-r[1],o[2]=r[5]-r[2];let u=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],c=(o[0]*a[0]+o[1]*a[1]+o[2]*a[2])/u;return i&&(c=Math.max(0,Math.min(1,c))),c}}(),i.copy=s.box3.copy,i.copyStart=n.vec3.copy,i.copyEnd=s.box3.copyMax,i.create=s.box3.create,i.equals=s.box3.equals,i.equalsStartEnd=s.box3.equalsBounds,i.exactEquals=s.box3.equals,i.exactEqualsStartEnd=s.box3.exactEqualsBounds,i.fromArray=s.box3.fromArray,i.fromStartEnd=s.box3.fromBounds,i.get=function(e,t,r){if(r<0||r>1)throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return e[0]=(t[3]-t[0])*r+t[0],e[1]=(t[4]-t[1])*r+t[1],e[2]=(t[5]-t[2])*r+t[2],e},i.getCenter=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},i.getClosestPointToPoint=function(e,t,r,n){return i.get(e,t,i.closestPointToPointParameter(t,r,n))},i.getEnd=s.box3.getMax,i.getDelta=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},i.getStart=s.box3.getMin,i.intersectsNormalConstant=function(e,t,r){let n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+r,s=t[0]*e[3]+t[1]*e[4]+t[2]*e[5]+r;return n<0&&s>0||s<0&&n>0},i.length=function(e){let t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return Math.sqrt(t*t+r*r+n*n)},i.set=s.box3.set,i.squaredLength=function(e){let t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return t*t+r*r+n*n},i.toArray=s.box3.toArray,i.toStartEnd=s.box3.toBounds,i.transformMat4=function(e,t,r){let n=t[0],s=t[1],i=t[2],a=t[3],o=t[4],u=t[5];return e[0]=r[0]*n+r[4]*s+r[8]*i+r[12],e[1]=r[1]*n+r[5]*s+r[9]*i+r[13],e[2]=r[2]*n+r[6]*s+r[10]*i+r[14],e[3]=r[0]*a+r[4]*o+r[8]*u+r[12],e[4]=r[1]*a+r[5]*o+r[9]*u+r[13],e[5]=r[2]*a+r[6]*o+r[10]*u+r[14],e},i.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e}},"./global/math/mat3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat3",function(){return n.mat3}),n.mat3.fromArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.setArray=function(e,t,r=0){return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],e}},"./global/math/mat4.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat4",function(){return n.mat4}),n.mat4.arcFromForward=function(){let e;return function(t,r){e||(e=n.vec3.create());const s=n.vec3.normalize(e,r);if(n.mat4.identity(t),s[2]<-.99999)return t;if(s[2]>.99999)return t[5]=-1,t[10]=-1,t;const i=(1+s[2])/(s[0]*s[0]+s[1]*s[1]);return t[0]=i*s[1]*s[1]-s[2],t[1]=-i*s[0]*s[1],t[2]=s[0],t[4]=t[1],t[5]=i*s[0]*s[0]-s[2],t[6]=s[1],t[8]=-s[0],t[9]=-s[1],t[10]=-s[2],t}}(),n.mat4.copyTranslation=function(e,t){return e[12]=t[12],e[13]=t[13],e[14]=t[14],e},n.mat4.fromMat3=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[3],e[5]=t[4],e[6]=t[5],e[8]=t[6],e[9]=t[7],e[10]=t[8],e[3]=e[7]=e[11]=e[12]=e[13]=e[14]=0,e[15]=1,e},n.mat4.lookAtGL=function(){let e,t,r;return function(s,i,a,o){return e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),n.vec3.subtract(r,i,a),0===n.vec3.squaredLength(r)&&(r[2]=1),n.vec3.normalize(r,r),n.vec3.cross(e,o,r),0===n.vec3.squaredLength(e)&&(r[2]+=1e-4,n.vec3.cross(e,o,r)),n.vec3.normalize(e,e),n.vec3.cross(t,r,e),s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=0,s[4]=t[0],s[5]=t[1],s[6]=t[2],s[7]=0,s[8]=r[0],s[9]=r[1],s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}}(),n.mat4.maxScaleOnAxis=function(e){let t=e[0],r=e[4],n=e[8],s=e[1],i=e[5],a=e[9],o=e[2],u=e[6],c=e[10],l=t*t+r*r+n*n,h=s*s+i*i+a*a,d=o*o+u*u+c*c;return Math.sqrt(Math.max(l,h,d))},n.mat4.perspectiveGL=function(e,t,r,s,i){let a=Math.tan(t/360*Math.PI)*s,o=a*r;return n.mat4.frustum(e,-o,o,-a,a,s,i),e},n.mat4.projectVec3=function(e,t,r){var n=r[0],s=r[1],i=r[2],a=t[0]*n+t[4]*s+t[8]*i+t[12],o=t[1]*n+t[5]*s+t[9]*i+t[13],u=t[2]*n+t[6]*s+t[10]*i+t[14],c=t[3]*n+t[7]*s+t[11]*i+t[15];return e[0]=(a/c+1)/2,e[1]=(o/c+1)/2,e[2]=(u/c+1)/2,e},n.mat4.setTranslation=function(e,t){return e[12]=t[0],e[13]=t[1],e[14]=t[2],e},n.mat4.setTranslationFromValues=function(e,t,r,n){return e[12]=t,e[13]=r,e[14]=n,e}},"./global/math/noise.js":function(e,t,r){"use strict";r.r(t),r.d(t,"noise",function(){return i});var n=r("./global/math/vec3.js"),s=r("./global/math/vec4.js");const i={};i.turbulence=function(){const e=[],t=[],r=[];let i=!1;return function(a,o,u,c,l,h){i||function(){for(let r=0;r<256;r++)e[r]=s.vec4.fromValues(Math.random()-.5,Math.random()-.5,Math.random()-.5,Math.random()-.5),t[r]=r;let a=256;for(;--a;){const e=t[a],r=Math.floor(256*Math.random());t[a]=t[r],t[r]=e}for(let r=0;r<256;r++)t[256+r]=t[r],e[256+r]=e[r],e[512+r]=e[r];for(let e=0;e<15;++e)r[e]=n.vec3.create();i=!0}(),o+=4096,u+=4096,c+=4096,l+=4096;let d=Math.floor(o),f=Math.floor(u),m=Math.floor(c),p=Math.floor(l);const v=o-d,_=u-f,E=c-m,S=l-p,T=(d&=255)+1,g=(f&=255)+1,R=(m&=255)+1,b=(p&=255)+1,A=t[d],y=t[T],j=t[A+f],w=t[y+f],C=t[A+g],D=t[y+g];let L=n.vec3.lerp(r[0],e[j+m+p],e[w+m+p],v),P=n.vec3.lerp(r[1],e[C+m+p],e[D+m+p],v),x=n.vec3.lerp(r[2],e[j+R+p],e[w+R+p],v),O=n.vec3.lerp(r[3],e[j+R+p],e[w+R+p],v),I=n.vec3.lerp(r[4],L,P,_),M=n.vec3.lerp(r[5],x,O,_);const F=n.vec3.lerp(r[6],I,M,E);L=n.vec3.lerp(r[7],e[j+m+b],e[w+m+b],v),P=n.vec3.lerp(r[8],e[C+m+b],e[D+m+b],v),x=n.vec3.lerp(r[9],e[j+R+b],e[w+R+b],v),O=n.vec3.lerp(r[10],e[j+R+b],e[w+R+b],v),I=n.vec3.lerp(r[11],L,P,_),M=n.vec3.lerp(r[12],x,O,_);const G=n.vec3.lerp(r[13],I,M,E),N=n.vec3.lerp(r[14],F,G,S);return a[0]+=N[0]*h,a[1]+=N[1]*h,a[2]+=N[2]*h,a}}(),i.perlin1=function(){let e=!1,t=256,r=null,n=null;return function(s){e||function(){r=new Array(t+t+2),n=new Array(t+t+2);let s=0,i=0,a=0;for(s=0;s<t;s++)r[s]=s,n[s]=2*Math.random()-1;for(;--s;)a=r[s],r[s]=r[i=Math.floor(Math.random()*t)],r[i]=a;for(s=0;s<t+2;s++)r[t+s]=r[s],n[t+s]=n[s];e=!0}();let i=s+4096,a=255&Math.floor(i),o=a+1&255,u=i-Math.floor(i),c=u-1,l=u*u*(3-2*u),h=u*n[r[a]];return h+l*(c*n[r[o]]-h)}}(),i.perlin1D=function(e,t,r,n){let s=0,a=e,o=1;for(let e=0;e<n;++e)s+=i.perlin1(a)/o,o*=t,a*=r;return s}},"./global/math/num.js":function(e,t,r){"use strict";r.r(t),r.d(t,"num",function(){return n});const n={EPSILON:1e-6};n.RAD2DEG=180/Math.PI,n.DEG2RAD=Math.PI/180,n.TWO_PI=2*Math.PI,n.PI=Math.PI,n.biCumulative=function(e,t){if(1===t){const t=1-e;return 1-t*t*t}return 2===t?3*e*e-2*e*e*e:e*e*e},n.ceil=Math.ceil,n.clamp=function(e,t,r){return Math.max(t,Math.min(r,e))},n.decimalPlaces=function(e){let t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},n.degrees=function(e){return e*n.RAD2DEG},n.degreesUnwrapped=function(e){return n.unwrapDegrees(e*n.RAD2DEG)},n.dwordToFloat=function(e){const t=(16711680&e)>>16,r=(4278190080&e)>>24,n=(r<<1&255|t>>7)-127,s=(127&t)<<16|(65280&e)>>8<<8|255&e;return 0===s&&-127===n?0:(1-2*(r>>7))*(1+s*Math.pow(2,-23))*Math.pow(2,n)},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},n.exactEquals=function(e,t){return e===t},n.exponentialDecay=function(e,t,r,n,s){return t*s/n+r*(e*n-t)/(n*n)*(1-Math.pow(Math.E,-n*s/r))},n.fract=function(e){return e-Math.floor(e)},n.fromHalfFloat=function(e){const t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31===r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))},n.floor=Math.floor,n.getLongWordOrder=function(e){return 0===e||255===e||-16777216===e?0:1+n.getLongWordOrder(e>>8)},n.greaterThan=function(e,t){return e>t?1:0},n.greaterThanEqual=function(e,t){return n.isEqual(e,t)||e>t?1:0},n.greaterThanExactEqual=function(e,t){return e>=t?1:0},n.isEven=function(e){return Math.abs(e)%2==0},n.isFloat=function(e){return e%1!=0},n.isFinite=Number.isFinite,n.isInt=function(e){return e%1==0},n.isNaN=Number.isNaN,n.isOdd=function(e){return Math.abs(e)%2==1},n.isPowerOfTwo=function(e){return 0==(e&e-1)&&0!==e},n.lessThan=function(e,t){return e<t?1:0},n.lessThanEqual=function(e,t){return n.isEqual(e,t)||e<t?1:0},n.lessThanExactEqual=function(e,t){return e<=t?1:0},n.log2=function(e){return Math.log(e)*Math.LOG2E},n.max=Math.max,n.min=Math.min,n.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},n.normalizeInt=function(e,t,r,n){let s=r-t,i=e-t,a=i-i/s*s+t;return void 0===n?a:Number(a.toFixed(n))},n.normalizeFloat=function(e,t,r,n){let s=r-t,i=e-t,a=i-Math.floor(i/s)*s+t;return void 0===n?a:Number(a.toFixed(n))},n.radians=function(e){return e*n.DEG2RAD},n.radiansUnwrapped=function(e){return n.unwrapRadians(e*=n.DEG2RAD)},n.randomInt=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},n.randomFloat=function(e,t){return e+Math.random()*(t-e)},n.round=Math.round,n.roundToZero=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.step=n.greaterThan,n.smoothStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},n.smootherStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},n.toHalfFloat=function(){let e,t;return function(r){e||(e=new Float32Array(1),t=new Int32Array(e.buffer)),e[0]=r;const n=t[0];let s=n>>16&32768,i=n>>12&2047,a=n>>23&255;return a<103?s:a>142?(s|=31744,s|=(255===a?0:1)&&8388607&n):a<113?s|=((i|=2048)>>114-a)+(i>>113-a&1):(s|=a-112<<10|i>>1,s+=1&i)}}(),n.unwrapDegrees=function(e){return(e%=360)>180&&(e-=360),e<-180&&(e+=360),e},n.unwrapRadians=function(e){return(e%=n.TWO_PI)>n.PI&&(e-=n.TWO_PI),e<-n.PI&&(e+=n.TWO_PI),e}},"./global/math/pln.js":function(e,t,r){"use strict";r.r(t),r.d(t,"pln",function(){return u});var n=r("./global/math/num.js"),s=r("./global/math/vec3.js"),i=r("./global/math/vec4.js"),a=r("./global/math/mat3.js"),o=r("./global/math/box3.js");const u={$normal:function(e){return e.subarray(0,3)}};u.clone=i.vec4.clone,u.constant=function(e){return e[3]},u.copy=i.vec4.copy,u.create=i.vec4.create,u.distanceToPoint=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},u.distanceToPositionRadius=function(e,t,r){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-r},u.distanceToSph3=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3]},u.distanceToValues=function(e,t,r,n){return e[0]*t+e[1]*r+e[2]*n+e[3]},u.equals=i.vec4.equals,u.equalsNormalConstant=function(e,t,r){let s=e[0],i=e[1],a=e[2],o=e[3],u=t[0],c=t[1],l=t[2],h=r;return Math.abs(s-u)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(i-c)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-h)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))},u.exactEquals=i.vec4.exactEquals,u.exactEqualsNormalConstant=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r},u.extract=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},u.fromNormalConstant=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r,e},u.fromCoplanarPoints=function(e,t,r,n){let s=n[0]-r[0],i=n[1]-r[1],a=n[2]-r[2],o=t[0]-r[0],u=t[1]-r[1],c=t[2]-r[2],l=i*c-a*u,h=a*o-s*c,d=s*u-i*o,f=l*l+h*h+d*d;if(!(f>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return f=1/Math.sqrt(f),e[0]=l*f,e[1]=h*f,e[2]=d*f,e[3]=-(t[0]*e[0]+t[1]*e[1]+t[2]*e[2]),e},u.fromNormalAndCoplanarPoint=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e},u.getCoplanarPoint=function(e,t){return e[0]=t[0]*-t[3],e[1]=t[1]*-t[3],e[2]=t[2]*-t[3],e},u.getIntersectLne3=function(e,t,r){let n=r[0],s=r[1],i=r[2],a=r[3],o=r[4],u=r[5];e[0]=0,e[1]=0,e[2]=0;let c=a-n,l=o-s,h=u-i,d=t[0]*c+t[1]*l+t[2]*h;if(0===d){if(t[0]*n+t[1]*s+t[2]*i+t[3]===0)return e[0]=n,e[1]=s,e[2]=i,e;throw new Error("Denominator error")}let f=(n*t[0]+s*t[1]+i*t[2]+t[3])/d;if(f<0||f>1)throw new Error("Normalization error");return e[0]=c*f+n,e[1]=l*f+s,e[2]=h*f+i,e},u.getIntersectStartEnd=function(){let e;return function(t,r,n,s){return e||(e=o.box3.create()),o.box3.from(e,n,s),u.getIntersectLne3(t,r,e)}}(),u.getNormal=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},u.getOrthoPoint=function(e,t,r){let n=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3];return s.vec3.multiplyScalar(e,t,n),e},u.getProjectedPoint=function(e,t,r){return u.getOrthoPoint(e,t,r),e[0]=-(e[0]-r[0]),e[1]=-(e[1]-r[1]),e[2]=-(e[2]-r[2]),e},u.intersectsBounds=function(){let e;return function(t,r,n){return e||(e=o.box3.create()),o.box3.from(e,r,n),o.box3.intersectsPln(e,t)}}(),u.intersectsBox3=function(e,t){return o.box3.intersectsPln(t,e)},u.intersectsLne3=function(e,t){let r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],n=e[0]*t[3]+e[1]*t[4]+e[2]*t[5]+e[3];return r<0&&n>0||n<0&&r>0},u.intersectsPositionRadius=function(e,t,r){let n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(n-e[3])<=r},u.intersectsSph3=function(e,t){let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(r-e[3])<=t[3]},u.intersectsStartEnd=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],s=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3];return n<0&&s>0||s<0&&n>0},u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-1*t[3],e},u.normalize=function(e,t){let r=t[0],n=t[1],s=t[2],i=r*r+n*n+s*s;if(!(i>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},u.set=i.vec4.set,u.setArray=i.vec4.setArray,u.toArray=function(e,t,r=0){return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],e},u.transformMat4=function(){let e;return function(t,r,n,s){s||e||(e=a.mat3.create()),s=s||a.mat3.normalFromMat4(e,n);let i=r[0]*-r[3],o=r[1]*-r[3],u=r[2]*-r[3],c=n[0]*i+n[4]*o+n[8]*u+n[12],l=n[1]*i+n[5]*o+n[9]*u+n[13],h=n[2]*i+n[6]*o+n[10]*u+n[14],d=r[0],f=r[1],m=r[2],p=d*s[0]+f*s[3]+m*s[6],v=d*s[1]+f*s[4]+m*s[7],_=d*s[2]+f*s[5]+m*s[8],E=p*p+v*v+_*_;if(!(E>0))throw t[0]=0,t[1]=0,t[2]=0,new Error("Normalization error");return E=1/Math.sqrt(E),t[0]=p*E,t[1]=v*E,t[2]=_*E,t[3]=-(c*t[0]+l*t[1]+h*t[2]),t}}(),u.translate=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e}},"./global/math/quat.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"quat",function(){return n.quat}),n.quat.exp=function(e,t){let r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r?(e[0]=Math.sin(r)*t[0]/r,e[1]=Math.sin(r)*t[1]/r,e[2]=Math.sin(r)*t[2]/r,e[3]=Math.cos(r)):(e[0]=0,e[1]=0,e[2]=0,e[3]=1),e},n.quat.ln=function(e,t){let r=n.quat.length(t);if(r>1.0001||r<.99999)e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0;else if(r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])){let n=Math.atan2(r,t[3])/r;e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=0}else e[0]=0,e[1]=0,e[2]=0,e[3]=0;return e},n.quat.pow=function(e,t,r){return 1===r?n.quat.copy(e,t):(n.quat.ln(e,t),e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=r,n.quat.exp(e,e),e)}},"./global/math/ray3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ray3",function(){return o});var n=r("./global/math/vec3.js"),s=(r("./global/math/mat4.js"),r("./global/math/pln.js"),r("./global/math/sph3.js")),i=r("./global/math/box3.js"),a=r("./global/math/tri3.js");const o={};o.$origin=i.box3.$min,o.$direction=i.box3.$max,o.clone=i.box3.clone,o.copy=i.box3.copy,o.copyOrigin=i.box3.copyMin,o.copyDirection=i.box3.copyMax,o.create=i.box3.create,o.distance=function(e,t){return Math.sqrt(o.squaredDistance(e,t))},o.distanceNormalConstant=function(e,t,r){let n=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],s=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;if(0===n){if(0===s)return 0;throw new Error("Determinant error")}let i=-s/n;return i>=0?i:null},o.distancePln=function(e,t){let r=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];if(0===r){if(0===n)return 0;throw new Error("Determinant error")}let s=-n/r;return s>=0?s:null},o.equals=i.box3.equals,o.equalsOriginDestination=i.box3.equalsBounds,o.exactEquals=i.box3.exactEquals,o.exactEqualsOriginDestination=i.box3.exactEqualsBounds,o.from=i.box3.from,o.fromArray=i.box3.fromArray,o.fromStartEnd=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],o.normalize(e,e)},o.fromPerspective=function(e,t,r,n){let s=2*(t[0]-n[0])/n[2]-1,i=2*(t[1]-n[1])/n[3]-1,a=r[3]*s+r[7]*i+-1*r[11]+r[15],u=r[3]*s+r[7]*i+1*r[11]+r[15];if(0===a||0===u)throw new Error("Perspective Divide Error");return e[0]=(r[0]*s+r[4]*i+-1*r[8]+r[12])/a,e[1]=(r[1]*s+r[5]*i+-1*r[9]+r[13])/a,e[2]=(r[2]*s+r[6]*i+-1*r[10]+r[14])/a,e[3]=(r[0]*s+r[4]*i+1*r[8]+r[12])/u-e[0],e[4]=(r[1]*s+r[5]*i+1*r[9]+r[13])/u-e[1],e[5]=(r[2]*s+r[6]*i+1*r[10]+r[14])/u-e[2],o.normalize(e,e)},o.unproject=function(e,t,r,s){const i=[t[0],t[1],0],a=[t[0],t[1],1];n.vec3.unproject(i,i,r,s),n.vec3.unproject(a,a,r,s),o.fromStartEnd(e,i,a)},o.get=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e},o.getDirection=i.box3.getMax,o.getClosestPointToPoint=function(e,t,r){let n=r[0]-t[0],s=r[1]-t[1],i=r[2]-t[2],a=n*t[3]+s*t[4]+i*t[5];return a<0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):o.get(e,t,a),e},o.getIntersectBounds=function(e,t,r,n){let s,i,a,u,c,l,h=1/t[3],d=1/t[4],f=1/t[5];return h>=0?(s=(r[0]-t[0])*h,i=(n[0]-t[0])*h):(s=(n[0]-t[0])*h,i=(r[0]-t[0])*h),d>=0?(a=(r[1]-t[1])*d,u=(n[1]-t[1])*d):(a=(n[1]-t[1])*d,u=(r[1]-t[1])*d),s>u||a>i?null:((a>s||s!=s)&&(s=a),(u<i||i!=i)&&(i=u),f>=0?(c=(r[2]-t[2])*f,l=(n[2]-t[2])*f):(c=(n[2]-t[2])*f,l=(r[2]-t[2])*f),s>l||c>i?null:((c>s||s!=s)&&(s=c),(l<i||i!=i)&&(i=l),i<0?null:o.get(e,t,s>=0?s:i)))},o.getIntersectBox3=function(){let e,t;return function(r,s,a){return e||(e=n.vec3.create(),t=n.vec3.create()),i.box3.getMin(e,a),i.box3.getMax(t,a),i.box3.getIntersectBounds(r,s,e,t)}}(),o.getIntersectTri3=function(){let e,t,r;return function(s,i,u,c){return e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),a.tri3.getV1(e,u),a.tri3.getV2(t,u),a.tri3.getV3(r,u),o.getIntersectVertices(s,i,e,t,r,c)}}(),o.getIntersectVertices=function(){let e,t,r,s,i,a;return function(u,c,l,h,d,f){e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create(),s=n.vec3.create(),i=n.vec3.create(),a=n.vec3.create());let m,p=o.getOrigin(i,c),v=o.getDirection(a,c),_=n.vec3.subtract(e,p,l),E=n.vec3.subtract(t,h,l),S=n.vec3.subtract(r,d,l),T=n.vec3.cross(s,E,S),g=n.vec3.dot(v,T);if(g>0){if(f)return null;m=1}else{if(!(g<0))return null;m=-1,g=-g}n.vec3.cross(S,_,S);let R=m*n.vec3.dot(v,S);if(R<0)return null;n.vec3.cross(E,E,_);let b=m*n.vec3.dot(v,E);if(b<0)return null;if(R+b>g)return null;let A=-m*n.vec3.dot(_,T);return A<0?null:o.get(u,c,A/g)}}(),o.getIntersectNormalConstant=function(e,t,r,n){let s=o.distanceNormalConstant(t,r,n);return null!==s?o.get(e,t,s):null},o.getIntersectPln=function(e,t,r){let n=o.distancePln(t,r);return null!==n?o.get(e,t,n):null},o.getIntersectPositionRadius=function(){let e;return function(t,r,n,i){return e||(e=s.sph3.create()),s.sph3.from(e,n,i),o.getIntersectSph3(t,r,e)}}(),o.getIntersectSph3=function(e,t,r){let n=r[0]-t[0],s=r[1]-t[1],i=r[2]-t[2],a=r[3]*r[3],u=n*t[3]+s*t[4]+i*t[5],c=n*n+s*s+i*i-u*u;if(c>a)return null;let l=Math.sqrt(a-c),h=u-l,d=u+l;return h<0&&d<0?null:h<0?o.get(e,t,d):o.get(e,t,h)},o.getOrigin=i.box3.getMin,o.intersectsBox3=function(){let e;return function(t,r){return e||(e=n.vec3.create()),o.vec3_0=null!==o.getIntersectBox3(e,t,r)}}(),o.intersectsBounds=function(){let e;return function(t,r,s){return e||(e=n.vec3.create()),null!==o.getIntersectBounds(e,t,r,s)}}(),o.intersectsNormalConstant=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;return 0===n||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*n<0},o.intersectsPln=function(e,t){let r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];return 0===r||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*r<0},o.intersectsPositionRadius=function(e,t,r){return o.distance(e,t)<=r},o.intersectsSph3=function(e,t){return o.distance(e,t)<=t[3]},o.lookAt=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0]-t[0],e[4]=r[1]-t[1],e[5]=r[2]-t[2],o.normalize(e,e)},o.normalize=function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2];let r=t[3],n=t[4],s=t[5],i=r*r+n*n+s*s;if(!(i>0))throw e[1]=0,e[2]=0,e[3]=0,new Error("Normalization error");return i=1/Math.sqrt(i),e[3]=r*i,e[4]=n*i,e[5]=s*i,e},o.recast=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.set=i.box3.set,o.SORT=function(e,t){return e.distance-t.distance},o.squaredDistance=function(){let e,t;return function(r,s){e||(e=n.vec3.create(),t=n.vec3.create()),e[0]=s[0]-r[0],e[1]=s[1]-r[1],e[2]=s[2]-r[2];let i=e[0]*r[3]+e[1]*r[4]+e[2]*r[5];return i<0?(o.getOrigin(t,r),n.vec3.squaredDistance(t,s)):(o.get(e,r,i),n.vec3.squaredDistance(e,s))}}(),o.toArray=i.box3.toArray,o.toOriginDirection=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},o.transformMat4=function(e,t,r){let n=t[0],s=t[1],i=t[2],a=t[3]+t[0],u=t[4]+t[1],c=t[5]+t[2],l=r[3]*n+r[7]*s+r[11]*i+r[15]||1,h=r[3]*a+r[7]*u+r[11]*c+r[15]||1;return e[0]=(r[0]*n+r[4]*s+r[8]*i+r[12])/l,e[1]=(r[1]*n+r[5]*s+r[9]*i+r[13])/l,e[2]=(r[2]*n+r[6]*s+r[10]*i+r[14])/l,e[3]=(r[0]*a+r[4]*u+r[8]*c+r[12])/h-e[0],e[4]=(r[1]*a+r[5]*u+r[9]*c+r[13])/h-e[1],e[5]=(r[2]*a+r[6]*u+r[10]*c+r[14])/h-e[2],o.normalize(e,e)},o.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/sph3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sph3",function(){return u});var n=r("./global/math/vec3.js"),s=r("./global/math/vec4.js"),i=r("./global/math/mat4.js"),a=r("./global/math/pln.js"),o=r("./global/math/box3.js");const u={};let c=null;u.$position=a.pln.$normal,u.clone=s.vec4.clone,u.containsPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s<=e[3]*e[3]},u.copy=s.vec4.copy,u.create=s.vec4.create,u.distance=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2],i=t[3]+e[3];return Math.sqrt(r*r+n*n+s*s)-i},u.distanceToPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+n*n+s*s)-e[3]},u.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},u.equals=s.vec4.equals,u.equalsPositionRadius=a.pln.equalsNormalConstant,u.exactEquals=s.vec4.exactEquals,u.exactEqualsPositionRadius=a.pln.exactEqualsNormalConstant,u.extract=a.pln.extract,u.fromBox3=function(e,t){let r=t[3]-t[0],n=t[4]-t[1],s=t[5]-t[2];return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e[3]=.5*Math.sqrt(r*r+n*n+s*s),e},u.fromBounds=function(e,t,r){let n=r[0]-t[0],s=r[1]-t[1],i=r[2]-t[2];return e[0]=.5*(t[0]+r[0]),e[1]=.5*(t[1]+r[1]),e[2]=.5*(t[2]+r[2]),e[3]=.5*Math.sqrt(n*n+s*s+i*i),e},u.fromObjectBounds=function(e,t,r){if(t.minBounds)u.fromBounds(e,t.minBounds,t.maxBounds);else{if(!t._boundingBox)throw new Error("Invalid object bounds");u.fromBox3(e,t._boundingBox)}return r&&u.transformMat4(e,e,r),e},u.fromObjectPositionRadius=function(e,t,r){if(t.boundsSpherePosition)u.fromPositionRadius(e,t.boundsSpherePosition,t.boundsSphereRadius);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");u.fromPositionRadius(e,t.boundingSphereCenter,t.boundingSphereRadius)}return r&&u.transformMat4(e,e,r),e},u.fromPositionRadius=a.pln.fromNormalConstant,u.fromTranslationRadius=function(e,t,r){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=r,e},u.fromMat4=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=i.mat4.maxScaleOnAxis(t),e},u.getClampedPoint=function(e,t,r){e[0]=r[0],e[1]=r[1],e[2]=r[2];let s=t[0]-r[0],i=t[1]-r[1],a=t[2]-r[2];return s*s+i*i+a*a>t[3]*t[3]&&(e[0]=e[0]-t[0],e[1]=e[1]-t[1],e[2]=e[2]-t[2],n.vec3.normalize(e,e),e[0]=e[0]*t[3]+t[0],e[1]=e[1]*t[3]+t[1],e[2]=e[2]*t[3]+t[2]),e},u.getPointFromLongLat=function(e,t,r,n){return e[0]=t[0]+t[3]*Math.sin(n)*Math.cos(r),e[1]=t[1]+t[3]*Math.sin(n)*Math.sin(r),e[2]=t[2]+t[3]*Math.cos(n),e},u.getPosition=a.pln.getNormal,u.intersectsSph3=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2],i=e[3]+t[3];return r*r+n*n+s*s<=i*i},u.intersectsBox3=function(e,t){return o.box3.intersectsSph3(t,e)},u.intersectsBounds=function(e,t,r){let n=Math.max(t[0],Math.min(r[0],e[0]))-e[0],s=Math.max(t[1],Math.min(r[1],e[1]))-e[1],i=Math.max(t[2],Math.min(r[2],e[2]))-e[2];return n*n+s*s+i*i<=e[3]*e[3]},u.intersectsPositionRadius=function(e,t,r){let n=t[0]-e[0],s=t[1]-e[1],i=t[2]-e[2],a=e[3]+r;return n*n+s*s+i*i<=a*a},u.intersectsPln=function(e,t){return a.pln.intersectsSph3(t,e)},u.intersectsNormalConstant=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];return Math.abs(n-r)<=e[3]},u.isEmpty=function(e){return e[3]<=0},u.radius=a.pln.constant,u.set=s.vec4.set,u.setArray=s.vec4.setArray,u.setPoints=function(){let e;return function(t,r,n){e||(e=o.box3.create()),n?(t[0]=n[0],t[1]=n[1],t[2]=n[2]):(o.box3.setPoints(e,r),t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]));let s=0;for(let e=0;e<r.length;e++){let n=t[0]-r[e][0],i=t[1]-r[e][1],a=t[2]-r[e][2];s=Math.max(s,n*n+i*i+a*a)}return t[3]=Math.sqrt(s),t}}(),u.squaredDistance=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2],i=t[3]+e[3];return r*r+n*n+s*s-i*i},u.squaredDistanceToPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s-e[3]},u.toArray=s.vec4.toArray,u.toObjectBounds=function(e,t,r){if(!(t.minBounds||t._boundingBox))throw new Error("Invalid object bounds");r&&(c||(c=u.create()),e=u.transformMat4(c,e,r)),t.minBounds?u.toBounds(e,t.minBounds,t.maxBounds):o.box3.fromSph3(t._boundingBox,e)},u.toObjectPositionRadius=function(e,t,r){if(r&&(c||(c=u.create()),e=u.transformMat4(c,e,r)),t.boundsSpherePosition)t.boundsSphereRadius=u.toPositionRadius(e,t.boundsSpherePosition);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");t.boundingSphereRadius=u.toPositionRadius(e,t.boundingSphereCenter)}},u.transformMat4=function(e,t,r){let n=t[0],s=t[1],i=t[2],a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],u=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return e[0]=r[0]*n+r[4]*s+r[8]*i+r[12],e[1]=r[1]*n+r[5]*s+r[9]*i+r[13],e[2]=r[2]*n+r[6]*s+r[10]*i+r[14],e[3]=t[3]*Math.sqrt(Math.max(a,o,u)),e},u.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/tri3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tri3",function(){return o});var n=r("./global/math/vec3.js"),s=r("./global/math/mat3.js"),i=r("./global/math/pln.js"),a=r("./global/math/lne3.js");const o={};o.$v1=a.lne3.$start,o.$v2=a.lne3.$end,o.$v3=function(e){return e.subarray(6,9)},o.area=function(e){let t=e[7]-e[3],r=e[8]-e[4],n=e[9]-e[5],s=e[0]-e[3],i=e[1]-e[4],a=e[2]-e[5],o=t*a-n*i,u=n*s-t*a,c=t*i-r*s;return.5*Math.sqrt(o*o+u*u+c*c)},o.create=function(){let e=new Float32Array(9);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e},o.clone=s.mat3.clone,o.contains=function(){let e;return function(t,r){return e||(e=n.vec3.create()),o.getBaryCentricCoordinates(e,t,r),e[0]>=0&&e[1]>=0&&e[0]+e[1]<=1}}(),o.copy=s.mat3.copy,o.fromVertices=function(e,t,r,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e[6]=n[0],e[7]=n[1],e[8]=n[2],e},o.fromArray=s.mat3.fromArray,o.getBaryCentricCoordinates=function(e,t,r){let n=t[7]-t[0],s=t[8]-t[1],i=t[9]-t[2],a=t[3]-t[0],o=t[4]-t[1],u=t[5]-t[2],c=r[0]-t[0],l=r[1]-t[1],h=r[2]-t[2],d=n[0]*n[0]+s[1]*s[1]+i[2]*i[2],f=n[0]*a[0]+s[1]*o[1]+i[2]*u[2],m=n[0]*c[0]+s[1]*l[1]+i[2]*h[2],p=a[0]*a[0]+o[1]*o[1]+u[2]*u[2],v=a[0]*c[0]+o[1]*l[1]+u[2]*h[2],_=d*p-f*f;if(0===_)throw e[0]=-2,e[1]=-1,e[2]=-1,new Error("Denominator error");{let t=1/_,r=(p*m-f*v)*t,n=(d*v-f*m)*t;e[0]=1-r-n,e[1]=n,e[2]=r}return e},o.getClosestEdgeToPoint=function(){let e,t,r;return function(s,i,u){e||(e=n.vec3.create(),t=n.vec3.create(),r=[a.lne3.create(),a.lne3.create(),a.lne3.create()]);let c=o.getClosestPointToPoint(e,i,u);a.lne3.set(r[0],i[0],i[1],i[2],i[3],i[4],i[5]),a.lne3.set(r[1],i[3],i[4],i[5],i[6],i[7],i[8]),a.lne3.set(r[2],i[6],i[7],i[8],i[0],i[1],i[2]);let l=1/0;for(let e=0;e<r.length;e++){let i=a.lne3.getClosestPointToPoint(t,r[e],c,!0),o=n.vec3.squaredDistance(i,c);o<l&&(l=o,s[0]=r[e][0],s[1]=r[e][1],s[2]=r[e][2],s[3]=r[e][3],s[4]=r[e][4],s[5]=r[e][5])}return s}}(),o.getClosestPointToPoint=function(){let e,t,r,s,u,c,l;return function(h,d,f){if(e||(e=i.pln.create(),t=[a.lne3.create(),a.lne3.create(),a.lne3.create()],r=n.vec3.create(),s=n.vec3.create(),u=n.vec3.create(),c=n.vec3.create(),l=n.vec3.create()),o.getV1(u,d),o.getV2(c,d),o.getV3(l,d),i.pln.fromCoplanarPoints(e,u,c,l),i.pln.getProjectedPoint(r,e,f),!0===o.contains(d,r))h[0]=r[0],h[1]=r[1],h[2]=r[2];else{a.lne3.set(t[0],d[0],d[1],d[2],d[3],d[4],d[5]),a.lne3.set(t[1],d[3],d[4],d[5],d[6],d[7],d[8]),a.lne3.set(t[2],d[6],d[7],d[8],d[0],d[1],d[2]);let e=1/0;for(let i=0;i<t.length;i++){a.lne3.getClosestPointToPoint(s,t[i],r,!0);let o=n.vec3.squaredDistance(r,s);o<e&&(e=o,h[0]=s[0],h[1]=s[1],h[2]=s[2])}}return h}}(),o.getClosestVertexToPoint=function(){let e,t,r;return function(s,i,a){e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),o.getClosestPointToPoint(s,i,a);let u,c,l,h,d=1/0,f=[o.getV1(e,i),o.getV2(t,i),o.getV3(r,i)];for(let e=0;e<f.length;e++)(u=n.vec3.squaredDistance(f[e],s))<d&&(d=u,c=f[e][0],l=f[e][1],h=f[e][2]);return s[0]=c,s[1]=l,s[2]=h,s}}(),o.getMidpoint=function(e,t){return e[0]=(t[0]+t[3]+t[6])*(1/3),e[1]=(t[1]+t[4]+t[7])*(1/3),e[2]=(t[2]+t[5]+t[8])*(1/3),e},o.getNormal=function(e,t){let r=t[7]-t[3],n=t[8]-t[4],s=t[9]-t[5],i=t[0]-t[3],a=t[1]-t[4],o=t[2]-t[5],u=n*o-s*a,c=s*i-r*o,l=r*a-n*i,h=u*u+c*c+l*l;if(!(h>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return h=1/Math.sqrt(h),e[0]=u*h,e[1]=c*h,e[2]=l*h,e},o.getV1=a.lne3.getStart,o.getV2=a.lne3.getEnd,o.getV3=function(e,t){return e[0]=t[6],e[1]=t[7],e[2]=t[8],e},o.toArray=s.mat3.toArray,o.toVertices=function(e,t,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[0],r[1]=e[1],r[2]=e[2],n[0]=e[0],n[1]=e[1],n[2]=e[2],e}},"./global/math/vec2.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec2",function(){return n.vec2}),n.vec2.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e},n.vec2.isEmpty=function(e){return 0===e[0]&&0===e[1]},n.vec2.divideScalar=function(e,t,r){return n.vec2.multiplyScalar(e,t,1/r)},n.vec2.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},n.vec2.setScalar=function(e,t){return e[0]=t,e[1]=t,e},n.vec2.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e}},"./global/math/vec3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec3",function(){return n.vec3});var s=r("./global/math/num.js");n.vec3.X_AXIS=n.vec3.fromValues(1,0,0),n.vec3.Y_AXIS=n.vec3.fromValues(0,1,0),n.vec3.Z_AXIS=n.vec3.fromValues(0,0,1),n.vec3.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e},n.vec3.degrees=function(e,t){return e[0]=t[0]*s.num.RAD2DEG,e[1]=t[1]*s.num.RAD2DEG,e[2]=t[2]*s.num.RAD2DEG,e},n.vec3.degreesUnwrapped=function(e,t){return e[0]=s.num.unwrapDegrees(t[0]*s.num.RAD2DEG),e[1]=s.num.unwrapDegrees(t[1]*s.num.RAD2DEG),e[2]=s.num.unwrapDegrees(t[2]*s.num.RAD2DEG),e},n.vec3.direction=function(e,t,r){return n.vec3.subtract(e,t,r),n.vec3.normalize(e,e),e},n.vec3.directionFromQuat=function(e,t,r){return n.vec3.transformQuat(e,t,r)},n.vec3.directionFromMat4=function(){let e;return function(t,r,s){return e||(e=n.quat.create()),n.mat4.getRotation(e,s),n.vec3.transformQuat(t,r,e)}}(),n.vec3.divideScalar=function(e,t,r){return n.vec3.multiplyScalar(e,t,1/r)},n.vec3.euler={},n.vec3.euler.DEFAULT_ORDER="XYZ",n.vec3.euler.fromQuat=function(){let e;return function(t,r,s=n.vec3.euler.DEFAULT_ORDER){return e||(e=n.mat4.create()),n.mat4.fromQuat(e,r),n.vec3.euler.fromMat4(t,e,s)}}(),n.vec3.euler.fromMat4=function(e,t,r=n.vec3.euler.DEFAULT_ORDER){const i=t[0],a=t[4],o=t[8],u=t[1],c=t[5],l=t[9],h=t[2],d=t[6],f=t[10],m=s.num.clamp;if("XYZ"===r)e[1]=Math.asin(m(o,-1,1)),Math.abs(o)<.99999?(e[0]=Math.atan2(-l,f),e[2]=Math.atan2(-a,i)):(e[0]=Math.atan2(d,c),e[2]=0);else if("YXZ"===r)e[0]=Math.asin(-m(l,-1,1)),Math.abs(l)<.99999?(e[1]=Math.atan2(o,f),e[2]=Math.atan2(u,c)):(e[1]=Math.atan2(-h,i),e[2]=0);else if("ZXY"===r)e[0]=Math.asin(m(d,-1,1)),Math.abs(d)<.99999?(e[1]=Math.atan2(-h,f),e[2]=Math.atan2(-a,c)):(e[1]=0,e[2]=Math.atan2(u,i));else if("ZYX"===r)e[1]=Math.asin(-m(h,-1,1)),Math.abs(h)<.99999?(e[0]=Math.atan2(d,f),e[2]=Math.atan2(u,i)):(e[0]=0,e[2]=Math.atan2(-a,c));else if("YZX"===r)e[2]=Math.asin(m(u,-1,1)),Math.abs(u)<.99999?(e[0]=Math.atan2(-l,c),e[1]=Math.atan2(-h,i)):(e[0]=0,e[1]=Math.atan2(o,f));else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,new Error("Unrecognised euler order: "+r);e[2]=Math.asin(-m(a,-1,1)),Math.abs(a)<.99999?(e[0]=Math.atan2(d,c),e[1]=Math.atan2(o,i)):(e[0]=Math.atan2(-l,f),e[1]=0)}return n.vec3.unwrapRadians(e,e)},n.vec3.euler.getQuat=function(e,t,r=n.vec3.euler.DEFAULT_ORDER){const i=s.num.unwrapRadians(t[0]),a=s.num.unwrapRadians(t[1]),o=s.num.unwrapRadians(t[2]),u=Math.cos(i/2),c=Math.cos(a/2),l=Math.cos(o/2),h=Math.sin(i/2),d=Math.sin(a/2),f=Math.sin(o/2);if("XYZ"===r)e[0]=h*c*l+u*d*f,e[1]=u*d*l-h*c*f,e[2]=u*c*f+h*d*l,e[3]=u*c*l-h*d*f;else if("YXZ"===r)e[0]=h*c*l+u*d*f,e[1]=u*d*l-h*c*f,e[2]=u*c*f-h*d*l,e[3]=u*c*l+h*d*f;else if("ZXY"===r)e[0]=h*c*l-u*d*f,e[1]=u*d*l+h*c*f,e[2]=u*c*f+h*d*l,e[3]=u*c*l-h*d*f;else if("ZYX"===r)e[0]=h*c*l-u*d*f,e[1]=u*d*l+h*c*f,e[2]=u*c*f-h*d*l,e[3]=u*c*l+h*d*f;else if("YZX"===r)e[0]=h*c*l+u*d*f,e[1]=u*d*l+h*c*f,e[2]=u*c*f-h*d*l,e[3]=u*c*l-h*d*f;else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,e[3]=1,new Error("Unrecognised euler order: "+r);e[0]=h*c*l-u*d*f,e[1]=u*d*l-h*c*f,e[2]=u*c*f+h*d*l,e[3]=u*c*l+h*d*f}return e},n.vec3.exponentialDecay=function(e,t,r,n,i,a){return e[0]=s.num.exponentialDecay(t[0],r[0],n,i,a),e[1]=s.num.exponentialDecay(t[1],r[1],n,i,a),e[2]=s.num.exponentialDecay(t[2],r[2],n,i,a),e},n.vec3.fromSpherical=function(e,t,r){const n=t[0],s=t[1],i=t[2];return e[0]=i*Math.sin(n)*Math.sin(s),e[1]=i*Math.cos(s),e[2]=i*Math.cos(n)*Math.sin(s),r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),e},n.vec3.getSpherical=function(e,t){let r=0,s=0,i=n.vec3.length(t);return 0!==i&&(r=Math.acos(Math.max(t[1]/i,Math.min(-1,1))),s=Math.atan2(t[0],t[2])),e[0]=r,e[1]=s,e[2]=i,e},n.vec3.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]},n.vec3.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},n.vec3.polarToCartesian=function(e,t,r,n){return e[0]=t*Math.cos(r)*Math.sin(n),e[1]=t*Math.sin(r),e[2]=t*Math.cos(r)*Math.cos(n),e},n.vec3.project=function(e,t,r,n){let s=t[0],i=t[1],a=t[2],o=r[0]*s+r[4]*i+r[8]*a+r[12],u=r[1]*s+r[5]*i+r[9]*a+r[13],c=r[3]*s+r[7]*i+r[11]*a+r[15],l=(o/c+1)/2,h=1-(u/c+1)/2;return e[0]=l*n[2]+n[0],e[1]=h*n[3]+n[1],e[2]=c,e},n.vec3.radians=function(e,t){return e[0]=t[0]*s.num.DEG2RAD,e[1]=t[1]*s.num.DEG2RAD,e[2]=t[2]*s.num.DEG2RAD,e},n.vec3.radiansUnwrapped=function(e,t){return e[0]=s.num.unwrapRadians(t[0]*s.num.DEG2RAD),e[1]=s.num.unwrapRadians(t[1]*s.num.DEG2RAD),e[2]=s.num.unwrapRadians(t[2]*s.num.DEG2RAD),e},n.vec3.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e},n.vec3.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e},n.vec3.unproject=function(){let e;return function(t,r,s,i){e||(e=n.vec4.create());let a=r[0],o=r[1],u=r[2];if(e[0]=2*(a-i[0])/i[2]-1,e[1]=2*(o-i[1])/i[3]-1,e[2]=2*u-1,e[3]=1,n.vec4.transformMat4(e,e,s),0===e[3])throw t[0]=0,t[1]=0,t[2]=0,new Error("Perspective divide error");return t[0]=e[0]/e[3],t[1]=e[1]/e[3],t[2]=e[2]/e[3],t}}(),n.vec3.unwrapDegrees=function(e,t){return e[0]=s.num.unwrapDegrees(t[0]),e[1]=s.num.unwrapDegrees(t[1]),e[2]=s.num.unwrapDegrees(t[2]),e},n.vec3.unwrapRadians=function(e,t){return e[0]=s.num.unwrapRadians(t[0]),e[1]=s.num.unwrapRadians(t[1]),e[2]=s.num.unwrapRadians(t[2]),e}},"./global/math/vec4.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec4",function(){return n.vec4}),n.vec4.ZERO=n.vec4.fromValues(0,0,0,0),n.vec4.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e[3]=t[3]+r,e},n.vec4.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]},n.vec4.divideScalar=function(e,t,r){return n.vec4.multiplyScalar(e,t,1/r)},n.vec4.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},n.vec4.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e},n.vec4.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]-r,e}},"./global/util/arr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"addToArray",function(){return s}),r.d(t,"findElementByProperty",function(){return i}),r.d(t,"perArrayChild",function(){return a}),r.d(t,"removeFromArray",function(){return o}),r.d(t,"toArray",function(){return u}),r.d(t,"toUniqueArray",function(){return c});var n=r("./global/util/type.js");function s(e,...t){let r=!1;for(let n=0;n<t.length;n++)-1===e.indexOf(t[n])&&(e.push(t[n]),r=!0);return r}function i(e,t,r,n){for(let n=0;n<e.length;n++)if(t in e[n]&&e[n][t]===r)return e[n];if(n)throw new n({[t]:r});return null}function a(e,t,...r){for(let n=0;n<e.length;n++)t in e[n]&&e[n][t](...r)}function o(e,...t){let r=!1;for(let n=0;n<t.length;n++){const s=e.indexOf(t[n]);-1!==s&&(e.splice(s,1),r=!0)}return r}function u(e){return Object(n.isArray)(e)?e:[e]}function c(e){return Array.from(new Set(u(e)))}},"./global/util/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getPathExtension",function(){return u});var n=r("./global/util/arr.js");r.d(t,"addToArray",function(){return n.addToArray}),r.d(t,"findElementByProperty",function(){return n.findElementByProperty}),r.d(t,"perArrayChild",function(){return n.perArrayChild}),r.d(t,"removeFromArray",function(){return n.removeFromArray}),r.d(t,"toArray",function(){return n.toArray}),r.d(t,"toUniqueArray",function(){return n.toUniqueArray});var s=r("./global/util/obj.js");r.d(t,"assignIfExists",function(){return s.assignIfExists}),r.d(t,"get",function(){return s.get}),r.d(t,"template",function(){return s.template});var i=r("./global/util/type.js");r.d(t,"isArray",function(){return i.isArray}),r.d(t,"isArrayLike",function(){return i.isArrayLike}),r.d(t,"isAsyncFunction",function(){return i.isAsyncFunction}),r.d(t,"isBoolean",function(){return i.isBoolean}),r.d(t,"isCanvas",function(){return i.isCanvas}),r.d(t,"isDescriptor",function(){return i.isDescriptor}),r.d(t,"isDNA",function(){return i.isDNA}),r.d(t,"isError",function(){return i.isError}),r.d(t,"isNumber",function(){return i.isNumber}),r.d(t,"isFunction",function(){return i.isFunction}),r.d(t,"isNoU",function(){return i.isNoU}),r.d(t,"isNull",function(){return i.isNull}),r.d(t,"isObject",function(){return i.isObject}),r.d(t,"isObjectLike",function(){return i.isObjectLike}),r.d(t,"isObjectObject",function(){return i.isObjectObject}),r.d(t,"isPlain",function(){return i.isPlain}),r.d(t,"isPrimary",function(){return i.isPrimary}),r.d(t,"isPromise",function(){return i.isPromise}),r.d(t,"isString",function(){return i.isString}),r.d(t,"isSymbol",function(){return i.isSymbol}),r.d(t,"isSubclassOf",function(){return i.isSubclassOf}),r.d(t,"isTag",function(){return i.isTag}),r.d(t,"isTr2OrTri",function(){return i.isTr2OrTri}),r.d(t,"toTw2",function(){return i.toTw2}),r.d(t,"getTypeUpper",function(){return i.getTypeUpper}),r.d(t,"isTyped",function(){return i.isTyped}),r.d(t,"isUndefined",function(){return i.isUndefined}),r.d(t,"isVector",function(){return i.isVector}),r.d(t,"isVector2",function(){return i.isVector2}),r.d(t,"isVector3",function(){return i.isVector3}),r.d(t,"isVector4",function(){return i.isVector4}),r.d(t,"isMatrix3",function(){return i.isMatrix3}),r.d(t,"isMatrix4",function(){return i.isMatrix4});var a=r("./global/util/uuid.js");r.d(t,"enableUUID",function(){return a.enableUUID}),r.d(t,"generateID",function(){return a.generateID});var o=r("./global/util/url.js");function u(e){const t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}r.d(t,"getURL",function(){return o.getURL}),r.d(t,"getURLString",function(){return o.getURLString}),r.d(t,"getURLInteger",function(){return o.getURLInteger}),r.d(t,"getURLFloat",function(){return o.getURLFloat}),r.d(t,"getURLBoolean",function(){return o.getURLBoolean})},"./global/util/obj.js":function(e,t,r){"use strict";r.r(t),r.d(t,"assignIfExists",function(){return i}),r.d(t,"get",function(){return a}),r.d(t,"template",function(){return o});var n=r("./global/util/type.js"),s=r("./global/util/arr.js");function i(e,t,r){if(!t)return!1;r=Object(s.toArray)(r);let i=!1;for(let s=0;s<r.length;s++){const a=r[s];if(void 0!==t[a])if(i=!0,Object(n.isArrayLike)(e[a]))if(Object(n.isTyped)(e[a]))if(e[a].length!==t[a].length){const r=e[a].constructor;e[a]=new r(t[a])}else e[a].set(t[a]);else{e[a]=e[a].splice(e[a].length,0);for(let r=0;r<t[a].length;r++)e[a].push(t[a][r])}else if(Object(n.isTyped)(t[a])){const r=t[a].constructor;e[a]=new r(t[a])}else e[a]=t[a]}return i}function a(e,t,r){if(!Object(n.isArray)(t))return void 0!==e[t]?e[t]:r;for(let r=0;r<t.length;r++)if(void 0!==e[t[r]])return e[t[r]];return r}function o(e,t={}){const r=e.match(/%([^%]+)?%/g)||[];for(let n=0;n<r.length;n++){const s=r[n],i=s.substring(1,s.length-1).split("="),a=i[0]in t?t[i[0]]:i[1];e=e.replace(s,a)}return e}},"./global/util/type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isArray",function(){return s}),r.d(t,"isArrayLike",function(){return i}),r.d(t,"isAsyncFunction",function(){return a}),r.d(t,"isBoolean",function(){return o}),r.d(t,"isCanvas",function(){return u}),r.d(t,"isDescriptor",function(){return c}),r.d(t,"isDNA",function(){return l}),r.d(t,"isError",function(){return h}),r.d(t,"isNumber",function(){return d}),r.d(t,"isFunction",function(){return f}),r.d(t,"isNoU",function(){return m}),r.d(t,"isNull",function(){return p}),r.d(t,"isObject",function(){return v}),r.d(t,"isObjectLike",function(){return _}),r.d(t,"isObjectObject",function(){return E}),r.d(t,"isPlain",function(){return S}),r.d(t,"isPrimary",function(){return T}),r.d(t,"isPromise",function(){return g}),r.d(t,"isString",function(){return R}),r.d(t,"isSymbol",function(){return b}),r.d(t,"isSubclassOf",function(){return A}),r.d(t,"isTag",function(){return y}),r.d(t,"isTr2OrTri",function(){return j}),r.d(t,"toTw2",function(){return w}),r.d(t,"getTypeUpper",function(){return C}),r.d(t,"isTyped",function(){return D}),r.d(t,"isUndefined",function(){return L}),r.d(t,"isVector",function(){return P}),r.d(t,"isVector2",function(){return x}),r.d(t,"isVector3",function(){return O}),r.d(t,"isVector4",function(){return I}),r.d(t,"isMatrix3",function(){return M}),r.d(t,"isMatrix4",function(){return F});const n=Object.prototype.toString,s=Array.isArray;function i(e){return!!e&&(s(e)||D(e))}function a(e){return!(!f(e)||"AsyncFunction"!==e.constructor.name)}function o(e){return y(e,"[object Boolean]")}function u(e){return!!(e&&e instanceof HTMLCanvasElement)}function c(e){if(!e||!e.hasOwnProperty)return!1;const t=["value","initializer","get","set"];for(let r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}function l(e){return R(e)&&e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)}function h(e){return!!e&&(e instanceof Error||"Error"===e.constructor.__category)}function d(e){return y(e,"[object Number]")}function f(e){return"function"==typeof e}function m(e){return null==e}function p(e){return null===e}function v(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}function _(e){return null!==e&&"object"==typeof e}function E(e){return null!==e&&y(e,"[object Object]")}function S(e){if(!v(e)||!E)return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function T(e){return o(e)||d(e)||R(e)}function g(e){return v(e)&&f(e.then)}function R(e){return y(e,"[object String]")}function b(e){return"symbol"==typeof e||y(e,"[object Symbol]")}function A(e,t){if(!f(e))return!1;for(;f(e);){if(e===t)return!0;e=Reflect.getPrototypeOf(e)}return!1}function y(e,t){return n.call(e)===t}function j(e){return e&&0===e.indexOf("Tr2")||0===e.indexOf("Tri")}function w(e){return j(e)?e.replace("Tr2","Tw2").replace("Tri","Tw2"):e}function C(e){return Object.prototype.toString.call(e).slice(8,-1).toUpperCase()}function D(e){return!!e&&!!(e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT)}function L(e){return void 0===e}function P(e){if(e){if(D(e))return!0;if(s(e)){for(let t=0;t<e.length;t++)if(!d(e[t]))return!1;return!0}}return!1}function x(e){return!!P(e)&&2===e.length}function O(e){return!!P(e)&&3===e.length}function I(e){return!!P(e)&&4===e.length}function M(e){return!!P(e)&&9===e.length}function F(e){return!!P(e)&&16===e.length}},"./global/util/url.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getURL",function(){return i}),r.d(t,"getURLString",function(){return a}),r.d(t,"getURLInteger",function(){return o}),r.d(t,"getURLFloat",function(){return u}),r.d(t,"getURLBoolean",function(){return c});const n={},s=window.location.search.substring(1).split("&");for(let e=0;e<s.length;e++){const t=s[e].split("="),r=t[0].toLowerCase(),i=unescape(t[1]);if(r){let e=i.toLowerCase();n[r]="true"===e||"false"!==e&&i}}function i(){return Object.assign({},n)}function a(e,t){return(e=e.toLowerCase())in n?n[e]:t}function o(e,t){return(e=e.toLowerCase())in n?parseInt(n[e],10):t}function u(e,t){return(e=e.toLowerCase())in n?parseFloat(n[e]):t}function c(e,t){return(e=e.toLowerCase())in n?n[e]:t}},"./global/util/uuid.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableUUID",function(){return a}),r.d(t,"generateID",function(){return o});let n=null,s=0,i=null;function a(e){if(e!==n){if(null!==n)throw new Error("Cannot change id generation type once set");if(e){i=[];for(let e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16).toUpperCase()}n=e}}function o(){return null===n&&(n=!1),n?function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&r|128]+i[r>>8&255]+"-"+i[r>>16&255]+i[r>>24&255]+i[255&n]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]}():s++}},"./index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ccpwgl_int",function(){return i});r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.symbol.async-iterator.js"),r("../node_modules/core-js/modules/es.array.flat.js"),r("../node_modules/core-js/modules/es.array.flat-map.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.array.reverse.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js"),r("../node_modules/core-js/modules/es.array-buffer.constructor.js"),r("../node_modules/core-js/modules/es.array-buffer.slice.js"),r("../node_modules/core-js/modules/es.number.parse-float.js"),r("../node_modules/core-js/modules/es.object.define-getter.js"),r("../node_modules/core-js/modules/es.object.define-setter.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.lookup-getter.js"),r("../node_modules/core-js/modules/es.object.lookup-setter.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.promise.finally.js"),r("../node_modules/core-js/modules/es.string.pad-end.js"),r("../node_modules/core-js/modules/es.string.pad-start.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.trim-end.js"),r("../node_modules/core-js/modules/es.string.trim-start.js"),r("../node_modules/core-js/modules/es.typed-array.float32-array.js"),r("../node_modules/core-js/modules/es.typed-array.float64-array.js"),r("../node_modules/core-js/modules/es.typed-array.int8-array.js"),r("../node_modules/core-js/modules/es.typed-array.int16-array.js"),r("../node_modules/core-js/modules/es.typed-array.int32-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint16-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint32-array.js"),r("../node_modules/core-js/modules/es.typed-array.from.js"),r("../node_modules/core-js/modules/es.typed-array.of.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/web.immediate.js"),r("../node_modules/core-js/modules/web.queue-microtask.js"),r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url.to-json.js"),r("../node_modules/core-js/modules/web.url-search-params.js");var n=r("./config.js"),s=r("./global/index.js");r.d(t,"tw2",function(){return s.tw2}),s.tw2.Register(n.config);const i=s.tw2},"./interior/Tr2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Model",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.meshes=[]}static black(e){return[["meshes",e.array]]}}s.__isStaging=4},"./interior/character/Tr2IntSkinnedObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2IntSkinnedObject",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.curveSets=[],this.transform=null,this.visualModel=null}static black(e){return[["curveSets",e.array],["transform",e.object],["visualModel",e.object]]}}s.__isStaging=4},"./interior/character/Tr2SkinnedModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SkinnedModel",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.geometryResPath="",this.meshes=[],this.skeletonName=""}static black(e){return[["geometryResPath",e.string],["meshes",e.array],["name",e.string],["skeletonName",e.string]]}}s.__isStaging=4},"./interior/character/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/character/Tr2IntSkinnedObject.js");r.d(t,"Tr2IntSkinnedObject",function(){return n.Tr2IntSkinnedObject});var s=r("./interior/character/Tr2SkinnedModel.js");r.d(t,"Tr2SkinnedModel",function(){return s.Tr2SkinnedModel})},"./interior/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/character/index.js");r.d(t,"Tr2IntSkinnedObject",function(){return n.Tr2IntSkinnedObject}),r.d(t,"Tr2SkinnedModel",function(){return n.Tr2SkinnedModel});var s=r("./interior/lighting/index.js");r.d(t,"Tr2InteriorLightSource",function(){return s.Tr2InteriorLightSource}),r.d(t,"Tr2KelvinColor",function(){return s.Tr2KelvinColor});var i=r("./interior/scene/index.js");r.d(t,"Tr2InteriorPlaceable",function(){return i.Tr2InteriorPlaceable}),r.d(t,"Tr2InteriorScene",function(){return i.Tr2InteriorScene}),r.d(t,"WodPlaceableRes",function(){return i.WodPlaceableRes});var a=r("./interior/Tr2Model.js");r.d(t,"Tr2Model",function(){return a.Tr2Model})},"./interior/lighting/Tr2InteriorLightSource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorLightSource",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.color=n.vec4.create(),this.coneAlphaInner=0,this.coneAlphaOuter=0,this.coneDirection=n.vec3.create(),this.falloff=0,this.importanceBias=0,this.importanceScale=0,this.kelvinColor=null,this.position=n.vec3.create(),this.radius=0,this.useKelvinColor=!1}static black(e){return[["color",e.vector4],["coneAlphaInner",e.float],["coneAlphaOuter",e.float],["coneDirection",e.vector3],["falloff",e.float],["importanceBias",e.float],["importanceScale",e.float],["kelvinColor",e.object],["name",e.string],["position",e.vector3],["radius",e.float],["useKelvinColor",e.boolean]]}}s.__isStaging=4},"./interior/lighting/Tr2KelvinColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2KelvinColor",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.temperature=0,this.tint=0}static black(e){return[["temperature",e.float],["tint",e.float]]}}s.__isStaging=4},"./interior/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/lighting/Tr2InteriorLightSource.js");r.d(t,"Tr2InteriorLightSource",function(){return n.Tr2InteriorLightSource});var s=r("./interior/lighting/Tr2KelvinColor.js");r.d(t,"Tr2KelvinColor",function(){return s.Tr2KelvinColor})},"./interior/scene/Tr2InteriorPlaceable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorPlaceable",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.placeableResPath="",this.transform=null}static black(e){return[["placeableResPath",e.path],["transform",e.object]]}}s.__isStaging=4},"./interior/scene/Tr2InteriorScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorScene",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.dynamics=[],this.lights=[]}static black(e){return[["dynamics",e.array],["lights",e.array]]}}s.__isStaging=4},"./interior/scene/WodPlaceableRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WodPlaceableRes",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.farFadeDistance=0,this.nearFadeDistance=0,this.visualModel=null}}},"./interior/scene/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/scene/Tr2InteriorPlaceable.js");r.d(t,"Tr2InteriorPlaceable",function(){return n.Tr2InteriorPlaceable});var s=r("./interior/scene/Tr2InteriorScene.js");r.d(t,"Tr2InteriorScene",function(){return s.Tr2InteriorScene});var i=r("./interior/scene/WodPlaceableRes.js");r.d(t,"WodPlaceableRes",function(){return i.WodPlaceableRes})},"./particle/Tw2GpuParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuParticleSystem",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.clear=null,this.emit=null,this.render=null,this.setDrawParameters=null,this.setSortParameters=null,this.sort=null,this.sortInner=null,this.sortStep=null,this.update=null}GetResources(e=[]){return this.clear&&this.clear.GetResources(e),this.emit&&this.emit.GetResources(e),this.render&&this.render.GetResources(e),this.setDrawParameters&&this.setDrawParameters.GetResources(e),this.setSortParameters&&this.setSortParameters.GetResources(e),this.sort&&this.sort.GetResources(e),this.sortInner&&this.sortInner.GetResources(e),this.sortStep&&this.sortStep.GetResources(e),this.update&&this.update.GetResources(e),e}static black(e){return[["clear",e.object],["emit",e.object],["render",e.object],["setDrawParameters",e.object],["setSortParameters",e.object],["sort",e.object],["sortInner",e.object],["sortStep",e.object],["update",e.object]]}}s.__isStaging=4},"./particle/Tw2ParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSystem",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./particle/element/index.js");class a extends n.Tw2BaseClass{constructor(){super(),this.name="",this.applyAging=!0,this.applyForce=!0,this.constraints=[],this.elements=[],this.emitParticleDuringLifeEmitter=null,this.emitParticleOnDeathEmitter=null,this.forces=[],this.maxParticleCount=0,this.requiresSorting=!1,this.updateBoundingBox=!1,this.updateSimulation=!0,this.useSimTimeRebase=!1,this.isGlobal=!1,this.peakAliveCount=0,this._aabbMin=n.vec3.create(),this._aabbMax=n.vec3.create(),this._aliveCount=0,this._bufferDirty=!1,this._buffers=[null,null],this._declaration=null,this._elements=[],this._instanceStride=[null,null],this._isValid=!1,this._distancesBuffer=null,this._sortedBuffer=null,this._sortedIndexes=null,this._stdElements=[null,null,null,null],this._vb=null,this._vertexStride=[null,null],a.init()}Initialize(){this.UpdateElementDeclaration()}GetResources(e=[]){return e}UpdateElementDeclaration(){this._isValid=!1;const e=n.device.gl;if(this._vb&&(e.deleteBuffer(this._vb),this._vb=null),this._declaration=null,this._aliveCount=0,0!==this.elements.length){this._stdElements=[null,null,null,null],this._elements=[],this._instanceStride=[0,0],this._vertexStride=[0,0],this._declaration=new s.Tw2VertexDeclaration,this._buffers=[null,null];for(let e=0;e<this.elements.length;++e){const t=this.elements[e].usedByGPU?0:1,r=this.elements[e],n=i.Tw2ParticleElement.from({elementType:r.elementType,customName:r.customName,dimension:r.GetDimension(),usageIndex:r.usageIndex,usedByGPU:r.usedByGPU});if(n.startOffset=this._vertexStride[t],n.offset=n.startOffset,this.elements[e].elementType!==i.Tw2ParticleElement.Type.CUSTOM&&(this._stdElements[this.elements[e].elementType]=n),this._vertexStride[t]+=n.dimension,this._elements.push(n),0===t){const t=this.elements[e].GetDeclaration();t.offset=4*n.startOffset,this._declaration.elements.push(t)}}this._declaration.RebuildHash();for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].vertexStride=this._vertexStride[t]}this._instanceStride[0]=4*this._vertexStride[0],this._instanceStride[1]=4*this._vertexStride[1];for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].instanceStride=this._instanceStride[t]}this._buffers=[null,null],this._instanceStride[0]&&this.maxParticleCount&&(this._buffers[0]=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._vb=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,this._buffers[0].length,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)),this._instanceStride[1]&&(this._buffers[1]=new Float32Array(this._instanceStride[1]*this.maxParticleCount));for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].buffer=this._buffers[t]}this.requiresSorting&&(this._sortedIndexes=new Array(this.maxParticleCount),this._sortedBuffer=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._distancesBuffer=new Float32Array(this.maxParticleCount)),this._isValid=!0,this._bufferDirty=!0}}HasElement(e){return null!==this._stdElements[e]}GetElement(e){return this._stdElements[e]&&(this._stdElements[e].offset=this._stdElements[e].startOffset),this._stdElements[e]}BeginSpawnParticle(){return!this._isValid||this._aliveCount>=this.maxParticleCount?null:this._aliveCount++}EndSpawnParticle(){this._bufferDirty=!0}Update(e){if(e=Math.min(e,.1),this.applyAging&&this.HasElement(i.Tw2ParticleElement.Type.LIFETIME)){const t=this.GetElement(i.Tw2ParticleElement.Type.LIFETIME),r=this.emitParticleOnDeathEmitter?this.GetElement(i.Tw2ParticleElement.Type.POSITION):null,n=this.emitParticleOnDeathEmitter?this.GetElement(i.Tw2ParticleElement.Type.VELOCITY):null;for(let s=0;s<this._aliveCount;++s)if(t.buffer[t.offset]+=e/t.buffer[t.offset+1],t.buffer[t.offset]>1){if(this.emitParticleOnDeathEmitter&&this.emitParticleOnDeathEmitter.SpawnParticles(r,n,1),this._aliveCount--,s<this._aliveCount){for(let e=0;e<2;++e)this._buffers[e]&&this._buffers[e].set(this._buffers[e].subarray(this._instanceStride[e]*this._aliveCount,this._instanceStride[e]*this._aliveCount+this._instanceStride[e]),s*this._instanceStride[e]);--s,this._bufferDirty=!0}}else t.offset+=t.instanceStride,r&&(r.offset+=r.instanceStride),n&&(n.offset+=n.instanceStride);t.dirty=!0}const t=a.global.vec3_0;if(this.updateSimulation&&this.HasElement(i.Tw2ParticleElement.Type.POSITION)&&this.HasElement(i.Tw2ParticleElement.Type.VELOCITY)){const r=this.applyForce&&this.forces.length;for(let t=0;t<this.forces.length;++t)this.forces[t].Update(e);const s=this.GetElement(i.Tw2ParticleElement.Type.POSITION),a=this.GetElement(i.Tw2ParticleElement.Type.VELOCITY),o=r?this.GetElement(i.Tw2ParticleElement.Type.MASS):null;for(let i=0;i<this._aliveCount;++i){if(r){const r=o?o.buffer[o.offset]:1,i=n.vec3.set(t,0,0,0);for(let t=0;t<this.forces.length;++t)this.forces[t].ApplyForce(s,a,i,e,r);o&&n.vec3.scale(i,i,1/o.buffer[o.offset]),a.buffer[a.offset]+=i[0]*e,a.buffer[a.offset+1]+=i[1]*e,a.buffer[a.offset+2]+=i[2]*e}s.buffer[s.offset]+=a.buffer[a.offset]*e,s.buffer[s.offset+1]+=a.buffer[a.offset+1]*e,s.buffer[s.offset+2]+=a.buffer[a.offset+2]*e,this.emitParticleDuringLifeEmitter&&this.emitParticleDuringLifeEmitter.SpawnParticles(s,a,e),s.offset+=s.instanceStride,a.offset+=a.instanceStride,o&&(o.offset+=o.instanceStride)}s.dirty=!0,a.dirty=!0}if(this.updateSimulation&&this.constraints.length)for(let t=0;t<this.constraints.length;++t)this.constraints[t].ApplyConstraint(this._buffers,this._instanceStride,this._aliveCount,e);if(this.updateBoundingBox&&this.GetBoundingBox(this._aabbMin,this._aabbMax),this.emitParticleDuringLifeEmitter&&(!this.HasElement(i.Tw2ParticleElement.Type.POSITION)||!this.HasElement(i.Tw2ParticleElement.Type.VELOCITY))&&this.updateSimulation){const e=this.GetElement(i.Tw2ParticleElement.Type.POSITION),t=this.GetElement(i.Tw2ParticleElement.Type.VELOCITY);for(let r=0;r<this._aliveCount;++r)this.emitParticleDuringLifeEmitter.SpawnParticles(e,t,1),e&&(e.offset+=e.instanceStride),t&&(t.offset+=t.instanceStride)}for(let e=0;e<this._elements.length;++e){const t=this._elements[e];t.offset=t.startOffset,t.dirty&&(this._bufferDirty=!0,t.dirty=!1)}}GetBoundingBox(e,t){if(this._aliveCount&&this.HasElement(i.Tw2ParticleElement.Type.POSITION)){const r=this.GetElement(i.Tw2ParticleElement.Type.POSITION);e[0]=r.buffer[r.offset],e[1]=r.buffer[r.offset+1],e[2]=r.buffer[r.offset+2],t[0]=r.buffer[r.offset],t[1]=r.buffer[r.offset+1],t[2]=r.buffer[r.offset+2];for(let n=0;n<this._aliveCount;++n)e[0]=Math.min(e[0],r.buffer[r.offset]),e[1]=Math.min(e[1],r.buffer[r.offset+1]),e[2]=Math.min(e[2],r.buffer[r.offset+2]),t[0]=Math.max(t[0],r.buffer[r.offset]),t[1]=Math.max(t[1],r.buffer[r.offset+1]),t[2]=Math.max(t[2],r.buffer[r.offset+2]),r.offset+=r.instanceStride;return!0}return!1}_Sort(){const e=n.mat4.multiply(a.global.mat4_0,n.device.projection,n.device.view),t=this.GetElement(i.Tw2ParticleElement.Type.POSITION),r=this._aliveCount,s=this._distancesBuffer;for(let n=0;n<r;++n){const r=t.offset+t.instanceStride*n;let i=t.buffer[r]-e[12],a=i*i;a+=(i=t.buffer[r+1]-e[13])*i,a+=(i=t.buffer[r+2]-e[14])*i,s[n]=a}for(let e=0;e<this.maxParticleCount;++e)this._sortedIndexes[e]=e;this._sortedIndexes.sort(function(e,t){if(e>=r&&t>=r)return e<t?-1:e>t?1:0;if(e>=r)return 1;if(t>=r)return-1;const n=s[e],i=s[t];return n<i?1:n>i?-1:0})}GetInstanceBuffer(){if(0===this._aliveCount)return;const e=n.device.gl;if(this.requiresSorting&&this.HasElement(i.Tw2ParticleElement.Type.POSITION)&&this._buffers){this._Sort();const t=this._instanceStride[0],r=this._buffers[0];for(let e=0;e<this._aliveCount;++e){const n=e*t,s=this._sortedIndexes[e]*t;for(let e=0;e<t;++e)this._sortedBuffer[n+e]=r[e+s]}e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._sortedBuffer.subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1}else this._bufferDirty&&(e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._buffers[0].subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1);return this._vb}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return this._instanceStride[0]}GetInstanceCount(){return this._aliveCount}static init(){a.global||(a.global={vec3_0:n.vec3.create(),mat4_0:n.mat4.create()})}static black(e){return[["constraints",e.array],["name",e.string],["applyAging",e.boolean],["applyForce",e.boolean],["elements",e.array],["emitParticleDuringLifeEmitter",e.object],["emitParticleOnDeathEmitter",e.object],["forces",e.array],["maxParticleCount",e.uint],["requiresSorting",e.boolean],["updateBoundingBox",e.boolean],["updateSimulation",e.boolean],["useSimTimeRebase",e.boolean]]}}a.global=null},"./particle/constraint/Tr2PlaneConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PlaneConstraint",function(){return s});var n=r("./particle/constraint/Tw2ParticleConstraint.js");r("./core/index.js");class s extends n.Tw2ParticleConstraint{constructor(...e){super(...e),this.generators=[],this.reflectionNoise=0}ApplyConstraint(e,t,r,n){}static black(e){return[["reflectionNoise",e.float],["generators",e.array]]}}s.__isStaging=4},"./particle/constraint/Tw2ParticleConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleConstraint",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{ApplyConstraint(e,t,r,n){throw new s.ErrAbstractClassMethod}}},"./particle/constraint/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/constraint/Tr2PlaneConstraint.js");r.d(t,"Tr2PlaneConstraint",function(){return n.Tr2PlaneConstraint})},"./particle/element/Tw2ParticleElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElement",function(){return n});class n{constructor(){this.elementType=null,this.customName=null,this.dimension=null,this.usageIndex=null,this.usedByGPU=null,this.buffer=null,this.startOffset=0,this.offset=0,this.instanceStride=0,this.vertexStride=0,this.dirty=!1}get string(){return n.TypeMap[this.elementType]||"UNKNOWN"}static from(e){const t=new n;if(e){const r=e.elementType;t.elementType="string"==typeof r?this.Type[r.toUpperCase()]:r,t.customName=e.customName,t.dimension=e.dimension,t.usageIndex=e.usageIndex,t.usedByGPU=e.usedByGPU?1:0}return t}}n.Type={LIFETIME:0,POSITION:1,VELOCITY:2,MASS:3,CUSTOM:4},n.TypeMap=["LIFETIME","POSITION","VELOCITY","MASS","CUSTOM"]},"./particle/element/Tw2ParticleElementDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElementDeclaration",function(){return a});var n=r("./core/index.js"),s=r("./particle/element/Tw2ParticleElement.js"),i=r("./global/index.js");class a extends i.Tw2BaseClass{constructor(...e){super(...e),this.customName="",this.dimension=1,this.elementType=4,this.usageIndex=0,this.usedByGPU=!0}GetDimension(){switch(this.elementType){case s.Tw2ParticleElement.Type.LIFETIME:return 2;case s.Tw2ParticleElement.Type.POSITION:case s.Tw2ParticleElement.Type.VELOCITY:return 3;case s.Tw2ParticleElement.Type.MASS:return 1}return this.dimension}GetDeclaration(){let e;switch(this.elementType){case s.Tw2ParticleElement.Type.LIFETIME:e=n.Tw2VertexElement.Type.TANGENT;break;case s.Tw2ParticleElement.Type.POSITION:e=n.Tw2VertexElement.Type.POSITION;break;case s.Tw2ParticleElement.Type.VELOCITY:e=n.Tw2VertexElement.Type.NORMAL;break;case s.Tw2ParticleElement.Type.MASS:e=n.Tw2VertexElement.Type.BINORMAL;break;default:e=n.Tw2VertexElement.Type.TEXCOORD}return n.Tw2VertexElement.from({usage:e,usageIndex:this.usageIndex,elements:this.GetDimension()})}static black(e){return[["customName",e.string],["dimension",e.uint],["elementType",e.uint],["usageIndex",e.uint],["usedByGPU",e.boolean]]}}},"./particle/element/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/element/Tw2ParticleElement.js");r.d(t,"Tw2ParticleElement",function(){return n.Tw2ParticleElement});var s=r("./particle/element/Tw2ParticleElementDeclaration.js");r.d(t,"Tw2ParticleElementDeclaration",function(){return s.Tw2ParticleElementDeclaration})},"./particle/emitter/Tr2GpuSharedEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuSharedEmitter",function(){return i});var n=r("./global/index.js"),s=r("./particle/emitter/Tw2ParticleEmitter.js");class i extends s.Tw2ParticleEmitter{constructor(...e){super(...e),this.name="",this.angle=0,this.attractorPosition=n.vec3.create(),this.attractorStrength=0,this.color0=n.vec4.create(),this.color1=n.vec4.create(),this.color2=n.vec4.create(),this.color3=n.vec4.create(),this.colorMidpoint=0,this.continuousEmitter=!1,this.direction=n.vec3.create(),this.drag=0,this.emissionDensity=0,this.gravity=0,this.inheritVelocity=0,this.innerAngle=0,this.maxDisplacement=0,this.maxEmissionDensity=0,this.maxLifeTime=0,this.maxSpeed=0,this.minLifeTime=0,this.minSpeed=0,this.particleSystem=null,this.position=n.vec3.create(),this.radius=0,this.rate=0,this.scaledByParent=!1,this.sizeVariance=0,this.sizes=n.vec3.create(),this.textureIndex=0,this.turbulenceAmplitude=0,this.turbulenceFrequency=0,this.velocityStretchRotation=0}static black(e){return[["name",e.string],["particleSystem",e.object],["angle",e.float],["attractorPosition",e.vector3],["attractorStrength",e.float],["color0",e.vector4],["color1",e.vector4],["color2",e.vector4],["color3",e.vector4],["colorMidpoint",e.float],["continuousEmitter",e.boolean],["direction",e.vector3],["drag",e.float],["emissionDensity",e.float],["gravity",e.float],["maxDisplacement",e.float],["maxEmissionDensity",e.float],["maxLifeTime",e.float],["maxSpeed",e.float],["minLifeTime",e.float],["minSpeed",e.float],["position",e.vector3],["inheritVelocity",e.float],["innerAngle",e.float],["radius",e.float],["rate",e.float],["sizeVariance",e.float],["sizes",e.vector3],["scaledByParent",e.boolean],["textureIndex",e.uint],["turbulenceAmplitude",e.float],["turbulenceFrequency",e.float],["velocityStretchRotation",e.float]]}}i.__isStaging=4},"./particle/emitter/Tr2GpuUniqueEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuUniqueEmitter",function(){return i});var n=r("./global/index.js"),s=r("./particle/emitter/Tw2ParticleEmitter.js");class i extends s.Tw2ParticleEmitter{constructor(...e){super(...e),this.name="",this.angle=0,this.attractorPosition=n.vec3.create(),this.attractorStrength=0,this.color0=n.vec4.create(),this.color1=n.vec4.create(),this.color2=n.vec4.create(),this.color3=n.vec4.create(),this.colorMidpoint=0,this.continuousEmitter=!1,this.direction=n.vec3.create(),this.drag=0,this.emissionDensity=0,this.gravity=0,this.inheritVelocity=0,this.innerAngle=0,this.maxDisplacement=0,this.maxEmissionDensity=0,this.maxLifeTime=0,this.maxSpeed=0,this.minLifeTime=0,this.minSpeed=0,this.particleSystem=null,this.position=n.vec3.create(),this.radius=0,this.rate=0,this.scaledByParent=!1,this.sizeVariance=0,this.sizes=n.vec3.create(),this.textureIndex=0,this.turbulenceAmplitude=0,this.turbulenceFrequency=0,this.velocityStretchRotation=0}static black(e){return[["name",e.string],["particleSystem",e.object],["angle",e.float],["attractorPosition",e.vector3],["attractorStrength",e.float],["color0",e.vector4],["color1",e.vector4],["color2",e.vector4],["color3",e.vector4],["colorMidpoint",e.float],["continuousEmitter",e.boolean],["direction",e.vector3],["drag",e.float],["emissionDensity",e.float],["gravity",e.float],["maxDisplacement",e.float],["maxEmissionDensity",e.float],["maxLifeTime",e.float],["maxSpeed",e.float],["minLifeTime",e.float],["minSpeed",e.float],["position",e.vector3],["inheritVelocity",e.float],["innerAngle",e.float],["radius",e.float],["rate",e.float],["sizeVariance",e.float],["sizes",e.vector3],["scaledByParent",e.boolean],["textureIndex",e.uint],["turbulenceAmplitude",e.float],["turbulenceFrequency",e.float],["velocityStretchRotation",e.float]]}}i.__isStaging=4},"./particle/emitter/Tw2DynamicEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2DynamicEmitter",function(){return s});var n=r("./particle/emitter/Tw2ParticleEmitter.js");class s extends n.Tw2ParticleEmitter{constructor(...e){super(...e),this.name="",this.generators=[],this.maxParticles=0,this.particleSystem=null,this.rate=0,this._accumulatedRate=0,this._isValid=!1}Initialize(){this.Rebind()}Update(e){this.SpawnParticles(null,null,Math.min(e,.1))}Rebind(){if(this._isValid=!1,this.particleSystem){for(let e=0;e<this.generators.length;++e)if(!this.generators[e].Bind(this.particleSystem))return;this._isValid=!0}}SpawnParticles(e,t,r){if(!this._isValid)return;this._accumulatedRate+=this.rate*r;const n=Math.floor(this._accumulatedRate);this._accumulatedRate-=n;for(let r=0;r<n;++r){const r=this.particleSystem.BeginSpawnParticle();if(null===r)break;for(let n=0;n<this.generators.length;++n)this.generators[n].Generate(e,t,r);this.particleSystem.EndSpawnParticle()}}static black(e){return[["name",e.string],["particleSystem",e.object],["generators",e.array],["maxParticles",e.uint],["rate",e.float]]}}},"./particle/emitter/Tw2ParticleEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleEmitter",function(){return s});var n=r("./global/index.js");r("./core/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.particleSystem=null}Initialize(){}GetResources(e=[]){return this.particleSystem&&this.particleSystem.GetResources(e),e}Update(e){}}},"./particle/emitter/Tw2StaticEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2StaticEmitter",function(){return a});var n=r("./global/index.js"),s=r("./core/index.js"),i=r("./particle/emitter/Tw2ParticleEmitter.js");class a extends i.Tw2ParticleEmitter{constructor(...e){super(...e),this.name="",this.geometryResourcePath="",this.meshIndex=0,this.geometryResource=null,this._spawned=!1}get geometryIndex(){return this.meshIndex}set geometryIndex(e){this.meshIndex=e}Initialize(){""!==this.geometryResourcePath&&(this.geometryResource=n.resMan.GetResource(this.geometryResourcePath,e=>{e.systemMirror=!0,this.OnResPrepared(e)})),this._spawned=!1}GetResources(e=[]){return this.particleSystem&&this.particleSystem.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnResPrepared(){this.geometryResource&&this.geometryResource.meshes.length&&(this.geometryResource.meshes[0].bufferData||(this.geometryResource.systemMirror=!0,this.geometryResource.Reload()))}Update(){const e=this.geometryResource;if(!this._spawned&&this.particleSystem&&e&&e.IsGood()&&e.meshes.length>this.meshIndex&&e.meshes[this.meshIndex].bufferData){this._spawned=!0;const t=e.meshes[this.meshIndex],r=this.particleSystem.elements,n=new Array(r.length);for(let i=0;i<r.length;++i){const a=r[i].GetDeclaration(),o=t.declaration.FindUsage(a.usage,a.usageIndex-8);if(null===o)return void e.OnError(new s.ErrGeometryMeshMissingParticleElement({path:e.path,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));if(o.elements<a.elements)return void e.OnError(new s.ErrGeometryMeshElementComponentsMissing({path:e.path,inputCount:o.elements,elementCount:a.elements,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));n[i]=o.offset/4}const i=t.bufferData.length/t.declaration.stride*4;for(let e=0;e<i;++e){const r=this.particleSystem.BeginSpawnParticle();if(null===r)break;for(let s=0;s<this.particleSystem._elements.length;++s){const i=this.particleSystem._elements[s];for(let a=0;a<i.dimension;++a)i.buffer[i.instanceStride*r+i.startOffset+a]=t.bufferData[n[s]+a+e*t.declaration.stride/4]}this.particleSystem.EndSpawnParticle()}}}static black(e){return[["name",e.string],["particleSystem",e.object],["geometryResourcePath",e.string],["meshIndex",e.uint]]}}},"./particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/emitter/Tr2GpuSharedEmitter.js");r.d(t,"Tr2GpuSharedEmitter",function(){return n.Tr2GpuSharedEmitter});var s=r("./particle/emitter/Tr2GpuUniqueEmitter.js");r.d(t,"Tr2GpuUniqueEmitter",function(){return s.Tr2GpuUniqueEmitter});var i=r("./particle/emitter/Tw2StaticEmitter.js");r.d(t,"Tw2StaticEmitter",function(){return i.Tw2StaticEmitter});var a=r("./particle/emitter/Tw2DynamicEmitter.js");r.d(t,"Tw2DynamicEmitter",function(){return a.Tw2DynamicEmitter})},"./particle/force/Tr2ForceSphereVolume.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ForceSphereVolume",function(){return i});var n=r("./particle/force/Tw2ParticleForce.js"),s=r("./core/index.js");r("./core/reader/Tw2BlackPropertyReaders.js");class i extends n.Tw2ParticleForce{constructor(...e){super(...e),this.forces=[],this.radius=0}ApplyForce(e,t,r,n,i){throw new s.ErrFeatureNotImplemented}Update(e){for(let t=0;t<this.forces.length;t++)this.forces[t].Update(e)}static black(e){return[["forces",e.array],["radius",e.float]]}}i.__isStaging=4},"./particle/force/Tr2ParticleVortexForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ParticleVortexForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.axis=n.vec3.create(),this.magnitude=0,this.position=n.vec3.create()}ApplyForce(e,t,r,n,s){}Update(e){}static black(e){return[["axis",e.vector3],["magnitude",e.float],["position",e.vector3]]}}i.__isStaging=4},"./particle/force/Tw2ParticleAttractorForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttractorForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.magnitude=0,this.position=n.vec3.create()}ApplyForce(e,t,r,i,a){const o=s.Tw2ParticleForce.global.vec3_0;o[0]=this.position[0]-e.buffer[e.offset],o[1]=this.position[1]-e.buffer[e.offset+1],o[2]=this.position[2]-e.buffer[e.offset+2],n.vec3.normalize(o,o),n.vec3.scale(o,o,this.magnitude),n.vec3.add(r,r,o)}static black(e){return[["magnitude",e.float],["position",e.vector3]]}}},"./particle/force/Tw2ParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDirectForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.force=n.vec3.create()}ApplyForce(e,t,r,s,i){n.vec3.add(r,r,this.force)}static black(e){return[["force",e.vector3]]}}},"./particle/force/Tw2ParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDragForce",function(){return s});var n=r("./particle/force/Tw2ParticleForce.js");class s extends n.Tw2ParticleForce{constructor(...e){super(...e),this.drag=.1}ApplyForce(e,t,r,n,s){r[0]+=t.buffer[t.offset]*-this.drag,r[1]+=t.buffer[t.offset+1]*-this.drag,r[2]+=t.buffer[t.offset+2]*-this.drag}static black(e){return[["drag",e.float]]}}},"./particle/force/Tw2ParticleFluidDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleFluidDragForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.drag=.1}ApplyForce(e,t,r,i,a){const o=s.Tw2ParticleForce.global.vec3_0,u=s.Tw2ParticleForce.global.vec3_1,c=Math.sqrt(t.buffer[t.offset]*t.buffer[t.offset]+t.buffer[t.offset+1]*t.buffer[t.offset+1]+t.buffer[t.offset+2]*t.buffer[t.offset+2]);o[0]=t.buffer[t.offset]*-c*this.drag,o[1]=t.buffer[t.offset+1]*-c*this.drag,o[2]=t.buffer[t.offset+2]*-c*this.drag,n.vec3.scale(u,o,i*a),u[0]+=t.buffer[t.offset],u[1]+=t.buffer[t.offset+1],u[2]+=t.buffer[t.offset+2],t.buffer[t.offset]*u[0]+t.buffer[t.offset+1]*u[1]+t.buffer[t.offset+2]*u[2]<0?(r[0]=-t.buffer[t.offset]/i/a,r[1]=-t.buffer[t.offset+1]/i/a,r[2]=-t.buffer[t.offset+2]/i/a):n.vec3.copy(r,o)}static black(e){return[["drag",e.float]]}}},"./particle/force/Tw2ParticleForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleForce",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{ApplyForce(e,t,r,n,i){throw new s.ErrAbstractClassMethod}Update(e){}}i.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec4_0:n.vec4.create()}},"./particle/force/Tw2ParticleSpring.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSpring",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.springConstant=0,this.position=n.vec3.create()}ApplyForce(e,t,r,n,s){r[0]+=(this.position[0]-e.buffer[e.offset])*this.springConstant,r[1]+=(this.position[1]-e.buffer[e.offset+1])*this.springConstant,r[2]+=(this.position[2]-e.buffer[e.offset+2])*this.springConstant}static black(e){return[["position",e.vector3],["springConstant",e.float]]}}},"./particle/force/Tw2ParticleTurbulenceForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleTurbulenceForce",function(){return i});var n=r("./global/index.js"),s=r("./particle/force/Tw2ParticleForce.js");class i extends s.Tw2ParticleForce{constructor(...e){super(...e),this.amplitude=n.vec3.fromValues(1,1,1),this.frequency=n.vec4.fromValues(1,1,1,1),this.noiseLevel=3,this.noiseRatio=.5,this._time=0}ApplyForce(e,t,r,i,a){if(0===this.noiseLevel)return;let o=e.buffer[e.offset]*this.frequency[0],u=e.buffer[e.offset+1]*this.frequency[1],c=e.buffer[e.offset+2]*this.frequency[2],l=this._time*this.frequency[3],h=0,d=.5,f=1/this.noiseRatio;const m=n.vec4.set(s.Tw2ParticleForce.global.vec4_0,0,0,0,0);for(let e=0;e<this.noiseLevel;++e)n.noise.turbulence(m,o,u,c,l,d),h+=d,o*=f,u*=f,c*=f,l*=f,d*=this.noiseRatio;r[0]+=m[0]*this.amplitude[0]*h,r[1]+=m[1]*this.amplitude[1]*h,r[2]+=m[2]*this.amplitude[2]*h}Update(e){this._time+=e}static black(e){return[["amplitude",e.vector3],["frequency",e.vector4],["noiseLevel",e.float],["noiseRatio",e.float]]}}},"./particle/force/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/force/Tr2ForceSphereVolume.js");r.d(t,"Tr2ForceSphereVolume",function(){return n.Tr2ForceSphereVolume});var s=r("./particle/force/Tr2ParticleVortexForce.js");r.d(t,"Tr2ParticleVortexForce",function(){return s.Tr2ParticleVortexForce});var i=r("./particle/force/Tw2ParticleAttractorForce.js");r.d(t,"Tw2ParticleAttractorForce",function(){return i.Tw2ParticleAttractorForce});var a=r("./particle/force/Tw2ParticleDirectForce.js");r.d(t,"Tw2ParticleDirectForce",function(){return a.Tw2ParticleDirectForce});var o=r("./particle/force/Tw2ParticleDragForce.js");r.d(t,"Tw2ParticleDragForce",function(){return o.Tw2ParticleDragForce});var u=r("./particle/force/Tw2ParticleFluidDragForce.js");r.d(t,"Tw2ParticleFluidDragForce",function(){return u.Tw2ParticleFluidDragForce});var c=r("./particle/force/Tw2ParticleSpring.js");r.d(t,"Tw2ParticleSpring",function(){return c.Tw2ParticleSpring});var l=r("./particle/force/Tw2ParticleTurbulenceForce.js");r.d(t,"Tw2ParticleTurbulenceForce",function(){return l.Tw2ParticleTurbulenceForce})},"./particle/generators/Tw2ParticleAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttributeGenerator",function(){return i});var n=r("./global/index.js"),s=r("./core/index.js");class i extends n.Tw2BaseClass{Bind(e){throw new s.ErrAbstractClassMethod}Generate(e,t,r){throw new s.ErrAbstractClassMethod}}i.global={vec3_0:n.vec3.create()}},"./particle/generators/Tw2RandomIntegerAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return a});var n=r("./global/index.js"),s=r("./particle/element/Tw2ParticleElement.js"),i=r("./particle/generators/Tw2ParticleAttributeGenerator.js");class a extends i.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),this.customName="",this.elementType=s.Tw2ParticleElement.Type.CUSTOM,this.minRange=n.vec4.create(),this.maxRange=n.vec4.create(),this._element=null}Bind(e){for(let t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==s.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(let e=0;e<this._element.dimension;++e)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+e]=Math.floor(this.minRange[e]+Math.random()*(this.maxRange[e]-this.minRange[e])+.5)}static black(e){return[["customName",e.string],["minRange",e.vector4],["maxRange",e.vector4]]}}},"./particle/generators/Tw2RandomUniformAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return a});var n=r("./global/index.js"),s=r("./particle/element/Tw2ParticleElement.js"),i=r("./particle/generators/Tw2ParticleAttributeGenerator.js");class a extends i.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),this.customName="",this.elementType=s.Tw2ParticleElement.Type.CUSTOM,this.minRange=n.vec4.create(),this.maxRange=n.vec4.create(),this._element=null}Bind(e){for(let t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==s.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(let e=0;e<this._element.dimension;++e)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+e]=this.minRange[e]+Math.random()*(this.maxRange[e]-this.minRange[e])}static black(e){return[["customName",e.string],["elementType",e.uint],["minRange",e.vector4],["maxRange",e.vector4]]}}},"./particle/generators/Tw2SphereShapeAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return a});var n=r("./global/index.js"),s=r("./particle/element/Tw2ParticleElement.js"),i=r("./particle/generators/Tw2ParticleAttributeGenerator.js");class a extends i.Tw2ParticleAttributeGenerator{constructor(...e){super(...e),this.customName="",this.distributionExponent=0,this.maxPhi=360,this.maxRadius=0,this.maxSpeed=0,this.maxTheta=360,this.minPhi=0,this.minRadius=0,this.minSpeed=0,this.minTheta=0,this.parentVelocityFactor=1,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.controlPosition=!0,this.controlVelocity=!0,this._position=null,this._velocity=null}Bind(e){this._position=null,this._velocity=null;for(let t=0;t<e._elements.length;++t)e._elements[t].elementType===s.Tw2ParticleElement.Type.POSITION&&this.controlPosition?this._position=e._elements[t]:e._elements[t].elementType===s.Tw2ParticleElement.Type.VELOCITY&&this.controlVelocity&&(this._velocity=e._elements[t]);return!(this.controlPosition&&null===this._position||this.controlVelocity&&null===this._velocity)}Generate(e,t,r){const s=(this.minPhi+Math.random()*(this.maxPhi-this.minPhi))/180*Math.PI,a=(this.minTheta+Math.random()*(this.maxTheta-this.minTheta))/180*Math.PI,o=i.Tw2ParticleAttributeGenerator.global.vec3_0;if(o[0]=Math.sin(s)*Math.cos(a),o[1]=-Math.cos(s),o[2]=Math.sin(s)*Math.sin(a),n.vec3.transformQuat(o,o,this.rotation),this._velocity){const e=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),n=this._velocity.instanceStride*r+this._velocity.startOffset;this._velocity.buffer[n]=o[0]*e,this._velocity.buffer[n+1]=o[1]*e,this._velocity.buffer[n+2]=o[2]*e,t&&(this._velocity.buffer[n]+=t.buffer[t.offset]*this.parentVelocityFactor,this._velocity.buffer[n+1]+=t.buffer[t.offset+1]*this.parentVelocityFactor,this._velocity.buffer[n+2]+=t.buffer[t.offset+2]*this.parentVelocityFactor)}if(this._position){n.vec3.scale(o,o,this.minRadius+Math.random()*(this.maxRadius-this.minRadius)),n.vec3.add(o,o,this.position),e&&(o[0]+=e.buffer[e.offset],o[1]+=e.buffer[e.offset+1],o[2]+=e.buffer[e.offset+2]);const t=this._position.instanceStride*r+this._position.startOffset;this._position.buffer[t]=o[0],this._position.buffer[t+1]=o[1],this._position.buffer[t+2]=o[2]}}static black(e){return[["customName",e.string],["distributionExponent",e.float],["maxPhi",e.float],["maxRadius",e.float],["maxSpeed",e.float],["maxTheta",e.float],["minPhi",e.float],["minRadius",e.float],["minSpeed",e.float],["minTheta",e.float],["parentVelocityFactor",e.float],["position",e.vector3],["rotation",e.vector4]]}}a.__isStaging=1},"./particle/generators/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/generators/Tw2RandomIntegerAttributeGenerator.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return n.Tw2RandomIntegerAttributeGenerator});var s=r("./particle/generators/Tw2RandomUniformAttributeGenerator.js");r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return s.Tw2RandomUniformAttributeGenerator});var i=r("./particle/generators/Tw2SphereShapeAttributeGenerator.js");r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return i.Tw2SphereShapeAttributeGenerator})},"./particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/constraint/index.js");r.d(t,"Tr2PlaneConstraint",function(){return n.Tr2PlaneConstraint});var s=r("./particle/element/index.js");r.d(t,"Tw2ParticleElement",function(){return s.Tw2ParticleElement}),r.d(t,"Tw2ParticleElementDeclaration",function(){return s.Tw2ParticleElementDeclaration});var i=r("./particle/emitter/index.js");r.d(t,"Tr2GpuSharedEmitter",function(){return i.Tr2GpuSharedEmitter}),r.d(t,"Tr2GpuUniqueEmitter",function(){return i.Tr2GpuUniqueEmitter}),r.d(t,"Tw2StaticEmitter",function(){return i.Tw2StaticEmitter}),r.d(t,"Tw2DynamicEmitter",function(){return i.Tw2DynamicEmitter});var a=r("./particle/force/index.js");r.d(t,"Tr2ForceSphereVolume",function(){return a.Tr2ForceSphereVolume}),r.d(t,"Tr2ParticleVortexForce",function(){return a.Tr2ParticleVortexForce}),r.d(t,"Tw2ParticleAttractorForce",function(){return a.Tw2ParticleAttractorForce}),r.d(t,"Tw2ParticleDirectForce",function(){return a.Tw2ParticleDirectForce}),r.d(t,"Tw2ParticleDragForce",function(){return a.Tw2ParticleDragForce}),r.d(t,"Tw2ParticleFluidDragForce",function(){return a.Tw2ParticleFluidDragForce}),r.d(t,"Tw2ParticleSpring",function(){return a.Tw2ParticleSpring}),r.d(t,"Tw2ParticleTurbulenceForce",function(){return a.Tw2ParticleTurbulenceForce});var o=r("./particle/generators/index.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return o.Tw2RandomIntegerAttributeGenerator}),r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return o.Tw2RandomUniformAttributeGenerator}),r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return o.Tw2SphereShapeAttributeGenerator});var u=r("./particle/Tw2GpuParticleSystem.js");r.d(t,"Tr2GpuParticleSystem",function(){return u.Tr2GpuParticleSystem});var c=r("./particle/Tw2ParticleSystem.js");r.d(t,"Tw2ParticleSystem",function(){return c.Tw2ParticleSystem})},"./sof/EveSOF.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOF",function(){return l});var n=r("./global/index.js"),s=r("./global/util/index.js"),i=r("./curve/index.js"),a=r("./core/index.js"),o=r("./eve/index.js");function u(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var i=e.apply(t,r);function a(e){u(i,n,s,a,o,"next",e)}function o(e){u(i,n,s,a,o,"throw",e)}a(void 0)})}}function l(e){var t=this;const r=this;var u=null,l=null;function h(e){return e?Object(s.get)(u.generic,"shaderPrefixAnimated",""):Object(s.get)(u.generic,"shaderPrefix","")}function d(e,t,r,n,i){var a=null;if(Object(s.get)(n,"resPathInsert","").length&&(a=n.resPathInsert),"respathinsert"in i&&1===i.respathinsert.length){if("none"===i.respathinsert[0])return e;a=i.respathinsert[0]}if("MaterialMap"===t||"PaintMaskMap"===t||"PmdgMap"===t){var o=e.lastIndexOf("/"),u=e;if(o>=0&&(u=e.substr(0,o+1)+a+"/"+e.substr(o+1)),(o=u.lastIndexOf("_"))>=0){u=u.substr(0,o)+"_"+a+u.substr(o);var c=Object(s.get)(r,"textureOverrides",{});if(t in c&&n.name in c[t])return u}}return e}function f(e,t){for(var r=0;r<e.length;++r)if(t.substr(0,e[r].length)===e[r])return r;return null}function m(e,t,r,n){var i,a,o,c;return"mesh"in r&&null!==(a=f(i=u.generic.materialPrefixes,e))&&a<r.mesh.length&&0==(Object(s.get)(t,"blockedMaterials",0)&1<<a)&&(o=Object(s.get)(u.material,r.mesh[a],null))?(c=e.substr(i[a].length),Object(s.get)(o.parameters,c,void 0)):(a=f(i=u.generic.patternMaterialPrefixes,e),"pattern"in r&&null!==a&&1+a<r.pattern.length&&(o=Object(s.get)(u.material,r.pattern[1+a],null))?(c=e.substr(i[a].length),Object(s.get)(o.parameters,c,void 0)):null!==a&&(o=Object(s.get)(u.material,n.defaultPatternLayer1MaterialName,null))?(c=e.substr(i[a].length),Object(s.get)(o.parameters,c,void 0)):void 0)}function p(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}function v(e,t,r,n,i,o,c,l,f){const v=Object(s.get)(r,t,[]);for(let t=0;t<v.length;++t){const g=v[t],R=new a.Tw2Effect;for(let e=0;e<2;e++){const t=f[e];if(t){const{PatternMaskMap:e,DiffuseColor:r,FresnelColor:n,Gloss:s}=t.parameters;R.parameters[e.name]=e,R.parameters[r.name]=r,R.parameters[n.name]=n,R.parameters[s.name]=s}else console.error("Missing mask "+e)}R.effectFilePath=u.generic.areaShaderLocation+(_=l||g.shader,E=r.isSkinned,S=void 0,T=void 0,S=h(E),T=(_="/"+_).lastIndexOf("/"),_.substr(0,T+1)+S+_.substr(T+1));const b=Object(s.get)(Object(s.get)(u.generic.areaShaders,g.shader,{}),"parameters",[]);for(let e=0;e<b.length;++e){const t=b[e];let r=m(t,g,c,i);(r=(r=(r=(r=r||Object(s.get)(Object(s.get)(Object(s.get)(u.generic.hullAreas,g.name,{}),"parameters",{}),t))||Object(s.get)(Object(s.get)(Object(s.get)(i.hullAreas,g.name,{}),"parameters",{}),t))||Object(s.get)(Object(s.get)(Object(s.get)(n.areas,g.name,{}),"parameters",{}),t))||Object(s.get)(Object(s.get)(g,"parameters",{}),t))&&(R.parameters[t]?R.parameters[t].SetValue(r):R.parameters[t]=new a.Tw2Vector4Parameter(t,r))}const A=Object(s.get)(g,"textures",{});for(let e in A)if(A.hasOwnProperty(e)){const t=d(A[e],e,g,n,c);R.parameters[e]?R.parameters[e].SetValue(t):R.parameters[e]=new a.Tw2TextureParameter(e,t)}for(let e=0;e<o.layers.length;++e){const t=o.layers[e]?o.layers[e].textureName:"";if(t&&!R.parameters[t]){const t=new a.Tw2TextureParameter(o.layers[e].textureName);t.resourcePath=o.layers[e].textureResFilePath,t.useAllOverrides=!0,t.addressUMode=p(Object(s.get)(o.layers[e],"projectionTypeU",0)),t.addressVMode=p(Object(s.get)(o.layers[e],"projectionTypeV",0)),t.Initialize(),R.parameters[o.layers[e].textureName]=t}}const y=Object(s.get)(Object(s.get)(u.generic.areaShaders,g.shader,{}),"defaultTextures",{});for(let e in y)y.hasOwnProperty(e)&&(e in R.parameters||(R.parameters[e]=new a.Tw2TextureParameter(e,y[e])));R.Initialize();const j=new a.Tw2MeshArea;j.name=g.name,j.effect=R,j.index=Object(s.get)(g,"index",0),j.count=Object(s.get)(g,"count",1),e.push(j)}var _,E,S,T}function _(e,t=-1){if(!e)return null;const r="group".concat(t);return e[r]?e[r]:null}this.SKIP_EMPTY_ITEMS=!0;const E="res:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",S="res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightcone.fx",T="res:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",g="res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightglow.fx";const R="res:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",b="res:/graphics/effect/managed/space/spaceobject/fx/skinned_planeglow.fx";const A="res:/Graphics/Effect/Managed/Space/Booster/BoosterVolumetric.fx",y="res:/Graphics/Effect/Managed/Space/Booster/BoosterGlowAnimated.fx",j="res:/Texture/global/noise.dds.0.png",w="res:/Texture/Global/noise32cube_volume.dds.0.png",C="res:/Texture/Particle/whitesharp.dds.0.png";function D(t,r,a,o){function u(r){return function(u){u.constructor.__isEffectChild?t.effectChildren.push(u):t.children.push(u),n.vec3.copy(u.translation,Object(s.get)(r,"translation",[0,0,0])),n.quat.copy(u.rotation,Object(s.get)(r,"rotation",[0,0,0,1])),n.vec3.copy(u.scaling,Object(s.get)(r,"scaling",[1,1,1]));var c=Object(s.get)(r,"id",-1);-1!==c&&o[c]&&function t(r,n,s){if(Array.isArray(r.particleEmitters)){for(var a=0;a<r.particleEmitters.length;++a)if("rate"in r.particleEmitters[a]){var o=new i.Tw2ValueBinding;o.sourceObject=s,o.sourceAttribute="currentValue",o.destinationObject=r.particleEmitters[a],o.destinationAttribute="rate",o.Initialize(),n.bindings.push(o)}for(a=0;a<r.children.length;++a)t(r.children[a],n,s)}else e.Log({type:"warning",name:"Space object factory",message:"Unable to bind particle emitters: ".concat(r.constructor.name)})}(u,a,o[c])}}const c=Object(s.get)(r,"children",[]);for(let t=0;t<c.length;++t){const n=c[t].redFilePath;n?e.resMan.GetObject(n,u(c[t])):e.Log({type:"warning",name:"Space object factory",message:'No resource path found for "'.concat(r.name,'" child at index ').concat(t)})}}function L(e,t,r){for(var n=-1,i=0;i<u.generic.materialPrefixes.length;++i)e.substr(0,u.generic.materialPrefixes[i].length)===u.generic.materialPrefixes[i]&&(n=i,e=e.substr(u.generic.materialPrefixes[i].length));if(-1!==n){var a=Object(s.get)(t,"materialUsageMtl"+(n+1),n);if(a>=0&&a<u.generic.materialPrefixes.length&&(e=u.generic.materialPrefixes[a]+e)in r.parameters)return r.parameters[e]}}var P=[0,0,0,0];function x(e,t,r,n){switch(n){case"overridable":return t||(r||P);case"half_overridable":return e.indexOf("GlowColor")>=0?r||P:t||(r||P);case"not_overridable":case"half_overridable_2":return r||P}return P}this.SetupTurretMaterial=function(e,t,r,n,s){return this.FetchTurretMaterial(e,t,r).then(n).catch(s)},this.FetchTurretMaterial=function(){var e=c(function*(e,t,r){return yield this.FetchSOF(),function(e,t,r){var s=u.faction[t],i=u.faction[r],o=null;s&&s.areas&&"hull"in s.areas&&(o=s.areas.hull);var c=null;if(i&&i.areas&&"hull"in i.areas&&(c=i.areas.hull),(o||c)&&e.turretEffect){var l=e.turretEffect.parameters;for(var h in l)if(l.hasOwnProperty(h)){if(l[h].constructor.prototype!==a.Tw2Vector4Parameter.prototype)continue;var d=null,f=null;o&&(d=L(h,s,o)),c&&(f=L(h,s,o)),n.vec4.copy(l[h].value,x(h,d,f,e.turretEffect.name))}e.turretEffect.BindParameters()}}(e,t,r),e});return function(t,r,n){return e.apply(this,arguments)}}(),this.FetchSOF=function(){let t=null;return c(function*(){return t||(l=a.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",parameters:{MainIntensity:1,GradientMap:"res:/texture/particle/whitesharp_gradient.dds.0.png"}}),t=e.FetchObject("res:/dx9/model/spaceobjectfactory/data.red").then(e=>u=e).catch(t=>{e.Log({type:"error",name:"Space object factory",message:"Could not load data"})})),t})}(),this.ExtendPatternsFrom=function(){var t=c(function*(t){if(!t)return Promise.reject(new Error("Invalid respath: undefined"));const r=yield this.FetchSOF(),n=yield e.FetchObject(t);r.pattern=r.pattern.concat(n.pattern)});return function(e){return t.apply(this,arguments)}}(),this.ExtendMaterialsFrom=function(){var t=c(function*(t){if(!t)return Promise.reject(new Error("Invalid respath: undefined"));const r=yield this.FetchSOF(),n=yield e.FetchObject(t);n.material;t.includes(".black")?n.material.forEach(e=>{r.material[e.name]=e.Assign()}):Object.assign(r.material,n.material)});return function(e){return t.apply(this,arguments)}}();const O=function(){var e=c(function*(e){const r=yield t.FetchSOF();if(r[e])return r[e];throw new Error("Invalid sof object (".concat(e,")"))});return function(t){return e.apply(this,arguments)}}(),I=function(){var e=c(function*(e,t,r){const n=yield O(e);if(Object(s.isArray)(n)){for(let r=0;r<n.length;r++)if(n[t].name===e)return n[t]}else if(n[t])return n[t];if(r)throw new r({name:t});throw new Error("Invalid sof object key (".concat(e,":").concat(t,")"))});return function(t,r,n){return e.apply(this,arguments)}}(),M=function(){var e=c(function*(e){const t=yield O(e),r={};if(Object(s.isArray)(t)){for(let e=0;e<t.length;e++)r[t[e].name]=t[e].description||"";return r}for(const e in t)t.hasOwnProperty(e)&&(r[e]=t[e].description||"");return r});return function(t){return e.apply(this,arguments)}}(),F=function(){var e=c(function*(e,r){yield t.FetchHull(e);const{projections:n=[]}=r;for(let t=0;t<n.length;t++)if(n[t].name===e){const e={};return e.name=r.name,e.layer1=r.layer1,e.layer2=r.layer2,e.transformLayer1=n[t].transformLayer1,e.transformLayer2=n[t].transformLayer2,e}});return function(t,r){return e.apply(this,arguments)}}();this.FetchObject=function(){var e=c(function*(e){if(!Object(s.isDNA)(e))throw new Error("Invalid DNA (".concat(e,")"));const c=e.split(":"),d={};for(let e=3;e<c.length;++e){const t=c[e].split("?");d[t[0]]=t[1].split(";")}const f=yield t.FetchHull(c[0]),m=yield t.FetchFaction(c[1]),L=yield t.FetchRace(c[2]);if(d.mesh)for(let e=0;e<d.mesh.length;e++)yield t.FetchMaterial(d.mesh[e]);if(d.pattern&&d.pattern.length>1)for(let e=1;e<d.pattern.length;e++)yield t.FetchMaterial(d.pattern[e]);const P=new(2===Object(s.get)(f,"buildClass",0)?o.EveSpaceObject:o.EveShip),x=function(e,t,r){const n={patterns:[],layers:[]};if("pattern"in r){let t={};for(let e=0;e<u.pattern.length;++e)if(u.pattern[e].name===r.pattern[0]){t=u.pattern[e];break}n.layers.push(Object(s.get)(t,"layer1",{})),n.layers.push(Object(s.get)(t,"layer2",{}));const i=Object(s.get)(t,"projections",[]);let a={};for(let t=0;t<i.length;++t)if(i[t].name===e.name){a=i[t];break}n.patterns.push(Object(s.get)(a,"transformLayer1",{})),n.patterns.push(Object(s.get)(a,"transformLayer2",{}))}else{const r=Object(s.get)(t,"defaultPattern",{});n.layers.push(Object(s.get)(r,"layer1",{})),n.layers.push(Object(s.get)(r,"layer2",{}));const i=Object(s.get)(e,"defaultPattern",{});n.patterns.push(Object(s.get)(i,"transformLayer1",{})),n.patterns.push(Object(s.get)(i,"transformLayer2",{}))}return n}(f,L,d);!function(e,t={}){const{patterns:r=[],layers:s=[]}=t;for(let t=0;t<2;++t){const i=r[t]||{},a=s[t]||{},{rotation:u=n.quat.create(),scaling:c=n.vec3.fromValues(1,1,1),position:l=n.vec3.create(),isMirrored:h=!1}=i,{display:d=!!s[t].textureName,materialSource:f=0,textureName:m="PatternMask".concat(t+1,"Map"),textureResFilePath:v="res:/texture/global/black.dds.0.png",projectionTypeU:_=0,projectionTypeV:E=0,isTargetMtl1:S=!0,isTargetMtl2:T=!0,isTargetMtl3:g=!0,isTargetMtl4:R=!0}=a,b=e.customMasks[t]||new o.EveCustomMask;b.name="Pattern".concat(t+1),b.display=d,n.quat.copy(b.rotation,u),n.vec3.copy(b.scaling,c),n.vec3.copy(b.translation,l),n.vec4.set(b.targetMaterials,S?1:0,T?1:0,g?1:0,R?1:0),b.materialIndex=f,b.isMirrored=!!h;const{PatternMaskMap:A,DiffuseColor:y,FresnelColor:j,Gloss:w}=b.parameters;A.name=m,A.resourcePath=v,A.useAllOverrides=!0,A.addressUMode=p(_),A.addressVMode=p(E),A.Initialize();const C="PMtl".concat(t+1);y.name="".concat(C,"DiffuseColor"),j.name="".concat(C,"FresnelColor"),w.name="".concat(C,"Gloss"),b.Initialize(),e.customMasks[t]!==b&&e.customMasks.push(b)}}(P,x),function(e,t,r,n,i,u){const c=e.mesh||new a.Tw2Mesh;c.geometryResPath=t.geometryResFilePath,e.mesh!==c?(e.boundingSphereCenter[0]=t.boundingSphere[0],e.boundingSphereCenter[1]=t.boundingSphere[1],e.boundingSphereCenter[2]=t.boundingSphere[2],e.boundingSphereRadius=t.boundingSphere[3]):c.EmptyAreas();const l=e.customMasks;l[0]=l[0]||new o.EveCustomMask,l[1]=l[1]||new o.EveCustomMask;const h=[t,r,n,u,i,void 0,l];v(Object(s.get)(c,"opaqueAreas",[]),"opaqueAreas",...h),v(Object(s.get)(c,"transparentAreas",[]),"transparentAreas",...h),v(Object(s.get)(c,"additiveAreas",[]),"additiveAreas",...h),v(Object(s.get)(c,"decalAreas",[]),"decalAreas",...h),v(Object(s.get)(c,"depthAreas",[]),"depthAreas",...h),e.mesh!==c&&("shapeEllipsoidCenter"in t&&(e.shapeEllipsoidCenter=t.shapeEllipsoidCenter),"shapeEllipsoidRadius"in t&&(e.shapeEllipsoidRadius=t.shapeEllipsoidRadius)),e.mesh=c,c.Initialize()}(P,f,m,L,d,x),function(e,t,r={}){const n=Object(s.get)(t,"hullDecals",[]);for(let t=0;t<n.length;++t){const i=n[t],a=_(r.decals,i.groupIndex);if(a&&!a.isVisible)continue;const c=a&&a.shader||i.shader;if(!c)continue;const l=u.generic.decalShaderLocation+"/"+h(!1)+c,d=Object.assign({},i.parameters),f=Object.assign(Object(s.get)(Object(s.get)(u.generic.decalShaders,i.shader,{}),"defaultTextures",{}));a&&(Object.assign(d,a.parameters),Object.assign(f,a.textures)),Object.assign(f,i.textures),e.decals.push(o.EveSpaceObjectDecal.from({name:i.name,groupIndex:i.groupIndex,parentBoneIndex:i.boneIndex,indexBuffer:i.indexBuffer,position:i.position,rotation:i.rotation,scaling:i.scaling,effect:{effectFilePath:l,parameters:d,textures:f}}))}}(P,f,m),function(e,t,i){const a=Object(s.get)(t,"spriteSets",[]),u=Object(s.get)(i,"spriteSets",{});for(let i=0;i<a.length;++i){const c=a[i],h=Object(s.get)(c,"items",[]),d=[];for(let e=0;e<h.length;e++){const t=Object.assign({blinkRate:.1,maxScale:10,minScale:1},h[e]),i=_(u,t.groupIndex);i&&(t.groupName=i.name,Object(s.assignIfExists)(t,i,"color")),(!r.SKIP_EMPTY_ITEMS||t.color&&!n.vec3.isEmpty(t.color))&&d.push(t)}r.SKIP_EMPTY_ITEMS&&!d.length||e.spriteSets.push(o.EveSpriteSet.from({name:c.name,useQuads:!0,skinned:!(!t.isSkinned||!c.skinned),effect:l,items:d}))}}(P,f,m),function(e,t,n){const i=Object(s.get)(t,"spotlightSets",[]),a=Object(s.get)(n,"spotlightSets",{});for(let t=0;t<i.length;++t){const n=i[t],u=Object(s.get)(n,"items",[]),c=n.skinned,l=[];for(let e=0;e<u.length;++e){const t=Object.assign({},u[e]),n=_(a,t.groupIndex);n&&Object(s.assignIfExists)(t,n,["coneColor","spriteColor","flareColor"]),r.SKIP_EMPTY_ITEMS&&!n||l.push(t)}r.SKIP_EMPTY_ITEMS&&!l.length||e.spotlightSets.push(o.EveSpotlightSet.from({name:n.name,items:l,coneEffect:{effectFilePath:c?S:E,parameters:{TextureMap:n.coneTextureResPath,zOffset:Object(s.get)(n,"zOffset",0)}},glowEffect:{effectFilePath:c?g:T,parameters:{TextureMap:n.glowTextureResPath}}}))}}(P,f,m),function(e,t,i){const a=Object(s.get)(t,"planeSets",[]),u=Object(s.get)(i,"planeSets",{});for(let t=0;t<a.length;++t){const i=a[t],c=Object(s.get)(i,"items",[]),l=[];for(let e=0;e<c.length;++e){const t=Object.assign({boneIndex:-1},c[e]),i=_(u,t.groupIndex);i&&Object(s.assignIfExists)(t,i,"color"),(!r.SKIP_EMPTY_ITEMS||t.color&&!n.vec3.isEmpty(t.color))&&l.push(t)}r.SKIP_EMPTY_ITEMS&&!l.length||e.planeSets.push(o.EvePlaneSet.from({name:i.name,items:l,effect:{effectFilePath:i.skinned?b:R,textures:{Layer1Map:i.layer1MapResPath,Layer2Map:i.layer2MapResPath,MaskMap:i.maskMapResPath,PlaneData:Object(s.get)(i,"planeData",[1,0,0,0])}}}))}}(P,f,m),function(e,t,r){if(!t.booster)return;const n=[0,0,0,0],i=Object(s.get)(r,"booster",{}),a=t.booster,u=Object(s.get)(a,"items",[]);for(let t=0;t<u.length;++t)e.locators.push(o.EveLocator2.from({name:"locator_booster_"+(t+1),transform:u[t].transform,atlasIndex0:Object(s.get)(u[t],"atlasIndex0",0),atlasIndex1:Object(s.get)(u[t],"atlasIndex1",0)}));e.boosters=o.EveBoosterSet.from({glowScale:i.glowScale,symHaloScale:i.symHaloScale,haloScaleX:i.haloScaleX,haloScaleY:i.haloScaleY,haloColor:i.haloColor,glowColor:i.glowColor,warpGlowColor:i.warpGlowColor,warpHaloColor:i.warpHalpColor,trailColor:i.trailColor,trailSize:i.trailSize,effect:{effectFilePath:A,parameters:{NoiseFunction0:Object(s.get)(i.shape0,"noiseFunction",0),NoiseSpeed0:Object(s.get)(i.shape0,"noiseSpeed",0),NoiseAmplitudeStart0:Object(s.get)(i.shape0,"noiseAmplitureStart",n),NoiseAmplitudeEnd0:Object(s.get)(i.shape0,"noiseAmplitureEnd",n),NoiseFrequency0:Object(s.get)(i.shape0,"noiseFrequency",n),Color0:Object(s.get)(i.shape0,"color",n),NoiseFunction1:Object(s.get)(i.shape1,"noiseFunction",0),NoiseSpeed1:Object(s.get)(i.shape1,"noiseSpeed",0),NoiseAmplitudeStart1:Object(s.get)(i.shape1,"noiseAmplitureStart",n),NoiseAmplitudeEnd1:Object(s.get)(i.shape1,"noiseAmplitureEnd",n),NoiseFrequency1:Object(s.get)(i.shape1,"noiseFrequency",n),Color1:Object(s.get)(i.shape1,"color",n),WarpNoiseFunction0:Object(s.get)(i.warpShape0,"noiseFunction",0),WarpNoiseSpeed0:Object(s.get)(i.warpShape0,"noiseSpeed",0),WarpNoiseAmplitudeStart0:Object(s.get)(i.warpShape0,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd0:Object(s.get)(i.warpShape0,"noiseAmplitureEnd",n),WarpNoiseFrequency0:Object(s.get)(i.warpShape0,"noiseFrequency",n),WarpColor0:Object(s.get)(i.warpShape0,"color",n),WarpNoiseFunction1:Object(s.get)(i.warpShape1,"noiseFunction",0),WarpNoiseSpeed1:Object(s.get)(i.warpShape1,"noiseSpeed",0),WarpNoiseAmplitudeStart1:Object(s.get)(i.warpShape1,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd1:Object(s.get)(i.warpShape1,"noiseAmplitureEnd",n),WarpNoiseFrequency1:Object(s.get)(i.warpShape1,"noiseFrequency",n),WarpColor1:Object(s.get)(i.warpShape1,"color",n),ShapeAtlasSize:[Object(s.get)(i,"shapeAtlasHeight",0),Object(s.get)(i,"shapeAtlasCount",0),0,0],BoosterScale:Object(s.get)(i,"scale",[1,1,1,1])},textures:{ShapeMap:i.shapeAtlasResPath,GradientMap0:i.gradient0ResPath,GradientMap1:i.gradient1ResPath,NoiseMap:w}},glows:{useQuads:!0,effect:{effectFilePath:y,textures:{DiffuseMap:C,NoiseMap:j}}}})}(P,f,L),function(e,t){const r=Object(s.get)(t,"locatorTurrets",[]);for(let t=0;t<r.length;++t)e.locators.push(o.EveLocator2.from(r[t]))}(P,f);const O=function(e,t){for(var r=[],n=null,a=Object(s.get)(t,"animations",[]),o=0;o<a.length;++o)if(-1!==Object(s.get)(a[o],"id",-1)&&-1!==Object(s.get)(a[o],"startRate",-1)){n||(n=new i.Tw2CurveSet);var u=new i.Tw2ScalarCurve2;u.keys.push(new i.Tw2ScalarKey2),u.keys.push(new i.Tw2ScalarKey2),u.keys[0].value=Object(s.get)(a[o],"startRate",-1),u.keys[1].time=1,u.keys[1].value=Object(s.get)(a[o],"endRate",-1),u.Initialize(),n.curves.push(u),e.curveSets.push(n),r[Object(s.get)(a[o],"id",-1)]=u}return n&&n.Initialize(),[n,r]}(P,f);return D(P,f,O[0],O[1]),function(e,t,r,n,i,u){for(var c=Object(s.get)(t,"instancedMeshes",[]),l=0;l<c.length;++l){var h=c[l],d=new a.Tw2InstancedMesh;d.instanceGeometryResPath=h.instanceGeometryResPath,d.geometryResPath=h.geometryResPath,d.Initialize(),v(Object(s.get)(d,"opaqueAreas",[]),"opaqueAreas",t,r,n,u,i,h.shader);var f=new o.EveChildMesh;f.mesh=d,e.effectChildren.push(f)}}(P,f,m,L,d,x),P.Initialize(),P});return function(t){return e.apply(this,arguments)}}(),this.FetchHull=function(){var e=c(function*(e){return I("hull",e,a.ErrSOFHullNotFound)});return function(t){return e.apply(this,arguments)}}(),this.FetchHullNames=c(function*(){return M("hull")}),this.FetchHullPattern=function(){var e=c(function*(e,r){const n=yield t.FetchPattern(r),s=F(e,n);if(s)return s;throw new Error("Invalid pattern for hull (".concat(e,":").concat(r,")"))});return function(t,r){return e.apply(this,arguments)}}(),this.FetchHullPatternNames=function(){var e=c(function*(e){const t=yield O("pattern");let r=[];return t.forEach(t=>{for(let n=0;n<t.projections.length;n++)if(t.projections[n].name===e){r.push(t.name);break}}),r.sort(),r});return function(t){return e.apply(this,arguments)}}(),this.FetchHullBuildClass=function(){var e=c(function*(e){const r=e.split(":")[0];return 2===(yield t.FetchHull(r)).buildClass?2:1});return function(t){return e.apply(this,arguments)}}(),this.FetchRace=function(){var e=c(function*(e){return I("race",e,a.ErrSOFRaceNotFound)});return function(t){return e.apply(this,arguments)}}(),this.FetchRaceNames=c(function*(){return M("race")}),this.FetchFaction=function(){var e=c(function*(e){return I("faction",e,a.ErrSOFFactionNotFound)});return function(t){return e.apply(this,arguments)}}(),this.FetchFactionNames=c(function*(){return M("faction")}),this.FetchMaterial=function(){var e=c(function*(e){return I("material",e,a.ErrSOFMaterialNotFound)});return function(t){return e.apply(this,arguments)}}(),this.FetchMaterialNames=c(function*(){return M("material")}),this.FetchPattern=function(){var e=c(function*(e){return I("pattern",e,a.ErrSOFPatternNotFound)});return function(t){return e.apply(this,arguments)}}(),this.FetchPatternNames=c(function*(){return M("pattern")})}},"./sof/EveSOFData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFData",function(){return i});var n=r("./global/util/index.js"),s=r("./core/index.js");class i{constructor(){this.faction=[],this.generic=null,this.hull=[],this.material=[],this.pattern=[],this.race=[]}Initialize(){}GetHull(e){return Object(n.findElementByProperty)(this.hull,"name",e,s.ErrSOFHullNotFound)}GetHullNames(e){return i.GetNames(this.hull,e)}HasHull(e){return!!Object(n.findElementByProperty)(this.hull,"name",e)}GetHullBuildClass(e){return 2===this.GetHull(e).buildClass?2:1}GetHullPatternNames(e){this.GetHull(e);let t=[];for(let r=0;r<this.pattern.length;r++)this.pattern[r].HasProjection(e)&&t.push(this.pattern[r].name);return t.sort()}HasHullPattern(e,t){const r=this.GetHull(e);return!!this.HasPattern(t)&&this.GetPattern(t).HasProjection(r.name)}GetHullPattern(e,t){this.GetHull(e);return this.GetPattern(t).GetHullPattern(e)}GetFaction(e){return Object(n.findElementByProperty)(this.faction,"name",e,s.ErrSOFFactionNotFound)}GetFactionNames(e){return i.GetNames(this.faction,e)}HasFaction(e){return!!Object(n.findElementByProperty)(this.faction,"name",e)}GetRace(e){return Object(n.findElementByProperty)(this.race,"name",e,s.ErrSOFRaceNotFound)}GetRaceNames(e){return i.GetNames(this.race,e)}HasRace(e){return Object(n.findElementByProperty)(this.race,"name",e)}GetMaterial(e){return Object(n.findElementByProperty)(this.material,"name",e,s.ErrSOFMaterialNotFound)}GetMaterialNames(e){return i.GetNames(this.material,e)}HasMaterial(e){return!!Object(n.findElementByProperty)(this.material,"name",e)}GetPattern(e){return Object(n.findElementByProperty)(this.pattern,"name",e,s.ErrSOFPatternNotFound)}GetPatternNames(e){return i.GetNames(this.pattern,e)}HasPattern(e){return!!Object(n.findElementByProperty)(this.pattern,"name",e)}static GetNames(e,t={}){const r=!Object(n.isArray)(t);for(let n=0;n<e.length;n++)r?t[e[n].name]=e[n].description||"":t.push(r);return r||t.sort(),t}static black(e){return[["faction",e.array],["generic",e.object],["hull",e.array],["material",e.array],["pattern",e.array],["race",e.array]]}}},"./sof/faction/EveSOFDataFaction.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFaction",function(){return n});class n{constructor(){this.name="",this.areaTypes=null,this.children=[],this.colorSet=null,this.defaultPattern=null,this.defaultPatternLayer1MaterialName="",this.description="",this.logoSet=null,this.materialUsageMtl1=0,this.materialUsageMtl2=0,this.materialUsageMtl3=0,this.materialUsageMtl4=0,this.planeSets=[],this.resPathInsert="",this.spotlightSets=[],this.visibilityGroupSet=null}static black(e){return[["areas",e.array],["areaTypes",e.object],["colorSet",e.object],["children",e.array],["defaultPattern",e.object],["defaultPatternLayer1MaterialName",e.string],["description",e.string],["logoSet",e.object],["materialUsageMtl1",e.uint],["materialUsageMtl2",e.uint],["materialUsageMtl3",e.uint],["materialUsageMtl4",e.uint],["name",e.string],["planeSets",e.array],["resPathInsert",e.string],["spotlightSets",e.array],["spriteSets",e.array],["visibilityGroupSet",e.object]]}}},"./sof/faction/EveSOFDataFactionChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionChild",function(){return n});class n{constructor(){this.name="",this.groupIndex=-1,this.isVisible=!1}static black(e){return[["groupIndex",e.uint],["name",e.string],["isVisible",e.boolean]]}}},"./sof/faction/EveSOFDataFactionColorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionColorSet",function(){return s});var n=r("./global/index.js");class s{constructor(){this.Black=n.vec4.create(),this.Blue=n.vec4.create(),this.Booster=n.vec4.create(),this.Cyan=n.vec4.create(),this.Darkhull=n.vec4.create(),this.Fire=n.vec4.create(),this.Glass=n.vec4.create(),this.Green=n.vec4.create(),this.Hull=n.vec4.create(),this.Killmark=n.vec4.create(),this.Orange=n.vec4.create(),this.Primary=n.vec4.create(),this.PrimaryLight=n.vec4.create(),this.Reactor=n.vec4.create(),this.Red=n.vec4.create(),this.Secondary=n.vec4.create(),this.SecondaryLight=n.vec4.create(),this.Tertiary=n.vec4.create(),this.TertiaryLight=n.vec4.create(),this.White=n.vec4.create(),this.WhiteLight=n.vec4.create(),this.Yellow=n.vec4.create()}Get(e){return(e=e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())in this?this[e]:null}static black(e){return[["Black",e.vector4],["Blue",e.vector4],["Booster",e.vector4],["Cyan",e.vector4],["Darkhull",e.vector4],["Fire",e.vector4],["Glass",e.vector4],["Green",e.vector4],["Hull",e.vector4],["Killmark",e.vector4],["Orange",e.vector4],["Primary",e.vector4],["PrimaryLight",e.vector4],["Reactor",e.vector4],["Red",e.vector4],["Secondary",e.vector4],["SecondaryLight",e.vector4],["Tertiary",e.vector4],["TertiaryLight",e.vector4],["White",e.vector4],["WhiteLight",e.vector4],["Yellow",e.vector4]]}}},"./sof/faction/EveSOFDataFactionPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionPlaneSet",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.color=n.vec4.create(),this.groupIndex=-1}static black(e){return[["color",e.vector4],["groupIndex",e.uint],["name",e.string]]}}},"./sof/faction/EveSOFDataFactionSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionSpotlightSet",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.coneColor=n.vec4.create(),this.flareColor=n.vec4.create(),this.groupIndex=-1,this.spriteColor=n.vec4.create()}static black(e){return[["coneColor",e.vector4],["flareColor",e.vector4],["groupIndex",e.uint],["name",e.string],["spriteColor",e.vector4]]}}},"./sof/faction/EveSOFDataFactionVisibilityGroupSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return n});class n{constructor(){this.visibilityGroups=[]}static black(e){return[["visibilityGroups",e.array]]}}},"./sof/faction/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/faction/EveSOFDataFaction.js");r.d(t,"EveSOFDataFaction",function(){return n.EveSOFDataFaction});var s=r("./sof/faction/EveSOFDataFactionChild.js");r.d(t,"EveSOFDataFactionChild",function(){return s.EveSOFDataFactionChild});var i=r("./sof/faction/EveSOFDataFactionColorSet.js");r.d(t,"EveSOFDataFactionColorSet",function(){return i.EveSOFDataFactionColorSet});var a=r("./sof/faction/EveSOFDataFactionPlaneSet.js");r.d(t,"EveSOFDataFactionPlaneSet",function(){return a.EveSOFDataFactionPlaneSet});var o=r("./sof/faction/EveSOFDataFactionSpotlightSet.js");r.d(t,"EveSOFDataFactionSpotlightSet",function(){return o.EveSOFDataFactionSpotlightSet});var u=r("./sof/faction/EveSOFDataFactionVisibilityGroupSet.js");r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return u.EveSOFDataFactionVisibilityGroupSet})},"./sof/generic/EveSOFDataGeneric.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGeneric",function(){return i}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return a}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return o}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return u}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return c});var n=r("./core/index.js"),s=r("./global/util/index.js");class i{constructor(){this.areaShaderLocation="",this.areaShaders=[],this.bannerShader=null,this.damage=null,this.decalShaderLocation="",this.decalShaders=[],this.genericWreckMaterial=null,this.hullDamage=null,this.materialPrefixes=[],this.patternMaterialPrefixes=[],this.resPathDefaultAlliance="",this.resPathDefaultCeo="",this.resPathDefaultCorp="",this.shaderPrefixAnimated="",this.swarm=null,this.variants=[]}CreateEffect(e,t,r){const i={},a={},o={},u=this.GetShaderPath(e.shader||e.effectFilePath,t);function c(e,t){t&&(Object(s.isArray)(t)?t.forEach(t=>t.Assign(e)):Object(s.isPlain)(t)&&Object.assign(e,t))}return c(i,e.defaultParameters),c(a,e.defaultTextures),r&&(c(i,r.parameters),c(a,r.textures),c(o,r.overrides)),n.Tw2Effect.from({effectFilePath:u,parameters:i,textures:a,overrides:o})}GetShaderPrefix(e){return e?this.shaderPrefixAnimated:""}GetShaderPath(e,t){const r=this.GetShaderPrefix(t);"/"!==e.charAt(0)&&(e+="/");const n=e.lastIndexOf("/");return e.substring(0,n+1)+r+e.substring(n+1)}HasAreaShader(e){return!!Object(s.findElementByProperty)(this.areaShaders,"name",e)}GetAreaShader(e){return Object(s.findElementByProperty)(this.areaShaders,"name",e,a)}HasDecalShader(e){return!!Object(s.findElementByProperty)(this.decalShaders,"name",e)}GetDecalShader(e){return Object(s.findElementByProperty)(this.decalShaders,"name",e,o)}GetMaterialPrefixes(){const e=[];for(let t=0;t<this.materialPrefixes.length;t++)e.push(this.materialPrefixes[t].str);return e}GetPatternMaterialPrefixes(){const e=[];for(let t=0;t<this.patternMaterialPrefixes.length;t++)e.push(this.patternMaterialPrefixes[t].str);return e}GetMaterialPrefix(e){let t=e-1;if(void 0===this.materialPrefixes[t])throw new u({index:e});return this.materialPrefixes[t].str}GetPatternMaterialPrefix(e){let t=e-1;if(void 0===this.patternMaterialPrefixes[t])throw new c({index:e});return this.patternMaterialPrefixes[t].str}static black(e){return[["areaShaderLocation",e.path],["areaShaders",e.array],["bannerShader",e.rawObject],["decalShaderLocation",e.path],["decalShaders",e.array],["damage",e.object],["genericWreckMaterial",e.object],["hullAreas",e.array],["hullDamage",e.object],["materialPrefixes",e.array],["patternMaterialPrefixes",e.array],["resPathDefaultAlliance",e.path],["resPathDefaultCeo",e.path],["resPathDefaultCorp",e.path],["shaderPrefixAnimated",e.string],["swarm",e.object],["variants",e.array]]}}class a extends n.Tw2Error{constructor(e){super(e,"SOF Area shader not found: %name%")}}class o extends n.Tw2Error{constructor(e){super(e,"SOF Decal area shader not found: %name%")}}class u extends n.Tw2Error{constructor(e){super(e,"SOF Material prefix index not found: %index%")}}class c extends n.Tw2Error{constructor(e){super(e,"SOF Pattern material prefix index not found: %index%")}}},"./sof/generic/EveSOFDataGenericDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDamage",function(){return s});var n=r("./global/index.js");class s{constructor(){this.armorParticleAngle=0,this.armorParticleColor0=n.vec4.create(),this.armorParticleColor1=n.vec4.create(),this.armorParticleColor2=n.vec4.create(),this.armorParticleColor3=n.vec4.create(),this.armorParticleDrag=0,this.armorParticleMinMaxLifeTime=n.vec2.create(),this.armorParticleMinMaxSpeed=n.vec2.create(),this.armorParticleRate=0,this.armorParticleSizes=n.vec4.create(),this.armorParticleTextureIndex=0,this.armorParticleTurbulenceAmplitude=0,this.armorParticleTurbulenceFrequency=0,this.armorParticleVelocityStretchRotation=0,this.armorShader="",this.flickerPerlinAlpha=0,this.flickerPerlinBeta=0,this.flickerPerlinN=0,this.flickerPerlinSpeed=0,this.shieldGeometryResFilePath="",this.shieldShaderEllipsoid="",this.shieldShaderHull=""}static black(e){return[["armorParticleAngle",e.float],["armorParticleColor0",e.vector4],["armorParticleColor1",e.vector4],["armorParticleColor2",e.vector4],["armorParticleColor3",e.vector4],["armorParticleDrag",e.float],["armorParticleMinMaxLifeTime",e.vector2],["armorParticleMinMaxSpeed",e.vector2],["armorParticleRate",e.float],["armorParticleSizes",e.vector4],["armorParticleTurbulenceAmplitude",e.float],["armorParticleTurbulenceFrequency",e.float],["armorParticleVelocityStretchRotation",e.float],["armorParticleTextureIndex",e.uint],["armorShader",e.string],["flickerPerlinAlpha",e.float],["flickerPerlinBeta",e.float],["flickerPerlinSpeed",e.float],["flickerPerlinN",e.uint],["shieldGeometryResFilePath",e.path],["shieldShaderEllipsoid",e.string],["shieldShaderHull",e.string]]}}},"./sof/generic/EveSOFDataGenericDecalShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDecalShader",function(){return n});class n{constructor(){this.defaultTextures=[],this.parameters=[],this.parentTextures=[],this.shader=""}static black(e){return[["defaultTextures",e.array],["parameters",e.array],["parentTextures",e.array],["shader",e.string]]}}},"./sof/generic/EveSOFDataGenericHullDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericHullDamage",function(){return s});var n=r("./global/index.js");class s{constructor(){this.hullParticleAngle=0,this.hullParticleColor0=n.vec4.create(),this.hullParticleColor1=n.vec4.create(),this.hullParticleColor2=n.vec4.create(),this.hullParticleColorMidpoint=0,this.hullParticleDrag=0,this.hullParticleMinMaxLifeTime=n.vec2.create(),this.hullParticleMinMaxSpeed=n.vec2.create(),this.hullParticleRate=0,this.hullParticleSizes=n.vec4.create(),this.hullParticleTextureIndex=0,this.hullParticleTurbulenceAmplitude=0,this.hullParticleTurbulenceFrequency=0}static black(e){return[["hullParticleAngle",e.float],["hullParticleColor0",e.vector4],["hullParticleColor1",e.vector4],["hullParticleColor2",e.vector4],["hullParticleColorMidpoint",e.float],["hullParticleDrag",e.float],["hullParticleMinMaxLifeTime",e.vector2],["hullParticleMinMaxSpeed",e.vector2],["hullParticleRate",e.float],["hullParticleSizes",e.vector4],["hullParticleTurbulenceAmplitude",e.float],["hullParticleTurbulenceFrequency",e.float],["hullParticleTextureIndex",e.uint]]}}},"./sof/generic/EveSOFDataGenericShader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericShader",function(){return n});class n{constructor(){this.defaultParameters=[],this.defaultTextures=[],this.doGenerateDepthArea=!1,this.parameters=[],this.shader="",this.transparencyTextureName=""}static black(e){return[["defaultParameters",e.array],["defaultTextures",e.array],["doGenerateDepthArea",e.boolean],["parameters",e.array],["shader",e.path],["transparencyTextureName",e.string]]}}},"./sof/generic/EveSOFDataGenericString.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericString",function(){return n});class n{constructor(){this.str=""}static black(e){return[["str",e.string]]}}},"./sof/generic/EveSOFDataGenericSwarm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericSwarm",function(){return n});class n{constructor(){this.formationDistance=0,this.maxDeceleration=0,this.maxDistance0=0,this.separationDistance=0,this.wanderDistance=0,this.wanderFluctuation=0,this.wanderRadius=0,this.weightAlign=0,this.weightAnchor=0,this.weightCohesion=0,this.weightDeceleration=0,this.weightFormation=0,this.weightSeparation=0}static black(e){return[["formationDistance",e.float],["maxDistance0",e.float],["maxDeceleration",e.float],["separationDistance",e.float],["wanderDistance",e.float],["wanderFluctuation",e.float],["wanderRadius",e.float],["weightAlign",e.float],["weightAnchor",e.float],["weightCohesion",e.float],["weightDeceleration",e.float],["weightFormation",e.float],["weightSeparation",e.float]]}}},"./sof/generic/EveSOFDataGenericVariant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericVariant",function(){return n});class n{constructor(){this.name="",this.hullArea=null,this.isTransparent=!1}static black(e){return[["hullArea",e.object],["isTransparent",e.boolean],["name",e.string]]}}},"./sof/generic/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/generic/EveSOFDataGeneric.js");r.d(t,"EveSOFDataGeneric",function(){return n.EveSOFDataGeneric}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return n.ErrSOFAreaShaderNotFound}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return n.ErrSOFDecalShaderNotFound}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return n.ErrSOFMaterialPrefixNotFound}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return n.ErrSOFPatternMaterialPrefixNotFound});var s=r("./sof/generic/EveSOFDataGenericDamage.js");r.d(t,"EveSOFDataGenericDamage",function(){return s.EveSOFDataGenericDamage});var i=r("./sof/generic/EveSOFDataGenericDecalShader.js");r.d(t,"EveSOFDataGenericDecalShader",function(){return i.EveSOFDataGenericDecalShader});var a=r("./sof/generic/EveSOFDataGenericHullDamage.js");r.d(t,"EveSOFDataGenericHullDamage",function(){return a.EveSOFDataGenericHullDamage});var o=r("./sof/generic/EveSOFDataGenericShader.js");r.d(t,"EveSOFDataGenericShader",function(){return o.EveSOFDataGenericShader});var u=r("./sof/generic/EveSOFDataGenericString.js");r.d(t,"EveSOFDataGenericString",function(){return u.EveSOFDataGenericString});var c=r("./sof/generic/EveSOFDataGenericSwarm.js");r.d(t,"EveSOFDataGenericSwarm",function(){return c.EveSOFDataGenericSwarm});var l=r("./sof/generic/EveSOFDataGenericVariant.js");r.d(t,"EveSOFDataGenericVariant",function(){return l.EveSOFDataGenericVariant})},"./sof/hull/EveSOFDataHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHull",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.additiveAreas=[],this.animations=[],this.audioPosition=n.vec3.create(),this.banners=[],this.booster=null,this.boundingSphere=n.vec4.create(),this.buildClass=0,this.castShadow=!1,this.category="",this.children=[],this.controllers=[],this.decalAreas=[],this.decalSets=[],this.defaultPattern=null,this.description="",this.distortionAreas=[],this.enableDynamicBoundingSphere=!1,this.geometryResFilePath="",this.hazeSets=[],this.hullDecals=[],this.impactEffectType=0,this.instancedMeshes=[],this.isSkinned=!1,this.lightSets=[],this.locatorSets=[],this.locatorTurrets=[],this.modelRotationCurvePath="",this.opaqueAreas=[],this.planeSets=[],this.shapeEllipsoidCenter=n.vec3.create(),this.shapeEllipsoidRadius=n.vec3.create(),this.soundEmitters=[],this.spotlightSets=[],this.spriteLineSets=[],this.spriteSets=[],this.transparentAreas=[]}static black(e){return[["additiveAreas",e.array],["animations",e.array],["audioPosition",e.vector3],["banners",e.array],["booster",e.object],["boundingSphere",e.vector4],["buildClass",e.uint],["castShadow",e.boolean],["category",e.string],["children",e.array],["controllers",e.array],["decalAreas",e.array],["decalSets",e.array],["defaultPattern",e.object],["depthAreas",e.array],["description",e.string],["distortionAreas",e.array],["enableDynamicBoundingSphere",e.boolean],["geometryResFilePath",e.path],["hazeSets",e.array],["hullDecals",e.array],["impactEffectType",e.uint],["instancedMeshes",e.array],["isSkinned",e.boolean],["lightSets",e.array],["locatorSets",e.array],["locatorTurrets",e.array],["name",e.string],["opaqueAreas",e.array],["planeSets",e.array],["modelRotationCurvePath",e.string],["shapeEllipsoidCenter",e.vector3],["shapeEllipsoidRadius",e.vector3],["soundEmitters",e.array],["spotlightSets",e.array],["spriteLineSets",e.array],["spriteSets",e.array],["transparentAreas",e.array]]}}},"./sof/hull/EveSOFDataHullAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullAnimation",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.endRate=0,this.endRotationTime=0,this.endRotationValue=n.quat.create(),this.id=0,this.startRate=0,this.startRotationTime=0,this.startRotationValue=n.quat.create()}static black(e){return[["endRate",e.float],["endRotationTime",e.float],["endRotationValue",e.vector4],["id",e.uint],["name",e.string],["startRate",e.float],["startRotationTime",e.float],["startRotationValue",e.vector4]]}}},"./sof/hull/EveSOFDataHullArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullArea",function(){return n});class n{constructor(){this.name="",this.areaType=0,this.blockedMaterials=0,this.count=0,this.index=0,this.parameters=[],this.shader="",this.textures=[]}static black(e){return[["areaType",e.uint],["blockedMaterials",e.uint],["count",e.uint],["index",e.uint],["name",e.string],["parameters",e.array],["shader",e.string],["textures",e.array]]}}},"./sof/hull/EveSOFDataHullBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBanner",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.angleX=0,this.angleY=0,this.boneIndex=-1,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.usage=0}static black(e){return[["angleX",e.float],["angleY",e.float],["angleZ",e.float],["boneIndex",e.uint],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["usage",e.uint]]}}},"./sof/hull/EveSOFDataHullBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBooster",function(){return n});class n{constructor(){this.alwaysOn=!1,this.hasTrails=!1,this.items=[]}static black(e){return[["alwaysOn",e.boolean],["hasTrails",e.boolean],["items",e.array]]}}},"./sof/hull/EveSOFDataHullBoosterItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBoosterItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.atlasIndex0=0,this.atlasIndex1=0,this.functionality=n.vec4.create(),this.hasTrail=!1,this.transform=n.mat4.create()}static black(e){return[["atlasIndex0",e.uint],["atlasIndex1",e.uint],["functionality",e.vector4],["hasTrail",e.boolean],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullChild",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.groupIndex=-1,this.id=0,this.lowestLodVisible=0,this.redFilePath="",this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.translation=n.vec3.create()}static black(e){return[["groupIndex",e.uint],["id",e.uint],["lowestLodVisible",e.uint],["name",e.string],["redFilePath",e.path],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}},"./sof/hull/EveSOFDataHullController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullController",function(){return n});class n{constructor(){this.path=""}static black(e){return[["path",e.path]]}}},"./sof/hull/EveSOFDataHullDecalSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSet",function(){return n});class n{constructor(){this.name="",this.items=[],this.visibilityGroup=""}static black(e){return[["name",e.string],["items",e.array],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullDecalSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.boneIndex=-1,this.indexBuffer=[],this.glowColorType=0,this.logoType=0,this.meshIndex=0,this.parameters=[],this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.textures=[],this.usage=0,this.visibilityGroup=""}static black(e){return[["name",e.string],["boneIndex",e.uint],["indexBuffer",e.indexBuffer],["glowColorType",e.uint],["logoType",e.uint],["meshIndex",e.uint],["parameters",e.array],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["textures",e.array],["usage",e.uint],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSet",function(){return n});class n{constructor(){this.name="",this.items=[],this.visibilityGroup=0}static black(e){return[["items",e.array],["name",e.string],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullHazeSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.boosterGainInfluence=!1,this.colorType=0,this.hazeBrightness=0,this.hazeFalloff=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.sourceBrightness=0,this.sourceSize=0}static black(e){return[["boosterGainInfluence",e.boolean],["colorType",e.uint],["hazeBrightness",e.float],["hazeFalloff",e.float],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["sourceBrightness",e.float],["sourceSize",e.float]]}}},"./sof/hull/EveSOFDataHullLightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSet",function(){return n});class n{constructor(){this.name="",this.items=[],this.visibilityGroup=""}static black(e){return[["name",e.string],["items",e.array],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullLightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.brightness=0,this.innerRadius=0,this.lightColor=n.vec4.create(),this.noiseAmplitude=0,this.noiseFrequency=0,this.position=n.vec3.create(),this.radius=0}static black(e){return[["name",e.string],["brightness",e.float],["innerRadius",e.float],["lightColor",e.vector4],["noiseAmplitude",e.float],["noiseFrequency",e.float],["position",e.vector3],["radius",e.float]]}}},"./sof/hull/EveSOFDataHullLightSetSpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.brightness=0,this.innerAngle=0,this.innerRadius=0,this.lightColor=n.vec4.create(),this.outerAngle=0,this.position=n.vec3.create(),this.radius=0,this.rotation=n.quat.create()}static black(e){return[["name",e.string],["brightness",e.float],["innerAngle",e.float],["innerRadius",e.float],["lightColor",e.color],["outerAngle",e.float],["position",e.vector3],["radius",e.uint],["rotation",e.vector4]]}}},"./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.brightness=0,this.innerRadius=0,this.position=n.vec3.create(),this.radius=0,this.texturePath=""}static black(e){return[["name",e.string],["brightness",e.float],["innerRadius",e.float],["position",e.vector3],["radius",e.float],["texturePath",e.path]]}}},"./sof/hull/EveSOFDataHullLocator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocator",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.transform=n.mat4.create()}static black(e){return[["name",e.string],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullLocatorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocatorSet",function(){return n});class n{constructor(){this.name="",this.locators=[]}static black(e){return[["name",e.string],["locators",e.array]]}}},"./sof/hull/EveSOFDataHullPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSet",function(){return n});class n{constructor(){this.name="",this.atlasSize=0,this.items=[],this.layer1MapResPath="",this.layer2MapResPath="",this.maskMapResPath="",this.skinned=!1,this.usage=0}static black(e){return[["atlasSize",e.uint],["items",e.array],["layer1MapResPath",e.path],["layer2MapResPath",e.path],["maskMapResPath",e.path],["name",e.string],["planeData",e.vector4],["skinned",e.boolean],["usage",e.uint]]}}},"./sof/hull/EveSOFDataHullPlaneSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.boneIndex=-1,this.color=n.vec4.create(),this.groupIndex=-1,this.layer1Scroll=n.vec4.create(),this.layer1Transform=n.vec4.create(),this.layer2Scroll=n.vec4.create(),this.layer2Transform=n.vec4.create(),this.maskMapAtlasIndex=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1)}static black(e){return[["boneIndex",e.uint],["color",e.vector4],["groupIndex",e.uint],["layer1Scroll",e.vector4],["layer1Transform",e.vector4],["layer2Scroll",e.vector4],["layer2Transform",e.vector4],["maskMapAtlasIndex",e.uint],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/hull/EveSOFDataHullSoundEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSoundEmitter",function(){return n});class n{constructor(){this.name="",this.prefix=""}static black(e){return[["name",e.string],["prefix",e.string]]}}},"./sof/hull/EveSOFDataHullSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSet",function(){return n});class n{constructor(){this.name="",this.coneTextureResPath="",this.glowTextureResPath="",this.items=[],this.skinned=!1,this.zOffset=0}static black(e){return[["coneTextureResPath",e.path],["glowTextureResPath",e.path],["items",e.array],["name",e.string],["skinned",e.boolean],["zOffset",e.float]]}}},"./sof/hull/EveSOFDataHullSpotlightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.boneIndex=-1,this.boosterGainInfluence=!1,this.coneIntensity=0,this.flareIntensity=0,this.groupIndex=-1,this.spriteIntensity=0,this.spriteScale=n.vec3.fromValues(1,1,1),this.transform=n.mat4.create()}static black(e){return[["boneIndex",e.uint],["boosterGainInfluence",e.boolean],["coneIntensity",e.float],["flareIntensity",e.float],["groupIndex",e.uint],["spriteScale",e.vector3],["spriteIntensity",e.float],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSet",function(){return n});class n{constructor(){this.name="",this.items=[],this.skinned=!1,this.visibilityGroup=""}static black(e){return[["items",e.array],["name",e.string],["skinned",e.boolean],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullSpriteLineSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.blinkPhase=0,this.blinkPhaseShift=0,this.blinkRate=0,this.boneIndex=-1,this.colorType=0,this.falloff=0,this.intensity=0,this.isCircle=!1,this.maxScale=0,this.minScale=0,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1),this.spacing=0}static black(e){return[["blinkRate",e.float],["blinkPhase",e.float],["blinkPhaseShift",e.float],["boneIndex",e.uint],["colorType",e.uint],["falloff",e.float],["groupIndex",e.uint],["intensity",e.float],["isCircle",e.boolean],["maxScale",e.float],["minScale",e.float],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["spacing",e.float]]}}},"./sof/hull/EveSOFDataHullSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSet",function(){return n});class n{constructor(){this.name="",this.items=[],this.skinned=!1,this.visibilityGroup=""}static black(e){return[["name",e.string],["items",e.array],["skinned",e.boolean],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullSpriteSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSetItem",function(){return s});var n=r("./global/index.js");class s{constructor(){this.blinkPhase=0,this.blinkRate=0,this.boneIndex=-1,this.colorType=0,this.falloff=0,this.intensity=0,this.maxScale=0,this.minScale=0,this.position=n.vec3.create()}static black(e){return[["blinkRate",e.float],["blinkPhase",e.float],["boneIndex",e.uint],["colorType",e.uint],["falloff",e.float],["groupIndex",e.uint],["intensity",e.float],["maxScale",e.float],["minScale",e.float],["position",e.vector3]]}}},"./sof/hull/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/hull/EveSOFDataHull.js");r.d(t,"EveSOFDataHull",function(){return n.EveSOFDataHull});var s=r("./sof/hull/EveSOFDataHullAnimation.js");r.d(t,"EveSOFDataHullAnimation",function(){return s.EveSOFDataHullAnimation});var i=r("./sof/hull/EveSOFDataHullArea.js");r.d(t,"EveSOFDataHullArea",function(){return i.EveSOFDataHullArea});var a=r("./sof/hull/EveSOFDataHullBanner.js");r.d(t,"EveSOFDataHullBanner",function(){return a.EveSOFDataHullBanner});var o=r("./sof/hull/EveSOFDataHullBooster.js");r.d(t,"EveSOFDataHullBooster",function(){return o.EveSOFDataHullBooster});var u=r("./sof/hull/EveSOFDataHullBoosterItem.js");r.d(t,"EveSOFDataHullBoosterItem",function(){return u.EveSOFDataHullBoosterItem});var c=r("./sof/hull/EveSOFDataHullChild.js");r.d(t,"EveSOFDataHullChild",function(){return c.EveSOFDataHullChild});var l=r("./sof/hull/EveSOFDataHullController.js");r.d(t,"EveSOFDataHullController",function(){return l.EveSOFDataHullController});var h=r("./sof/hull/EveSOFDataHullDecalSet.js");r.d(t,"EveSOFDataHullDecalSet",function(){return h.EveSOFDataHullDecalSet});var d=r("./sof/hull/EveSOFDataHullDecalSetItem.js");r.d(t,"EveSOFDataHullDecalSetItem",function(){return d.EveSOFDataHullDecalSetItem});var f=r("./sof/hull/EveSOFDataHullHazeSet.js");r.d(t,"EveSOFDataHullHazeSet",function(){return f.EveSOFDataHullHazeSet});var m=r("./sof/hull/EveSOFDataHullHazeSetItem.js");r.d(t,"EveSOFDataHullHazeSetItem",function(){return m.EveSOFDataHullHazeSetItem});var p=r("./sof/hull/EveSOFDataHullLightSet.js");r.d(t,"EveSOFDataHullLightSet",function(){return p.EveSOFDataHullLightSet});var v=r("./sof/hull/EveSOFDataHullLightSetItem.js");r.d(t,"EveSOFDataHullLightSetItem",function(){return v.EveSOFDataHullLightSetItem});var _=r("./sof/hull/EveSOFDataHullLightSetSpotLight.js");r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return _.EveSOFDataHullLightSetSpotLight});var E=r("./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js");r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return E.EveSOFDataHullLightSetTexturedPointLight});var S=r("./sof/hull/EveSOFDataHullLocator.js");r.d(t,"EveSOFDataHullLocator",function(){return S.EveSOFDataHullLocator});var T=r("./sof/hull/EveSOFDataHullLocatorSet.js");r.d(t,"EveSOFDataHullLocatorSet",function(){return T.EveSOFDataHullLocatorSet});var g=r("./sof/hull/EveSOFDataHullPlaneSet.js");r.d(t,"EveSOFDataHullPlaneSet",function(){return g.EveSOFDataHullPlaneSet});var R=r("./sof/hull/EveSOFDataHullPlaneSetItem.js");r.d(t,"EveSOFDataHullPlaneSetItem",function(){return R.EveSOFDataHullPlaneSetItem});var b=r("./sof/hull/EveSOFDataHullSoundEmitter.js");r.d(t,"EveSOFDataHullSoundEmitter",function(){return b.EveSOFDataHullSoundEmitter});var A=r("./sof/hull/EveSOFDataHullSpotlightSet.js");r.d(t,"EveSOFDataHullSpotlightSet",function(){return A.EveSOFDataHullSpotlightSet});var y=r("./sof/hull/EveSOFDataHullSpotlightSetItem.js");r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return y.EveSOFDataHullSpotlightSetItem});var j=r("./sof/hull/EveSOFDataHullSpriteLineSet.js");r.d(t,"EveSOFDataHullSpriteLineSet",function(){return j.EveSOFDataHullSpriteLineSet});var w=r("./sof/hull/EveSOFDataHullSpriteLineSetItem.js");r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return w.EveSOFDataHullSpriteLineSetItem});var C=r("./sof/hull/EveSOFDataHullSpriteSet.js");r.d(t,"EveSOFDataHullSpriteSet",function(){return C.EveSOFDataHullSpriteSet});var D=r("./sof/hull/EveSOFDataHullSpriteSetItem.js");r.d(t,"EveSOFDataHullSpriteSetItem",function(){return D.EveSOFDataHullSpriteSetItem})},"./sof/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/faction/index.js");r.d(t,"EveSOFDataFaction",function(){return n.EveSOFDataFaction}),r.d(t,"EveSOFDataFactionChild",function(){return n.EveSOFDataFactionChild}),r.d(t,"EveSOFDataFactionColorSet",function(){return n.EveSOFDataFactionColorSet}),r.d(t,"EveSOFDataFactionPlaneSet",function(){return n.EveSOFDataFactionPlaneSet}),r.d(t,"EveSOFDataFactionSpotlightSet",function(){return n.EveSOFDataFactionSpotlightSet}),r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return n.EveSOFDataFactionVisibilityGroupSet});var s=r("./sof/generic/index.js");r.d(t,"EveSOFDataGeneric",function(){return s.EveSOFDataGeneric}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return s.ErrSOFAreaShaderNotFound}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return s.ErrSOFDecalShaderNotFound}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return s.ErrSOFMaterialPrefixNotFound}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return s.ErrSOFPatternMaterialPrefixNotFound}),r.d(t,"EveSOFDataGenericDamage",function(){return s.EveSOFDataGenericDamage}),r.d(t,"EveSOFDataGenericDecalShader",function(){return s.EveSOFDataGenericDecalShader}),r.d(t,"EveSOFDataGenericHullDamage",function(){return s.EveSOFDataGenericHullDamage}),r.d(t,"EveSOFDataGenericShader",function(){return s.EveSOFDataGenericShader}),r.d(t,"EveSOFDataGenericString",function(){return s.EveSOFDataGenericString}),r.d(t,"EveSOFDataGenericSwarm",function(){return s.EveSOFDataGenericSwarm}),r.d(t,"EveSOFDataGenericVariant",function(){return s.EveSOFDataGenericVariant});var i=r("./sof/hull/index.js");r.d(t,"EveSOFDataHull",function(){return i.EveSOFDataHull}),r.d(t,"EveSOFDataHullAnimation",function(){return i.EveSOFDataHullAnimation}),r.d(t,"EveSOFDataHullArea",function(){return i.EveSOFDataHullArea}),r.d(t,"EveSOFDataHullBanner",function(){return i.EveSOFDataHullBanner}),r.d(t,"EveSOFDataHullBooster",function(){return i.EveSOFDataHullBooster}),r.d(t,"EveSOFDataHullBoosterItem",function(){return i.EveSOFDataHullBoosterItem}),r.d(t,"EveSOFDataHullChild",function(){return i.EveSOFDataHullChild}),r.d(t,"EveSOFDataHullController",function(){return i.EveSOFDataHullController}),r.d(t,"EveSOFDataHullDecalSet",function(){return i.EveSOFDataHullDecalSet}),r.d(t,"EveSOFDataHullDecalSetItem",function(){return i.EveSOFDataHullDecalSetItem}),r.d(t,"EveSOFDataHullHazeSet",function(){return i.EveSOFDataHullHazeSet}),r.d(t,"EveSOFDataHullHazeSetItem",function(){return i.EveSOFDataHullHazeSetItem}),r.d(t,"EveSOFDataHullLightSet",function(){return i.EveSOFDataHullLightSet}),r.d(t,"EveSOFDataHullLightSetItem",function(){return i.EveSOFDataHullLightSetItem}),r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return i.EveSOFDataHullLightSetSpotLight}),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return i.EveSOFDataHullLightSetTexturedPointLight}),r.d(t,"EveSOFDataHullLocator",function(){return i.EveSOFDataHullLocator}),r.d(t,"EveSOFDataHullLocatorSet",function(){return i.EveSOFDataHullLocatorSet}),r.d(t,"EveSOFDataHullPlaneSet",function(){return i.EveSOFDataHullPlaneSet}),r.d(t,"EveSOFDataHullPlaneSetItem",function(){return i.EveSOFDataHullPlaneSetItem}),r.d(t,"EveSOFDataHullSoundEmitter",function(){return i.EveSOFDataHullSoundEmitter}),r.d(t,"EveSOFDataHullSpotlightSet",function(){return i.EveSOFDataHullSpotlightSet}),r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return i.EveSOFDataHullSpotlightSetItem}),r.d(t,"EveSOFDataHullSpriteLineSet",function(){return i.EveSOFDataHullSpriteLineSet}),r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return i.EveSOFDataHullSpriteLineSetItem}),r.d(t,"EveSOFDataHullSpriteSet",function(){return i.EveSOFDataHullSpriteSet}),r.d(t,"EveSOFDataHullSpriteSetItem",function(){return i.EveSOFDataHullSpriteSetItem});var a=r("./sof/pattern/index.js");r.d(t,"EveSOFDataPattern",function(){return a.EveSOFDataPattern}),r.d(t,"ErrSOFProjectionNotFound",function(){return a.ErrSOFProjectionNotFound}),r.d(t,"EveSOFDataPatternLayer",function(){return a.EveSOFDataPatternLayer}),r.d(t,"EveSOFDataPatternPerHull",function(){return a.EveSOFDataPatternPerHull}),r.d(t,"EveSOFDataPatternTransform",function(){return a.EveSOFDataPatternTransform});var o=r("./sof/race/index.js");r.d(t,"EveSOFDataRace",function(){return o.EveSOFDataRace}),r.d(t,"EveSOFDataRaceDamage",function(){return o.EveSOFDataRaceDamage});var u=r("./sof/shared/index.js");r.d(t,"EveSOFDataArea",function(){return u.EveSOFDataArea}),r.d(t,"EveSOFDataAreaMaterial",function(){return u.EveSOFDataAreaMaterial}),r.d(t,"EveSOFDataBooster",function(){return u.EveSOFDataBooster}),r.d(t,"EveSOFDataBoosterShape",function(){return u.EveSOFDataBoosterShape}),r.d(t,"EveSOFDataInstancedMesh",function(){return u.EveSOFDataInstancedMesh}),r.d(t,"EveSOFDataLogo",function(){return u.EveSOFDataLogo}),r.d(t,"EveSOFDataLogoSet",function(){return u.EveSOFDataLogoSet}),r.d(t,"EveSOFDataMaterial",function(){return u.EveSOFDataMaterial}),r.d(t,"EveSOFDataParameter",function(){return u.EveSOFDataParameter}),r.d(t,"EveSOFDataTexture",function(){return u.EveSOFDataTexture}),r.d(t,"EveSOFDataTransform",function(){return u.EveSOFDataTransform});var c=r("./sof/EveSOFData.js");r.d(t,"EveSOFData",function(){return c.EveSOFData});var l=r("./sof/EveSOF.js");r.d(t,"EveSOF",function(){return l.EveSOF})},"./sof/pattern/EveSOFDataPattern.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPattern",function(){return i}),r.d(t,"ErrSOFProjectionNotFound",function(){return a});var n=r("./global/util/index.js"),s=r("./core/index.js");class i{constructor(){this.name="",this.layer1=null,this.layer2=null,this.projections=[]}GetHullPattern(e){const t=this.GetProjection(e);return{name:this.name,layer1:this.layer1,layer2:this.layer2,transformLayer1:t.transformLayer1,transformLayer2:t.transformLayer2}}HasProjection(e){return!!Object(n.findElementByProperty)(this.projections,"name",e)}GetProjection(e){for(let t=0;t<this.projections.length;t++)if(this.projections[t].name===e)return this.projections[t];throw new a({pattern:this.name,projection:e})}static black(e){return[["name",e.string],["layer1",e.object],["layer2",e.object],["projections",e.array]]}}class a extends s.Tw2Error{constructor(e){super(e,"SOF Pattern projection '%projection%' not found for pattern '%pattern%'")}}},"./sof/pattern/EveSOFDataPatternLayer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternLayer",function(){return n});class n{constructor(){this.isTargetMtl1=!0,this.isTargetMtl2=!0,this.isTargetMtl3=!0,this.isTargetMtl4=!0,this.materialSource=0,this.projectionTypeU=0,this.projectionTypeV=0,this.textureName="",this.textureResFilePath=""}static ToAddress(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}static FromProjection(e){switch(e){case 4:return 2;case 3:return 1;default:return 0}}static black(e){return[["isTargetMtl1",e.boolean],["isTargetMtl2",e.boolean],["isTargetMtl3",e.boolean],["isTargetMtl4",e.boolean],["materialSource",e.uint],["projectionTypeU",e.uint],["projectionTypeV",e.uint],["textureName",e.string],["textureResFilePath",e.path]]}}},"./sof/pattern/EveSOFDataPatternPerHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternPerHull",function(){return n});class n{constructor(){this.name="",this.transformLayer1=null,this.transformLayer2=null}AssignTransforms(e=[]){return this.transformLayer1&&(e[0]=this.transformLayer1.Reduce()),this.transformLayer2&&(e[1]=this.transformLayer2.Reduce()),e}static black(e){return[["name",e.string],["transformLayer1",e.object],["transformLayer2",e.object]]}}},"./sof/pattern/EveSOFDataPatternTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternTransform",function(){return s});var n=r("./global/index.js");class s{constructor(){this.isMirrored=!1,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1)}static black(e){return[["isMirrored",e.boolean],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/pattern/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/pattern/EveSOFDataPattern.js");r.d(t,"EveSOFDataPattern",function(){return n.EveSOFDataPattern}),r.d(t,"ErrSOFProjectionNotFound",function(){return n.ErrSOFProjectionNotFound});var s=r("./sof/pattern/EveSOFDataPatternLayer.js");r.d(t,"EveSOFDataPatternLayer",function(){return s.EveSOFDataPatternLayer});var i=r("./sof/pattern/EveSOFDataPatternPerHull.js");r.d(t,"EveSOFDataPatternPerHull",function(){return i.EveSOFDataPatternPerHull});var a=r("./sof/pattern/EveSOFDataPatternTransform.js");r.d(t,"EveSOFDataPatternTransform",function(){return a.EveSOFDataPatternTransform})},"./sof/race/EveSOFDataRace.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRace",function(){return n});class n{constructor(){this.name="",this.booster=null,this.damage=null}static black(e){return[["booster",e.object],["damage",e.object],["name",e.string]]}}},"./sof/race/EveSOFDataRaceDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataRaceDamage",function(){return n});class n{constructor(){this.armorImpactParameters=[],this.armorImpactTextures=[],this.shieldImpactParameters=[],this.shieldImpactTextures=[]}static black(e){return[["armorImpactParameters",e.array],["armorImpactTextures",e.array],["shieldImpactParameters",e.array],["shieldImpactTextures",e.array]]}}},"./sof/race/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/race/EveSOFDataRace.js");r.d(t,"EveSOFDataRace",function(){return n.EveSOFDataRace});var s=r("./sof/race/EveSOFDataRaceDamage.js");r.d(t,"EveSOFDataRaceDamage",function(){return s.EveSOFDataRaceDamage})},"./sof/shared/EveSOFDataArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataArea",function(){return n});class n{constructor(){this.Black=null,this.Blue=null,this.Booster=null,this.Cyan=null,this.Darkhull=null,this.Fire=null,this.Glass=null,this.Green=null,this.Hull=null,this.Killmark=null,this.Monument=null,this.Orange=null,this.Primary=null,this.Reactor=null,this.Red=null,this.Rock=null,this.Sails=null,this.Secondary=null,this.Tertiary=null,this.White=null,this.Yellow=null}Get(e){return 0===e.indexOf("area_")&&(e=e.substring(5)),(e=e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())in this?this[e]:null}static black(e){return[["Black",e.object],["Blue",e.object],["Booster",e.object],["Cyan",e.object],["Darkhull",e.object],["Fire",e.object],["Glass",e.object],["Green",e.object],["Hull",e.object],["Killmark",e.object],["Monument",e.object],["Orange",e.object],["Primary",e.object],["Reactor",e.object],["Red",e.object],["Rock",e.object],["Sails",e.object],["Secondary",e.object],["Tertiary",e.object],["White",e.object],["Yellow",e.object]]}}},"./sof/shared/EveSOFDataAreaMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataAreaMaterial",function(){return n});class n{constructor(){this.colorType=0,this.material1="",this.material2="",this.material3="",this.material4=""}static black(e){return[["colorType",e.uint],["material1",e.string],["material2",e.string],["material3",e.string],["material4",e.string]]}}},"./sof/shared/EveSOFDataBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBooster",function(){return s});var n=r("./global/index.js");class s{constructor(){this.glowColor=n.vec4.create(),this.glowScale=0,this.gradient0ResPath="",this.gradient1ResPath="",this.haloColor=n.vec4.create(),this.haloScaleX=0,this.haloScaleY=0,this.lightColor=n.vec4.create(),this.lightFlickerAmplitude=0,this.lightFlickerFrequency=0,this.lightRadius=0,this.lightWarpColor=n.vec4.create(),this.lightWarpRadius=0,this.shape0=null,this.shape1=null,this.shapeAtlasCount=0,this.shapeAtlasHeight=0,this.shapeAtlasResPath="",this.symHaloScale=0,this.trailColor=n.vec4.create(),this.trailSize=n.vec4.create(),this.warpGlowColor=n.vec4.create(),this.warpHaloColor=n.vec4.create(),this.warpShape0=null,this.warpShape1=null}get warpHalpColor(){return this.warpHaloColor}set warpHalpColor(e){this.warpHaloColor=e}static black(e){return[["glowColor",e.vector4],["glowScale",e.float],["gradient0ResPath",e.path],["gradient1ResPath",e.path],["haloColor",e.vector4],["haloScaleX",e.float],["haloScaleY",e.float],["lightFlickerAmplitude",e.float],["lightFlickerColor",e.vector4],["lightFlickerFrequency",e.float],["lightFlickerRadius",e.float],["lightColor",e.vector4],["lightRadius",e.float],["lightWarpColor",e.vector4],["lightWarpRadius",e.float],["shape0",e.object],["shape1",e.object],["shapeAtlasCount",e.uint],["shapeAtlasHeight",e.uint],["shapeAtlasResPath",e.path],["shapeAtlasWidth",e.uint],["symHaloScale",e.float],["trailColor",e.vector4],["trailSize",e.vector4],["volumetric",e.boolean],["warpGlowColor",e.vector4],["warpHalpColor",e.vector4],["warpShape0",e.object],["warpShape1",e.object]]}}},"./sof/shared/EveSOFDataBoosterShape.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBoosterShape",function(){return s});var n=r("./global/index.js");class s{constructor(){this.color=n.vec4.create(),this.noiseAmplitureEnd=n.vec4.create(),this.noiseAmplitureStart=n.vec4.create(),this.noiseFrequency=n.vec4.create(),this.noiseFunction=0,this.noiseSpeed=0}static black(e){return[["color",e.vector4],["noiseFunction",e.float],["noiseSpeed",e.float],["noiseAmplitureStart",e.vector4],["noiseAmplitureEnd",e.vector4],["noiseFrequency",e.vector4]]}}},"./sof/shared/EveSOFDataInstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataInstancedMesh",function(){return s});class n{constructor(e){this.data=e}static blackStruct(e){let t=[e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32()];return new n(t)}}class s{constructor(){this.name="",this.geometryResPath="",this.instances=[],this.lowestLodVisible=0,this.shader="",this.textures=[]}static black(e){return[["geometryResPath",e.path],["instances",e.structList(n)],["lowestLodVisible",e.uint],["name",e.string],["shader",e.string],["textures",e.array]]}}},"./sof/shared/EveSOFDataLogo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogo",function(){return n});class n{constructor(){this.textures=[]}static black(e){return[["textures",e.array]]}}},"./sof/shared/EveSOFDataLogoSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogoSet",function(){return n});class n{constructor(){this.Marking_01=null,this.Marking_02=null,this.Primary=null,this.Secondary=null,this.Tertiary=null}static black(e){return[["Marking_01",e.object],["Marking_02",e.object],["Primary",e.object],["Secondary",e.object],["Tertiary",e.object]]}}},"./sof/shared/EveSOFDataMaterial.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataMaterial",function(){return n});class n{constructor(){this.name="",this.parameters=[]}Assign(e={},t){return e.name=this.name,e.parameters=this.AssignParameters(e.parameters,t),e}AssignParameters(e={},t){return this.parameters.forEach(r=>r.Assign(e,t)),e}static black(e){return[["name",e.string],["parameters",e.array]]}}},"./sof/shared/EveSOFDataParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataParameter",function(){return s});var n=r("./global/index.js");class s{constructor(){this.name="",this.value=n.vec4.create()}Assign(e={},t){return e[t?t+this.name:this.name]=Array.from(this.value),e}static black(e){return[["name",e.string],["value",e.vector4]]}}},"./sof/shared/EveSOFDataTexture.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTexture",function(){return n});class n{constructor(){this.name="",this.resFilePath=""}Assign(e={}){return e[this.name]=this.resFilePath,e}static black(e){return[["name",e.string],["resFilePath",e.path]]}}},"./sof/shared/EveSOFDataTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTransform",function(){return s});var n=r("./global/index.js");class s{constructor(){this.boneIndex=-1,this.position=n.vec3.create(),this.rotation=n.quat.create(),this.scaling=n.vec3.fromValues(1,1,1)}static black(e){return[["boneIndex",e.uint],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/shared/EveSOFDataArea.js");r.d(t,"EveSOFDataArea",function(){return n.EveSOFDataArea});var s=r("./sof/shared/EveSOFDataAreaMaterial.js");r.d(t,"EveSOFDataAreaMaterial",function(){return s.EveSOFDataAreaMaterial});var i=r("./sof/shared/EveSOFDataBooster.js");r.d(t,"EveSOFDataBooster",function(){return i.EveSOFDataBooster});var a=r("./sof/shared/EveSOFDataBoosterShape.js");r.d(t,"EveSOFDataBoosterShape",function(){return a.EveSOFDataBoosterShape});var o=r("./sof/shared/EveSOFDataInstancedMesh.js");r.d(t,"EveSOFDataInstancedMesh",function(){return o.EveSOFDataInstancedMesh});var u=r("./sof/shared/EveSOFDataLogo.js");r.d(t,"EveSOFDataLogo",function(){return u.EveSOFDataLogo});var c=r("./sof/shared/EveSOFDataLogoSet.js");r.d(t,"EveSOFDataLogoSet",function(){return c.EveSOFDataLogoSet});var l=r("./sof/shared/EveSOFDataMaterial.js");r.d(t,"EveSOFDataMaterial",function(){return l.EveSOFDataMaterial});var h=r("./sof/shared/EveSOFDataParameter.js");r.d(t,"EveSOFDataParameter",function(){return h.EveSOFDataParameter});var d=r("./sof/shared/EveSOFDataTexture.js");r.d(t,"EveSOFDataTexture",function(){return d.EveSOFDataTexture});var f=r("./sof/shared/EveSOFDataTransform.js");r.d(t,"EveSOFDataTransform",function(){return f.EveSOFDataTransform})},"./state/Tr2StateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachine",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.startState=0,this.states=[]}static black(e){return[["name",e.string],["states",e.array],["startState",e.uint]]}}s.__isStaging=4},"./state/Tr2StateMachineState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineState",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.actions=[],this.finalizer=null,this.transitions=[]}static black(e){return[["actions",e.array],["finalizer",e.object],["name",e.string],["transitions",e.array]]}}s.__isStaging=4},"./state/Tr2StateMachineTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineTransition",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.condition=""}static black(e){return[["condition",e.string],["name",e.string]]}}s.__isStaging=4},"./state/Tr2SyncToAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SyncToAnimation",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{static black(e){return[]}}s.__isStaging=4},"./state/action/Tr2ActionAnimateCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateCurveSet",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.curveSet=null,this.value=""}static black(e){return[["curveSet",e.object],["value",e.string]]}}s.__isStaging=4},"./state/action/Tr2ActionAnimateValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateValue",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.attribute="",this.curve=null,this.path="",this.value=""}static black(e){return[["attribute",e.string],["curve",e.object],["path",e.path],["value",e.string]]}}s.__isStaging=4},"./state/action/Tr2ActionChildEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionChildEffect",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.childName="",this.path="",this.removeOnStop=!1}static black(e){return[["childName",e.string],["path",e.path],["removeOnStop",e.boolean]]}}s.__isStaging=4},"./state/action/Tr2ActionOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionOverlay",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.path=""}static black(e){return[["path",e.path]]}}s.__isStaging=4},"./state/action/Tr2ActionPlayCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayCurveSet",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.curveSetName="",this.rangeName="",this.syncToRange=!1}static black(e){return[["curveSetName",e.string],["rangeName",e.string],["syncToRange",e.boolean]]}}s.__isStaging=4},"./state/action/Tr2ActionPlayMeshAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayMeshAnimation",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.animation="",this.loops=0,this.mask=""}static black(e){return[["animation",e.string],["loops",e.uint],["mask",e.string]]}}s.__isStaging=4},"./state/action/Tr2ActionPlaySound.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlaySound",function(){return n});class n{constructor(){this.emitter="",this.event=""}static black(e){return[["emitter",e.string],["event",e.string]]}}n.__isStaging=4},"./state/action/Tr2ActionResetClipSphereCenter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionResetClipSphereCenter",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{static black(e){return[]}}s.__isStaging=4},"./state/action/Tr2ActionSetValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSetValue",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.attribute="",this.path="",this.value=""}static black(e){return[["attribute",e.string],["path",e.path],["value",e.string]]}}s.__isStaging=4},"./state/action/Tr2ActionSpawnParticles.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSpawnParticles",function(){return n});class n{static black(e){return[]}}n.__isStaging=4},"./state/action/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/action/Tr2ActionAnimateCurveSet.js");r.d(t,"Tr2ActionAnimateCurveSet",function(){return n.Tr2ActionAnimateCurveSet});var s=r("./state/action/Tr2ActionAnimateValue.js");r.d(t,"Tr2ActionAnimateValue",function(){return s.Tr2ActionAnimateValue});var i=r("./state/action/Tr2ActionChildEffect.js");r.d(t,"Tr2ActionChildEffect",function(){return i.Tr2ActionChildEffect});var a=r("./state/action/Tr2ActionOverlay.js");r.d(t,"Tr2ActionOverlay",function(){return a.Tr2ActionOverlay});var o=r("./state/action/Tr2ActionPlayCurveSet.js");r.d(t,"Tr2ActionPlayCurveSet",function(){return o.Tr2ActionPlayCurveSet});var u=r("./state/action/Tr2ActionPlayMeshAnimation.js");r.d(t,"Tr2ActionPlayMeshAnimation",function(){return u.Tr2ActionPlayMeshAnimation});var c=r("./state/action/Tr2ActionPlaySound.js");r.d(t,"Tr2ActionPlaySound",function(){return c.Tr2ActionPlaySound});var l=r("./state/action/Tr2ActionResetClipSphereCenter.js");r.d(t,"Tr2ActionResetClipSphereCenter",function(){return l.Tr2ActionResetClipSphereCenter});var h=r("./state/action/Tr2ActionSetValue.js");r.d(t,"Tr2ActionSetValue",function(){return h.Tr2ActionSetValue});var d=r("./state/action/Tr2ActionSpawnParticles.js");r.d(t,"Tr2ActionSpawnParticles",function(){return d.Tr2ActionSpawnParticles})},"./state/controller/Tr2Controller.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Controller",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.name="",this.isShared=!1,this.stateMachines=[],this.variables=[]}static black(e){return[["isShared",e.boolean],["stateMachines",e.array],["name",e.string],["variables",e.array]]}}s.__isStaging=4},"./state/controller/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerFloatVariable",function(){return n});class n{constructor(){this.name="",this.defaultValue=0,this.enumValues={},this.variableType=0}GetEnumsAsString(){let e=[];for(const t in this.enumValues)this.enumValues.hasOwnProperty(t)&&e.push("".concat(t,"=").concat(this.enumValues[t]));return e.sort().join(",")}static black(e){return[["name",e.string],["defaultValue",e.float],["enumValues",e.enums],["variableType",e.uint]]}}n.__isStaging=4},"./state/controller/Tr2ControllerReference.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerReference",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.path=""}static black(e){return[["path",e.path]]}}s.__isStaging=4},"./state/controller/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/controller/Tr2Controller.js");r.d(t,"Tr2Controller",function(){return n.Tr2Controller});var s=r("./state/controller/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",function(){return s.Tr2ControllerFloatVariable});var i=r("./state/controller/Tr2ControllerReference.js");r.d(t,"Tr2ControllerReference",function(){return i.Tr2ControllerReference})},"./state/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/action/index.js");r.d(t,"Tr2ActionAnimateCurveSet",function(){return n.Tr2ActionAnimateCurveSet}),r.d(t,"Tr2ActionAnimateValue",function(){return n.Tr2ActionAnimateValue}),r.d(t,"Tr2ActionChildEffect",function(){return n.Tr2ActionChildEffect}),r.d(t,"Tr2ActionOverlay",function(){return n.Tr2ActionOverlay}),r.d(t,"Tr2ActionPlayCurveSet",function(){return n.Tr2ActionPlayCurveSet}),r.d(t,"Tr2ActionPlayMeshAnimation",function(){return n.Tr2ActionPlayMeshAnimation}),r.d(t,"Tr2ActionPlaySound",function(){return n.Tr2ActionPlaySound}),r.d(t,"Tr2ActionResetClipSphereCenter",function(){return n.Tr2ActionResetClipSphereCenter}),r.d(t,"Tr2ActionSetValue",function(){return n.Tr2ActionSetValue}),r.d(t,"Tr2ActionSpawnParticles",function(){return n.Tr2ActionSpawnParticles});var s=r("./state/controller/index.js");r.d(t,"Tr2Controller",function(){return s.Tr2Controller}),r.d(t,"Tr2ControllerFloatVariable",function(){return s.Tr2ControllerFloatVariable}),r.d(t,"Tr2ControllerReference",function(){return s.Tr2ControllerReference});r("./state/variable/index.js");var i=r("./state/Tr2StateMachine.js");r.d(t,"Tr2StateMachine",function(){return i.Tr2StateMachine});var a=r("./state/Tr2StateMachineState.js");r.d(t,"Tr2StateMachineState",function(){return a.Tr2StateMachineState});var o=r("./state/Tr2StateMachineTransition.js");r.d(t,"Tr2StateMachineTransition",function(){return o.Tr2StateMachineTransition});var u=r("./state/Tr2SyncToAnimation.js");r.d(t,"Tr2SyncToAnimation",function(){return u.Tr2SyncToAnimation})},"./state/variable/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerFloatVariable",function(){return s});var n=r("./global/index.js");class s extends n.Tw2BaseClass{constructor(...e){super(...e),this.defaultValue=0,this.variableType=0}}},"./state/variable/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/variable/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",function(){return n.Tr2ControllerFloatVariable})}})});